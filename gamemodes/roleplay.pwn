// 58gqt%VK
 //includes
#include <a_samp>
#include <foreach>
#include <streamer>
#include <a_mysql>
#include <sscanf2>
#include <crashdetect>
#include <zcmd>
#include <easyDialog>
#include <djson>
#include <mSelection>
#include <YSI\y_ini>
#include <JunkBuster>
#include <yom_buttons>
#include <playerprogress>

#pragma tabsize	0

//versión actual
#define version_actual "4.20.3"
//web
#define web "www.insanityrp.ga"

//constants
#undef MAX_VEHICLES
#undef MAX_PLAYERS
#undef MAX_ACTORS

const
	MAX_VEHICLES = 1999,
	MAX_PLAYERS = 200,
	MAX_ACTORS = 500,
	MAX_CASAS = 500,
	MAX_FACCIONES = 50,
	MAX_PUERTAS = 100,
	MAX_VEHICULOS = 10000,
	MAX_MODIFICACIONES = 15,
	MAX_REPORTS = 50,
	MAX_NEGOCIOS = 100,
	MAX_ZONE_NAME = 32,
	MAX_OBJETOS_ADMIN = 200,
	MAX_CAJEROS = 40,
	MAX_ACTORES = 100,
	MAX_PING = 1500,
	MAX_GRAFFITIS = 50,
	MAX_REPARTOS = 50,
	MAX_AUTOS_SPAWNEADOS = 3
;

#define             MAX_UBICACIONES             (25)
#define             MAX_GARAGES              	(100)
#define				MAX_DAMAGES					(1000)
#define				MAX_BARRICADES 				(50)
#define 			TIME_RESPAWN 				(1800)
/*mysql

#define	sql_host "localhost"
#define	sql_user "root"
#define	sql_password ""
#define	sql_database "s36_fugados"*/

new MySQL: DBInsanity;
#define	sql_host "localhost"
#define	sql_user "root"
#define	sql_password ""
#define	sql_database "s36_fugados"

#define reg_int			cache_get_value_int
#define reg_float		cache_get_value_float
#define reg_string		cache_get_value_name

//old: "CUENTAS/%s.ini"
//old: "BACKUP/%s.ini"
//old: "ACTORES/%d.ini"
//old: "FACCIONES/%d.ini"
#define             UBICACIONES                 "UBICACIONES/%d.ini"
//old: "NEGOCIOS/%d.ini"
#define 			GARAGES_FILE 				"GARAGES/%d.ini"
//old: "PORTONES/%d.ini"
//old: "GRAFFITIS/%s.ini"
//old: "PROPIEDADES/%d.ini"

//macros
#define funcion%0(%1)				forward %0(%1); public %0(%1)
#define	GetVehicleName(%0)			VehicleName[GetVehicleModel(%0)-400]
#define	SetPVarInt(%0,%1,0);		DeletePVar(%0,%1);
#define Loop(%0,%1,%2)				for(new %0 = %2; %0 < %1; %0++)
#define GetNameVehicle(%0) 			VehicleName[%0-400]
#define PRESSED(%0) \
	(((newkeys & (%0)) == (%0)) && ((oldkeys & (%0)) != (%0)))
#define RELEASED(%0) \
	(((newkeys & (%0)) != (%0)) && ((oldkeys & (%0)) == (%0)))

//colores 51.79.52.185:7651
#define COLOR_GENERAL		0x00AE57FF
#define COLOR_RADIO			0x9B9BFFFF
#define	COLOR_ORANGE		0xFFA500FF
#define	COLOR_VIP			0xC93CCE00
#define	COLOR_MEGAPHONE		0xFF9B6AFF
#define	COLOR_GRAD1			0xB4B5B7FF
#define	COLOR_GRAD2 		0xBFC0C2FF
#define	COLOR_GRAD3			0xCBCCCEFF
#define	COLOR_GRAD4			0xD8D8D8FF
#define	COLOR_GRAD5			0xE3E3E3FF
#define	COLOR_GRAD6			0xF0F0F0FF
#define	COLOR_GREY			0xAFAFAFAA
#define	COLOR_GREEN			0x9EC73DAA
#define COLOR_GREEN2 		0x33AA33AA
#define	COLOR_RED			0xAA3333AA
#define	COLOR_LIGHTRED		0xFF6347AA
#define	COLOR_LIGHTBLUE		0x33CCFFAA
#define	COLOR_LIGHTGREEN	0x9ACD32AA
#define	COLOR_YELLOW		0xF5DEB3AA
#define COLOR_YELLOW2 		0xFFFF00AA
#define	COLOR_WHITE			0xFFFFFFAA
#define COLOR_FADE			0xE6E6E6E6
#define COLOR_FADE1			0xE6E6E6E6
#define COLOR_FADE2			0xC8C8C8C8
#define COLOR_FADE3			0xAAAAAAAA
#define COLOR_FADE4			0x8C8C8C8C
#define COLOR_FADE5			0x6E6E6E6E
#define COLOR_PURPLE		0xC2A2DAAA
//-
#define COLOR_RED2 0xFF0000FF
#define TEAM_CYAN_COLOR 0xFF8282AA
#define DEFAULT_COLOR 0xFFFFFF00
#define COLOR_STAT1 0xE0FFFFAA
#define COLOR_STAT2 0xCCE6E6FF
#define COLOR_FACTION 0xBDF38BFF
#define COLOR_DARKBLUE 0x1394BFFF
#define COLOR_GENANNOUNCE 0xA9C4E4FF	

//totales sql
new totalcasas = 1;				//casas dinámicas
new totalvehiculos = 1;			//vehículos dinámicos
new totalpuertas = 1;			//puertas dinámicas
new totalnegocios = 1;			//negocios dinámicos
new totalfacciones = 1;         //facciones dinámicas
new totalactores = 1;			//actores dinámicos
new totalobjetosadmin = 1;		//objetos dinámicos admin
new totalcajeros = 1;			//cajeros automáticos
new totalgraffitis = 1;			//graffitis dinámicos

// — /avisarpd uwu
new AvisoPD[MAX_PLAYERS];

new yalorecibieron = 0;

//new's by edinsonwalker

new conectado[MAX_PLAYERS];

new TimerRepartos[MAX_PLAYERS];
new RepartoID[MAX_PLAYERS];
new RepartoCasa[MAX_PLAYERS];
new RepartoNegocio[MAX_PLAYERS];
new RepartoPago[MAX_PLAYERS];

new CulandoPrecio[MAX_PLAYERS];
new CulandoCliente[MAX_PLAYERS];
new CulandoNegocio[MAX_PLAYERS];

new ConTransferir[MAX_PLAYERS];
new NumeroMensaje[MAX_PLAYERS];
new playerGraffitiTimer[MAX_PLAYERS];

new AutosSpawneados[MAX_PLAYERS];

//animaciones
static const g_aPreloadLibs[][] =
{
	"AIRPORT",      "ATTRACTORS",   "BAR",          "BASEBALL",     "BD_FIRE",
	"BEACH",        "BENCHPRESS",   "BF_INJECTION", "BIKE_DBZ",     "BIKED",
	"BIKEH",        "BIKELEAP",     "BIKES",        "BIKEV",        "BLOWJOBZ",
	"BMX",          "BOMBER",       "BOX",          "BSKTBALL",     "BUDDY",
	"BUS",          "CAMERA",       "CAR",          "CAR_CHAT",     "CARRY",
	"CASINO",       "CHAINSAW",     "CHOPPA",       "CLOTHES",      "COACH",
	"COLT45",       "COP_AMBIENT",  "COP_DVBYZ",    "CRACK",        "CRIB",
	"DAM_JUMP",     "DANCING",      "DEALER",       "DILDO",        "DODGE",
	"DOZER",        "DRIVEBYS",     "FAT",          "FIGHT_B",      "FIGHT_C",
	"FIGHT_D",      "FIGHT_E",      "FINALE",       "FINALE2",      "FLAME",
	"FLOWERS",      "FOOD",         "FREEWEIGHTS",  "GANGS",        "GFUNK",
	"GHANDS",       "GHETTO_DB",    "GOGGLES",      "GRAFFITI",     "GRAVEYARD",
	"GRENADE",      "GYMNASIUM",    "HAIRCUTS",     "HEIST9",       "INT_HOUSE",
	"INT_OFFICE",   "INT_SHOP",     "JST_BUISNESS", "KART",         "KISSING",
	"KNIFE",        "LAPDAN1",      "LAPDAN2",      "LAPDAN3",      "LOWRIDER",
	"MD_CHASE",     "MD_END",       "MEDIC",        "MISC",         "MTB",
	"MUSCULAR",     "NEVADA",       "ON_LOOKERS",   "OTB",          "PARACHUTE",
	"PARK",         "PAULNMAC",     "PED",          "PLAYER_DVBYS", "PLAYIDLES",
	"POLICE",       "POOL",         "POOR",         "PYTHON",       "QUAD",
	"QUAD_DBZ",     "RAPPING",      "RIFLE",        "RIOT",         "ROB_BANK",
	"ROCKET",       "RUNNINGMAN",   "RUSTLER",      "RYDER",        "SCRATCHING",
	"SEX",          "SHAMAL",       "SHOP",         "SHOTGUN",      "SILENCED",
	"SKATE",        "SMOKING",      "SNIPER",       "SNM",          "SPRAYCAN",
	"STRIP",        "SUNBATHE",     "SWAT",         "SWEET",        "SWIM",
	"SWORD",        "TANK",         "TATTOOS",      "TEC",          "TRAIN",
	"TRUCK",        "UZI",          "VAN",          "VENDING",      "VORTEX",
	"WAYFARER",     "WEAPONS",      "WOP",          "WUZI"
};

new TimerWeaponCreate[MAX_PLAYERS];
new MensajeMuelto[MAX_PLAYERS];

new depositoembargo, open_embargo = 0;
new ObjSD_derecha, sd_derecha1, sd_derecha2, ObjSD_izquierda, sd_izquierda1, sd_izquierda2;

new PlayerText:draw_money[MAX_PLAYERS];
new GetTextDraw[MAX_PLAYERS];

new PlayerText:TD_Velocimetro[MAX_PLAYERS][3];

// Visitar casa — Artic 26/11/2020
new VisitandoCasa[MAX_PLAYERS];
new CasaID[MAX_PLAYERS];
new DelayVisita[MAX_PLAYERS];

//puntos de embargos
static const Float: point_embargo[][] =
{
	{1605.6499, -1838.4331, 13.4624, -90.1200},
	{1605.6586, -1831.6129, 13.4624, -90.1200},
	{1605.6606, -1826.2428, 13.4624, -90.1200},
	{1605.4218, -1820.1104, 13.4624, -90.1200},
	{1600.9728, -1814.9929, 13.4624, -90.1200},
	{1600.4681, -1809.2795, 13.4624, -90.1200},
	{1610.5453, -1801.6992, 13.4624, -153.1800},
	{1649.7317, -1807.5803, 13.4624, -175.8000},
	{1655.2010, -1807.9847, 13.4624, -175.8000},
	{1655.7618, -1817.2306, 13.4624, -260.5800},
	{1656.4235, -1822.8483, 13.4624, -260.5800},
	{1655.6775, -1828.7864, 13.4624, -269.3400},
	{1654.6257, -1834.6389, 13.4624, -269.3400},
	{1653.7234, -1839.9099, 13.4624, -272.1600},
	{1635.1046, -1844.4045, 13.4624, -370.5000},
	{1629.9003, -1844.0775, 13.4624, -356.7600}
};

new ConBalasGoma[MAX_PLAYERS];
new PlayerText:TDping_fps[MAX_PLAYERS];
new test_rol[MAX_PLAYERS];

new show_velocimetro[MAX_PLAYERS]; //velocimetro de gcrp diciembre 2019
new Text:velocimetro_nice[3];
new PlayerText:velocimetro_pice[MAX_PLAYERS][4];
new PlayerBar:velocimetro_bar[MAX_PLAYERS];

new tipo_anuncio[MAX_PLAYERS];
new DiferenciaAnuncio = -1;
new TimerReportarBug = -1;

new AnunceID = 0;
new AnunceString1[256];
new AnunceString2[256];
new AnunceString3[256];
new AnunceString4[256];
new PlayerViewAnunce[MAX_PLAYERS];
new Text:TD_Anuncio[5];

new LlegandoLlamadoMecanico[MAX_PLAYERS];
new EnLlamadoMecanico[MAX_PLAYERS];
new TallerCliente[MAX_PLAYERS];
new TallerMecanico[MAX_PLAYERS];
new TallerColor1[MAX_PLAYERS];
new TallerColor2[MAX_PLAYERS];
new TallerCosto[MAX_PLAYERS];
new ID_Taller_Cobro[MAX_PLAYERS];
new ID_Veh_Cobro[MAX_PLAYERS];

new
	ColorList[] = {
	    0x000000FF, 0xF5F5F5FF, 0x2A77A1FF, 0x840410FF, 0x263739FF, 0x86446EFF, 0xD78E10FF, 0x4C75B7FF, 0xBDBEC6FF, 0x5E7072FF,
		0x46597AFF, 0x656A79FF, 0x5D7E8DFF, 0x58595AFF, 0xD6DAD6FF, 0x9CA1A3FF, 0x335F3FFF, 0x730E1AFF, 0x7B0A2AFF, 0x9F9D94FF,
		0x3B4E78FF, 0x732E3EFF, 0x691E3BFF, 0x96918CFF, 0x515459FF, 0x3F3E45FF, 0xA5A9A7FF, 0x635C5AFF, 0x3D4A68FF, 0x979592FF,
		0x421F21FF, 0x5F272BFF, 0x8494ABFF, 0x767B7CFF, 0x646464FF, 0x5A5752FF, 0x252527FF, 0x2D3A35FF, 0x93A396FF, 0x6D7A88FF,
		0x221918FF, 0x6F675FFF, 0x7C1C2AFF, 0x5F0A15FF, 0x193826FF, 0x5D1B20FF, 0x9D9872FF, 0x7A7560FF, 0x989586FF, 0xADB0B0FF,
		0x848988FF, 0x304F45FF, 0x4D6268FF, 0x162248FF, 0x272F4BFF, 0x7D6256FF, 0x9EA4ABFF, 0x9C8D71FF, 0x6D1822FF, 0x4E6881FF,
		0x9C9C98FF, 0x917347FF, 0x661C26FF, 0x949D9FFF, 0xA4A7A5FF, 0x8E8C46FF, 0x341A1EFF, 0x6A7A8CFF, 0xAAAD8EFF, 0xAB988FFF,
		0x851F2EFF, 0x6F8297FF, 0x585853FF, 0x9AA790FF, 0x601A23FF, 0x20202CFF, 0xA4A096FF, 0xAA9D84FF, 0x78222BFF, 0x0E316DFF,
		0x722A3FFF, 0x7B715EFF, 0x741D28FF, 0x1E2E32FF, 0x4D322FFF, 0x7C1B44FF, 0x2E5B20FF, 0x395A83FF, 0x6D2837FF, 0xA7A28FFF,
		0xAFB1B1FF, 0x364155FF, 0x6D6C6EFF, 0x0F6A89FF, 0x204B6BFF, 0x2B3E57FF, 0x9B9F9DFF, 0x6C8495FF, 0x4D8495FF, 0xAE9B7FFF,
		0x406C8FFF, 0x1F253BFF, 0xAB9276FF, 0x134573FF, 0x96816CFF, 0x64686AFF, 0x105082FF, 0xA19983FF, 0x385694FF, 0x525661FF,
		0x7F6956FF, 0x8C929AFF, 0x596E87FF, 0x473532FF, 0x44624FFF, 0x730A27FF, 0x223457FF, 0x640D1BFF, 0xA3ADC6FF, 0x695853FF,
		0x9B8B80FF, 0x620B1CFF, 0x5B5D5EFF, 0x624428FF, 0x731827FF, 0x1B376DFF, 0xEC6AAEFF, 0x000000FF, 0x177517FF, 0x210606FF,
		0x125478FF, 0x452A0DFF, 0x571E1EFF, 0x010701FF, 0x25225AFF, 0x2C89AAFF, 0x8A4DBDFF, 0x35963AFF, 0xB7B7B7FF, 0x464C8DFF,
		0x84888CFF, 0x817867FF, 0x817A26FF, 0x6A506FFF, 0x583E6FFF, 0x8CB972FF, 0x824F78FF, 0x6D276AFF, 0x1E1D13FF, 0x1E1306FF,
		0x1F2518FF, 0x2C4531FF, 0x1E4C99FF, 0x2E5F43FF, 0x1E9948FF, 0x1E9999FF, 0x999976FF, 0x7C8499FF, 0x992E1EFF, 0x2C1E08FF,
		0x142407FF, 0x993E4DFF, 0x1E4C99FF, 0x198181FF, 0x1A292AFF, 0x16616FFF, 0x1B6687FF, 0x6C3F99FF, 0x481A0EFF, 0x7A7399FF,
		0x746D99FF, 0x53387EFF, 0x222407FF, 0x3E190CFF, 0x46210EFF, 0x991E1EFF, 0x8D4C8DFF, 0x805B80FF, 0x7B3E7EFF, 0x3C1737FF,
		0x733517FF, 0x781818FF, 0x83341AFF, 0x8E2F1CFF, 0x7E3E53FF, 0x7C6D7CFF, 0x020C02FF, 0x072407FF, 0x163012FF, 0x16301BFF,
		0x642B4FFF, 0x368452FF, 0x999590FF, 0x818D96FF, 0x99991EFF, 0x7F994CFF, 0x839292FF, 0x788222FF, 0x2B3C99FF, 0x3A3A0BFF,
		0x8A794EFF, 0x0E1F49FF, 0x15371CFF, 0x15273AFF, 0x375775FF, 0x060820FF, 0x071326FF, 0x20394BFF, 0x2C5089FF, 0x15426CFF,
		0x103250FF, 0x241663FF, 0x692015FF, 0x8C8D94FF, 0x516013FF, 0x090F02FF, 0x8C573AFF, 0x52888EFF, 0x995C52FF, 0x99581EFF,
		0x993A63FF, 0x998F4EFF, 0x99311EFF, 0x0D1842FF, 0x521E1EFF, 0x42420DFF, 0x4C991EFF, 0x082A1DFF, 0x96821DFF, 0x197F19FF,
		0x3B141FFF, 0x745217FF, 0x893F8DFF, 0x7E1A6CFF, 0x0B370BFF, 0x27450DFF, 0x071F24FF, 0x784573FF, 0x8A653AFF, 0x732617FF,
		0x319490FF, 0x56941DFF, 0x59163DFF, 0x1B8A2FFF, 0x38160BFF, 0x041804FF, 0x355D8EFF, 0x2E3F5BFF, 0x561A28FF, 0x4E0E27FF,
		0x706C67FF, 0x3B3E42FF, 0x2E2D33FF, 0x7B7E7DFF, 0x4A4442FF, 0x28344EFF
	};

new Float: PosSpawnBug[MAX_PLAYERS][4], PosVwBug[MAX_PLAYERS], PosIntBug[MAX_PLAYERS];
new LockStatus[MAX_VEHICLES];

new EditandoObjetoJ[MAX_PLAYERS];

new Altavoz[MAX_PLAYERS];
new EnLlamada[MAX_PLAYERS];
new ToqueLlamada[MAX_PLAYERS];
new PersonaEnLlamada[MAX_PLAYERS];
new ToqueLlamadaTimer[MAX_PLAYERS];

// centralita, por articsito uwu 03/12/2020
enum centralita
{
	c_id,							//id llamado
	c_nombre[MAX_PLAYER_NAME],		//nombre identificado
	c_lugar[128],					//lugar que dieron
	c_situacion[128], 				//emergencia dada
	c_tipo,							//1- PD, 2- SD
	Float:c_pos[3],					//rastreo exacto uwu
	c_localizacion[MAX_ZONE_NAME],	//localización automática
	c_atendida,						//atendieron o aún no	
	c_negocio, 						//negocio id x si llamaron XD
	c_timer							//se borrará XD
}
new InfoCentralita[50][centralita];
new llamadaJugador[MAX_PLAYERS];
new llamadaPolicia[MAX_PLAYERS];

// job de delincuente
new TiempoRobo[MAX_PLAYERS];
new HaRobado[MAX_PLAYERS];
new Float:PosicionRobo[3];


//sistema de boombox by GCRP
enum boomboxInfo
{
	Float: BB_x,
	Float: BB_y,
	Float: BB_z,
	BB_obj,
	BB_area,
	BB_int,
	BB_vw,
	Text3D: BB_label,
};
new InfoBoombox[MAX_PLAYERS][boomboxInfo];

//
new Text:TDmariguana[3];
new edicion_sql_actual[MAX_PLAYERS];
new Text:TDLogin[4];
new ClimaGeneral = 14;

new ContadorCuraciones[MAX_PLAYERS];
new random_abstinence[MAX_PLAYERS];
new abstinence_power[MAX_PLAYERS];

new UsedFind[MAX_PLAYERS];
new WhoFind[MAX_PLAYERS];

new bool:playerTextdraw[MAX_PLAYERS];
new Text3D:playerVehicleTextdraw[MAX_PLAYERS];

new IntentosRespuesta[MAX_PLAYERS];

new CountKick[MAX_PLAYERS];
new TimerCkick[MAX_PLAYERS];
new CountBan[MAX_PLAYERS];
new TimerCban[MAX_PLAYERS];
new CountWarn[MAX_PLAYERS];
new TimerCwarn[MAX_PLAYERS];

new GiftAllowed;
new FabricaID[MAX_PLAYERS];
new FabricaSexo[MAX_PLAYERS];

new PlayerDuda[MAX_PLAYERS];
new PlayerTextoDuda[MAX_PLAYERS][256];

new FondosAnuncios = 0;
new TaxAnuncios = 0;

new id_negocio[MAX_PLAYERS];


new lspdPuerta[2], lspdBoton[4];
new LSPD_NEW1, LSPD_NEW2, LSPD_NEW3, LSPD_NEW4, LSPD_NEW5, LSPD_NEW6, LSPD_NEW7, LSPD_NEW8; // LSPD New

new mmaguebo_abusadol[MAX_PLAYERS];
new slotselection[MAX_PLAYERS];

new GunVendedor[MAX_PLAYERS];
new GunCliente[MAX_PLAYERS];
new GunObjeto[MAX_PLAYERS];
new GunCantidad[MAX_PLAYERS];
new GunPrecio[MAX_PLAYERS];

new PayDayLeft = 60;
new PaydayOn = 0;
new PayDaySecond = 120;

new Text:TD_Account[2]; // Imagen cargado de cuenta by EdinsonWalker (11/01/2020) es un regalo xd
new PlayerText:TD_AccountSkin[MAX_PLAYERS];

new Osql_vehicle[MAX_PLAYERS];
new Pla_vehicle[MAX_PLAYERS];
new Price_vehicle[MAX_PLAYERS];

new GiveKeysTo[MAX_PLAYERS];

new Taseado[MAX_PLAYERS]; //nuevo táser
new TaserRecarga[MAX_PLAYERS];
new RecargarTiempo[MAX_PLAYERS];
new CederTiempo[MAX_PLAYERS];
new	countGameTime[MAX_PLAYERS]; //variable update cada 5seg la posición del jugador

new timer_herido[MAX_PLAYERS];
new Text:TD_fechahora;
new intentos_load[MAX_PLAYERS];
new Text:TD_Load[2];

new Text:txtAnimHelper;
new gPlayerUsingLoopingAnim[MAX_PLAYERS];

new RandomMascara[MAX_PLAYERS]; //new mascara by edinsonwalker

new CommandSpamTimes[MAX_PLAYERS];
new CommandSpamUnmute[MAX_PLAYERS];

#define IDObj_Admin 505

//nuevo sistema de compra de skin by EdinsonWalker (18/01/2020)
#define Compra_Skin 750
#define Actor_Skin 751
#define Equipo_Skin 752
#define Fabrica_Skin 753
#define Clinica_Skin 754
#define VIP_Skin 755

new actore_skin[MAX_PLAYERS];

enum mainS
{
	sModelo,    // id skin samp
	sSexo,      // 1: masculino - 2: femenino
	sTipo,		// 0: no existe - 1: civil - 2: banda - 3: mafia - 4: sexy - 5: facción - 6: premium - 7: admin
};

static const InfoSkin[][mainS] =
{
	{0, 0, 0},
	{1, 1, 1},
	{2, 1, 1},
	{3, 1, 1},
	{4, 1, 2},
	{5, 1, 2},
	{6, 1, 1},
	{7, 1, 1},
	{8, 1, 1},
	{9, 2, 1},
	{10, 2, 1},
	{11, 2, 1},
	{12, 2, 1},
	{13, 2, 2},
	{14, 1, 1},
	{15, 1, 1},
	{16, 1, 1},
	{17, 1, 1},
	{18, 1, 4},
	{19, 1, 2},
	{20, 1, 1},
	{21, 1, 2},
	{22, 1, 1},
	{23, 1, 1},
	{24, 1, 1},
	{25, 1, 1},
	{26, 1, 1},
	{27, 1, 1},
	{28, 1, 2},
	{29, 1, 2},
	{30, 1, 2},
	{31, 2, 1},
	{32, 1, 1},
	{33, 1, 3},
	{34, 1, 1},
	{35, 1, 1},
	{36, 1, 1},
	{37, 1, 1},
	{38, 2, 1},
	{39, 2, 1},
	{40, 2, 1},
	{41, 2, 1},
	{42, 1, 1},
	{43, 1, 3},
	{44, 1, 1},
	{45, 1, 4},
	{46, 1, 3},
	{47, 1, 2},
	{48, 1, 2},
	{49, 1, 3},
	{50, 1, 1},
	{51, 1, 1},
	{52, 1, 1},
	{53, 2, 1},
	{54, 2, 1},
	{55, 2, 1},
	{56, 2, 1},
	{57, 1, 1},
	{58, 1, 1},
	{59, 1, 1},
	{60, 1, 1},
	{61, 1, 1},
	{62, 1, 1},
	{63, 2, 4},
	{64, 2, 4},
	{65, 2, 2},
	{66, 1, 2},
	{67, 1, 2},
	{68, 1, 1},
	{69, 2, 2},
	{70, 1, 5},
	{71, 1, 5},
	{72, 1, 3},
	{73, 1, 1},
	{74, 0, 0},
	{75, 2, 4},
	{76, 2, 1},
	{77, 2, 1},
	{78, 1, 1},
	{79, 1, 1},
	{80, 1, 1},
	{81, 1, 1},
	{82, 1, 1},
	{83, 1, 1},
	{84, 1, 1},
	{85, 2, 4},
	{86, 1, 6},
	{87, 2, 6},
	{88, 2, 1},
	{89, 2, 1},
	{90, 2, 1},
	{91, 2, 1},
	{92, 2, 4},
	{93, 2, 1},
	{94, 1, 1},
	{95, 1, 1},
	{96, 1, 1},
	{97, 1, 4},
	{98, 1, 3},
	{99, 1, 1},
	{100, 1, 2},
	{101, 1, 1},
	{102, 1, 2},
	{103, 1, 2},
	{104, 1, 2},
	{105, 1, 2},
	{106, 1, 2},
	{107, 1, 2},
	{108, 1, 2},
	{109, 1, 2},
	{110, 1, 2},
	{111, 1, 3},
	{112, 1, 3},
	{113, 1, 3},
	{114, 1, 2},
	{115, 1, 2},
	{116, 1, 2},
	{117, 1, 3},
	{118, 1, 3},
	{119, 1, 3},
	{120, 1, 3},
	{121, 1, 3},
	{122, 1, 3},
	{123, 1, 3},
	{124, 1, 3},
	{125, 1, 3},
	{126, 1, 3},
	{127, 1, 3},
	{128, 1, 1},
	{129, 2, 1},
	{130, 2, 1},
	{131, 2, 1},
	{132, 1, 1},
	{133, 1, 1},
	{134, 1, 1},
	{135, 1, 1},
	{136, 1, 1},
	{137, 1, 1},
	{138, 2, 4},
	{139, 2, 4},
	{140, 2, 4},
	{141, 2, 3},
	{142, 1, 1},
	{143, 1, 1},
	{144, 1, 6},
	{145, 2, 6},
	{146, 1, 6},
	{147, 1, 1},
	{148, 2, 1},
	{149, 1, 6},
	{150, 2, 1},
	{151, 2, 6},
	{152, 2, 4},
	{153, 1, 1},
	{154, 1, 4},
	{155, 1, 1},
	{156, 1, 1},
	{157, 2, 1},
	{158, 1, 1},
	{159, 1, 1},
	{160, 1, 1},
	{161, 1, 1},
	{162, 1, 6},
	{163, 1, 1},
	{164, 1, 1},
	{165, 1, 1},
	{166, 1, 1},
	{167, 1, 6},
	{168, 1, 1},
	{169, 2, 3},
	{170, 1, 1},
	{171, 1, 1},
	{172, 2, 1},
	{173, 1, 2},
	{174, 1, 2},
	{175, 1, 2},
	{176, 1, 1},
	{177, 1, 1},
	{178, 2, 4},
	{179, 1, 4},
	{180, 1, 1},
	{181, 1, 6},
	{182, 1, 1},
	{183, 1, 1},
	{184, 1, 1},
	{185, 1, 1},
	{186, 1, 3},
	{187, 1, 3},
	{188, 1, 1},
	{189, 1, 1},
	{190, 2, 2},
	{191, 2, 1},
	{192, 2, 6},
	{193, 2, 2},
	{194, 2, 1},
	{195, 2, 2},
	{196, 2, 1},
	{197, 2, 1},
	{198, 2, 1},
	{199, 2, 1},
	{200, 1, 1},
	{201, 2, 1},
	{202, 1, 1},
	{203, 1, 1},
	{204, 1, 1},
	{205, 2, 6},
	{206, 1, 1},
	{207, 2, 2},
	{208, 1, 3},
	{209, 1, 1},
	{210, 1, 1},
	{211, 2, 7},
	{212, 1, 1},
	{213, 1, 1},
	{214, 2, 6},
	{215, 2, 1},
	{216, 2, 1},
	{217, 1, 7},
	{218, 2, 1},
	{219, 2, 1},
	{220, 1, 1},
	{221, 1, 1},
	{222, 1, 1},
	{223, 1, 1},
	{224, 2, 3},
	{225, 2, 3},
	{226, 2, 1},
	{227, 1, 1},
	{228, 1, 3},
	{229, 1, 3},
	{230, 1, 1},
	{231, 2, 1},
	{232, 2, 1},
	{233, 2, 6},
	{234, 1, 1},
	{235, 1, 1},
	{236, 1, 6},
	{237, 2, 4},
	{238, 2, 4},
	{239, 1, 1},
	{240, 1, 1},
	{241, 1, 6},
	{242, 1, 6},
	{243, 2, 2},
	{244, 2, 4},
	{245, 2, 2},
	{246, 2, 6},
	{247, 1, 2},
	{248, 1, 2},
	{249, 1, 3},
	{250, 1, 1},
	{251, 2, 4},
	{252, 1, 4},
	{253, 1, 1},
	{254, 1, 2},
	{255, 1, 1},
	{256, 2, 4},
	{257, 2, 4},
	{258, 1, 3},
	{259, 1, 3},
	{260, 1, 1},
	{261, 1, 1},
	{262, 1, 1},
	{263, 2, 3},
	{264, 1, 6},
	{265, 1, 6},
	{266, 1, 6},
	{267, 1, 5},
	{268, 1, 7},
	{269, 1, 6},
	{270, 1, 6},
	{271, 1, 6},
	{272, 1, 3},
	{273, 1, 3},
	{274, 1, 5},
	{275, 1, 5},
	{276, 1, 5},
	{277, 1, 5},
	{278, 1, 5},
	{279, 1, 5},
	{280, 1, 5},
	{281, 1, 5},
	{282, 1, 5},
	{283, 1, 5},
	{284, 1, 5},
	{285, 1, 5},
	{286, 1, 5},
	{287, 1, 5},
	{288, 1, 5},
	{289, 1, 6},
	{290, 1, 6},
	{291, 1, 1},
	{292, 1, 6},
	{293, 1, 6},
	{294, 1, 3},
	{295, 1, 1},
	{296, 1, 6},
	{297, 1, 1},
	{298, 2, 6},
	{299, 1, 6},
	{300, 1, 5},
	{301, 1, 5},
	{302, 1, 5},
	{303, 1, 1},
	{304, 1, 1},
	{305, 1, 6},
	{306, 2, 5},
	{307, 2, 5},
	{308, 2, 5},
	{309, 2, 5},
	{310, 1, 5},
	{311, 1, 5}
};

/*uwucmdz(playerid, params[])
{
	new skin, sexo, tipo;
	if (sscanf(params, "ddd", skin, sexo, tipo)) return 1;
	new File: fileGformat = fopen("skinsall.txt", io_append);
	new sz_logEntry[255];

	format(sz_logEntry, sizeof(sz_logEntry), "{%d, %d, %d}\r\n", skin, sexo, tipo);
	fwrite(fileGformat, sz_logEntry);
	return fclose(fileGformat);
}*/

//antichit
enum antichit
{
	bool:teleport,
	bool:Balas
}
new AntiG[antichit];

enum antichitplayers
{
	Float:vidac1,
	Float:vidac2,
	BalasW
}
new Anti[MAX_PLAYERS][antichitplayers];

//include: a_zones
enum SAZONE_MAIN
{
	SAZONE_NAME[28],
	Float:SAZONE_AREA[6]
};

static const gSAZones[][SAZONE_MAIN] = // Majority of names and area coordinates adopted from Mabako's 'Zones Script' v0.2
{
	//	NAME                            AREA (Xmin,Ymin,Zmin,Xmax,Ymax,Zmax)
	{"The Big Ear",	                {-410.00,1403.30,-3.00,-137.90,1681.20,200.00}},
	{"Aldea Malvada",               {-1372.10,2498.50,0.00,-1277.50,2615.30,200.00}},
	{"Angel Pine",                  {-2324.90,-2584.20,-6.10,-1964.20,-2212.10,200.00}},
	{"Arco del Oeste",              {-901.10,2221.80,0.00,-592.00,2571.90,200.00}},
	{"Avispa Country Club",         {-2646.40,-355.40,0.00,-2270.00,-222.50,200.00}},
	{"Avispa Country Club",         {-2831.80,-430.20,-6.10,-2646.40,-222.50,200.00}},
	{"Avispa Country Club",         {-2361.50,-417.10,0.00,-2270.00,-355.40,200.00}},
	{"Avispa Country Club",         {-2667.80,-302.10,-28.80,-2646.40,-262.30,71.10}},
	{"Avispa Country Club",         {-2470.00,-355.40,0.00,-2270.00,-318.40,46.10}},
	{"Avispa Country Club",         {-2550.00,-355.40,0.00,-2470.00,-318.40,39.70}},
	{"Back o Beyond",               {-1166.90,-2641.10,0.00,-321.70,-1856.00,200.00}},
	{"Battery Point",               {-2741.00,1268.40,-4.50,-2533.00,1490.40,200.00}},
	{"Bayside",                     {-2741.00,2175.10,0.00,-2353.10,2722.70,200.00}},
	{"Bayside Marina",              {-2353.10,2275.70,0.00,-2153.10,2475.70,200.00}},
	{"Beacon Hill",                 {-399.60,-1075.50,-1.40,-319.00,-977.50,198.50}},
	{"Blackfield",                  {964.30,1203.20,-89.00,1197.30,1403.20,110.90}},
	{"Blackfield",                  {964.30,1403.20,-89.00,1197.30,1726.20,110.90}},
	{"Blackfield Chapel",           {1375.60,596.30,-89.00,1558.00,823.20,110.90}},
	{"Blackfield Chapel",           {1325.60,596.30,-89.00,1375.60,795.00,110.90}},
	{"Blackfield Intersection",     {1197.30,1044.60,-89.00,1277.00,1163.30,110.90}},
	{"Blackfield Intersection",     {1166.50,795.00,-89.00,1375.60,1044.60,110.90}},
	{"Blackfield Intersection",     {1277.00,1044.60,-89.00,1315.30,1087.60,110.90}},
	{"Blackfield Intersection",     {1375.60,823.20,-89.00,1457.30,919.40,110.90}},
	{"Blueberry",                   {104.50,-220.10,2.30,349.60,152.20,200.00}},
	{"Blueberry",                   {19.60,-404.10,3.80,349.60,-220.10,200.00}},
	{"Blueberry Acres",             {-319.60,-220.10,0.00,104.50,293.30,200.00}},
	{"Caligula's Palace",           {2087.30,1543.20,-89.00,2437.30,1703.20,110.90}},
	{"Caligula's Palace",           {2137.40,1703.20,-89.00,2437.30,1783.20,110.90}},
	{"Calton Heights",              {-2274.10,744.10,-6.10,-1982.30,1358.90,200.00}},
	{"Chinatown",                   {-2274.10,578.30,-7.60,-2078.60,744.10,200.00}},
	{"City Hall",                   {-2867.80,277.40,-9.10,-2593.40,458.40,200.00}},
	{"Come-A-Lot",                  {2087.30,943.20,-89.00,2623.10,1203.20,110.90}},
	{"Commerce",                    {1323.90,-1842.20,-89.00,1701.90,-1722.20,110.90}},
	{"Commerce",                    {1323.90,-1722.20,-89.00,1440.90,-1577.50,110.90}},
	{"Commerce",                    {1370.80,-1577.50,-89.00,1463.90,-1384.90,110.90}},
	{"Commerce",                    {1463.90,-1577.50,-89.00,1667.90,-1430.80,110.90}},
	{"Commerce",                    {1583.50,-1722.20,-89.00,1758.90,-1577.50,110.90}},
	{"Commerce",                    {1667.90,-1577.50,-89.00,1812.60,-1430.80,110.90}},
	{"Conference Center",           {1046.10,-1804.20,-89.00,1323.90,-1722.20,110.90}},
	{"Conference Center",           {1073.20,-1842.20,-89.00,1323.90,-1804.20,110.90}},
	{"Cranberry Station",           {-2007.80,56.30,0.00,-1922.00,224.70,100.00}},
	{"Creek",                       {2749.90,1937.20,-89.00,2921.60,2669.70,110.90}},
	{"Dillimore",                   {580.70,-674.80,-9.50,861.00,-404.70,200.00}},
	{"Doherty",                     {-2270.00,-324.10,-0.00,-1794.90,-222.50,200.00}},
	{"Doherty",                     {-2173.00,-222.50,-0.00,-1794.90,265.20,200.00}},
	{"Downtown",                    {-1982.30,744.10,-6.10,-1871.70,1274.20,200.00}},
	{"Downtown",                    {-1871.70,1176.40,-4.50,-1620.30,1274.20,200.00}},
	{"Downtown",                    {-1700.00,744.20,-6.10,-1580.00,1176.50,200.00}},
	{"Downtown",                    {-1580.00,744.20,-6.10,-1499.80,1025.90,200.00}},
	{"Downtown",                    {-2078.60,578.30,-7.60,-1499.80,744.20,200.00}},
	{"Downtown",                    {-1993.20,265.20,-9.10,-1794.90,578.30,200.00}},
	{"Downtown Los Santos",         {1463.90,-1430.80,-89.00,1724.70,-1290.80,110.90}},
	{"Downtown Los Santos",         {1724.70,-1430.80,-89.00,1812.60,-1250.90,110.90}},
	{"Downtown Los Santos",         {1463.90,-1290.80,-89.00,1724.70,-1150.80,110.90}},
	{"Downtown Los Santos",         {1370.80,-1384.90,-89.00,1463.90,-1170.80,110.90}},
	{"Downtown Los Santos",         {1724.70,-1250.90,-89.00,1812.60,-1150.80,110.90}},
	{"Downtown Los Santos",         {1370.80,-1170.80,-89.00,1463.90,-1130.80,110.90}},
	{"Downtown Los Santos",         {1378.30,-1130.80,-89.00,1463.90,-1026.30,110.90}},
	{"Downtown Los Santos",         {1391.00,-1026.30,-89.00,1463.90,-926.90,110.90}},
	{"Downtown Los Santos",         {1507.50,-1385.20,110.90,1582.50,-1325.30,335.90}},
	{"East Beach",                  {2632.80,-1852.80,-89.00,2959.30,-1668.10,110.90}},
	{"East Beach",                  {2632.80,-1668.10,-89.00,2747.70,-1393.40,110.90}},
	{"East Beach",                  {2747.70,-1668.10,-89.00,2959.30,-1498.60,110.90}},
	{"East Beach",                  {2747.70,-1498.60,-89.00,2959.30,-1120.00,110.90}},
	{"East Los Santos",             {2421.00,-1628.50,-89.00,2632.80,-1454.30,110.90}},
	{"East Los Santos",             {2222.50,-1628.50,-89.00,2421.00,-1494.00,110.90}},
	{"East Los Santos",             {2266.20,-1494.00,-89.00,2381.60,-1372.00,110.90}},
	{"East Los Santos",             {2381.60,-1494.00,-89.00,2421.00,-1454.30,110.90}},
	{"East Los Santos",             {2281.40,-1372.00,-89.00,2381.60,-1135.00,110.90}},
	{"East Los Santos",             {2381.60,-1454.30,-89.00,2462.10,-1135.00,110.90}},
	{"East Los Santos",             {2462.10,-1454.30,-89.00,2581.70,-1135.00,110.90}},
	{"Easter Basin",                {-1794.90,249.90,-9.10,-1242.90,578.30,200.00}},
	{"Easter Basin",                {-1794.90,-50.00,-0.00,-1499.80,249.90,200.00}},
	{"Easter Bay Airport",          {-1499.80,-50.00,-0.00,-1242.90,249.90,200.00}},
	{"Easter Bay Airport",          {-1794.90,-730.10,-3.00,-1213.90,-50.00,200.00}},
	{"Easter Bay Airport",          {-1213.90,-730.10,0.00,-1132.80,-50.00,200.00}},
	{"Easter Bay Airport",          {-1242.90,-50.00,0.00,-1213.90,578.30,200.00}},
	{"Easter Bay Airport",          {-1213.90,-50.00,-4.50,-947.90,578.30,200.00}},
	{"Easter Bay Airport",          {-1315.40,-405.30,15.40,-1264.40,-209.50,25.40}},
	{"Easter Bay Airport",          {-1354.30,-287.30,15.40,-1315.40,-209.50,25.40}},
	{"Easter Bay Airport",          {-1490.30,-209.50,15.40,-1264.40,-148.30,25.40}},
	{"Easter Bay Chemicals",        {-1132.80,-768.00,0.00,-956.40,-578.10,200.00}},
	{"Easter Bay Chemicals",        {-1132.80,-787.30,0.00,-956.40,-768.00,200.00}},
	{"El Castillo del Diablo",      {-464.50,2217.60,0.00,-208.50,2580.30,200.00}},
	{"El Castillo del Diablo",      {-208.50,2123.00,-7.60,114.00,2337.10,200.00}},
	{"El Castillo del Diablo",      {-208.50,2337.10,0.00,8.40,2487.10,200.00}},
	{"El Corona",                   {1812.60,-2179.20,-89.00,1970.60,-1852.80,110.90}},
	{"El Corona",                   {1692.60,-2179.20,-89.00,1812.60,-1842.20,110.90}},
	{"El Quebrados",                {-1645.20,2498.50,0.00,-1372.10,2777.80,200.00}},
	{"Esplanade East",              {-1620.30,1176.50,-4.50,-1580.00,1274.20,200.00}},
	{"Esplanade East",              {-1580.00,1025.90,-6.10,-1499.80,1274.20,200.00}},
	{"Esplanade East",              {-1499.80,578.30,-79.60,-1339.80,1274.20,20.30}},
	{"Esplanade North",             {-2533.00,1358.90,-4.50,-1996.60,1501.20,200.00}},
	{"Esplanade North",             {-1996.60,1358.90,-4.50,-1524.20,1592.50,200.00}},
	{"Esplanade North",             {-1982.30,1274.20,-4.50,-1524.20,1358.90,200.00}},
	{"Fallen Tree",                 {-792.20,-698.50,-5.30,-452.40,-380.00,200.00}},
	{"Fallow Bridge",               {434.30,366.50,0.00,603.00,555.60,200.00}},
	{"Fern Ridge",                  {508.10,-139.20,0.00,1306.60,119.50,200.00}},
	{"Financial",                   {-1871.70,744.10,-6.10,-1701.30,1176.40,300.00}},
	{"Fisher's Lagoon",             {1916.90,-233.30,-100.00,2131.70,13.80,200.00}},
	{"Flint Intersection",          {-187.70,-1596.70,-89.00,17.00,-1276.60,110.90}},
	{"Flint Range",                 {-594.10,-1648.50,0.00,-187.70,-1276.60,200.00}},
	{"Fort Carson",                 {-376.20,826.30,-3.00,123.70,1220.40,200.00}},
	{"Foster Valley",               {-2270.00,-430.20,-0.00,-2178.60,-324.10,200.00}},
	{"Foster Valley",               {-2178.60,-599.80,-0.00,-1794.90,-324.10,200.00}},
	{"Foster Valley",               {-2178.60,-1115.50,0.00,-1794.90,-599.80,200.00}},
	{"Foster Valley",               {-2178.60,-1250.90,0.00,-1794.90,-1115.50,200.00}},
	{"Frederick Bridge",            {2759.20,296.50,0.00,2774.20,594.70,200.00}},
	{"Gant Bridge",                 {-2741.40,1659.60,-6.10,-2616.40,2175.10,200.00}},
	{"Gant Bridge",                 {-2741.00,1490.40,-6.10,-2616.40,1659.60,200.00}},
	{"Ganton",                      {2222.50,-1852.80,-89.00,2632.80,-1722.30,110.90}},
	{"Ganton",                      {2222.50,-1722.30,-89.00,2632.80,-1628.50,110.90}},
	{"Garcia",                      {-2411.20,-222.50,-0.00,-2173.00,265.20,200.00}},
	{"Garcia",                      {-2395.10,-222.50,-5.30,-2354.00,-204.70,200.00}},
	{"Garver Bridge",               {-1339.80,828.10,-89.00,-1213.90,1057.00,110.90}},
	{"Garver Bridge",               {-1213.90,950.00,-89.00,-1087.90,1178.90,110.90}},
	{"Garver Bridge",               {-1499.80,696.40,-179.60,-1339.80,925.30,20.30}},
	{"Glen Park",                   {1812.60,-1449.60,-89.00,1996.90,-1350.70,110.90}},
	{"Glen Park",                   {1812.60,-1100.80,-89.00,1994.30,-973.30,110.90}},
	{"Glen Park",                   {1812.60,-1350.70,-89.00,2056.80,-1100.80,110.90}},
	{"Green Palms",                 {176.50,1305.40,-3.00,338.60,1520.70,200.00}},
	{"Greenglass College",          {964.30,1044.60,-89.00,1197.30,1203.20,110.90}},
	{"Greenglass College",          {964.30,930.80,-89.00,1166.50,1044.60,110.90}},
	{"Hampton Barns",               {603.00,264.30,0.00,761.90,366.50,200.00}},
	{"Hankypanky Point",            {2576.90,62.10,0.00,2759.20,385.50,200.00}},
	{"Harry Gold Parkway",          {1777.30,863.20,-89.00,1817.30,2342.80,110.90}},
	{"Hashbury",                    {-2593.40,-222.50,-0.00,-2411.20,54.70,200.00}},
	{"Hilltop Farm",                {967.30,-450.30,-3.00,1176.70,-217.90,200.00}},
	{"Hunter Quarry",               {337.20,710.80,-115.20,860.50,1031.70,203.70}},
	{"Idlewood",                    {1812.60,-1852.80,-89.00,1971.60,-1742.30,110.90}},
	{"Idlewood",                    {1812.60,-1742.30,-89.00,1951.60,-1602.30,110.90}},
	{"Idlewood",                    {1951.60,-1742.30,-89.00,2124.60,-1602.30,110.90}},
	{"Idlewood",                    {1812.60,-1602.30,-89.00,2124.60,-1449.60,110.90}},
	{"Idlewood",                    {2124.60,-1742.30,-89.00,2222.50,-1494.00,110.90}},
	{"Idlewood",                    {1971.60,-1852.80,-89.00,2222.50,-1742.30,110.90}},
	{"Jefferson",                   {1996.90,-1449.60,-89.00,2056.80,-1350.70,110.90}},
	{"Jefferson",                   {2124.60,-1494.00,-89.00,2266.20,-1449.60,110.90}},
	{"Jefferson",                   {2056.80,-1372.00,-89.00,2281.40,-1210.70,110.90}},
	{"Jefferson",                   {2056.80,-1210.70,-89.00,2185.30,-1126.30,110.90}},
	{"Jefferson",                   {2185.30,-1210.70,-89.00,2281.40,-1154.50,110.90}},
	{"Jefferson",                   {2056.80,-1449.60,-89.00,2266.20,-1372.00,110.90}},
	{"Julius Thruway East",         {2623.10,943.20,-89.00,2749.90,1055.90,110.90}},
	{"Julius Thruway East",         {2685.10,1055.90,-89.00,2749.90,2626.50,110.90}},
	{"Julius Thruway East",         {2536.40,2442.50,-89.00,2685.10,2542.50,110.90}},
	{"Julius Thruway East",         {2625.10,2202.70,-89.00,2685.10,2442.50,110.90}},
	{"Julius Thruway North",        {2498.20,2542.50,-89.00,2685.10,2626.50,110.90}},
	{"Julius Thruway North",        {2237.40,2542.50,-89.00,2498.20,2663.10,110.90}},
	{"Julius Thruway North",        {2121.40,2508.20,-89.00,2237.40,2663.10,110.90}},
	{"Julius Thruway North",        {1938.80,2508.20,-89.00,2121.40,2624.20,110.90}},
	{"Julius Thruway North",        {1534.50,2433.20,-89.00,1848.40,2583.20,110.90}},
	{"Julius Thruway North",        {1848.40,2478.40,-89.00,1938.80,2553.40,110.90}},
	{"Julius Thruway North",        {1704.50,2342.80,-89.00,1848.40,2433.20,110.90}},
	{"Julius Thruway North",        {1377.30,2433.20,-89.00,1534.50,2507.20,110.90}},
	{"Julius Thruway South",        {1457.30,823.20,-89.00,2377.30,863.20,110.90}},
	{"Julius Thruway South",        {2377.30,788.80,-89.00,2537.30,897.90,110.90}},
	{"Julius Thruway West",         {1197.30,1163.30,-89.00,1236.60,2243.20,110.90}},
	{"Julius Thruway West",         {1236.60,2142.80,-89.00,1297.40,2243.20,110.90}},
	{"Juniper Hill",                {-2533.00,578.30,-7.60,-2274.10,968.30,200.00}},
	{"Juniper Hollow",              {-2533.00,968.30,-6.10,-2274.10,1358.90,200.00}},
	{"K.A.C.C. Military Fuels",     {2498.20,2626.50,-89.00,2749.90,2861.50,110.90}},
	{"Kincaid Bridge",              {-1339.80,599.20,-89.00,-1213.90,828.10,110.90}},
	{"Kincaid Bridge",              {-1213.90,721.10,-89.00,-1087.90,950.00,110.90}},
	{"Kincaid Bridge",              {-1087.90,855.30,-89.00,-961.90,986.20,110.90}},
	{"King's",                      {-2329.30,458.40,-7.60,-1993.20,578.30,200.00}},
	{"King's",                      {-2411.20,265.20,-9.10,-1993.20,373.50,200.00}},
	{"King's",                      {-2253.50,373.50,-9.10,-1993.20,458.40,200.00}},
	{"LVA Freight Depot",           {1457.30,863.20,-89.00,1777.40,1143.20,110.90}},
	{"LVA Freight Depot",           {1375.60,919.40,-89.00,1457.30,1203.20,110.90}},
	{"LVA Freight Depot",           {1277.00,1087.60,-89.00,1375.60,1203.20,110.90}},
	{"LVA Freight Depot",           {1315.30,1044.60,-89.00,1375.60,1087.60,110.90}},
	{"LVA Freight Depot",           {1236.60,1163.40,-89.00,1277.00,1203.20,110.90}},
	{"Las Barrancas",               {-926.10,1398.70,-3.00,-719.20,1634.60,200.00}},
	{"Las Brujas",                  {-365.10,2123.00,-3.00,-208.50,2217.60,200.00}},
	{"Las Colinas",                 {1994.30,-1100.80,-89.00,2056.80,-920.80,110.90}},
	{"Las Colinas",                 {2056.80,-1126.30,-89.00,2126.80,-920.80,110.90}},
	{"Las Colinas",                 {2185.30,-1154.50,-89.00,2281.40,-934.40,110.90}},
	{"Las Colinas",                 {2126.80,-1126.30,-89.00,2185.30,-934.40,110.90}},
	{"Las Colinas",                 {2747.70,-1120.00,-89.00,2959.30,-945.00,110.90}},
	{"Las Colinas",                 {2632.70,-1135.00,-89.00,2747.70,-945.00,110.90}},
	{"Las Colinas",                 {2281.40,-1135.00,-89.00,2632.70,-945.00,110.90}},
	{"Las Payasadas",               {-354.30,2580.30,2.00,-133.60,2816.80,200.00}},
	{"Las Venturas Airport",        {1236.60,1203.20,-89.00,1457.30,1883.10,110.90}},
	{"Las Venturas Airport",        {1457.30,1203.20,-89.00,1777.30,1883.10,110.90}},
	{"Las Venturas Airport",        {1457.30,1143.20,-89.00,1777.40,1203.20,110.90}},
	{"Las Venturas Airport",        {1515.80,1586.40,-12.50,1729.90,1714.50,87.50}},
	{"Last Dime Motel",             {1823.00,596.30,-89.00,1997.20,823.20,110.90}},
	{"Leafy Hollow",                {-1166.90,-1856.00,0.00,-815.60,-1602.00,200.00}},
	{"Liberty City",                {-1000.00,400.00,1300.00,-700.00,600.00,1400.00}},
	{"Lil' Probe Inn",              {-90.20,1286.80,-3.00,153.80,1554.10,200.00}},
	{"Linden Side",                 {2749.90,943.20,-89.00,2923.30,1198.90,110.90}},
	{"Linden Station",              {2749.90,1198.90,-89.00,2923.30,1548.90,110.90}},
	{"Linden Station",              {2811.20,1229.50,-39.50,2861.20,1407.50,60.40}},
	{"Little Mexico",               {1701.90,-1842.20,-89.00,1812.60,-1722.20,110.90}},
	{"Little Mexico",               {1758.90,-1722.20,-89.00,1812.60,-1577.50,110.90}},
	{"Los Flores",                  {2581.70,-1454.30,-89.00,2632.80,-1393.40,110.90}},
	{"Los Flores",                  {2581.70,-1393.40,-89.00,2747.70,-1135.00,110.90}},
	{"Los Santos International",    {1249.60,-2394.30,-89.00,1852.00,-2179.20,110.90}},
	{"Los Santos International",    {1852.00,-2394.30,-89.00,2089.00,-2179.20,110.90}},
	{"Los Santos International",    {1382.70,-2730.80,-89.00,2201.80,-2394.30,110.90}},
	{"Los Santos International",    {1974.60,-2394.30,-39.00,2089.00,-2256.50,60.90}},
	{"Los Santos International",    {1400.90,-2669.20,-39.00,2189.80,-2597.20,60.90}},
	{"Los Santos International",    {2051.60,-2597.20,-39.00,2152.40,-2394.30,60.90}},
	{"Marina",                      {647.70,-1804.20,-89.00,851.40,-1577.50,110.90}},
	{"Marina",                      {647.70,-1577.50,-89.00,807.90,-1416.20,110.90}},
	{"Marina",                      {807.90,-1577.50,-89.00,926.90,-1416.20,110.90}},
	{"Market",              	{787.40,-1416.20,-89.00,1072.60,-1310.20,110.90}},
	{"Market",                      {952.60,-1310.20,-89.00,1072.60,-1130.80,110.90}},
	{"Market",                      {1072.60,-1416.20,-89.00,1370.80,-1130.80,110.90}},
	{"Market",                      {926.90,-1577.50,-89.00,1370.80,-1416.20,110.90}},
	{"Market Station",              {787.40,-1410.90,-34.10,866.00,-1310.20,65.80}},
	{"Martin Bridge",               {-222.10,293.30,0.00,-122.10,476.40,200.00}},
	{"Missionary Hill",             {-2994.40,-811.20,0.00,-2178.60,-430.20,200.00}},
	{"Montgomery",                  {1119.50,119.50,-3.00,1451.40,493.30,200.00}},
	{"Montgomery",                  {1451.40,347.40,-6.10,1582.40,420.80,200.00}},
	{"Montgomery Intersection",     {1546.60,208.10,0.00,1745.80,347.40,200.00}},
	{"Montgomery Intersection",     {1582.40,347.40,0.00,1664.60,401.70,200.00}},
	{"Mulholland",                  {1414.00,-768.00,-89.00,1667.60,-452.40,110.90}},
	{"Mulholland",                  {1281.10,-452.40,-89.00,1641.10,-290.90,110.90}},
	{"Mulholland",                  {1269.10,-768.00,-89.00,1414.00,-452.40,110.90}},
	{"Mulholland",                  {1357.00,-926.90,-89.00,1463.90,-768.00,110.90}},
	{"Mulholland",                  {1318.10,-910.10,-89.00,1357.00,-768.00,110.90}},
	{"Mulholland",                  {1169.10,-910.10,-89.00,1318.10,-768.00,110.90}},
	{"Mulholland",                  {768.60,-954.60,-89.00,952.60,-860.60,110.90}},
	{"Mulholland",                  {687.80,-860.60,-89.00,911.80,-768.00,110.90}},
	{"Mulholland",                  {737.50,-768.00,-89.00,1142.20,-674.80,110.90}},
	{"Mulholland",                  {1096.40,-910.10,-89.00,1169.10,-768.00,110.90}},
	{"Mulholland",                  {952.60,-937.10,-89.00,1096.40,-860.60,110.90}},
	{"Mulholland",                  {911.80,-860.60,-89.00,1096.40,-768.00,110.90}},
	{"Mulholland",                  {861.00,-674.80,-89.00,1156.50,-600.80,110.90}},
	{"Mulholland Intersection",     {1463.90,-1150.80,-89.00,1812.60,-768.00,110.90}},
	{"North Rock",                  {2285.30,-768.00,0.00,2770.50,-269.70,200.00}},
	{"Ocean Docks",                 {2373.70,-2697.00,-89.00,2809.20,-2330.40,110.90}},
	{"Ocean Docks",                 {2201.80,-2418.30,-89.00,2324.00,-2095.00,110.90}},
	{"Ocean Docks",                 {2324.00,-2302.30,-89.00,2703.50,-2145.10,110.90}},
	{"Ocean Docks",                 {2089.00,-2394.30,-89.00,2201.80,-2235.80,110.90}},
	{"Ocean Docks",                 {2201.80,-2730.80,-89.00,2324.00,-2418.30,110.90}},
	{"Ocean Docks",                 {2703.50,-2302.30,-89.00,2959.30,-2126.90,110.90}},
	{"Ocean Docks",                 {2324.00,-2145.10,-89.00,2703.50,-2059.20,110.90}},
	{"Ocean Flats",                 {-2994.40,277.40,-9.10,-2867.80,458.40,200.00}},
	{"Ocean Flats",                 {-2994.40,-222.50,-0.00,-2593.40,277.40,200.00}},
	{"Ocean Flats",                 {-2994.40,-430.20,-0.00,-2831.80,-222.50,200.00}},
	{"Octane Springs",              {338.60,1228.50,0.00,664.30,1655.00,200.00}},
	{"Old Venturas Strip",          {2162.30,2012.10,-89.00,2685.10,2202.70,110.90}},
	{"Palisades",                   {-2994.40,458.40,-6.10,-2741.00,1339.60,200.00}},
	{"Palomino Creek",              {2160.20,-149.00,0.00,2576.90,228.30,200.00}},
	{"Paradiso",                    {-2741.00,793.40,-6.10,-2533.00,1268.40,200.00}},
	{"Pershing Square",             {1440.90,-1722.20,-89.00,1583.50,-1577.50,110.90}},
	{"Pilgrim",                     {2437.30,1383.20,-89.00,2624.40,1783.20,110.90}},
	{"Pilgrim",                     {2624.40,1383.20,-89.00,2685.10,1783.20,110.90}},
	{"Pilson Intersection",         {1098.30,2243.20,-89.00,1377.30,2507.20,110.90}},
	{"Pirates in Men's Pants",      {1817.30,1469.20,-89.00,2027.40,1703.20,110.90}},
	{"Playa del Seville",           {2703.50,-2126.90,-89.00,2959.30,-1852.80,110.90}},
	{"Prickle Pine",                {1534.50,2583.20,-89.00,1848.40,2863.20,110.90}},
	{"Prickle Pine",          	{1117.40,2507.20,-89.00,1534.50,2723.20,110.90}},
	{"Prickle Pine",         	{1848.40,2553.40,-89.00,1938.80,2863.20,110.90}},
	{"Prickle Pine",                {1938.80,2624.20,-89.00,2121.40,2861.50,110.90}},
	{"Queens",                      {-2533.00,458.40,0.00,-2329.30,578.30,200.00}},
	{"Queens",                      {-2593.40,54.70,0.00,-2411.20,458.40,200.00}},
	{"Queens",                      {-2411.20,373.50,0.00,-2253.50,458.40,200.00}},
	{"Randolph Industrial Estate",  {1558.00,596.30,-89.00,1823.00,823.20,110.90}},
	{"Redsands East",               {1817.30,2011.80,-89.00,2106.70,2202.70,110.90}},
	{"Redsands East",               {1817.30,2202.70,-89.00,2011.90,2342.80,110.90}},
	{"Redsands East",               {1848.40,2342.80,-89.00,2011.90,2478.40,110.90}},
	{"Redsands West",               {1236.60,1883.10,-89.00,1777.30,2142.80,110.90}},
	{"Redsands West",               {1297.40,2142.80,-89.00,1777.30,2243.20,110.90}},
	{"Redsands West",               {1377.30,2243.20,-89.00,1704.50,2433.20,110.90}},
	{"Redsands West",               {1704.50,2243.20,-89.00,1777.30,2342.80,110.90}},
	{"Regular Tom",                 {-405.70,1712.80,-3.00,-276.70,1892.70,200.00}},
	{"Richman",                     {647.50,-1118.20,-89.00,787.40,-954.60,110.90}},
	{"Richman",                     {647.50,-954.60,-89.00,768.60,-860.60,110.90}},
	{"Richman",                     {225.10,-1369.60,-89.00,334.50,-1292.00,110.90}},
	{"Richman",                     {225.10,-1292.00,-89.00,466.20,-1235.00,110.90}},
	{"Richman",                     {72.60,-1404.90,-89.00,225.10,-1235.00,110.90}},
	{"Richman",                     {72.60,-1235.00,-89.00,321.30,-1008.10,110.90}},
	{"Richman",                     {321.30,-1235.00,-89.00,647.50,-1044.00,110.90}},
	{"Richman",                     {321.30,-1044.00,-89.00,647.50,-860.60,110.90}},
	{"Richman",                     {321.30,-860.60,-89.00,687.80,-768.00,110.90}},
	{"Richman",                     {321.30,-768.00,-89.00,700.70,-674.80,110.90}},
	{"Robada Intersection",         {-1119.00,1178.90,-89.00,-862.00,1351.40,110.90}},
	{"Roca Escalante",              {2237.40,2202.70,-89.00,2536.40,2542.50,110.90}},
	{"Roca Escalante",              {2536.40,2202.70,-89.00,2625.10,2442.50,110.90}},
	{"Rockshore East",              {2537.30,676.50,-89.00,2902.30,943.20,110.90}},
	{"Rockshore West",              {1997.20,596.30,-89.00,2377.30,823.20,110.90}},
	{"Rockshore West",              {2377.30,596.30,-89.00,2537.30,788.80,110.90}},
	{"Rodeo",                       {72.60,-1684.60,-89.00,225.10,-1544.10,110.90}},
	{"Rodeo",                       {72.60,-1544.10,-89.00,225.10,-1404.90,110.90}},
	{"Rodeo",                       {225.10,-1684.60,-89.00,312.80,-1501.90,110.90}},
	{"Rodeo",                       {225.10,-1501.90,-89.00,334.50,-1369.60,110.90}},
	{"Rodeo",                       {334.50,-1501.90,-89.00,422.60,-1406.00,110.90}},
	{"Rodeo",                       {312.80,-1684.60,-89.00,422.60,-1501.90,110.90}},
	{"Rodeo",                       {422.60,-1684.60,-89.00,558.00,-1570.20,110.90}},
	{"Rodeo",                       {558.00,-1684.60,-89.00,647.50,-1384.90,110.90}},
	{"Rodeo",                       {466.20,-1570.20,-89.00,558.00,-1385.00,110.90}},
	{"Rodeo",                       {422.60,-1570.20,-89.00,466.20,-1406.00,110.90}},
	{"Rodeo",                       {466.20,-1385.00,-89.00,647.50,-1235.00,110.90}},
	{"Rodeo",                       {334.50,-1406.00,-89.00,466.20,-1292.00,110.90}},
	{"Royal Casino",                {2087.30,1383.20,-89.00,2437.30,1543.20,110.90}},
	{"San Andreas Sound",           {2450.30,385.50,-100.00,2759.20,562.30,200.00}},
	{"Santa Flora",                 {-2741.00,458.40,-7.60,-2533.00,793.40,200.00}},
	{"Santa Maria Beach",           {342.60,-2173.20,-89.00,647.70,-1684.60,110.90}},
	{"Santa Maria Beach",           {72.60,-2173.20,-89.00,342.60,-1684.60,110.90}},
	{"Shady Cabin",                 {-1632.80,-2263.40,-3.00,-1601.30,-2231.70,200.00}},
	{"Shady Creeks",                {-1820.60,-2643.60,-8.00,-1226.70,-1771.60,200.00}},
	{"Shady Creeks",                {-2030.10,-2174.80,-6.10,-1820.60,-1771.60,200.00}},
	{"Sobell Rail Yards",           {2749.90,1548.90,-89.00,2923.30,1937.20,110.90}},
	{"Spinybed",                    {2121.40,2663.10,-89.00,2498.20,2861.50,110.90}},
	{"Starfish Casino",             {2437.30,1783.20,-89.00,2685.10,2012.10,110.90}},
	{"Starfish Casino",             {2437.30,1858.10,-39.00,2495.00,1970.80,60.90}},
	{"Starfish Casino",             {2162.30,1883.20,-89.00,2437.30,2012.10,110.90}},
	{"Temple",                      {1252.30,-1130.80,-89.00,1378.30,-1026.30,110.90}},
	{"Temple",                      {1252.30,-1026.30,-89.00,1391.00,-926.90,110.90}},
	{"Temple",                      {1252.30,-926.90,-89.00,1357.00,-910.10,110.90}},
	{"Temple",                      {952.60,-1130.80,-89.00,1096.40,-937.10,110.90}},
	{"Temple",                      {1096.40,-1130.80,-89.00,1252.30,-1026.30,110.90}},
	{"Temple",                      {1096.40,-1026.30,-89.00,1252.30,-910.10,110.90}},
	{"The Camel's Toe",             {2087.30,1203.20,-89.00,2640.40,1383.20,110.90}},
	{"The Clown's Pocket",          {2162.30,1783.20,-89.00,2437.30,1883.20,110.90}},
	{"The Emerald Isle",            {2011.90,2202.70,-89.00,2237.40,2508.20,110.90}},
	{"The Farm",                    {-1209.60,-1317.10,114.90,-908.10,-787.30,251.90}},
	{"The Four Dragons Casino",     {1817.30,863.20,-89.00,2027.30,1083.20,110.90}},
	{"The High Roller",             {1817.30,1283.20,-89.00,2027.30,1469.20,110.90}},
	{"The Mako Span",               {1664.60,401.70,0.00,1785.10,567.20,200.00}},
	{"The Panopticon",              {-947.90,-304.30,-1.10,-319.60,327.00,200.00}},
	{"The Pink Swan",               {1817.30,1083.20,-89.00,2027.30,1283.20,110.90}},
	{"The Sherman Dam",             {-968.70,1929.40,-3.00,-481.10,2155.20,200.00}},
	{"The Strip",                   {2027.40,863.20,-89.00,2087.30,1703.20,110.90}},
	{"The Strip",                   {2106.70,1863.20,-89.00,2162.30,2202.70,110.90}},
	{"The Strip",                   {2027.40,1783.20,-89.00,2162.30,1863.20,110.90}},
	{"The Strip",                   {2027.40,1703.20,-89.00,2137.40,1783.20,110.90}},
	{"The Visage",                  {1817.30,1863.20,-89.00,2106.70,2011.80,110.90}},
	{"The Visage",                  {1817.30,1703.20,-89.00,2027.40,1863.20,110.90}},
	{"Unity Station",               {1692.60,-1971.80,-20.40,1812.60,-1932.80,79.50}},
	{"Valle Ocultado",              {-936.60,2611.40,2.00,-715.90,2847.90,200.00}},
	{"Verdant Bluffs",              {930.20,-2488.40,-89.00,1249.60,-2006.70,110.90}},
	{"Verdant Bluffs",              {1073.20,-2006.70,-89.00,1249.60,-1842.20,110.90}},
	{"Verdant Bluffs",              {1249.60,-2179.20,-89.00,1692.60,-1842.20,110.90}},
	{"Verdant Meadows",             {37.00,2337.10,-3.00,435.90,2677.90,200.00}},
	{"Verona Beach",                {647.70,-2173.20,-89.00,930.20,-1804.20,110.90}},
	{"Verona Beach",                {930.20,-2006.70,-89.00,1073.20,-1804.20,110.90}},
	{"Verona Beach",                {851.40,-1804.20,-89.00,1046.10,-1577.50,110.90}},
	{"Verona Beach",                {1161.50,-1722.20,-89.00,1323.90,-1577.50,110.90}},
	{"Verona Beach",                {1046.10,-1722.20,-89.00,1161.50,-1577.50,110.90}},
	{"Vinewood",                    {787.40,-1310.20,-89.00,952.60,-1130.80,110.90}},
	{"Vinewood",                    {787.40,-1130.80,-89.00,952.60,-954.60,110.90}},
	{"Vinewood",                    {647.50,-1227.20,-89.00,787.40,-1118.20,110.90}},
	{"Vinewood",                    {647.70,-1416.20,-89.00,787.40,-1227.20,110.90}},
	{"Whitewood Estates",           {883.30,1726.20,-89.00,1098.30,2507.20,110.90}},
	{"Whitewood Estates",           {1098.30,1726.20,-89.00,1197.30,2243.20,110.90}},
	{"Willowfield",                 {1970.60,-2179.20,-89.00,2089.00,-1852.80,110.90}},
	{"Willowfield",                 {2089.00,-2235.80,-89.00,2201.80,-1989.90,110.90}},
	{"Willowfield",                 {2089.00,-1989.90,-89.00,2324.00,-1852.80,110.90}},
	{"Willowfield",                 {2201.80,-2095.00,-89.00,2324.00,-1989.90,110.90}},
	{"Willowfield",                 {2541.70,-1941.40,-89.00,2703.50,-1852.80,110.90}},
	{"Willowfield",                 {2324.00,-2059.20,-89.00,2541.70,-1852.80,110.90}},
	{"Willowfield",                 {2541.70,-2059.20,-89.00,2703.50,-1941.40,110.90}},
	{"Yellow Bell Station",         {1377.40,2600.40,-21.90,1492.40,2687.30,78.00}},
	// Main Zones
	{"Los Santos",                  {44.60,-2892.90,-242.90,2997.00,-768.00,900.00}},
	{"Las Venturas",                {869.40,596.30,-242.90,2997.00,2993.80,900.00}},
	{"Bone County",                 {-480.50,596.30,-242.90,869.40,2993.80,900.00}},
	{"Tierra Robada",               {-2997.40,1659.60,-242.90,-480.50,2993.80,900.00}},
	{"Tierra Robada",               {-1213.90,596.30,-242.90,-480.50,1659.60,900.00}},
	{"San Fierro",                  {-2997.40,-1115.50,-242.90,-1213.90,1659.60,900.00}},
	{"Red County",                  {-1213.90,-768.00,-242.90,2997.00,596.30,900.00}},
	{"Flint County",                {-1213.90,-2892.90,-242.90,44.60,-768.00,900.00}},
	{"Whetstone",                   {-2997.40,-2892.90,-242.90,-1213.90,-1115.50,900.00}}
};

stock GetPlayer2DZone(playerid, zone[], len) //Credits to Cueball, Betamaster, Mabako, and Simon (for finetuning).
{
	new Float:x, Float:y, Float:z;
	GetPlayerPos(playerid, x, y, z);
 	for(new i = 0; i != sizeof(gSAZones); i++ )
 	{
		if(x >= gSAZones[i][SAZONE_AREA][0] && x <= gSAZones[i][SAZONE_AREA][3] && y >= gSAZones[i][SAZONE_AREA][1] && y <= gSAZones[i][SAZONE_AREA][4])
		{
		    format(zone, len, gSAZones[i][SAZONE_NAME], 0);
		    return i;

		}
	}
	return 0;
}

stock GetPlayer3DZone(playerid, zone[], len) //Credits to Cueball, Betamaster, Mabako, and Simon (for finetuning).
{
	new Float:x, Float:y, Float:z;
	GetPlayerPos(playerid, x, y, z);
 	for(new i = 0; i != sizeof(gSAZones); i++ )
 	{
		if(x >= gSAZones[i][SAZONE_AREA][0] && x <= gSAZones[i][SAZONE_AREA][3] && y >= gSAZones[i][SAZONE_AREA][1] && y <= gSAZones[i][SAZONE_AREA][4] && z >= gSAZones[i][SAZONE_AREA][2] && z <= gSAZones[i][SAZONE_AREA][5])
		{
		    format(zone, len, gSAZones[i][SAZONE_NAME], 0);
		    return i;
		}
	}
	return 0;
}

stock IsPlayerInZone(playerid, zone[]) //Credits to Cueball, Betamaster, Mabako, and Simon (for finetuning).
{
	new TmpZone[MAX_ZONE_NAME];
	GetPlayer3DZone(playerid, TmpZone, sizeof(TmpZone));
	for(new i = 0; i != sizeof(gSAZones); i++)
	{
		if(strfind(TmpZone, zone, true) != -1)
			return 1;
	}
	return 0;
}

//*******************Sistema afk*******************
new Text:Messageafk;
new Afk[MAX_PLAYERS];
new Timer[MAX_PLAYERS];
//*******************************
new BigEar[MAX_PLAYERS];
//*******************Sistema de Reparacion de Auto con latas*******************
new autorepara[MAX_PLAYERS];
// Anuncios automáticos.
//*******************Solucion 0.3z*******************
forward TimerBANIP(playerid);

//— Sistema de Baneos de IP, Artic (30/11/2020)
forward TiempoBan(playerid, ip);
//*******************seleccion skin 0.3z*******************
new bars = mS_INVALID_LISTID; // cmd_bar.

//SISTEMA HERIDAS
enum dmgInfo
{
	dmgDamage,
	dmgWeapon,
	dmgBodypart,
	dmgKevlarhit,
	dmgSeconds
}
new InfoDamage[MAX_PLAYERS][MAX_DAMAGES][dmgInfo];
stock ResetPlayerDamages(playerid)
{
	for(new id = 0; id < MAX_DAMAGES; id++)
	{
		if(InfoDamage[playerid][id][dmgDamage] != 0)
		{
			InfoDamage[playerid][id][dmgDamage] = 0;
			InfoDamage[playerid][id][dmgWeapon] = 0;
			InfoDamage[playerid][id][dmgBodypart] = 0;
			InfoDamage[playerid][id][dmgKevlarhit] = 0;
			InfoDamage[playerid][id][dmgSeconds] = 0;
		}
	}
	return 1;
}

stock GetBodypartName(bodypart)
{
	new bodyname[60];
	switch(bodypart)
	{
		case 3: alm(bodyname, "TORSO");
		case 4: alm(bodyname, "INGLE");
		case 5: alm(bodyname, "BRAZO DERECHO");
		case 6: alm(bodyname, "BRAZO IZQUIERDO");
		case 7: alm(bodyname, "PIERNA DERECHA");
		case 8: alm(bodyname, "PIERNA IZQUIERDA");
		case 9: alm(bodyname, "CABEZA");
	}
	return bodyname;
}

stock ShowPlayerDamages(playerid, toid)
{
	new
	str[1000], str1[500], count = 0, name[MAX_PLAYER_NAME];
	GetPlayerName(playerid, name, sizeof(name));
	for(new id = 0; id < MAX_DAMAGES; id++)
	{
		if(InfoDamage[playerid][id][dmgDamage] != 0) count++;
	}
	if (count == 0) return Dialog_Show(toid, ShowInvalido, DIALOG_STYLE_LIST, name, "Este usuario no tiene heridas", "Cerrar", "");
	else if (count > 0)
	{
	    strcat(str, "DAÑO\tARMA\tPARTE\n");
		for(new id = 0; id < MAX_DAMAGES; id++)
		{
			if(InfoDamage[playerid][id][dmgDamage] != 0)
			{

				format(str1, sizeof(str1), "%d\t%s\t%s\n", InfoDamage[playerid][id][dmgDamage], GetWeaponNameEx2(InfoDamage[playerid][id][dmgWeapon]), GetBodypartName(InfoDamage[playerid][id][dmgBodypart]), InfoDamage[playerid][id][dmgKevlarhit], gettime() - InfoDamage[playerid][id][dmgSeconds]);
				strcat(str, str1);
			}
		}
		Dialog_Show(toid, ShowInvalido, DIALOG_STYLE_TABLIST_HEADERS, name, str, "Cerrar", "");
	}
	return 1;
}
stock GetWeaponNameEx2(weaponid)
{
	new weaponname[60];
	if(!GetWeaponName(weaponid, weaponname, sizeof(weaponname))){ weaponname = "ENTORNO"; }
	GetWeaponName(weaponid, weaponname, sizeof(weaponname));
	return weaponname;
}

//variables del baneo en sql, 30/11/2020 by Artic
enum infobaneo
{
	bID,					 		//ID sql del baneo
	bIP[16],						//IP baneada
	bEncargado[MAX_PLAYER_NAME], 	//Administrador
	bRazon[64],						//Razon del baneo
	bFecha[32]						//Fecha del baneo
}
new InfoBan[MAX_PLAYERS][infobaneo];

//variables del jugador en sql, hecho: 03/01/2020 by EdinsonWalker

new usuario_registro[MAX_PLAYERS]; // 2: jugando - 1: registrado - 0: no registrado
new altavoz_phone[MAX_PLAYERS];
new refuerzos_pd[MAX_PLAYERS];
new refuerzos_sd[MAX_PLAYERS];
new state_on[MAX_PLAYERS]; // 0: ningún logeo, 1: en spawn, 2: en login & 3: jugando.

VerificarCuenta(account[])
{
	new query[256];
	mysql_format(DBInsanity, query, sizeof query, "SELECT * FROM cuentas WHERE Nombre = '%e'", account);
	mysql_query(DBInsanity, query);
	if (cache_num_rows() > 0) return 1;
	return 0;
}

enum cuentaInfo
{
	jID,                                // ID en base de datos
	jNombre[MAX_PLAYER_NAME],           // Nombre
	jClave[65],							// Contraseña
	jSalt[11],              			// Salt contraseña
	jIP[18],                			// Dirección IP
	jAdmin,                 			// Nivel admin
	jApodo[12],             			// Apodo admin
	jEncFac,                			// Encargado de facciones
	jPreguntaSeguridad[256],			// Pregunta seguridad
	jRespuestaSeguridad[256],			// Respuesta seguridad
	jVIP,                           	// VIP: 1(bronce) 2(plata) 3(oro) 4(platino)
	jDiaVIP,                        	// Fin día VIP
	jMesVIP,                        	// Fin mes VIP
	jCoinsVIP,                   		// Coins VIP
	jDobleExp,                      	// Doble experiencia
	jMulticuenta,                   	// Multicuenta access
	jBaneo,
	jTiempoBaneo,
	jCulpableBaneo[MAX_PLAYER_NAME],
	jRazonBaneo[256],
	jFechaBaneo[256],
	jRegalo,							// Tiempo de regalo
	jFechaRegistro[256],                // Fecha de registro
	jUltimaConexion[256],               // Última conexión
	jRanuras,                           // slots de personajes
};
new InfoCuenta[MAX_PLAYERS][cuentaInfo];

VerificarPersonaje(account[])
{
	new query[256];
	mysql_format(DBInsanity, query, sizeof query, "SELECT * FROM personajes WHERE Nombre_Apellido = '%e'", account);
	mysql_query(DBInsanity, query);
	if (cache_num_rows() > 0) return 1;
	return 0;
}

enum personajeInfo
{
	pID,								// ID en base de datos
	pNombre_Apellido[MAX_PLAYER_NAME],	// Nombre_Apellido
    pCuentaID,                          // ID en cuentas
	Float: pPosicionX,      			// Posición x
	Float: pPosicionY,      			// Posición y
	Float: pPosicionZ,      			// Posición z
	Float: pPosicionR,      			// Posición angulo
	pInterior,              			// Interior
	pVirtualWorld,          			// VirtualWorld
	Float: pVida,           			// Vida
	Float: pChaleco,        			// Chaleco
	pSkin,                          	// Skin actual
	pNivel,								// Nivel del personaje
	pExperiencia,           			// Puntos de experiencia
	pHorasOn,               			// Horas conectado
	pSexo,                  			// Sexo
	pEdad,                  			// Edad
	pCiudad,                			// Ciudad
	pAcento,                        	// Acento
	pEstiloPelea,                   	// Estilo de pelea
	pDinero,                			// Dinero en bolsillos
	pBanco,                 			// Dinero en banco
	pLider,								// Lider de facción
	pMiembro,							// Miembro de facción
	pRango,                 			// Rango de facción
	pBolsillo[10],						// Bolsillos
	pBolsilloCant[10],					// Cantidad en bolsillos
	pManoDerecha,						// Mano derecha
	pManoDerechaCant,					// Cantidad en mano derecha
	pManoIzquierda,						// Mano izquierda
	pManoIzquierdaCant,					// Cantidad en mano izquierda
	pEspalda,							// Espalda
	pEspaldaCant,						// Cantidad en espalda
	pTogVIP,							// Chat VIP
	pMuerto,                			// Estado muerto
	pHospital,                      	// Estado hospital
	pBalaCabeza,            			// Bala en la cabeza, muerto
	pJails,                 			// Cantidad de jails ooc
	pArrestos,              			// Cantidad de jails ic
	pSancionado,						// Si está en jail
	pTiempoSancion,						// Tiempo Jail
	pBySancion[MAX_PLAYER_NAME],		// Jaileado por
	pRazonSancion[128],					// Razón del jail
	pMateriales,						// Materiales
	pGanzuas,							// Ganzuas
	pTelefono,                      	// Número de teléfono
	pTogVelocimetro,                   	// Activo velocimetro
	pCasa1,                          	// Casa
	pCasa2,                          	// Casa2
	pNegocio1,                       	// Negocio
	pNegocio2,                       	// Negocio2
	pLicencia[5],						// Licencias: 0(conducir) 1(vuelo) 2(bote) 3(armas) 4(taxi)
	pMascara,                       	// Máscara
	pUsoMascara,                    	// Usando máscara
	pBaneo,                         	// Baneado: 0(desbloqueado) 1(temporal) 2(permanente)
	pTiempoBaneo,
	pCulpableBaneo[MAX_PLAYER_NAME],
	pRazonBaneo[256],
	pFechaBaneo[256],
	pBlockBug,                      	// Bloqueo de /reportarbug
	pTogGraffiti,						// Bloqueo de graffitis
	pDocumento,                     	// Documento nacional
	pHabilidad[5],                  	// Habilidades: 0(vendedor de armas) 1(camionero) 2(traficante) 3(vendedor de drogas) 4(pescador)
	YaCobre,                        	// YaCobre PayDay
	pEstrellas,                     	// Estrellas
	pLimiteRobos,                   	// Limite de robar piezas
	pFrecuencia_radio,              	// Frecuencia de radio portatil
	pTipoSpawn,                     	// Tipo spawn: 0(hospital) 1(casa)
	pAutoRespuestaSMS[128],         	// Auto respuesta SMS
	pBlockAD,                       	// Bloqueo de anuncios
	pAdvAD,                         	// Advertencias de anuncios
	pPescados,                      	// Pescados
	pRecordPesoPes,                 	// Pes más gordo pescado
	pEstadoYo[128],						// Estado /yo
	Text3D: pNameTag,					// Estado label (27/04/2020)
	pNumeroContacto[10],            	// Número de contacto
	pJobSkin,                       	// Skin normal
	pRestriccionRobo,               	// Restricción robo
	pFalsoDocumento,                	// Falso documento
	pFalsoNombre[MAX_PLAYER_NAME],  	// Falso nombre
	pFechaRegistro[256],                // Fecha de registro
	pUltimaConexion[256],               // Última conexión
    ptModelo[10],                       // toys
	ptHueso[10],
    Float: ptPosX[10],
	Float: ptPosY[10],
	Float: ptPosZ[10],
	Float: ptRotX[10],
	Float: ptRotY[10],
	Float: ptRotZ[10],
	Float: ptScaleX[10],
	Float: ptScaleY[10],
	Float: ptScaleZ[10],
	ptColocado[10],
	pCinturon[6],						// Cinturon
	pCinturonCant[6],					// Cantidad en cinturon
	ptColor[10],                        // color toys
	pContrato,                          // negocio o empresa o fabrica donde trabaja
	pEmpleo, 							// trabajo
	pAdiccion[3],						// Adicciones
	pDrogaTipo,							// Droga tipo
	pDrogaTiempo,						// Droga tiempo
	pDrogaPower,						// Droga power
	pAbstinenceEffect,					// Abstinence efecto
	pAbstinenceTime,					// Abstinence tiempo
	pTogManos,                          // 1 puede mover | 0 no mueve
	pTogCajero,							// Restricción de retirar del cajero
	pTogAnuncios,                       // 0 visibles | ocultos
	pTogTelefono,                       // 1 encendido | 0 apagado
	pTimerAnuncios,                     // tiempo de anuncios
	pTogOOC,                            // Mensajes administrativos
	pTogMusic,                          // Musíca
	pTogRadio,                          // Radio o wsp
	pTogPortatil,                       // Radio portatil
	pTogFaccion,                        // Mensajes de facciones
	pRepartoViajes,                     // restricción de viajes por payday repartos
	pPDR,								// puntos de rol
	//no saved
	pServiceTime,
	pTriageTime,
	pLlaveVehicle,

	// leñador owo
	pState,								 // estado
	pLenador_free,						 // nose xd
	Float:pLenador_free_PROG,			 // nosexd
	bool:pCargandoMadera,				 // nosexd

	pEditingMode,
	pNombre_Temporal[MAX_PLAYER_NAME],  // Nombre temporal
	pNombre_PD[MAX_PLAYER_NAME],		// Nombre temporal policial
};
new InfoPersonaje[MAX_PLAYERS][personajeInfo];

new nombre_contacto[MAX_PLAYERS][20][MAX_PLAYER_NAME];

// update personalizado by EdinsonWalker (30/01/2020)
guardar_int_mysql(tabla[], columna[], id, monto)
{
	new query[210];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE %s SET %s = '%d' WHERE ID = '%d'", tabla, columna, monto, id);
	mysql_tquery(DBInsanity, query);
	return 1;
}

guardar_float_mysql(tabla[], columna[], id, Float: monto)
{
	new query[210];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE %s SET %s = '%f' WHERE ID = '%d'", tabla, columna, monto, id);
	mysql_tquery(DBInsanity, query);
	return 1;
}

guardar_string_mysql(tabla[], columna[], id, monto[])
{
	new query[740];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE %s SET %s = '%e' WHERE ID = '%d'", tabla, columna, monto, id);
	mysql_tquery(DBInsanity, query);
	return 1;
}

// sistema administrativo
new AdminChat[MAX_PLAYERS];
new papilla[MAX_PLAYERS];

AdminOnlineCheck()
{
	new count;
	foreach(Player, playerid) if (IsPlayerConnectedEx(playerid))
	{
		if (GetPlayerAdmin(playerid, 1) != 0)
		{
			count++;
		}
	}
	return count;
}

SendAdminMessage(color, gformat[])
{
	foreach(Player, playerid) if (IsPlayerConnectedEx(playerid))
	{
		if (GetPlayerAdmin(playerid, 1) == 1 && AdminChat[playerid] == 0)
		{
			SendSplitMessage(playerid, color, gformat);
		}
	}
	return 1;
}

CheckAdminCMD(playerid, rango)
{
	if (!IsPlayerConnectedEx(playerid)) return 1;
	new gformat[190];
	if (GetPlayerAdmin(playerid, rango) == 0)
	{
		new name[39] = "Admin";
		switch (rango)
		{
			case 1: alm(name, "Orientador");
			case 2: alm(name, "Moderador I");
			case 3: alm(name, "Moderador II");
			case 4: alm(name, "Moderador III");
			case 5: alm(name, "Administrador");
			case 6: alm(name, "Game Operator");
			case 10: alm(name, "Propietario");
		}
		format(gformat, sizeof gformat, "* Para hacer esto debes ser mínimo %s.", name);
		SendClientMessage(playerid, COLOR_GREY, gformat);
		return 1;
	}
	return 0;
}

CheckAdminDuty(playerid)
{
	if (!IsPlayerConnectedEx(playerid)) return 1;
	if (!strcmp(InfoCuenta[playerid][jNombre], "Andres", true) || !strcmp(InfoCuenta[playerid][jNombre], "Artic", true)) { return 0; }
	if (papilla[playerid] == 0) { SendClientMessage(playerid, COLOR_GREY, "* Para hacer esto debes estar admin duty. (/onstaff)"); return 1; }
	return 0;
}

GetPlayerAdmin(playerid, nivel)
{
	if (!IsPlayerConnectedEx(playerid)) return 0;
	if (nivel == 10)
	{
		if (!strcmp(InfoCuenta[playerid][jNombre], "Andres", true) || !strcmp(InfoCuenta[playerid][jNombre], "Artic", true)) { return 1; }
	}
	else
	{
		if (!strcmp(InfoCuenta[playerid][jNombre], "Andres", true) || !strcmp(InfoCuenta[playerid][jNombre], "Artic", true)) { return 1; }
		if (InfoCuenta[playerid][jAdmin] >= nivel) return 1;
	}
	return 0;
}

GetAdminName(playerid)
{
	new name[39] = "Admin";
	if (!strcmp(InfoCuenta[playerid][jNombre], "Andres", true))
	{
		alm(name, "Propietario");
		return name;
	}
	if (!strcmp(InfoCuenta[playerid][jNombre], "Artic", true))
	{
		alm(name, "Desarrollador");
		return name;
	}
	switch (InfoCuenta[playerid][jAdmin])
	{
		case 1: alm(name, "Orientador");
		case 2: alm(name, "Moderador I");
		case 3: alm(name, "Moderador II");
		case 4: alm(name, "Moderador III");
		case 5: alm(name, "Administrador");
		case 6: alm(name, "Game Operator");
	}
	return name;
}

//actualizar toy
ActualizarToy(playerid, toy)
{
	new query[1029], infotoy[512];
	format(infotoy, sizeof infotoy, "%d|%d|%f|%f|%f|%f|%f|%f|%f|%f|%f|%d|",
	InfoPersonaje[playerid][ptModelo][toy], InfoPersonaje[playerid][ptHueso][toy],
	InfoPersonaje[playerid][ptPosX][toy], InfoPersonaje[playerid][ptPosY][toy], InfoPersonaje[playerid][ptPosZ][toy],
	InfoPersonaje[playerid][ptRotX][toy], InfoPersonaje[playerid][ptRotY][toy], InfoPersonaje[playerid][ptRotZ][toy],
	InfoPersonaje[playerid][ptScaleX][toy], InfoPersonaje[playerid][ptScaleY][toy], InfoPersonaje[playerid][ptScaleZ][toy],
	InfoPersonaje[playerid][ptColocado][toy]);

	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Toy%d = '%e', ColorToy%d = '%d' WHERE ID = '%d'", toy+1, infotoy, toy+1, InfoPersonaje[playerid][ptColor][toy], InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, query);
}

//actualizar dinero
#define GetPlayerCash(%0) InfoPersonaje[%0][pDinero]
GivePlayerCash(playerid, money, reason[])
{
	new gformat[128], money_new = 0, gregistros[256];
	//diseño + log normal
	new f_string[32];
	format(f_string, sizeof f_string, "%d", money);
	if (!isnumeric(f_string))
	{
	    format(gregistros, sizeof gregistros, "[-] %s perdió %s$, razón: [%s]", NombreDeCuenta(playerid), diner_coma(money), reason);
		format(gformat, sizeof gformat, "~r~~h~ %s$", diner_coma(money));
		PlayerPlaySound(playerid, 1084, 0.0, 0.0, 0.0);
	}
	else
	{
	    format(gregistros, sizeof gregistros, "[+] %s recibió %s$, razón: [%s]", NombreDeCuenta(playerid), diner_coma(money), reason);
		format(gformat, sizeof gformat, "~g~~h~ %s$", diner_coma(money));
		PlayerPlaySound(playerid, 1083, 0.0, 0.0, 0.0);
	}
	Log("LOGS/MoneyUwU.txt", gregistros);
	//log si supera 100k
	if (money >= 100000)
	{
		new rse[190];
		format(rse, sizeof rse, "{FF2F2F}[AdmWarnig]{FFFFFF} %s(%d) recibió $%s [razón: %s]", NombreOriginal(playerid), playerid, diner_coma(money), reason);
		SendAdminMessage(0xFFFFFFFF, rse);
		Log("LOGS/ExagerarMoneyUwU.txt", rse);
	}
	if (GetTextDraw[playerid] == 0)
	{
		GetTextDraw[playerid] = 1;
		PlayerTextDrawSetStringEx(playerid, draw_money[playerid], gformat);
		PlayerTextDrawShow(playerid, draw_money[playerid]);
		SetTimerEx("HideDrawMoney", 4000, false, "d", playerid);
	}
	//ceder dinero
	money_new = InfoPersonaje[playerid][pDinero] + money;
	InfoPersonaje[playerid][pDinero] = money_new;
	GivePlayerMoney(playerid, money);
	guardar_int_mysql("personajes", "BolosUwU", InfoPersonaje[playerid][pID], money_new);
	return 1;
}

forward HideDrawMoney(playerid);
public HideDrawMoney(playerid)
{
	GetTextDraw[playerid] = 0;
	PlayerTextDrawHide(playerid, draw_money[playerid]);
}

CheckMoney(playerid, money)
{
	new b[190], xx;
	xx = money - (GetPlayerCash(playerid));
	if (GetPlayerCash(playerid) >= money)
	{
		return 1;
	}
	else
	{
		format(b, sizeof b, "No tienes dinero suficiente! Te faltan {F72222}$%s", diner_coma(xx));
		SendClientMessage(playerid, 0xEBEBEBFF, b);
		return 0;
	}
}

//actualizar skin normal
GivePlayerSkin(playerid, idskin)
{
	if (idskin == 0) return SendClientMessage(playerid, COLOR_GREY, "jajsajsa no puedes ponerte la skin de cj mmaguebo!!owo");
	InfoPersonaje[playerid][pJobSkin] = 0;
	InfoPersonaje[playerid][pSkin] = idskin;
	SetPlayerSkin(playerid, idskin);
	new query[170];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Skin = '%d', JobSkin = 0 WHERE ID = '%d'", idskin, InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, query);
	return 1;
}

//actualizar skin de facción/trabajo
GivePlayerJobSkin(playerid, idskin)
{
	if (idskin == 0) return SendClientMessage(playerid, COLOR_GREY, "jajsajsa no puedes ponerte la skin de cj mmaguebo!!owo");
	InfoPersonaje[playerid][pJobSkin] = idskin;
	SetPlayerSkin(playerid, idskin);
	guardar_int_mysql("personajes", "JobSkin", InfoPersonaje[playerid][pID], idskin);
	return 1;
}

// graffitis en sql - diciembre 2019
enum grInfo
{
	grID_sql,						// id db
	gr_Mensaje[256],                // mensaje
	gr_Creador[MAX_PLAYER_NAME],    // creador
	gr_Fecha,                       // fecha de creación
	Float: gr_PosX,					// potX
	Float: gr_PosY,					// potY
	Float: gr_PosZ,					// potZ
	Float: gr_RotX,					// rotX
	Float: gr_RotY,					// rotY
	Float: gr_RotZ,					// rotZ
	gr_Interior,					// interior
	gr_VirtualWorld,				// virtualWorld
	gr_Objeto,                      // objeto
};
new InfoGraffiti[MAX_GRAFFITIS][grInfo];

forward CargarGraffitis();
public CargarGraffitis()
{
	//clear
	Loop(x, MAX_GRAFFITIS, 0)
	{
		alm(InfoGraffiti[x][gr_Mensaje], "ninguno");
		alm(InfoGraffiti[x][gr_Creador], "ninguno");
		InfoGraffiti[x][gr_Fecha] = 0;
		InfoGraffiti[x][gr_PosX] = 0.0;
		InfoGraffiti[x][gr_PosY] = 0.0;
		InfoGraffiti[x][gr_PosZ] = 0.0;
		InfoGraffiti[x][gr_RotX] = 0.0;
		InfoGraffiti[x][gr_RotY] = 0.0;
		InfoGraffiti[x][gr_RotZ] = 0.0;
	}
	new cargaditos = 0, pintados = 0;
	Loop(tabla, cache_num_rows(), 0)
	{
	    new id = tabla+1;
		reg_int(tabla, "ID", InfoGraffiti[id][grID_sql]);
		reg_string(tabla, "Mensaje", InfoGraffiti[id][gr_Mensaje], 256);
		reg_string(tabla, "Creador", InfoGraffiti[id][gr_Creador], MAX_PLAYER_NAME);
		reg_int(tabla, "Fecha", InfoGraffiti[id][gr_Fecha]);
		reg_float(tabla, "PotX", InfoGraffiti[id][gr_PosX]);
		reg_float(tabla, "PotY", InfoGraffiti[id][gr_PosY]);
		reg_float(tabla, "PotZ", InfoGraffiti[id][gr_PosZ]);
		reg_float(tabla, "RotX", InfoGraffiti[id][gr_RotX]);
		reg_float(tabla, "RotY", InfoGraffiti[id][gr_RotY]);
		reg_float(tabla, "RotZ", InfoGraffiti[id][gr_RotZ]);
		reg_int(tabla, "Interior", InfoGraffiti[id][gr_Interior]);
		reg_int(tabla, "VirtualWorld", InfoGraffiti[id][gr_VirtualWorld]);
		if (InfoGraffiti[id][grID_sql]) totalgraffitis++;
		//función
		if (InfoGraffiti[id][gr_PosX] != 0.0)
		{
			if (!strcmp(InfoGraffiti[id][gr_Creador], "ninguno", true))
			{
				InfoGraffiti[id][gr_Objeto] = CreateDynamicObject(18665, InfoGraffiti[id][gr_PosX], InfoGraffiti[id][gr_PosY], InfoGraffiti[id][gr_PosZ], InfoGraffiti[id][gr_RotX], InfoGraffiti[id][gr_RotY], InfoGraffiti[id][gr_RotZ], -1, 0, -1, 6000.0);
			}
			else
			{
				InfoGraffiti[id][gr_Objeto] = CreateDynamicObject(18665, InfoGraffiti[id][gr_PosX], InfoGraffiti[id][gr_PosY], InfoGraffiti[id][gr_PosZ], InfoGraffiti[id][gr_RotX], InfoGraffiti[id][gr_RotY], InfoGraffiti[id][gr_RotZ], -1, 0, -1, 6000.0);
				new graffitiText[128];
				alm(graffitiText, InfoGraffiti[id][gr_Mensaje]);
				strreplace(graffitiText, "(n)", "\n");
				strreplace(graffitiText, "(a)", "{0000FF}"); //azul
				strreplace(graffitiText, "(b)", "{FFFFFF}"); //blanco
				strreplace(graffitiText, "(am)", "{FFFF00}"); //amarillo
				strreplace(graffitiText, "(v)", "{00C200}"); //verde
				strreplace(graffitiText, "(ne)", "{000000}"); //negro
				strreplace(graffitiText, "(na)", "{00AE57}"); //naranja
				strreplace(graffitiText, "(r)", "{FF0000}"); //rojo
				strreplace(graffitiText, "(ce)", "{00FFFF}"); //celeste
				SetDynamicObjectMaterialText(InfoGraffiti[id][gr_Objeto], 0, graffitiText, OBJECT_MATERIAL_SIZE_256x256, "Arial", 32, 1, 0xFFFFFFFF, 0, 1);
				pintados++;
			}
			cargaditos++;
		}
	}
	printf("%d graffitis dinámicos (Pintados: %d) (SQL: %d) cargados correctamente.", cargaditos, pintados, totalgraffitis-1);
	return 1;
}

//renovación de sistema de puertas dinámicas en sql, by EdinsonWalker (23/01/2020)
enum puertaInfo
{
	pdID_sql,                   // id sql
	pdNombre[128],              // nombre
	Float: pdExteriorX,         // exterior x
	Float: pdExteriorY,         // exterior y
	Float: pdExteriorZ,         // exterior z
	Float: pdExteriorR,         // exterior r
	pdExteriorInt,              // exterior int
	pdExteriorVW,               // exterior vw
	Float: pdInteriorX,         // interior x
	Float: pdInteriorY,         // interior y
	Float: pdInteriorZ,         // interior z
	Float: pdInteriorR,         // interior r
	pdInteriorInt,              // interior int
	pdInteriorVW,               // interior vw
	pdModelo,                   // modelo pickup
	pdMapIcon,					// modelo mapicon
	pdFaccion,                  // facción
	pdAdmin,                    // admin
	pdVIP,                      // vip
	pdEstrellas,                // estrellas
	pdStatusVehiculo,           // status vehículo
	//dynamic
	pdExteriorPickup,           // exterior pickup
	Text3D: pdExteriorLabel,    // exterior label
	pdExteriorMapIcon,          // exterior mapicon
	pdInteriorPickup,           // interior pickup
	Text3D: pdInteriorLabel,    // interior label
};
new InfoPuerta[MAX_PUERTAS][puertaInfo];

forward CargarPuertas();
public CargarPuertas()
{
	new cargaditos = 0;
	Loop(tabla, cache_num_rows(), 0)
	{
	    new id = tabla+1;
		reg_int(tabla, "ID", InfoPuerta[id][pdID_sql]);
		reg_string(tabla, "Nombre", InfoPuerta[id][pdNombre], 128);
		reg_float(tabla, "ExteriorX", InfoPuerta[id][pdExteriorX]);
		reg_float(tabla, "ExteriorY", InfoPuerta[id][pdExteriorY]);
		reg_float(tabla, "ExteriorZ", InfoPuerta[id][pdExteriorZ]);
		reg_float(tabla, "ExteriorR", InfoPuerta[id][pdExteriorR]);
		reg_int(tabla, "ExteriorInt", InfoPuerta[id][pdExteriorInt]);
		reg_int(tabla, "ExteriorVW", InfoPuerta[id][pdExteriorVW]);
		reg_float(tabla, "InteriorX", InfoPuerta[id][pdInteriorX]);
		reg_float(tabla, "InteriorY", InfoPuerta[id][pdInteriorY]);
		reg_float(tabla, "InteriorZ", InfoPuerta[id][pdInteriorZ]);
		reg_float(tabla, "InteriorR", InfoPuerta[id][pdInteriorR]);
		reg_int(tabla, "InteriorInt", InfoPuerta[id][pdInteriorInt]);
		reg_int(tabla, "InteriorVW", InfoPuerta[id][pdInteriorVW]);
		reg_int(tabla, "Modelo", InfoPuerta[id][pdModelo]);
		reg_int(tabla, "MapIcon", InfoPuerta[id][pdMapIcon]);
		reg_int(tabla, "Faccion", InfoPuerta[id][pdFaccion]);
		reg_int(tabla, "Admin", InfoPuerta[id][pdAdmin]);
		reg_int(tabla, "VIP", InfoPuerta[id][pdVIP]);
		reg_int(tabla, "Estrellas", InfoPuerta[id][pdEstrellas]);
		reg_int(tabla, "StatusVehiculo", InfoPuerta[id][pdStatusVehiculo]);
		if (InfoPuerta[id][pdID_sql]) totalpuertas++;
		//función
		if (InfoPuerta[id][pdExteriorX] != 0.0)
		{
			cargaditos++;
			CreateDynamicDoor(id, 1);
		} else noexitDoor(id);
	}
	printf("%d puertas dinámicas (SQL: %d) cargadas correctamente.", cargaditos, totalpuertas-1);
	return 1;
}

CreateDynamicDoor(id, mapicon)
{
	new label_door[235];
	DestroyDynamicPickup(InfoPuerta[id][pdExteriorPickup]);
	DestroyDynamicPickup(InfoPuerta[id][pdInteriorPickup]);
	DestroyDynamic3DTextLabel(InfoPuerta[id][pdExteriorLabel]);
	DestroyDynamic3DTextLabel(InfoPuerta[id][pdInteriorLabel]);
	format(label_door, sizeof label_door, "[%d] {00AE57}%s\n{EBEBEB}Presiona {3E62F4}'H'{EBEBEB} para entrar", id, InfoPuerta[id][pdNombre]);
	InfoPuerta[id][pdExteriorLabel] = CreateDynamic3DTextLabel(label_door, 0xEBEBEBFF, InfoPuerta[id][pdExteriorX], InfoPuerta[id][pdExteriorY], InfoPuerta[id][pdExteriorZ]+0.8, 10.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1, InfoPuerta[id][pdExteriorVW], InfoPuerta[id][pdExteriorInt], -1);
	format(label_door, sizeof label_door, "[%d] {00AE57}%s\n{EBEBEB}Presiona {3E62F4}'H'{EBEBEB} para salir", id, InfoPuerta[id][pdNombre]);
	InfoPuerta[id][pdInteriorLabel] = CreateDynamic3DTextLabel(label_door, 0xEBEBEBFF, InfoPuerta[id][pdInteriorX], InfoPuerta[id][pdInteriorY], InfoPuerta[id][pdInteriorZ]+0.8, 10.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1, InfoPuerta[id][pdInteriorVW], InfoPuerta[id][pdInteriorInt], -1);
	InfoPuerta[id][pdExteriorPickup] = CreateDynamicPickup(GetModelDoor(id), 1, InfoPuerta[id][pdExteriorX], InfoPuerta[id][pdExteriorY], InfoPuerta[id][pdExteriorZ], InfoPuerta[id][pdExteriorVW], InfoPuerta[id][pdExteriorInt], -1);
	InfoPuerta[id][pdInteriorPickup] = CreateDynamicPickup(GetModelDoor(id), 1, InfoPuerta[id][pdInteriorX], InfoPuerta[id][pdInteriorY], InfoPuerta[id][pdInteriorZ], InfoPuerta[id][pdInteriorVW], InfoPuerta[id][pdInteriorInt], -1);
	if (mapicon != 0)
	{
		DestroyDynamicMapIcon(InfoPuerta[id][pdExteriorMapIcon]);
		if (InfoPuerta[id][pdMapIcon] != 0)
			InfoPuerta[id][pdExteriorMapIcon] = CreateDynamicMapIcon(InfoPuerta[id][pdExteriorX], InfoPuerta[id][pdExteriorY], InfoPuerta[id][pdExteriorZ], InfoPuerta[id][pdMapIcon], 0, 0, 0, -1, 300);
	}
}

noexitDoor(id)
{
	DestroyDynamicPickup(InfoPuerta[id][pdExteriorPickup]);
	DestroyDynamicPickup(InfoPuerta[id][pdInteriorPickup]);
	DestroyDynamic3DTextLabel(InfoPuerta[id][pdExteriorLabel]);
	DestroyDynamic3DTextLabel(InfoPuerta[id][pdInteriorLabel]);
	DestroyDynamicMapIcon(InfoPuerta[id][pdExteriorMapIcon]);
	InfoPuerta[id][pdExteriorLabel] = CreateDynamic3DTextLabel("puelta", -1, -2190.7974, 165.9186, 58.2604, 1.0, .worldid = id, .interiorid = id);
	InfoPuerta[id][pdInteriorLabel] = CreateDynamic3DTextLabel("puelta", -1, -2190.7974, 165.9186, 58.2604, 1.0, .worldid = id, .interiorid = id);
	InfoPuerta[id][pdExteriorPickup] = CreateDynamicPickup(1239, 1, -2190.7974, 165.9186, 58.2604, id, id);
	InfoPuerta[id][pdInteriorPickup] = CreateDynamicPickup(1239, 1, -2190.7974, 165.9186, 58.2604, id, id);
	return 1;
}

GetModelDoor(id)
{
	new modelid = 1318;
	switch (InfoPuerta[id][pdModelo])
	{
		case 1: modelid = 1210;
		case 2: modelid = 1212;
		case 3: modelid = 1239;
		case 4: modelid = 1240;
		case 5: modelid = 1241;
		case 6: modelid = 1242;
		case 7: modelid = 1247;
		case 8: modelid = 1248;
		case 9: modelid = 1252;
		case 10: modelid = 1253;
		case 11: modelid = 1254;
		case 12: modelid = 1313;
		case 13: modelid = 1272;
		case 14: modelid = 1273;
		case 15: modelid = 1274;
		case 16: modelid = 1275;
		case 17: modelid = 1276;
		case 18: modelid = 1277;
		case 19: modelid = 1279;
		case 20: modelid = 1314;
		case 21: modelid = 1316;
		case 22: modelid = 1317;
		case 23: modelid = 1559;
		case 24: modelid = 1582;
		case 25: modelid = 2894;
	}
	return modelid;
}

//renovación de sistema de casas en sql, by EdinsonWalker (16/01/2020)
enum casaInfo
{
	cID_sql,                            // id sql
	cPropietario[MAX_PLAYER_NAME],      // propietario
	cTipo,                              // tipo de clase
	cVenta,                             // 0 en venta, 1 comprado
	cSeguro,                            // 1 seguro, 0 sin seguro
	Float: cExteriorX,                  // pos x
	Float: cExteriorY,                  // pos y
	Float: cExteriorZ,                  // pos z
	Float: cExteriorR,                  // pos angulo
	cExteriorInt,                       // ext int
	cExteriorVW,                        // ext vw
	Float: cInteriorX,                  // int x
	Float: cInteriorY,                  // int y
	Float: cInteriorZ,                  // int z
	Float: cInteriorR,                  // int r
	cInteriorInt,                       // int int
	cInteriorVW,                        // int vw
	cDinero,                            // dinero
	cPrecio,                            // precio
	cNivel,                             // nivel
	cMateriales,                        // materiales
	cArmario[10],                       // armario
	cArmarioCant[10],                   // armario cant
	cGarage,							// garage
	//dynamic
	cPickupExt,                         // pickup ext
	cPickupInt,                         // pickup int
	Text3D: cLabelExt,                  // label ext
	Text3D: cLabelInt,                  // label int
};
new InfoCasa[MAX_CASAS][casaInfo];

forward CargarCasas();
public CargarCasas()
{
	new cargaditos = 0;
	Loop(tabla, cache_num_rows(), 0)
	{
	    new id = tabla+1;
		reg_int(tabla, "ID", InfoCasa[id][cID_sql]);
		reg_string(tabla, "Propietario", InfoCasa[id][cPropietario], MAX_PLAYER_NAME);
		reg_int(tabla, "Tipo", InfoCasa[id][cTipo]);
		reg_int(tabla, "Venta", InfoCasa[id][cVenta]);
		reg_int(tabla, "Seguro", InfoCasa[id][cSeguro]);
		reg_float(tabla, "Exterior_X", InfoCasa[id][cExteriorX]);
		reg_float(tabla, "Exterior_Y", InfoCasa[id][cExteriorY]);
		reg_float(tabla, "Exterior_Z", InfoCasa[id][cExteriorZ]);
		reg_float(tabla, "Exterior_R", InfoCasa[id][cExteriorR]);
		reg_int(tabla, "Exterior_Int", InfoCasa[id][cExteriorInt]);
		reg_int(tabla, "Exterior_VW", InfoCasa[id][cExteriorVW]);
		reg_float(tabla, "Interior_X", InfoCasa[id][cInteriorX]);
		reg_float(tabla, "Interior_Y", InfoCasa[id][cInteriorY]);
		reg_float(tabla, "Interior_Z", InfoCasa[id][cInteriorZ]);
		reg_float(tabla, "Interior_R", InfoCasa[id][cInteriorR]);
		reg_int(tabla, "Interior_Int", InfoCasa[id][cInteriorInt]);
		reg_int(tabla, "Interior_VW", InfoCasa[id][cInteriorVW]);
		reg_int(tabla, "BolosUwU", InfoCasa[id][cDinero]);
		reg_int(tabla, "Precio", InfoCasa[id][cPrecio]);
		reg_int(tabla, "Nivel", InfoCasa[id][cNivel]);
		reg_int(tabla, "Materiales", InfoCasa[id][cMateriales]);
		reg_int(tabla, "Armario1", InfoCasa[id][cArmario][0]);
		reg_int(tabla, "ArmarioCant1", InfoCasa[id][cArmarioCant][0]);
		reg_int(tabla, "Armario2", InfoCasa[id][cArmario][1]);
		reg_int(tabla, "ArmarioCant2", InfoCasa[id][cArmarioCant][1]);
		reg_int(tabla, "Armario3", InfoCasa[id][cArmario][2]);
		reg_int(tabla, "ArmarioCant3", InfoCasa[id][cArmarioCant][2]);
		reg_int(tabla, "Armario4", InfoCasa[id][cArmario][3]);
		reg_int(tabla, "ArmarioCant4", InfoCasa[id][cArmarioCant][3]);
		reg_int(tabla, "Armario5", InfoCasa[id][cArmario][4]);
		reg_int(tabla, "ArmarioCant5", InfoCasa[id][cArmarioCant][4]);
		reg_int(tabla, "Armario6", InfoCasa[id][cArmario][5]);
		reg_int(tabla, "ArmarioCant6", InfoCasa[id][cArmarioCant][5]);
		reg_int(tabla, "Armario7", InfoCasa[id][cArmario][6]);
		reg_int(tabla, "ArmarioCant7", InfoCasa[id][cArmarioCant][6]);
		reg_int(tabla, "Armario8", InfoCasa[id][cArmario][7]);
		reg_int(tabla, "ArmarioCant8", InfoCasa[id][cArmarioCant][7]);
		reg_int(tabla, "Armario9", InfoCasa[id][cArmario][8]);
		reg_int(tabla, "ArmarioCant9", InfoCasa[id][cArmarioCant][8]);
		reg_int(tabla, "Armario10", InfoCasa[id][cArmario][9]);
		reg_int(tabla, "ArmarioCant10", InfoCasa[id][cArmarioCant][9]);
		if (InfoCasa[id][cID_sql]) totalcasas++;
		//función
		if (InfoCasa[id][cTipo] != 0)
		{
			LabelPickup_casa(id);
			cargaditos++;
		}
		else noexitcasa(id);
	}
	printf("%d casas dinámicas (SQL: %d) cargadas correctamente.", cargaditos, totalcasas-1);
	return 1;
}

noexitcasa(id)
{
	DestroyDynamicPickup(InfoCasa[id][cPickupExt]);
	DestroyDynamicPickup(InfoCasa[id][cPickupInt]);
	DestroyDynamic3DTextLabel(InfoCasa[id][cLabelExt]);
	DestroyDynamic3DTextLabel(InfoCasa[id][cLabelInt]);
	InfoCasa[id][cPickupExt] = CreateDynamicPickup(1273, 1, -2190.7974, 165.9186, 58.2604, id, id);
	InfoCasa[id][cPickupInt] = CreateDynamicPickup(1273, 1, -2190.7974, 165.9186, 58.2604, id, id);
	InfoCasa[id][cLabelExt] = CreateDynamic3DTextLabel("casita", -1, -2190.7974, 165.9186, 58.2604, 1.0, .worldid = id, .interiorid = id);
	InfoCasa[id][cLabelInt] = CreateDynamic3DTextLabel("casita", -1, -2190.7974, 165.9186, 58.2604, 1.0, .worldid = id, .interiorid = id);
}

LabelPickup_casa(id)
{
	//delete error
	DestroyDynamicPickup(InfoCasa[id][cPickupExt]);
	DestroyDynamicPickup(InfoCasa[id][cPickupInt]);
	DestroyDynamic3DTextLabel(InfoCasa[id][cLabelExt]);
	DestroyDynamic3DTextLabel(InfoCasa[id][cLabelInt]);
	//info new
	new location[MAX_ZONE_NAME], house_label[470], model = 1273, exdireccion[215];
	Get2DZone(location, MAX_ZONE_NAME, InfoCasa[id][cExteriorX], InfoCasa[id][cExteriorY], InfoCasa[id][cExteriorZ]);
	if (InfoCasa[id][cExteriorVW] == 0 && InfoCasa[ id][cExteriorInt] == 0) format(exdireccion, sizeof exdireccion, "{00AE57}Casa #%d {00FF80}%s\n{C0C0C0}Usa '/detalles' para más información.", id, location);
	else format(exdireccion, sizeof exdireccion, "{00AE57}Casa #%d {00FF80}%s\n{C0C0C0}Usa '/detalles' para más información.", id, location);
	//3d label
	if (InfoCasa[id][cVenta] != 0)
	{
		model = 19522;
	}
	InfoCasa[id][cLabelExt] = CreateDynamic3DTextLabel(exdireccion, -1, InfoCasa[id][cExteriorX], InfoCasa[id][cExteriorY], InfoCasa[id][cExteriorZ]+0.4, 10.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1, InfoCasa[id][cExteriorVW], InfoCasa[id][cExteriorInt], -1);
	format(house_label, sizeof house_label, "{00AE57}Casa #%d {00FF80}%s\n{C0C0C0}Presiona 'H' para salir.", id);
	InfoCasa[id][cLabelInt] = CreateDynamic3DTextLabel(house_label, -1, InfoCasa[id][cInteriorX], InfoCasa[id][cInteriorY], InfoCasa[id][cInteriorZ]+0.4, 10.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1, InfoCasa[id][cInteriorVW], InfoCasa[id][cInteriorInt], -1);
	//pickup
	InfoCasa[id][cPickupInt] = CreateDynamicPickup(model, 1, InfoCasa[id][cInteriorX], InfoCasa[id][cInteriorY], InfoCasa[id][cInteriorZ], InfoCasa[id][cInteriorVW], InfoCasa[id][cInteriorInt]);
	InfoCasa[id][cPickupExt] = CreateDynamicPickup(model, 1, InfoCasa[id][cExteriorX], InfoCasa[id][cExteriorY], InfoCasa[id][cExteriorZ], InfoCasa[id][cExteriorVW], InfoCasa[id][cExteriorInt]);
}

GetClaseCasa(x)
{
	new eClase[24];
	switch (x)
	{
		case 1: alm(eClase, "baja");
		case 2: alm(eClase, "media-baja");
		case 3: alm(eClase, "media");
		case 4: alm(eClase, "media-alta");
		case 5: alm(eClase, "alta");
		default: alm(eClase, "desconocida");
	}
	return eClase;
}

PreciosCasas(casa)
{
	switch (InfoCasa[casa][cTipo])
	{
		case 1: InfoCasa[casa][cPrecio] = Random(1000, 25000);
		case 2: InfoCasa[casa][cPrecio] = Random(5500, 25000);
		case 3: InfoCasa[casa][cPrecio] = Random(30000, 50000);
		case 4: InfoCasa[casa][cPrecio] = Random(50000, 75000);
		case 5: InfoCasa[casa][cPrecio] = Random(80000, 125000);
	}	
}

SetInteriorCasa(playerid, id, interior)
{
	new Float: x, Float: y, Float: z, Float: r, int, clase;
	switch (interior)
	{
		//baja
		case 1: x = 266.5080, y = 304.9096, z = 999.1484, r = 271.8487, int = 2, clase = 1;
		case 2: x = 2218.4019, y = -1076.2317, z = 1050.4844, r = 94.0354, int = 1, clase = 1;
		case 3: x = 2233.7324, y = -1115.2200, z = 1050.8828, r = 4.4446, int = 5, clase = 1;
		//media-baja
		case 4: x = 2468.8379, y = -1698.2688, z = 1013.5078, r = 90.6120, int = 2, clase = 2;
		case 5: x = 217.2689, y = 1275.1978, z = 1059.0253, r = 1.2881, int = 4, clase = 2;
		case 6: x = 295.1263, y = 1472.2615, z = 1080.2578, r = 358.1545, int = 15, clase = 2;
		case 7: x = 226.7467, y = 1239.9583, z = 1082.1406, r = 87.4319, int = 2, clase = 2;
		//media
		case 8: x = 2270.4004, y = -1210.5198, z = 1047.5625, r = 91.5055, int = 10, clase = 3;
		case 9: x = 2196.8484, y = -1204.3329, z = 1049.0234, r = 94.3722, int = 6, clase = 3;
		//media-alta
		case 10: x = 83.0492, y = 1322.2887, z = 1083.8662, r = 0.9745, int = 9, clase = 4;
		case 11: x = 2317.7004, y = -1026.5896, z = 1050.2178, r = 7.2412, int = 9, clase = 4;
		case 12: x = 2324.4644, y = -1149.5463, z = 1050.7101, r = 2.8840, int = 12, clase = 4;
		//alta
		case 13: x = 140.2607, y = 1365.9283, z = 1083.8594, r = 3.7945, int = 5, clase = 5;
		case 14: x = 1260.6597, y = -785.3624, z = 1091.9063, r = 272.6137, int = 5, clase = 5;
	}
	if (playerid == -1)
	{
		new string[370];
		InfoCasa[id][cInteriorX] = x;
		InfoCasa[id][cInteriorY] = y;
		InfoCasa[id][cInteriorZ] = z;
		InfoCasa[id][cInteriorR] = r;
		InfoCasa[id][cInteriorInt] = int;
		InfoCasa[id][cTipo] = clase;
		mysql_format(DBInsanity, string, sizeof string, "UPDATE casas SET Interior_X = '%f', Interior_Y = '%f', Interior_Z = '%f', Interior_R = '%f', Interior_Int = '%d', Tipo = '%d' WHERE ID = '%d'", InfoCasa[id][cInteriorX], InfoCasa[id][cInteriorY], InfoCasa[id][cInteriorZ], InfoCasa[id][cInteriorR], InfoCasa[id][cInteriorInt], InfoCasa[id][cTipo], InfoCasa[id][cID_sql]);
		mysql_tquery(DBInsanity, string);
	}
	else
	{
		new string[90];
		SetPlayerPos(playerid, x, y, z);
		SetPlayerInterior(playerid, int);
		SetPlayerVirtualWorld(playerid, playerid);
		format(string, sizeof string, "Estás en el interior %d, clase: %s.", interior, GetClaseCasa(clase));
		SendClientMessage(playerid, COLOR_YELLOW, string);
	}
	return 1;
}

//renovación de sistema de negocios en sql, by EdinsonWalker (23/01/2020)

new neg_automatico[20]; //sistema de cobro productos-ganancia

enum negocioInfo
{
	nID_sql,								// id sql
	nNombre[32],                            // nombre
	nPropietario[MAX_PLAYER_NAME],          // propietario
	nVenta,                                 // venta
	nTipo,                                  // tipo
	nEmpleo,                                // 1 deja que ingresen | 0 los contrata
	nPrecio,                                // precio
	nNivel,                                 // nivel
	Float: nExteriorX,                      // exterior x
	Float: nExteriorY,                      // exterior y
	Float: nExteriorZ,                      // exterior z
	Float: nExteriorR,                      // exterior r
	nExteriorInt,                           // exterior int
	nExteriorVW,                            // exterior vw
	Float: nInteriorX,                      // interior x
	Float: nInteriorY,                      // interior y
	Float: nInteriorZ,                      // interior z
	Float: nInteriorR,                      // interior r
	nInteriorInt,                           // interior int
	nInteriorVW,                            // interior vw
	Float: nLugarCompraX,                   // lugar de comprar x
	Float: nLugarCompraY,                   // lugar de comprar y
	Float: nLugarCompraZ,                   // lugar de comprar z
	nSeguro,                                // seguro
	nDinero,                                // dinero
	nProductos,                             // productos
	nMapIcon,                               // mapicon
	Float: nActorX,                         // actor x
	Float: nActorY,                         // actor y
	Float: nActorZ,                         // actor z
	Float: nActorR,                         // actor r
	nActorSkin,                             // actor skin
	nRobado,								// disponible para robar
	//concesionario
	Float: nVehicleX,                       // entrega vehiculo x
	Float: nVehicleY,                       // entrega vehiculo y
	Float: nVehicleZ,                       // entrega vehiculo z
	Float: nVehicleR,                       // entrega vehiculo r
	//fabrica
	Float: nExteriorVehX,
	Float: nExteriorVehY,
	Float: nExteriorVehZ,
	Float: nExteriorVehR,
	Float: nExteriorVehX_V,
	Float: nExteriorVehY_V,
    nEmpleado[5],
	nQuimicos,
	nTimeNecesitaQuimicos,
	nCocinando[5],
	nTimeCocinando[5],
	nEntregasListas,
	//mecánico
	nPrecioPintura,
	nPrecioPaintJob,
	nPrecioReparacion,
	nPrecioGasolina,
	nPrecioLlantas,
	nPrecioNitro,
	nPrecioHyd,
	nPrecioTuneo,
	//dynamic fabrica:
	Text3D: nExteriorVehLabel,
	nExteriorVehPickup,
	Text3D: nInteriorVehLabel,
	nInteriorVehPickup,
	nObjMoney,
	nVehiculo[2],
	nCountQVeh1,
	nCountQVeh2,
	nBarrilVeh1[5],
	nBarrilVeh2[5],
    nActorEmpleado[5],
	nRecorridosQuimicos,
	Text3D: nLabelQuimicos[3],
	Text3D: nLabelCocina[5],
	nCajaObj[20],
	//dynamic
	Text3D: nExteriorLabel,                 // exterior label
	nExteriorPickup,                        // exterior pickup
	nExteriorMapIcon,                       // exterior mapicon
	Text3D: nInteriorLabel,                 // interior label
	nInteriorPickup,                        // interior pickup
	nInteriorActor,                         // interior actor
	Text3D: nLugarCompraLabel,              // lugar de comprar label
	nLugarCompraPickup,                     // lugar de comprar pickup
	nVeh1SinUso,
	nVeh2SinUso,
}
new InfoNegocio[MAX_NEGOCIOS][negocioInfo];

new EnViajeQuimicos[MAX_PLAYERS]; // 1: buscando químicos - 2: por entregar químicos
new EnViajeDrogas[MAX_PLAYERS]; // 1: llevando drogas - 2: devolviendo fábrica
new UsandoVehFabrica[MAX_PLAYERS];

IsPlayerJob(playerid, type)
{
	new id = InfoPersonaje[playerid][pEmpleo];
	if(id == 0) return 0;
	if(id == type) return id;
	return 0;
}

JobIlegal(job)
{
	new quesoXD = 0;
	switch(job)
	{
		case 3: quesoXD = 1; //Delincuente
		case 4: quesoXD = 1; //Ladrón de autos uwu
		default: quesoXD = 0;
	}
	return quesoXD;
}

JobDeshabilitado(job)
{
	new estadojob = 1;
	switch(job)
	{
		case 1: estadojob = 0;
		case 2: estadojob = 0;
		case 3: estadojob = 0;
		case 4: estadojob = 1;
	}
	return estadojob;
}

IsNameJob(type)
{
	new name[19];
	switch(type)
	{
		case 1: alm(name, "Repartidor");
		case 2: alm(name, "Leñador");
		case 3: alm(name, "Delincuente");
		case 4: alm(name, "Ladrón de autos");
	}
	return name;
}

IsPlayerContrato(playerid, type)
{
	if (InfoPersonaje[playerid][pNegocio1] != -1)
	{
		if (InfoNegocio[InfoPersonaje[playerid][pNegocio1]][nTipo] == type) return InfoPersonaje[playerid][pNegocio1];
	}
	if (InfoPersonaje[playerid][pNegocio2] != -1)
	{
		if (InfoNegocio[InfoPersonaje[playerid][pNegocio2]][nTipo] == type) return InfoPersonaje[playerid][pNegocio2];
	}
	new id = InfoPersonaje[playerid][pContrato];
	if (id == -1) return -1;
	if (InfoNegocio[id][nTipo] == type) return id;
	return -1;
}


GetNameContrato(id)
{
	new is_name[19];
	switch (InfoNegocio[id][nTipo])
	{
		case 6: alm(is_name, "Repartidor");
		case 9: alm(is_name, "Mecánico");
		case 12: alm(is_name, "Fábrica de drogas");
		case 13: alm(is_name, "Médico");
	}
	return is_name;
}

forward CargarNegocios();
public CargarNegocios()
{
	//cargado de negocios
	new cargaditos = 0;
	Loop(tabla, cache_num_rows(), 0)
	{
	    new id = tabla+1;
		reg_int(tabla, "ID", InfoNegocio[id][nID_sql]);
		reg_string(tabla, "Nombre", InfoNegocio[id][nNombre], 32);
		reg_string(tabla, "Propietario", InfoNegocio[id][nPropietario], MAX_PLAYER_NAME);
		reg_int(tabla, "Venta", InfoNegocio[id][nVenta]);
		reg_int(tabla, "Tipo", InfoNegocio[id][nTipo]);
		reg_int(tabla, "Empleo", InfoNegocio[id][nEmpleo]);
		reg_int(tabla, "Precio", InfoNegocio[id][nPrecio]);
		reg_int(tabla, "Nivel", InfoNegocio[id][nNivel]);
		reg_float(tabla, "ExteriorX", InfoNegocio[id][nExteriorX]);
		reg_float(tabla, "ExteriorY", InfoNegocio[id][nExteriorY]);
		reg_float(tabla, "ExteriorZ", InfoNegocio[id][nExteriorZ]);
		reg_float(tabla, "ExteriorR", InfoNegocio[id][nExteriorR]);
		reg_int(tabla, "ExteriorInt", InfoNegocio[id][nExteriorInt]);
		reg_int(tabla, "ExteriorVW", InfoNegocio[id][nExteriorVW]);
		reg_float(tabla, "InteriorX", InfoNegocio[id][nInteriorX]);
		reg_float(tabla, "InteriorY", InfoNegocio[id][nInteriorY]);
		reg_float(tabla, "InteriorZ", InfoNegocio[id][nInteriorZ]);
		reg_float(tabla, "InteriorR", InfoNegocio[id][nInteriorR]);
		reg_int(tabla, "InteriorInt", InfoNegocio[id][nInteriorInt]);
		reg_int(tabla, "InteriorVW", InfoNegocio[id][nInteriorVW]);
		reg_float(tabla, "LugarCompraX", InfoNegocio[id][nLugarCompraX]);
		reg_float(tabla, "LugarCompraY", InfoNegocio[id][nLugarCompraY]);
		reg_float(tabla, "LugarCompraZ", InfoNegocio[id][nLugarCompraZ]);
		reg_int(tabla, "Seguro", InfoNegocio[id][nSeguro]);
		reg_int(tabla, "BolosUwU", InfoNegocio[id][nDinero]);
		reg_int(tabla, "Productos", InfoNegocio[id][nProductos]);
		reg_int(tabla, "MapIcon", InfoNegocio[id][nMapIcon]);
		reg_float(tabla, "ActorX", InfoNegocio[id][nActorX]);
		reg_float(tabla, "ActorY", InfoNegocio[id][nActorY]);
		reg_float(tabla, "ActorZ", InfoNegocio[id][nActorZ]);
		reg_float(tabla, "ActorR", InfoNegocio[id][nActorR]);
		reg_int(tabla, "ActorSkin", InfoNegocio[id][nActorSkin]);
		reg_float(tabla, "VehicleX", InfoNegocio[id][nVehicleX]);
		reg_float(tabla, "VehicleY", InfoNegocio[id][nVehicleY]);
		reg_float(tabla, "VehicleZ", InfoNegocio[id][nVehicleZ]);
		reg_float(tabla, "VehicleR", InfoNegocio[id][nVehicleR]);
		reg_float(tabla, "ExteriorVehX", InfoNegocio[id][nExteriorVehX]);
		reg_float(tabla, "ExteriorVehY", InfoNegocio[id][nExteriorVehY]);
		reg_float(tabla, "ExteriorVehZ", InfoNegocio[id][nExteriorVehZ]);
		reg_float(tabla, "ExteriorVehR", InfoNegocio[id][nExteriorVehR]);
		reg_float(tabla, "ExteriorVehX_V", InfoNegocio[id][nExteriorVehX_V]);
		reg_float(tabla, "ExteriorVehY_V", InfoNegocio[id][nExteriorVehY_V]);
		reg_int(tabla, "Empleado1", InfoNegocio[id][nEmpleado][0]);
		reg_int(tabla, "Empleado2", InfoNegocio[id][nEmpleado][1]);
		reg_int(tabla, "Empleado3", InfoNegocio[id][nEmpleado][2]);
		reg_int(tabla, "Empleado4", InfoNegocio[id][nEmpleado][3]);
		reg_int(tabla, "Empleado5", InfoNegocio[id][nEmpleado][4]);
		reg_int(tabla, "Quimicos", InfoNegocio[id][nQuimicos]);
		reg_int(tabla, "TimeNecesitaQuimicos", InfoNegocio[id][nTimeNecesitaQuimicos]);
		reg_int(tabla, "Cocinando1", InfoNegocio[id][nCocinando][0]);
		reg_int(tabla, "Cocinando2", InfoNegocio[id][nCocinando][1]);
		reg_int(tabla, "Cocinando3", InfoNegocio[id][nCocinando][2]);
		reg_int(tabla, "Cocinando4", InfoNegocio[id][nCocinando][3]);
		reg_int(tabla, "Cocinando5", InfoNegocio[id][nCocinando][4]);
		reg_int(tabla, "TimeCocinando1", InfoNegocio[id][nTimeCocinando][0]);
		reg_int(tabla, "TimeCocinando2", InfoNegocio[id][nTimeCocinando][1]);
		reg_int(tabla, "TimeCocinando3", InfoNegocio[id][nTimeCocinando][2]);
		reg_int(tabla, "TimeCocinando4", InfoNegocio[id][nTimeCocinando][3]);
		reg_int(tabla, "TimeCocinando5", InfoNegocio[id][nTimeCocinando][4]);
		reg_int(tabla, "EntregasListas", InfoNegocio[id][nEntregasListas]);
		new gformat[512];
		reg_string(tabla, "Mecanico", gformat, 512);
		sscanf(gformat, "p<|>dddddddd", InfoNegocio[id][nPrecioPintura], InfoNegocio[id][nPrecioPaintJob], InfoNegocio[id][nPrecioReparacion], InfoNegocio[id][nPrecioGasolina],
		InfoNegocio[id][nPrecioLlantas], InfoNegocio[id][nPrecioNitro], InfoNegocio[id][nPrecioHyd], InfoNegocio[id][nPrecioTuneo]);
		if (InfoNegocio[id][nID_sql]) totalnegocios++;
		//función
		if (InfoNegocio[id][nTipo] != 0)
		{
			LabelPickup_negocio(id, 1, 1, 1, 1);
			if (InfoNegocio[id][nTipo] == 12) CargarFabricas(id);
			cargaditos++;
		}
		else noexitnegocio(id);
	}
	printf("%d negocios dinámicos (SQL: %d) cargados correctamente.", cargaditos, totalnegocios-1);

	//fábricas:
	CreateDynamic3DTextLabel("Presiona {00AE57}'H'{EBEBEB} para\nadministrar la fábrica", 0xEBEBEBFF, -2182.9316, -208.9902, 544.7307, 7.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, -1, 9, -1);
	CreateDynamic3DTextLabel("Presiona {00AE57}'H'{EBEBEB} para ver la lista de actividades", 0xEBEBEBFF, -2181.2676, -211.3310, 545.2496, 7.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, -1, 9, -1);

	//costo de productos y ganancia
	neg_automatico[1] = Random(3200, 4200);
	neg_automatico[2] = Random(4000, 5400);
	neg_automatico[3] = Random(2100, 3100);
	neg_automatico[4] = Random(2000, 3230);
	neg_automatico[5] = Random(5200, 6600);
	neg_automatico[6] = 0;
	neg_automatico[7] = Random(1750, 2570);
	neg_automatico[8] = Random(4400, 5800);
	neg_automatico[9] = 0;
	neg_automatico[10] = Random(8400, 13600);
	neg_automatico[11] = Random(1750, 3180);
	neg_automatico[12] = 0;
	neg_automatico[13] = 0;

	return 1;
}

ActualizarPrecioNegocio(id)
{
	new gformat2[512];
	format(gformat2, sizeof gformat2, "%d|%d|%d|%d|%d|%d|%d|%d|",
	InfoNegocio[id][nPrecioPintura], InfoNegocio[id][nPrecioPaintJob], InfoNegocio[id][nPrecioReparacion], InfoNegocio[id][nPrecioGasolina],
	InfoNegocio[id][nPrecioLlantas], InfoNegocio[id][nPrecioNitro], InfoNegocio[id][nPrecioHyd], InfoNegocio[id][nPrecioTuneo]);

	new query[620];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE negocios SET Mecanico = '%e' WHERE ID = '%d'", gformat2, InfoNegocio[id][nID_sql]);
	mysql_tquery(DBInsanity, query);
}

LabelPickup_negocio(id, labelpickup, mapicon, actor, lugarcompra)
{
	if (labelpickup != 0)
	{
		//delete error
		DestroyDynamicPickup(InfoNegocio[id][nExteriorPickup]);
		DestroyDynamicPickup(InfoNegocio[id][nInteriorPickup]);
		DestroyDynamic3DTextLabel(InfoNegocio[id][nExteriorLabel]);
		DestroyDynamic3DTextLabel(InfoNegocio[id][nInteriorLabel]);
		//info new
		new negocio_label[120], model = 1274;
		if (InfoNegocio[id][nTipo] == 6) model = 19523;
		if (InfoNegocio[id][nTipo] == 12) model = 1318;
		if (InfoNegocio[id][nTipo] == 13) model = 1240;
		else model = 1274;

		format(negocio_label, sizeof negocio_label, "{00AE57}%s #%d\n{C0C0C0}Usa '/detalles' para más información.", GetTipoNegocio(InfoNegocio[id][nTipo]), id);
		InfoNegocio[id][nExteriorLabel] = CreateDynamic3DTextLabel(negocio_label, -1, InfoNegocio[id][nExteriorX], InfoNegocio[id][nExteriorY], InfoNegocio[id][nExteriorZ]+0.5, 10.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1, InfoNegocio[id][nExteriorVW], InfoNegocio[id][nExteriorInt], -1);		

		format(negocio_label, sizeof negocio_label, "{00AE57}%s #%d\n{C0C0C0}Presiona 'H' para salir.", GetTipoNegocio(InfoNegocio[id][nTipo]), id);
		InfoNegocio[id][nInteriorLabel] = CreateDynamic3DTextLabel(negocio_label, -1, InfoNegocio[id][nInteriorX], InfoNegocio[id][nInteriorY], InfoNegocio[id][nInteriorZ]+0.5, 10.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		//pickup
		InfoNegocio[id][nInteriorPickup] = CreateDynamicPickup(model, 1, InfoNegocio[id][nInteriorX], InfoNegocio[id][nInteriorY], InfoNegocio[id][nInteriorZ], InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt]);
		InfoNegocio[id][nExteriorPickup] = CreateDynamicPickup(model, 1, InfoNegocio[id][nExteriorX], InfoNegocio[id][nExteriorY], InfoNegocio[id][nExteriorZ], InfoNegocio[id][nExteriorVW], InfoNegocio[id][nExteriorInt]);
		//pickup fabrica vehículo
		if (InfoNegocio[id][nExteriorVehX] != 0.0 && InfoNegocio[id][nTipo] == 12)
		{
			DestroyDynamicPickup(InfoNegocio[id][nExteriorVehPickup]);
			DestroyDynamicPickup(InfoNegocio[id][nInteriorVehPickup]);
			DestroyDynamic3DTextLabel(InfoNegocio[id][nExteriorVehLabel]);
			DestroyDynamic3DTextLabel(InfoNegocio[id][nInteriorVehLabel]);
			//entrada
			format(negocio_label, sizeof negocio_label, "{00AE57}Fábrica %s #%d\n{C0C0C0}Usa '/detalles' para más información.", InfoNegocio[id][nNombre], id);
			InfoNegocio[id][nExteriorVehLabel] = CreateDynamic3DTextLabel(negocio_label, -1, InfoNegocio[id][nExteriorVehX], InfoNegocio[id][nExteriorVehY], InfoNegocio[id][nExteriorVehZ]+0.5, 10.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1, InfoNegocio[id][nExteriorVW], InfoNegocio[id][nExteriorInt], -1);
			InfoNegocio[id][nExteriorVehPickup] = CreateDynamicPickup(19132, 1, InfoNegocio[id][nExteriorVehX], InfoNegocio[id][nExteriorVehY], InfoNegocio[id][nExteriorVehZ], InfoNegocio[id][nExteriorVW], InfoNegocio[id][nExteriorInt]);
			//salida
			format(negocio_label, sizeof negocio_label, "{00AE57}Fábrica %s #%d\n{C0C0C0}Presiona 'H' para salir.", InfoNegocio[id][nNombre], id);
			InfoNegocio[id][nInteriorVehLabel] = CreateDynamic3DTextLabel(negocio_label, -1, -2140.3772, -247.4875, 544.8397+0.5, 15.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
			InfoNegocio[id][nInteriorVehPickup] = CreateDynamicPickup(19132, 1, -2140.3772, -247.4875, 544.8397, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt]);
		}
	}
	if (mapicon != 0 && InfoNegocio[id][nMapIcon] != 0)
	{
		DestroyDynamicMapIcon(InfoNegocio[id][nExteriorMapIcon]);
		InfoNegocio[id][nExteriorMapIcon] = CreateDynamicMapIcon(InfoNegocio[id][nExteriorX], InfoNegocio[id][nExteriorY], InfoNegocio[id][nExteriorZ], InfoNegocio[id][nMapIcon], 0, 0, 0, -1, 300);
	}
	if (actor != 0 && InfoNegocio[id][nActorSkin] != 0)
	{
		DestroyDynamicActor(InfoNegocio[id][nInteriorActor]);
		InfoNegocio[id][nInteriorActor] = CreateDynamicActor(InfoNegocio[id][nActorSkin], InfoNegocio[id][nActorX], InfoNegocio[id][nActorY], InfoNegocio[id][nActorZ], InfoNegocio[id][nActorR], true, 100.0, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt]);
	}
	if (lugarcompra != 0 && InfoNegocio[id][nLugarCompraX] != 0.0)
	{
		DestroyDynamicPickup(InfoNegocio[id][nLugarCompraPickup]);
		DestroyDynamic3DTextLabel(InfoNegocio[id][nLugarCompraLabel]);
		if (InfoNegocio[id][nTipo] == 13)
		{
			InfoNegocio[id][nLugarCompraPickup] = CreateDynamicPickup(11738, 1, InfoNegocio[id][nLugarCompraX], InfoNegocio[id][nLugarCompraY], InfoNegocio[id][nLugarCompraZ], InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt]);
			InfoNegocio[id][nLugarCompraLabel] = CreateDynamic3DTextLabel("Botiquin de primeros auxilios\nAdquiere uno por {00CC00}$1,500{EBEBEB}\nEscribe aquí '{00AE57}/tomarhp{EBEBEB}'", -1, InfoNegocio[id][nLugarCompraX], InfoNegocio[id][nLugarCompraY], InfoNegocio[id][nLugarCompraZ], 5.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
		}
		else
		{
			InfoNegocio[id][nLugarCompraPickup] = CreateDynamicPickup(19578, 1, InfoNegocio[id][nLugarCompraX], InfoNegocio[id][nLugarCompraY], InfoNegocio[id][nLugarCompraZ], InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt]);
			InfoNegocio[id][nLugarCompraLabel] = CreateDynamic3DTextLabel("Para abrir el {00AE57}menú de productos{FFFFFF}\nEscribe aquí '{00AE57}/comprar{FFFFFF}'", -1, InfoNegocio[id][nLugarCompraX], InfoNegocio[id][nLugarCompraY], InfoNegocio[id][nLugarCompraZ], 10.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
		}
	}
}

noexitnegocio(id)
{
	DestroyDynamicActor(InfoNegocio[id][nInteriorActor]);
	DestroyDynamicMapIcon(InfoNegocio[id][nExteriorMapIcon]);
	DestroyDynamicPickup(InfoNegocio[id][nExteriorPickup]);
	DestroyDynamicPickup(InfoNegocio[id][nInteriorPickup]);
	DestroyDynamicPickup(InfoNegocio[id][nLugarCompraPickup]);
	DestroyDynamic3DTextLabel(InfoNegocio[id][nExteriorLabel]);
	DestroyDynamic3DTextLabel(InfoNegocio[id][nInteriorLabel]);
	DestroyDynamic3DTextLabel(InfoNegocio[id][nLugarCompraLabel]);
	DestroyDynamicPickup(InfoNegocio[id][nExteriorVehPickup]);
	DestroyDynamicPickup(InfoNegocio[id][nInteriorVehPickup]);
	DestroyDynamic3DTextLabel(InfoNegocio[id][nExteriorVehLabel]);
	DestroyDynamic3DTextLabel(InfoNegocio[id][nInteriorVehLabel]);
	InfoNegocio[id][nExteriorPickup] = CreateDynamicPickup(1273, 1, -2190.7974, 165.9186, 58.2604, id, id);
	InfoNegocio[id][nInteriorPickup] = CreateDynamicPickup(1273, 1, -2190.7974, 165.9186, 58.2604, id, id);
	InfoNegocio[id][nLugarCompraPickup] = CreateDynamicPickup(1273, 1, -2190.7974, 165.9186, 58.2604, id, id);
	InfoNegocio[id][nExteriorLabel] = CreateDynamic3DTextLabel("negocio", -1, -2190.7974, 165.9186, 58.2604, 1.0, .worldid = id, .interiorid = id);
	InfoNegocio[id][nInteriorLabel] = CreateDynamic3DTextLabel("negocio", -1, -2190.7974, 165.9186, 58.2604, 1.0, .worldid = id, .interiorid = id);
	InfoNegocio[id][nLugarCompraLabel] = CreateDynamic3DTextLabel("negocio", -1, -2190.7974, 165.9186, 58.2604, 1.0, .worldid = id, .interiorid = id);
	InfoNegocio[id][nExteriorVehLabel] = CreateDynamic3DTextLabel("negocio", -1, -2190.7974, 165.9186, 58.2604, 1.0, .worldid = id, .interiorid = id);
	InfoNegocio[id][nInteriorVehLabel] = CreateDynamic3DTextLabel("negocio", -1, -2190.7974, 165.9186, 58.2604, 1.0, .worldid = id, .interiorid = id);
	InfoNegocio[id][nExteriorVehPickup] = CreateDynamicPickup(1273, 1, -2190.7974, 165.9186, 58.2604, id, id);
	InfoNegocio[id][nInteriorVehPickup] = CreateDynamicPickup(1273, 1, -2190.7974, 165.9186, 58.2604, id, id);
}

GetTipoNegocio(tipo)
{
	new name_tipo[27];
	switch (tipo)
	{
		case 1: alm(name_tipo, "24-7");
		case 2: alm(name_tipo, "Ropa");
		case 3: alm(name_tipo, "Restaurante");
		case 4: alm(name_tipo, "Gasolinera");
		case 5: alm(name_tipo, "Armería");
		case 6: alm(name_tipo, "Repartos");
		case 7: alm(name_tipo, "Sex shop");
		case 8: alm(name_tipo, "Club bar");
		case 9: alm(name_tipo, "Mecánico");
		case 10: alm(name_tipo, "Concesionario");
		case 11: alm(name_tipo, "Pescadería");
		case 12: alm(name_tipo, "Fábrica de drogas");
		default: alm(name_tipo, "Privado");
	}
	return name_tipo;
}

CobroNegocio(id, valor) // ID del negocio (VW del usuario y cantidad a pagar). (Este stock no afecta al VW 0).
{
	if (id == -1) return 1;
	if (InfoNegocio[id][nVenta] == 0) return 1;
	InfoNegocio[id][nDinero] += valor;
	if (valor >= 500) InfoNegocio[id][nProductos]--;
	new query[210];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE negocios SET BolosUwU = '%d', Productos = '%d' WHERE ID = '%d'", InfoNegocio[id][nDinero], InfoNegocio[id][nProductos], InfoNegocio[id][nID_sql]);
	mysql_tquery(DBInsanity, query);
	return 1;
}

// fábricas de drogas (19/02/2020) by EdinsonWalker
CargarFabricas(id)
{
	//cartel de dinero
	InfoNegocio[id][nObjMoney] = CreateDynamicObject(19353, -2190.02563, -206.69887, 545.51245, 0.00000, 0.00000, 0.00000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
	UpdateDineroGuardado(id);
	//vehículos
	InfoNegocio[id][nVehiculo][0] = CreateVehicle(554, -2168.7524, -246.0328, 544.7685, -91.0200, 1, 53, -1);
	LinkVehicleToInterior(InfoNegocio[id][nVehiculo][0], InfoNegocio[id][nInteriorInt]);
	SetVehicleVirtualWorld(InfoNegocio[id][nVehiculo][0], InfoNegocio[id][nInteriorVW]);
	SetVehicleHealth(InfoNegocio[id][nVehiculo][0], 5000.0);
	InfoNegocio[id][nVehiculo][1] = CreateVehicle(554, -2162.6091, -251.6801, 544.7685, -72.0600, 1, 53, -1);
	LinkVehicleToInterior(InfoNegocio[id][nVehiculo][1], InfoNegocio[id][nInteriorInt]);
	SetVehicleVirtualWorld(InfoNegocio[id][nVehiculo][1], InfoNegocio[id][nInteriorVW]);
	SetVehicleHealth(InfoNegocio[id][nVehiculo][1], 5000.0);
	//empleados
	if (InfoNegocio[id][nEmpleado][0] != 0)
	{
		InfoNegocio[id][nActorEmpleado][0] = CreateDynamicActor(InfoNegocio[id][nEmpleado][0], -2161.46045, -232.17979, 544.7299, 180.0000, true, 100.0, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt]);
	}
	if (InfoNegocio[id][nEmpleado][1] != 0)
	{
		InfoNegocio[id][nActorEmpleado][1] = CreateDynamicActor(InfoNegocio[id][nEmpleado][1], -2166.19263, -232.17979, 544.7299, 180.0000, true, 100.0, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt]);
	}
	if (InfoNegocio[id][nEmpleado][2] != 0)
	{
		InfoNegocio[id][nActorEmpleado][2] = CreateDynamicActor(InfoNegocio[id][nEmpleado][2], -2170.95386, -232.17979, 544.7299, 180.0000, true, 100.0, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt]);
	}
	if (InfoNegocio[id][nEmpleado][3] != 0)
	{
		InfoNegocio[id][nActorEmpleado][3] = CreateDynamicActor(InfoNegocio[id][nEmpleado][3], -2175.86133, -232.17979, 544.7299, 180.0000, true, 100.0, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt]);
	}
	if (InfoNegocio[id][nEmpleado][4] != 0)
	{
		InfoNegocio[id][nActorEmpleado][4] = CreateDynamicActor(InfoNegocio[id][nEmpleado][4], -2181.31445, -232.17979, 544.7299, 180.0000, true, 100.0, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt]);
	}
	//quimicos
	new QuimiEx[240];
	format(QuimiEx, sizeof QuimiEx, "{00AE57}Tanque de almacenaje{FFFFFF}\nQuímicos acumulados: {3399FF}%d{FFFFFF}\nPresiona {00AE57}'H'{FFFFFF} para preparar el cristal", InfoNegocio[id][nQuimicos]);
	InfoNegocio[id][nLabelQuimicos][0] = CreateDynamic3DTextLabel(QuimiEx, -1, -2155.43799, -264.92325, 544.66193, 8.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
	InfoNegocio[id][nLabelQuimicos][1] = CreateDynamic3DTextLabel(QuimiEx, -1, -2158.95898, -265.10498, 544.66193, 8.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
	InfoNegocio[id][nLabelQuimicos][2] = CreateDynamic3DTextLabel(QuimiEx, -1, -2162.32373, -265.29837, 544.66193, 8.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
	//cocinando metanfetamina
	new MetanEx[340];
	format(MetanEx, sizeof MetanEx, "{00AE57}Mesa de producción #1{FFFFFF}\n%s", EstadoMesaProduccion(id, 0));
	InfoNegocio[id][nLabelCocina][0] = CreateDynamic3DTextLabel(MetanEx, -1, -2161.47070, -233.69153, 544.87073, 6.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
	format(MetanEx, sizeof MetanEx, "{00AE57}Mesa de producción #2{FFFFFF}\n%s", EstadoMesaProduccion(id, 1));
	InfoNegocio[id][nLabelCocina][1] = CreateDynamic3DTextLabel(MetanEx, -1, -2166.25708, -233.69153, 544.87073, 6.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
	format(MetanEx, sizeof MetanEx, "{00AE57}Mesa de producción #3{FFFFFF}\n%s", EstadoMesaProduccion(id, 2));
	InfoNegocio[id][nLabelCocina][2] = CreateDynamic3DTextLabel(MetanEx, -1, -2170.97900, -233.69153, 544.87073, 6.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
	format(MetanEx, sizeof MetanEx, "{00AE57}Mesa de producción #4{FFFFFF}\n%s", EstadoMesaProduccion(id, 3));
	InfoNegocio[id][nLabelCocina][3] = CreateDynamic3DTextLabel(MetanEx, -1, -2175.96655, -233.69153, 544.87073, 6.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
	format(MetanEx, sizeof MetanEx, "{00AE57}Mesa de producción #5{FFFFFF}\n%s", EstadoMesaProduccion(id, 4));
	InfoNegocio[id][nLabelCocina][4] = CreateDynamic3DTextLabel(MetanEx, -1, -2181.32300, -233.69153, 544.87073, 6.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
	//cajas
	Loop(x, InfoNegocio[id][nEntregasListas], 0)
	{
		ColocarProduccion(id, x+1);
	}
}

EnEntregaDrogas(playerid)
{
	if (IsPlayerInRangeOfPoint(playerid, 11.0, 1092.6354, -1215.1941, 17.2890)) return 1;
	else if (IsPlayerInRangeOfPoint(playerid, 11.0, 2102.6060, -2086.7402, 13.2103)) return 1;
	else if (IsPlayerInRangeOfPoint(playerid, 11.0, 2683.9063, -1109.2195, 68.9253)) return 1;
	else if (IsPlayerInRangeOfPoint(playerid, 11.0, 2202.7043, -2299.6982, 14.2621)) return 1;
	return 0;
}

EnRecogerQuimicos(playerid)
{
	if (IsPlayerInRangeOfPoint(playerid, 11.0, -33.2935, 2340.0342, 24.2849)) return 1;
	else if (IsPlayerInRangeOfPoint(playerid, 11.0, -1850.3842, 124.1603, 15.1508)) return 1;
	else if (IsPlayerInRangeOfPoint(playerid, 11.0, -1037.8477, 1549.7322, 33.0265)) return 1;
	else if (IsPlayerInRangeOfPoint(playerid, 11.0, 1091.5005, 2364.4463, 10.8606)) return 1;
	return 0;
}

EnTanquesProduccion(playerid)
{
	if (IsPlayerInRangeOfPoint(playerid, 2.0, -2155.43799, -264.92325, 544.66193) && InfoPersonaje[playerid][pInterior] == 9) return 1;
	else if (IsPlayerInRangeOfPoint(playerid, 2.0, -2158.95898, -265.10498, 544.66193) && InfoPersonaje[playerid][pInterior] == 9) return 1;
	else if (IsPlayerInRangeOfPoint(playerid, 2.0, -2162.32373, -265.29837, 544.66193) && InfoPersonaje[playerid][pInterior] == 9) return 1;
	return 0;
}

EnMesasProduccion(playerid)
{
	if (IsPlayerInRangeOfPoint(playerid, 2.0, -2161.47070, -233.69153, 544.87073) && InfoPersonaje[playerid][pInterior] == 9) return 0;
	else if (IsPlayerInRangeOfPoint(playerid, 2.0, -2166.25708, -233.67906, 544.87073) && InfoPersonaje[playerid][pInterior] == 9) return 1;
	else if (IsPlayerInRangeOfPoint(playerid, 2.0, -2170.97900, -233.71970, 544.87073) && InfoPersonaje[playerid][pInterior] == 9) return 2;
	else if (IsPlayerInRangeOfPoint(playerid, 2.0, -2175.96655, -233.71837, 544.87073) && InfoPersonaje[playerid][pInterior] == 9) return 3;
	else if (IsPlayerInRangeOfPoint(playerid, 2.0, -2181.32300, -233.74008, 544.87073) && InfoPersonaje[playerid][pInterior] == 9) return 4;
	return -1;
}

EstadoMesaProduccion(id, x)
{
	new string[128];
	if (InfoNegocio[id][nCocinando][x] == 0)
	{
		if (InfoNegocio[id][nEmpleado][x] == 0) format(string, sizeof string, "Estado: {EB0000}falta empleado");
		else
		{
			format(string, sizeof string, "Estado: {DBED16}faltan materiales{FFFFFF}\nVe a los {3399FF}tanques{FFFFFF} por cristal");
		}
	}
	else
	{
		if (InfoNegocio[id][nTimeCocinando][x] != 0)
		{
		    if (InfoNegocio[id][nTimeCocinando][x] == 1) format(string, sizeof string, "Estado: {00CC00}procesando{FFFFFF}\nTiempo de entrega: {8080FF}1 minuto");
		    else format(string, sizeof string, "Estado: {00CC00}procesando{FFFFFF}\nTiempo de entrega: {8080FF}%d minutos", InfoNegocio[id][nTimeCocinando][x]);
		}
		else format(string, sizeof string, "Estado: {3D83CE}esperando recolección{FFFFFF}\nPresiona {00AE57}'H'{FFFFFF} para mover la droga de la mesa");
	}
	return string;
}

UpdateDineroGuardado(id)
{
	new moneytext[128];
	if (InfoNegocio[id][nDinero] >= 0) format(moneytext, sizeof moneytext, "Dinero guardado:\n{00C600}$%s", diner_coma(InfoNegocio[id][nDinero]));
	else format(moneytext, sizeof moneytext, "Dinero guardado:\n{FD1717}$%s", diner_coma(InfoNegocio[id][nDinero]));
	SetDynamicObjectMaterialText(InfoNegocio[id][nObjMoney], 0, moneytext, 130, "F25_Bank_Printer_Bold", 25, 1, 0xFFFFFFFF, 0, 1);
}

UpdateQuimicos(id)
{
	new QuimiEx[240];
	format(QuimiEx, sizeof QuimiEx, "{00AE57}Tanque de almacenaje{FFFFFF}\nQuímicos acumulados: {3399FF}%d{FFFFFF}\nPresiona {00AE57}'H'{FFFFFF} para preparar el cristal", InfoNegocio[id][nQuimicos]);
	UpdateDynamic3DTextLabelText(InfoNegocio[id][nLabelQuimicos][0], -1, QuimiEx);
	UpdateDynamic3DTextLabelText(InfoNegocio[id][nLabelQuimicos][1], -1, QuimiEx);
	UpdateDynamic3DTextLabelText(InfoNegocio[id][nLabelQuimicos][2], -1, QuimiEx);
}

UpdateMesasProduccion(id)
{
	//cocinando metanfetamina
	new MetanEx[340];
	format(MetanEx, sizeof MetanEx, "{00AE57}Mesa de producción #1{FFFFFF}\n%s", EstadoMesaProduccion(id, 0));
	UpdateDynamic3DTextLabelText(InfoNegocio[id][nLabelCocina][0], -1, MetanEx);
	format(MetanEx, sizeof MetanEx, "{00AE57}Mesa de producción #2{FFFFFF}\n%s", EstadoMesaProduccion(id, 1));
	UpdateDynamic3DTextLabelText(InfoNegocio[id][nLabelCocina][1], -1, MetanEx);
	format(MetanEx, sizeof MetanEx, "{00AE57}Mesa de producción #3{FFFFFF}\n%s", EstadoMesaProduccion(id, 2));
	UpdateDynamic3DTextLabelText(InfoNegocio[id][nLabelCocina][2], -1, MetanEx);
	format(MetanEx, sizeof MetanEx, "{00AE57}Mesa de producción #4{FFFFFF}\n%s", EstadoMesaProduccion(id, 3));
	UpdateDynamic3DTextLabelText(InfoNegocio[id][nLabelCocina][3], -1, MetanEx);
	format(MetanEx, sizeof MetanEx, "{00AE57}Mesa de producción #5{FFFFFF}\n%s", EstadoMesaProduccion(id, 4));
	UpdateDynamic3DTextLabelText(InfoNegocio[id][nLabelCocina][4], -1, MetanEx);
}

ColocarProduccion(id, x)
{
	switch (x)
	{
		case 1: InfoNegocio[id][nCajaObj][0] = CreateDynamicObject(1271, -2158.54492, -239.05231, 544.19897,   0.00000, 0.00000, -20.64000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 2: InfoNegocio[id][nCajaObj][1] = CreateDynamicObject(1271, -2158.54907, -238.99904, 545.26978,   0.00000, 0.00000, 10.32000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 3: InfoNegocio[id][nCajaObj][2] = CreateDynamicObject(1271, -2162.52002, -239.27122, 544.19897,   0.00000, 0.00000, 0.30000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 4: InfoNegocio[id][nCajaObj][3] = CreateDynamicObject(1271, -2162.48145, -239.28342, 545.26978,   0.00000, 0.00000, -5.10000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 5: InfoNegocio[id][nCajaObj][4] = CreateDynamicObject(1271, -2166.82813, -239.27992, 544.19897,   0.00000, 0.00000, -4.44000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 6: InfoNegocio[id][nCajaObj][5] = CreateDynamicObject(1271, -2166.89648, -239.30844, 545.26978,   0.00000, 0.00000, 8.34000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 7: InfoNegocio[id][nCajaObj][6] = CreateDynamicObject(1271, -2170.97168, -239.33023, 544.19897,   0.00000, 0.00000, 0.84000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 8: InfoNegocio[id][nCajaObj][7] = CreateDynamicObject(1271, -2170.98438, -239.28654, 545.26978,   0.00000, 0.00000, 7.14000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 9: InfoNegocio[id][nCajaObj][8] = CreateDynamicObject(1271, -2175.38794, -239.13707, 544.19897,   0.00000, 0.00000, -3.24000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 10: InfoNegocio[id][nCajaObj][9] = CreateDynamicObject(1271, -2175.44629, -239.28380, 545.26978,   0.00000, 0.00000, -3.54000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 11: InfoNegocio[id][nCajaObj][10] = CreateDynamicObject(1271, -2179.58496, -239.29593, 544.19897,   0.00000, 0.00000, 3.42000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 12: InfoNegocio[id][nCajaObj][11] = CreateDynamicObject(1271, -2179.60547, -239.49200, 545.26978,   0.00000, 0.00000, -13.08000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 13: InfoNegocio[id][nCajaObj][12] = CreateDynamicObject(1271, -2184.00586, -239.35796, 544.19897,   0.00000, 0.00000, -3.96000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 14: InfoNegocio[id][nCajaObj][13] = CreateDynamicObject(1271, -2184.03052, -239.35204, 545.26978,   0.00000, 0.00000, 5.94000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 15: InfoNegocio[id][nCajaObj][14] = CreateDynamicObject(1271, -2189.15356, -236.47655, 544.19897,   0.00000, 0.00000, -90.00002, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 16: InfoNegocio[id][nCajaObj][15] = CreateDynamicObject(1271, -2189.20996, -236.50739, 545.26978,   0.00000, 0.00000, 4.44000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 17: InfoNegocio[id][nCajaObj][16] = CreateDynamicObject(1271, -2189.10107, -233.11459, 544.19897,   0.00000, 0.00000, -90.00002, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 18: InfoNegocio[id][nCajaObj][17] = CreateDynamicObject(1271, -2189.23438, -233.07941, 545.26978,   0.00000, 0.00000, 0.36000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 19: InfoNegocio[id][nCajaObj][18] = CreateDynamicObject(1271, -2181.66089, -227.06544, 544.19897,   0.00000, 0.00000, -85.92002, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
		case 20: InfoNegocio[id][nCajaObj][19] = CreateDynamicObject(1271, -2181.57520, -226.82733, 545.26978,   0.00000, 0.00000, -23.22000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
	}
}

QuitarProduccion(id, x)
{
	switch (x)
	{
		case 1..20:
		{
			if (IsValidDynamicObject(InfoNegocio[id][nCajaObj][x])) DestroyDynamicObject(InfoNegocio[id][nCajaObj][x]);
		}
	}
	return 1;
}

// compra vehiculos by edinonwalker, 25,01,2020
new CompraVehiculo[MAX_PLAYERS], PlayerText:pCocheVS[MAX_PLAYERS][7];
new Text:CocheVS[3];

vehiculo_avion(modelo)
{
	new Avion[] = {592, 577, 511, 512, 593, 520, 553, 476, 519, 460, 513, 548, 425, 417, 487, 488, 497, 563, 447, 469};
	for(new i = 0; i < sizeof(Avion); i++) { if(modelo == Avion[i]) return 1; }
	return 0;
}

vehiculo_bote(modelo)
{
	new Boats[] = {472, 473, 493, 484, 430, 454, 453, 452, 446};
	for(new i = 0; i < sizeof(Boats); i++) { if(modelo == Boats[i]) return 1; }
	return 0;
}

enum documentalveh
{
	elModelo,
	elNombre[32],
	elPrecio,
	elMaxMaletero,
};

static const infovehicle[][documentalveh] =
{
	{400, "Landstalker", 30000, 10},
	{401, "Bravura", 9416, 6},
	{402, "Buffalo", 77550, 8},
	{403, "Linerunner", 24990, 10},
	{404, "Perennial", 2000, 6},
	{405, "Sentinel", 4952, 6},
	{406, "Dumper", 0, 10},
	{407, "Firetruck", 0, 0},
	{408, "Trashmaster", 0, 10},
	{409, "Stretch", 0, 10},
	{410, "Manana", 1750, 6},
	{411, "Infernus", 0, 10},
	{412, "Voodoo", 2500, 6},
	{413, "Pony", 10690, 10},
	{414, "Mule", 23750, 10},
	{415, "Cheetah", 85000, 8},
	{416, "Ambulance", 0, 0},
	{417, "Leviathan", 0, 10},
	{418, "Moonbeam", 39420, 10},
	{419, "Esperanto", 5421, 6},
	{420, "Taxi", 0, 6},
	{421, "Washington", 8090, 8},
	{422, "Bobcat", 1564, 10},
	{423, "Mr. Whoopee", 0, 10},
	{424, "BF Injection", 28990, 6},
	{425, "Hunter", 0, 10},
	{426, "Premier", 5461, 6},
	{427, "Enforcer", 0, 10},
	{428, "Securicar", 0, 10},
	{429, "Banshee", 64990, 6},
	{430, "Predator", 0, 5},
	{431, "Bus", 0, 10},
	{432, "Rhino", 0, 4},
	{433, "Barracks", 0, 10},
	{434, "Hotknife", 0, 4},
	{435, "Article Trailer 1", 0, 10},
	{436, "Previon", 2450, 6},
	{437, "Coach", 0, 10},
	{438, "Cabbie", 0, 6},
	{439, "Stallion", 29421, 6},
	{440, "Rumpo", 7541, 10},
	{441, "RC Bandit", 0, 2},
	{442, "Romero", 0, 10},
	{443, "Packer", 0, 10},
	{444, "Monster", 0, 10},
	{445, "Admiral", 9531, 6},
	{446, "Squallo", 0, 6},
	{447, "Seasparrow", 0, 4},
	{448, "Pizzaboy", 0, 2},
	{449, "Tram", 0, 6},
	{450, "Article Trailer 2", 0, 10},
	{451, "Turismo", 0, 8},
	{452, "Speeder", 0, 10},
	{453, "Reefer", 25045, 10},
	{454, "Tropic", 67999, 10},
	{455, "Flatbed", 0, 10},
	{456, "Yankee", 72000, 10},
	{457, "Caddy", 0, 3},
	{458, "Solair", 9546, 6},
	{459, "Topfun Van", 29000, 10},
	{460, "Skimmer", 0, 4},
	{461, "PCJ-600", 30800, 2},
	{462, "Faggio", 4556, 3},
	{463, "Freeway", 24545, 3},
	{464, "RC Baron", 0, 3},
	{465, "RC Raider", 0, 3},
	{466, "Glendale", 9542, 6},
	{467, "Oceanic", 8500, 6},
	{468, "Sanchez", 18620, 3},
	{469, "Sparrow", 0, 3},
	{470, "Patriot", 0, 10},
	{471, "Quad", 18000, 2},
	{472, "Coastguard", 75000, 6},
	{473, "Dinghy", 40000, 4},
	{474, "Hermes", 17420, 5},
	{475, "Sabre", 6500, 5},
	{476, "Rustler", 0, 4},
	{477, "ZR-350", 95090, 5},
	{478, "Walton", 15000, 10},
	{479, "Regina", 9456, 5},
	{480, "Comet", 91000, 6},
	{481, "BMX", 500, 0},
	{482, "Burrito", 24566, 10},
	{483, "Camper", 24250, 10},
	{484, "Marquis", 0, 6},
	{485, "Baggage", 0, 2},
	{486, "Dozer", 0, 3},
	{487, "Maverick", 99000, 10},
	{488, "SAN News Maverick", 0, 10},
	{489, "Rancher", 38000, 10},
	{490, "FBI Rancher", 0, 10},
	{491, "Virgo", 10590, 5},
	{492, "Greenwood", 6300, 5},
	{493, "Jetmax", 0, 4},
	{494, "Hotring Racer", 0, 5},
	{495, "Sandking", 0, 10},
	{496, "Blista Compact", 25000, 5},
	{497, "Police Maverick", 0, 10},
	{498, "Boxville", 0, 10},
	{499, "Benson", 32200, 12},
	{500, "Mesa", 34700, 8},
	{501, "RC Goblin", 0, 1},
	{502, "Hotring Racer A", 0, 5},
	{503, "Hotring Racer B", 0, 5},
	{504, "Bloodring Banger", 0, 5},
	{505, "Rancher Lure", 35421, 10},
	{506, "Super GT", 90994, 6},
	{507, "Elegant", 19200, 8},
	{508, "Journey", 52000, 10},
	{509, "Bike", 700, 0},
	{510, "Mountain Bike", 800, 0},
	{511, "Beagle", 0, 10},
	{512, "Cropduster", 0, 8},
	{513, "Stuntplane", 0, 8},
	{514, "Tanker", 0, 10},
	{515, "Roadtrain", 0, 10},
	{516, "Nebula", 2000, 5},
	{517, "Majestic", 4200, 5},
	{518, "Buccaneer", 8250, 5},
	{519, "Shamal", 0, 10},
	{520, "Hydra", 0, 10},
	{521, "FCR-900", 48048, 3},
	{522, "NRG-500", 0, 4},
	{523, "HPV1000", 0, 3},
	{524, "Cement Truck", 0, 5},
	{525, "Towtruck", 0, 7},
	{526, "Fortune", 4750, 5},
	{527, "Cadrona", 22500, 5},
	{528, "FBI Truck", 0, 9},
	{529, "Willard", 22500, 6},
	{530, "Forklift", 0, 1},
	{531, "Tractor", 0, 2},
	{532, "Combine Harvester", 0, 3},
	{533, "Feltzer", 42200, 5},
	{534, "Remington", 8456, 6},
	{535, "Slamvan", 18900, 7},
	{536, "Blade", 11450, 5},
	{537, "Freight (Train)", 0, 10},
	{538, "Brownstreak (Train)", 0, 10},
	{539, "Vortex", 0, 2},
	{540, "Vincent", 15500, 6},
	{541, "Bullet", 0, 8},
	{542, "Clover", 11500, 4},
	{543, "Sadler", 1500, 7},
	{544, "Firetruck LA", 0, 10},
	{545, "Hustler", 24000, 5},
	{546, "Intruder", 0, 5},
	{547, "Primo", 16500, 5},
	{548, "Cargobob", 0, 10},
	{549, "Tampa", 17500, 4},
	{550, "Sunrise", 20000, 6},
	{551, "Merit", 45000, 5},
	{552, "Utility Van", 0, 10},
	{553, "Nevada", 0, 10},
	{554, "Yosemite", 43200, 10},
	{555, "Windsor", 26546, 6},
	{556, "Monster A", 0, 6},
	{557, "Monster B", 0, 6},
	{558, "Uranus", 56500, 5},
	{559, "Jester", 60421, 5},
	{560, "Sultan", 81400, 10},
	{561, "Stratum", 21500, 8},
	{562, "Elegy", 62540, 6},
	{563, "Raindance", 0, 10},
	{564, "RC Tiger", 0, 1},
	{565, "Flash", 56874, 5},
	{566, "Tahoma", 13450, 6},
	{567, "Savanna", 8040, 6},
	{568, "Bandito", 0, 2},
	{569, "Freight Flat Trailer", 0, 10},
	{570, "Streak Trailer", 0, 10},
	{571, "Kart", 0, 2},
	{572, "Mower", 0, 2},
	{573, "Dune", 0, 4},
	{574, "Sweeper", 0, 2},
	{575, "Broadway", 35000, 6},
	{576, "Tornado", 26500, 6},
	{577, "AT400", 0, 10},
	{578, "DFT-30", 0, 6},
	{579, "Huntley", 54564, 10},
	{580, "Stafford", 35000, 8},
	{581, "BF-400", 34450, 3},
	{582, "Newsvan", 0, 10},
	{583, "Tug", 0, 3},
	{584, "Petrol Trailer", 0, 0},
	{585, "Emperor", 30000, 5},
	{586, "Wayfarer", 25000, 3},
	{587, "Euros", 65421, 5},
	{588, "Hotdog", 0, 10},
	{589, "Club", 18000, 6},
	{590, "Freight Box Trailer", 0, 10},
	{591, "Article Trailer 3", 0, 10},
	{592, "Andromada", 0, 10},
	{593, "Dodo", 600000, 10},
	{594, "RC Cam", 0, 0},
	{595, "Launch", 0, 10},
	{596, "Car LSPD", 0, 10},
	{597, "Car SFPD", 0, 10},
	{598, "Car LVPD", 0, 10},
	{599, "Police Ranger", 0, 10},
	{600, "Picador", 13400, 5},
	{601, "SWAT", 0, 10},
	{602, "Alpha", 68945, 5},
	{603, "Phoenix", 87823, 5},
	{604, "ShitGlendale", 1500, 3},
	{605, "ShitSadler", 1500, 3},
	{606, "Baggage Trailer A", 0, 2},
	{607, "Baggage Trailer B", 0, 2},
	{608, "Tug Stairs Trailer", 0, 0},
	{609, "Boxville", 54400, 10},
	{610, "Farm Trailer", 0, 0},
	{611, "Utility Trailer", 0, 0}
};

//renovación de sistema de facciones en sql, by EdinsonWalker (11/02/2020)
enum facInfo
{
	fID_sql,							// id sql
	fNombre[128],						// nombre
	fLogo[8],                           // logo
	fLider[MAX_PLAYER_NAME],			// líder
	fSubLider[MAX_PLAYER_NAME],         // sub líder
	fMensaje[256],						// mensaje
	fTipo,								// tipo
	fDinero,                            // dinero
	fSalario,							// salario
	fMaxRangos,                         // max de rangos
	Float: fSpawnX,						// spawn x
	Float: fSpawnY,						// spawn y
	Float: fSpawnZ,						// spawn z
	Float: fSpawnR,						// spawn r
	fSpawnInt,							// spawn int
	fSpawnVW,							// spawn vw
	Float: fArmarioX,					// armario x
	Float: fArmarioY,					// armario y
	Float: fArmarioZ,					// armario z
	fArmarioInt,						// armario int
	fArmarioVW,                         // armario vw
	fMateriales,                        // materiales
	fEquipo[20],						// objetos de equipo
	fSkin[20],							// skins de equipo
	fArmarioPickup,                     // armario pickup
	Text3D: fArmarioLabel,              // armario label
};
new InfoFaccion[MAX_FACCIONES][facInfo];

new fac_rango[MAX_FACCIONES][15][32];

new TomandoTrabajo[MAX_PLAYERS];
new IDfabrica[MAX_PLAYERS];
new YaOfrecioEmpleo[MAX_PLAYERS];

forward CargarFacciones();
public CargarFacciones()
{
	new cargaditos = 0;
	Loop(tabla, cache_num_rows(), 0)
	{
	    new id = tabla+1;
		reg_int(tabla, "ID", InfoFaccion[id][fID_sql]);
		reg_string(tabla, "Nombre", InfoFaccion[id][fNombre], 128);
		reg_string(tabla, "Logo", InfoFaccion[id][fLogo], 8);
		reg_string(tabla, "Lider", InfoFaccion[id][fLider], MAX_PLAYER_NAME);
		reg_string(tabla, "SubLider", InfoFaccion[id][fSubLider], MAX_PLAYER_NAME);
		reg_string(tabla, "Mensaje", InfoFaccion[id][fMensaje], 256);
		reg_int(tabla, "Tipo", InfoFaccion[id][fTipo]);
		reg_int(tabla, "BolosUwU", InfoFaccion[id][fDinero]);
		reg_int(tabla, "Salario", InfoFaccion[id][fSalario]);
		reg_int(tabla, "MaxRangos", InfoFaccion[id][fMaxRangos]);
		reg_string(tabla, "Rango1", fac_rango[id][0], 32);
		reg_string(tabla, "Rango2", fac_rango[id][1], 32);
		reg_string(tabla, "Rango3", fac_rango[id][2], 32);
		reg_string(tabla, "Rango4", fac_rango[id][3], 32);
		reg_string(tabla, "Rango5", fac_rango[id][4], 32);
		reg_string(tabla, "Rango6", fac_rango[id][5], 32);
		reg_string(tabla, "Rango7", fac_rango[id][6], 32);
		reg_string(tabla, "Rango8", fac_rango[id][7], 32);
		reg_string(tabla, "Rango9", fac_rango[id][8], 32);
		reg_string(tabla, "Rango10", fac_rango[id][9], 32);
		reg_string(tabla, "Rango11", fac_rango[id][10], 32);
		reg_string(tabla, "Rango12", fac_rango[id][11], 32);
		reg_string(tabla, "Rango13", fac_rango[id][12], 32);
		reg_string(tabla, "Rango14", fac_rango[id][13], 32);
		reg_string(tabla, "Rango15", fac_rango[id][14], 32);
		reg_float(tabla, "SpawnX", InfoFaccion[id][fSpawnX]);
		reg_float(tabla, "SpawnY", InfoFaccion[id][fSpawnY]);
		reg_float(tabla, "SpawnZ", InfoFaccion[id][fSpawnZ]);
		reg_float(tabla, "SpawnR", InfoFaccion[id][fSpawnR]);
		reg_int(tabla, "SpawnInt", InfoFaccion[id][fSpawnInt]);
		reg_int(tabla, "SpawnVW", InfoFaccion[id][fSpawnVW]);
		reg_float(tabla, "ArmarioX", InfoFaccion[id][fArmarioX]);
		reg_float(tabla, "ArmarioY", InfoFaccion[id][fArmarioY]);
		reg_float(tabla, "ArmarioZ", InfoFaccion[id][fArmarioZ]);
		reg_int(tabla, "ArmarioInt", InfoFaccion[id][fArmarioInt]);
		reg_int(tabla, "ArmarioVW", InfoFaccion[id][fArmarioVW]);
		reg_int(tabla, "Materiales", InfoFaccion[id][fMateriales]);
		reg_int(tabla, "Equipo1", InfoFaccion[id][fEquipo][0]);
		reg_int(tabla, "Equipo2", InfoFaccion[id][fEquipo][1]);
		reg_int(tabla, "Equipo3", InfoFaccion[id][fEquipo][2]);
		reg_int(tabla, "Equipo4", InfoFaccion[id][fEquipo][3]);
		reg_int(tabla, "Equipo5", InfoFaccion[id][fEquipo][4]);
		reg_int(tabla, "Equipo6", InfoFaccion[id][fEquipo][5]);
		reg_int(tabla, "Equipo7", InfoFaccion[id][fEquipo][6]);
		reg_int(tabla, "Equipo8", InfoFaccion[id][fEquipo][7]);
		reg_int(tabla, "Equipo9", InfoFaccion[id][fEquipo][8]);
		reg_int(tabla, "Equipo10", InfoFaccion[id][fEquipo][9]);
		reg_int(tabla, "Equipo11", InfoFaccion[id][fEquipo][10]);
		reg_int(tabla, "Equipo12", InfoFaccion[id][fEquipo][11]);
		reg_int(tabla, "Equipo13", InfoFaccion[id][fEquipo][12]);
		reg_int(tabla, "Equipo14", InfoFaccion[id][fEquipo][13]);
		reg_int(tabla, "Equipo15", InfoFaccion[id][fEquipo][14]);
		reg_int(tabla, "Equipo16", InfoFaccion[id][fEquipo][15]);
		reg_int(tabla, "Equipo17", InfoFaccion[id][fEquipo][16]);
		reg_int(tabla, "Equipo18", InfoFaccion[id][fEquipo][17]);
		reg_int(tabla, "Equipo19", InfoFaccion[id][fEquipo][18]);
		reg_int(tabla, "Equipo20", InfoFaccion[id][fEquipo][19]);
		reg_int(tabla, "Skin1", InfoFaccion[id][fSkin][0]);
		reg_int(tabla, "Skin2", InfoFaccion[id][fSkin][1]);
		reg_int(tabla, "Skin3", InfoFaccion[id][fSkin][2]);
		reg_int(tabla, "Skin4", InfoFaccion[id][fSkin][3]);
		reg_int(tabla, "Skin5", InfoFaccion[id][fSkin][4]);
		reg_int(tabla, "Skin6", InfoFaccion[id][fSkin][5]);
		reg_int(tabla, "Skin7", InfoFaccion[id][fSkin][6]);
		reg_int(tabla, "Skin8", InfoFaccion[id][fSkin][7]);
		reg_int(tabla, "Skin9", InfoFaccion[id][fSkin][8]);
		reg_int(tabla, "Skin10", InfoFaccion[id][fSkin][9]);
		reg_int(tabla, "Skin11", InfoFaccion[id][fSkin][10]);
		reg_int(tabla, "Skin12", InfoFaccion[id][fSkin][11]);
		reg_int(tabla, "Skin13", InfoFaccion[id][fSkin][12]);
		reg_int(tabla, "Skin14", InfoFaccion[id][fSkin][13]);
		reg_int(tabla, "Skin15", InfoFaccion[id][fSkin][14]);
		reg_int(tabla, "Skin16", InfoFaccion[id][fSkin][15]);
		reg_int(tabla, "Skin17", InfoFaccion[id][fSkin][16]);
		reg_int(tabla, "Skin18", InfoFaccion[id][fSkin][17]);
		reg_int(tabla, "Skin19", InfoFaccion[id][fSkin][18]);
		reg_int(tabla, "Skin20", InfoFaccion[id][fSkin][19]);
		if (InfoFaccion[id][fTipo]) cargaditos++;
		if (InfoFaccion[id][fID_sql]) totalfacciones++;
		if (InfoFaccion[id][fArmarioX] != 0.0) faccion_armario(id, 0);
	}
	printf("%d facciones dinámicas (SQL: %d) cargadas correctamente.", cargaditos, totalfacciones-1);
	return 1;
}

faccion_armario(id, estilo)
{
	new faccion_label[350];
	format(faccion_label, sizeof faccion_label, "Equipo {226BBD}%s\n{EBEBEB}Materiales: {FFFF00}%d", InfoFaccion[id][fLogo], InfoFaccion[id][fMateriales]);
	if (estilo == 0)
	{
		DestroyDynamicPickup(InfoFaccion[id][fArmarioPickup]);
		DestroyDynamic3DTextLabel(InfoFaccion[id][fArmarioLabel]);

		InfoFaccion[id][fArmarioLabel] = CreateDynamic3DTextLabel(faccion_label, 0xEBEBEBFF, InfoFaccion[id][fArmarioX], InfoFaccion[id][fArmarioY], InfoFaccion[id][fArmarioZ]+0.5, 10.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1, InfoFaccion[id][fArmarioVW], InfoFaccion[id][fArmarioInt], -1);
		InfoFaccion[id][fArmarioPickup] = CreateDynamicPickup(1239, 1, InfoFaccion[id][fArmarioX], InfoFaccion[id][fArmarioY], InfoFaccion[id][fArmarioZ], InfoFaccion[id][fArmarioVW], InfoFaccion[id][fArmarioInt]);
	}
	else
	{
		UpdateDynamic3DTextLabelText(InfoFaccion[id][fArmarioLabel], 0xEBEBEBFF, faccion_label);
	}
}

stock member_faccion(playerid, faccion, extra = -1, extra2 = -1, extra3 = -1, extra4 = -1)
{
	if (!IsPlayerConnectedEx(playerid)) return 0;
	new lider = InfoPersonaje[playerid][pLider], miembro = InfoPersonaje[playerid][pMiembro];
	if (InfoFaccion[lider][fTipo] == faccion || InfoFaccion[miembro][fTipo] == faccion) return 1;
	if (InfoFaccion[lider][fTipo] == extra || InfoFaccion[miembro][fTipo] == extra) return 1;
	if (InfoFaccion[lider][fTipo] == extra2 || InfoFaccion[miembro][fTipo] == extra2) return 1;
	if (InfoFaccion[lider][fTipo] == extra3 || InfoFaccion[miembro][fTipo] == extra3) return 1;
	if (InfoFaccion[lider][fTipo] == extra4 || InfoFaccion[miembro][fTipo] == extra4) return 1;
	return 0;
}

stock leader_faccion(playerid, faccion, extra = -1, extra2 = -1, extra3 = -1, extra4 = -1)
{
	if (!IsPlayerConnectedEx(playerid)) return 0;
	new id = InfoPersonaje[playerid][pMiembro];
	if (InfoFaccion[id][fTipo] == faccion)
	{
		if (InfoPersonaje[playerid][pLider] == id) return 1; //afirmativo, tiene acceso
		if (InfoPersonaje[playerid][pRango] == InfoFaccion[id][fMaxRangos]) return 1; //afirmativo, tiene acceso
	}
	if (InfoFaccion[id][fTipo] == extra)
	{
		if (InfoPersonaje[playerid][pLider] == id) return 1; //afirmativo, tiene acceso
		if (InfoPersonaje[playerid][pRango] == InfoFaccion[id][fMaxRangos]) return 1; //afirmativo, tiene acceso
	}
	if (InfoFaccion[id][fTipo] == extra2)
	{
		if (InfoPersonaje[playerid][pLider] == id) return 1; //afirmativo, tiene acceso
		if (InfoPersonaje[playerid][pRango] == InfoFaccion[id][fMaxRangos]) return 1; //afirmativo, tiene acceso
	}
	if (InfoFaccion[id][fTipo] == extra3)
	{
		if (InfoPersonaje[playerid][pLider] == id) return 1; //afirmativo, tiene acceso
		if (InfoPersonaje[playerid][pRango] == InfoFaccion[id][fMaxRangos]) return 1; //afirmativo, tiene acceso
	}
	if (InfoFaccion[id][fTipo] == extra4)
	{
		if (InfoPersonaje[playerid][pLider] == id) return 1; //afirmativo, tiene acceso
		if (InfoPersonaje[playerid][pRango] == InfoFaccion[id][fMaxRangos]) return 1; //afirmativo, tiene acceso
	}
	return 0;
}

SendRadioMessage(faccion, color, gformat[])
{
	foreach(Player, playerid) if (IsPlayerConnectedEx(playerid))
	{
		if (InfoPersonaje[playerid][pMiembro] == faccion && InfoPersonaje[playerid][pTogRadio] == 1)
		{
			SendSplitMessage(playerid, color, gformat);
		}
	}
}

SendFaccionMessage(faccion, color, gformat[])
{
	foreach(Player, playerid) if (IsPlayerConnectedEx(playerid) && InfoPersonaje[playerid][pTogFaccion] == 1)
	{
		if (InfoPersonaje[playerid][pMiembro] == faccion || InfoPersonaje[playerid][pLider] == faccion)
		{
			SendSplitMessage(playerid, color, gformat);
		}
	}
}

SendEmpleoMessage(contrato, color, gformat[])
{
	foreach(Player, playerid) if (IsPlayerConnectedEx(playerid) && InfoPersonaje[playerid][pContrato] == contrato)
	{
		SendSplitMessage(playerid, color, gformat);
	}
}

SendRadioEmpleoMessage(contrato, color, gformat[])
{
	foreach(Player, playerid) if (IsPlayerConnectedEx(playerid) && InfoPersonaje[playerid][pContrato] == contrato)
	{
		if (InfoPersonaje[playerid][pTogRadio] == 1)
		{
			SendSplitMessage(playerid, color, gformat);
		}
	}
}


//ubicaciones:
enum Ubicaciones
{
	uNombre[16],
	Float: uPosicion[3],
}
new InfoGPS[MAX_UBICACIONES][Ubicaciones];
// Garajes.
enum Garages
{
	gType,
	gOwner[MAX_PLAYER_NAME],
	gName[32],
	Float: gExteriorPos[4],
	Float: gInteriorPos[4],
	gInterior,
	gLocked,
	gPrice,
	gLevel,
	Text3D: gLabelID,
	gPickupID,
	gHouseID
}
new InfoGarages[MAX_GARAGES][Garages];

//renovación de sistema de actors en sql, by EdinsonWalker (02/03/2020)
enum actorInfo
{
	aID_sql,						// id sql
	aNombre[MAX_PLAYER_NAME],       // nombre
	aSkin,                          // skin
	Float: aPosX,                   // pos x
	Float: aPosY,                   // pos y
	Float: aPosZ,                   // pos z
	Float: aPosR,                   // pos r
	aInterior,                      // interior
	aVirtualWorld,                  // virtualworld
	aAnimacion,                     // animación id
	aID_ig,                         // id ig
	Text3D: aLabel,                 // label
}
new InfoActor[MAX_ACTORES][actorInfo];

forward CargarActores();
public CargarActores()
{
	new cargaditos = 0;
	Loop(tabla, cache_num_rows(), 0)
	{
	    new id = tabla+1;
		reg_int(tabla, "ID", InfoActor[id][aID_sql]);
		reg_string(tabla, "Nombre", InfoActor[id][aNombre], MAX_PLAYER_NAME);
		reg_int(tabla, "Skin", InfoActor[id][aSkin]);
		reg_float(tabla, "PosX", InfoActor[id][aPosX]);
		reg_float(tabla, "PosY", InfoActor[id][aPosY]);
		reg_float(tabla, "PosZ", InfoActor[id][aPosZ]);
		reg_float(tabla, "PosR", InfoActor[id][aPosR]);
		reg_int(tabla, "Interior", InfoActor[id][aInterior]);
		reg_int(tabla, "VirtualWorld", InfoActor[id][aVirtualWorld]);
		reg_int(tabla, "Animacion", InfoActor[id][aAnimacion]);
		if (InfoActor[id][aID_sql]) totalactores++;
		//función
		if (InfoActor[id][aPosX] != 0.0)
		{
			Dynamic_actor(id);
			cargaditos++;
		}
	}
	printf("%d actores dinámicos (SQL: %d) cargados correctamente.", cargaditos, totalactores-1);
	return 1;
}

Dynamic_actor(id)
{
	if (InfoActor[id][aPosX] == 0.0) return 1;
	//label
	DestroyDynamic3DTextLabel(InfoActor[id][aLabel]);
	new labelactor[128];
	if (!strcmp("Ninguno", InfoActor[id][aNombre])) format(labelactor, sizeof labelactor, "(%d)", id);
	else format(labelactor, sizeof labelactor, "%s (%d)", InfoActor[id][aNombre], id);
	InfoActor[id][aLabel] = CreateDynamic3DTextLabel(labelactor, -1, InfoActor[id][aPosX], InfoActor[id][aPosY], InfoActor[id][aPosZ]+1, 20.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1, InfoActor[id][aVirtualWorld], InfoActor[id][aInterior], -1);
	//actor
	DestroyDynamicActor(InfoActor[id][aID_ig]);
	InfoActor[id][aID_ig] = CreateDynamicActor(InfoActor[id][aSkin], InfoActor[id][aPosX], InfoActor[id][aPosY], InfoActor[id][aPosZ], InfoActor[id][aPosR], true, 100.0, InfoActor[id][aVirtualWorld], InfoActor[id][aInterior]);
    Animacion_actor(id);
	return 1;
}

Animacion_actor(id)
{
	switch (InfoActor[id][aAnimacion])
	{
		case 1: ApplyDynamicActorAnimation(InfoActor[id][aID_ig], "DEALER", "DEALER_IDLE_01", 4.0, 1, 0, 1, 0, 0); // Hablar.
		case 2: ApplyDynamicActorAnimation(InfoActor[id][aID_ig], "GRAVEYARD", "prst_loopa", 4.0, 1, 0, 1, 0, 0); // Seguridad.
		case 3: ApplyDynamicActorAnimation(InfoActor[id][aID_ig], "SMOKING","M_smk_in", 4.0, 1, 0, 1, 0, 0); // Fumar.
		case 4: ApplyDynamicActorAnimation(InfoActor[id][aID_ig], "MISC", "Idle_Chat_02", 4.0, 1, 0, 1, 0, 0); // Hablar 2.
		case 5: ApplyDynamicActorAnimation(InfoActor[id][aID_ig], "ped", "SEAT_down", 4.0, 0, 0, 0, 1, 0); // Sentado.
		case 6: ApplyDynamicActorAnimation(InfoActor[id][aID_ig], "RAPPING", "Laugh_01", 4.0, 1, 0, 1, 0, 0); // Rie.
		case 7: ApplyDynamicActorAnimation(InfoActor[id][aID_ig], "DEALER", "DEALER_DEAL", 4.0, 1, 0, 1, 0, 0); //  Sacando dinero.
		case 8: ApplyDynamicActorAnimation(InfoActor[id][aID_ig], "RAPPING","RAP_A_Loop", 4.0, 1, 0, 1, 0, 0); // Rapeando.
		case 9: ApplyDynamicActorAnimation(InfoActor[id][aID_ig], "GANGS","smkcig_prtl", 4.0, 1, 0, 1, 0, 0); // Observando.
		case 10: ApplyDynamicActorAnimation(InfoActor[id][aID_ig], "STRIP","strip_E",4.1,7,5,1,1,1); // Perrea, perrea :D
	}
}

//test de rol
PreguntaTestRol(playerid, pregunta, error)
{
	new dialog[1024];
	if (error == 1) test_rol[playerid]--;
	switch (pregunta)
	{
		case 1:
		{
			strcat(dialog, "#\tRespuesta\n");
			strcat(dialog, "A\tEs todo aquello que interpreta el personaje dentro del juego.\n");
			strcat(dialog, "B\tEs todo aquello que se encuentra fuera del personaje. (Osea tú jugando)\n");
			strcat(dialog, "C\tMatar a una persona con razón lógica.\n");
			Dialog_Show(playerid, Show1Tutorial, DIALOG_STYLE_TABLIST_HEADERS, "1. ¿Qué es IC?", dialog, "Continuar", "Salir");
		}
		case 2:
		{
			strcat(dialog, "#\tRespuesta\n");
			strcat(dialog, "A\tEs todo lo que interpreta el personaje de manera In game.\n");
			strcat(dialog, "B\tEs realizar acciones que no harías en la vida real.\n");
			strcat(dialog, "C\tEs que no valoras la vida de tu personaje.\n");
			Dialog_Show(playerid, Show2Tutorial, DIALOG_STYLE_TABLIST_HEADERS, "2. ¿Qué es PG?", dialog, "Continuar", "Salir");
		}
		case 3:
		{
			strcat(dialog, "#\tRespuesta\n");
			strcat(dialog, "A\tPara describir las prendas de mi personaje.\n");
			strcat(dialog, "B\tPara rolear mis ganas de volar como superman.\n");
			strcat(dialog, "C\tEste comando es para rolear toda acción que realice mi personaje.\n");
			Dialog_Show(playerid, Show3Tutorial, DIALOG_STYLE_TABLIST_HEADERS, "3. ¿Para qué sirve el /me?", dialog, "Continuar", "Salir");
		}
		case 4:
		{
			strcat(dialog, "#\tRespuesta\n");
			strcat(dialog, "A\tBuscar a la policía y realizar acciones para provocar una persecución.\n");
			strcat(dialog, "B\tEs ir por la calle e insultar al primero que se cruce.\n");
			strcat(dialog, "C\tPelearse con gente en la calle porque te chocaron el vehículo o agredieron a un amigo tuyo.\n");
			Dialog_Show(playerid, Show4Tutorial, DIALOG_STYLE_TABLIST_HEADERS, "4. ¿Cuáles de estas opciones no es incentivar DM?", dialog, "Continuar", "Salir");
		}
		case 5:
		{
			strcat(dialog, "#\tRespuesta\n");
			strcat(dialog, "A\tPara describir el entorno que nos rodea o aclarar situaciones de rol.\n");
			strcat(dialog, "B\tCon este comando podemos explicar que el juego de anoche fue una mierda.\n");
			strcat(dialog, "C\tPara rolear las acciones antes de matar a un policía.\n");
			Dialog_Show(playerid, Show5Tutorial, DIALOG_STYLE_TABLIST_HEADERS, "5. ¿Para qué sirve el /do?", dialog, "Continuar", "Salir");
        }
		case 6:
		{
			ClearChat(playerid);
			if (test_rol[playerid] == 5)
			{
				InfoCuenta[playerid][jFechaRegistro] = FechaHoy();
				InfoCuenta[playerid][jUltimaConexion] = FechaHoy();
				new newip[18];
				GetPlayerIp(playerid, newip, sizeof newip);
				alm(InfoCuenta[playerid][jIP], newip);
				new query[2056];
				mysql_format(DBInsanity, query, sizeof query, "INSERT INTO cuentas (Nombre, Clave, Salt, IP, PreguntaSeguridad, RespuestaSeguridad, FechaRegistro, UltimaConexion) \
				VALUES ('%e', '%e', '%e', '%e', '%e', '%e', '%e', '%e')",
				InfoCuenta[playerid][jNombre],
				InfoCuenta[playerid][jClave],
				InfoCuenta[playerid][jSalt],
				InfoCuenta[playerid][jIP],
				InfoCuenta[playerid][jPreguntaSeguridad],
				InfoCuenta[playerid][jRespuestaSeguridad],
				InfoCuenta[playerid][jFechaRegistro],
				InfoCuenta[playerid][jUltimaConexion]);
				mysql_tquery(DBInsanity, query, "CreatePlayerAccount", "i", playerid);
			}
			else
			{
				SendClientMessage(playerid, 0xF92B2BFF, "Fallaste, puedes intentarlo de nuevo.");
				PreguntaTestRol(playerid, 1, 0);
				test_rol[playerid] = 5;
			}
		}
	}
	return 1;
}


forward CreatePlayerAccount(playerid);
public CreatePlayerAccount(playerid)
{
	InfoCuenta[playerid][jID] = cache_insert_id();
	cache_unset_active();
	VerPersonajes(playerid);
	return 1;
}

Dialog:Show1Tutorial(playerid, response, listitem, inputtext[])
{
	if (!response) return Kick(playerid);
	switch (listitem)
	{
		case 0: PreguntaTestRol(playerid, 2, 0);
		case 1: PreguntaTestRol(playerid, 2, 1);
		case 2: PreguntaTestRol(playerid, 2, 1);
	}
	return 1;
}

Dialog:Show2Tutorial(playerid, response, listitem, inputtext[])
{
	if (!response) return Kick(playerid);
	switch (listitem)
	{
		case 0: PreguntaTestRol(playerid, 3, 1);
		case 1: PreguntaTestRol(playerid, 3, 0);
		case 2: PreguntaTestRol(playerid, 3, 1);
	}
	return 1;
}

Dialog:Show3Tutorial(playerid, response, listitem, inputtext[])
{
	if (!response) return Kick(playerid);
	switch (listitem)
	{
		case 0: PreguntaTestRol(playerid, 4, 1);
		case 1: PreguntaTestRol(playerid, 4, 1);
		case 2: PreguntaTestRol(playerid, 4, 0);
	}
	return 1;
}

Dialog:Show4Tutorial(playerid, response, listitem, inputtext[])
{
	if (!response) return Kick(playerid);
	switch (listitem)
	{
		case 0: PreguntaTestRol(playerid, 5, 1);
		case 1: PreguntaTestRol(playerid, 5, 1);
		case 2: PreguntaTestRol(playerid, 5, 0);
	}
	return 1;
}

Dialog:Show5Tutorial(playerid, response, listitem, inputtext[])
{
	if (!response) return Kick(playerid);
	switch (listitem)
	{
		case 0: PreguntaTestRol(playerid, 6, 0);
		case 1: PreguntaTestRol(playerid, 6, 1);
		case 2: PreguntaTestRol(playerid, 6, 1);
	}
	return 1;
}

//sistema de toys renovado by EdinsonWalker (18/01/2020)
#define Compra_Toy 760

enum ToyEnum
{
	accModelo,
	accPrecio,
	accNombre[54],
	accTipo,
};

static const InfoToy[][ToyEnum] =
{
	{11745, 80, "Bolso", 1},
	{19610, 80, "Microfono", 1},
	{19559, 80, "Mochila", 1},
	{19878, 100, "Skate", 3},
	{19591, 200, "Abanico", 3},
	{18952, 100, "Casco de boxeo", 1},
	{19555, 50, "Guante izquierdo", 1},
	{19556, 50, "Guante derecho", 1},
	{19631, 80, "Martillo", 1},
	{19626, 80, "Pala", 1},
	{19623, 150, "Cámara de fotos", 1},
	{19893, 150, "Computador portatil", 3},
	{19942, 80, "Radio portatil", 1},
	{19904, 150, "Chaleco naranja", 1},
	{2706, 120, "Camisa roja", 3},
	{19086, 50, "Dildo grande", 3},
	{19528, 200, "Gorro bruja", 3},
	{19141, 250, "Casco SWAT", 2},
	{19142, 250, "Chaleco SWAT", 2},
	{19777, 200, "Parche FBI", 2},
	{18636, 100, "Gorra de policía", 2},
	{19099, 100, "Sombrero de policía", 2},
	{18637, 100, "Escudo de policía", 2},
	{19200, 100, "Casco de policía", 2},
	{19138, 100, "Lentes de policía", 2},
	{18633, 28, "Llave inglesa", 1},
	{18634, 20, "Palanca", 1},
	{18635, 56, "Martillo", 1},
	{18638, 50, "Casco de minero", 1},
	{19093, 50, "Casco dude", 1},
	{18639, 50, "Sombrero negro", 1},
	{18640, 54, "Peluca 1", 1},
	{18975, 60, "Peluca 2", 1},
	{19136, 100, "Peluca 3", 1},
	{19274, 90, "Peluca 4", 1},
	{19516, 50, "Peluca 5", 1},
	{19517, 60, "Peluca 6", 1},
	{19518, 60, "Peluca 7", 1},
	{19519, 60, "Peluca 8", 1},
	{18641, 10, "Linterna", 1},
	{18644, 50, "Destornillador", 1},
	{18874, 50, "Teléfono", 1},
	{18890, 50, "Rastrillo", 1},
	{18891, 50, "Bandana 1", 1},
	{18892, 54, "Bandana 2", 1},
	{18893, 54, "Bandana 3", 1},
	{18894, 54, "Bandana 4", 1},
	{18895, 54, "Bandana 5", 1},
	{18896, 54, "Bandana 6", 1},
	{18897, 54, "Bandana 7", 1},
	{18898, 54, "Bandana 8", 1},
	{18899, 54, "Bandana 9", 1},
	{18900, 54, "Bandana 10", 1},
	{18901, 54, "Bandana 11", 1},
	{18902, 54, "Bandana 12", 1},
	{18903, 54, "Bandana 13", 1},
	{18904, 54, "Bandana 14", 1},
	{18905, 54, "Bandana 15", 1},
	{18906, 54, "Bandana 16", 1},
	{18907, 54, "Bandana 17", 1},
	{18908, 54, "Bandana 18", 1},
	{18909, 54, "Bandana 19", 1},
	{18910, 54, "Bandana 20", 1},
	{18911, 54, "Bandana 22", 1},
	{18912, 54, "Bandana 23", 1},
	{18913, 54, "Bandana 24", 1},
	{18914, 54, "Bandana 25", 1},
	{18915, 54, "Bandana 26", 1},
	{18916, 54, "Bandana 27", 1},
	{18917, 54, "Bandana 28", 1},
	{18918, 54, "Bandana 29", 1},
	{18919, 54, "Bandana 30", 1},
	{18920, 54, "Bandana 31", 1},
	{18941, 75, "Gorra negra", 1},
	{18961, 75, "Gorra camionero", 1},
	{19469, 50, "Cinta blanca", 1},
	{19330, 120, "Casco de bombero", 1},
	{18974, 100, "Máscara de zorro", 3},
	{18645, 150, "Casco de moto roja", 3},
	{18976, 100, "Casco de moto azul", 3},
	{18978, 100, "Casco de moto blanco", 1},
	{19006, 70, "Gafas roja", 1},
	{19007, 70, "Gafas amarilla", 1},
	{19008, 70, "Gafas verde", 1},
	{19009, 70, "Gafas azul", 1},
	{19010, 70, "Gafas porpura", 1},
	{19011, 70, "Gafas manipulador", 1},
	{19012, 70, "Gafas negra", 1},
	{19013, 70, "Gafas ojo", 1},
	{19014, 70, "Gafas carrera", 1},
	{19015, 70, "Gafas blanca", 1},
	{19016, 70, "Gafas vision", 1},
	{19017, 86, "Lentes amarillo", 1},
	{19018, 86, "Lentes naranja", 1},
	{19019, 86, "Lentes rosa", 1},
	{19020, 86, "Lentes celeste", 1},
	{19021, 86, "Lentes verde", 1},
	{19022, 86, "Gafas R negro", 1},
	{19023, 86, "Gafas R azul", 1},
	{19024, 86, "Gafas R porpura", 1},
	{19025, 86, "Gafas R rosa", 1},
	{19026, 86, "Gafas R rojo", 1},
	{19027, 86, "Gafas R naranja", 1},
	{19028, 86, "Gafas R amarillo", 1},
	{19029, 86, "Gafas R verde", 1},
	{19030, 66, "Lentes N marron", 1},
	{19031, 66, "Lentes N amarillo", 1},
	{19032, 66, "Lentes N rojo", 1},
	{19033, 66, "Lentes N negro", 1},
	{19034, 66, "Lentes N carrera", 1},
	{19035, 66, "Lentes N azul", 1},
	{19036, 120, "Máscara de terror", 1},
	{19039, 450, "Reloj oro", 1},
	{19040, 260, "Reloj plata", 1},
	{19041, 110, "Reloj cobre", 1},
	{19042, 440, "Reloj oro 2", 1},
	{19043, 250, "Reloj plata 2", 1},
	{19044, 60, "Reloj morado", 1},
	{19045, 60, "Reloj rosa", 1},
	{19046, 60, "Reloj verde", 1},
	{19047, 60, "Reloj azul", 1},
	{19048, 60, "Reloj azul negro", 1},
	{19049, 60, "Reloj floriado", 1},
	{19050, 60, "Reloj azul celeste", 1},
	{19051, 60, "Reloj naranja negro", 1},
	{19052, 60, "Reloj rosa naranja", 1},
	{19053, 60, "Reloj militar", 1},
	{19064, 1000, "Gorro de santa normal", 1},
	{19065, 2000, "Gorro de santa MXMas", 3},
	{19066, 3000, "Gorro de santa HXMas", 3},
	{19078, 750, "Loro", 3},
	{19085, 500, "Parche de ojo", 1},
	{19163, 100, "Máscara de CJ", 3},
	{19317, 100, "Guitarra roja", 1},
	{19318, 150, "Guitarra X", 1},
	{19319, 200, "XFireGuitarra", 3},
	{1210, 500, "Maleta", 1},
	{19346, 50, "HotDog", 1},
	{19472, 300, "Máscara de gas", 3},
	{19421, 140, "Audifonos blanco", 1},
	{19422, 140, "Audifonos negro", 1},
	{19423, 140, "Audifonos rosa", 1},
	{19424, 140, "Audifonos azul", 1},
	{11704, 220, "Máscara demonio", 3}, //agregados x edinsonwalker (18/01/2020)
	{1242, 100, "Chaleco de seguridad", 3},
	{371, 100, "Paracaidas", 3},
	{19801, 70, "Pasamontañas", 2},
	{19773, 50, "Pistolera", 2},
	{19347, 40, "Estrella", 2},
	{19515, 255, "Chaleco tactico gris", 2},
	{19514, 150, "Casco gris", 2},
	{368, 12, "Visión nocturna", 2},
	{19781, 12, "Sargento I", 2},
	{19782, 12, "Sargento II", 2},
	{19783, 12, "Oficial II", 2},
	{19784, 12, "Oficial III", 2},
	{19785, 12, "Oficial III+", 2},
	{19778, 12, "Detective I", 2},
	{19779, 12, "Detective II", 2},
	{19780, 12, "Detective III", 2},
	{370, 1111, "Jetpack", 3},
	{19558, 4, "Gorra pizzero", 1},
	{19488, 13, "Sombrero blanco", 1},
	{18953, 20, "Gorra de lana negra", 1},
	{18954, 20, "Gorra de lana gris", 1}
};

GetNameToy(playerid, id)
{
	new	name_this[64];
	alm(name_this, "desconocido");
	Loop(x, sizeof InfoToy, 0) if (InfoToy[x][accModelo] == InfoPersonaje[playerid][ptModelo][id])
	{
		alm(name_this, InfoToy[x][accNombre]);
		return name_this;
	}
	return name_this;
}

GetStatusToy(playerid, id)
{
	new	name_this[64];
	if (InfoPersonaje[playerid][ptColocado][id] != 0) alm(name_this, "{64CA46}Sí");
	else alm(name_this, "{ED3F3F}No");
	return name_this;
}

GetParteToy(playerid, id)
{
	new	name_this[24];
	alm(name_this, "Desconocida");
	switch (InfoPersonaje[playerid][ptHueso][id])
	{
		case 1: alm(name_this, "Columna");
		case 2: alm(name_this, "Cabeza");
		case 3: alm(name_this, "Brazo izquierdo");
		case 4: alm(name_this, "Brazo derecho");
		case 5: alm(name_this, "Mano izquierda");
		case 6: alm(name_this, "Mano derecha");
		case 7: alm(name_this, "Muslo izquierdo");
		case 8: alm(name_this, "Muslo derecho");
		case 9: alm(name_this, "Pie izquierdo");
		case 10: alm(name_this, "Pie derecho");
		case 11: alm(name_this, "Pantorrilla derecha");
		case 12: alm(name_this, "LefPantorrillat izquierda");
		case 13: alm(name_this, "Antevrazo izquierdo");
		case 14: alm(name_this, "Antevrazo derecho");
		case 15: alm(name_this, "Clavicula izquierda");
		case 16: alm(name_this, "Clavicula derecha");
		case 17: alm(name_this, "Cuello");
		case 18: alm(name_this, "Quijada");
	}
	return name_this;
}

// colores toys
#define RGBAToARGB(%1)		(%1 >>> 8 | %1 << 24)

enum ctInfo
{
	ctColor[32],
	ctNombre[32]
};

static const InfoColorToy[][ctInfo] =
{
	// ROSA
    {"0xFFC0CBFF", "Rosado"},
    {"0xFFB6C1FF", "Rosado claro"},
    {"0xFF69B4FF", "Rosado caliente"},
    {"0xFF1493FF", "Rosado profundo"},
    {"0xC71585FF", "Violeta medio"},
    {"0xDB7093FF", "Violeta roso"},
    {"0x8B008BFF", "Magenta oscuro"},
    {"0x9932CCFF", "Orquidea oscuro"},
    {"0x7FFF00FF", "Chatreuse 1"},

	// NARANJA
    {"0xFFA07AFF", "Salmon claro"},
    {"0xFF7F50FF", "Coral"},
    {"0xFF6347FF", "Tomate"},
    {"0xFF4500FF", "Anaranjado"},
    {"0xFF8C00FF", "Naranja oscura"},
    {"0xFFA500FF", "Naranja"},

	// AMARILLO
    {"0xFFD700FF", "Oro"},
    {"0xFFFF00FF", "Amarillo"},
    {"0xFFFFE0FF", "Amarilo claro"},
    {"0xFFFACDFF", "Limon gasa"},
    {"0xFAFAD2FF", "Amarillo oro claro"},
    {"0xFFEFD5FF", "Papaya latigo"},
    {"0xFFE4B5FF", "Moccasin"},
    {"0xFFDAB9FF", "Hojaldre de melcoton"},
    {"0xEEE8AAFF", "Amarillo caía"},
    {"0xF0E68CFF", "Khaki"},
    {"0xBDB76BFF", "Khaki oscuro"},

	// ROJO
	{"0xCD5C5CFF", "Rojo indio"},
	{"0xF08080FF", "Coral claro"},
	{"0xFA8072FF", "Salmón"},
	{"0xE9967AFF", "Salmón oscuro"},
	{"0xFFA07AFF", "Salmón claro"},
	{"0xDC143CFF", "Carmesí"},
	{"0xFF0000FF", "Rojo"},
	{"0xB22222FF", "Ladrillo fuego"},
	{"0x8B0000FF", "Rojo oscuro"},
	{"0x000000FF", "Negro"}
};

GetColorToy(playerid, id)
{
	new exName[128] = "{EBEBEB}Ninguno";
	//verifica si es -1
	if (InfoPersonaje[playerid][ptColor][id] == -1) return exName;
	//resto:
	format(exName, sizeof exName, "{%.6s}%s\n", InfoColorToy[InfoPersonaje[playerid][ptColor][id]][ctColor][2], InfoColorToy[InfoPersonaje[playerid][ptColor][id]][ctNombre]);
	return exName;
}

SetColorToy(coler)
{
	new color = 0, gformat[32];
	if (coler == -1) return color;
	format(gformat, sizeof gformat, "%x", RGBAToARGB(hexstr(InfoColorToy[coler][ctColor])));
	color = hexstr(gformat);
	return color;
}

//sistema de inventario/bolsillos:
#define MAX_OBJETOS_S 300

enum dData
{
	DropID,
	DropCantidad,
	Float:DropPosX,
	Float:DropPosY,
	Float:DropPosZ,
	DropVWorld,
	DropInterior,
	Text3D: DropLabel
};
new InfoSuelo[MAX_OBJETOS_S][dData], ObjetoCaido[MAX_OBJETOS_S], ObjTimer[MAX_OBJETOS_S];

enum inventarioInfo
{
	IDObjeto,
	NombreObjeto[32],
	ModeloObjeto,
	IDArma,
	Guardable,
	Arrojadizo,
	DefaultCantidad,
	MaxCantidad,
};

static const InfoInventario[][inventarioInfo] =
{
	{0, "Vacío", 0, 0, 0, 0, 0, 0},
	//.weapons
	{1, "Nudillera", 331, 1, 1, 0, 1, 1},
	{2, "Palo de golf", 333, 2, 3, 0, 1, 1},
	{3, "Porra", 334, 3, 1, 0, 1, 1},
	{4, "Cuchillo", 335, 4, 1, 1, 1, 1},
	{5, "Bate", 336, 5, 3, 0, 1, 1},
	{6, "Pala", 337, 6, 3, 0, 1, 1},
	{7, "Palo de billar", 338, 7, 3, 0, 1, 1},
	{8, "Katana", 339, 8, 3, 0, 1, 1},
	{9, "Motosierra", 341, 9, 3, 0, 1, 1},
	{10, "Consolador rosa", 321, 10, 1, 0, 1, 1},
	{11, "Consolador pequeño", 322, 11, 1, 0, 1, 1},
	{12, "Consolador largo", 323, 12, 1, 0, 1, 1},
	{13, "Consolador plateado", 324, 13, 1, 0, 1, 1},
	{14, "Flores", 325, 14, 3, 0, 1, 1},
	{15, "Bastón", 326, 15, 3, 0, 1, 1},
	{16, "Granada", 342, 16, 1, 1, 1, 1},
	{17, "Granada de gas", 343, 17, 1, 1, 10, 10},
	{18, "Cóctel molotov", 344, 0, 1, 1, 10, 10},
	{19, "9mm", 346, 22, 1, 0, 24, 24},
	{20, "9mm con silenciador", 347, 23, 1, 0, 24, 24},
	{21, "Desert eagle", 348, 24, 1, 0, 14, 14},
	{22, "Escopeta", 349, 25, 3, 0, 10, 30},
	{23, "Recortada", 350, 26, 3, 0, 14, 35},
	{24, "Escopeta de combate", 351, 27, 3, 0, 14, 35},
	{25, "Uzi", 352, 28, 1, 0, 50, 50},
	{26, "MP5K", 353, 29, 3, 0, 50, 50},
	{27, "AK47", 355, 30, 3, 0, 50, 50},
	{28, "M4A1", 356, 31, 3, 0, 50, 50},
	{29, "Tec9", 372, 32, 1, 0, 50, 50},
	{30, "Rifle de caza", 357, 33, 3, 0, 5, 5},
	{31, "Rifle de francotirador", 358, 34, 3, 0, 5, 5},
	{32, "Cohete", 359, 35, 3, 0, 10, 10},
	{33, "RPG Cohete", 360, 0, 3, 0, 10, 10},
	{34, "Lanzallamas", 361, 37, 3, 0, 10, 10},
	{35, "Minigun", 362, 0, 3, 0, 9999, 9999},
	{36, "Spray", 365, 41, 1, 0, 99999, 9999},
	{37, "Extintor", 366, 42, 3, 0, 500, 1500},
	{38, "Cámara fotográfica", 367, 43, 1, 0, 50, 100},
	{39, "Paracaidas", 371, 46, 3, 1, 1, 1},
	{40, "Táser", 347, 23, 1, 0, 2, 2},
	//objetos desde 04/03/2020
	{41, "Encendedor", 19998, 0, 1, 1, 20, 40},
	{42, "Paquete de cigarros", 19896, 0, 1, 1, 10, 20},
	{43, "Marihuana", 2709, 0, 1, 1, 20, 50},
	{44, "Crack", 2709, 0, 1, 1, 20, 50},
	{45, "Metanfetamina", 2709, 0, 1, 1, 20, 50},
	{46, "Cocaína", 2709, 0, 1, 1, 20, 50},
	{47, "Canuto de marihuana", 3027, 0, 1, 1, 5, 5},
	{48, "Blunt de marihuana", 3044, 0, 1, 1, 5, 5},
	{49, "Cigarro", 19625, 0, 1, 1, 5, 5},
	{50, "Teléfono S10", 18865, 0, 1, 0, 1, 1},
	{51, "Boombox",	2103, 0, 2, 0, 1, 1},
	{52, "Dinamita", 1654, 0, 1, 0, 1, 1},
	{53, "Botiquin", 11738, 0, 2, 1, 1, 1},
	{54, "Escopeta no-letal", 349, 25, 3, 0, 15, 20},
	{55, "Paquete", 1575, 0, 1, 0, 1, 100},
	//objetos desde 02/12/2020 — Artic
	{56, "Caja registradora", 1514, 0, 0, 0, 1, 1},
	{57, "Cargador 9mm", 19995, 0, 1, 0, 24, 24},
	{58, "Cargador Deagle", 19995, 0, 1, 0, 14, 14},
	{59, "Cargador 9mm", 19995, 0, 1, 0, 30, 30}, // escopeta
	{60, "Cargador Uzi", 19995, 0, 1, 0, 50, 50},
	{61, "Cargador MP5K", 19995, 0, 1, 0, 50, 50},
	{62, "Cargador AK47", 2037, 0, 1, 0, 50, 50},
	{63, "Cargador M4", 2037, 0, 1, 0, 50, 50},
	{64, "Cargador Tec9", 19995, 0, 1, 0, 50, 50},
	{65, "Cargador Rifle", 2037, 0, 1, 0, 5, 5} 
};

PonerObjeto(playerid, lugar, objetoid)
{
	new modelo = InfoInventario[objetoid][ModeloObjeto];
	switch (lugar)
	{
		case 1: //mano derecha
		{
			switch (objetoid)
			{
				case 1..40: SetPlayerAttachedObject(playerid, 7, modelo, 6); //weapons
				case 41: SetPlayerAttachedObject(playerid, 7, modelo, 6, 0.059000, 0.041000, 0.012999, 0.199999, -21.399997, 0.099999, 0.389000, 0.939000, 0.409999); //encendedor
				case 42: SetPlayerAttachedObject(playerid, 7, modelo, 6, 0.057000, 0.035999, 0.003999, -105.099983, -2.200000, -171.699981, 1.000000, 1.000000, 1.000000); //paquete de cigarros
				case 43..46: SetPlayerAttachedObject(playerid, 7, modelo, 6, 0.073000, 0.073000, 0.015999, -9.699999, 0.600041, -0.299999, 1.000000, 1.000000, 1.000000); //marihuana, crack, metanfetamina, cocaína
				case 47: SetPlayerAttachedObject(playerid, 7, modelo, 6, 0.098000, 0.034000, 0.037999, 111.599998, 19.299999, 8.299999, 1.000000, 1.000000, 1.000000); //canuto de marihuana
				case 48: SetPlayerAttachedObject(playerid, 7, modelo, 6, 0.045999, 0.111999, 0.032000, 0.000000, 0.000000, 0.000000, 1.000000, 1.000000, 1.000000); //blunt de marihuana
				case 49: SetPlayerAttachedObject(playerid, 7, modelo, 6, 0.121999, -0.004000, 0.004999, 9.599995, 0.000000, 0.000000, 1.000000, 1.000000, 1.000000); //cigarro
				case 50: SetPlayerAttachedObject(playerid, 7, modelo, 6, 0.093999, 0.012000, -0.010999, -81.199974, 10.000000, 179.099945, 0.990999, 0.829000, 0.903000); //teléfono s10
				case 51: SetPlayerAttachedObject(playerid, 7, modelo, 6, 0.388999, 0.034000, 0.101999, 0.000000, -100.599998, 0.399999, 1.000000, 1.000000, 1.000000); //boombox
				case 52: SetPlayerAttachedObject(playerid, 7, modelo, 6, 0.048000, -0.001999, 0.000000, 0.000000, 0.000000, 0.000000, 1.000000, 1.000000, 1.000000); //dinamita
				case 53: SetPlayerAttachedObject(playerid, 7, modelo, 6, 0.178000, 0.019999, 0.031998, 0.000000, -101.600021, 0.000000, 0.630999, 0.452998, 0.611998); //botiquin
				case 54: SetPlayerAttachedObject(playerid, 7, modelo, 6); //escopetita
				case 55: SetPlayerAttachedObject(playerid, 7, modelo, 6, 0.082000, 0.000000, 0.000000, 0.099999, 76.499984, 1.000000, 1.000000, 1.000000, 1.000000); //paquete de negocio
				case 57..61, 64: SetPlayerAttachedObject(playerid, 7, modelo, 6, 0.083999, 0.039000, -0.003999, 0.799998, -5.099998, -92.599990, 1.000000, 1.000000, 1.000000); //cargador
				case 62, 63, 65: SetPlayerAttachedObject(playerid, 7, modelo, 6, 0.064999, 0.035998, 0.018999, 1.599980, -105.499984, 1.800009, 0.649999, 0.910999, 0.476999); //cargador grande
			}
		}
		case 2: //mano izquierda
		{
			switch (objetoid)
			{
				case 1: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.024999, 0.000000, -0.005999, 0.000000, 0.000000, 0.000000, 1.000000, 1.000000, 1.000000); //nudillera
				case 2: SetPlayerAttachedObject(playerid, 8, modelo, 5, -0.040000, 0.067000, -0.003000, -29.899999, 152.000000, 176.000030, 1.000000, 1.000000, 1.000000); //palo de golf
				case 3: SetPlayerAttachedObject(playerid, 8, modelo, 5, -0.115999, 0.113999, 0.087999, 0.000000, 44.500000, 0.000000, 1.000000, 1.000000, 1.000000); //porra
				case 4: SetPlayerAttachedObject(playerid, 8, modelo, 5, -0.007000, 0.060999, -0.013000, 156.600051, 9.100000, -14.800011, 1.000000, 1.000000, 1.000000); //cuchillo
				case 5: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.135999, 0.030999, 0.053999, -17.900001, 153.800018, 0.000000, 1.000000, 1.000000, 1.000000); //bate
				case 6: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.041999, 0.051999, -0.080000, -27.899986, 155.800018, -167.499938, 1.000000, 1.000000, 1.000000); //pala
				case 7: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.156999, 0.092000, 0.071999, -25.099998, 172.899963, -19.899995, 1.000000, 1.000000, 1.000000); //palo de billar
				case 8: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.058000, 0.008000, -0.109000, -27.999998, 155.100036, 172.699966, 1.000000, 1.000000, 1.000000); //sable
				case 9: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.000000, 0.078999, -0.009000, 155.599990, 7.200000, 4.800000, 1.000000, 1.000000, 1.000000); //motosierra
				case 10: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.015000, 0.041000, -0.068000, -25.599971, 162.900054, -175.300018, 1.000000, 1.000000, 1.000000); //consolador 1
				case 11: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.023999, 0.052999, -0.041999, 157.899978, 2.499999, 0.000000, 1.000000, 1.000000, 1.000000); //consolador 2
				case 12: SetPlayerAttachedObject(playerid, 8, modelo, 5, -0.002000, 0.074000, 0.001000, 151.200042, 23.000000, -9.100001, 1.000000, 1.000000, 1.000000); //consolador 3
				case 13: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.017999, 0.003999, -0.047999, 168.200012, 18.300003, -27.900005, 1.000000, 1.000000, 1.000000); //consolador 4
				case 14: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.176000, 0.000000, -0.011000, -23.399999, 160.599990, -6.399995, 1.000000, 1.000000, 1.000000); //flores
				case 15: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.008999, -0.018999, -0.047999, -33.199996, 159.900085, 156.399902, 1.000000, 1.000000, 1.000000); //bastón
				case 16: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.019000, 0.047000, -0.021000, 164.499984, 0.000000, -17.599994, 1.000000, 1.000000, 1.000000); //granada
				case 17: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.034000, 0.063000, -0.037999, 164.500000, 14.599996, -4.700009, 1.000000, 1.000000, 1.000000); //granada de gas
				case 18: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.022999, 0.039000, -0.125999, 165.700012, 0.000000, 0.000000, 1.000000, 1.000000, 1.000000); //molotov
				case 19: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.033000, 0.057999, -0.017999, 146.299987, 14.999998, -4.700002, 1.000000, 1.000000, 1.000000); //9mm + silenciador
				case 20: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.050999, 0.038000, -0.021999, 144.500015, 9.100000, -11.600002, 1.000000, 1.000000, 1.000000); //9mm
				case 21: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.041000, 0.038000, -0.026999, 173.899963, 0.000000, 1.799999, 1.000000, 1.000000, 1.000000); //desert eagle
				case 22: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.000000, 0.089000, 0.000000, 153.500015, 10.000001, 4.800000, 1.000000, 1.000000, 1.000000); //escopeta
				case 23: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.040000, 0.026000, 0.011000, -156.300003, 0.000000, 2.600000, 1.000000, 1.000000, 1.000000); //recortada
				case 24: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.023000, 0.048999, -0.013000, 172.200012, 14.400005, 0.599999, 1.000000, 1.000000, 1.000000); //escopeta combate
				case 25: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.024999, 0.048000, -0.012000, 172.000076, -3.099988, -2.099991, 1.000000, 1.000000, 1.000000); //UZI
				case 26: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.005000, 0.065000, -0.016000, 162.399963, 9.599999, 8.400000, 1.000000, 1.000000, 1.000000); //MP5K
				case 27: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.057999, 0.076999, -0.023999, 162.799942, 14.399999, 0.000000, 1.000000, 1.000000, 1.000000); //AK47
				case 28: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.043999, 0.028999, -0.038000, 167.499969, 15.999998, 0.000000, 1.000000, 1.000000, 1.000000); //M4
				case 29: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.048000, 0.049999, 0.011000, -172.600006, -2.299995, 5.999999, 1.000000, 1.000000, 1.000000); //tec9
				case 30: SetPlayerAttachedObject(playerid, 8, modelo, 5, -0.043000, 0.065999, -0.044999, 167.499954, 17.399999, 0.000000, 1.000000, 1.000000, 1.000000); //rifle de caza
				case 31: SetPlayerAttachedObject(playerid, 8, modelo, 5, -0.018000, 0.085000, 0.033000, 167.399978, 12.200000, -0.299997, 1.000000, 1.000000, 1.000000); //rifle de francotirador
				case 32: SetPlayerAttachedObject(playerid, 8, modelo, 5, -0.019999, 0.053999, -0.042000, -33.100013, -174.800018, 171.199890, 0.757999, 0.782000, 0.979999); //cohete
				case 33: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.171999, 0.079999, -0.111999, -124.399993, 166.300018, -93.599990, 1.038999, 0.752000, 0.854999); //RPG
				case 34: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.044999, 0.083999, 0.034999, 47.699974, -79.599967, -89.300102, 0.654999, 0.782000, 0.758000); //lanzallamas
				case 35: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.023000, 0.048999, -0.013000, 172.200012, 14.400005, 0.599999, 1.000000, 1.000000, 1.000000); //minigun
				case 36: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.036999, 0.026999, -0.079999, 152.899993, 14.900004, -0.400000, 1.000000, 1.000000, 1.000000); //spray
				case 37: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.004000, 0.061999, -0.063999, 126.599990, 33.099998, 2.200000, 1.000000, 1.000000, 1.000000); //extintor
				case 38: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.018000, 0.062999, 0.074999, -109.400039, 0.000000, 0.000000, 1.000000, 1.000000, 1.000000); //cámara fotográfica
				case 39: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.018000, 0.062999, 0.074999, -109.400039, 0.000000, 0.000000, 1.000000, 1.000000, 1.000000); //paracaidas
				case 40: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.050999, 0.038000, -0.021999, 144.500015, 9.100000, -11.600002, 1.000000, 1.000000, 1.000000); //táser
				case 41: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.084000, 0.026000, -0.014000, 156.000076, -21.299989, -1.399998, 0.389000, 0.939000, 0.409999); //encendedor
				case 42: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.086000, 0.043999, -0.010000, -89.599967, -2.199996, 1.099998, 1.000000, 1.000000, 1.000000); //paquete de cigarros
				case 43..46: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.094000, 0.065000, -0.026000, 0.000000, -177.499969, 0.000000, 1.000000, 1.000000, 1.000000); //marihuana,crack, metanfetamina, cocaína
				case 47: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.116999, 0.034000, -0.037000, 111.599998, 19.299999, 8.299999, 1.000000, 1.000000, 1.000000); //canuto de marihuana
				case 48: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.036000, 0.074000, 0.000000, 0.000000, 0.000000, 0.000000, 1.000000, 1.000000, 1.000000); //blunt de marihuana
				case 49: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.130000, 0.013999, 0.007999, 9.599995, 6.699999, 29.500005, 1.000000, 1.000000, 1.000000); //cigarro
				case 50: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.056000, 0.000000, 0.007000, -97.100006, 0.000000, 0.000000, 0.990999, 0.829000, 0.903000); //teléfono s10
				case 51: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.423000, 0.000000, 0.019999, 6.100001, -101.499984, 36.800006, 1.000000, 1.000000, 1.000000); //boombox
				case 52: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.050999, 0.072000, 0.000000, -34.699996, -21.000000, 1.699999, 1.000000, 1.000000, 1.000000); //dinamita
				case 53: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.193000, 0.029000, -0.001001, 0.000000, -101.600021, 12.900000, 0.630999, 0.452998, 0.611998); //botiquin
				case 54: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.000000, 0.089000, 0.000000, 153.500015, 10.000001, 4.800000, 1.000000, 1.000000, 1.000000); //escopetita
				case 55: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.082000, 0.000000, 0.000000, -0.399999, 76.499984, -25.099998, 1.000000, 1.000000, 1.000000); //paquete de negocio
				case 57..61: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.088999, 0.023000, 0.006000, -9.600001, 178.099945, 92.899978, 1.000000, 1.000000, 1.000000); //- Cargador pequeño
				case 64: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.088999, 0.023000, 0.006000, -9.600001, 178.099945, 92.899978, 1.000000, 1.000000, 1.000000); //- Cargador pequeño
				case 62..63: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.092000, 0.038000, -0.026000, -37.200008, 82.199996, 3.499996, 0.649999, 0.910999, 0.476999); //- Cargador grande				
				case 65: SetPlayerAttachedObject(playerid, 8, modelo, 5, 0.092000, 0.038000, -0.026000, -37.200008, 82.199996, 3.499996, 0.649999, 0.910999, 0.476999); //- Cargador grande				
			}
		}
		case 3: //espalda
		{
		    new toy = 7;
			if (InfoPersonaje[playerid][ptPosX][toy] != 0.0)
			{
				if (InfoPersonaje[playerid][ptHueso][toy] == 0) InfoPersonaje[playerid][ptHueso][toy] = 1;
				SetPlayerAttachedObject(playerid, 9, modelo, InfoPersonaje[playerid][ptHueso][toy], InfoPersonaje[playerid][ptPosX][toy], InfoPersonaje[playerid][ptPosY][toy], InfoPersonaje[playerid][ptPosZ][toy],
				InfoPersonaje[playerid][ptRotX][toy], InfoPersonaje[playerid][ptRotY][toy], InfoPersonaje[playerid][ptRotZ][toy], 1.000000, 1.000000, 1.000000);
			}
			else
			{
				switch (objetoid)
				{
					case 2,3: SetPlayerAttachedObject(playerid, 9, modelo, 1, -0.1061, -0.1544, -0.0411, 0.0000, 60.0000, 60.0000, 1.000000, 1.000000, 1.000000);
					case 5,6,7,8: SetPlayerAttachedObject(playerid, 9, modelo, 1, -0.1061, -0.1544, -0.0411, 0.0000, 60.0000, 60.0000, 1.000000, 1.000000, 1.000000);
					case 9: SetPlayerAttachedObject(playerid, 9, modelo, 1, -0.2349, -0.1289, 0.0000, -166.7000, 0.0000, 0.0000, 1.000000, 1.000000, 1.000000);
					case 10: SetPlayerAttachedObject(playerid, 9, modelo, 1, -0.1061, -0.1544, -0.0411, 0.0000, 60.0000, 60.0000, 1.000000, 1.000000, 1.000000);
					case 11: SetPlayerAttachedObject(playerid, 9, modelo, 1, -0.1061, -0.1544, -0.0411, 0.0000, 60.0000, 60.0000, 1.000000, 1.000000, 1.000000);
					case 12: SetPlayerAttachedObject(playerid, 9, modelo, 1, -0.1061, -0.1544, -0.0411, 0.0000, 60.0000, 60.0000, 1.000000, 1.000000, 1.000000);
					case 13: SetPlayerAttachedObject(playerid, 9, modelo, 1, -0.1061, -0.1544, -0.0411, 0.0000, 60.0000, 60.0000, 1.000000, 1.000000, 1.000000);
					case 14: SetPlayerAttachedObject(playerid, 9, modelo, 1, -0.1061, -0.1544, -0.0411, 0.0000, 60.0000, 60.0000, 1.000000, 1.000000, 1.000000);
					case 15: SetPlayerAttachedObject(playerid, 9, modelo, 1, -0.1061, -0.1544, -0.0411, 0.0000, 60.0000, 60.0000, 1.000000, 1.000000, 1.000000);
					case 22: SetPlayerAttachedObject(playerid, 9, modelo, 1, 0.220000, -0.135998, 0.113000, -1.900013, 161.699951, 8.599991, 1.000000, 1.000000, 1.000000); //escopeta
					case 23: SetPlayerAttachedObject(playerid, 9, modelo, 1, 0.345999, -0.151998, 0.166000, -1.900013, 161.699951, 8.599991, 1.000000, 1.000000, 1.000000); //recortada
					case 24: SetPlayerAttachedObject(playerid, 9, modelo, 1, 0.345999, -0.151998, 0.166000, -1.900013, 161.699951, 8.599991, 1.000000, 1.000000, 1.000000); //escopeta combate
					case 26: SetPlayerAttachedObject(playerid, 9, modelo, 1, 0.205000, -0.136998, 0.156000, -1.500012, 152.599945, 5.399990, 1.000000, 1.000000, 1.000000); //MP5K
					case 27: SetPlayerAttachedObject(playerid, 9, modelo, 1, 0.251000, -0.130998, 0.135999, -1.500012, 152.599945, 5.399990, 1.000000, 1.000000, 1.000000); //AK47
					case 28: SetPlayerAttachedObject(playerid, 9, modelo, 1, 0.251000, -0.130998, 0.135999, -1.500012, 152.599945, 5.399990, 1.000000, 1.000000, 1.000000); //M4
					case 30: SetPlayerAttachedObject(playerid, 9, modelo, 1, 0.017999, -0.133999, 0.000000, 11.899997, 32.799995, 9.599994, 1.000000, 1.000000, 1.000000); //rifle de caza
					case 31: SetPlayerAttachedObject(playerid, 9, modelo, 1, 0.018000, -0.133999, 0.000000, 11.899998, 32.799995, 9.599995, 1.000000, 1.000000, 1.000000); //rifle de francotirador
					case 32: SetPlayerAttachedObject(playerid, 9, modelo, 1, -0.019999, -0.155000, 0.068000, 15.799981, 164.600006, -3.100142, 1.000000, 1.000000, 1.000000); //cohete
					case 33: SetPlayerAttachedObject(playerid, 9, modelo, 1, 0.195999, -0.142000, -0.129000, -1.799999, 18.200000, 0.000000, 1.000000, 1.000000, 1.000000); //RPG
					case 34: SetPlayerAttachedObject(playerid, 9, modelo, 1, 0.363999, -0.155000, 0.083000, 15.799981, 164.600006, -3.100142, 1.000000, 1.000000, 1.000000); //lanzallamas
					case 35: SetPlayerAttachedObject(playerid, 9, modelo, 1, -0.289000, -0.114999, -0.048000, 0.000000, 0.000000, 0.000000, 1.000000, 1.000000, 1.000000); //minigun
					case 37: SetPlayerAttachedObject(playerid, 9, modelo, 1, 0.439999, -0.114999, 0.157000, -27.400011, 134.299942, -2.600011, 1.000000, 1.000000, 1.000000); //extintor
					case 39: SetPlayerAttachedObject(playerid, 9, modelo, 1, 0.087999, -0.114999, 0.000000, 11.899997, 86.899993, -18.700014, 1.000000, 1.000000, 1.000000); //paracaidas
					case 40: SetPlayerAttachedObject(playerid, 9, modelo, 1, 0.220000, -0.135998, 0.113000, -1.900013, 161.699951, 8.599991, 1.000000, 1.000000, 1.000000); //escopetita
					default: SetPlayerAttachedObject(playerid, 9, modelo, 1, 0.000000, 0.231000, 0.000000, 10.899998, 0.000000, 175.900009, 1.000000, 1.000000, 1.000000);
				}
				InfoPersonaje[playerid][ptHueso][toy] = 1;
				EditAttachedObject(playerid, 9);
				EditandoObjetoJ[playerid] = 2;
				SendClientMessage(playerid, -1, "Mantén presionado {00AE57}~k~~PED_SPRINT~{FFFFFF} para cambiar la posición de la cámara.");
			}

		}
	}
	return 1;
}

funcion tirar_objeto(ObjetoID, Cantidad, Float: X, Float: Y, Float: Z, world, interior, bomxo)
{
	if (ObjetoID != 0)
	{
		new Float: rotx, Float: roty, Float: rotz;
		for (new i = 0; i < sizeof(InfoSuelo); i++)
		{
			if (InfoSuelo[i][DropPosX] == 0.0)
			{
				InfoSuelo[i][DropID] = ObjetoID;
				InfoSuelo[i][DropCantidad] = Cantidad;
				InfoSuelo[i][DropPosX] = X;
				InfoSuelo[i][DropPosY] = Y;
				InfoSuelo[i][DropPosZ] = Z;
				InfoSuelo[i][DropVWorld] = world;
				InfoSuelo[i][DropInterior] = interior;
				//
				switch (ObjetoID)
				{
					case 1..5: { rotx = 85; roty = 1; rotz = 8; Z += 0; } //nudillera, palo de golf, porra, cuchillo y bate
					case 6: { rotx = 8.5; roty = 90; rotz = -82; Z += 0.1; } //pala
					case 7,8: { rotx = 85; roty = 1; rotz = 8; Z += 0; } //palo de billar, sable
					case 9: { rotx = 95; roty = -69; rotz = 8; Z += 0.08; } //motosierra
					case 10..13: { rotx = 90; roty = 1; rotz =  8; Z+= 0; } //consoladores
					case 14: { rotx = 70; roty = 1; rotz =  8; Z+= 0; } //flores
					case 15: { rotx = 87; roty = 1; rotz =  8; Z+= 0; } //bastón
					case 16: { rotx = 0; roty = -17; rotz = 0; Z += 0.05; } //granada
					case 17: { rotx = 0; roty = 0.3; rotz = -7; Z += 0.06; } //granada de humo
					case 18: { rotx = -5.5; roty = -1.8; rotz = -7; Z += 0.2; } //molotov
					case 19: { rotx = -85; roty = 3; rotz = 3; Z += 0.04; } //9mm
					case 20: { rotx = -85; roty = 3; rotz = 3; Z += 0.05; } //9mm con silenciador
					case 21: { rotx = -85; roty = 3; rotz = 3; Z += 0.04; } //desert eagle
					case 22: { rotx = -82; roty = 58; rotz = 64; Z += 0.06; } //escopeta
					case 23: { rotx = -90; roty = 58; rotz =  64; Z += 0.05; } //recortada
					case 24: { rotx = -82; roty = 58; rotz =  64; Z += 0.05; } //combate
					case 25,26: { rotx = -90; roty = 0; rotz = 0; Z += 0.04; } //uzi, mp5k
					case 27,28: { rotx = -92.6; roty = 0.8; rotz = -3.1; Z += 0.06; } //ak47, m4a1
					case 29: { rotx = -90; roty = 0; rotz = 0; Z += 0.05; } //tec9
					case 30: { rotx = -112; roty = -150; rotz = -159; Z += 0.04; } //rifle de caza
					case 31: { rotx = -105; roty = -150; rotz = -159; Z += 0.04; } //rifle de francotirador
					case 32,33,34: { rotx = -90; roty = 0; rotz = 0; Z += 0.07; } //cohete, rpg, lanzallamas
					case 35: {  rotx = -4.4; roty = 27.5; rotz = 0; Z += 0.315; } //minigun
					case 36: {  rotx = 0.5; roty = -5.5; rotz = -4.7; Z += 0.15; } //spray
					case 37: { rotx = -3.2; roty = 40.3; rotz = 0; Z += 0.59; } //extintor
					case 38: { rotx = 0; roty = -1.8; rotz = -30; Z += 0.02; } //camara
					case 39: { rotx = 0; roty = 0; rotz = 9.7; Z += 0.19; } //paracaidas
					case 40: { rotx = -85; roty = 3; rotz = 3; Z += 0.05; } //taser
					case 41: { rotx = 0; roty = 0; rotz = 0; Z += 0.1; } //encendedor
					case 42: { rotx = 0; roty = 0; rotz = 0; Z += 0.02; } //paquete de cigarros
					case 43..46: { rotx = 0; roty = 0; rotz = 0; Z += 0.12; } //marihuana, crack, metanfetamina, cocaína
					case 47: { rotx = 0; roty = -90; rotz = 0; Z += 0.02; } //canuto de marihuana
					case 48: { rotx = 0; roty = 0; rotz = 90; Z += 0.05; } //blunt de marihuana
					case 49: { rotx = 0; roty = 0; rotz = 0; Z += 0.02; } //cigarro
					case 50: { rotx = 0; roty = 0; rotz = 0; Z += 0.02; } //teléfono s10
					case 51: { rotx = 0; roty = 0; rotz = 0; Z += 0; } //boombox
					case 52: { rotx = 0; roty = 0; rotz = 0; Z += 0.2; } //dinamita
					case 53: { rotx = 0; roty = 0; rotz = 0; Z += 0.06; } //botiquin
					case 54: { rotx = -82; roty = 58; rotz = 64; Z += 0.06; } //escopeta no-letal
					default: { rotx = 0; roty = 0; rotz = 0; Z += 0.02; }
				}
				DestroyDynamic3DTextLabel(InfoSuelo[i][DropLabel]);
				new info_obj[170];
				format(info_obj, sizeof info_obj, "%s{EBEBEB} (/recoger %d)", InfoInventario[ObjetoID][NombreObjeto], i);
				if (bomxo != 0)
				{
					InfoSuelo[i][DropLabel] = CreateDynamic3DTextLabel(info_obj, COLOR_GENERAL, X, Y, Z, 15.0, .worldid = world, .interiorid = interior);
					ObjetoCaido[i] = CreateDynamicObject(InfoInventario[ObjetoID][ModeloObjeto], X, Y, Z, rotx, roty, rotz, world, interior);
				}
				else
				{
					InfoSuelo[i][DropLabel] = CreateDynamic3DTextLabel(info_obj, COLOR_GENERAL, X, Y, Z-1, 15.0, .worldid = world, .interiorid = interior);
					ObjetoCaido[i] = CreateDynamicObject(InfoInventario[ObjetoID][ModeloObjeto], X, Y, Z-1, rotx, roty, rotz, world, interior);
				}
				ObjTimer[i] = SetTimerEx("SueloTime", 3600000*2, false, "i", i);
				return 1;
			}
		}
	}
	return 1;
}

funcion SueloTime(i)
{
	if (IsValidDynamicObject(ObjetoCaido[i])) DestroyDynamicObject(ObjetoCaido[i]);
	DestroyDynamic3DTextLabel(InfoSuelo[i][DropLabel]);
	InfoSuelo[i][DropLabel] = CreateDynamic3DTextLabel("dropid", -1, -1178.1569, 58.9069, 1.9609, 1.0, .worldid = 1+777, .interiorid = i);
	InfoSuelo[i][DropPosX] = 0.0;
	InfoSuelo[i][DropPosY] = 0.0;
	InfoSuelo[i][DropPosZ] = 0.0;
	InfoSuelo[i][DropID] = 0;
	InfoSuelo[i][DropCantidad] = 0;
	KillTimer(ObjTimer[i]);
	return 1;
}

forward no_tiene_manos(playerid, objeto);
public no_tiene_manos(playerid, objeto)
{
	if (InfoPersonaje[playerid][pManoDerecha] == objeto) return 1;
	if (InfoPersonaje[playerid][pManoIzquierda] == objeto) return 1;
	new no_tiene[256];
	format(no_tiene, sizeof no_tiene, "No tienes {00AE57}%s{EFEFEF} en ninguna mano.", InfoInventario[objeto][NombreObjeto]);
	SendClientMessage(playerid, 0xEFEFEFFF, no_tiene);
	return 0;
}

forward DarObjeto(playerid, objeto, cantidad);
public DarObjeto(playerid, objeto, cantidad)
{
	if (InfoPersonaje[playerid][pManoDerecha] == 0)
	{
		InfoPersonaje[playerid][pManoDerecha] = objeto;
		InfoPersonaje[playerid][pManoDerechaCant] = cantidad;
		PonerObjeto(playerid, 1, objeto);
		if (InfoInventario[objeto][IDArma] > 0) { GivePlayerWeapon(playerid, InfoInventario[objeto][IDArma], cantidad); }
		ActualizarManos(playerid);
		return 1;
	}
	else if (InfoPersonaje[playerid][pManoIzquierda] == 0)
	{
		InfoPersonaje[playerid][pManoIzquierda] = objeto;
		InfoPersonaje[playerid][pManoIzquierdaCant] = cantidad;
		PonerObjeto(playerid, 2, objeto);
		ActualizarManos(playerid);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Debes tener alguna mano vacía, tira o guarda lo que llevas en tus manos.");
	return 2;
}

forward PlayerWeapon(playerid, idarma);
public PlayerWeapon(playerid, idarma)
{
	new idobj = -1, gformat[128];
	Loop(x, sizeof InfoInventario, 0) if (InfoInventario[x][IDArma] == idarma)
	{
		idobj = x;
		break;
	}
	if (idobj == -1) { SendClientMessage(playerid, COLOR_GREY, "Error, ese id de arma no existe en la base de datos, contacta con el programador."); return 0; }
	if (InfoPersonaje[playerid][pManoDerecha] == 0)
	{
		InfoPersonaje[playerid][pManoDerecha] = idobj;
		InfoPersonaje[playerid][pManoDerechaCant] = InfoInventario[idobj][DefaultCantidad];
		PonerObjeto(playerid, 1, idobj);
		GivePlayerWeapon(playerid, idarma, InfoInventario[idobj][DefaultCantidad]);
		ActualizarManos(playerid);
		format(gformat, sizeof gformat, "Mano derecha: {00AE57}%s", InfoInventario[idobj][NombreObjeto]);
		SendClientMessage(playerid, 0xccccccff, gformat);
		return 1;
	}
	else if (InfoPersonaje[playerid][pManoIzquierda] == 0)
	{
		InfoPersonaje[playerid][pManoIzquierda] = idobj;
		InfoPersonaje[playerid][pManoIzquierdaCant] = InfoInventario[idobj][DefaultCantidad];
		PonerObjeto(playerid, 2, idobj);
		ActualizarManos(playerid);
		format(gformat, sizeof gformat, "Mano izquierda: {00AE57}%s{cccccc} usa /mano", InfoInventario[idobj][NombreObjeto]);
		SendClientMessage(playerid, 0xccccccff, gformat);
		return 1;
	}
	SendClientMessage(playerid, 0xebebebff, "Tienes ambas manos ocupadas!");
	return 0;
}

stock QuitarBolsillos(playerid)
{
	for (new x = 0; x < 10; x++)
	{
		InfoPersonaje[playerid][pBolsillo][x] = 0;
		InfoPersonaje[playerid][pBolsilloCant][x] = 0;
	}
	new que2ry[1000], query[2000];
	format(que2ry, sizeof que2ry, "UPDATE personajes SET Bolsillo_1 = 0, Cantidad_bolsillo_1 = 0, Bolsillo_2 = 0, Cantidad_bolsillo_2 = 0, Bolsillo_3 = 0, Cantidad_bolsillo_3 = 0, Bolsillo_4 = 0, Cantidad_bolsillo_4 = 0, Bolsillo_5 = 0, Cantidad_bolsillo_5 = 0,");
	mysql_format(DBInsanity, query, sizeof query, "%s Bolsillo_6 = 0, Cantidad_bolsillo_6 = 0, Bolsillo_7 = 0, Cantidad_bolsillo_7 = 0, Bolsillo_8 = 0, Cantidad_bolsillo_8 = 0, Bolsillo_9 = 0, Cantidad_bolsillo_9 = 0, Bolsillo_10 = 0, Cantidad_bolsillo_10 = 0 WHERE ID = '%d'", que2ry, InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, query);
}

stock QuitarManos(playerid)
{
	InfoPersonaje[playerid][pManoIzquierda] = 0;
	InfoPersonaje[playerid][pManoIzquierdaCant] = 0;
	InfoPersonaje[playerid][pManoDerecha] = 0;
	InfoPersonaje[playerid][pManoDerechaCant] = 0;
	RemovePlayerAttachedObject(playerid, 7);
	RemovePlayerAttachedObject(playerid, 8);
	ResetPlayerWeapons(playerid);
	new query[500];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Mano_derecha = 0, Cantidad_mano_derecha = 0, Mano_izquierda = 0, Cantidad_mano_izquierda = 0 WHERE ID = '%d'", InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, query);
}

stock QuitarEspalda(playerid)
{
	InfoPersonaje[playerid][pEspalda] = 0, InfoPersonaje[playerid][pEspaldaCant] = 0;
	RemovePlayerAttachedObject(playerid, 9);
	new query[256];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Espalda = 0, Cantidad_espalda = 0 WHERE ID = '%d'", InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, query);
}

GetNameObjeto(modelo)
{
	new ex_name[64];
	alm(ex_name, InfoInventario[modelo][NombreObjeto]);
	return ex_name;
}

slot_inv(id_objeto, cantidad)
{
	new mensaje[128];
	switch (id_objeto)
	{
		case 19..31: format(mensaje, sizeof(mensaje), "%s\t{00AE57}%d balas", InfoInventario[id_objeto][NombreObjeto], cantidad);
		case 40: format(mensaje, sizeof(mensaje), "%s\t{00AE57}%d cargas", InfoInventario[id_objeto][NombreObjeto], cantidad);
		case 41: format(mensaje, sizeof(mensaje), "%s\t{00AE57}%d usos", InfoInventario[id_objeto][NombreObjeto], cantidad);
		case 43..46: format(mensaje, sizeof(mensaje), "%s\t{00AE57}%d gramos", InfoInventario[id_objeto][NombreObjeto], cantidad);
		case 47,48,49: format(mensaje, sizeof(mensaje), "%s\t{00AE57}%d usos", InfoInventario[id_objeto][NombreObjeto], cantidad);
		case 57..65: format(mensaje, sizeof(mensaje), "%s\t{00AE57}%d balas", InfoInventario[id_objeto][NombreObjeto], cantidad);
		default:
		{
		    if (cantidad >= 2) format(mensaje, sizeof(mensaje), "%s\t{00AE57}%d unidades", InfoInventario[id_objeto][NombreObjeto], cantidad);
		    else format(mensaje, sizeof(mensaje), "%s", InfoInventario[id_objeto][NombreObjeto]);
		}
	}
	return mensaje;
}

slot_objeto(id_objeto, cantidad)
{
	new mensaje[128];
	switch (id_objeto)
	{
		case 19..31: format(mensaje, sizeof(mensaje), "%s {00AE57}(%d balas)", InfoInventario[id_objeto][NombreObjeto], cantidad);
		case 40: format(mensaje, sizeof(mensaje), "%s {00AE57}(%d cargas)", InfoInventario[id_objeto][NombreObjeto], cantidad);
		case 41: format(mensaje, sizeof(mensaje), "%s {00AE57}(%d usos)", InfoInventario[id_objeto][NombreObjeto], cantidad);
		case 43..46: format(mensaje, sizeof(mensaje), "%s {00AE57}(%d gramos)", InfoInventario[id_objeto][NombreObjeto], cantidad);
		case 47,48,49: format(mensaje, sizeof(mensaje), "%s {00AE57}(%d usos)", InfoInventario[id_objeto][NombreObjeto], cantidad);
		case 57..65: format(mensaje, sizeof(mensaje), "%s {00AE57}(%d balas)", InfoInventario[id_objeto][NombreObjeto], cantidad);
		default:
		{
		    if (cantidad >= 2) format(mensaje, sizeof(mensaje), "%s {00AE57}(%d unidades)", InfoInventario[id_objeto][NombreObjeto], cantidad);
		    else format(mensaje, sizeof(mensaje), "%s", InfoInventario[id_objeto][NombreObjeto]);
		}
	}
	return mensaje;
}

forward ActualizarManos(playerid);
public ActualizarManos(playerid)
{
	new ManoDer = InfoPersonaje[playerid][pManoDerecha], ManoDerCant = InfoPersonaje[playerid][pManoDerechaCant];
	if (ManoDer == 0) RemovePlayerAttachedObject(playerid, 7);
	if (InfoInventario[ManoDer][Arrojadizo] == 1 && ManoDerCant <= 0)
	{
		InfoPersonaje[playerid][pManoDerecha] = 0;
		InfoPersonaje[playerid][pManoDerechaCant] = 0;
		RemovePlayerAttachedObject(playerid, 7);
	}
	if (ManoDer > 0 && ManoDer < sizeof(InfoInventario))
	{
		if (ManoDerCant > InfoInventario[ManoDer][MaxCantidad])
		{
			if (InfoInventario[ManoDer][IDArma] > 0) { ResetPlayerWeapons(playerid), GivePlayerWeapon(playerid, InfoInventario[ManoDer][IDArma], InfoInventario[ManoDer][MaxCantidad]); }
			InfoPersonaje[playerid][pManoDerechaCant] = InfoInventario[ManoDer][MaxCantidad];
		}
		if (ManoDer < 16 && ManoDerCant <= 0) { GivePlayerWeapon(playerid, InfoInventario[ManoDer][IDArma], 1); }
	}
	new ManoIzq = InfoPersonaje[playerid][pManoIzquierda], ManoIzqCant = InfoPersonaje[playerid][pManoIzquierdaCant];
	if (ManoIzq == 0) RemovePlayerAttachedObject(playerid, 8);
	if (ManoIzq > 0 && ManoIzq < sizeof(InfoInventario))
	{
		if (ManoIzqCant > InfoInventario[ManoIzq][MaxCantidad]) { InfoPersonaje[playerid][pManoIzquierdaCant] = InfoInventario[ManoIzq][MaxCantidad]; }
		if (ManoIzq < 16 && ManoIzqCant <= 0) { InfoPersonaje[playerid][pManoIzquierdaCant] = 1; }
	}
	if (InfoInventario[ManoIzq][Arrojadizo] == 1 && ManoIzqCant <= 0)
	{
		InfoPersonaje[playerid][pManoIzquierda] = 0;
		InfoPersonaje[playerid][pManoIzquierdaCant] = 0;
		RemovePlayerAttachedObject(playerid, 8);
	}
	new query[500];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Mano_derecha = '%d', Cantidad_mano_derecha = '%d', Mano_izquierda = '%d', Cantidad_mano_izquierda = '%d' WHERE ID = '%d'",
	InfoPersonaje[playerid][pManoDerecha], InfoPersonaje[playerid][pManoDerechaCant], InfoPersonaje[playerid][pManoIzquierda], InfoPersonaje[playerid][pManoIzquierdaCant], InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, query);
}

SetPosEx(playerid, Float: pot_x, Float: pot_y, Float: pot_z, Float: pot_r = 0.0, pot_int, pot_vw, guardable)
{
	//posiciones x,y,z,r
	if (pot_x != -1)
	{
		InfoPersonaje[playerid][pPosicionX] = pot_x;
		InfoPersonaje[playerid][pPosicionY] = pot_y;
		InfoPersonaje[playerid][pPosicionZ] = pot_z;
		InfoPersonaje[playerid][pPosicionR] = pot_r;
		SetPlayerPos(playerid, pot_x, pot_y, pot_z);
		SetPlayerFacingAngle(playerid, pot_r);
	}
	else { GetPlayerPos(playerid, InfoPersonaje[playerid][pPosicionX], InfoPersonaje[playerid][pPosicionY], InfoPersonaje[playerid][pPosicionZ]); GetPlayerFacingAngle(playerid, InfoPersonaje[playerid][pPosicionR]); }
	//interior
	if (pot_int != -1)
	{
		InfoPersonaje[playerid][pInterior] = pot_int;
		SetPlayerInterior(playerid, pot_int);
	}
	else InfoPersonaje[playerid][pInterior] = GetPlayerInterior(playerid);
	//virtualworld
	if (pot_vw != -1)
	{
		InfoPersonaje[playerid][pVirtualWorld] = pot_vw;
		SetPlayerVirtualWorld(playerid, pot_vw);
	}
	else InfoPersonaje[playerid][pVirtualWorld] = GetPlayerVirtualWorld(playerid);
	if (guardable != 0)
	{
		//guardado mysql
		new query[1028];
		mysql_format(DBInsanity, query, sizeof query , "UPDATE personajes SET PosicionX = '%f', PosicionY = '%f', PosicionZ = '%f', PosicionR = '%f', Interior = '%d', VirtualWorld = '%d' WHERE ID = '%d'",
		InfoPersonaje[playerid][pPosicionX], InfoPersonaje[playerid][pPosicionY], InfoPersonaje[playerid][pPosicionZ], InfoPersonaje[playerid][pPosicionR], InfoPersonaje[playerid][pInterior], InfoPersonaje[playerid][pVirtualWorld], InfoPersonaje[playerid][pID]);
		mysql_tquery(DBInsanity, query);
    }
	return 1;
}

DesbugNombre(playerid)
{
	new nameplayer[MAX_PLAYER_NAME];
	alm(nameplayer, InfoPersonaje[playerid][pNombre_Apellido]);

	for(new i = 0; i < sizeof nameplayer; i++)
	{
		if (nameplayer[i] == ' ')
		{
			nameplayer[i] = '_';
		}
	}
	return nameplayer;
}

NombreJugador(playerid)
{
	new nameplayer[MAX_PLAYER_NAME + 2];
	GetPlayerName(playerid, nameplayer, sizeof nameplayer);
	for(new i = 0, j = strlen(nameplayer); i < j; i ++)
	{
		if(nameplayer[i] == '_')
		{
			nameplayer[i] = ' ';
		}
	}
	if (InfoPersonaje[playerid][pUsoMascara]) format(nameplayer, sizeof nameplayer, "Desconocido%d", RandomMascara[playerid]);
	return nameplayer;
}

NombreDeCuenta(playerid)
{
	new nameplayer[128];
	alm(nameplayer, InfoPersonaje[playerid][pNombre_Apellido]);
	return nameplayer;
}

NombreOriginal(playerid)
{
	new nameplayer[128];
/*	if (InfoPersonaje[playerid][pUsoMascara]) alm(nameplayer, InfoPersonaje[playerid][pNombre_Apellido]);
	else */ GetPlayerName(playerid, nameplayer, sizeof nameplayer);
	return nameplayer;
}

Nombre2Original(playerid)
{
	new nameplayer[128];
	GetPlayerName(playerid, nameplayer, sizeof nameplayer);
	return nameplayer;
}

// objetos dinámicos en sql 06/03/2019 by EdinsonWalker
enum oInfo
{
	oID_sql,			// ID-DB
	oModelo,			// Modelo
	Float: oPotX,		// PotX
	Float: oPotY,		// PotY
	Float: oPotZ,		// PotZ
	Float: oRotX,		// RotX
	Float: oRotY,		// RotY
	Float: oRotZ,		// RotZ
	oInterior,			// Interior
	oVirtualWorld,		// VirtualWorld
	oObjeto,			// Objeto
};
new InfoObjeto[MAX_OBJETOS_ADMIN][oInfo];

forward CargarObjetosAdmin();
public CargarObjetosAdmin()
{
	new cargaditos = 0;
	Loop(tabla, cache_num_rows(), 0)
	{
	    new id = tabla+1;
		reg_int(tabla, "ID", InfoObjeto[id][oID_sql]);
		reg_int(tabla, "Modelo", InfoObjeto[id][oModelo]);
		reg_float(tabla, "PotX", InfoObjeto[id][oPotX]);
		reg_float(tabla, "PotY", InfoObjeto[id][oPotY]);
		reg_float(tabla, "PotZ", InfoObjeto[id][oPotZ]);
		reg_float(tabla, "RotX", InfoObjeto[id][oRotX]);
		reg_float(tabla, "RotY", InfoObjeto[id][oRotY]);
		reg_float(tabla, "RotZ", InfoObjeto[id][oRotZ]);
		reg_int(tabla, "Interior", InfoObjeto[id][oInterior]);
		reg_int(tabla, "VirtualWorld", InfoObjeto[id][oVirtualWorld]);
		if (InfoObjeto[id][oID_sql]) totalobjetosadmin++;
		//función
		if (InfoObjeto[id][oPotX] != 0.0)
		{
			cargaditos++;
			InfoObjeto[id][oObjeto] = CreateDynamicObject(InfoObjeto[id][oModelo], InfoObjeto[id][oPotX], InfoObjeto[id][oPotY], InfoObjeto[id][oPotZ], InfoObjeto[id][oRotX], InfoObjeto[id][oRotY], InfoObjeto[id][oRotZ], .interiorid = InfoObjeto[id][oInterior], .worldid = InfoObjeto[id][oVirtualWorld]);
		}
	}
	printf("%d objetos dinámicos (SQL: %d) cargados correctamente.", cargaditos, totalobjetosadmin-1);
	return 1;
}

// vehículos dinámicos, renovación en sql 09/01/2019 by EdinsonWalker
new veh_gasolina[MAX_VEHICLES] = 200;

enum PVinfo
{
	vID_sql,                            // id en base de datos
	vIG_id,                             // id dentro del servidor (/dl)
	vNombre[128],                       // nombre
	vPropietario[MAX_PLAYER_NAME],      // propietario
	vTipo,								// tipo (0: usuarios, 1..50: facciones, 200: vip, 300: admin, 600: renta)
	vNegocio,
	vModelo,                            // modelo
	Float: vPosicionX,                  // X
	Float: vPosicionY,                  // Y
	Float: vPosicionZ,                  // Z
	Float: vPosicionR,                  // Angle
	vInterior,                          // Interior
	vVirtualWorld,                      // VirtualWorld
	Float: vVida,                       // Vida
	vDanioSuperficie,                   // Daño superficie
	vDanioPuertas,                      // Daño puertas
	vDanioLuces,                        // Daño luces
	vDanioRuedas,                       // Daño ruedas
	vGasolina,							// Gasolina
	vColor_1,                           // Color 1
	vColor_2,                           // Color 2
	vPaintJob,                          // Paint job
	vSeguro,							// Con seguro puesto
	vPrecio,                            // Precio
	vEmbargo,                           // Embargo
	vMulta,                             // Multa
	vMaletero[10],                      // Maletero
	vMaleteroCant[10],                  // Maletero cantidad
	vMaxMaletero,                       // Máximo maletero
	vModificacion[MAX_MODIFICACIONES],	// Tunning
	vModeloNeon,                        // Modelo neon
	vOnNeon,                            // Activo neon
	vCallSign[40],                      // Callsign
	vObjModelo[5],
	Float: vObjPosX[5],
	Float: vObjPosY[5],
	Float: vObjPosZ[5],
	Float: vObjRotX[5],
	Float: vObjRotY[5],
	Float: vObjRotZ[5],
	vSirena,                            // Sirena
	//no save:
	vSpawned,                           // Spawned
	vLlavePrestada,                     // Llave prestada
	vMaleteroOn,                        // 0 cerrado, 1 abierto
	vObjetoNeonL,                       // Pieza neon 1
	vObjetoNeonR,                       // Pieza neon 2
	vRentaDueno[MAX_PLAYER_NAME],       // Renta dueño
	vRentaTiempo,                       // Renta tiempo
	Text3D: vOnCallSign,                // Label callsign
	vTuneo[5],
};
new InfoVehiculo[MAX_VEHICULOS][PVinfo];

//sistema de objetos en vehículos (VIP)
#define Create_VehObject 690

new VehicleFurnObjs[] =
{
	1000,1001,1002,1003,1004,1005,1007,1018,1019,1021,1024,1029,1043,
    1044,1047,1048,1049,1050,1056,1090,2768, 11736,19147,19580,2690,
	19308,1550,19306,19307,18749,19054, 19314,2404,2405,2406,19317,19318,
	2232,1840,19471,19878,19893,19894,19873,19874,19624,19621,19620,19078,
	1025,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,
	1096,1097,1098,
};

SetVehicleExVirtualWorld(vehicleid, vw)
{
	SetVehicleVirtualWorld(vehicleid, vw);
	Loop(id, totalvehiculos, 0) if (InfoVehiculo[id][vIG_id] == vehicleid)
	{
		Colocar_Neon(id, vehicleid);
		Colocar_Objeto(id, vehicleid);
	}
}

forward CargarVehiculos();
public CargarVehiculos()
{
	Loop(xdl, MAX_VEHICULOS, 0)
	{
		InfoVehiculo[xdl][vMaleteroOn] = 0;
		InfoVehiculo[xdl][vRentaTiempo] = 0;
		alm(InfoVehiculo[xdl][vRentaDueno], "none");
		InfoVehiculo[xdl][vLlavePrestada] = -1;
		alm(InfoVehiculo[xdl][vCallSign], "");
	}
	new cargaditos = 0;
	Loop(tabla, cache_num_rows(), 0)
	{
	    new id = tabla+1;
		reg_int(tabla, "ID", InfoVehiculo[id][vID_sql]);
		reg_string(tabla, "Nombre", InfoVehiculo[id][vNombre], 128);
		reg_string(tabla, "Propietario", InfoVehiculo[id][vPropietario], MAX_PLAYER_NAME);
		reg_int(tabla, "Tipo", InfoVehiculo[id][vTipo]);
		reg_int(tabla, "Negocio", InfoVehiculo[id][vNegocio]);
		reg_int(tabla, "Modelo", InfoVehiculo[id][vModelo]);
		reg_float(tabla, "Posicion_X", InfoVehiculo[id][vPosicionX]);
		reg_float(tabla, "Posicion_Y", InfoVehiculo[id][vPosicionY]);
		reg_float(tabla, "Posicion_Z", InfoVehiculo[id][vPosicionZ]);
		reg_float(tabla, "Posicion_R", InfoVehiculo[id][vPosicionR]);
		reg_int(tabla, "Interior", InfoVehiculo[id][vInterior]);
		reg_int(tabla, "VirtualWorld", InfoVehiculo[id][vVirtualWorld]);
		reg_float(tabla, "Vida", InfoVehiculo[id][vVida]);
		reg_int(tabla, "DanioSuperficie", InfoVehiculo[id][vDanioSuperficie]);
		reg_int(tabla, "DanioPuertas", InfoVehiculo[id][vDanioPuertas]);
		reg_int(tabla, "DanioLuces", InfoVehiculo[id][vDanioLuces]);
		reg_int(tabla, "DanioRuedas", InfoVehiculo[id][vDanioRuedas]);
		reg_int(tabla, "Gasolina", InfoVehiculo[id][vGasolina]);
		reg_int(tabla, "Color_1", InfoVehiculo[id][vColor_1]);
		reg_int(tabla, "Color_2", InfoVehiculo[id][vColor_2]);
		reg_int(tabla, "PaintJob", InfoVehiculo[id][vPaintJob]);
		reg_int(tabla, "ConSeguro", InfoVehiculo[id][vSeguro]);
		reg_int(tabla, "Precio", InfoVehiculo[id][vPrecio]);
		reg_int(tabla, "Embargo", InfoVehiculo[id][vEmbargo]);
		reg_int(tabla, "Multa", InfoVehiculo[id][vMulta]);
		reg_int(tabla, "Maletero1", InfoVehiculo[id][vMaletero][0]);
		reg_int(tabla, "MaleteroCant1", InfoVehiculo[id][vMaleteroCant][0]);
		reg_int(tabla, "Maletero2", InfoVehiculo[id][vMaletero][1]);
		reg_int(tabla, "MaleteroCant2", InfoVehiculo[id][vMaleteroCant][1]);
		reg_int(tabla, "Maletero3", InfoVehiculo[id][vMaletero][2]);
		reg_int(tabla, "MaleteroCant3", InfoVehiculo[id][vMaleteroCant][2]);
		reg_int(tabla, "Maletero4", InfoVehiculo[id][vMaletero][3]);
		reg_int(tabla, "MaleteroCant4", InfoVehiculo[id][vMaleteroCant][3]);
		reg_int(tabla, "Maletero5", InfoVehiculo[id][vMaletero][4]);
		reg_int(tabla, "MaleteroCant5", InfoVehiculo[id][vMaleteroCant][4]);
		reg_int(tabla, "Maletero6", InfoVehiculo[id][vMaletero][5]);
		reg_int(tabla, "MaleteroCant6", InfoVehiculo[id][vMaleteroCant][5]);
		reg_int(tabla, "Maletero7", InfoVehiculo[id][vMaletero][6]);
		reg_int(tabla, "MaleteroCant7", InfoVehiculo[id][vMaleteroCant][6]);
		reg_int(tabla, "Maletero8", InfoVehiculo[id][vMaletero][7]);
		reg_int(tabla, "MaleteroCant8", InfoVehiculo[id][vMaleteroCant][7]);
		reg_int(tabla, "Maletero9", InfoVehiculo[id][vMaletero][8]);
		reg_int(tabla, "MaleteroCant9", InfoVehiculo[id][vMaleteroCant][8]);
		reg_int(tabla, "Maletero10", InfoVehiculo[id][vMaletero][9]);
		reg_int(tabla, "MaleteroCant10", InfoVehiculo[id][vMaleteroCant][9]);
		reg_int(tabla, "MaxMaletero", InfoVehiculo[id][vMaxMaletero]);
		reg_int(tabla, "Modificacion1", InfoVehiculo[id][vModificacion][0]);
		reg_int(tabla, "Modificacion2", InfoVehiculo[id][vModificacion][1]);
		reg_int(tabla, "Modificacion3", InfoVehiculo[id][vModificacion][2]);
		reg_int(tabla, "Modificacion4", InfoVehiculo[id][vModificacion][3]);
		reg_int(tabla, "Modificacion5", InfoVehiculo[id][vModificacion][4]);
		reg_int(tabla, "Modificacion6", InfoVehiculo[id][vModificacion][5]);
		reg_int(tabla, "Modificacion7", InfoVehiculo[id][vModificacion][6]);
		reg_int(tabla, "Modificacion8", InfoVehiculo[id][vModificacion][7]);
		reg_int(tabla, "Modificacion9", InfoVehiculo[id][vModificacion][8]);
		reg_int(tabla, "Modificacion10", InfoVehiculo[id][vModificacion][9]);
		reg_int(tabla, "Modificacion11", InfoVehiculo[id][vModificacion][10]);
		reg_int(tabla, "Modificacion12", InfoVehiculo[id][vModificacion][11]);
		reg_int(tabla, "Modificacion13", InfoVehiculo[id][vModificacion][12]);
		reg_int(tabla, "Modificacion14", InfoVehiculo[id][vModificacion][13]);
		reg_int(tabla, "Modificacion15", InfoVehiculo[id][vModificacion][14]);
		reg_int(tabla, "ModeloNeon", InfoVehiculo[id][vModeloNeon]);
		reg_int(tabla, "OnNeon", InfoVehiculo[id][vOnNeon]);
		reg_string(tabla, "CallSign", InfoVehiculo[id][vCallSign], 40);
		reg_int(tabla, "ObjModelo_1", InfoVehiculo[id][vObjModelo][0]);
		reg_float(tabla, "ObjPosX_1", InfoVehiculo[id][vObjPosX][0]);
		reg_float(tabla, "ObjPosY_1", InfoVehiculo[id][vObjPosY][0]);
		reg_float(tabla, "ObjPosZ_1", InfoVehiculo[id][vObjPosZ][0]);
		reg_float(tabla, "ObjRotX_1", InfoVehiculo[id][vObjRotX][0]);
		reg_float(tabla, "ObjRotY_1", InfoVehiculo[id][vObjRotY][0]);
		reg_float(tabla, "ObjRotZ_1", InfoVehiculo[id][vObjRotZ][0]);
		reg_int(tabla, "ObjModelo_2", InfoVehiculo[id][vObjModelo][1]);
		reg_float(tabla, "ObjPosX_2", InfoVehiculo[id][vObjPosX][1]);
		reg_float(tabla, "ObjPosY_2", InfoVehiculo[id][vObjPosY][1]);
		reg_float(tabla, "ObjPosZ_2", InfoVehiculo[id][vObjPosZ][1]);
		reg_float(tabla, "ObjRotX_2", InfoVehiculo[id][vObjRotX][1]);
		reg_float(tabla, "ObjRotY_2", InfoVehiculo[id][vObjRotY][1]);
		reg_float(tabla, "ObjRotZ_2", InfoVehiculo[id][vObjRotZ][1]);
		reg_int(tabla, "ObjModelo_3", InfoVehiculo[id][vObjModelo][2]);
		reg_float(tabla, "ObjPosX_3", InfoVehiculo[id][vObjPosX][2]);
		reg_float(tabla, "ObjPosY_3", InfoVehiculo[id][vObjPosY][2]);
		reg_float(tabla, "ObjPosZ_3", InfoVehiculo[id][vObjPosZ][2]);
		reg_float(tabla, "ObjRotX_3", InfoVehiculo[id][vObjRotX][2]);
		reg_float(tabla, "ObjRotY_3", InfoVehiculo[id][vObjRotY][2]);
		reg_float(tabla, "ObjRotZ_3", InfoVehiculo[id][vObjRotZ][2]);
		reg_int(tabla, "ObjModelo_4", InfoVehiculo[id][vObjModelo][3]);
		reg_float(tabla, "ObjPosX_4", InfoVehiculo[id][vObjPosX][3]);
		reg_float(tabla, "ObjPosY_4", InfoVehiculo[id][vObjPosY][3]);
		reg_float(tabla, "ObjPosZ_4", InfoVehiculo[id][vObjPosZ][3]);
		reg_float(tabla, "ObjRotX_4", InfoVehiculo[id][vObjRotX][3]);
		reg_float(tabla, "ObjRotY_4", InfoVehiculo[id][vObjRotY][3]);
		reg_float(tabla, "ObjRotZ_4", InfoVehiculo[id][vObjRotZ][3]);
		reg_int(tabla, "ObjModelo_5", InfoVehiculo[id][vObjModelo][4]);
		reg_float(tabla, "ObjPosX_5", InfoVehiculo[id][vObjPosX][4]);
		reg_float(tabla, "ObjPosY_5", InfoVehiculo[id][vObjPosY][4]);
		reg_float(tabla, "ObjPosZ_5", InfoVehiculo[id][vObjPosZ][4]);
		reg_float(tabla, "ObjRotX_5", InfoVehiculo[id][vObjRotX][4]);
		reg_float(tabla, "ObjRotY_5", InfoVehiculo[id][vObjRotY][4]);
		reg_float(tabla, "ObjRotZ_5", InfoVehiculo[id][vObjRotZ][4]);
		reg_int(tabla, "Sirena", InfoVehiculo[id][vSirena]);
		if (InfoVehiculo[id][vID_sql]) totalvehiculos++;
		if (InfoVehiculo[id][vModelo] != 0) cargaditos++;
		if (InfoVehiculo[id][vTipo] != 0 || InfoVehiculo[id][vNegocio] != 0)
		{
			new Coche;
			Coche = CreateVehicle(InfoVehiculo[id][vModelo], InfoVehiculo[id][vPosicionX], InfoVehiculo[id][vPosicionY], InfoVehiculo[id][vPosicionZ], InfoVehiculo[id][vPosicionR], InfoVehiculo[id][vColor_1], InfoVehiculo[id][vColor_2], -1, InfoVehiculo[id][vSirena]);
			InfoVehiculo[id][vIG_id] = Coche;
			InfoVehiculo[id][vSpawned] = 1;
			veh_gasolina[Coche] = InfoVehiculo[id][vGasolina];
			if (InfoVehiculo[id][vModelo] == 528 || InfoVehiculo[id][vModelo] == 427) SetVehicleHealth(Coche, 5000.0);
			else SetVehicleHealth(Coche, InfoVehiculo[id][vVida]);
			LinkVehicleToInterior(Coche, InfoVehiculo[id][vInterior]);
			SetVehicleExVirtualWorld(Coche, InfoVehiculo[id][vVirtualWorld]);
			UpdateVehicleDamageStatus(Coche, InfoVehiculo[id][vDanioSuperficie], InfoVehiculo[id][vDanioPuertas], InfoVehiculo[id][vDanioLuces], InfoVehiculo[id][vDanioRuedas]);
			if (InfoVehiculo[id][vSeguro] != 0) LockPlayerVehicle(Coche);
			Load_Mods(id);
			if (!isnull(InfoVehiculo[id][vCallSign]))
			{
				DestroyDynamic3DTextLabel(InfoVehiculo[id][vOnCallSign]);
				InfoVehiculo[id][vOnCallSign] = CreateDynamic3DTextLabel(InfoVehiculo[id][vCallSign], 0xEBEBEBFF, -1.0, -2.8, 0.0, 30.0, INVALID_PLAYER_ID, Coche);
			}
		}
	}
	printf("%d vehículos dinámicos (SQL: %d) cargados correctamente.", cargaditos, totalvehiculos-1);
	return 1;
}

CountVehs(type)
{
	new count = 0;
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vTipo] == type)
	{
		count++;
	}
	return count;
}

verificar_id_vehiculo(vehicleid)
{
	new id = -1;
	Loop(x, totalvehiculos, 1) if (InfoVehiculo[x][vIG_id] == vehicleid)
	{
		id = x;
		break;
	}
	return id;
}

llaves_vehiculo(playerid, vehicleid)
{
	if (!IsPlayerConnected(playerid)) return -1;
	if (!GetVehicleModel(vehicleid)) return -1;
	Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] == vehicleid && InfoVehiculo[v][vTipo] == 0)
	{
		if (strcmp(InfoPersonaje[playerid][pNombre_Apellido], InfoVehiculo[v][vPropietario], true) == 0)
		{
			return v;
		}
	}
	return -1;
}

Vehiculo_LSPD(vehicleid)
{
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] == vehicleid)
	{
		if (InfoVehiculo[id][vTipo] == 1) return 1; //afirmativo, tiene acceso
	}
	return 0;
}

Vehiculo_FBI(vehicleid)
{
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] == vehicleid)
	{
		if (InfoVehiculo[id][vTipo] == 2) return 1; //afirmativo, tiene acceso
	}
	return 0;
}

Vehiculo_SAEM(vehicleid)
{
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] == vehicleid)
	{
		if (InfoVehiculo[id][vTipo] == 3) return 1; //afirmativo, tiene acceso
	}
	return 0;
}

Vehiculo_SASD(vehicleid)
{
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] == vehicleid)
	{
		if (InfoVehiculo[id][vTipo] == 4) return 1; //afirmativo, tiene acceso
	}
	return 0;
}

Vehiculo_GOB(vehicleid)
{
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] == vehicleid)
	{
		if (InfoVehiculo[id][vTipo] == 5) return 1; //afirmativo, tiene acceso
	}
	return 0;
}

Vehiculo_Renta(vehicleid)
{
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] == vehicleid)
	{
		if (InfoVehiculo[id][vTipo] == 600) return 1; //afirmativo, tiene acceso
	}
	return 0;
}

llaves_lider(playerid, vehicleid)
{
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] == vehicleid && InfoVehiculo[id][vTipo] != 0)
	{
		if (InfoPersonaje[playerid][pLider] == InfoVehiculo[id][vTipo]) return 1; //afirmativo, tiene acceso
		if (InfoPersonaje[playerid][pMiembro] == InfoVehiculo[id][vTipo])
			if (InfoPersonaje[playerid][pRango] == InfoFaccion[InfoPersonaje[playerid][pMiembro]][fMaxRangos]) return 1; //afirmativo, tiene acceso
	}
	return 0;
}

llaves_faccion(playerid, vehicleid)
{
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] == vehicleid && InfoVehiculo[id][vTipo] != 0)
	{
		if (InfoPersonaje[playerid][pMiembro] == InfoVehiculo[id][vTipo]) return 1; //afirmativo, tiene acceso
	}
	return 0;
}

llaves_negocio(playerid, vehicleid)
{
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] == vehicleid && InfoVehiculo[id][vNegocio] != 0)
	{
		if (InfoPersonaje[playerid][pContrato] == InfoVehiculo[id][vNegocio]) return 1; //afirmativo, tiene acceso
		if (InfoPersonaje[playerid][pNegocio1] == InfoVehiculo[id][vNegocio]) return 1; //afirmativo, tiene acceso
		if (InfoPersonaje[playerid][pNegocio2] == InfoVehiculo[id][vNegocio]) return 1; //afirmativo, tiene acceso
	}
	return 0;
}

llaves_renta(playerid, vehicleid)
{
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] == vehicleid && InfoVehiculo[id][vTipo] == 600)
	{
		if (strcmp(InfoPersonaje[playerid][pNombre_Apellido], InfoVehiculo[id][vRentaDueno], true) == 0)
		{
			return 1;
		}
		if (GetPlayerAdmin(playerid, 6) != 0) return 1;
	}
	return 0;
}

llaves_vip(playerid, vehicleid)
{
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] == vehicleid && InfoVehiculo[id][vTipo] != 0)
	{
		if (InfoCuenta[playerid][jVIP] != 0) return 1; //afirmativo, tiene acceso
	}
	return 0;
}

forward vehiculos_legales(vehicleid);
public vehiculos_legales(vehicleid) //vehicleid legales
{
	if (Vehiculo_LSPD(vehicleid) || Vehiculo_FBI(vehicleid) || Vehiculo_SAEM(vehicleid) || Vehiculo_SASD(vehicleid) || Vehiculo_GOB(vehicleid))
	{
		return 1;
	}
	return 0;
}

// cajeros automáticos en sql - julio 2019
enum atmInfo
{
	atmID_sql,						// ID-DB
	atmModelo,						// Modelo
	atmDinero,						// Dinero
	Float: atmPotX,					// PotX
	Float: atmPotY,              	// PotY
	Float: atmPotZ,              	// PotZ
	Float: atmRotX,              	// RotX
	Float: atmRotY,              	// RotY
	Float: atmRotZ,              	// RotZ
	atmInterior,                 	// Interior
	atmVirtualWorld,             	// VirtualWorld
	atmObject,                   	// Objeto
	Text3D: atmLabel,            	// 3d label
};
new InfoCajero[MAX_CAJEROS][atmInfo];

forward CargarCajeros();
public CargarCajeros()
{
	new cargaditos = 0;
	Loop(tabla, cache_num_rows(), 0)
	{
	    new id = tabla+1;
		reg_int(tabla, "ID", InfoCajero[id][atmID_sql]);
		reg_int(tabla, "Modelo", InfoCajero[id][atmModelo]);
		reg_int(tabla, "BolosUwU", InfoCajero[id][atmDinero]);
		reg_float(tabla, "PotX", InfoCajero[id][atmPotX]);
		reg_float(tabla, "PotY", InfoCajero[id][atmPotY]);
		reg_float(tabla, "PotZ", InfoCajero[id][atmPotZ]);
		reg_float(tabla, "RotX", InfoCajero[id][atmRotX]);
		reg_float(tabla, "RotY", InfoCajero[id][atmRotY]);
		reg_float(tabla, "RotZ", InfoCajero[id][atmRotZ]);
		reg_int(tabla, "Interior", InfoCajero[id][atmInterior]);
		reg_int(tabla, "VirtualWorld", InfoCajero[id][atmVirtualWorld]);
		if (InfoCajero[id][atmID_sql]) totalcajeros++;
		//función
		if (InfoCajero[id][atmPotX] != 0.0)
		{
			cargaditos++;
			Label_cajero(id, 1);
		}
	}
	printf("%d cajeros automáticos (SQL: %d) cargados correctamente.", cargaditos, totalcajeros-1);
	return 1;
}

Label_cajero(id, type)
{
	//info new
	new atm_label[470];
	format(atm_label, sizeof atm_label, "{EBEBEB}ATM {00AE57}%d\n{EBEBEB}Dinero: {00CC00}$%s\n{EBEBEB}Aquí puedes usar {00AE57}/cajero{EBEBEB} para tus operaciones", id, diner_coma(InfoCajero[id][atmDinero]));
	if (type == 1)
	{
		if (IsValidDynamicObject(InfoCajero[id][atmObject])) DestroyDynamicObject(InfoCajero[id][atmObject]);
		DestroyDynamic3DTextLabel(Text3D: InfoCajero[id][atmLabel]);
		InfoCajero[id][atmObject] = CreateDynamicObject(InfoCajero[id][atmModelo], InfoCajero[id][atmPotX], InfoCajero[id][atmPotY], InfoCajero[id][atmPotZ], InfoCajero[id][atmRotX], InfoCajero[id][atmRotY], InfoCajero[id][atmRotZ], .interiorid = InfoCajero[id][atmInterior], .worldid = InfoCajero[id][atmVirtualWorld]);
		InfoCajero[id][atmLabel] = CreateDynamic3DTextLabel(atm_label, -1, InfoCajero[id][atmPotX], InfoCajero[id][atmPotY], InfoCajero[id][atmPotZ] + 0.4, 8.0, .interiorid = InfoCajero[id][atmInterior], .worldid = InfoCajero[id][atmVirtualWorld]);
	}
	else UpdateDynamic3DTextLabelText(InfoCajero[id][atmLabel], -1, atm_label);
}

//system neones by edinson
Es_Neon(modelo)
{
	new gformat[32];
	switch (modelo)
	{
		case 18647: alm(gformat, "rojo");
		case 18648: alm(gformat, "azul");
		case 18649: alm(gformat, "verde");
		case 18650: alm(gformat, "amarillo");
		case 18651: alm(gformat, "rosado");
		case 18652: alm(gformat, "blanco");
	}
	return gformat;
}

#define MAX_VEHICLE_NAME			27

enum vSync_Vehicle_Info
{
	NombreVehicle[MAX_VEHICLE_NAME],
	Seats,
	Windows,
	Float:Mass,
	DriveType,
	EngineType,
	MaxSpeed,
	bool:Nitro,
	Float: NeonOffsetX,
	Float: NeonOffsetY,
    Float: NeonOffsetZ
}

static const vSync_VehicleInfo[212][vSync_Vehicle_Info] =
{
	{"Landstalker", 4, 4, 1700.0, '4', 'D', 159, true, -0.924996, 0.009998, -0.674996},
	{"Bravura", 2, 2, 1300.0, 'F', 'P', 148, true, -0.979999, 0.074997, -0.489998},
	{"Buffalo", 2, 2, 1500.0, 'R', 'P', 188, true, -1.034999, -0.029998, -0.579999},
	{"Linerunner", 2, 2, 3800.0, 'R', 'D', 111, true, -0.884998, 1.834998, -1.099997},
	{"Perennial", 4, 4, 1200.0, 'F', 'P', 134, true, -0.839999, -0.064998, -0.419999},
	{"Sentinel", 4, 4, 1600.0, 'R', 'P', 165, true, -0.914999, 0.000000, -0.534999},
	{"Dumper", 1, 1, 20000.0, 'R', 'D', 111, true, -1.129999, 0.354999, -1.219998},
	{"Firetruck", 2, 2, 6500.0, 'R', 'D', 150, true, -1.214998, 0.125000, -0.759998},
	{"Trashmaster", 2, 2, 5500.0, 'R', 'D', 101, true, -0.664999, 0.709999, -0.889998},
	{"Stretch", 4, 4, 2200.0, 'R', 'P', 159, true, -0.914999, -0.294999, -0.474999},
	{"Manana", 2, 2, 1000.0, 'F', 'P', 131, true, -0.879998, 0.000000, -0.389999},
	{"Infernus", 2, 2, 1400.0, '4', 'P', 223, true, -0.969999, 0.004999, -0.559997},
	{"Voodoo", 2, 2, 1800.0, 'R', 'P', 170, true, -0.994997, -0.154999, -0.569998},
	{"Pony", 4, 4, 2600.0, 'R', 'D', 111, true, -0.919999, -0.069999, -0.719999},
	{"Mule", 2, 2, 3500.0, 'R', 'D', 107, true, -0.759998, -0.469998, -0.524999},
	{"Cheetah", 2, 2, 1200.0, 'R', 'P', 194, true, -0.949998, -0.009998, -0.524999},
	{"Ambulance", 4, 4, 2600.0, '4', 'D', 155, true, -1.259999, -0.604999, -0.664999},
	{"Leviathan", 2, 2, 15000.0, '4', 'P', 143, false, -2.255002, 0.859999, -0.124999},
	{"Moonbeam", 4, 4, 2000.0, 'R', 'D', 116, true, -1.004999, 0.089997, -0.829999},
	{"Esperanto", 2, 2, 1800.0, 'R', 'P', 150, true, -0.934997, -0.009998, -0.584999},
	{"Taxi", 4, 4, 1450.0, 'F', 'P', 146, true, -0.954999, -0.009998, -0.444999},
	{"Washington", 2, 2, 1850.0, 'R', 'P', 155, true, -0.929997, -0.029998, -0.589999},
	{"Bobcat", 2, 2, 1700.0, '4', 'D', 141, true, -0.889998, 0.009998, -0.609999},
	{"Mr. Whoopee", 2, 2, 1700.0, 'R', 'D', 100, true, -0.999997, 0.164995, -0.714999},
	{"BF Injection", 2, 0, 1200.0, 'R', 'P', 137, true, -0.739997, 0.039999, -0.234999},
	{"Hunter", 1, 1, 10000.0, '4', 'P', 214, false, -0.639998, 2.475008, -0.789999},
	{"Premier", 4, 4, 1600.0, 'R', 'P', 175, true, -0.969999, 0.000000, -0.464998},
	{"Enforcer", 4, 4, 4000.0, 'R', 'D', 167, true, -1.124999, -0.714999, -0.734999},
	{"Securicar", 4, 2, 7000.0, 'R', 'D', 158, true, -1.124999, 0.054999, -0.759998},
	{"Banshee", 2, 2, 1400.0, 'R', 'P', 203, true, -0.844999, 0.004999, -0.474999},
	{"Predator", 1, 0, 2200.0, 'R', 'P', 184, false, 0.000000, 0.000000, 0.000000},
	{"Bus", 9, 2, 5500.0, 'R', 'D', 131, true, -1.304998, 2.300004, -0.714999},
	{"Rhino", 1, 0, 25000.0, '4', 'D', 95, true, 0.000000, 0.000000, 0.000000},
	{"Barracks", 2, 2, 10500.0, '4', 'D', 112, true, -0.579999, 0.994997, -0.874997},
	{"Hotknife", 2, 2, 1400.0, 'R', 'P', 169, true, 0.000000, 0.000000, 0.000000},
	{"Article Trailer", 1, 0, 3800.0, 'R', 'D', 0, true, 0.000000, 0.000000, 0.000000},
	{"Previon", 2, 2, 1400.0, 'F', 'P', 150, true, -0.859999, -0.024999, -0.489998},
	{"Coach", 9, 0, 9500.0, 'R', 'D', 159, true, -1.314998, 2.245002, -0.724999},
	{"Cabbie", 4, 4, 1750.0, 'R', 'P', 144, true, -0.969999, -0.034999, -0.674996},
	{"Stallion", 2, 2, 1600.0, 'R', 'P', 170, true, -0.884998, 0.034999, -0.644999},
	{"Rumpo", 4, 4, 2000.0, 'F', 'P', 137, true, -0.914999, -0.045000, -0.899999},
	{"RC Bandit", 1, 0, 100.0, '4', 'E', 76, true, 0.000000, 0.000000, 0.000000},
	{"Romero", 2, 2, 2500.0, 'R', 'P', 140, true, -1.004999, -0.074997, -0.604999},
	{"Packer", 2, 2, 8000.0, 'R', 'D', 127, true, -0.809997, 2.770015, -1.174998},
	{"Monster", 2, 2, 5000.0, '4', 'P', 111, true, -1.064998, 0.000000, 0.135000},
	{"Admiral", 4, 4, 1650.0, 'F', 'P', 165, true, -0.949998, 0.000000, -0.519999},
	{"Squallo", 1, 0, 2200.0, 'R', 'P', 240, false, 0.000000, 0.000000, 0.000000},
	{"Seasparrow", 2, 2, 3000.0, '4', 'P', 145, false, -1.004999, 0.259999, -0.769999},
	{"Pizzaboy", 1, 0, 350.0, 'R', 'P', 190, false, 0.000000, 0.000000, 0.000000},
	{"Tram", 2, 0, 1900.0, 'R', 'P', 185, false, 0.000000, 0.000000, 0.000000},
	{"Article Trailer 2", 1, 0, 3800.0, 'R', 'D', 0, true, 0.000000, 0.000000, 0.000000},
	{"Turismo", 2, 2, 1400.0, '4', 'P', 195, true, -0.984999, -0.194995, -0.519999},
	{"Speeder", 1, 0, 2200.0, 'R', 'P', 183, false, 0.000000, 0.000000, 0.000000},
	{"Reefer", 1, 0, 5000.0, 'R', 'P', 57, false, 0.000000, 0.000000, 0.000000},
	{"Tropic", 1, 0, 2200.0, 'R', 'P', 130, false, 0.000000, 0.000000, 0.000000},
	{"Flatbed", 2, 2, 8500.0, 'R', 'D', 159, true, -0.579999, 0.979999, -0.859999},
	{"Yankee", 2, 2, 4500.0, 'R', 'D', 107, true, -0.764998, -0.179995, -0.464998},
	{"Caddy", 2, 0, 1000.0, '4', 'E', 96, true, 0.000000, 0.000000, 0.000000},
	{"Solair", 4, 4, 2000.0, 'R', 'P', 159, true, -0.959999, -0.039999, -0.594999},
	{"Topfun Van (Berkley's RC)", 4, 4, 1900.0, 'R', 'D', 137, true, -0.919999, -0.069999, -0.719999},
	{"Skimmer", 2, 2, 5000.0, '4', 'P', 135, false, -1.399996, 0.554997, -1.819998},
	{"PCJ-600", 2, 0, 500.0, 'R', 'P', 207, false, 0.000000, 0.000000, 0.000000},
	{"Faggio", 2, 0, 350.0, 'R', 'P', 190, false, 0.000000, 0.000000, 0.000000},
	{"Freeway", 2, 0, 800.0, 'R', 'P', 210, false, 0.000000, 0.000000, 0.000000},
	{"RC Baron", 1, 0, 100.0, 'F', 'P', 45, true, 0.000000, 0.000000, 0.000000},
	{"RC Raider", 1, 0, 100.0, '4', 'P', 50, true, 0.000000, 0.000000, 0.000000},
	{"Glendale", 4, 4, 1600.0, 'R', 'P', 148, true, -0.989997, -0.064998, -0.489998},
	{"Oceanic", 4, 4, 1900.0, 'R', 'P', 142, true, -0.989997, -0.044998, -0.484999},
	{"Sanchez", 2, 0, 500.0, 'R', 'P', 186, false, 0.000000, 0.000000, 0.000000},
	{"Sparrow", 2, 2, 2500.0, '4', 'P', 145, false, 0.000000, 0.000000, 0.000000},
	{"Patriot", 4, 4, 2500.0, '4', 'P', 158, true, -1.119999, -0.149995, -0.359999},
	{"Quad", 2, 0, 400.0, '4', 'P', 111, true, 0.000000, 0.000000, 0.000000},
	{"Coastguard", 1, 0, 1200.0, 'R', 'P', 125, false, 0.000000, 0.000000, 0.000000},
	{"Dinghy", 1, 0, 800.0, 'R', 'P', 107, false, 0.000000, 0.000000, 0.000000},
	{"Hermes", 2, 2, 1950.0, 'F', 'P', 150, true, -0.994997, -0.064998, -0.544999},
	{"Sabre", 2, 2, 1700.0, 'R', 'P', 175, true, -0.904999, -0.054999, -0.549996},
	{"Rustler", 1, 1, 5000.0, '4', 'P', 220, false, 0.000000, 0.000000, 0.000000},
	{"ZR-350", 2, 2, 1400.0, 'R', 'P', 188, true, -0.979999, 0.019997, -0.514998},
	{"Walton", 2, 2, 1850.0, '4', 'D', 119, true, -0.804997, 0.064998, -0.519999},
	{"Regina", 4, 4, 1500.0, 'F', 'P', 141, true, -0.854999, 0.090000, -0.454997},
	{"Comet", 2, 2, 1400.0, '4', 'P', 186, true, -0.879998, 0.000000, -0.489998},
	{"BMX", 1, 0, 100.0, 'R', 'P', 97, false, 0.000000, 0.000000, 0.000000},
	{"Burrito", 2, 4, 1900.0, 'R', 'P', 158, true, -0.989997, 0.000000, -0.759998},
	{"Camper", 3, 3, 1900.0, 'R', 'P', 124, true, -0.834999, -0.149995, -0.744997},
	{"Marquis", 1, 0, 5000.0, 'R', 'P', 64, false, 0.000000, 0.000000, 0.000000},
	{"Baggage", 1, 0, 1000.0, 'R', 'E', 100, true, -0.629998, 0.164995, -0.374998},
	{"Dozer", 1, 0, 10000.0, '4', 'D', 65, true, 0.000000, 0.000000, 0.000000},
	{"Maverick", 4, 4, 5000.0, '4', 'P', 181, false, 0.000000, 0.000000, 0.000000},
	{"News Chopper", 2, 2, 3500.0, '4', 'P', 170, false, 0.000000, 0.000000, 0.000000},
	{"Rancher", 2, 2, 2500.0, '4', 'P', 141, true, -1.019999, 0.109999, -0.679997},
	{"FBI Rancher", 4, 4, 3500.0, '4', 'P', 158, true, -1.054998, 0.125000, -0.604999},
	{"Virgo", 2, 2, 1700.0, 'R', 'P', 150, true, -0.874997, -0.009998, -0.569998},
	{"Greenwood", 4, 4, 1600.0, 'R', 'P', 142, true, -0.909999, 0.000000, -0.459998},
	{"Jetmax", 1, 0, 3000.0, 'R', 'P', 183, false, 0.000000, 0.000000, 0.000000},
	{"Hotring Racer", 2, 2, 1600.0, 'R', 'P', 217, true, -0.909999, -0.199999, -0.639998},
	{"Sandking", 2, 2, 2000.0, '4', 'P', 178, true, -1.024999, 0.184999, -0.809997},
	{"Blista Compact", 2, 2, 1000.0, 'F', 'P', 164, true, -0.854999, 0.029998, -0.469998},
	{"Police Maverick", 4, 4, 4500.0, '4', 'P', 190, false, 0.000000, 0.000000, 0.000000},
	{"Boxville", 4, 2, 5500.0, 'R', 'D', 109, true, -1.149999, 0.269998, -0.654999},
	{"Benson", 2, 2, 3500.0, 'R', 'D', 124, true, -0.969999, -1.404996, -0.199999},
	{"Mesa", 2, 2, 1300.0, '4', 'D', 142, true, -0.969999, 0.189998, -0.574998},
	{"RC Goblin", 1, 0, 100.0, '4', 'P', 30, true, 0.000000, 0.000000, 0.000000},
	{"Hotring Racer A", 2, 2, 1600.0, 'R', 'P', 217, true, -0.909999, 0.029998, -0.639998},
	{"Hotring Racer B", 2, 2, 1600.0, 'R', 'P', 217, true, -0.909999, -0.184999, -0.639998},
	{"Bloodring Banger", 2, 2, 2100.0, 'R', 'P', 175, true, -0.989997, -0.059999, -0.494998},
	{"Rancher (Lure)", 2, 2, 2500.0, '4', 'P', 141, true, -1.019999, 0.109999, -0.679997},
	{"Super GT", 2, 2, 1400.0, 'R', 'P', 181, true, -0.904999, -0.249999, -0.509998},
	{"Elegant", 4, 4, 2200.0, 'R', 'P', 167, true, -1.084998, -0.024999, -0.589999},
	{"Journey", 2, 3, 3500.0, 'R', 'D', 109, true, -1.334998, -0.424997, -0.979999},
	{"Bike", 1, 0, 100.0, 'R', 'P', 105, false, 0.000000, 0.000000, 0.000000},
	{"Mountain Bike", 1, 0, 100.0, 'R', 'P', 130, false, 0.000000, 0.000000, 0.000000},
	{"Beagle", 2, 2, 10000.0, '4', 'P', 133, false, 0.000000, 0.000000, 0.000000},
	{"Cropduster", 1, 1, 5000.0, '4', 'P', 115, false, 0.000000, 0.000000, 0.000000},
	{"Stuntplane", 1, 1, 5000.0, '4', 'P', 151, false, 0.000000, 0.000000, 0.000000},
	{"Tanker", 2, 2, 3800.0, 'R', 'D', 122, true, -0.969999, 1.669998, -1.174998},
	{"Roadtrain", 2, 2, 5000.0, 'R', 'D', 144, true, -1.454998, 0.439999, -1.854997},
	{"Nebula", 4, 4, 1400.0, 'F', 'P', 159, true, -0.989997, 0.024999, -0.584999},
	{"Majestic", 2, 2, 1400.0, 'R', 'P', 159, true, -0.959999, 0.004999, -0.554997},
	{"Buccaneer", 2, 2, 1700.0, 'R', 'P', 166, true, -1.049998, 0.109999, -0.439999},
	{"Shamal", 1, 0, 15000.0, '4', 'P', 272, false, 0.000000, 0.000000, 0.000000},
	{"Hydra", 1, 1, 9000.0, '4', 'P', 272, false, 0.000000, 0.000000, 0.000000},
	{"FCR-900", 2, 0, 500.0, 'R', 'P', 209, false, 0.000000, 0.000000, 0.000000},
	{"NRG-500", 2, 0, 400.0, 'R', 'P', 209, false, 0.000000, 0.000000, 0.000000},
	{"HPV1000", 2, 0, 500.0, 'R', 'P', 197, false, 0.000000, 0.000000, 0.000000},
	{"Cement Truck", 2, 2, 5500.0, 'R', 'D', 131, true, -0.689997, 1.489997, -1.319998},
	{"Towtruck", 2, 2, 3500.0, 'R', 'D', 162, true, -1.054998, 0.499998, -0.329997},
	{"Fortune", 2, 2, 1700.0, 'R', 'P', 159, true, -0.899999, 0.000000, -0.564997},
	{"Cadrona", 2, 2, 1200.0, 'R', 'P', 150, true, -0.944998, 0.154999, -0.419999},
	{"FBI Truck", 2, 2, 4000.0, '4', 'D', 178, true, -0.924996, 0.059999, -0.529999},
	{"Willard", 4, 4, 1800.0, 'R', 'P', 150, true, -0.934997, -0.109999, -0.429998},
	{"Forklift", 1, 0, 1000.0, 'F', 'E', 61, true, 0.000000, 0.000000, 0.000000},
	{"Tractor", 1, 0, 2000.0, 'R', 'D', 71, true, -0.144997, 0.314999, -0.444999},
	{"Combine Harvester", 1, 1, 8500.0, '4', 'D', 111, true, 0.000000, 0.000000, 0.000000},
	{"Feltzer", 2, 2, 1600.0, 'R', 'P', 169, true, -0.924996, -0.034999, -0.479999},
	{"Remington", 2, 2, 1800.0, 'R', 'P', 170, true, -0.984999, 0.164995, -0.564997},
	{"Slamvan", 2, 2, 1950.0, 'R', 'P', 160, true, -1.069998, -0.034999, -0.569998},
	{"Blade", 2, 2, 1500.0, 'R', 'P', 175, true, -0.954999, -0.019997, -0.579999},
	{"Freight", 2, 0, 5500.0, 'R', 'D', 0, false, 0.000000, 0.000000, 0.000000},
	{"Brown Streak", 2, 0, 5500.0, 'R', 'D', 0, false, 0.000000, 0.000000, 0.000000},
	{"Vortex", 1, 0, 1900.0, 'R', 'P', 101, true, -1.004999, -0.049998, -0.019997},
	{"Vincent", 4, 4, 1800.0, 'F', 'P', 150, true, -1.024999, -0.090000, -0.639998},
	{"Bullet", 2, 2, 1200.0, 'R', 'P', 205, true, -0.904999, 0.000000, -0.414999},
	{"Clover", 2, 2, 1600.0, 'R', 'P', 166, true, -0.894999, 0.014999, -0.539999},
	{"Sadler", 2, 2, 1700.0, '4', 'D', 152, true, -0.904999, 0.009998, -0.409999},
	{"Firetruck (ladder variant)", 2, 2, 6500.0, 'R', 'D', 150, true, -1.089998, 0.000000, -0.709999},
	{"Hustler", 2, 2, 1700.0, 'R', 'P', 148, true, -0.939997, -0.029998, -0.564997},
	{"Intruder", 4, 4, 1800.0, 'R', 'P', 150, true, -1.039999, -0.100000, -0.474999},
	{"Primo", 4, 4, 1600.0, 'R', 'P', 144, true, -0.884998, 0.059999, -0.479999},
	{"Cargobob", 2, 2, 20000.0, '4', 'P', 158, false, -1.769997, 1.484997, -1.774996},
	{"Tampa", 2, 2, 1700.0, 'R', 'P', 155, true, -0.949998, 0.104997, -0.439999},
	{"Sunrise", 4, 4, 1600.0, 'F', 'P', 146, true, -1.089998, -0.059999, -0.554997},
	{"Merit", 4, 4, 1800.0, 'R', 'P', 159, true, -0.964999, 0.004999, -0.564997},
	{"Utility Van", 2, 2, 2600.0, 'R', 'D', 122, true, -1.034999, 0.749997, -0.254999},
	{"Nevada", 1, 0, 25000.0, '4', 'P', 193, false, 0.000000, 0.000000, 0.000000},
	{"Yosemite", 2, 2, 3000.0, 'R', 'P', 145, true, -1.109997, 0.009998, -0.534999},
	{"Windsor", 2, 2, 1500.0, 'R', 'P', 160, true, -0.754998, 0.000000, -0.464998},
	{"Monster A", 2, 2, 5000.0, '4', 'P', 111, true, -1.119999, 0.000000, 0.184999},
	{"Monster B", 2, 2, 5000.0, '4', 'P', 111, true, -1.129999, 0.044998, 0.074997},
	{"Uranus", 2, 2, 1400.0, 'R', 'P', 157, true, -0.894999, -0.089997, -0.374998},
	{"Jester", 2, 2, 1500.0, 'F', 'P', 179, true, -0.964999, 0.000000, -0.444999},
	{"Sultan", 4, 4, 1400.0, '4', 'P', 171, true, -1.004999, 0.054999, -0.414999},
	{"Stratum", 4, 4, 1800.0, 'R', 'P', 155, true, -0.919999, 0.129997, -0.574998},
	{"Elegy", 2, 2, 1500.0, 'R', 'P', 179, true, -0.909999, 0.119998, -0.404998},
	{"Raindance", 2, 2, 10000.0, '4', 'P', 160, false, 0.000000, 0.000000, 0.000000},
	{"RC Tiger", 1, 0, 100.0, '4', 'E', 89, true, 0.000000, 0.000000, 0.000000},
	{"Flash", 2, 2, 1400.0, 'F', 'P', 166, true, -0.824998, 0.000000, -0.414999},
	{"Tahoma", 4, 4, 1800.0, 'R', 'P', 161, true, -0.989997, -0.049998, -0.479999},
	{"Savanna", 4, 2, 1500.0, 'R', 'P', 175, true, -1.089998, 0.309998, -0.609999},
	{"Bandito", 1, 0, 1000.0, 'R', 'P', 148, true, -0.334998, 0.100000, -0.374998},
	{"Freight Flat Trailer", 1, 0, 5500.0, 'R', 'D', 0, false, 0.000000, 0.000000, 0.000000},
	{"Brown Streak Trailer", 1, 0, 5500.0, 'R', 'D', 0, false, 0.000000, 0.000000, 0.000000},
	{"Kart", 1, 0, 300.0, 'R', 'P', 94, true, 0.000000, 0.000000, 0.000000},
	{"Mower", 1, 0, 800.0, 'R', 'P', 61, true, 0.000000, 0.000000, 0.000000},
	{"Dune", 2, 2, 10000.0, '4', 'P', 111, true, 0.000000, 0.000000, 0.000000},
	{"Sweeper", 1, 2, 800.0, 'R', 'P', 61, true, 0.000000, 0.000000, 0.000000},
	{"Broadway", 2, 2, 1700.0, 'R', 'P', 159, true, -0.924996, 0.004999, -0.334998},
	{"Tornado", 2, 2, 1700.0, 'R', 'P', 159, true, -1.019999, -0.140000, -0.419999},
	{"AT-400", 2, 0, 60000.0, '4', 'P', 250, false, 0.000000, 0.000000, 0.000000},
	{"DFT-30", 2, 2, 5500.0, 'R', 'D', 131, true, -1.429998, -0.649999, -0.879998},
	{"Huntley", 4, 4, 2500.0, '4', 'P', 159, true, -1.014999, 0.000000, -0.484999},
	{"Stafford", 4, 4, 2200.0, 'R', 'P', 154, true, -1.089998, 0.014999, -0.474999},
	{"BF-400", 2, 0, 500.0, 'R', 'P', 200, false, 0.000000, 0.000000, 0.000000},
	{"Newsvan", 4, 3, 1900.0, 'R', 'D', 137, true, -0.984999, -0.194995, -0.709999},
	{"Tug", 1, 2, 800.0, 'R', 'P', 86, true, -0.674996, 0.259999, 0.129997},
	{"Petrol Trailer", 1, 0, 3800.0, 'R', 'D', 0, true, 0.000000, 0.000000, 0.000000},
	{"Emperor", 4, 4, 1800.0, 'R', 'P', 154, true, -1.019999, -0.009998, -0.354999},
	{"Wayfarer", 2, 0, 800.0, 'R', 'P', 211, false, 0.000000, 0.000000, 0.000000},
	{"Euros", 2, 2, 1400.0, '4', 'P', 166, true, -1.009999, -0.064998, -0.534999},
	{"Hotdog", 2, 2, 5500.0, 'R', 'D', 109, true, -1.374997, 0.000000, -0.664999},
	{"Club", 2, 2, 1400.0, 'F', 'P', 164, true, -0.909999, 0.000000, -0.359999},
	{"Freight Box Trailer", 1, 0, 5500.0, 'R', 'D', 0, false, 0.000000, 0.000000, 0.000000},
	{"Article Trailer 3", 1, 0, 3800.0, 'R', 'D', 0, true, 0.000000, 0.000000, 0.000000},
	{"Andromada", 2, 0, 40000.0, '4', 'P', 266, false, 0.000000, 0.000000, 0.000000},
	{"Dodo", 2, 2, 5000.0, '4', 'P', 135, false, 0.000000, 0.000000, 0.000000},
	{"RC Cam", 1, 0, 100.0, '4', 'E', 62, true, 0.000000, 0.000000, 0.000000},
	{"Launch", 1, 0, 2200.0, 'R', 'P', 118, false, 0.000000, 0.000000, 0.000000},
	{"Police Car (LSPD)", 4, 4, 1600.0, 'R', 'P', 177, true, -0.974999, 0.000000, -0.469998},
	{"Police Car (SFPD)", 4, 4, 1600.0, 'R', 'P', 177, true, -0.969999, 0.000000, -0.464998},
	{"Police Car (LVPD)", 4, 4, 1600.0, 'R', 'P', 177, true, -1.004999, -0.014999, -0.414999},
	{"Ranger", 2, 2, 2500.0, '4', 'D', 159, true, -1.019999, 0.115000, -0.684997},
	{"Picador", 2, 2, 1600.0, 'R', 'D', 152, true, -0.959999, 0.204998, -0.499998},
	{"S.W.A.T.", 2, 0, 5000.0, '4', 'D', 111, true, 0.000000, 0.000000, 0.000000},
	{"Alpha", 2, 2, 1500.0, 'R', 'P', 171, true, -1.024999, 0.000000, -0.549996},
	{"Phoenix", 2, 2, 1500.0, 'R', 'P', 173, true, -0.954999, 0.034999, -0.629998},
	{"Glendale (destroyed)", 4, 4, 1600.0, 'R', 'P', 148, true, -0.989997, -0.064998, -0.489998},
	{"Sadler (destroyed)", 2, 2, 1700.0, '4', 'D', 152, true, -0.904999, 0.009998, -0.409999},
	{"Baggage Trailer A", 1, 0, 1000.0, 'R', 'E', 0, true, 0.000000, 0.000000, 0.000000},
	{"Baggage Trailer B", 1, 0, 1000.0, 'R', 'E', 0, true, 0.000000, 0.000000, 0.000000},
	{"Tug Stairs Trailer", 1, 0, 1000.0, 'R', 'E', 0, true, 0.000000, 0.000000, 0.000000},
	{"Boxville (burglary)", 4, 2, 5500.0, 'R', 'D', 109, true, -1.149999, 0.269998, -0.654999},
	{"Farm Trailer", 1, 0, 400.0, 'R', 'E', 0, true, 0.000000, 0.000000, 0.000000},
	{"Utility Trailer", 1, 0, 1000.0, 'R', 'E', 0, true, 0.000000, 0.000000, 0.000000}
};

Valid_Vehicle_Nitro(modelid)
{
    new idx = modelid - 400;
	if (0 <= idx <= 211)
	{
        if (vSync_VehicleInfo[idx][Nitro] == false)
		{
	    	return 0;
		}
		return 1;
	}
	return 0;
}

Valid_Vehicle_Neon(modelid)
{
    new idx = modelid - 400;
	if (0 <= idx <= 211)
	{
        if (vSync_VehicleInfo[idx][NeonOffsetX] == 0.0 && vSync_VehicleInfo[idx][NeonOffsetY] == 0.0 && vSync_VehicleInfo[idx][NeonOffsetZ] == 0.0)
		{
	    	return 0;
		}
		return 1;
	}
	return 0;
}

Colocar_Neon(id, vehicleid)
{
	if (InfoVehiculo[id][vModeloNeon] == 0) return 1;
	if (InfoVehiculo[id][vOnNeon] == 0) return 1;
	new idx = GetVehicleModel(vehicleid) - 400;
	if (0 <= idx <= 211)
	{
		if (IsValidDynamicObject(InfoVehiculo[id][vObjetoNeonL])) DestroyDynamicObject(InfoVehiculo[id][vObjetoNeonL]);
		if (IsValidDynamicObject(InfoVehiculo[id][vObjetoNeonR])) DestroyDynamicObject(InfoVehiculo[id][vObjetoNeonR]);
		InfoVehiculo[id][vObjetoNeonL] = CreateDynamicObject(InfoVehiculo[id][vModeloNeon], 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, GetVehicleVirtualWorld(vehicleid), -1);
		InfoVehiculo[id][vObjetoNeonR] = CreateDynamicObject(InfoVehiculo[id][vModeloNeon], 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, GetVehicleVirtualWorld(vehicleid), -1);
		AttachDynamicObjectToVehicle(InfoVehiculo[id][vObjetoNeonL], vehicleid, vSync_VehicleInfo[idx][NeonOffsetX], vSync_VehicleInfo[idx][NeonOffsetY], vSync_VehicleInfo[idx][NeonOffsetZ], 0.0, 0.0, 0.0);
		AttachDynamicObjectToVehicle(InfoVehiculo[id][vObjetoNeonR], vehicleid, -vSync_VehicleInfo[idx][NeonOffsetX], vSync_VehicleInfo[idx][NeonOffsetY], vSync_VehicleInfo[idx][NeonOffsetZ], 0.0, 0.0, 0.0);
		return 1;
	}
	return 0;
}

Colocar_Objeto(id, vehicleid)
{
	Loop(x, 5, 0) if (InfoVehiculo[id][vObjModelo][x] != 0)
	{
		if (IsValidDynamicObject(InfoVehiculo[id][vTuneo][x])) DestroyDynamicObject(InfoVehiculo[id][vTuneo][x]);
		InfoVehiculo[id][vTuneo][x] = CreateDynamicObject(InfoVehiculo[id][vObjModelo][x], 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, GetVehicleVirtualWorld(vehicleid), -1);
		AttachDynamicObjectToVehicle(InfoVehiculo[id][vTuneo][x], vehicleid, InfoVehiculo[id][vObjPosX][x], InfoVehiculo[id][vObjPosY][x], InfoVehiculo[id][vObjPosZ][x], InfoVehiculo[id][vObjRotX][x], InfoVehiculo[id][vObjRotY][x], InfoVehiculo[id][vObjRotZ][x]);
	}
}

// Variables de vehículos En General.
new IntentarPuente[MAX_PLAYERS]; // Uso del CMD /puente.
new Intentar[MAX_PLAYERS];
new AntiAbuso[MAX_PLAYERS]; // JOBS.
new HaceAbuso[MAX_PLAYERS]; // NEW CAHNNEL.
new arr_Engine[MAX_VEHICLES char];
new arr_Towing[MAX_PLAYERS];
new RefuelingVehicle[MAX_PLAYERS];
new RefuelingVehicleTimer[MAX_PLAYERS];
new PrecioGasolinaVeh[MAX_PLAYERS];
new QFA[MAX_PLAYERS][24];
new Float:TeleportDest[MAX_PLAYERS][3];
new FishCount[MAX_PLAYERS];
//*******************Sistema de reportes*******************
enum reportinfo
{
	HasBeenUsed,
	Report[128],
	ReportFrom,
	CheckingReport,
 	TimeToExpire,
	BeingUsed,
	ReportExpireTimer,
	ReplyTimerr
}
new Reports[MAX_REPORTS][reportinfo];

new JustReported[MAX_PLAYERS];
new JustDuda[MAX_PLAYERS];
new JustAfk[MAX_PLAYERS];

new NewbieTimer[MAX_PLAYERS];
new VIPTimer[MAX_PLAYERS];
new JetPack[MAX_PLAYERS];
new PuedeD[MAX_PLAYERS];
new ShowRules[MAX_PLAYERS];
new RulesTime[MAX_PLAYERS];

//points:

new Float:SAEMPrisonSpawns[4][3] =
{
	{181.6174,1953.3961,3867.2429},
	{190.7607,1951.7330,3867.2358},
	{199.2319,1951.4128,3867.2358},
	{173.4761,1951.0363,3867.2429}
};

new Float:PrisonDillmore[2][3] =
{
	{1444.55,-1512.901000,1604.03},
	{318.7299,317.0638,999.1484}
};

new Float:FBIPrisonSpawns[5][3] =
{
	{1430.4956,-1569.5317,4340.1563},
	{1429.2046,-1551.8027,4340.1563},
	{1422.8323,-1551.3651,4340.1563},
	{1415.3214,-1571.1622,4340.1563},
	{1422.9600,-1570.5835,4340.1563}
};

new Float:LSPDPrisonSpawns[10][3] =
{
	{1558.819458,-1642.5,4985.22},
	{1562.030151,-1642.5,4985.22},
	{1565.201049,-1642.5,4985.22},
	{1568.456665,-1642.5,4985.22},
	{1571.5,-1646.192382,4985.22},
	{1571.5,-1650.072753,4985.22},
	{1567.978027,-1654.2,4985.22},
	{1564.464477,-1654.2,4985.22},
	{1561.536865,-1654.2,4985.22},
	{1557.713378,-1653.2,4985.22}
};

new WeaponNames[47][] = // Armas en mano.
{
	"Puños","brass knuckles","golf club","nitestick","knife","baseball bat","shovel","palo de billar","katana","chainsaw","purple dildo","small white vibrator","large white vibrator","silver vibrator",
	"bouquet of flowers","cane","grenade","tear gas grenade","molotov cocktail","jetpack"," "," ","Colt .45","silenced Colt .45","Desert Eagle","12-gauge shotgun","sawn-off shotgun","SPAS-12",
	"Micro Uzi","MP5","AK-47","M4A1","TEC-9","rifle","sniper rifle","rocket launcher","heatseeker","flamethrower","minigun","satchel charge","detonator","spray can","fire extinguisher",
	"camera","nightvision goggles", "thermal goggles","parachute"
};

dar_chaleco(playerid, Float: armour) // Fijar
{
	if (InfoPersonaje[playerid][pChaleco] < 101.0) InfoPersonaje[playerid][pChaleco] = 100.0;

	InfoPersonaje[playerid][pChaleco] = armour; SetPlayerArmour(playerid, armour);

	guardar_float_mysql("personajes", "Chaleco", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pChaleco]);
	return 1;
}

dar_vida(playerid, Float: hp) // Fijar
{
	if (InfoPersonaje[playerid][pVida] < 101.0) InfoPersonaje[playerid][pVida] = 100.0;

	InfoPersonaje[playerid][pVida] = hp; SetPlayerHealth(playerid, hp);

	guardar_float_mysql("personajes", "Vida", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pVida]);
	return 1;
}

quitar_vida(playerid, Float: sg1) // Quitar
{
	new Float: sg0 = InfoPersonaje[playerid][pVida];
	InfoPersonaje[playerid][pVida] = sg0+sg1;
	if (InfoPersonaje[playerid][pVida] <= 15.0)
	{
	    if (GetPVarInt(playerid, "EstaCrack") == 0)
	    {
			SetPlayerHealth(playerid, 25.0);
			SetPVarInt(playerid, "EstaCrack", 1);
			estado_xdxdxd(playerid, 1);
		}
		else estado_xdxdxd(playerid, 2);
		return 1;
	}
	SetPlayerHealth(playerid, sg0+sg1);

	guardar_float_mysql("personajes", "Vida", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pVida]);
	return 1;
}

//*******************Variables*******************
new BarObject[MAX_PLAYERS]; // ID del Objeto.
new ObjectBar[MAX_PLAYERS]; // Objeto.
//*******************
new InviteOffer[MAX_PLAYERS];
new InviteFaction[MAX_PLAYERS];
new InviteFamily[MAX_PLAYERS];
new RefillOffer[MAX_PLAYERS];
new RefillPrice[MAX_PLAYERS];
new JailPrice[MAX_PLAYERS];
new RepairOffer[MAX_PLAYERS];
new RepairCar[MAX_PLAYERS];
new RepairPrice[MAX_PLAYERS];
//*******************Vender Casa*******************
new HouseOffer[MAX_PLAYERS];
new House[MAX_PLAYERS];
new HousePrice[MAX_PLAYERS];

//*******************EMS*******************
new EMSCallTime[MAX_PLAYERS];
new EMSAccepted[MAX_PLAYERS];
//*******************LSPD int*******************
new courtbuttons[5], courtgates[2];
new fen1,fen2,fen3,fen4,fen5,fen6, JDoor1, JDoor2, JDoor3, JDoor4, JDoor5, JDoor6;
// Buttons Poder Judicial.
new PJBT, PJBT2, PJBT3, PJDOOR, PJDOOR2, PJCELDA, PJCELDA2, PJCELDA3, PJCELDA4; // Botones, puerta de los botones y celdas, 2 arriba y 2 abajo.

//new rejaALEPH, rejaALEPH2;
//*******************LSPD Portones*******************
new porton_lspd, saem1, saem2, saem3, saemSF, saemLV, saemLV2;
//*******************GIFTS*******************
new dynamicgift;
new Text3D:dynamicgift3DText;
//*******************FBI Int*******************
new FBILobbyRight, FBILobbyRightBTN[2] ;
//****************************Rejas Peaje****************************
new peaje1, peaje2;
//*******************
new Carnada[MAX_PLAYERS];
new Lineas[MAX_PLAYERS];
new Barricade[MAX_BARRICADES];
//*******************Mats Seller*******************
new MatsOffer[MAX_PLAYERS];
new MatsPrice[MAX_PLAYERS];
new MatsAmount[MAX_PLAYERS];
new VIPOffer[MAX_PLAYERS];
new VIPPrice[MAX_PLAYERS];
new FOffer[MAX_PLAYERS];
new FPrice[MAX_PLAYERS];
new FAmount[MAX_PLAYERS];
//*******************
new See_MP[MAX_PLAYERS];
new See_FRC[MAX_PLAYERS];
new Blinded[MAX_PLAYERS], Tied[MAX_PLAYERS];
new Rope[MAX_PLAYERS];
new Editing[MAX_PLAYERS];
//*******************Security comands spam*******************

new RequestingBackup[MAX_PLAYERS];
new Seatbelt[MAX_PLAYERS];
new FreezeLast[MAX_PLAYERS];
new Misile_Launcher;
new PuertaH1;
new PuertaH2;
new HaciaArriba = 0;
new HaciaAbajo = 0;
new Tax = 0;
new TaxValue = 0;
new Jackpot = 0;
new Blood = 1000;
new Fuel = 200;

new RStep[MAX_PLAYERS];
new TakingLesson[MAX_PLAYERS];
new PlayersChannel[MAX_PLAYERS];
new Paquetes[MAX_PLAYERS];
new TicketOffer[MAX_PLAYERS];
new TicketMoney[MAX_PLAYERS];
new PrecioLicencia[MAX_PLAYERS];
new NombreLicencia[MAX_PLAYERS];
new Autorizado[MAX_PLAYERS];
new PlayerDrunk[MAX_PLAYERS];
new PlayerDrunkTime[MAX_PLAYERS];


new player_asesino[MAX_PLAYERS];
new player_weapon[MAX_PLAYERS];

forward estado_xdxdxd(playerid, type);
public estado_xdxdxd(playerid, type)
{
	DeletePVar(playerid, "en_emergencias");
	SetPVarInt(playerid, "PlayerCuffed", 0);
	switch (type)
	{
	    case 1:
	    {
			new killerid = player_asesino[playerid];
			new reason = player_weapon[playerid];
			// /qfa
			if (IsPlayerConnected(killerid)) { alm(QFA[playerid], NombreOriginal(killerid)); }
			//aviso muerte staff
			new gformat[256], dead[20];
			switch(reason)
			{
				case 54:                    {dead="Suicidio";}
				case 49:                    {dead="Atropellado";}
				case 50:                    {dead="Heli-Kill";}
				case 53:                    {dead="Ahogado";}
				case 255: 					{dead="Quemado/Bug";}
				case 51:    				{dead="Explotado";}
				case 47:                    {dead="Fake Pistol";}
				default:                   {dead="Desconocida";}
			}
			InfoPersonaje[playerid][pBalaCabeza] = 0;
			InfoPersonaje[playerid][pMuerto] = 0;
			if (reason >= 0 && reason <= 42)
			{
				format(gformat, sizeof gformat, "{FF2F2F}[AdmWarnig]{FFFFFF} %s(%d) mató a %s(%d). Weapon: %s", NombreOriginal(killerid), killerid, NombreOriginal(playerid), playerid, WeaponNames[reason]);
				SendAdminMessage(0xFFFFFFFF, gformat);
			}
			else if (reason >= 47 && reason <= 255) // Anteriormente 54.
			{
				format(gformat, sizeof gformat, "{FF2F2F}[AdmWarnig]{FFFFFF} %s(%d) murió por posible bug/muerte sin rol. Razón: %s", NombreOriginal(playerid), playerid, dead);
				SendAdminMessage(0xFFFFFFFF, gformat);
			}
			//new
			new query[195], Float: X, Float: Y, Float: Z, Interior = GetPlayerInterior(playerid), World = GetPlayerVirtualWorld(playerid), qobjs = 0;
			GetPlayerPos(playerid, X, Y, Z);
			if (GetPlayerState(playerid) == PLAYER_STATE_ONFOOT)
			{
				ActualizarManos(playerid);
				if (InfoPersonaje[playerid][pManoDerecha] != 0)
				{
					new ManoDer = InfoPersonaje[playerid][pManoDerecha], ManoDerCant = InfoPersonaje[playerid][pManoDerechaCant];
					ResetPlayerWeapons(playerid);
					InfoPersonaje[playerid][pManoDerecha] = 0;
					InfoPersonaje[playerid][pManoDerechaCant] = 0;
					RemovePlayerAttachedObject(playerid, 7);
					tirar_objeto(ManoDer, ManoDerCant, X, Y, Z, World, Interior, 0);
					Streamer_Update(playerid);
					mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Mano_derecha = 0, Cantidad_mano_derecha = 0 WHERE ID = '%d'", InfoPersonaje[playerid][pID]);
					mysql_tquery(DBInsanity, query);
                    qobjs++;
				}
				if (InfoPersonaje[playerid][pManoIzquierda] != 0)
				{
					new ManoDer = InfoPersonaje[playerid][pManoIzquierda], ManoDerCant = InfoPersonaje[playerid][pManoIzquierdaCant];
					ResetPlayerWeapons(playerid);
					InfoPersonaje[playerid][pManoIzquierda] = 0;
					InfoPersonaje[playerid][pManoIzquierdaCant] = 0;
					RemovePlayerAttachedObject(playerid, 8);
					tirar_objeto(ManoDer, ManoDerCant, X, Y, Z, World, Interior, 0);
					Streamer_Update(playerid);
					mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Mano_izquierda = 0, Cantidad_mano_izquierda = 0 WHERE ID = '%d'", InfoPersonaje[playerid][pID]);
					mysql_tquery(DBInsanity, query);
                    qobjs++;
				}
			}
			//
			PlayerDrunk[playerid] = 0;
			PlayerDrunkTime[playerid] = 0;
			Autorizado[playerid] = 0;
			//animacion
			if (gPlayerUsingLoopingAnim[playerid] == 1)
			{
		        gPlayerUsingLoopingAnim[playerid] = 0;
		        TextDrawHideForPlayer(playerid, txtAnimHelper);
			}
			//en veh
			if (IsPlayerInAnyVehicle(playerid))
			{
				RemovePlayerFromVehicle(playerid);
				SetPlayerPos(playerid, X, Y+1, Z);
			}
			SetPVarInt(playerid, "mueltito", 0);
			ApplyAnimation(playerid, "WUZI", "CS_Dead_Guy", 4.0, 0, 0, 0, 1, 0, 1);
			//label's
			ActualizarEstado(playerid);
			//mensaje
			SendClientMessage(playerid, 0xFF6666FF, "Has sido brutalmente herido, puedes usar /reaparecer en 240 segundos.");
			if (qobjs != 0) SendClientMessage(playerid, 0xFF6666FF, "Perdiste los objetos que tenías en tus manos, alguien más los puede recoger.");
			//Vida
			InfoPersonaje[playerid][pVida] = 70;
			dar_chaleco(playerid, 0);
			timer_herido[playerid] = 240;
			mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Hospital = 1, Vida = '%f', BalaCabeza = 0, Muerto = 0 WHERE ID = '%d'", InfoPersonaje[playerid][pVida], InfoPersonaje[playerid][pID]);
			mysql_tquery(DBInsanity, query);
		}
		case 2:
		{
			foreach(Player, i) if (EMSAccepted[i] != 999)
			{
				if (EMSAccepted[i] == playerid)
				{
					EMSAccepted[i] = 999;
					GameTextForPlayer(i, "~w~Paciente~n~~r~ha muerto", 5000, 1);
					EMSCallTime[i] = 0;
					DisablePlayerCheckpoint(i);
				}
			}
			SetPVarInt(playerid, "mueltito", 1);
			ActualizarEstado(playerid);
			timer_herido[playerid] = 120;
			if (MensajeMuelto[playerid] == 0) SendClientMessage(playerid, 0x0CA7B8FF, "Acabas de caer en estado de muerte, puedes usar /reaparecer en 120 segundos.");
			MensajeMuelto[playerid] = 1;
			ApplyAnimation(playerid, "WUZI", "CS_Dead_Guy", 4.0, 0, 0, 0, 1, 0, 1);
		}
	}
	return 1;
}

ActualizarEstado(playerid)
{
	DestroyDynamic3DTextLabelEx(InfoPersonaje[playerid][pNameTag]);
	if (GetPVarInt(playerid, "EstaCrack") != 0)
	{
		if (GetPVarInt(playerid, "mueltito") == 1)
		{
			InfoPersonaje[playerid][pNameTag] = CreateDynamic3DTextLabel("(( ESTE JUGADOR ESTÁ MUERTO ))", 0xFF6347FF, 0, 0, 0.5, 20.0, playerid, INVALID_VEHICLE_ID, 1, -1, -1, -1, 100.0);
		}
		else
		{
			new tag_herido[150];
			format(tag_herido, sizeof tag_herido, "(( Este jugador está herido, para\nmás información /heridas %d ))", playerid);
			InfoPersonaje[playerid][pNameTag] = CreateDynamic3DTextLabel(tag_herido, 0xFF6347FF, 0, 0, 0.5, 20.0, playerid, INVALID_VEHICLE_ID, 1, -1, -1, -1, 100.0);
		}
	}
	else
	{
		if (!isnull(InfoPersonaje[playerid][pEstadoYo])) //quitar
		{
			InfoPersonaje[playerid][pNameTag] = CreateDynamic3DTextLabel(InfoPersonaje[playerid][pEstadoYo], 0x00A5AAFF, 0, 0, 0.5, 20.0, playerid, INVALID_VEHICLE_ID, 1, -1, -1, -1, 100.0);
		}
	}
}

GoToHospital(playerid)
{
	MensajeMuelto[playerid] = 0;
	KillEMSQueue(playerid);
	AvisoPD[playerid] = 0;
	dar_vida(playerid, 100);
	ResetPlayerDamages(playerid);
	if (InfoPersonaje[playerid][pDrogaTipo] != 0) EndEffectDroug(playerid, InfoPersonaje[playerid][pDrogaTipo]);
	if (InfoPersonaje[playerid][pTipoSpawn] == 1)
	{
		if (InfoPersonaje[playerid][pCasa1] != -1)
		{
			new idcasa = InfoPersonaje[playerid][pCasa1];
			SendClientMessage(playerid, COLOR_YELLOW, "[VIP]:{FFFFFF} Te llevaron a tu casa (1) por la caracteristica Gold activada.");
			LoadObjects(playerid);
			SetPosEx(playerid, InfoCasa[idcasa][cInteriorX], InfoCasa[idcasa][cInteriorY], InfoCasa[idcasa][cInteriorZ], InfoCasa[idcasa][cInteriorR], InfoCasa[idcasa][cInteriorInt], InfoCasa[idcasa][cInteriorVW], 1);
			SetCameraBehindPlayer(playerid);
			guardar_int_mysql("personajes", "Hospital", InfoPersonaje[playerid][pID], 0);
			return 1;
		}
		if (InfoPersonaje[playerid][pCasa2] != -1)
		{
			new idcasa = InfoPersonaje[playerid][pCasa2];
			SendClientMessage(playerid, COLOR_YELLOW, "[VIP]:{FFFFFF} Te llevaron a tu casa (2) por la caracteristica Gold activada.");
			LoadObjects(playerid);
			SetPosEx(playerid, InfoCasa[idcasa][cInteriorX], InfoCasa[idcasa][cInteriorY], InfoCasa[idcasa][cInteriorZ], InfoCasa[idcasa][cInteriorR], InfoCasa[idcasa][cInteriorInt], InfoCasa[idcasa][cInteriorVW], 1);
			SetCameraBehindPlayer(playerid);
			guardar_int_mysql("personajes", "Hospital", InfoPersonaje[playerid][pID], 0);
			return 1;
		}
	}
	StopAudioStreamForPlayer(playerid);
	new Float: hosX, Float: hosY, Float: hosZ, Float: hosR, hosInt, hosVW;
	if (InfoPersonaje[playerid][pMiembro] != 0)
	{
		new id = InfoPersonaje[playerid][pMiembro];
		if (InfoFaccion[id][fSpawnX] != 0.0)
		{
			hosX = InfoFaccion[id][fSpawnX];
			hosY = InfoFaccion[id][fSpawnY];
			hosZ = InfoFaccion[id][fSpawnZ];
			hosR = InfoFaccion[id][fSpawnR];
			hosInt = InfoFaccion[id][fSpawnInt];
			hosVW = InfoFaccion[id][fSpawnVW];
    		SendClientMessage(playerid, COLOR_WHITE, "Los gastos del seguro médico son de {B00000}$250{FFFFFF}, que tengas buen día.");
	    	GivePlayerCash(playerid, -250, "seguro médico facción");
		}
		else
		{
			hosX = 1114.10;
			hosY = -1319.2;
			hosZ = 13.76;
			hosR = 270;
			hosInt = 0;
			hosVW = 0;
    		SendClientMessage(playerid, COLOR_WHITE, "Los gastos del seguro médico son de {B00000}$500{FFFFFF}, que tengas buen día.");
    		GivePlayerCash(playerid, -500, "seguro médico civil");
		}
	}
	else
	{
		hosX = 1114.10;
		hosY = -1319.2;
		hosZ = 13.76;
		hosR = 270;
		hosInt = 0;
		hosVW = 0;
    	SendClientMessage(playerid, COLOR_WHITE, "Los gastos del seguro médico son de {B00000}$500{FFFFFF}, que tengas buen día.");
    	GivePlayerCash(playerid, -500, "seguro médico civil");
	}
	SetPosEx(playerid, hosX, hosY, hosZ, hosR, hosInt, hosVW, 1);
	SetCameraBehindPlayer(playerid);
	guardar_int_mysql("personajes", "Hospital", InfoPersonaje[playerid][pID], 0);
	return 1;
}

new Condom[MAX_PLAYERS];
new MoneyMessage[MAX_PLAYERS];
new OnDuty[MAX_PLAYERS];
new gLastCar[MAX_PLAYERS];
new Spectate[MAX_PLAYERS];
new GettingSpectated[MAX_PLAYERS];
new Spectating[MAX_PLAYERS];

new HidePM[MAX_PLAYERS];

new ghour = 0;
new gminute = 0;
new gsecond = 0;
new timeshift = -1;
new shifthour;
new txtcost = 1;

new OwnableCarOffer[MAX_PLAYERS];
new OwnableCarID[MAX_PLAYERS];
new OwnableCarPrice[MAX_PLAYERS];
new BlindFold[MAX_PLAYERS];
//********************************
new VehicleWindows[MAX_VEHICLES] = 0;
new AdminDuty[MAX_PLAYERS];
new PlayerNeedsHelp[MAX_PLAYERS];
new RegText[MAX_PLAYERS];
new RegConfig[MAX_PLAYERS];

//*******************Factura*******************
new Facturing[MAX_PLAYERS];
new fPay[MAX_PLAYERS];
new fDest[MAX_PLAYERS];
new fFacturer[MAX_PLAYERS];

new Refueling[MAX_PLAYERS];

stock Float:GetDistanceBetweenPlayers(p1,p2)
{
	new Float:x1,Float:y1,Float:z1,Float:x2,Float:y2,Float:z2;
	if(!IsPlayerConnected(p1) || !IsPlayerConnected(p2))
	{
		return -1.00;
	}
	GetPlayerPos(p1,x1,y1,z1);
	GetPlayerPos(p2,x2,y2,z2);
	return floatsqroot(floatpower(floatabs(floatsub(x2,x1)),2)+floatpower(floatabs(floatsub(y2,y1)),2)+floatpower(floatabs(floatsub(z2,z1)),2));
}

stock split(const strsrc[], strdest[][], delimiter)
{
	new i, li;
	new aNum;
	new len;
	while(i <= strlen(strsrc)){
	    if(strsrc[i]==delimiter || i==strlen(strsrc)){
	        len = strmid(strdest[aNum], strsrc, li, i, 128);
	        strdest[aNum][len] = 0;
	        li = i+1;
	        aNum++;
		}
		i++;
	}
	return 1;
}

enum Spikes
{
	Float:sX,
	Float:sY,
	Float:sZ,
	sObjectID,
	sDeployedBy[MAX_PLAYER_NAME],
	sDeployedAt[MAX_ZONE_NAME]
}

new SpikeStrips[10][Spikes];

enum pSpec
{
	Float:Coords[3],
	Float:sPx,
	Float:sPy,
	Float:sPz,
	sPint,
	sLocal,
	sCam,
};

new Unspec[MAX_PLAYERS][pSpec];

enum pFishing
{
	pFish1[20],
	pFish2[20],
	pFish3[20],
	pFish4[20],
	pFish5[20],
	pWeight1,
	pWeight2,
	pWeight3,
	pWeight4,
	pWeight5,
	pFid1,
	pFid2,
	pFid3,
	pFid4,
	pFid5,
	pLastFish,
	pFishID,
	pLastWeight,
};
new Fishes[MAX_PLAYERS][pFishing];

new FishNamesNumber = 22;
new FishNames[22][20] = {
{"Jacket"},
{"Amberjack"},
{"Grouper"},
{"Red Snapper"},
{"Pants"},
{"Trout"},
{"Blue Marlin"},
{"Can"},
{"Mackeral"},
{"Sea Bass"},
{"Bracko"},
{"Pike"},
{"Sail Fish"},
{"Garbage"},
{"Tuna"},
{"Eel"},
{"Dolphin"},
{"Shark"},
{"Turtle"},
{"Catfish"},
{"Pinesh"},
{"Swordfish"}
};


//**************************************
//*******************Vehicle Names*******************

new OneSeatVehicles[38] =
{
    425, 430, 432, 441, 446, 448, 452, 453,
	454, 464, 465, 472, 473, 476, 481, 484,
	485, 486, 493, 501, 509, 510, 519, 520,
	530, 531, 532, 539, 553, 564, 568, 571,
	572, 574, 583, 592, 594, 595
};

new VehicleName[212][] = {
	"Landstalker","Bravura","Buffalo","Linerunner","Perennial","Sentinel","Dumper","Firetruck","Trashmaster","Stretch",
	"Manana","Infernus","Voodoo","Pony","Mule","Cheetah","Ambulance","Leviathan","Moonbeam","Esperanto","Taxi",
	"Washington","Bobcat","Mr Whoopee","BF Injection","Hunter","Premier","Enforcer","Securicar","Banshee","Predator",
	"Bus","Rhino","Barracks","Hotknife","Trailer","Previon","Coach","Cabbie","Stallion","Rumpo","RC Bandit", "Romero",
	"Packer","Monster","Admiral","Squalo","Seasparrow","Pizzaboy","Tram","Trailer","Turismo","Speeder","Reefer","Tropic","Flatbed",
	"Yankee","Caddy","Solair","Berkleys RC Van","Skimmer","PCJ-600","Faggio","Freeway","RC Baron","RC Raider",
	"Glendale","Oceanic","Sanchez","Sparrow","Patriot","Quad","Coastguard","Dinghy","Hermes","Sabre","Rustler",
	"ZR-350","Walton","Regina","Comet","BMX","Burrito","Camper","Marquis","Baggage","Dozer","Maverick","News Chopper",
	"Rancher","FBI Rancher","Virgo","Greenwood","Jetmax","Hotring Racer","Sandking","Blista Compact","Police Maverick",
	"Boxville","Benson","Mesa","RC Goblin","Hotring Racer A","Hotring Racer B","Bloodring Banger","Rancher","Super GT",
	"Elegant","Journey","Bike","Mountain Bike","Beagle","Cropduster","Stuntplane","Tanker","Road Train","Nebula","Majestic",
	"Buccaneer","Shamal","Hydra","FCR-900","NRG-500","HPV-1000","Cement Truck","Tow Truck","Fortune","Cadrona","FBI Truck",
	"Willard","Forklift","Tractor","Combine","Feltzer","Remington","Slamvan","Blade","Freight","Streak","Vortex","Vincent",
	"Bullet","Clover","Sadler","Firetruck","Hustler","Intruder","Primo","Cargobob","Tampa","Sunrise","Merit","Utility",
	"Nevada","Yosemite","Windsor","Monster A","Monster B","Uranus","Jester","Sultan","Stratum","Elegy","Raindance","RC Tiger",
	"Flash","Tahoma","Savanna","Bandito","Freight","Trailer","Kart","Mower","Duneride","Sweeper","Broadway",
	"Tornado","AT-400","DFT-30","Huntley","Stafford","BF-400","Newsvan","Tug","Trailer","Emperor","Wayfarer",
	"Euros","HotDog","Club","Trailer","Trailer","Andromada","Dodo","RCCam","Launch","Police Car (LSPD)","Police Car (SFPD)",
	"Police Car (LVPD)","Police Ranger","Picador","S.W.A.T. Van","Alpha","Phoenix","Glendale","Sadler","Luggage Trailer A",
	"Luggage Trailer B","Stair Trailer","Boxville","Farm Plow","Utility Trailer"
};

stock SaveVarGPS(type,id, name[],variable)
{
	switch(type)
	{
	    case 1:
	    {
		    new lfile[24];
			format(lfile, 24, UBICACIONES, id);
			new INI:File = INI_Open(lfile);
			INI_SetTag(File,"UbicacionesData");
			INI_WriteInt(File,name,variable);
			INI_Close(File);
	    }
	    case 2:
	    {
		    new lfile[24];
			format(lfile, 24, UBICACIONES, id);
			new INI:File = INI_Open(lfile);
			INI_SetTag(File,"UbicacionesData");
			INI_WriteFloat(File,name,variable);
			INI_Close(File);
	    }
	}
}
stock SaveVarGarages(type,id, name[],variable)
{
	switch(type)
	{
	    case 1:
	    {
		    new gfile[64];
			format(gfile, 64, GARAGES_FILE, id);
			new INI:File = INI_Open(gfile);
			INI_SetTag(File,"GarageData");
			INI_WriteInt(File,name,variable);
			INI_Close(File);
	    }
	    case 2:
	    {
		    new gfile[64];
			format(gfile, 64, GARAGES_FILE, id);
			new INI:File = INI_Open(gfile);
			INI_SetTag(File,"GarageData");
			INI_WriteFloat(File,name,variable);
			INI_Close(File);
	    }
	}
}

RespawnNearbyVehicles(playerid, Float:radi)
{
    new Float:x, Float:y, Float:z;
    GetPlayerPos(playerid, x, y, z);
    for(new i=1; i<MAX_VEHICLES; i++)
    {
        if(GetVehicleModel(i))
        {
            new Float:posx, Float:posy, Float:posz;
            new Float:tempposx, Float:tempposy, Float:tempposz;
            GetVehiclePos(i, posx, posy, posz);
            tempposx = (posx - x);
            tempposy = (posy - y);
            tempposz = (posz - z);
            if (((tempposx < radi) && (tempposx > -radi)) && ((tempposy < radi) && (tempposy > -radi)) && ((tempposz < radi) && (tempposz > -radi)))
            {
				if (!EsVehFabrica(i))
                	SetVehicleToRespawn(i);
            }
        }
    }
}

stock IsSeatAvailable(vehicleid, seat)
{
	new carmodel = GetVehicleModel(vehicleid);
	for (new i = 0; i < sizeof( OneSeatVehicles ); i++ )
	{
	    if( carmodel == OneSeatVehicles[i] ) return 0;
	}
	foreach(Player, i)
	{
	    if(GetPlayerVehicleID(i) == vehicleid && GetPlayerVehicleSeat(i) == seat) return 0;
	}
	return 1;
}

main()
{
	SetTimer("timer_segundo", 1000, true);
	SetTimer("timer_2segundo", 1000, true);
	SetTimer("timer_minuto", 60000, true);
    SetTimer("timer_mediosegundo", 500, true);
	SetTimer("timer_microbeat", 250, true);
	SetTimer("timer_autoMensajes", 600000, true);
	SetTimer("timer_spec", 3000, true);
}

forward timer_mediosegundo();
public timer_mediosegundo()
{
	Loop(playerid, MAX_PLAYERS, 0) if (usuario_registro[playerid] == 2)
	{
		//actualiza estado crack & táser
		if (Taseado[playerid] != 0 && GetPlayerAnimationIndex(playerid) != 1209)
		{
			ApplyAnimation(playerid, "PED", "KO_skid_front", 4.1, 0, 1, 1, 1, 0, 1);
		}
		if (GetPVarInt(playerid, "EstaCrack") == 1 && GetPlayerAnimationIndex(playerid) != 1701)
		{
			ApplyAnimation(playerid, "WUZI", "CS_Dead_Guy", 4.0, 0, 0, 0, 1, 0, 1);
		}
		if (ConBalasGoma[playerid] != 0 && GetPlayerAnimationIndex(playerid) != 1533)
		{
			ApplyAnimation(playerid, "SWEET", "LaFin_Sweet", 4.0, 0, 1, 1, 1, 0, 1);
		}
		//otros
		if (papilla[playerid] != 0) SetPlayerColor(playerid, 0x00AE5700);
		if (refuerzos_pd[playerid] == 1)
		{
			Loop(i, MAX_PLAYERS, 0) if (IsPlayerConnectedEx(i) && member_faccion(i, 1) && OnDuty[i] == 1)
			{
				SetPlayerMarkerForPlayer(i, playerid, 0x1229FAFF);
			}
		}
		if (refuerzos_sd[playerid] == 1)
		{
			Loop(i, MAX_PLAYERS, 0) if (IsPlayerConnectedEx(i) && member_faccion(i, 4) && OnDuty[i] == 1)
			{
				SetPlayerMarkerForPlayer(i, playerid, 0x1229FAFF);
			}
		}
		ActualizarManos(playerid); //actualiza los objetos de manos del jugador
	} // } end
}

public OnVehiclePaintjob(playerid, vehicleid, paintjobid)
{
	new id = verificar_id_vehiculo(vehicleid);
	if (id != -1)
	{
		InfoVehiculo[id][vPaintJob] = paintjobid;
		guardar_int_mysql("vehiculos", "PaintJob", InfoVehiculo[id][vID_sql], InfoVehiculo[id][vPaintJob]);
	}
	return 1;
}

public OnVehicleRespray(playerid, vehicleid, color1, color2)
{
	new id = verificar_id_vehiculo(vehicleid);
	if (id != -1)
	{
		new query[128];
		InfoVehiculo[id][vColor_1] = color1;
		InfoVehiculo[id][vColor_2] = color2;
		mysql_format(DBInsanity, query, sizeof query, "UPDATE vehiculos SET Color_1 = '%d', Color_2 = '%d' WHERE ID = '%d'", InfoVehiculo[id][vColor_1], InfoVehiculo[id][vColor_2], InfoVehiculo[id][vID_sql]);
		mysql_tquery(DBInsanity, query);
	}
	return 1;
}

public OnEnterExitModShop(playerid, enterexit, interiorid)
{
	if (enterexit == 0)
	{
		if (EsteVehEs(playerid, GetPlayerVehicleID(playerid)) > -1)
		{
			ActualizarMods(EsteVehEs(playerid, GetPlayerVehicleID(playerid)));
		}
		SetPlayerInterior(playerid, 0);
	}
	return 1;
}

public OnVehicleMod(playerid, vehicleid, componentid)
{
	if(!(1 <= GetPlayerInterior(playerid) <= 3))
	{
		new szMessage[260];
		format(szMessage, sizeof szMessage, "{FF2F2F}[AdmWarnig]{FFFFFF} %s(%d) tal vez esté usando hacks de modificaciones de autos (aplicando: %s %s en un %s).", NombreOriginal(playerid), playerid, partName(componentid), partType(GetVehicleComponentType(componentid)), GetVehicleName(vehicleid));
		SendAdminMessage(0xFFFFFFFF, szMessage);
	}
	return 1;
}

public OnPlayerEnterVehicle(playerid, vehicleid, ispassenger)
{
    Seatbelt[playerid] = 0;
    if (veh_gasolina[vehicleid] <= 0) { SetVehicleEngine(vehicleid, playerid); }
    if (GetPVarInt(playerid, "EstaCrack") == 1) SetPVarInt(playerid, "ToBeEjected", 1);
    if (InfoPersonaje[playerid][pMuerto] == 1) SetPVarInt(playerid, "ToBeEjected", 1);
	new engine,lights,alarm,doors,bonnet,boot,objective;
	GetVehicleParamsEx(vehicleid,engine,lights,alarm,doors,bonnet,boot,objective);
	if (engine == VEHICLE_PARAMS_UNSET) switch(GetVehicleModel(vehicleid))
	{
		case 509, 481, 510: veh_gasolina[vehicleid] = 200, arr_Engine{vehicleid} = 1, SetVehicleParamsEx(vehicleid,VEHICLE_PARAMS_ON,lights,alarm,doors,bonnet,boot,objective), arr_Engine{vehicleid} = 1;
		default: SetVehicleParamsEx(vehicleid,VEHICLE_PARAMS_OFF,VEHICLE_PARAMS_OFF,alarm,doors,bonnet,boot,objective), arr_Engine{vehicleid} = 0;
	}
	if (!ispassenger)
	{
		new si_no = 0;
		Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] == vehicleid)
		{
		    if (InfoVehiculo[id][vNegocio] != 0)
		    {
				if (llaves_negocio(playerid, vehicleid)) si_no = 1;
		    }
		    else
		    {
				switch (InfoVehiculo[id][vTipo])
				{
					case 1..50: //facciones
					{
						if (llaves_faccion(playerid, vehicleid)) si_no = 1;
					}
					case 200: //vip
					{
						if (llaves_vip(playerid, vehicleid)) si_no = 1;
					}
					case 600: //rentable
					{
						si_no = 1;
					}
					default: //usuarios
					{
						si_no = 1;
					}
				}
			}
		}
		if (EsVehFabrica(vehicleid)) si_no = 1;
		//función
		if (si_no != 1)
		{
			if (playerTextdraw[playerid] == false)
			{
				playerVehicleTextdraw[playerid] = CreateDynamic3DTextLabel("No tienes las llaves de este vehiculo.", 0xFFFFFFFF, 0.0, 0.0, 0.0, 10.0, INVALID_PLAYER_ID, vehicleid, 0, GetPlayerVirtualWorld(playerid), GetPlayerInterior(playerid), playerid);
				SetTimerEx("OnVehicleTextdraw", 4000, false, "i", playerid);
				playerTextdraw[playerid] = true;
			}
			new Float: slx,Float: sly,Float: slz;
			GetPlayerPos(playerid, slx, sly, slz);
			SetPlayerPos(playerid, slx, sly, slz);
			return ClearAnimations(playerid);
		}
	}
    else
    {
		if (!IsPlayerInRangeOfVehicle(playerid, vehicleid, 7.5) || LockStatus[vehicleid] != 0)// G-bugging fix
		{
			if (playerTextdraw[playerid] == false)
			{
				playerVehicleTextdraw[playerid] = CreateDynamic3DTextLabel("Este vehículo se encuentra bloqueado.", 0xFFFFFFFF, 0.0, 0.0, 0.0, 10.0, INVALID_PLAYER_ID, vehicleid, 0, GetPlayerVirtualWorld(playerid), GetPlayerInterior(playerid), playerid);
				SetTimerEx("OnVehicleTextdraw", 4000, false, "i", playerid);

				playerTextdraw[playerid] = true;
			}
			new Float: slx,Float: sly,Float: slz;
			GetPlayerPos(playerid, slx, sly, slz);
			SetPlayerPos(playerid, slx, sly, slz);
			return ClearAnimations(playerid);
		}
	}
	return 1;
}

forward OnVehicleTextdraw(playerid);
public OnVehicleTextdraw(playerid)
{
	if(IsValidDynamic3DTextLabel(playerVehicleTextdraw[playerid]))
		DestroyDynamic3DTextLabel(playerVehicleTextdraw[playerid]);

	playerTextdraw[playerid] = false;
	return 1;
}

IsAtFishPlace(playerid)
{
	if(IsPlayerConnected(playerid))
	{
		if(IsPlayerInRangeOfPoint(playerid,2.0,403.8266,-2088.7598,7.8359) || IsPlayerInRangeOfPoint(playerid,2.0,398.7553,-2088.7490,7.8359))
		{//Fishplace at the bigwheel
			return 1;
		}
		else if(IsPlayerInRangeOfPoint(playerid,2.0,396.2197,-2088.6692,7.8359) || IsPlayerInRangeOfPoint(playerid,2.0,391.1094,-2088.7976,7.8359))
		{//Fishplace at the bigwheel
			return 1;
		}
		else if(IsPlayerInRangeOfPoint(playerid,2.0,383.4157,-2088.7849,7.8359) || IsPlayerInRangeOfPoint(playerid,2.0,374.9598,-2088.7979,7.8359))
		{//Fishplace at the bigwheel
			return 1;
		}
		else if(IsPlayerInRangeOfPoint(playerid,2.0,369.8107,-2088.7927,7.8359) || IsPlayerInRangeOfPoint(playerid,2.0,367.3637,-2088.7925,7.8359))
		{//Fishplace at the bigwheel
			return 1;
		}
		else if(IsPlayerInRangeOfPoint(playerid,2.0,362.2244,-2088.7981,7.8359) || IsPlayerInRangeOfPoint(playerid,2.0,354.5382,-2088.7979,7.8359))
		{//Fishplace at the bigwheel
			return 1;
		}
		else if(IsPlayerInRangeOfPoint(playerid,10.0,836.4791, -2086.1738, 3.4484))
		{ // Nuevo lugar, justo debajo de la tienda de pesca.
			return 1;
		}
	}
	return 0;
}

IsAtArrestPoint(playerid){
	if(IsPlayerConnected(playerid))
	{
		if(IsPlayerInRangeOfPoint(playerid, 4.0,1559.3228,-1693.7491,5.8970)){return 1;} // LSPD Garage
		else if(IsPlayerInRangeOfPoint(playerid, 4.0, 1559.650,-1649.430,4990.58)){ return 1;} // LSPD Interior
		else if(IsPlayerInRangeOfPoint(playerid, 4.0, 613.3228,-589.1623,17.2266)){ return 1; } // SASD Dillmore
		else if(IsPlayerInRangeOfPoint(playerid, 4.0, 299.9566,-1529.9164,24.9219)){ return 1; } // FBI
 	}
	return 0;
}

PlazaAyuntamiento(playerid)
{
	if (IsPlayerInRangeOfPoint(playerid,95.0,1482.6306, -1790.6089, 12.47770)) { return 1; } //Parking Ayuntamiento
	else if (IsPlayerInRangeOfPoint(playerid,75.0,1479.5547, -1649.9537, 13.6082)) { return 1; } //Plaza
	return 0;
}

stock Tienda_247(playerid)
{
	if (IsPlayerInRangeOfPoint(playerid,5.0,-1833.8270,62.3936,1055.1891)) { return 1; } //intaero
	else if (IsPlayerInRangeOfPoint(playerid,5.0,-22.3260,-138.6221,1003.5469)) { return 1; }
	else if (IsPlayerInRangeOfPoint(playerid,5.0,-25.6448,-56.6718,1003.5469)) { return 1; }
	else if (IsPlayerInRangeOfPoint(playerid,5.0,-29.3554,-28.8020,1003.5573)) { return 1; }
	else if (IsPlayerInRangeOfPoint(playerid,5.0,-28.7605,-185.1333,1003.5469)) { return 1; } //LV 1er 24-7
	else if (IsPlayerInRangeOfPoint(playerid,5.0,-10.3085,-178.2465,1003.5469)) { return 1; } // LV 1er 24-7 >
	else if (IsPlayerInRangeOfPoint(playerid,5.0,2.3437,-29.0118,1003.5494)) { return 1; } //LV 2do 24-7
	else if (IsPlayerInRangeOfPoint(playerid,5.0,-28.0818,-89.9434,1003.5469)) { return 1; } //LV 3er 24-7
	else if (IsPlayerInRangeOfPoint(playerid,5.0,-29.1318,-184.7204,1003.5469)) { return 1; } //LV 3er 24-7
	else if (IsPlayerInRangeOfPoint(playerid,5.0,-25.7885,-183.2835,1003.5469)) { return 1; } //LV 3er 24-7
	else if (IsPlayerInRangeOfPoint(playerid,3.0,664.8079,-568.7150,16.3433)) { return 1; }
	return 0;
}

IsAtGasStation(playerid)
{
	if (IsPlayerInRangeOfPoint(playerid,6.0,1004.0070,-939.3102,42.1797) || IsPlayerInRangeOfPoint(playerid,6.0,1944.3260,-1772.9254,13.3906)) return 1;
	else if (IsPlayerInRangeOfPoint(playerid,6.0,-90.5515,-1169.4578,2.4079) || IsPlayerInRangeOfPoint(playerid,6.0,-1609.7958,-2718.2048,48.5391)) return 1;
	else if (IsPlayerInRangeOfPoint(playerid,8.0,1409.993896,-1525.738159,13.555365) || IsPlayerInRangeOfPoint(playerid,8.0,-1676.6323,414.0262,6.9484)) return 1;
	else if (IsPlayerInRangeOfPoint(playerid,6.0,1595.5337,2198.9404,10.8203)|| IsPlayerInRangeOfPoint(playerid,10.0,1880.558105,-2304.451660,14.119070)) return 1;
	else if (IsPlayerInRangeOfPoint(playerid,8.0,656.4265,-559.8610,16.5015) || IsPlayerInRangeOfPoint(playerid,6.0,656.3797,-570.4138,16.5015) || IsPlayerInRangeOfPoint(playerid,6.0,2294.2227,-1911.0593,13.5971)) return 1;
	else if (IsPlayerInRangeOfPoint(playerid,8.0,1628.361938,-1808.970458,13.521308)) return 1;
	else if (IsPlayerInRangeOfPoint(playerid,8.0,1568.5785, -1690.0538, 5.2162)) return 1;
	return 0;
}

// VEHICULOS NORMALES:
IsATowTruck(carid)
{
	if(GetVehicleModel(carid) == 485 || GetVehicleModel(carid) == 525 || GetVehicleModel(carid) == 583 || GetVehicleModel(carid) == 574)
	{
		return 1;
	}
	return 0;
}

IsABike(carid)
{
	if(GetVehicleModel(carid) == 509 || GetVehicleModel(carid) ==  481 || GetVehicleModel(carid) == 510)
	{
		return 1;
	}
	return 0;
}

IsAPlane(carid)
{
	switch(GetVehicleModel(carid)) {
		case 592, 577, 511, 512, 593, 520, 553, 476, 519, 460, 513, 548, 425, 417, 487, 488, 497, 563, 447, 469: return 1;
	}
	return 0;
}

IsABoat(carid)
{
	new Boats[] = { 472, 473, 493, 484, 430, 454, 453, 452, 446 };
	for(new i = 0; i < sizeof(Boats); i++){
		if(GetVehicleModel(carid) == Boats[i]) return 1;
	}
	return 0;
}

PlayerPlaySoundEx(soundid, Float:x, Float:y, Float:z) { //Realistic sound playback
	foreach(Player, i) {
		if(IsPlayerInRangeOfPoint(i, 20.0, x, y, z))
			PlayerPlaySound(i, soundid, x, y, z);
	}
	return 1;
}
partType(type)
{
	new name[64];
	switch(type){
	    case 0: name = "Alerón";
        case 1: name = "Capó";
        case 2: name = "Techo";
        case 3: name = "Lados";
        case 4: name = "Lamps";
        case 5: name = "Nitro";
        case 6: name = "Escape";
        case 7: name = "Ruedas";
        case 8: name = "Stereo";
        case 9: name = "Hidráulica";
        case 10: name = "Parachoque D.";
        case 11: name = "Parachoque T.";
        case 12: name = "Ventilacion Izq.";
        case 13: name = "Ventilacion Der.";
        default: name = "Desconocida";
	}
	return name;
}

partName(part){

	new
		name[24];

	switch(part - 1000) {
		case 0:	name = "Pro";
		case 1: name = "Win";
		case 2: name = "Drag";
		case 3: name = "Alpha";
		case 4: name = "Champ Scoop";
		case 5: name = "Fury Scoop";
		case 6: name = "Roof Scoop";
		case 7: name = "Sideskirt";
		case 8: name = "2x";
		case 9: name = "5x";
		case 10: name = "10x";
		case 11: name = "Race Scoop";
		case 12: name = "Worx Scoop";
		case 13: name = "Round Fog";
		case 14: name = "Champ";
		case 15: name = "Race";
		case 16: name = "Worx";
		case 17: name = "Sideskirt";
		case 18: name = "Upswept";
		case 19: name = "Twin";
		case 20: name = "Large";
		case 21: name = "Medium";
		case 22: name = "Small";
		case 23: name = "Fury";
		case 24: name = "Square Fog";
		case 26: name = "Alien";
		case 27: name = "Alien";
		case 28: name = "Alien";
		case 29: name = "X-Flow";
		case 30: name = "X-Flow";
		case 31: name = "X-Flow";
		case 32: name = "Alien Roof Vent";
		case 33: name = "X-Flow Roof Vent";
		case 34: name = "Alien";
		case 35: name = "X-Flow Roof Vent";
		case 36: name = "Alien";
		case 37: name = "X-Flow";
		case 38: name = "Alien Roof Vent";
		case 39: name = "X-Flow";
		case 40: name = "Alien";
		case 41: name = "X-Flow";
		case 42: name = "Chrome";
		case 43: name = "Slamin";
		case 44: name = "Chrome";
		case 45: name = "X-Flow";
		case 46: name = "Alien";
		case 47: name = "Alien";
		case 48: name = "X-Flow";
		case 49: name = "Alien";
		case 50: name = "X-Flow";
		case 51: name = "Alien";
		case 52: name = "X-Flow";
		case 53: name = "X-Flow";
		case 54: name = "Alien";
		case 55: name = "Alien";
		case 56: name = "Alien";
		case 57: name = "X-Flow";
		case 58: name = "Alien";
		case 59: name = "X-Flow";
		case 60: name = "X-Flow";
		case 61: name = "X-Flow";
		case 62: name = "Alien";
		case 63: name = "X-Flow";
		case 64: name = "Alien";
		case 65: name = "Alien";
		case 66: name = "X-Flow";
		case 67: name = "Alien";
		case 68: name = "X-Flow";
		case 69: name = "Alien";
		case 70: name = "X-Flow";
		case 71: name = "Alien";
		case 72: name = "X-Flow";
		case 88: name = "Alien";
		case 89: name = "X-Flow";
		case 90: name = "Alien";
		case 91: name = "X-Flow";
		case 92: name = "Alien";
		case 93: name = "X-Flow";
		case 94: name = "Alien";
		case 95: name = "X-Flow";
		case 99: name = "Chrome";
		case 100: name = "Chrome Grill";
		case 101: name = "Chrome Flames";
		case 102: name = "Chrome Strip";
		case 103: name = "Convertible";
		case 104: name = "Chrome";
		case 105: name = "Slamin";
		case 106: name = "Chrome Arches";
		case 107: name = "Chrome Strip";
		case 108: name = "Chrome Strip";
		case 109: name = "Chrome";
		case 110: name = "Slamin";
		case 113: name = "Chrome";
		case 114: name = "Slamin";
		case 115: name = "Chrome";
		case 116: name = "Slamin";
		case 117: name = "Chrome";
		case 118: name = "Chrome Trim";
		case 119: name = "Wheelcovers";
		case 120: name = "Chrome Trim";
		case 121: name = "Wheelcovers";
		case 122: name = "Chrome Flames";
		case 123: name = "Bullbar Chrome Bars";
		case 124: name = "Chrome Arches";
		case 125: name = "Bullbar Chrome Lights";
		case 126: name = "Chrome";
		case 127: name = "Slamin";
		case 128: name = "Vinyl Hardtop";
		case 129: name = "Chrome";
		case 130: name = "Hardtop";
		case 131: name = "Softtop";
		case 132: name = "Slamin";
		case 133: name = "Chrome Strip";
		case 134: name = "Chrome Strip";
		case 135: name = "Slamin";
		case 136: name = "Chrome";
		case 137: name = "Chrome Strip";
		case 138: name = "Alien";
		case 139: name = "X-Flow";
		case 140: name = "X-Flow";
		case 141: name = "Alien";
		case 142: name = "Left Oval Vents";
		case 143: name = "Right Oval Vents";
		case 144: name = "Left Square Vents";
		case 145: name = "Right Square Vents";
		case 146: name = "X-Flow";
		case 147: name = "Alien";
		case 148: name = "X-Flow";
		case 149: name = "Alien";
		case 150: name = "Alien";
		case 151: name = "X-Flow";
		case 152: name = "X-Flow";
		case 153: name = "Alien";
		case 154: name = "Alien";
		case 155: name = "Alien";
		case 156: name = "X-Flow";
		case 157: name = "X-Flow";
		case 158: name = "X-Flow";
		case 159: name = "Alien";
		case 160: name = "Alien";
		case 161: name = "X-Flow";
		case 162: name = "Alien";
		case 163: name = "X-Flow";
		case 164: name = "Alien";
		case 165: name = "X-Flow";
		case 166: name = "Alien";
		case 167: name = "X-Flow";
		case 168: name = "Alien";
		case 169: name = "Alien";
		case 170: name = "X-Flow";
		case 171: name = "Alien";
		case 172: name = "X-Flow";
		case 173: name = "X-Flow";
		case 174: name = "Chrome";
		case 175: name = "Slamin";
		case 176: name = "Chrome";
		case 177: name = "Slamin";
		case 178: name = "Slamin";
		case 179: name = "Chrome";
		case 180: name = "Chrome";
		case 181: name = "Slamin";
		case 182: name = "Chrome";
		case 183: name = "Slamin";
		case 184: name = "Chrome";
		case 185: name = "Slamin";
		case 186: name = "Slamin";
		case 187: name = "Chrome";
		case 188: name = "Slamin";
		case 189: name = "Chrome";
		case 190: name = "Slamin";
		case 191: name = "Chrome";
		case 192: name = "Chrome";
		case 193: name = "Slamin";
	}
	return name;
}

//
public OnPlayerRequestClass(playerid, classid)
{
    if (IsPlayerNPC(playerid)) return 1;
	if (state_on[playerid] == 0)
	{
		state_on[playerid] = 1;
		SetSpawnInfo(playerid, 0, 0, 0.0, 0.0, 0.0, 0.0, 0, 0, 0, 0, 0, 0) ;
		SpawnPlayer(playerid);
		ClearChat(playerid);
	}
    return 1;
}

//
public OnPlayerConnect(playerid)
{
    if (IsPlayerNPC(playerid)) return 1;
	conectado[playerid] = 0;
	new playerIP[32];
	GetPlayerIp(playerid, playerIP, sizeof playerIP);
	if (CheckBan(playerIP) == 1)
	{
	    SetPlayerName(playerid, "BannedPlayer");
	    SendClientMessage(playerid, COLOR_GENERAL, "Has sido expulsado del servidor, tu cuenta está baneada. (Web: www.insanityrp.ga)");
		SetTimerEx("TimerKICK", 1000, false, "d", playerid);
		return 1;
 	}
	// contador de usuarios
	state_on[playerid] = 0;
	PlayAudioStreamForPlayer(playerid, "https://s68.notube.net/download.php?token=fff750cfe33eef7e0a979b523e2491c3");
    reset_InfoCuenta(playerid);         // cuentas
    reset_InfoPersonaje(playerid);      // personajes
	CheckPlayerIP(playerid);            // sistema de multicuenta por IP
	resetPlayerVariables(playerid);     // limpieza de variables 1
	OnPlayerCleanVariables(playerid);	// limpieza de variables 2
	MapsRemoveForPlayer(playerid);      // remueve mapeos
	OnPlayerTextDraw(playerid);         // PlayerTextDraw
	SyncPlayerTime(playerid);           // tiempo real
	ResetPlayerDamages(playerid);       // limpieza de heridas

	SetPlayerColor(playerid, 0x00000000); // color logeo
	PlayerTextDrawShow(playerid, TDping_fps[playerid]);
	return 1;
}

numero_y_letras(const name[])
{
	if (!name[0])
		return 0;

	else for (new i = 0, len = strlen(name); i != len; i ++)
	{
		if ((name[i] < 'A' || name[i] > 'Z') && (name[i] < 'a' || name[i] > 'z') && (name[i] < '0' || name[i] > '9'))
			return 0;
	}
	return 1;
}

IsValidRoleplayName(const name[])
{
	if (!name[0] || strfind(name, "_") == -1)
	    return 0;

	else for (new i = 0, len = strlen(name); i != len; i ++) {
	    if ((i == 0) && (name[i] < 'A' || name[i] > 'Z'))
	        return 0;

		else if ((i != 0 && i < len  && name[i] == '_') && (name[i + 1] < 'A' || name[i + 1] > 'Z'))
		    return 0;

		else if ((name[i] < 'A' || name[i] > 'Z') && (name[i] < 'a' || name[i] > 'z') && name[i] != '_' && name[i] != '.')
		    return 0;
	}
	return 1;
}

OnPlayerCleanVariables(playerid) // by edinsonwalker, ordené todo XD
{
	llamadaJugador[playerid] = -1;
	llamadaPolicia[playerid] = -1;

	TiempoRobo[playerid] = -1;
	HaRobado[playerid] = 0;
	PosicionRobo[0] = 0.0;
	PosicionRobo[1] = 0.0;
	PosicionRobo[2] = 0.0;

    TimerRepartos[playerid] = -1;

	RepartoID[playerid] = -1;
	RepartoCasa[playerid] = -1;
	RepartoNegocio[playerid] = -1;
	RepartoPago[playerid] = 0;

	CulandoPrecio[playerid] = 0;
	CulandoCliente[playerid] = -1;
	CulandoNegocio[playerid] = -1;
	
	AutosSpawneados[playerid] = 0;

	DeletePVar(playerid, "ModoSpray");
	SetPVarString(playerid, "TextoGraffiti", "");
	SetPVarInt(playerid, "LetraGraffiti", 5);
	
	TimerWeaponCreate[playerid] = -1;

	MensajeMuelto[playerid] = 0;
	GetTextDraw[playerid] = 0;
	ConBalasGoma[playerid] = 0;
	test_rol[playerid] = 5;
	
    show_velocimetro[playerid] = 0;
	PlayerViewAnunce[playerid] = 0;
	SetPVarString(playerid, "anunce1", "");
	SetPVarString(playerid, "anunce2", "");
	SetPVarString(playerid, "anunce3", "");
	SetPVarString(playerid, "anunce4", "");
	SetPVarString(playerid, "anunce5", "");

    LlegandoLlamadoMecanico[playerid] = 0;
	EnLlamadoMecanico[playerid] = 0;
	TallerCliente[playerid] = -1;
	TallerMecanico[playerid] = -1;
	TallerColor1[playerid] = -1;
	TallerColor2[playerid] = -1;
	TallerCosto[playerid] = 0;
	ID_Taller_Cobro[playerid] = -1;
	ID_Veh_Cobro[playerid] = 0;
		
	DeletePVar(playerid, "desbug_muerte");
	PosSpawnBug[playerid][0] = 2105.0334;
	PosSpawnBug[playerid][1] = -1473.9088;
	PosSpawnBug[playerid][2] = 24.1237;
	PosSpawnBug[playerid][3] = 0.0000;
	PosVwBug[playerid] = 0;
	PosIntBug[playerid] = 0;

	SetPVarInt(playerid, "PlayerCuffed", 0);
	EditandoObjetoJ[playerid] = 0;

	Altavoz[playerid] = 0;
	EnLlamada[playerid] = 0; //Sistema teléfono
	ToqueLlamada[playerid] = 0;
	PersonaEnLlamada[playerid] = -1;

	edicion_sql_actual[playerid] = -1;
	InfoPersonaje[playerid][pEditingMode] = 0;

	ContadorCuraciones[playerid] = 0;
	KillTimer(random_abstinence[playerid]);
	abstinence_power[playerid] = 0;
	random_abstinence[playerid] = 0;

	UsedFind[playerid] = 0;

	playerTextdraw[playerid] = false;

	CountKick[playerid] = 0;
	TimerCkick[playerid] = -1;
	CountBan[playerid] = 0;
	TimerCban[playerid] = -1;
	CountWarn[playerid] = 0;
	TimerCwarn[playerid] = -1;

    papilla[playerid] = 0;
	AdminChat[playerid] = 0;
	EnViajeQuimicos[playerid] = 0;
	EnViajeDrogas[playerid] = 0;
	UsandoVehFabrica[playerid] = 0;
	FabricaID[playerid] = -1;
	PlayerDuda[playerid] = 0;
	alm(PlayerTextoDuda[playerid], "nada");
    InfoPersonaje[playerid][pLlaveVehicle] = 0;
	TomandoTrabajo[playerid] = -1;
	IDfabrica[playerid] = -1;
	YaOfrecioEmpleo[playerid] = -1;
	SetPVarInt(playerid, "mueltito", 0);
	Taseado[playerid] = 0;
    RecargarTiempo[playerid] = -1;
	Anti[playerid][BalasW] = 0;
    CederTiempo[playerid] = -1;
	countGameTime[playerid] = 0;
    RandomMascara[playerid] = Random(1000, 9999);
	player_weapon[playerid] = -1;
	player_asesino[playerid] = -1;
    DeletePVar(playerid, "EstaCrack");
	intentos_load[playerid] = 0;
	Afk[playerid] = 0;
    autorepara[playerid] = 0;
    VisitandoCasa[playerid] = 0;
    CasaID[playerid] = -1;
    DelayVisita[playerid] = 0;
	// Administración.
	See_MP[playerid] = 0;
	See_FRC[playerid] = 0; // Frecuencia de la radio.
}

OnPlayerTextDraw(playerid)
{
	// artic
	TD_Velocimetro[playerid][0] = CreatePlayerTextDraw(playerid, 575.200439, 380.983428, "000");
	PlayerTextDrawLetterSize(playerid, TD_Velocimetro[playerid][0], 0.360498, 1.845000);
	PlayerTextDrawAlignment(playerid, TD_Velocimetro[playerid][0], 1);
	PlayerTextDrawColor(playerid, TD_Velocimetro[playerid][0], -1);
	PlayerTextDrawSetShadow(playerid, TD_Velocimetro[playerid][0], 0);
	PlayerTextDrawSetOutline(playerid, TD_Velocimetro[playerid][0], 1);
	PlayerTextDrawBackgroundColor(playerid, TD_Velocimetro[playerid][0], 255);
	PlayerTextDrawFont(playerid, TD_Velocimetro[playerid][0], 3);
	PlayerTextDrawSetProportional(playerid, TD_Velocimetro[playerid][0], 1);

	TD_Velocimetro[playerid][1] = CreatePlayerTextDraw(playerid, 575.400756, 375.466949, "km/h");
	PlayerTextDrawLetterSize(playerid, TD_Velocimetro[playerid][1], 0.155497, 0.716364);
	PlayerTextDrawAlignment(playerid, TD_Velocimetro[playerid][1], 1);
	PlayerTextDrawColor(playerid, TD_Velocimetro[playerid][1], -5963521);
	PlayerTextDrawSetShadow(playerid, TD_Velocimetro[playerid][1], 0);
	PlayerTextDrawSetOutline(playerid, TD_Velocimetro[playerid][1], 1);
	PlayerTextDrawBackgroundColor(playerid, TD_Velocimetro[playerid][1], 255);
	PlayerTextDrawFont(playerid, TD_Velocimetro[playerid][1], 3);
	PlayerTextDrawSetProportional(playerid, TD_Velocimetro[playerid][1], 1);

	TD_Velocimetro[playerid][2] = CreatePlayerTextDraw(playerid, 575.500854, 397.700195, "gasolina_100");
	PlayerTextDrawLetterSize(playerid, TD_Velocimetro[playerid][2], 0.221496, 0.859166);
	PlayerTextDrawAlignment(playerid, TD_Velocimetro[playerid][2], 1);
	PlayerTextDrawColor(playerid, TD_Velocimetro[playerid][2], -5963521);
	PlayerTextDrawSetShadow(playerid, TD_Velocimetro[playerid][2], 0);
	PlayerTextDrawSetOutline(playerid, TD_Velocimetro[playerid][2], 1);
	PlayerTextDrawBackgroundColor(playerid, TD_Velocimetro[playerid][2], 255);
	PlayerTextDrawFont(playerid, TD_Velocimetro[playerid][2], 3);
	PlayerTextDrawSetProportional(playerid, TD_Velocimetro[playerid][2], 1);
	// Textdraw's by EdinsonWalker
	draw_money[playerid] = CreatePlayerTextDraw(playerid, 617.496582, 138.666625, "");
	PlayerTextDrawLetterSize(playerid, draw_money[playerid], 0.337686, 1.255832);
	PlayerTextDrawAlignment(playerid, draw_money[playerid], 3);
	PlayerTextDrawColor(playerid, draw_money[playerid], -16776961);
	PlayerTextDrawSetShadow(playerid, draw_money[playerid], 0);
	PlayerTextDrawSetOutline(playerid, draw_money[playerid], 1);
	PlayerTextDrawBackgroundColor(playerid, draw_money[playerid], 255);
	PlayerTextDrawFont(playerid, draw_money[playerid], 3);
	PlayerTextDrawSetProportional(playerid, draw_money[playerid], 1);

	TDping_fps[playerid] = CreatePlayerTextDraw(playerid, 632.489501, 433.250091, "");
	PlayerTextDrawLetterSize(playerid, TDping_fps[playerid], 0.195723, 0.818333);
	PlayerTextDrawAlignment(playerid, TDping_fps[playerid], 3);
	PlayerTextDrawColor(playerid, TDping_fps[playerid], -1);
	PlayerTextDrawSetShadow(playerid, TDping_fps[playerid], 0);
	PlayerTextDrawSetOutline(playerid, TDping_fps[playerid], 1);
	PlayerTextDrawBackgroundColor(playerid, TDping_fps[playerid], 255);
	PlayerTextDrawFont(playerid, TDping_fps[playerid], 1);
	PlayerTextDrawSetProportional(playerid, TDping_fps[playerid], 1);

	// pCocheVS
	pCocheVS[playerid][0] = CreatePlayerTextDraw(playerid, 317.899597, 73.751869, "Vehiculo"); // NOMBRE COCHE
	PlayerTextDrawLetterSize(playerid, pCocheVS[playerid][0], 0.400000, 1.600000);
	PlayerTextDrawAlignment(playerid, pCocheVS[playerid][0], 2);
	PlayerTextDrawColor(playerid, pCocheVS[playerid][0], -1);
	PlayerTextDrawSetShadow(playerid, pCocheVS[playerid][0], 0);
	PlayerTextDrawBackgroundColor(playerid, pCocheVS[playerid][0], 255);
	PlayerTextDrawFont(playerid, pCocheVS[playerid][0], 2);
	PlayerTextDrawSetProportional(playerid, pCocheVS[playerid][0], 1);

	pCocheVS[playerid][1] = CreatePlayerTextDraw(playerid, 221.000000, 96.511108, ""); // MODEL 1
	PlayerTextDrawTextSize(playerid, pCocheVS[playerid][1], 94.000000, 92.000000);
	PlayerTextDrawAlignment(playerid, pCocheVS[playerid][1], 1);
	PlayerTextDrawColor(playerid, pCocheVS[playerid][1], -1);
	PlayerTextDrawSetShadow(playerid, pCocheVS[playerid][1], 0);
	PlayerTextDrawBackgroundColor(playerid, pCocheVS[playerid][1], 336925951);
	PlayerTextDrawFont(playerid, pCocheVS[playerid][1], 5);
	PlayerTextDrawSetProportional(playerid, pCocheVS[playerid][1], 0);
	PlayerTextDrawSetPreviewModel(playerid, pCocheVS[playerid][1], 411);
	PlayerTextDrawSetPreviewRot(playerid, pCocheVS[playerid][1], 0.000000, 0.000000, 0.000000, 0.699998);
	PlayerTextDrawSetPreviewVehCol(playerid, pCocheVS[playerid][1], 3, 1);

	pCocheVS[playerid][2] = CreatePlayerTextDraw(playerid, 321.733428, 96.525917, ""); // MODEL 2
	PlayerTextDrawTextSize(playerid, pCocheVS[playerid][2], 94.000000, 92.000000);
	PlayerTextDrawAlignment(playerid, pCocheVS[playerid][2], 1);
	PlayerTextDrawColor(playerid, pCocheVS[playerid][2], -1);
	PlayerTextDrawSetShadow(playerid, pCocheVS[playerid][2], 0);
	PlayerTextDrawBackgroundColor(playerid, pCocheVS[playerid][2], 336925951);
	PlayerTextDrawFont(playerid, pCocheVS[playerid][2], 5);
	PlayerTextDrawSetProportional(playerid, pCocheVS[playerid][2], 0);
	PlayerTextDrawSetPreviewModel(playerid, pCocheVS[playerid][2], 411);
	PlayerTextDrawSetPreviewRot(playerid, pCocheVS[playerid][2], 0.000000, 0.000000, 180.000000, 0.699998);
	PlayerTextDrawSetPreviewVehCol(playerid, pCocheVS[playerid][2], 3, 1);

	pCocheVS[playerid][3] = CreatePlayerTextDraw(playerid, 220.933334, 192.796188, ""); // MODEL 3
	PlayerTextDrawTextSize(playerid, pCocheVS[playerid][3], 94.000000, 92.000000);
	PlayerTextDrawAlignment(playerid, pCocheVS[playerid][3], 1);
	PlayerTextDrawColor(playerid, pCocheVS[playerid][3], -1);
	PlayerTextDrawSetShadow(playerid, pCocheVS[playerid][3], 0);
	PlayerTextDrawBackgroundColor(playerid, pCocheVS[playerid][3], 336925951);
	PlayerTextDrawFont(playerid, pCocheVS[playerid][3], 5);
	PlayerTextDrawSetProportional(playerid, pCocheVS[playerid][3], 0);
	PlayerTextDrawSetPreviewModel(playerid, pCocheVS[playerid][3], 411);
	PlayerTextDrawSetPreviewRot(playerid, pCocheVS[playerid][3], 0.000000, 0.000000, 90.000000, 0.899999);
	PlayerTextDrawSetPreviewVehCol(playerid, pCocheVS[playerid][3], 3, 1);

	pCocheVS[playerid][4] = CreatePlayerTextDraw(playerid, 321.733398, 192.851837, ""); // MODEL 4
	PlayerTextDrawTextSize(playerid, pCocheVS[playerid][4], 94.000000, 92.000000);
	PlayerTextDrawAlignment(playerid, pCocheVS[playerid][4], 1);
	PlayerTextDrawColor(playerid, pCocheVS[playerid][4], -1);
	PlayerTextDrawSetShadow(playerid, pCocheVS[playerid][4], 0);
	PlayerTextDrawBackgroundColor(playerid, pCocheVS[playerid][4], 336925951);
	PlayerTextDrawFont(playerid, pCocheVS[playerid][4], 5);
	PlayerTextDrawSetProportional(playerid, pCocheVS[playerid][4], 0);
	PlayerTextDrawSetPreviewRot(playerid, pCocheVS[playerid][4], 0.000000, 0.000000, 270.000000, 0.899999);
	PlayerTextDrawSetPreviewVehCol(playerid, pCocheVS[playerid][4], 3, 1);

	pCocheVS[playerid][5] = CreatePlayerTextDraw(playerid, 318.433441, 286.410949, "9000000$"); // PRECIO
	PlayerTextDrawLetterSize(playerid, pCocheVS[playerid][5], 0.400000, 1.600000);
	PlayerTextDrawAlignment(playerid, pCocheVS[playerid][5], 2);
	PlayerTextDrawColor(playerid, pCocheVS[playerid][5], 8388863);
	PlayerTextDrawSetShadow(playerid, pCocheVS[playerid][5], 0);
	PlayerTextDrawBackgroundColor(playerid, pCocheVS[playerid][5], 255);
	PlayerTextDrawFont(playerid, pCocheVS[playerid][5], 1);
	PlayerTextDrawSetProportional(playerid, pCocheVS[playerid][5], 1);

	pCocheVS[playerid][6] = CreatePlayerTextDraw(playerid, 317.666015, 299.177978, "Maletero:_10_ranuras"); // RANURAS MALETERO
	PlayerTextDrawLetterSize(playerid, pCocheVS[playerid][6], 0.400000, 1.600000);
	PlayerTextDrawAlignment(playerid, pCocheVS[playerid][6], 2);
	PlayerTextDrawColor(playerid, pCocheVS[playerid][6], -1);
	PlayerTextDrawSetShadow(playerid, pCocheVS[playerid][6], 0);
	PlayerTextDrawBackgroundColor(playerid, pCocheVS[playerid][6], 255);
	PlayerTextDrawFont(playerid, pCocheVS[playerid][6], 1);
	PlayerTextDrawSetProportional(playerid, pCocheVS[playerid][6], 1);

	//
	velocimetro_bar[playerid] = CreatePlayerProgressBar(playerid, 541.000000, 395.000000, 70.000000, 6.199998, -1429936641, 1000.0);

	velocimetro_pice[playerid][0] = CreatePlayerTextDraw(playerid, 579.411315, 351.631439, "000");
	PlayerTextDrawLetterSize(playerid, velocimetro_pice[playerid][0], 0.459766, 3.473984);
	PlayerTextDrawAlignment(playerid, velocimetro_pice[playerid][0], 3);
	PlayerTextDrawColor(playerid, velocimetro_pice[playerid][0], -1);
	PlayerTextDrawSetShadow(playerid, velocimetro_pice[playerid][0], 0);
	PlayerTextDrawSetOutline(playerid, velocimetro_pice[playerid][0], 1);
	PlayerTextDrawBackgroundColor(playerid, velocimetro_pice[playerid][0], 255);
	PlayerTextDrawFont(playerid, velocimetro_pice[playerid][0], 2);
	PlayerTextDrawSetProportional(playerid, velocimetro_pice[playerid][0], 1);

	velocimetro_pice[playerid][1] = CreatePlayerTextDraw(playerid, 576.589172, 380.217102, "Freight_Flat_Trailer");
	PlayerTextDrawLetterSize(playerid, velocimetro_pice[playerid][1], 0.141643, 1.149070);
	PlayerTextDrawTextSize(playerid, velocimetro_pice[playerid][1], 0.000000, 10.000000);
	PlayerTextDrawAlignment(playerid, velocimetro_pice[playerid][1], 2);
	PlayerTextDrawColor(playerid, velocimetro_pice[playerid][1], 8388863);
	PlayerTextDrawSetShadow(playerid, velocimetro_pice[playerid][1], 0);
	PlayerTextDrawSetOutline(playerid, velocimetro_pice[playerid][1], 1);
	PlayerTextDrawBackgroundColor(playerid, velocimetro_pice[playerid][1], 255);
	PlayerTextDrawFont(playerid, velocimetro_pice[playerid][1], 2);
	PlayerTextDrawSetProportional(playerid, velocimetro_pice[playerid][1], 1);

	velocimetro_pice[playerid][2] = CreatePlayerTextDraw(playerid, 581.117675, 358.219726, "Gas:_200");
	PlayerTextDrawLetterSize(playerid, velocimetro_pice[playerid][2], 0.135526, 1.081722);
	PlayerTextDrawAlignment(playerid, velocimetro_pice[playerid][2], 1);
	PlayerTextDrawColor(playerid, velocimetro_pice[playerid][2], 8388863);
	PlayerTextDrawSetShadow(playerid, velocimetro_pice[playerid][2], 0);
	PlayerTextDrawSetOutline(playerid, velocimetro_pice[playerid][2], 1);
	PlayerTextDrawBackgroundColor(playerid, velocimetro_pice[playerid][2], 255);
	PlayerTextDrawFont(playerid, velocimetro_pice[playerid][2], 2);
	PlayerTextDrawSetProportional(playerid, velocimetro_pice[playerid][2], 1);

	velocimetro_pice[playerid][3] = CreatePlayerTextDraw(playerid, 577.058471, 394.967498, "HP:_1000");
	PlayerTextDrawLetterSize(playerid, velocimetro_pice[playerid][3], 0.140235, 0.668860);
	PlayerTextDrawAlignment(playerid, velocimetro_pice[playerid][3], 2);
	PlayerTextDrawColor(playerid, velocimetro_pice[playerid][3], -1);
	PlayerTextDrawSetShadow(playerid, velocimetro_pice[playerid][3], 0);
	PlayerTextDrawSetOutline(playerid, velocimetro_pice[playerid][3], 1);
	PlayerTextDrawBackgroundColor(playerid, velocimetro_pice[playerid][3], 255);
	PlayerTextDrawFont(playerid, velocimetro_pice[playerid][3], 2);
	PlayerTextDrawSetProportional(playerid, velocimetro_pice[playerid][3], 1);

	/*TD_AccountSkin[playerid] = CreatePlayerTextDraw(playerid, 239.500000, 124.511131, "");
	PlayerTextDrawTextSize(playerid, TD_AccountSkin[playerid], 144.000000, 154.000000);
	PlayerTextDrawAlignment(playerid, TD_AccountSkin[playerid], 1);
	PlayerTextDrawColor(playerid, TD_AccountSkin[playerid], -1);
	PlayerTextDrawSetShadow(playerid, TD_AccountSkin[playerid], 0);
	PlayerTextDrawFont(playerid, TD_AccountSkin[playerid], 5);
	PlayerTextDrawBackgroundColor(playerid, TD_AccountSkin[playerid], 0x00000000);
	PlayerTextDrawSetProportional(playerid, TD_AccountSkin[playerid], 0);
	PlayerTextDrawSetPreviewModel(playerid, TD_AccountSkin[playerid], 305);
	PlayerTextDrawSetPreviewRot(playerid, TD_AccountSkin[playerid], -11.000000, 0.000000, -55.000000, 1.000000);*/
}

//****************************************************************************

resetPlayerVariables(playerid)
{

	AvisoPD[playerid] = 0;

	CompraVehiculo[playerid] = -1;
	mmaguebo_abusadol[playerid] = 0;
    slotselection[playerid] = -1;

	GunVendedor[playerid] = -1;
	GunCliente[playerid] = -1;
	GunObjeto[playerid] = 0;
	GunCantidad[playerid] = 0;
	GunPrecio[playerid] = 0;

	usuario_registro[playerid] = 0;
	altavoz_phone[playerid] = 0;
	refuerzos_pd[playerid] = 0;
	refuerzos_sd[playerid] = 0;

	Osql_vehicle[playerid] = 0;
	Pla_vehicle[playerid] = 999;
	Price_vehicle[playerid] = 0;

	SetPVarInt(playerid, "shrequest", INVALID_PLAYER_ID);

	NombreLicencia[playerid] = 999;
	PrecioLicencia[playerid] = 0;

	BigEar[playerid] = 0;
	NewbieTimer[playerid] = 0; 			VIPTimer[playerid] = 0;
	gLastCar[playerid] = 0;
	TicketOffer[playerid] = 999; 				TicketMoney[playerid] = 0;
	Paquetes[playerid] = 0;

	OwnableCarOffer[playerid] = 999; 			OwnableCarID[playerid] = 999; 		OwnableCarPrice[playerid] = 0; 		BlindFold[playerid] = 0;
  			AdminDuty[playerid] = 0; 			PlayerNeedsHelp[playerid] = 0;

						PuedeD[playerid] = 0;
	Facturing[playerid] = 0; 					fPay[playerid] = 0; 				fDest[playerid] = 0; 				fFacturer[playerid] = 0;
	Refueling[playerid] = -1;		 		RequestingBackup[playerid] = 0; 	PlayersChannel[playerid] = 999;
	Autorizado[playerid] = 0;
    Lineas[playerid] = 0; 						Carnada[playerid] = 0;
 	RegText[playerid] = 0;						RegConfig[playerid] = 0;			HidePM[playerid] = 0;

	FishCount[playerid] = 0;			FreezeLast[playerid] = 0; 			MoneyMessage[playerid] = 0;
	Condom[playerid] = 0;
				TakingLesson[playerid] = 0;         RStep[playerid] = 0;

                     OnDuty[playerid] = 0;               arr_Towing[playerid] = INVALID_VEHICLE_ID;


	MatsOffer[playerid] = 999;                  MatsPrice[playerid] = 0;            MatsAmount[playerid] = 0;           gPlayerUsingLoopingAnim[playerid] = 0;

 	VIPPrice[playerid] = 0;                     VIPOffer[playerid] = 999;
	FOffer[playerid] = 999;						FPrice[playerid] = 0; 				FAmount[playerid] = 0;
         JetPack[playerid] = 0;
                 EMSAccepted[playerid] = 999;        EMSCallTime[playerid] = 0;          RefillOffer[playerid] = 999;
	RepairCar[playerid] = 0;                    RepairOffer[playerid] = 999;        RepairPrice[playerid] = 0;
	RefillPrice[playerid] = 0;
	InviteOffer[playerid] = 999;                InviteFaction[playerid] = 0;        InviteFamily[playerid] = 255;       JustDuda[playerid] = -1;
	                JustAfk[playerid] = -1;
	HouseOffer[playerid] = 999;                 HousePrice[playerid] = 0;           House[playerid] = -1;
	JailPrice[playerid] = 0;                        JustReported[playerid] = -1;
	Spectating[playerid] = 0;                   GettingSpectated[playerid] = 999;   Spectate[playerid] = 999;           Unspec[playerid][sLocal] = 255;
	PlayerDrunkTime[playerid] = 0;           	PlayerDrunk[playerid] = 0;          Editing[playerid] = 0;
	AntiAbuso[playerid] = 0;            HaceAbuso[playerid] = 0;
    Blinded[playerid] = 0; 						Tied[playerid] = 0;         		Intentar[playerid] = 0;
	ShowRules[playerid] = 0;                    RulesTime[playerid] = 0;
    CommandSpamTimes[playerid] = 0;				CommandSpamUnmute[playerid] = 0;
	alm(QFA[playerid], "Nadie");
	//
	BarObject[playerid] = 0; ObjectBar[playerid] = 0;
	GiveKeysTo[playerid] = INVALID_PLAYER_ID;
	alm(InfoBan[playerid][bRazon], "Desconocida");
	alm(InfoBan[playerid][bEncargado], "Desconocido");
	alm(InfoBan[playerid][bFecha], "-");	

	InfoPersonaje[playerid][pLenador_free] = -1;
	return true;
}

public OnPlayerDisconnect(playerid, reason)
{
	if (InfoPersonaje[playerid][pBaneo] != 0) return 1; // new 11/01/2020
	if (usuario_registro[playerid] != 2) return 1; // new 11/01/2020
	new gformat[256];
	//última conexión & posiciones
	GetPlayerPos(playerid, InfoPersonaje[playerid][pPosicionX], InfoPersonaje[playerid][pPosicionY], InfoPersonaje[playerid][pPosicionZ]);
	GetPlayerFacingAngle(playerid, InfoPersonaje[playerid][pPosicionR]);
	InfoPersonaje[playerid][pInterior] = GetPlayerInterior(playerid);
	InfoPersonaje[playerid][pVirtualWorld] = GetPlayerVirtualWorld(playerid);
	InfoPersonaje[playerid][pUltimaConexion] = FechaHoy();
	InfoCuenta[playerid][jUltimaConexion] = FechaHoy();

	DestroyDynamic3DTextLabelEx(InfoPersonaje[playerid][pNameTag]);

	//repartos 21/01/2020
	if (RepartoID[playerid] != -1)
	{
		RepartoID[playerid] = -1;
		if (InfoPersonaje[playerid][pManoDerecha] == 55)
		{
			InfoPersonaje[playerid][pManoDerecha] = 0;
			InfoPersonaje[playerid][pManoDerechaCant] = 0;
		}
		if (InfoPersonaje[playerid][pManoIzquierda] == 55)
		{
			InfoPersonaje[playerid][pManoIzquierda] = 0;
			InfoPersonaje[playerid][pManoIzquierdaCant] = 0;
		}
	}
	//empleo
	Loop(playerid2, MAX_PLAYERS, 0) if (IsPlayerConnectedEx(playerid2) && YaOfrecioEmpleo[playerid2] == playerid)
	{
		YaOfrecioEmpleo[playerid2] = -1;
		SendClientMessage(playerid2, COLOR_YELLOW, "Se desconectó el jugador que le ofreciste empleo.");
	}
	//boombox
	if (InfoBoombox[playerid][BB_obj])
	{
		if (IsValidDynamicObject(InfoBoombox[playerid][BB_obj])) DestroyDynamicObject(InfoBoombox[playerid][BB_obj]);
		DestroyDynamic3DTextLabel(Text3D: InfoBoombox[playerid][BB_label]);
		InfoBoombox[playerid][BB_obj] = 0;
		tirar_objeto(51, 1, InfoBoombox[playerid][BB_x], InfoBoombox[playerid][BB_y], InfoBoombox[playerid][BB_z], InfoBoombox[playerid][BB_vw], InfoBoombox[playerid][BB_int], 1);
		if (InfoBoombox[playerid][BB_area])
		{
			foreach(Player, playerid2) if (IsPlayerInDynamicArea(playerid2, InfoBoombox[playerid][BB_area]))
			{
				StopAudioStreamForPlayer(playerid2);
				SendClientMessage(playerid2, COLOR_YELLOW, "* El dueño del boombox ha salido del servidor.");
				Streamer_Update(playerid2);
			}
		}
	}

	//respawn vehicle fabrica
	if (UsandoVehFabrica[playerid] != 0)
	{
		SetVehicleToRespawn(UsandoVehFabrica[playerid]);
	}
	//textdraw's
	PlayerTextDrawDestroy(playerid, TDping_fps[playerid]);
	PlayerTextDrawDestroy(playerid, draw_money[playerid]);
	
    DestroyPlayerProgressBar(playerid, velocimetro_bar[playerid]);
	Loop(x, 4, 0) { PlayerTextDrawDestroy(playerid, velocimetro_pice[playerid][x]); }
	Loop(x, 7, 0) { PlayerTextDrawDestroy(playerid, pCocheVS[playerid][x]); }
	Loop(x, 3, 0) { PlayerTextDrawDestroy(playerid, TD_Velocimetro[playerid][x]); }
	//variantes null
	KillTimer(Timer[playerid]);

	//llamadas gc
	KillTimer(ToqueLlamadaTimer[playerid]); //cmd_llamar
	if (PersonaEnLlamada[playerid] != -1) KillTimer(ToqueLlamadaTimer[PersonaEnLlamada[playerid]]); //cmd_llamar
	if (PersonaEnLlamada[playerid] != -1)
	{
		if (EnLlamada[PersonaEnLlamada[playerid]] == 3)
		{
			SendClientMessage(PersonaEnLlamada[playerid], COLOR_LIGHTRED, "Coste de la llamada: 1$");
			GivePlayerCash(PersonaEnLlamada[playerid], -1, "costo de llamada");
		}
	}
	for(new i=0; i<MAX_PLAYERS; i++) { if(PersonaEnLlamada[i] == playerid){SendClientMessage(i, COLOR_LIGHTRED, "Se ha cortado la línea..."); EnLlamada[i] = 0; PersonaEnLlamada[i] = -1; break;} }

	//estado crack
	if (GetPVarInt(playerid, "EstaCrack") == 1)
	{
		guardar_int_mysql("personajes", "Hospital", InfoPersonaje[playerid][pID], 1);
	    KillEMSQueue(playerid);
	}

	//llave prestada
	if (InfoPersonaje[playerid][pLlaveVehicle] != 0)
	{
		InfoVehiculo[InfoPersonaje[playerid][pLlaveVehicle]][vLlavePrestada] = -1;
	}

	//desconectar esposado
	if (GetPVarInt(playerid, "PlayerCuffed") == 1 && reason != 2)
	{
		InfoPersonaje[playerid][pSancionado] = 1;
		InfoPersonaje[playerid][pTiempoSancion] += 10*60;
		alm(InfoPersonaje[playerid][pBySancion], "SERVER");
		alm(InfoPersonaje[playerid][pRazonSancion], "Desconect (/esposar)");
		mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE personajes SET Sancionado = 1, TiempoSancion = 600, BySancion = '%e', RazonSancion = '%e' WHERE ID = '%d'",
		InfoPersonaje[playerid][pBySancion], InfoPersonaje[playerid][pRazonSancion], InfoPersonaje[playerid][pID]);
		mysql_tquery(DBInsanity, gformat);
	}

	//info desconexión
	static const reasonQuit[3][32] = {"Posible Crash", "Abandono", "Kick/Ban"};
	format(gformat, sizeof gformat, "%s ha salido del servidor. (%s)", NombreJugador(playerid), reasonQuit[reason]);
	ProxDetector(20.0, playerid, gformat, COLOR_YELLOW, COLOR_YELLOW, COLOR_YELLOW, COLOR_YELLOW, COLOR_YELLOW);

	//nombre temporal
	if (!isnull(InfoPersonaje[playerid][pNombre_Temporal]))
	{
		alm(InfoPersonaje[playerid][pNombre_Temporal], "");
		if (!isnull(InfoPersonaje[playerid][pNombre_Apellido])) SetPlayerName(playerid, InfoPersonaje[playerid][pNombre_Apellido]);
	}
	//nombre temporal pd
	if (!isnull(InfoPersonaje[playerid][pNombre_PD]))
	{
		alm(InfoPersonaje[playerid][pNombre_PD], "");
		if (!isnull(InfoPersonaje[playerid][pNombre_Apellido])) SetPlayerName(playerid, InfoPersonaje[playerid][pNombre_Apellido]);
	}
	
	if (ShowRules[playerid] == 1)
	{
		InfoPersonaje[playerid][pPosicionX] = GetPVarFloat(playerid, "rOldX");
		InfoPersonaje[playerid][pPosicionY] = GetPVarFloat(playerid, "rOldY");
		InfoPersonaje[playerid][pPosicionZ] = GetPVarFloat(playerid, "rOldZ");
		InfoPersonaje[playerid][pInterior] = GetPVarInt(playerid, "rOldInt");
		InfoPersonaje[playerid][pVirtualWorld] = GetPVarInt(playerid, "rOldVW");
	}
	if (Spectate[playerid] != 999)
	{
		InfoPersonaje[playerid][pPosicionX] = GetPVarFloat(playerid, "SpecPosX");
		InfoPersonaje[playerid][pPosicionY] = GetPVarFloat(playerid, "SpecPosY");
		InfoPersonaje[playerid][pPosicionZ] = GetPVarFloat(playerid, "SpecPosZ");
        InfoPersonaje[playerid][pInterior] = GetPVarInt(playerid, "SpecInt");
		InfoPersonaje[playerid][pVirtualWorld] = GetPVarInt(playerid, "SpecVW");
	    GettingSpectated[Spectate[playerid]] = 999;
	    Spectate[playerid] = 999;
	}
	
	//reporte activo
	Loop(x, MAX_REPORTS, 0) if (Reports[x][ReportFrom] == playerid)
	{
		Reports[x][ReportFrom] = 999;
		Reports[x][BeingUsed] = 0;
		Reports[x][TimeToExpire] = 0;
	}

	//actualiza sql positions
	new query[1028];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET PosicionX = '%f', PosicionY = '%f', PosicionZ = '%f', PosicionR = '%f', Vida = '%f', Chaleco = '%f', Interior = '%d', VirtualWorld = '%d', \
	UltimaConexion = '%e', TiempoSancion = '%d', Mano_derecha = '%d', Cantidad_mano_derecha = '%d', Mano_izquierda = '%d', Cantidad_mano_izquierda = '%d', Experiencia = '%d' WHERE ID = '%d'",
	InfoPersonaje[playerid][pPosicionX], InfoPersonaje[playerid][pPosicionY], InfoPersonaje[playerid][pPosicionZ], InfoPersonaje[playerid][pPosicionR], InfoPersonaje[playerid][pVida], InfoPersonaje[playerid][pChaleco], InfoPersonaje[playerid][pInterior], InfoPersonaje[playerid][pVirtualWorld],
	InfoPersonaje[playerid][pUltimaConexion], InfoPersonaje[playerid][pTiempoSancion], InfoPersonaje[playerid][pManoDerecha], InfoPersonaje[playerid][pManoDerechaCant], InfoPersonaje[playerid][pManoIzquierda], InfoPersonaje[playerid][pManoIzquierdaCant], InfoPersonaje[playerid][pExperiencia], InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, query);

	guardar_string_mysql("cuentas", "UltimaConexion", InfoCuenta[playerid][jID], InfoCuenta[playerid][jUltimaConexion]);
	//desconectar vehículos player.
	Quit_Vehicles(playerid);
 	return 1;
}

funcion MissileLaunchEx(Float:x, Float:y, Float:z, Float:radius, type)
{
	new string[170];
	CreateExplosionEx(x, y, z, type, radius);
	Misile_Launcher--;
	format(string, sizeof string, "[CENTRAL] Lanzamiento denotado en %0.2f - %0.2f - %0.2f (radio %f)", x, y, z, radius);
	SendRadioMessage(3, COLOR_RADIO, string);
	return 1;
}

funcion MissileLaunch(vehicleid)
{
	if (!GetVehicleModel(vehicleid))
	{
		SendRadioMessage(3, COLOR_RADIO, "[CENTRAL] Lanzamiento fallido, el vehículo no se encontró.");
		return 1;
	}
	new Float:x, Float:y, Float: z, string[170];
	GetVehiclePos(vehicleid, x, y, z);
	CreateExplosionEx(x, y, z, 2, 10.0);
	CreateExplosionEx(x, y, z, 2, 10.0);
	CreateExplosionEx(x, y, z, 2, 10.0);
	Misile_Launcher--;
	format(string, sizeof string, "[CENTRAL] Lanzamiento denotado en objetivo vehículo %d. ", vehicleid);
	SendRadioMessage(3, COLOR_RADIO, string);
	return 1;
}

//*******************funciones de puertas dinamicas*******************
forward IntentarPuenteTimer(playerid);
public IntentarPuenteTimer(playerid)
{
	IntentarPuente[playerid] = 0;
	SendClientMessage(playerid, COLOR_GRAD2, "[CMD] Puedes usar de nuevo el comando /puente.");
}
forward IntentarTimer(playerid);
public IntentarTimer(playerid)
{
	Intentar[playerid] = 0;
}
forward AntiAbusoTimer(playerid);
public AntiAbusoTimer(playerid)
{
	AntiAbuso[playerid] = 0;
}
funcion CloseCourtGate1()
{
	MoveDynamicObject(courtgates[0],2138.00000000,1316.72106934,7698.23632812,4);
	return 1;
}
funcion CloseCourtGate2()
{
	MoveDynamicObject(courtgates[1],2138.00292969,1290.96386719,7698.24169922,4);
	return 1;
}

funcion CloseDoorPJ(){ // Cierra las puertas del Poder Judicial.
		MoveDynamicObject(PJDOOR, 1440.71216, -1469.97485, 1615.26636,1.5); // Cerrado.
       	return 1;
}
funcion CloseDoorPJ2(){ // Cierra las puertas del Poder Judicial.
		MoveDynamicObject(PJDOOR2, 1422.93811, -1469.96814, 1616.24707,1.5); // Cerrado.
       	return 1;
}
funcion CloseDoorPJCELDA(){ // Cierra las CELDAS del Poder Judicial.
		MoveDynamicObject(PJCELDA, 1436.45630, -1479.50000, 1617.51892, 0.5); // Cerrado.
       	return 1;
}
funcion CloseDoorPJCELDA2(){ // Cierra las CELDAS del Poder Judicial.
		MoveDynamicObject(PJCELDA2, 1432.98425, -1479.50000, 1617.51892, 0.5); // Cerrado.
       	return 1;
}
funcion OpenDoorNG(){
       MoveDynamicObject(saem1, 2457.7949, -2254.7595, 26.90,5.0);
       return 1;
}
funcion OpenDoorNG2(){
       MoveDynamicObject(saem2, 2338.1057, -2353.8828, 15.2,5.0);
       return 1;
}
funcion OpenDoorNG3(){
       MoveDynamicObject(saem3, 2273.5957, -2663.2905, 15.2,5.0);
       return 1;
}
funcion OpenDoorNGSF(){
       MoveDynamicObject(saemSF, -1529.0433, 482.4390, 9.0600,5.0);
       return 1;
}
funcion OpenDoorNGLV(){
       MoveDynamicObject(saemLV, 135.24150, 1941.01294, 20.59000,5.0);
       return 1;
}
funcion OpenDoorNGLV2(){
       MoveDynamicObject(saemLV2, 348.98410, 1801.11804, 20.27390,5.0,   0.00000, 358.25000, 41.75000);
       return 1;
}

funcion CloseCell3()
{
	MoveDynamicObject(fen3,1429.50000000,-1554.80004883,4334.70019531,4);
	return 1;
}
funcion CloseCell4()
{
	MoveDynamicObject(fen4,1422.19995117,-1567.00000000,4334.60009766,4);
	return 1;
}
funcion CloseCell5()
{
	MoveDynamicObject(fen6,1430.19995117,-1566.69995117,4334.70019531,4);
	return 1;
}
funcion CloseCell6()
{
	MoveDynamicObject(fen5,1414.80004883,-1566.69995117,4334.60009766,4);
	return 1;
}

funcion GateClosepeaje1()
{
	MoveDynamicObject(peaje1,35.25729, -1516.96399, 4.24860, 2.5);
	return 1;
}

funcion GateClosepeaje2()
{
	MoveDynamicObject(peaje2,67.85014, -1545.88879, 4.02450, 2.5);
	return 1;
}

SetPlayerSpawn(playerid)
{
	SetPlayerTeam(playerid, 1);
	if (usuario_registro[playerid] == 0)
	{
		SetTimerEx("FreezePlayer", 1000, false, "i", playerid);
		state_on[playerid] = 2;
		//camera
		TogglePlayerSpectating(playerid, true);
		SetCameraIntro(playerid);
		PreguntaTestRol(playerid, 1, 0);
		return 1;
	}
	else
	{
		SetPlayerColor(playerid, 0xFFFFFF00);
		if (GetPVarInt(playerid, "SpecOff" ) == 1 )
		{
			SetPlayerPos(playerid, GetPVarFloat(playerid, "SpecPosX"), GetPVarFloat(playerid, "SpecPosY"), GetPVarFloat(playerid, "SpecPosZ"));
			SetPlayerInterior(playerid, GetPVarInt(playerid, "SpecInt"));
			SetPlayerVirtualWorld(playerid, GetPVarInt(playerid, "SpecVW"));
			SetPVarInt(playerid, "SpecOff", 0 );
			SetPVarInt(playerid, "SpecState", -1 );
			return 1;
		}
		new rand;
		switch (InfoPersonaje[playerid][pSancionado])
		{
		    case 1: // Jail OOC.
			{
			    new stringjail[256], minutos = (InfoPersonaje[playerid][pTiempoSancion]/60)+1;
			    InfoPersonaje[playerid][pTogTelefono] = 0;
				SetPlayerPos(playerid, 2687.3630, 2705.2537, 22.9472);
			    SetPlayerInterior(playerid, 0);
				SetPlayerVirtualWorld(playerid, playerid+1);
				SetPlayerSkin(playerid, 50);
				SendClientMessage(playerid, COLOR_LIGHTRED, "{A2DC35}[INFO]:{FFFFFF} Estás en prisión, tienes que esperar a acabar tu condena administrativa.");
				format(stringjail, sizeof(stringjail), "(Tiempo: %d minutos) - Has sido jaileado por %s, motivo: %s", minutos, InfoPersonaje[playerid][pBySancion], InfoPersonaje[playerid][pRazonSancion]);
				SendClientMessage(playerid, COLOR_GRAD2, stringjail);
				TogglePlayerControllable(playerid, false);
				return 1;
			}
		    case 2: // Jail LSPD.
			{
			    InfoPersonaje[playerid][pTogTelefono] = 0;
			    rand = random(sizeof(LSPDPrisonSpawns));
			    SetPlayerPos(playerid, LSPDPrisonSpawns[rand][0], LSPDPrisonSpawns[rand][1], LSPDPrisonSpawns[rand][2]);
			    LoadObjects(playerid);
				InfoPersonaje[playerid][pInterior] = 1;
				SetPlayerInterior(playerid, 1);
				InfoPersonaje[playerid][pVirtualWorld] = 1;
				SetPlayerVirtualWorld(playerid, 1);
				return 1;
			}
		    case 3: // Jail FBI.
			{
			    InfoPersonaje[playerid][pTogTelefono] = 0;
			    rand = random(sizeof(FBIPrisonSpawns));
			    SetPlayerPos(playerid, FBIPrisonSpawns[rand][0], FBIPrisonSpawns[rand][1], FBIPrisonSpawns[rand][2]);
			    LoadObjects(playerid);
				InfoPersonaje[playerid][pInterior] = 0;
				SetPlayerInterior(playerid, 0);
				InfoPersonaje[playerid][pVirtualWorld] = 0;
				SetPlayerVirtualWorld(playerid, 0);
				return 1;
			}
		    case 5: // Jail SAEM.
			{
			    InfoPersonaje[playerid][pTogTelefono] = 0;
	      		LoadObjects(playerid);
				SetPlayerInterior(playerid, 0);
				InfoPersonaje[playerid][pInterior] = 0;
				rand = random(sizeof(SAEMPrisonSpawns));
				SetPlayerPos(playerid, SAEMPrisonSpawns[rand][0], SAEMPrisonSpawns[rand][1], SAEMPrisonSpawns[rand][2]);
				SetPlayerVirtualWorld(playerid, 1000);
				SetPlayerSkin(playerid, 50);
				return 1;
			}
		    case 6: // Jail Dillimore.
			{
			    InfoPersonaje[playerid][pTogTelefono] = 0;
				SetPlayerInterior(playerid, 5);
				InfoPersonaje[playerid][pInterior] = 5;
				rand = random(sizeof(PrisonDillmore));
				SetPlayerPos(playerid, PrisonDillmore[rand][0], PrisonDillmore[rand][1], PrisonDillmore[rand][2]);
				SetPlayerVirtualWorld(playerid, 5);
				return 1;
			}
		}
		if (GetPVarInt(playerid, "desbug_muerte") == 1)
		{
			SetPosEx(playerid, PosSpawnBug[playerid][0], PosSpawnBug[playerid][1], PosSpawnBug[playerid][2], PosSpawnBug[playerid][3], PosIntBug[playerid], PosVwBug[playerid], 1);
			dar_vida(playerid, 25); dar_chaleco(playerid, 0);
			SetPVarInt(playerid, "EstaCrack", 1);
			estado_xdxdxd(playerid, 2);
			SetCameraBehindPlayer(playerid);
			DeletePVar(playerid, "desbug_muerte");
			if (InfoPersonaje[playerid][pDrogaTipo] != 0) EndEffectDroug(playerid, InfoPersonaje[playerid][pDrogaTipo]);
			return 1;
		}
	}
	return 1;
}

public OnPlayerDeath(playerid, killerid, reason)
{
	DestroyDynamic3DTextLabelEx(InfoPersonaje[playerid][pNameTag]);
	SetPlayerColor(playerid, 0xFFFFFF00);
	GetPlayerPos(playerid, PosSpawnBug[playerid][0], PosSpawnBug[playerid][1], PosSpawnBug[playerid][2]);
	GetPlayerFacingAngle(playerid, PosSpawnBug[playerid][3]);
	PosVwBug[playerid] = GetPlayerVirtualWorld(playerid);
	PosIntBug[playerid] = GetPlayerInterior(playerid);
	SetPVarInt(playerid, "desbug_muerte", 1);
	return 1;
}

SetCameraIntro(playerid)
{
	switch (random(10))
	{
		case 0:
		{
			InterpolateCameraPos(playerid, 2281.7715, -65.2711, 34.1500, 2281.7715, -65.2711, 34.1500, 1000);
			InterpolateCameraLookAt(playerid, 2281.9092, -64.2819, 33.9000, 2281.9092, -64.2819, 33.9000, 1000);
		}
		case 1:
		{
			InterpolateCameraPos(playerid, 2485.4258, -1083.5608, 52.2619, 2485.4258, -1083.5608, 52.2619, 1000);
			InterpolateCameraLookAt(playerid, 2484.6072, -1084.1326, 51.8069, 2484.6072, -1084.1326, 51.8069, 1000);
		}
		case 2:
		{
			InterpolateCameraPos(playerid, 2195.7659, -1073.9771, 51.9914, 2195.7659, -1073.9771, 51.9914, 1000);
			InterpolateCameraLookAt(playerid, 2196.5632, -1074.5787, 51.1814, 2196.5632, -1074.5787, 51.1814, 1000);
		}
		case 3:
		{
			InterpolateCameraPos(playerid, 1719.9323, -1302.8221, 22.6500, 1719.9323, -1302.8221, 22.6500, 1000);
			InterpolateCameraLookAt(playerid, 1719.5128, -1301.9159, 22.2500, 1719.5128, -1301.9159, 22.2500, 1000);
		}
		case 4:
		{
			InterpolateCameraPos(playerid, 931.6263, -1493.9928, 14.4238, 931.6263, -1493.9928, 14.4238, 1000);
			InterpolateCameraLookAt(playerid, 930.8324, -1493.3873, 14.3188, 930.8324, -1493.3873, 14.3188, 1000);
		}
		case 5:
		{
			InterpolateCameraPos(playerid, 1670.0333, -2259.6094, 1.0929, 1670.0333, -2259.6094, 1.0929, 1000);
			InterpolateCameraLookAt(playerid, 1669.2307, -2259.0149, 0.7628, 1669.2307, -2259.0149, 0.7628, 1000);
		}
		case 6:
		{
			InterpolateCameraPos(playerid, 152.5332, -1814.8130, 7.2081, 152.5332, -1814.8130, 7.2081, 1000);
			InterpolateCameraLookAt(playerid, 153.4565, -1815.1920, 6.9832, 153.4565, -1815.1920, 6.9832, 1000);
		}
		case 7:
		{
			InterpolateCameraPos(playerid, 2404.0757, -1750.1079, 22.5370, 2404.0757, -1750.1079, 22.5370, 1000);
			InterpolateCameraLookAt(playerid, 2404.9167, -1749.5699, 22.1820, 2404.9167, -1749.5699, 22.1820, 1000);
		}
		case 8:
		{
			InterpolateCameraPos(playerid, 1318.3506, -1141.1044, 27.1074, 1318.3506, -1141.1044, 27.1074, 1000);
			InterpolateCameraLookAt(playerid, 1317.3745, -1141.3120, 26.9375, 1317.3745, -1141.3120, 26.9375, 1000);
		}
		case 9:
		{
			InterpolateCameraPos(playerid, 2703.2417, -1669.2712, 19.1300, 2703.2417, -1669.2712, 19.1300, 1000);
			InterpolateCameraLookAt(playerid, 2703.6362, -1668.3546, 19.0701, 2703.6362, -1668.3546, 19.0701, 1000);
		}
	}
	return 1;
}

public OnPlayerSpawn(playerid)
{
	if (IsPlayerNPC(playerid)) return 1;
	if (state_on[playerid] == 1)
	{
		SetPlayerColor(playerid, 0x00000000); // color logeo
		Loop(x, 4, 0) { TextDrawShowForPlayer(playerid, TDLogin[x]); }
		ClearChat(playerid);
		state_on[playerid] = 2;
		// cámara de inicio
		TogglePlayerSpectating(playerid, true);
		SetCameraIntro(playerid);
		SyncPlayerTime(playerid);
		Dialog_Show(playerid, ShowLogin, DIALOG_STYLE_LIST, "{00AE57}Insanity {FFFFFF}RolePlay", "Iniciar sesión\nRegistrarse\nNotas de versión\nRedes e Información", "Continuar", "Salir");
		return 1;
	}
	if (usuario_registro[playerid] == 0)
	{
	    SendClientMessage(playerid, COLOR_WHITE, "{FFFF00}[ERROR]:{FFFFFF} No has ingresado correctamente al servidor!");
        Kick(playerid);
        return 1;
 	}
	SetPlayerSpawn(playerid);
	OnDuty[playerid] = 0;
	SetPlayerSkillLevel(playerid, WEAPONSKILL_PISTOL, 1);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_MICRO_UZI, 1);
	SyncPlayerTime(playerid);

	if (InfoPersonaje[playerid][pJobSkin] != 0) SetPlayerSkin(playerid, InfoPersonaje[playerid][pJobSkin]);
	else SetPlayerSkin(playerid, InfoPersonaje[playerid][pSkin]);

	//toys
	Loop(listitem, 7, 0) if (InfoPersonaje[playerid][ptColocado][listitem] != 0)
	{
		SetPlayerAttachedObject(playerid, listitem, InfoPersonaje[playerid][ptModelo][listitem], InfoPersonaje[playerid][ptHueso][listitem], InfoPersonaje[playerid][ptPosX][listitem], InfoPersonaje[playerid][ptPosY][listitem], InfoPersonaje[playerid][ptPosZ][listitem],
		InfoPersonaje[playerid][ptRotX][listitem], InfoPersonaje[playerid][ptRotY][listitem], InfoPersonaje[playerid][ptRotZ][listitem], InfoPersonaje[playerid][ptScaleX][listitem], InfoPersonaje[playerid][ptScaleY][listitem], InfoPersonaje[playerid][ptScaleZ][listitem],
		SetColorToy(InfoPersonaje[playerid][ptColor][listitem]));
	}

	//armas
	new ManoDer = InfoPersonaje[playerid][pManoDerecha], ManoIzq = InfoPersonaje[playerid][pManoIzquierda], Espalda = InfoPersonaje[playerid][pEspalda];
	if (ManoDer > 0)
	{
		PonerObjeto(playerid, 1, ManoDer);
		if (InfoInventario[ManoDer][IDArma] > 0)
		{
			GivePlayerWeapon(playerid, InfoInventario[ManoDer][IDArma], InfoPersonaje[playerid][pManoDerechaCant]);
		}
	}
	if (ManoIzq > 0) { PonerObjeto(playerid, 2, ManoIzq); }
	if (Espalda > 0) { PonerObjeto(playerid, 3, Espalda); }

	if (InfoPersonaje[playerid][pUsoMascara] != 0) // load mascara
	{
		SetPlayerAttachedObject(playerid, 0, 19036, 2, 0.090156, 0.045901, -0.005574, 90.110733, 81.638343, 4.973568, 0.887882, 1.139873, 1.000000);
		foreach(Player, i) ShowPlayerNameTagForPlayer(i, playerid, false);
	}

	return 1;
}

Dialog:ShowLogin(playerid, response, listitem, inputtext[])
{
	if (!response) return Kick(playerid);
	SetPlayerColor(playerid, 0x00000000); // color logeo
	switch (listitem)
	{
		case 0: Dialog_Show(playerid, IniciarSesion, DIALOG_STYLE_INPUT, "{FFFFFF}Iniciar sesión - {00AE57}Identificación", "{FFFFFF}Introduce un {00AE57}nombre de usuario o personaje{FFFFFF} para identificarte:\n", "Continuar", "Volver");
		case 1: Dialog_Show(playerid, Registrarse, DIALOG_STYLE_INPUT, "{FFFFFF}Registro - Fase: {00AE57}Usuario", "{FFFFFF}Introduce tu {00AE57}nombre de usuario{FFFFFF}, el cual te identificará en la base de datos:\n", "Continuar", "Volver");
		case 2:
		{
			new show_log_gm[3000];
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora se puede tener un job sin ser de empresa.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregados jobs: Repartidor, delincuente, leñador.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado el /ame y renovación del código del /me - /do\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Posibilidad de ver el interior de una casa para comprar. (/vercasa)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Comando para ver detalles de una propiedad en venta\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Cambios en la economía. (Sujeto a cambios)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Nueva ubicación del mercado negro.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Re-implementación de la /mascara\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora puedes guardar o sacar un auto propio. (/llaves)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora puedes ver las ubicaciones de los jobs legales. (/base)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Sistema de centralita para PD y SD. (/centralita)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Se ha eliminado el sistema de acentos y macros.\n");
			Dialog_Show(playerid, VolverLogin, DIALOG_STYLE_MSGBOX, "{FFFFFF}Notas de versión", show_log_gm, "Volver", "");
		}
		case 3: Dialog_Show(playerid, VolverLogin, DIALOG_STYLE_MSGBOX, "{FFFFFF}Redes e Información", "{FFFFFF}Sin agregar información...\n", "Volver", "");
	}
	return 1;
}

Dialog:VolverLogin(playerid, response, listitem, inputtext[])
{
	Dialog_Show(playerid, ShowLogin, DIALOG_STYLE_LIST, "{00AE57}Insanity {FFFFFF}RolePlay", "Iniciar Sesión\nRegistrarse\nNotas de versión\nRedes e Información", "Continuar", "Salir");
	return 1;
}

Dialog:Registrarse(playerid, response, listitem, inputtext[])
{
	if (!response) return Dialog_Show(playerid, ShowLogin, DIALOG_STYLE_LIST, "{00AE57}Insanity {FFFFFF}RolePlay", "Iniciar Sesión\nRegistrarse\nNotas de versión\nRedes e Información", "Continuar", "Salir");
	if (strlen(inputtext) < 5)
	{
		ClearChat(playerid);
		SendClientMessage(playerid, 0xEBEBEBFF, "El {00AE57}nombre de usuario{EBEBEB} no puede ser inferior a 4 carácteres.");
		Dialog_Show(playerid, Registrarse, DIALOG_STYLE_INPUT, "{FFFFFF}Registro - Fase: {00AE57}Usuario", "{FFFFFF}Introduce tu {00AE57}nombre de usuario{FFFFFF}, el cual te identificará en la base de datos:\n", "Continuar", "Volver");
		return 1;
	}
	if (strlen(inputtext) > 20)
	{
		SendClientMessage(playerid, 0xEBEBEBFF, "El {00AE57}nombre de usuario{EBEBEB} no puede sobrepasar los 20 carácteres.");
		Dialog_Show(playerid, Registrarse, DIALOG_STYLE_INPUT, "{FFFFFF}Registro - Fase: {00AE57}Usuario", "{FFFFFF}Introduce tu {00AE57}nombre de usuario{FFFFFF}, el cual te identificará en la base de datos:\n", "Continuar", "Volver");
		return 1;
	}
	if (!numero_y_letras(inputtext))
	{
		SendClientMessage(playerid, 0xEBEBEBFF, "El {00AE57}nombre de usuario{EBEBEB} sólo puede contener letras y números.");
		Dialog_Show(playerid, Registrarse, DIALOG_STYLE_INPUT, "{FFFFFF}Registro - Fase: {00AE57}Usuario", "{FFFFFF}Introduce tu {00AE57}nombre de usuario{FFFFFF}, el cual te identificará en la base de datos:\n", "Continuar", "Volver");
		return 1;
	}
	if (VerificarCuenta(inputtext))
	{
		SendClientMessage(playerid, 0xEBEBEBFF, "El {00AE57}nombre de usuario{EBEBEB} ya está en uso, prueba con otro.");
		Dialog_Show(playerid, Registrarse, DIALOG_STYLE_INPUT, "{FFFFFF}Registro - Fase: {00AE57}Usuario", "{FFFFFF}Introduce tu {00AE57}nombre de usuario{FFFFFF}, el cual te identificará en la base de datos:\n", "Continuar", "Volver");
		return 1;
	}
	alm(InfoCuenta[playerid][jNombre], inputtext);
	Dialog_Show(playerid, Registrarse2, DIALOG_STYLE_INPUT, "{FFFFFF}Registrarse - Fase: {00AE57}Contraseña", "{FFFFFF}Ahora introduce una {00AE57}contraseña{FFFFFF} con la cual ingresarás en tu cuenta:\n", "Continuar", "Volver");
	return 1;
}

Dialog:Registrarse2(playerid, response, listitem, inputtext[])
{
	if (!response) return Dialog_Show(playerid, Registrarse, DIALOG_STYLE_INPUT, "{FFFFFF}Registro - Fase: {00AE57}Usuario", "{FFFFFF}Introduce tu {00AE57}nombre de usuario{FFFFFF}, el cual te identificará en la base de datos:\n", "Continuar", "Volver");
	if (strlen(inputtext) < 5)
	{
		SendClientMessage(playerid, 0xEBEBEBFF, "La {00AE57}contraseña{FFFFFF} no puede ser inferior a 4 carácteres.");
		Dialog_Show(playerid, Registrarse2, DIALOG_STYLE_INPUT, "{FFFFFF}Registrarse - Fase: {00AE57}Contraseña", "{FFFFFF}Ahora introduce una {00AE57}contraseña{FFFFFF} con la cual ingresarás en tu cuenta:\n", "Continuar", "Volver");
		return 1;
	}
	if (strlen(inputtext) > 18)
	{
		SendClientMessage(playerid, 0xEBEBEBFF, "La {00AE57}contraseña{FFFFFF} no puede sobrepasar los 18 carácteres.");
		Dialog_Show(playerid, Registrarse2, DIALOG_STYLE_INPUT, "{FFFFFF}Registrarse - Fase: {00AE57}Contraseña", "{FFFFFF}Ahora introduce una {00AE57}contraseña{FFFFFF} con la cual ingresarás en tu cuenta:\n", "Continuar", "Volver");
		return 1;
	}
	foreach(new p: Player) if (conectado[p] == 1 && strcmp(inputtext, InfoCuenta[p][jNombre], true) == 0)
	{
		SendClientMessage(playerid, COLOR_GREY, "Ya han registrado o ingresado con el nombre de usuario que usaste, fuiste expulsado.");
		SetTimerEx("TimerKICK", 1000, false, "d", playerid);
		SendClientMessage(p, COLOR_YELLOW, "Alguien intento entrar hace poco a tu cuenta.");
		return 1;
	}
	conectado[playerid] = 1;
	//hash contraseña
	Loop(e, 10, 0) { InfoCuenta[playerid][jSalt][e] = random(79) + 47; }
	InfoCuenta[playerid][jSalt][10] = 0;
	SHA256_PassHash(inputtext, InfoCuenta[playerid][jSalt], InfoCuenta[playerid][jClave], 65);
	//diálogo
	new dialog[1028];
	strcat(dialog, "1. ¿Cuál es el apellido de soltera de mi madre?\n");
	strcat(dialog, "2. ¿Cuál es el nombre de mi mascota?\n");
	strcat(dialog, "3. ¿Cómo se llama mi primer amor?\n");
	strcat(dialog, "4. ¿Cuál es la fecha del cumpleaños de mi hermano(a)?\n");
	strcat(dialog, "5. ¿En qué colegio estudie en primaria?\n");
	strcat(dialog, "6. ¿Cuál es el nombre de mi mejor amigo?");
	Dialog_Show(playerid, Registrarse3, DIALOG_STYLE_LIST, "{FFFFFF}Registro - Fase: {00AE57}Pregunta de seguridad", dialog, "Continuar", "Volver");
	return 1;
}

Dialog:Registrarse3(playerid, response, listitem, inputtext[])
{
	if (!response) return Dialog_Show(playerid, Registrarse2, DIALOG_STYLE_INPUT, "{FFFFFF}Registrarse - Fase: {00AE57}Contraseña", "{FFFFFF}Ahora introduce una {00AE57}contraseña{FFFFFF} con la cual ingresarás en tu cuenta:\n", "Continuar", "Volver");
	switch (listitem)
	{
		case 0: alm(InfoCuenta[playerid][jPreguntaSeguridad], "¿Cuál es el apellido de soltera de mi madre?");
		case 1: alm(InfoCuenta[playerid][jPreguntaSeguridad], "¿Cuál es el nombre de mi mascota?");
		case 2: alm(InfoCuenta[playerid][jPreguntaSeguridad], "¿Cómo se llama mi primer amor?");
		case 3: alm(InfoCuenta[playerid][jPreguntaSeguridad], "¿Cuál es la fecha del cumpleaños de mi hermano(a)?");
		case 4: alm(InfoCuenta[playerid][jPreguntaSeguridad], "¿En qué colegio estudie en primaria?");
		case 5: alm(InfoCuenta[playerid][jPreguntaSeguridad], "¿Cuál es el nombre de mi mejor amigo?");
	}
	new dialog[1028], gformat[250];
	strcat(dialog, "{FFFFFF}Bien has escogido como pregunta de seguridad:\n");
	format(gformat, sizeof gformat, "{FF2F2F}%s\n\n", InfoCuenta[playerid][jPreguntaSeguridad]);
	strcat(dialog, gformat);
	strcat(dialog, "{FFFFFF}Ahora introduce la {00CCFF}respuesta de seguridad{FFFFFF}, recuerda tener esto de memoria,\n\
	{FFFFFF}dado que en un futuro la necesitarás para ingresar a tu cuenta.\n");
	Dialog_Show(playerid, Registrarse4, DIALOG_STYLE_INPUT, "{FFFFFF}Registro - Fase: {00AE57}Respuesta de seguridad", dialog, "Continuar", "Volver");
	return 1;
}

Dialog:Registrarse4(playerid, response, listitem, inputtext[])
{
	if (!response)
	{
		alm(InfoCuenta[playerid][jPreguntaSeguridad], "ninguna");
		new dialog[1028];
		strcat(dialog, "1. ¿Cuál es el apellido de soltera de mi madre?\n");
		strcat(dialog, "2. ¿Cuál es el nombre de mi mascota?\n");
		strcat(dialog, "3. ¿Cómo se llama mi primer amor?\n");
		strcat(dialog, "4. ¿Cuál es la fecha del cumpleaños de mi hermano(a)?\n");
		strcat(dialog, "5. ¿En qué colegio estudie en primaria?\n");
		strcat(dialog, "6. ¿Cuál es el nombre de mi mejor amigo?");
		Dialog_Show(playerid, Registrarse3, DIALOG_STYLE_LIST, "{FFFFFF}Registro - Fase: {00AE57}Pregunta de seguridad", dialog, "Continuar", "Volver");
		return 1;
	}
	if (strlen(inputtext) < 5)
	{
		SendClientMessage(playerid, 0xEBEBEBFF, "No puedes tener una respuesta con menos de 4 carácteres.");
		new dialog[1028], gformat[250];
		strcat(dialog, "{FFFFFF}Bien has escogido como pregunta de seguridad:\n");
		format(gformat, sizeof gformat, "{FF2F2F}%s\n\n", InfoCuenta[playerid][jPreguntaSeguridad]);
		strcat(dialog, gformat);
		strcat(dialog, "{FFFFFF}Ahora introduce la {00CCFF}respuesta de seguridad{FFFFFF}, recuerda tener esto de memoria,\n\
		{FFFFFF}dado que en un futuro la necesitarás para ingresar a tu cuenta.\n");
		Dialog_Show(playerid, Registrarse4, DIALOG_STYLE_INPUT, "{FFFFFF}Registro - Fase: {00AE57}Respuesta de seguridad", dialog, "Continuar", "Volver");
		return 1;
	}
	if (strlen(inputtext) > 33)
	{
		SendClientMessage(playerid, 0xEBEBEBFF, "No puedes tener una respuesta con más de 32 carácteres.");
		new dialog[1028], gformat[250];
		strcat(dialog, "{FFFFFF}Bien has escogido como pregunta de seguridad:\n");
		format(gformat, sizeof gformat, "{FF2F2F}%s\n\n", InfoCuenta[playerid][jPreguntaSeguridad]);
		strcat(dialog, gformat);
		strcat(dialog, "{FFFFFF}Ahora introduce la {00CCFF}respuesta de seguridad{FFFFFF}, recuerda tener esto de memoria,\n\
		{FFFFFF}dado que en un futuro la necesitarás para ingresar a tu cuenta.\n");
		Dialog_Show(playerid, Registrarse4, DIALOG_STYLE_INPUT, "{FFFFFF}Registro - Fase: {00AE57}Respuesta de seguridad", dialog, "Continuar", "Volver");
		return 1;
	}
	alm(InfoCuenta[playerid][jRespuestaSeguridad], inputtext);
	new dialog[2056], gformat[320];
	strcat(dialog, "{FFFFFF}Comprueba que los datos sean los correctos, cuando confirmes pasarás a realizar una prueba de rol.\n\n");
	format(gformat, sizeof gformat, "{00AE57}Nombre de usuario: {FFFFFF}%s\n", InfoCuenta[playerid][jNombre]); strcat(dialog, gformat);
	format(gformat, sizeof gformat, "{FFBF00}Pregunta de seguridad: {FFFFFF}%s\n", InfoCuenta[playerid][jPreguntaSeguridad]); strcat(dialog, gformat);
	format(gformat, sizeof gformat, "{00CCFF}Respuesta de seguridad: {FFFFFF}%s\n", InfoCuenta[playerid][jRespuestaSeguridad]); strcat(dialog, gformat);
	Dialog_Show(playerid, Registrarse5, DIALOG_STYLE_MSGBOX, "{FFFFFF}Registro - Fase: {00AE57}Confirmación", dialog, "Confirmar", "Volver");
	return 1;
}

Dialog:Registrarse5(playerid, response, listitem, inputtext[])
{
	if (!response)
	{
		alm(InfoCuenta[playerid][jRespuestaSeguridad], "ninguna");
		new dialog[1028], gformat[250];
		strcat(dialog, "{FFFFFF}Bien has escogido como pregunta de seguridad:\n");
		format(gformat, sizeof gformat, "{FF2F2F}%s\n\n", InfoCuenta[playerid][jPreguntaSeguridad]);
		strcat(dialog, gformat);
		strcat(dialog, "{FFFFFF}Ahora introduce la {00CCFF}respuesta de seguridad{FFFFFF}, recuerda tener esto de memoria,\n\
		{FFFFFF}dado que en un futuro la necesitarás para ingresar a tu cuenta.\n");
		Dialog_Show(playerid, Registrarse4, DIALOG_STYLE_INPUT, "{FFFFFF}Registro - Fase: {00AE57}Respuesta de seguridad", dialog, "Continuar", "Volver");
		return 1;
	}
	PreguntaTestRol(playerid, 1, 0);
	return 1;
}

Dialog:IniciarSesion(playerid, response, listitem, inputtext[])
{
	if (!response) return Dialog_Show(playerid, ShowLogin, DIALOG_STYLE_LIST, "{00AE57}Insanity {FFFFFF}RolePlay", "Iniciar Sesión\nRegistrare\nNotas de versión\nRedes e Información", "Continuar", "Salir");
	new newid = -1, query[256];
	//verificación
	if (VerificarPersonaje(inputtext))
	{
		reg_int(0, "CuentaID", newid);
		cache_unset_active();
	}
	//comprobar
	if (newid != -1) mysql_format(DBInsanity, query, sizeof query, "SELECT * FROM cuentas WHERE Nombre = '%e' OR ID = '%d' LIMIT 1", inputtext, newid);
	else mysql_format(DBInsanity, query, sizeof query, "SELECT * FROM cuentas WHERE Nombre = '%e' LIMIT 1", inputtext);
	mysql_query(DBInsanity, query);
	//muestra
	if (cache_num_rows() > 0)
	{
		reg_int(0, "ID", InfoCuenta[playerid][jID]);
		reg_string(0, "Nombre", InfoCuenta[playerid][jNombre], MAX_PLAYER_NAME);
		foreach(new p: Player) if (conectado[p] == 1 && strcmp(InfoCuenta[playerid][jNombre], InfoCuenta[p][jNombre], true) == 0)
		{
			Kick(playerid);
			SendClientMessage(p, 0xFF6347AA, "Alguien intento entrar hace poco a tu cuenta.");
			return 1;
		}
		reg_string(0, "Clave", InfoCuenta[playerid][jClave], 65);
		reg_string(0, "Salt", InfoCuenta[playerid][jSalt], 11);
		cache_unset_active();
		conectado[playerid] = 1;
		new gformat[512];
		format(gformat, sizeof gformat, "{FFFFFF}Se ha identificado la cuenta {00AE57}%s{FFFFFF}\n\
		Escribe la contraseña correcta de la cuenta y presiona {00AE57}Ingresar{FFFFFF}.\n\n\
		Si no es tu cuenta la identificada, puedes dejar el servidor haciendo clic en {00AE57}salir{FFFFFF}\n", InfoCuenta[playerid][jNombre]);
		Dialog_Show(playerid, IniciarSesion2, DIALOG_STYLE_PASSWORD, "{FFFFFF}Iniciar sesión - {00AE57}Contraseña", gformat, "Ingresar", "Salir");
	}
	else
	{
		SendClientMessage(playerid, 0xEBEBEBFF, "El {00AE57}nombre de usuario o personaje{EBEBEB} no existente o inválidos.");
		Dialog_Show(playerid, IniciarSesion, DIALOG_STYLE_INPUT, "{FFFFFF}Iniciar sesión - {00AE57}Identificación", "{FFFFFF}Introduce un {00AE57}nombre de usuario o personaje{FFFFFF} para identificarte:\n", "Continuar", "Volver");
	}
	return 1;
}

Dialog:IniciarSesion2(playerid, response, listitem, inputtext[])
{
	if (!response) return Kick(playerid);
	new Salted_Key[65];
	SHA256_PassHash(inputtext, InfoCuenta[playerid][jSalt], Salted_Key, 65);
	if (strcmp(Salted_Key, InfoCuenta[playerid][jClave]) == 0)
	{
		ClearChat(playerid);
		new query[170];
		mysql_format(DBInsanity, query, sizeof query, "SELECT * FROM cuentas WHERE ID = '%d'", InfoCuenta[playerid][jID]);
		mysql_query(DBInsanity, query);
		if (cache_num_rows() > 0)
		{
			reg_string(0, "IP", InfoCuenta[playerid][jIP], 18);
			reg_int(0, "JotoOtaku", InfoCuenta[playerid][jAdmin]);
			reg_string(0, "Apodo", InfoCuenta[playerid][jApodo], 12);
			reg_int(0, "EncFac", InfoCuenta[playerid][jEncFac]);
			reg_string(0, "PreguntaSeguridad", InfoCuenta[playerid][jPreguntaSeguridad], 256);
			reg_string(0, "RespuestaSeguridad", InfoCuenta[playerid][jRespuestaSeguridad], 256);
			reg_int(0, "VIP", InfoCuenta[playerid][jVIP]);
			reg_int(0, "DiaVIP", InfoCuenta[playerid][jDiaVIP]);
			reg_int(0, "MesVIP", InfoCuenta[playerid][jMesVIP]);
			reg_int(0, "CoinsVIP", InfoCuenta[playerid][jCoinsVIP]);
			reg_int(0, "DobleExp", InfoCuenta[playerid][jDobleExp]);
			reg_int(0, "Multicuenta", InfoCuenta[playerid][jMulticuenta]);
			reg_int(0, "OtakuN_N", InfoCuenta[playerid][jBaneo]);
			reg_int(0, "TimeBanUwU", InfoCuenta[playerid][jTiempoBaneo]);
			reg_string(0, "FueBan", InfoCuenta[playerid][jCulpableBaneo], 24);
			reg_string(0, "ReasonBanUwU", InfoCuenta[playerid][jRazonBaneo], 256);
			reg_string(0, "MomentBan", InfoCuenta[playerid][jFechaBaneo], 256);
			reg_int(0, "Regalo", InfoCuenta[playerid][jRegalo]);
			reg_string(0, "FechaRegistro", InfoCuenta[playerid][jFechaRegistro], 256);
			reg_string(0, "UltimaConexion", InfoCuenta[playerid][jUltimaConexion], 256);
			reg_int(0, "Ranuras", InfoCuenta[playerid][jRanuras]);
			cache_unset_active();
		}
		if (InfoCuenta[playerid][jBaneo] != 0) return MuestraBloqueoCuenta(playerid);
		// detector de si tiene pregunta de seguridad:
		if (!strcmp(InfoCuenta[playerid][jPreguntaSeguridad], "ninguna", true))
		{
			new dialog[512] =
			"{EBEBEB}Desde el {FF2F2F}24/02/2020{EBEBEB}, cada cuenta tendrá una medida extra de seguridad.\n\
			Sigue los pasos a continuación, te recomendamos tomar nota de todo esto o memorizarlo.\n\n\
			Presiona '{00AE57}continuar{EBEBEB}' para mostrarte un listado de opciones a elegir  para tu {FF2F2F}Pregunta de seguridad{EBEBEB}.\n";
			Dialog_Show(playerid, ShowPregunta, DIALOG_STYLE_MSGBOX, "Pregunta de seguridad", dialog, "Continuar", "Salir");
			return 1;
		}
		//seguridad 24/02/2020
		new ex_ip[18];
		GetPlayerIp(playerid, ex_ip, sizeof ex_ip);
		if (strcmp(ex_ip, InfoCuenta[playerid][jIP], true))
		{
			IntentosRespuesta[playerid] = 3;
			new dialog[1580], gformat[250];
			strcat(dialog, "{EBEBEB}Nuestro sistema ha detectado que la {FF2F2F}IP{EBEBEB} que estás usando es distinta a la de tu última sesión.\n");
			strcat(dialog, "{EBEBEB}Para continuar con la sesión de tu cuenta, necesitaremos que respondas la pregunta de seguridad.\n\n");
			format(gformat, sizeof gformat, "{EBEBEB}Pregunta de seguridad: {FFBF00}%s\n\n", InfoCuenta[playerid][jPreguntaSeguridad]);
			strcat(dialog, gformat);
			format(gformat, sizeof gformat, "{EBEBEB}Si te equivocas puedes intentarlo {00AE57}%d{EBEBEB} veces más.\n", IntentosRespuesta[playerid]);
			strcat(dialog, gformat);
			Dialog_Show(playerid, ShowRespuesta, DIALOG_STYLE_INPUT, "Medida de seguridad", dialog, "Continuar", "Salir");
			return 1;
		}
		VerPersonajes(playerid);
	}
	else
	{
		if (intentos_load[playerid] == 3) return Kick(playerid);
		ClearChat(playerid);
		intentos_load[playerid] += 1;
		new gformat[512];
		format(gformat, sizeof gformat, "{00AE57}%s{FFFFFF}, la contraseña escrita no es válida. Intentos restantes: {b00000}%d{FFFFFF}\n\
		Por favor introduce una contraseña correcta, de lo contrario serás expulsado.\n", InfoCuenta[playerid][jNombre], 3-intentos_load[playerid]);
		Dialog_Show(playerid, IniciarSesion2, DIALOG_STYLE_PASSWORD, "{FFFFFF}Iniciar sesión - {00AE57}Contraseña", gformat, "Ingresar", "Salir");
	}
	return 1;
}

VerPersonajes(playerid)
{
	new query[310];
	mysql_format(DBInsanity, query, sizeof query, "SELECT * FROM personajes WHERE CuentaID = '%d'", InfoCuenta[playerid][jID]);
	mysql_tquery(DBInsanity, query, "OnShowCharacters", "d", playerid);
	return 1;
}

forward OnShowCharacters(playerid);
public OnShowCharacters(playerid)
{
	new query[210];
	format(query, sizeof query, "{FFFFFF}Personajes de {00AE57}%s", InfoCuenta[playerid][jNombre]);
	if (cache_num_rows() > 0)
	{
		new gformat[320], dialog[2056] = "Personaje (Nivel)\tÚltima conexión\n", count = 0;
		Loop(id, cache_num_rows(), 0)
		{
			new pDI, pName[MAX_PLAYER_NAME], pLevel, pConexion[256];
			reg_int(id, "ID", pDI);
			reg_string(id, "Nombre_Apellido", pName, MAX_PLAYER_NAME);
			reg_int(id, "Nivel", pLevel);
			reg_string(id, "UltimaConexion", pConexion, 256);
			//dialogo string
			format(gformat, sizeof gformat, "{FFFFFF}%s ({00AE57}%d{FFFFFF})\t{E24D32}%s\n", pName, pLevel, pConexion);
			strcat(dialog, gformat);
			//selector personaje
			format(gformat, sizeof gformat, "id_rows%d", count);
			SetPVarInt(playerid, gformat, pDI);
			count++;
		}
		SetPVarInt(playerid, "max_pjs", count);
		if (InfoCuenta[playerid][jRanuras] != count) strcat(dialog, "{FFBF00}Crear nuevo personaje");
		Dialog_Show(playerid, SeleccionarPersonaje, DIALOG_STYLE_TABLIST_HEADERS, query, dialog, "Continuar", "Salir");
	}
	else
	{
		new dialogito[1028];
		strcat(dialogito, "{FFFFFF}Nuestro nuevo {FFBF00}sistema de cuentas{FFFFFF} te permite tener múltiples personajes en una sola.\n\n");
		strcat(dialogito, "{FFFFFF}El máximo de personajes actualmente de tu cuenta es de {00AE57}3 ranuras{FFFFFF}, si deseas una extra\n");
		strcat(dialogito, "{FFFFFF}contacta al desarrollador, para aumentar tu máximo de personajes.\n\n");
		strcat(dialogito, "{FFFFFF}Estás a punto de crear un personaje, introduce el nombre del mismo.\nEs importante usar el formato {00AE57}Nombre_Apellido{FFFFFF} (Ejemplo: {00CC00}Camila_Rodriguez{FFFFFF})\n");
		Dialog_Show(playerid, CrearPersonaje, DIALOG_STYLE_INPUT, "{FFFFFF}Personajes - {00AE57}Creación", dialogito, "Continuar", "Salir");
		SetPVarInt(playerid, "QhacerPj", 1);
	}
	return 1;
}

Dialog:CrearPersonaje(playerid, response, listitem, inputtext[])
{
	if (!response)
	{
		if (GetPVarInt(playerid, "max_pjs") == 1) Kick(playerid);
		else VerPersonajes(playerid);
		return 1;
	}
	if (isnull(inputtext) || strlen(inputtext) > 23)
	{
		SendClientMessage(playerid, 0xEBEBEBFF, "El {00AE57}Nombre_Apellido{EBEBEB} no puede ser superior a 24 carácteres.");
		Dialog_Show(playerid, CrearPersonaje, DIALOG_STYLE_INPUT, "{FFFFFF}Personajes - {00AE57}Creación", "{FFFFFF}Estás a punto de crear un personaje, introduce el nombre del mismo.\nEs importante usar el formato {00AE57}Nombre_Apellido{FFFFFF} (Ejemplo: {00CC00}Camila_Rodriguez{FFFFFF})\n", "Continuar", "Volver");
		return 1;
	}
	if (!IsValidRoleplayName(inputtext))
	{
		SendClientMessage(playerid, 0xEBEBEBFF, "El {00AE57}Nombre_Apellido{EBEBEB} no es RolePlay, sigue bien el formato de ejemplo.");
		Dialog_Show(playerid, CrearPersonaje, DIALOG_STYLE_INPUT, "{FFFFFF}Personajes - {00AE57}Creación", "{FFFFFF}Estás a punto de crear un personaje, introduce el nombre del mismo.\nEs importante usar el formato {00AE57}Nombre_Apellido{FFFFFF} (Ejemplo: {00CC00}Camila_Rodriguez{FFFFFF})\n", "Continuar", "Volver");
		return 1;
	}
	if (VerificarPersonaje(inputtext))
	{
		SendClientMessage(playerid, 0xEBEBEBFF, "El {00AE57}Nombre_Apellido{EBEBEB} ya está en uso, intenta con otro.");
		Dialog_Show(playerid, CrearPersonaje, DIALOG_STYLE_INPUT, "{FFFFFF}Personajes - {00AE57}Creación", "{FFFFFF}Estás a punto de crear un personaje, introduce el nombre del mismo.\nEs importante usar el formato {00AE57}Nombre_Apellido{FFFFFF} (Ejemplo: {00CC00}Camila_Rodriguez{FFFFFF})\n", "Continuar", "Volver");
		return 1;
	}
	if (!strcmp(InfoCuenta[playerid][jNombre], inputtext, true))
	{
		alm(InfoPersonaje[playerid][pNombre_Apellido], inputtext);
		InfoPersonaje[playerid][pCuentaID] = InfoCuenta[playerid][jID];
		new gdialog[256];
		format(gdialog, sizeof gdialog, "{FFFFFF}Bien, ¿cuál es el sexo que tendrá {00AE57}%s{FFFFFF}?\n", InfoPersonaje[playerid][pNombre_Apellido]);
		Dialog_Show(playerid, ShowSexo, DIALOG_STYLE_MSGBOX, "{FFFFFF}Personajes - {00AE57}Sexo", gdialog, "Masculino", "Femenino");
	}
	else
	{
		if (VerificarCuenta(inputtext))
		{
			SendClientMessage(playerid, 0xEBEBEBFF, "El {00AE57}Nombre_Apellido{EBEBEB} ya está en uso como una cuenta 'nombre de usuario', intenta con otro.");
			Dialog_Show(playerid, CrearPersonaje, DIALOG_STYLE_INPUT, "{FFFFFF}Personajes - {00AE57}Creación", "{FFFFFF}Estás a punto de crear un personaje, introduce el nombre del mismo.\nEs importante usar el formato {00AE57}Nombre_Apellido{FFFFFF} (Ejemplo: {00CC00}Camila_Rodriguez{FFFFFF})\n", "Continuar", "Volver");
			return 1;
		}
		alm(InfoPersonaje[playerid][pNombre_Apellido], inputtext);
		InfoPersonaje[playerid][pCuentaID] = InfoCuenta[playerid][jID];
		new gdialog[256];
		format(gdialog, sizeof gdialog, "{FFFFFF}Bien, ¿cuál es el sexo que tendrá {00AE57}%s{FFFFFF}?\n", InfoPersonaje[playerid][pNombre_Apellido]);
		Dialog_Show(playerid, ShowSexo, DIALOG_STYLE_MSGBOX, "{FFFFFF}Personajes - {00AE57}Sexo", gdialog, "Masculino", "Femenino");
	}
	return 1;
}

Dialog:ShowSexo(playerid, response, listitem, inputtext[])
{
	new gdialog[512];
	if (response)
	{
		InfoPersonaje[playerid][pSexo] = 1;
		format(gdialog, sizeof gdialog, "{FFFFFF}Bien, eres de sexo {0000AA}masculino{FFFFFF}\n¿Qué edad tendrá {00AE57}%s{FFFFFF}?\n", InfoPersonaje[playerid][pNombre_Apellido]);
 	}
	else
	{
		InfoPersonaje[playerid][pSexo] = 2;
		format(gdialog, sizeof gdialog, "{FFFFFF}Bien, eres de sexo {880000}femenino{FFFFFF}\n¿Qué edad tendrá {00AE57}%s{FFFFFF}?\n", InfoPersonaje[playerid][pNombre_Apellido]);
	}
	Dialog_Show(playerid, ShowEdad, DIALOG_STYLE_INPUT, "{FFFFFF}Personajes - {00AE57}Edad", gdialog, "Continuar", "Volver");
	return 1;
}

Dialog:ShowEdad(playerid, response, listitem, inputtext[])
{
	new gdialog[512];
	if (!response)
	{
		format(gdialog, sizeof gdialog, "{FFFFFF}Bien, ¿cuál es el sexo que tendrá {00AE57}%s{FFFFFF}?\n", InfoPersonaje[playerid][pNombre_Apellido]);
		Dialog_Show(playerid, ShowSexo, DIALOG_STYLE_MSGBOX, "{FFFFFF}Personajes - {00AE57}Sexo", gdialog, "Masculino", "Femenino");
		return 1;
	}
	if (strval(inputtext) < 15 || strval(inputtext) > 70)
	{
		SendClientMessage(playerid, 0xEBEBEBFF, "El mínimo de edad es de 15 años, y el máximo de 70 años.");
		format(gdialog, sizeof gdialog, "{FFFFFF}¿Qué edad tendrá {00AE57}%s{FFFFFF}?\n", InfoPersonaje[playerid][pNombre_Apellido]);
		Dialog_Show(playerid, ShowEdad, DIALOG_STYLE_INPUT, "{FFFFFF}Personajes - {00AE57}Edad", gdialog, "Continuar", "Volver");
		return 1;
	}
	InfoPersonaje[playerid][pEdad] = strval(inputtext);
	format(gdialog, sizeof gdialog, "{00AE57}%s{FFFFFF} tiene %d años\n¿Cómo llegó a la ciudad de Los Santos?\n", InfoPersonaje[playerid][pNombre_Apellido], InfoPersonaje[playerid][pEdad]);
	Dialog_Show(playerid, ShowLlegada, DIALOG_STYLE_MSGBOX, "{FFFFFF}Personajes - {00AE57}Llegada", gdialog, "En avión", "En Tren");
	return 1;
}

Dialog:ShowLlegada(playerid, response, listitem, inputtext[])
{
	ClearChat(playerid);
	new ciudad[18], gformat[256], gdialog[1028], sexo[16];
	if (response) InfoPersonaje[playerid][pCiudad] = 1, ciudad = "en avión";
	else InfoPersonaje[playerid][pCiudad] = 2, ciudad = "en tren";
	if (InfoPersonaje[playerid][pSexo] == 1) sexo = "masculino";
	else sexo = "femenino";
	format(gformat, sizeof gformat, "{FFFFFF}Nombre y apellido: {00AE57}%s\n", InfoPersonaje[playerid][pNombre_Apellido]); strcat(gdialog, gformat);
	format(gformat, sizeof gformat, "{FFFFFF}Edad: {00AE57}%d años\n", InfoPersonaje[playerid][pEdad]); strcat(gdialog, gformat);
	format(gformat, sizeof gformat, "{FFFFFF}Sexo: {00AE57}%s\n", sexo); strcat(gdialog, gformat);
	format(gformat, sizeof gformat, "{FFFFFF}Llega a la ciudad: {00AE57}%s\n\n", ciudad); strcat(gdialog, gformat);
	strcat(gdialog, "{FFFFFF}Sí los datos son correctos presiona '{00CC00}jugar{FFFFFF}' sino en '{FFBF00}volver{FFFFFF}'\n");
	Dialog_Show(playerid, EmpezarPersonaje, DIALOG_STYLE_MSGBOX, "{FFFFFF}Personajes - {00AE57}Confirmación", gdialog, "Jugar", "Volver");
	return 1;
}

Dialog:EmpezarPersonaje(playerid, response, listitem, inputtext[])
{
	if (!response) return Dialog_Show(playerid, ShowLlegada, DIALOG_STYLE_MSGBOX, "{FFFFFF}Personajes - {00AE57}Llegada", "{FFFFFF}¿Cómo llegó a la ciudad de Los Santos?\n", "En avión", "En Tren");
	TogglePlayerSpectating(playerid, false);
	StopAudioStreamForPlayer(playerid);
	if (InfoPersonaje[playerid][pCiudad] == 1)
	{
		InfoPersonaje[playerid][pPosicionX] = 1971.1675;
		InfoPersonaje[playerid][pPosicionY] = -2237.1450;
		InfoPersonaje[playerid][pPosicionZ] = 13.4659;
		InfoPersonaje[playerid][pPosicionR] = 2.0172;
		InfoPersonaje[playerid][pInterior] = 0;
		InfoPersonaje[playerid][pVirtualWorld] = 0;
	}
	else
	{
		InfoPersonaje[playerid][pPosicionX] = 1772.9576;
		InfoPersonaje[playerid][pPosicionY] = -1920.9810;
		InfoPersonaje[playerid][pPosicionZ] = 13.5518;
		InfoPersonaje[playerid][pPosicionR] = 309.0634;
		InfoPersonaje[playerid][pInterior] = 0;
		InfoPersonaje[playerid][pVirtualWorld] = 0;
	}
	if (InfoPersonaje[playerid][pSexo] == 1)
	{
		InfoPersonaje[playerid][pSkin] = 26;
		SetPlayerSkin(playerid, 26);
	}
	else
	{
		InfoPersonaje[playerid][pSkin] = 41;
		SetPlayerSkin(playerid, 41);
	}
	if (!isnull(InfoPersonaje[playerid][pNombre_Apellido])) SetPlayerName(playerid, DesbugNombre(playerid));
	else { Kick(playerid); return 1; }
	printf("%s logueado.", InfoPersonaje[playerid][pNombre_Apellido]);
	InfoPersonaje[playerid][pVida] = 100;
	SetPlayerHealth(playerid, 100);
	usuario_registro[playerid] = 2;
	mmaguebo_abusadol[playerid] = 0;
	ClearChat(playerid);
	new gformat[256];
	Loop(x, 4, 0) { TextDrawHideForPlayer(playerid, TDLogin[x]); }
	format(gformat, sizeof gformat, "Hola {00AE57}%s{EBEBEB}, registraste con éxito en {00AE57}Insanity{EBEBEB} Roleplay.", NombreJugador(playerid));
	SendClientMessage(playerid, 0xEBEBEBFF, gformat);
	SendClientMessage(playerid, 0xEBEBEBFF, "Puedes usar {00AE57}/gps{EBEBEB} para ubicar lugares de la ciudad, si tienes dudas usa {00AE57}/soporte{EBEBEB}.");
	InfoPersonaje[playerid][pNivel] = 1;
	SetPlayerScore(playerid, InfoPersonaje[playerid][pNivel]);
	state_on[playerid] = 3; // logeado
	new DineroInicial = 5000; // Stats de Inicio.
	InfoPersonaje[playerid][pDinero] = DineroInicial;
	GivePlayerMoney(playerid, DineroInicial);
	SetPosEx(playerid, InfoPersonaje[playerid][pPosicionX], InfoPersonaje[playerid][pPosicionY], InfoPersonaje[playerid][pPosicionZ], InfoPersonaje[playerid][pPosicionR], InfoPersonaje[playerid][pInterior], InfoPersonaje[playerid][pVirtualWorld], 0);
	TogglePlayerControllable(playerid, true);
	SetCameraBehindPlayer(playerid);
	SetPlayerColor(playerid, 0xFFFFFF00);
	//ShowModelSelectionMenu(playerid, skinlist, "Selecciona un skin");
	InfoPersonaje[playerid][pFechaRegistro] = FechaHoy();
	InfoPersonaje[playerid][pUltimaConexion] = FechaHoy();
	InfoPersonaje[playerid][pCuentaID] = InfoCuenta[playerid][jID];
	DarObjeto(playerid, 50, 1);
	new query[2056];
	mysql_format(DBInsanity, query, sizeof query, "INSERT INTO personajes (Nombre_Apellido, CuentaID, PosicionX, PosicionY, PosicionZ, PosicionR, Interior, VirtualWorld, Skin, Nivel, Sexo, Edad, Ciudad, BolosUwU, FechaRegistro, UltimaConexion) \
	VALUES ('%e', '%d', '%f', '%f', '%f', '%f', '%d', '%d', '%d', '%d', '%d', '%d', '%d', '%d', '%e', '%e')",
	NombreOriginal(playerid),
	InfoPersonaje[playerid][pCuentaID],
	InfoPersonaje[playerid][pPosicionX],
	InfoPersonaje[playerid][pPosicionY],
	InfoPersonaje[playerid][pPosicionZ],
	InfoPersonaje[playerid][pPosicionR],
	InfoPersonaje[playerid][pInterior],
	InfoPersonaje[playerid][pVirtualWorld],
	InfoPersonaje[playerid][pSkin],
	InfoPersonaje[playerid][pNivel],
	InfoPersonaje[playerid][pSexo],
	InfoPersonaje[playerid][pEdad],
	InfoPersonaje[playerid][pCiudad],
	DineroInicial,
	InfoPersonaje[playerid][pFechaRegistro],
	InfoPersonaje[playerid][pUltimaConexion]);
	mysql_tquery(DBInsanity, query, "CreatePlayerCharacter", "i", playerid);
	return 1;
}

forward CreatePlayerCharacter(playerid);
public CreatePlayerCharacter(playerid)
{
	InfoPersonaje[playerid][pID] = cache_insert_id();
	cache_unset_active();
	InfoPersonaje[playerid][pDocumento] = 2000000+InfoPersonaje[playerid][pID];
	guardar_int_mysql("personajes", "Documento", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pDocumento]);
	InfoPersonaje[playerid][pTelefono] = 100000+random(899999);
	guardar_int_mysql("personajes", "Telefono", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTelefono]);
	return 1;
}

Dialog:SeleccionarPersonaje(playerid, response, listitem, inputtext[])
{
	if (!response) return Kick(playerid);
	if (GetPVarInt(playerid, "max_pjs") == listitem)
	{
		Dialog_Show(playerid, CrearPersonaje, DIALOG_STYLE_INPUT, "{FFFFFF}Personajes - {00AE57}Creación", "{FFFFFF}Estás a punto de crear un personaje, introduce el nombre del mismo.\nEs importante usar el formato {00AE57}Nombre_Apellido{FFFFFF} (Ejemplo: {00CC00}Camila_Rodriguez{FFFFFF})\n", "Continuar", "Volver");
		SetPVarInt(playerid, "QhacerPj", 2);
		return 1;
	}
	new ID = listitem, StrPVar[40];
	format(StrPVar, sizeof StrPVar, "id_rows%d", ID);
	new x = GetPVarInt(playerid, StrPVar);
	new query[170];
	mysql_format(DBInsanity, query, sizeof query, "SELECT * FROM personajes WHERE ID = '%d'", x);
	mysql_query(DBInsanity, query);
	if (cache_num_rows() > 0)
	{
		reg_int(0, "ID", InfoPersonaje[playerid][pID]);
		reg_string(0, "Nombre_Apellido", InfoPersonaje[playerid][pNombre_Apellido], MAX_PLAYER_NAME);
		reg_int(0, "CuentaID", InfoPersonaje[playerid][pCuentaID]);
		reg_float(0, "PosicionX", InfoPersonaje[playerid][pPosicionX]);
		reg_float(0, "PosicionY", InfoPersonaje[playerid][pPosicionY]);
		reg_float(0, "PosicionZ", InfoPersonaje[playerid][pPosicionZ]);
		reg_float(0, "PosicionR", InfoPersonaje[playerid][pPosicionR]);
		reg_int(0, "Interior", InfoPersonaje[playerid][pInterior]);
		reg_int(0, "VirtualWorld", InfoPersonaje[playerid][pVirtualWorld]);
		reg_float(0, "Vida", InfoPersonaje[playerid][pVida]);
		reg_float(0, "Chaleco", InfoPersonaje[playerid][pChaleco]);
		reg_int(0, "Skin", InfoPersonaje[playerid][pSkin]);
		reg_int(0, "Nivel", InfoPersonaje[playerid][pNivel]);
		reg_int(0, "Experiencia", InfoPersonaje[playerid][pExperiencia]);
		reg_int(0, "HorasOn", InfoPersonaje[playerid][pHorasOn]);
		reg_int(0, "Sexo", InfoPersonaje[playerid][pSexo]);
		reg_int(0, "Edad", InfoPersonaje[playerid][pEdad]);
		reg_int(0, "Ciudad", InfoPersonaje[playerid][pCiudad]);
		reg_int(0, "Acento", InfoPersonaje[playerid][pAcento]);
		reg_int(0, "EstiloPelea", InfoPersonaje[playerid][pEstiloPelea]);
		reg_int(0, "BolosUwU", InfoPersonaje[playerid][pDinero]);
		reg_int(0, "BanescoOwO", InfoPersonaje[playerid][pBanco]);
		reg_int(0, "LiderFaccion", InfoPersonaje[playerid][pLider]);
		reg_int(0, "MiembroFaccion", InfoPersonaje[playerid][pMiembro]);
		reg_int(0, "Rango", InfoPersonaje[playerid][pRango]);
		reg_int(0, "Bolsillo_1", InfoPersonaje[playerid][pBolsillo][0]);
		reg_int(0, "Cantidad_bolsillo_1", InfoPersonaje[playerid][pBolsilloCant][0]);
		reg_int(0, "Bolsillo_2", InfoPersonaje[playerid][pBolsillo][1]);
		reg_int(0, "Cantidad_bolsillo_2", InfoPersonaje[playerid][pBolsilloCant][1]);
		reg_int(0, "Bolsillo_3", InfoPersonaje[playerid][pBolsillo][2]);
		reg_int(0, "Cantidad_bolsillo_3", InfoPersonaje[playerid][pBolsilloCant][2]);
		reg_int(0, "Bolsillo_4", InfoPersonaje[playerid][pBolsillo][3]);
		reg_int(0, "Cantidad_bolsillo_4", InfoPersonaje[playerid][pBolsilloCant][3]);
		reg_int(0, "Bolsillo_5", InfoPersonaje[playerid][pBolsillo][4]);
		reg_int(0, "Cantidad_bolsillo_5", InfoPersonaje[playerid][pBolsilloCant][4]);
		reg_int(0, "Bolsillo_6", InfoPersonaje[playerid][pBolsillo][5]);
		reg_int(0, "Cantidad_bolsillo_6", InfoPersonaje[playerid][pBolsilloCant][5]);
		reg_int(0, "Bolsillo_7", InfoPersonaje[playerid][pBolsillo][6]);
		reg_int(0, "Cantidad_bolsillo_7", InfoPersonaje[playerid][pBolsilloCant][6]);
		reg_int(0, "Bolsillo_8", InfoPersonaje[playerid][pBolsillo][7]);
		reg_int(0, "Cantidad_bolsillo_8", InfoPersonaje[playerid][pBolsilloCant][7]);
		reg_int(0, "Bolsillo_9", InfoPersonaje[playerid][pBolsillo][8]);
		reg_int(0, "Cantidad_bolsillo_9", InfoPersonaje[playerid][pBolsilloCant][8]);
		reg_int(0, "Bolsillo_10", InfoPersonaje[playerid][pBolsillo][9]);
		reg_int(0, "Cantidad_bolsillo_10", InfoPersonaje[playerid][pBolsilloCant][9]);
		reg_int(0, "Mano_derecha", InfoPersonaje[playerid][pManoDerecha]);
		reg_int(0, "Cantidad_mano_derecha", InfoPersonaje[playerid][pManoDerechaCant]);
		reg_int(0, "Mano_izquierda", InfoPersonaje[playerid][pManoIzquierda]);
		reg_int(0, "Cantidad_mano_izquierda", InfoPersonaje[playerid][pManoIzquierdaCant]);
		reg_int(0, "Espalda", InfoPersonaje[playerid][pEspalda]);
		reg_int(0, "Cantidad_espalda", InfoPersonaje[playerid][pEspaldaCant]);
		reg_int(0, "ChatVIP", InfoPersonaje[playerid][pTogVIP]);
		reg_int(0, "Muerto", InfoPersonaje[playerid][pMuerto]);
		reg_int(0, "Hospital", InfoPersonaje[playerid][pHospital]);
		reg_int(0, "BalaCabeza", InfoPersonaje[playerid][pBalaCabeza]);
		reg_int(0, "Jails", InfoPersonaje[playerid][pJails]);
		reg_int(0, "Arrestos", InfoPersonaje[playerid][pArrestos]);
		reg_int(0, "Sancionado", InfoPersonaje[playerid][pSancionado]);
		reg_int(0, "TiempoSancion", InfoPersonaje[playerid][pTiempoSancion]);
		reg_string(0, "BySancion", InfoPersonaje[playerid][pBySancion], MAX_PLAYER_NAME);
		reg_string(0, "RazonSancion", InfoPersonaje[playerid][pRazonSancion], 128);
		reg_int(0, "Materiales", InfoPersonaje[playerid][pMateriales]);
		reg_int(0, "Ganzuas", InfoPersonaje[playerid][pGanzuas]);
		reg_int(0, "Telefono", InfoPersonaje[playerid][pTelefono]);
		reg_int(0, "Velocimetro", InfoPersonaje[playerid][pTogVelocimetro]);
		reg_int(0, "Casa", InfoPersonaje[playerid][pCasa1]);
		reg_int(0, "Casa2", InfoPersonaje[playerid][pCasa2]);
		reg_int(0, "Negocio", InfoPersonaje[playerid][pNegocio1]);
		reg_int(0, "Negocio2", InfoPersonaje[playerid][pNegocio2]);
		reg_int(0, "Licencia1", InfoPersonaje[playerid][pLicencia][0]);
		reg_int(0, "Licencia2", InfoPersonaje[playerid][pLicencia][1]);
		reg_int(0, "Licencia3", InfoPersonaje[playerid][pLicencia][2]);
		reg_int(0, "Licencia4", InfoPersonaje[playerid][pLicencia][3]);
		reg_int(0, "Licencia5", InfoPersonaje[playerid][pLicencia][4]);
		reg_int(0, "Mascara", InfoPersonaje[playerid][pMascara]);
		reg_int(0, "UsoMascara", InfoPersonaje[playerid][pUsoMascara]);
		reg_int(0, "OtakuN_N", InfoPersonaje[playerid][pBaneo]);
		reg_int(0, "TimeBanUwU", InfoPersonaje[playerid][pTiempoBaneo]);
		reg_string(0, "FueBan", InfoPersonaje[playerid][pCulpableBaneo], 24);
		reg_string(0, "ReasonBanUwU", InfoPersonaje[playerid][pRazonBaneo], 256);
		reg_string(0, "MomentBan", InfoPersonaje[playerid][pFechaBaneo], 256);
		reg_int(0, "BlockBug", InfoPersonaje[playerid][pBlockBug]);
		reg_int(0, "BlockG", InfoPersonaje[playerid][pTogGraffiti]);
		reg_int(0, "Documento", InfoPersonaje[playerid][pDocumento]);
		reg_int(0, "Habilidad1", InfoPersonaje[playerid][pHabilidad][0]);
		reg_int(0, "Habilidad2", InfoPersonaje[playerid][pHabilidad][1]);
		reg_int(0, "Habilidad3", InfoPersonaje[playerid][pHabilidad][2]);
		reg_int(0, "Habilidad4", InfoPersonaje[playerid][pHabilidad][3]);
		reg_int(0, "Habilidad5", InfoPersonaje[playerid][pHabilidad][4]);
		reg_int(0, "YaCobre", InfoPersonaje[playerid][YaCobre]);
		reg_int(0, "Estrellas", InfoPersonaje[playerid][pEstrellas]);
		reg_int(0, "LimiteRobos", InfoPersonaje[playerid][pLimiteRobos]);
		reg_int(0, "Frecuencia_radio", InfoPersonaje[playerid][pFrecuencia_radio]);
		reg_int(0, "TipoSpawn", InfoPersonaje[playerid][pTipoSpawn]);
		reg_string(0, "AutoRespuestaSMS", InfoPersonaje[playerid][pAutoRespuestaSMS], 128);
		reg_int(0, "BlockAD", InfoPersonaje[playerid][pBlockAD]);
		reg_int(0, "AdvAD", InfoPersonaje[playerid][pAdvAD]);
		reg_int(0, "Pescados", InfoPersonaje[playerid][pPescados]);
		reg_int(0, "RecordPesoPes", InfoPersonaje[playerid][pRecordPesoPes]);
		reg_string(0, "EstadoYo", InfoPersonaje[playerid][pEstadoYo], 128);
		reg_string(0, "NombreContacto1", nombre_contacto[playerid][0], MAX_PLAYER_NAME);
		reg_int(0, "NumeroContacto1", InfoPersonaje[playerid][pNumeroContacto][0]);
		reg_string(0, "NombreContacto2", nombre_contacto[playerid][1], MAX_PLAYER_NAME);
		reg_int(0, "NumeroContacto2", InfoPersonaje[playerid][pNumeroContacto][1]);
		reg_string(0, "NombreContacto3", nombre_contacto[playerid][2], MAX_PLAYER_NAME);
		reg_int(0, "NumeroContacto3", InfoPersonaje[playerid][pNumeroContacto][2]);
		reg_string(0, "NombreContacto4", nombre_contacto[playerid][3], MAX_PLAYER_NAME);
		reg_int(0, "NumeroContacto4", InfoPersonaje[playerid][pNumeroContacto][3]);
		reg_string(0, "NombreContacto5", nombre_contacto[playerid][4], MAX_PLAYER_NAME);
		reg_int(0, "NumeroContacto5", InfoPersonaje[playerid][pNumeroContacto][4]);
		reg_string(0, "NombreContacto6", nombre_contacto[playerid][5], MAX_PLAYER_NAME);
		reg_int(0, "NumeroContacto6", InfoPersonaje[playerid][pNumeroContacto][5]);
		reg_string(0, "NombreContacto7", nombre_contacto[playerid][6], MAX_PLAYER_NAME);
		reg_int(0, "NumeroContacto7", InfoPersonaje[playerid][pNumeroContacto][6]);
		reg_string(0, "NombreContacto8", nombre_contacto[playerid][7], MAX_PLAYER_NAME);
		reg_int(0, "NumeroContacto8", InfoPersonaje[playerid][pNumeroContacto][7]);
		reg_string(0, "NombreContacto9", nombre_contacto[playerid][8], MAX_PLAYER_NAME);
		reg_int(0, "NumeroContacto9", InfoPersonaje[playerid][pNumeroContacto][8]);
		reg_string(0, "NombreContacto10", nombre_contacto[playerid][9], MAX_PLAYER_NAME);
		reg_int(0, "NumeroContacto10", InfoPersonaje[playerid][pNumeroContacto][9]);
		reg_int(0, "JobSkin", InfoPersonaje[playerid][pJobSkin]);
		reg_int(0, "RestriccionRobo", InfoPersonaje[playerid][pRestriccionRobo]);
		reg_int(0, "FalsoDocumento", InfoPersonaje[playerid][pFalsoDocumento]);
		reg_string(0, "FalsoNombre", InfoPersonaje[playerid][pFalsoNombre], MAX_PLAYER_NAME);
		reg_string(0, "FechaRegistro", InfoPersonaje[playerid][pFechaRegistro], 256);
		reg_string(0, "UltimaConexion", InfoPersonaje[playerid][pUltimaConexion], 256);
		//accesorios
		new gformat[512];
		reg_string(0, "Toy1", gformat, 512);
		sscanf(gformat, "p<|>ddfffffffffd",
		InfoPersonaje[playerid][ptModelo][0], InfoPersonaje[playerid][ptHueso][0], InfoPersonaje[playerid][ptPosX][0], InfoPersonaje[playerid][ptPosY][0], InfoPersonaje[playerid][ptPosZ][0], InfoPersonaje[playerid][ptRotX][0],
		InfoPersonaje[playerid][ptRotY][0], InfoPersonaje[playerid][ptRotZ][0], InfoPersonaje[playerid][ptScaleX][0], InfoPersonaje[playerid][ptScaleY][0], InfoPersonaje[playerid][ptScaleZ][0], InfoPersonaje[playerid][ptColocado][0]);
		reg_string(0, "Toy2", gformat, 512);
		sscanf(gformat, "p<|>ddfffffffffd",
		InfoPersonaje[playerid][ptModelo][1], InfoPersonaje[playerid][ptHueso][1], InfoPersonaje[playerid][ptPosX][1], InfoPersonaje[playerid][ptPosY][1], InfoPersonaje[playerid][ptPosZ][1], InfoPersonaje[playerid][ptRotX][1],
		InfoPersonaje[playerid][ptRotY][1], InfoPersonaje[playerid][ptRotZ][1], InfoPersonaje[playerid][ptScaleX][1], InfoPersonaje[playerid][ptScaleY][1], InfoPersonaje[playerid][ptScaleZ][1], InfoPersonaje[playerid][ptColocado][1]);
		reg_string(0, "Toy3", gformat, 512);
		sscanf(gformat, "p<|>ddfffffffffd",
		InfoPersonaje[playerid][ptModelo][2], InfoPersonaje[playerid][ptHueso][2], InfoPersonaje[playerid][ptPosX][2], InfoPersonaje[playerid][ptPosY][2], InfoPersonaje[playerid][ptPosZ][2], InfoPersonaje[playerid][ptRotX][2],
		InfoPersonaje[playerid][ptRotY][2], InfoPersonaje[playerid][ptRotZ][2], InfoPersonaje[playerid][ptScaleX][2], InfoPersonaje[playerid][ptScaleY][2], InfoPersonaje[playerid][ptScaleZ][2], InfoPersonaje[playerid][ptColocado][2]);
		reg_string(0, "Toy4", gformat, 512);
		sscanf(gformat, "p<|>ddfffffffffd",
		InfoPersonaje[playerid][ptModelo][3], InfoPersonaje[playerid][ptHueso][3], InfoPersonaje[playerid][ptPosX][3], InfoPersonaje[playerid][ptPosY][3], InfoPersonaje[playerid][ptPosZ][3], InfoPersonaje[playerid][ptRotX][3],
		InfoPersonaje[playerid][ptRotY][3], InfoPersonaje[playerid][ptRotZ][3], InfoPersonaje[playerid][ptScaleX][3], InfoPersonaje[playerid][ptScaleY][3], InfoPersonaje[playerid][ptScaleZ][3], InfoPersonaje[playerid][ptColocado][3]);
		reg_string(0, "Toy5", gformat, 512);
		sscanf(gformat, "p<|>ddfffffffffd",
		InfoPersonaje[playerid][ptModelo][4], InfoPersonaje[playerid][ptHueso][4], InfoPersonaje[playerid][ptPosX][4], InfoPersonaje[playerid][ptPosY][4], InfoPersonaje[playerid][ptPosZ][4], InfoPersonaje[playerid][ptRotX][4],
		InfoPersonaje[playerid][ptRotY][4], InfoPersonaje[playerid][ptRotZ][4], InfoPersonaje[playerid][ptScaleX][4], InfoPersonaje[playerid][ptScaleY][4], InfoPersonaje[playerid][ptScaleZ][4], InfoPersonaje[playerid][ptColocado][4]);
		reg_string(0, "Toy6", gformat, 512);
		sscanf(gformat, "p<|>ddfffffffffd",
		InfoPersonaje[playerid][ptModelo][5], InfoPersonaje[playerid][ptHueso][5], InfoPersonaje[playerid][ptPosX][5], InfoPersonaje[playerid][ptPosY][5], InfoPersonaje[playerid][ptPosZ][5], InfoPersonaje[playerid][ptRotX][5],
		InfoPersonaje[playerid][ptRotY][5], InfoPersonaje[playerid][ptRotZ][5], InfoPersonaje[playerid][ptScaleX][5], InfoPersonaje[playerid][ptScaleY][5], InfoPersonaje[playerid][ptScaleZ][5], InfoPersonaje[playerid][ptColocado][5]);
		reg_string(0, "Toy7", gformat, 512);
		sscanf(gformat, "p<|>ddfffffffffd",
		InfoPersonaje[playerid][ptModelo][6], InfoPersonaje[playerid][ptHueso][6], InfoPersonaje[playerid][ptPosX][6], InfoPersonaje[playerid][ptPosY][6], InfoPersonaje[playerid][ptPosZ][6], InfoPersonaje[playerid][ptRotX][6],
		InfoPersonaje[playerid][ptRotY][6], InfoPersonaje[playerid][ptRotZ][6], InfoPersonaje[playerid][ptScaleX][6], InfoPersonaje[playerid][ptScaleY][6], InfoPersonaje[playerid][ptScaleZ][6], InfoPersonaje[playerid][ptColocado][6]);
		reg_string(0, "Toy8", gformat, 512);
		sscanf(gformat, "p<|>ddfffffffffd",
		InfoPersonaje[playerid][ptModelo][7], InfoPersonaje[playerid][ptHueso][7], InfoPersonaje[playerid][ptPosX][7], InfoPersonaje[playerid][ptPosY][7], InfoPersonaje[playerid][ptPosZ][7], InfoPersonaje[playerid][ptRotX][7],
		InfoPersonaje[playerid][ptRotY][7], InfoPersonaje[playerid][ptRotZ][7], InfoPersonaje[playerid][ptScaleX][7], InfoPersonaje[playerid][ptScaleY][7], InfoPersonaje[playerid][ptScaleZ][7], InfoPersonaje[playerid][ptColocado][7]);
		reg_string(0, "Toy9", gformat, 512);
		sscanf(gformat, "p<|>ddfffffffffd",
		InfoPersonaje[playerid][ptModelo][8], InfoPersonaje[playerid][ptHueso][8], InfoPersonaje[playerid][ptPosX][8], InfoPersonaje[playerid][ptPosY][8], InfoPersonaje[playerid][ptPosZ][8], InfoPersonaje[playerid][ptRotX][8],
		InfoPersonaje[playerid][ptRotY][8], InfoPersonaje[playerid][ptRotZ][8], InfoPersonaje[playerid][ptScaleX][8], InfoPersonaje[playerid][ptScaleY][8], InfoPersonaje[playerid][ptScaleZ][8], InfoPersonaje[playerid][ptColocado][8]);
		reg_string(0, "Toy10", gformat, 512);
		sscanf(gformat, "p<|>ddfffffffffd",
		InfoPersonaje[playerid][ptModelo][9], InfoPersonaje[playerid][ptHueso][9], InfoPersonaje[playerid][ptPosX][9], InfoPersonaje[playerid][ptPosY][9], InfoPersonaje[playerid][ptPosZ][9], InfoPersonaje[playerid][ptRotX][9],
		InfoPersonaje[playerid][ptRotY][9], InfoPersonaje[playerid][ptRotZ][9], InfoPersonaje[playerid][ptScaleX][9], InfoPersonaje[playerid][ptScaleY][9], InfoPersonaje[playerid][ptScaleZ][9], InfoPersonaje[playerid][ptColocado][9]);
		reg_int(0, "Cinturon_1", InfoPersonaje[playerid][pCinturon][0]);
		reg_int(0, "Cantidad_cinturon_1", InfoPersonaje[playerid][pCinturonCant][0]);
		reg_int(0, "Cinturon_2", InfoPersonaje[playerid][pCinturon][1]);
		reg_int(0, "Cantidad_cinturon_2", InfoPersonaje[playerid][pCinturonCant][1]);
		reg_int(0, "Cinturon_3", InfoPersonaje[playerid][pCinturon][2]);
		reg_int(0, "Cantidad_cinturon_3", InfoPersonaje[playerid][pCinturonCant][2]);
		reg_int(0, "Cinturon_4", InfoPersonaje[playerid][pCinturon][3]);
		reg_int(0, "Cantidad_cinturon_4", InfoPersonaje[playerid][pCinturonCant][3]);
		reg_int(0, "Cinturon_5", InfoPersonaje[playerid][pCinturon][4]);
		reg_int(0, "Cantidad_cinturon_5", InfoPersonaje[playerid][pCinturonCant][4]);
		reg_int(0, "Cinturon_6", InfoPersonaje[playerid][pCinturon][5]);
		reg_int(0, "Cantidad_cinturon_6", InfoPersonaje[playerid][pCinturonCant][5]);
		reg_int(0, "ColorToy1", InfoPersonaje[playerid][ptColor][0]);
		reg_int(0, "ColorToy2", InfoPersonaje[playerid][ptColor][1]);
		reg_int(0, "ColorToy3", InfoPersonaje[playerid][ptColor][2]);
		reg_int(0, "ColorToy4", InfoPersonaje[playerid][ptColor][3]);
		reg_int(0, "ColorToy5", InfoPersonaje[playerid][ptColor][4]);
		reg_int(0, "ColorToy6", InfoPersonaje[playerid][ptColor][5]);
		reg_int(0, "ColorToy7", InfoPersonaje[playerid][ptColor][6]);
		reg_int(0, "ColorToy8", InfoPersonaje[playerid][ptColor][7]);
		reg_int(0, "ColorToy9", InfoPersonaje[playerid][ptColor][8]);
		reg_int(0, "ColorToy10", InfoPersonaje[playerid][ptColor][9]);
		reg_int(0, "Contrato", InfoPersonaje[playerid][pContrato]);
		reg_int(0, "Empleo", InfoPersonaje[playerid][pEmpleo]);
		reg_int(0, "Adiccion_1", InfoPersonaje[playerid][pAdiccion][0]);
		reg_int(0, "Adiccion_2", InfoPersonaje[playerid][pAdiccion][1]);
		reg_int(0, "Adiccion_3", InfoPersonaje[playerid][pAdiccion][2]);
		reg_int(0, "Droga_tipo", InfoPersonaje[playerid][pDrogaTipo]);
		reg_int(0, "Droga_tiempo", InfoPersonaje[playerid][pDrogaTiempo]);
		reg_int(0, "Droga_power", InfoPersonaje[playerid][pDrogaPower]);
		reg_int(0, "AbstinenceEffect", InfoPersonaje[playerid][pAbstinenceEffect]);
		reg_int(0, "AbstinenceTime", InfoPersonaje[playerid][pAbstinenceTime]);
		reg_int(0, "TogManos", InfoPersonaje[playerid][pTogManos]);
		reg_int(0, "TogCajero", InfoPersonaje[playerid][pTogCajero]);
		reg_int(0, "TogAnuncios", InfoPersonaje[playerid][pTogAnuncios]);
		reg_int(0, "TogTelefono", InfoPersonaje[playerid][pTogTelefono]);
		reg_int(0, "TimerAnuncios", InfoPersonaje[playerid][pTimerAnuncios]);
		reg_int(0, "TogOOC", InfoPersonaje[playerid][pTogOOC]);
		reg_int(0, "TogMusic", InfoPersonaje[playerid][pTogMusic]);
		reg_int(0, "TogRadio", InfoPersonaje[playerid][pTogRadio]);
		reg_int(0, "TogPortatil", InfoPersonaje[playerid][pTogPortatil]);
		reg_int(0, "TogFaccion", InfoPersonaje[playerid][pTogFaccion]);
		reg_int(0, "RepartoViajes", InfoPersonaje[playerid][pRepartoViajes]);
		cache_unset_active();
	}
	if (!isnull(InfoPersonaje[playerid][pNombre_Apellido])) SetPlayerName(playerid, DesbugNombre(playerid));
	else { Kick(playerid); return 1; }
	printf("DB: %s | Nombre real: %s", InfoPersonaje[playerid][pNombre_Apellido]);
	//otro:
	usuario_registro[playerid] = 1;
	mmaguebo_abusadol[playerid] = 0;
	CargarCuenta(playerid);
	return 1;
}

Dialog:ShowRespuesta(playerid, response, listitem, inputtext[])
{
	if (!response) return Kick(playerid);
	if (!strcmp(InfoCuenta[playerid][jRespuestaSeguridad], inputtext, true))
	{
		VerPersonajes(playerid);
	}
	else
	{
		IntentosRespuesta[playerid]--;
		if (IntentosRespuesta[playerid] == 0)
		{
			SendClientMessage(playerid, COLOR_GENERAL, "Has sido expulsado del servidor, no respondiste la pregunta de seguridad correctamente.");
			SetTimerEx("TimerKICK", 1000, false, "d", playerid);
			IntentosRespuesta[playerid] = 0;
			return 1;
		}
		SendClientMessage(playerid, COLOR_GENERAL, "Respuesta incorrecta, intenta de nuevo.");
		new dialog[1580], gformat[250];
		strcat(dialog, "{EBEBEB}Nuestro sistema ha detectado que la {FF2F2F}IP{EBEBEB} que estás usando es distinta a la de tu última sesión.\n");
		strcat(dialog, "{EBEBEB}Para continuar con la sesión de tu cuenta, necesitaremos que respondas la pregunta de seguridad.\n\n");
		format(gformat, sizeof gformat, "{EBEBEB}Pregunta de seguridad: {FFBF00}%s\n\n", InfoCuenta[playerid][jPreguntaSeguridad]);
		strcat(dialog, gformat);
		format(gformat, sizeof gformat, "{EBEBEB}Si te equivocas puedes intentarlo {00AE57}%d{EBEBEB} veces más.\n", IntentosRespuesta[playerid]);
		strcat(dialog, gformat);
		Dialog_Show(playerid, ShowRespuesta, DIALOG_STYLE_INPUT, "Medida de seguridad", dialog, "Continuar", "Salir");
	}
	return 1;
}

Dialog:ShowPregunta(playerid, response, listitem, inputtext[])
{
	if (!response) return Kick(playerid);
	new dialog[1028];
	strcat(dialog, "1. ¿Cuál es el apellido de soltera de mi madre?\n");
	strcat(dialog, "2. ¿Cuál es el nombre de mi mascota?\n");
	strcat(dialog, "3. ¿Cómo se llama mi primer amor?\n");
	strcat(dialog, "4. ¿Cuál es la fecha del cumpleaños de mi hermano(a)?\n");
	strcat(dialog, "5. ¿En qué colegio estudie en primaria?\n");
	strcat(dialog, "6. ¿Cuál es el nombre de mi mejor amigo?");
	Dialog_Show(playerid, Show2Pregunta, DIALOG_STYLE_LIST, "Lista de preguntas", dialog, "Continuar", "Salir");
	return 1;
}

Dialog:Show2Pregunta(playerid, response, listitem, inputtext[])
{
	if (!response) return Kick(playerid);
	switch (listitem)
	{
		case 0: alm(InfoCuenta[playerid][jPreguntaSeguridad], "¿Cuál es el apellido de soltera de mi madre?");
		case 1: alm(InfoCuenta[playerid][jPreguntaSeguridad], "¿Cuál es el nombre de mi mascota?");
		case 2: alm(InfoCuenta[playerid][jPreguntaSeguridad], "¿Cómo se llama mi primer amor?");
		case 3: alm(InfoCuenta[playerid][jPreguntaSeguridad], "¿Cuál es la fecha del cumpleaños de mi hermano(a)?");
		case 4: alm(InfoCuenta[playerid][jPreguntaSeguridad], "¿En qué colegio estudie en primaria?");
		case 5: alm(InfoCuenta[playerid][jPreguntaSeguridad], "¿Cuál es el nombre de mi mejor amigo?");
	}
	new dialog[1028], gformat[250];
	strcat(dialog, "{EBEBEB}Bien has escogido como pregunta de seguridad:\n");
	format(gformat, sizeof gformat, "{FF2F2F}%s\n\n", InfoCuenta[playerid][jPreguntaSeguridad]);
	strcat(dialog, gformat);
	strcat(dialog, "{EBEBEB}Ahora introduce la {00CCFF}respuesta de seguridad{EBEBEB}, recuerda tener esto de memoria,\n\
	{EBEBEB}dado que en un futuro la necesitarás para ingresar a tu cuenta.\n");
	Dialog_Show(playerid, Show3Pregunta, DIALOG_STYLE_INPUT, "Respuesta de seguridad", dialog, "Continuar", "Volver");
	return 1;
}

Dialog:Show3Pregunta(playerid, response, listitem, inputtext[])
{
	if (!response)
	{
		alm(InfoCuenta[playerid][jPreguntaSeguridad], "ninguna");
		new dialog[1028];
		strcat(dialog, "1. ¿Cuál es el apellido de soltera de mi madre?\n");
		strcat(dialog, "2. ¿Cuál es el nombre de mi mascota?\n");
		strcat(dialog, "3. ¿Cómo se llama mi primer amor?\n");
		strcat(dialog, "4. ¿Cuál es la fecha del cumpleaños de mi hermano(a)?\n");
		strcat(dialog, "5. ¿En qué colegio estudie en primaria?\n");
		strcat(dialog, "6. ¿Cuál es el nombre de mi mejor amigo?");
		Dialog_Show(playerid, Show2Pregunta, DIALOG_STYLE_LIST, "Lista de preguntas", dialog, "Continuar", "Salir");
		return 1;
	}
	if (strlen(inputtext) < 5)
	{
		SendClientMessage(playerid, 0xccccccff, "No puedes tener una respuesta con menos de 4 carácteres.");
		new dialog[1028], gformat[250];
		strcat(dialog, "{EBEBEB}Bien has escogido como pregunta de seguridad:\n");
		format(gformat, sizeof gformat, "{FF2F2F}%s\n\n", InfoCuenta[playerid][jPreguntaSeguridad]);
		strcat(dialog, gformat);
		strcat(dialog, "{EBEBEB}Ahora introduce la {00CCFF}respuesta de seguridad{EBEBEB}, recuerda tener esto de memoria,\n\
		{EBEBEB}dado que en un futuro la necesitarás para ingresar a tu cuenta.\n");
		Dialog_Show(playerid, Show3Pregunta, DIALOG_STYLE_INPUT, "Respuesta de seguridad", dialog, "Continuar", "Volver");
		return 1;
	}
	if (strlen(inputtext) > 33)
	{
		SendClientMessage(playerid, 0xccccccff, "No puedes tener una respuesta con más de 32 carácteres.");
		new dialog[1028], gformat[250];
		strcat(dialog, "{EBEBEB}Bien has escogido como pregunta de seguridad:\n");
		format(gformat, sizeof gformat, "{FF2F2F}%s\n\n", InfoCuenta[playerid][jPreguntaSeguridad]);
		strcat(dialog, gformat);
		strcat(dialog, "{EBEBEB}Ahora introduce la {00CCFF}respuesta de seguridad{EBEBEB}, recuerda tener esto de memoria,\n\
		{EBEBEB}dado que en un futuro la necesitarás para ingresar a tu cuenta.\n");
		Dialog_Show(playerid, Show3Pregunta, DIALOG_STYLE_INPUT, "Respuesta de seguridad", dialog, "Continuar", "Volver");
		return 1;
	}
	alm(InfoCuenta[playerid][jRespuestaSeguridad], inputtext);
	new dialog[1028], gformat[250];
	strcat(dialog, "{EBEBEB}Perfecto, para terminar verifica que esté todo en orden.\n\n");
	format(gformat, sizeof gformat, "{FFBF00}Pregunta de seguridad: {EBEBEB}%s\n", InfoCuenta[playerid][jPreguntaSeguridad]);
	strcat(dialog, gformat);
	format(gformat, sizeof gformat, "{00CCFF}Respuesta de seguridad: {EBEBEB}%s\n\n", InfoCuenta[playerid][jRespuestaSeguridad]);
	strcat(dialog, gformat);
	strcat(dialog, "{EBEBEB}Si todo está bien presiona '{FF2F2F}Confirmar{EBEBEB}' para ingresar al servidor.\n");
	Dialog_Show(playerid, Show4Pregunta, DIALOG_STYLE_MSGBOX, "Confirmación de seguridad", dialog, "Continuar", "Volver");
	return 1;
}

Dialog:Show4Pregunta(playerid, response, listitem, inputtext[])
{
	if (!response)
	{
		alm(InfoCuenta[playerid][jRespuestaSeguridad], "ninguna");
		new dialog[1028], gformat[250];
		strcat(dialog, "{EBEBEB}Bien has escogido como pregunta de seguridad:\n");
		format(gformat, sizeof gformat, "{FF2F2F}%s\n\n", InfoCuenta[playerid][jPreguntaSeguridad]);
		strcat(dialog, gformat);
		strcat(dialog, "{EBEBEB}Ahora introduce la {00CCFF}respuesta de seguridad{EBEBEB}, recuerda tener esto de memoria,\n\
		{EBEBEB}dado que en un futuro la necesitarás para ingresar a tu cuenta.\n");
		Dialog_Show(playerid, Show3Pregunta, DIALOG_STYLE_INPUT, "Respuesta de seguridad", dialog, "Continuar", "Volver");
		return 1;
	}
	VerPersonajes(playerid);
	new offquery[512];
	mysql_format(DBInsanity, offquery, sizeof offquery, "UPDATE cuentas SET PreguntaSeguridad = '%e', RespuestaSeguridad = '%e' WHERE ID = '%d'", InfoCuenta[playerid][jPreguntaSeguridad], InfoCuenta[playerid][jRespuestaSeguridad], InfoCuenta[playerid][jID]);
	mysql_tquery(DBInsanity, offquery);
	return 1;
}

forward CargarCuenta(playerid);
public CargarCuenta(playerid)
{
	if (InfoPersonaje[playerid][pBaneo] != 0) return MuestraBloqueoPJ(playerid);
	TogglePlayerSpectating(playerid, false);
	StopAudioStreamForPlayer(playerid);
	ClearChat(playerid);
	new gformat[256], ex_ip[18];
	GetPlayerIp(playerid, ex_ip, sizeof ex_ip);
	ResetPlayerMoney(playerid);
	usuario_registro[playerid] = 2;
	format(gformat, sizeof gformat, "Hola {00AE57}%s{EBEBEB}, te vimos por última vez: {00AE57}%s{EBEBEB}.", NombreOriginal(playerid), InfoPersonaje[playerid][pUltimaConexion]);
	SendClientMessage(playerid, 0xEBEBEBFF, gformat);
	alm(InfoCuenta[playerid][jIP], ex_ip);
	guardar_string_mysql("cuentas", "IP", InfoCuenta[playerid][jID], ex_ip);
	state_on[playerid] = 3; // logeado
	if (InfoPersonaje[playerid][pHospital] != 0) GoToHospital(playerid);
	//mensaje admin:
	if (GetPlayerAdmin(playerid, 1) != 0)
	{
		format(gformat, sizeof gformat, "INFO:{EBEBEB} Logeaste con rango '{00AE57}%s{EBEBEB}' en la administración.", GetAdminName(playerid));
		SendClientMessage(playerid, COLOR_GENERAL, gformat);
	}
	if (InfoPersonaje[playerid][pPosicionX] == 0.0 && InfoPersonaje[playerid][pPosicionY] == 0.0 && InfoPersonaje[playerid][pPosicionZ] == 0.0)
	{
		InfoPersonaje[playerid][pPosicionX] = 2105.0334;
		InfoPersonaje[playerid][pPosicionY] = -1473.9088;
		InfoPersonaje[playerid][pPosicionZ] = 24.1237;
		KillEMSQueue(playerid);
		timer_herido[playerid] = 0;
		dar_vida(playerid, 100);
		SendClientMessage(playerid, COLOR_WHITE, "desbuggg.");
	}
	SetPlayerPos(playerid, InfoPersonaje[playerid][pPosicionX], InfoPersonaje[playerid][pPosicionY], InfoPersonaje[playerid][pPosicionZ]);
	SetPlayerFacingAngle(playerid, InfoPersonaje[playerid][pPosicionR]);
	SetPlayerInterior(playerid, InfoPersonaje[playerid][pInterior]);
	SetPlayerVirtualWorld(playerid, InfoPersonaje[playerid][pVirtualWorld]);
	Streamer_UpdateEx(playerid, InfoPersonaje[playerid][pPosicionX], InfoPersonaje[playerid][pPosicionY], InfoPersonaje[playerid][pPosicionZ]);
	SetCameraBehindPlayer(playerid);
	SetPlayerHealth(playerid, InfoPersonaje[playerid][pVida]);
	SetPlayerArmour(playerid, InfoPersonaje[playerid][pChaleco]);
	SetPlayerScore(playerid, InfoPersonaje[playerid][pNivel]);
 	SetPlayerFightingStyle(playerid, InfoPersonaje[playerid][pEstiloPelea]);
	SetPlayerWantedLevel(playerid, InfoPersonaje[playerid][pEstrellas]);
	SyncPlayerTime(playerid);
	SetPlayerColor(playerid, 0xFFFFFF00);
	PreloadAnimations(playerid);
	if (InfoCuenta[playerid][jVIP] >= 3 && InfoPersonaje[playerid][pHabilidad][0] < 3)
	{
		InfoPersonaje[playerid][pHabilidad][0] = 3;
		guardar_int_mysql("personajes", "Habilidad1", InfoPersonaje[playerid][pID], 3);
		SendClientMessage(playerid, COLOR_YELLOW, "[MODVIP]:{FFFFFF} Ahora tienes nivel máximo de Vendedor de Armas.");
	}
	//Load_Vehicles(playerid); /llaves
	ActualizarEstado(playerid); //actualizar estado 27/04/2020
	revisar_viapiuwu(playerid); //revisa vip
	if (InfoPersonaje[playerid][pJobSkin] != 0) SetPlayerSkin(playerid, InfoPersonaje[playerid][pJobSkin]), SendClientMessage(playerid, COLOR_GENERAL, "Llevas puesto un skin de trabajo/faccion.");
	else SetPlayerSkin(playerid, InfoPersonaje[playerid][pSkin]);

	if (InfoPersonaje[playerid][pDrogaTipo] != 0)
	{
		if (InfoPersonaje[playerid][pAdiccion][0] >= 10 || InfoPersonaje[playerid][pAdiccion][1] >= 10 || InfoPersonaje[playerid][pAdiccion][2] >= 10)
		{
			if (InfoPersonaje[playerid][pAbstinenceTime] != 0) GiveAbstinence(playerid);
			else random_abstinence[playerid] = SetTimerEx("RandomAbstinence", 60000*15, false, "i", playerid);
		}
		if (InfoPersonaje[playerid][pDrogaTipo] == 3) SetPlayerWeather(playerid, -66);
		else
		{
			if (InfoPersonaje[playerid][pDrogaTipo] == 4) //efectos marihuana
			{
				Loop(x, 3, 0) { TextDrawShowForPlayer(playerid, TDmariguana[x]); }
			}
			SetPlayerWeather(playerid, 124);
		}
		SendClientMessage(playerid, 0x9ACD32AA, "Sigues bajos los efectos de alguna droga.");
	}

	SetTimerEx("hidecargar_cuenta", 2000, false, "d", playerid);
	return 1;
}

forward hidecargar_cuenta(playerid);
public hidecargar_cuenta(playerid)
{
	Loop(x, 2, 0) { TextDrawHideForPlayer(playerid, TD_Account[x]); }
	PlayerTextDrawHide(playerid, TD_AccountSkin[playerid]);
	return 1;
}

forward revisar_viapiuwu(playerid);
public revisar_viapiuwu(playerid)
{
	new year, month, day, query[280];
	getdate(year, month, day);
	if (InfoCuenta[playerid][jVIP] == 0)
	{
		InfoCuenta[playerid][jDiaVIP] = -1;
		InfoCuenta[playerid][jMesVIP] = -1;
		mysql_format(DBInsanity, query, sizeof query, "UPDATE cuentas SET VIP = '%d', DiaVIP = '%d', MesVIP = '%d' WHERE ID = '%d'", InfoCuenta[playerid][jVIP], InfoCuenta[playerid][jDiaVIP], InfoCuenta[playerid][jMesVIP], InfoCuenta[playerid][jID]);
		mysql_tquery(DBInsanity, query);
	}
	else
	{
		if (day >= InfoCuenta[playerid][jDiaVIP] && month >= InfoCuenta[playerid][jMesVIP])
		{
			InfoCuenta[playerid][jDiaVIP] = -1;
			InfoCuenta[playerid][jMesVIP] = -1;
			InfoCuenta[playerid][jVIP] = 0;
			SendClientMessage(playerid, 0x0CA7B8FF, "Tu beneficio VIP ha expirado, puedes hacer una renovación ahora mismo.");
			mysql_format(DBInsanity, query, sizeof query, "UPDATE cuentas SET VIP = '%d', DiaVIP = '%d', MesVIP = '%d' WHERE ID = '%d'", InfoCuenta[playerid][jVIP], InfoCuenta[playerid][jDiaVIP], InfoCuenta[playerid][jMesVIP], InfoCuenta[playerid][jID]);
			mysql_tquery(DBInsanity, query);
			return 1;
		}
		format(query, sizeof query, "Sigues con beneficio VIP %s. (Expira el %d de %s)", GetNameVIP(InfoCuenta[playerid][jVIP]), InfoCuenta[playerid][jDiaVIP], GetMonth(InfoCuenta[playerid][jMesVIP]));
		SendClientMessage(playerid, 0x0CA7B8FF, query);
	}
	return 1;
}

reset_InfoCuenta(playerid)
{
	InfoCuenta[playerid][jID] = -1;
	alm(InfoCuenta[playerid][jNombre], NombreOriginal(playerid));
	InfoCuenta[playerid][jClave][0] = EOS;
	InfoCuenta[playerid][jSalt][0] = EOS;
	alm(InfoCuenta[playerid][jIP], "127.0.0.1");
	InfoCuenta[playerid][jAdmin] = 0;
	alm(InfoCuenta[playerid][jApodo], "ninguna");
	alm(InfoCuenta[playerid][jPreguntaSeguridad], "ninguna");
	alm(InfoCuenta[playerid][jRespuestaSeguridad], "ninguna");
	InfoCuenta[playerid][jEncFac] = 0;
	InfoCuenta[playerid][jVIP] = 0;
	InfoCuenta[playerid][jDiaVIP] = -1;
	InfoCuenta[playerid][jMesVIP] = -1;
	InfoCuenta[playerid][jCoinsVIP] = 0;
	InfoCuenta[playerid][jDobleExp] = 0;
	InfoCuenta[playerid][jMulticuenta] = 0;
	InfoCuenta[playerid][jRegalo] = 0;
	alm(InfoCuenta[playerid][jFechaRegistro], "none");
	alm(InfoCuenta[playerid][jUltimaConexion], "none");
	InfoCuenta[playerid][jRanuras] = 3;
	InfoCuenta[playerid][jBaneo] = 0;
	InfoCuenta[playerid][jTiempoBaneo] = 0;
	alm(InfoCuenta[playerid][jCulpableBaneo], "server");
	alm(InfoCuenta[playerid][jRazonBaneo], "abuso");
	alm(InfoCuenta[playerid][jFechaBaneo], "antes del 07 de mayo del 2020");
}

reset_InfoPersonaje(playerid)
{
	InfoPersonaje[playerid][pID] = -1;
	InfoPersonaje[playerid][pCuentaID] = -1;
	alm(InfoPersonaje[playerid][pNombre_Apellido], "");
	alm(InfoPersonaje[playerid][pNombre_Temporal], "");
	alm(InfoPersonaje[playerid][pNombre_PD], "");
	InfoPersonaje[playerid][pPosicionX] = 0.0;
	InfoPersonaje[playerid][pPosicionY] = 0.0;
	InfoPersonaje[playerid][pPosicionZ] = 0.0;
	InfoPersonaje[playerid][pPosicionR] = 0.0;
	InfoPersonaje[playerid][pInterior] = 0;
	InfoPersonaje[playerid][pVirtualWorld] = 0;
	InfoPersonaje[playerid][pVida] = 100.0;
	InfoPersonaje[playerid][pChaleco] = 0.0;
	InfoPersonaje[playerid][pSkin] = 289;
	InfoPersonaje[playerid][pNivel] = 0;
	InfoPersonaje[playerid][pExperiencia] = 0;
	InfoPersonaje[playerid][pHorasOn] = 0;
	InfoPersonaje[playerid][pSexo] = 1;
	InfoPersonaje[playerid][pEdad] = 16;
	InfoPersonaje[playerid][pCiudad] = 1;
	InfoPersonaje[playerid][pAcento] = 1;
	InfoPersonaje[playerid][pEstiloPelea] = 4;
	InfoPersonaje[playerid][pDinero] = 0;
	InfoPersonaje[playerid][pBanco] = 0;
	InfoPersonaje[playerid][pLider] = 0;
	InfoPersonaje[playerid][pMiembro] = 0;
	InfoPersonaje[playerid][pRango] = 0;
	Loop(x, 10, 0)
	{
		InfoPersonaje[playerid][pBolsillo][x] = 0;
		InfoPersonaje[playerid][pBolsilloCant][x] = 0;
        InfoPersonaje[playerid][ptModelo][x] = 0;
        InfoPersonaje[playerid][ptHueso][x] = 0;
        InfoPersonaje[playerid][ptPosX][x] = 0.0;
        InfoPersonaje[playerid][ptPosY][x] = 0.0;
        InfoPersonaje[playerid][ptPosZ][x] = 0.0;
        InfoPersonaje[playerid][ptRotX][x] = 0.0;
        InfoPersonaje[playerid][ptRotY][x] = 0.0;
        InfoPersonaje[playerid][ptRotZ][x] = 0.0;
        InfoPersonaje[playerid][ptScaleX][x] = 1;
        InfoPersonaje[playerid][ptScaleY][x] = 1;
        InfoPersonaje[playerid][ptScaleZ][x] = 1;
        InfoPersonaje[playerid][ptColocado][x] = 0;
        InfoPersonaje[playerid][ptColor][x] = -1;
	}
	InfoPersonaje[playerid][pManoDerecha] = 0;
	InfoPersonaje[playerid][pManoDerechaCant] = 0;
	InfoPersonaje[playerid][pManoIzquierda] = 0;
	InfoPersonaje[playerid][pManoIzquierdaCant] = 0;
	InfoPersonaje[playerid][pEspalda] = 0;
	InfoPersonaje[playerid][pEspaldaCant] = 0;
	InfoPersonaje[playerid][pTogVIP] = 1;
	InfoPersonaje[playerid][pMuerto] = 0;
	InfoPersonaje[playerid][pHospital] = 0;
	InfoPersonaje[playerid][pBalaCabeza] = 0;
	InfoPersonaje[playerid][pJails] = 0;
	InfoPersonaje[playerid][pArrestos] = 0;
	InfoPersonaje[playerid][pSancionado] = 0;
	InfoPersonaje[playerid][pTiempoSancion] = 0;
	alm(InfoPersonaje[playerid][pBySancion], "none");
	alm(InfoPersonaje[playerid][pRazonSancion], "none");
	InfoPersonaje[playerid][pMateriales] = 0;
	InfoPersonaje[playerid][pGanzuas] = 0;
	InfoPersonaje[playerid][pTelefono] = 0;
	InfoPersonaje[playerid][pTogVelocimetro] = 1;
	InfoPersonaje[playerid][pCasa1] = -1;
	InfoPersonaje[playerid][pCasa2] = -1;
	InfoPersonaje[playerid][pNegocio1] = -1;
	InfoPersonaje[playerid][pNegocio2] = -1;
	Loop(x, 5, 0) { InfoPersonaje[playerid][pLicencia][x] = 0; }
	InfoPersonaje[playerid][pMascara] = 0;
	InfoPersonaje[playerid][pUsoMascara] = 0;
	InfoPersonaje[playerid][pBaneo] = 0;
	InfoPersonaje[playerid][pTiempoBaneo] = 0;
	alm(InfoPersonaje[playerid][pCulpableBaneo], "server");
	alm(InfoPersonaje[playerid][pRazonBaneo], "abuso");
	alm(InfoPersonaje[playerid][pFechaBaneo], "antes del 07 de mayo del 2020");
	InfoPersonaje[playerid][pBlockBug] = 0;
	InfoPersonaje[playerid][pTogGraffiti] = 0;
	InfoPersonaje[playerid][pDocumento] = 0;
	Loop(x, 5, 0) { InfoPersonaje[playerid][pHabilidad][x] = 0; }
	InfoPersonaje[playerid][YaCobre] = 0;
	InfoPersonaje[playerid][pEstrellas] = 0;
	InfoPersonaje[playerid][pLimiteRobos] = 0;
	InfoPersonaje[playerid][pFrecuencia_radio] = 0;
	InfoPersonaje[playerid][pTipoSpawn] = 0;
	alm(InfoPersonaje[playerid][pAutoRespuestaSMS], "none");
	InfoPersonaje[playerid][pBlockAD] = 0;
	InfoPersonaje[playerid][pAdvAD] = 0;
	InfoPersonaje[playerid][pPescados] = 0;
	InfoPersonaje[playerid][pRecordPesoPes] = 0;
	alm(InfoPersonaje[playerid][pEstadoYo], "");
	DestroyDynamic3DTextLabelEx(InfoPersonaje[playerid][pNameTag]);
	Loop(x, 10, 0)
	{
		alm(nombre_contacto[playerid][x], "none");
		InfoPersonaje[playerid][pNumeroContacto][x] = 0;
	}
	InfoPersonaje[playerid][pJobSkin] = 0;
	InfoPersonaje[playerid][pRestriccionRobo] = 0;
	InfoPersonaje[playerid][pFalsoDocumento] = 0;
	alm(InfoPersonaje[playerid][pFalsoNombre], "none");
	alm(InfoPersonaje[playerid][pFechaRegistro], "none");
	alm(InfoPersonaje[playerid][pUltimaConexion], "none");
	Loop(x, 6, 0)
	{
		InfoPersonaje[playerid][pCinturon][x] = 0;
		InfoPersonaje[playerid][pCinturonCant][x] = 0;
	}
	InfoPersonaje[playerid][pContrato] = -1;
	InfoPersonaje[playerid][pEmpleo] = 0;
	Loop(x, 3, 0) { InfoPersonaje[playerid][pAdiccion][x] = 0; }
	InfoPersonaje[playerid][pDrogaTipo] = 0;
	InfoPersonaje[playerid][pDrogaTiempo] = 0;
	InfoPersonaje[playerid][pDrogaPower] = 0;
	InfoPersonaje[playerid][pAbstinenceEffect] = 0;
	InfoPersonaje[playerid][pAbstinenceTime] = 0;
	InfoPersonaje[playerid][pTogTelefono] = 1;
	InfoPersonaje[playerid][pTogManos] = 1;
	InfoPersonaje[playerid][pTogCajero] = 0;
	InfoPersonaje[playerid][pTogAnuncios] = 0;
	InfoPersonaje[playerid][pTogTelefono] = 1;
	InfoPersonaje[playerid][pTimerAnuncios] = 0;
	InfoPersonaje[playerid][pTogOOC] = 1;
	InfoPersonaje[playerid][pTogMusic] = 1;
	InfoPersonaje[playerid][pTogRadio] = 1;
	InfoPersonaje[playerid][pTogPortatil] = 1;
	InfoPersonaje[playerid][pTogFaccion] = 1;
	InfoPersonaje[playerid][pRepartoViajes] = 0;
}

MuestraBloqueoCuenta(playerid)
{
	new string[1028];
	switch (InfoCuenta[playerid][jBaneo])
	{
		case 1: //temporal
		{
			if (InfoCuenta[playerid][jTiempoBaneo] < gettime())
			{
				SendClientMessage(playerid, COLOR_GREY, "El bloqueo de tu personaje ha terminado, ya puedes ingresar.");
				InfoCuenta[playerid][jTiempoBaneo] = 0;
				InfoCuenta[playerid][jBaneo] = 0;
				new list[32];
				alm(list, "ninguno");
				mysql_format(DBInsanity, string, sizeof string, "UPDATE cuentas SET OtakuN_N = 0, TimeBanUwU = 0, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE ID = '%d'", list, list, list, InfoCuenta[playerid][jID]);
				mysql_tquery(DBInsanity, string);
				VerPersonajes(playerid);
			}
			else
			{
				format(string, sizeof string, "{FFFFFF}Cuenta: {00AE57}%s\n\n{FFFFFF}Encargado: {FFBF00}%s\n{FFFFFF}Razón: {00AE57}%s\n{FFFFFF}Fecha: {00AE57}%s\n{FFFFFF}Tiempo: {00AE57}%s\n",
				InfoCuenta[playerid][jNombre], InfoCuenta[playerid][jCulpableBaneo], InfoCuenta[playerid][jRazonBaneo], InfoCuenta[playerid][jFechaBaneo], Segundos_tiempo(InfoCuenta[playerid][jTiempoBaneo] - gettime()));
				Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "Información del bloqueo temporal", string, "", "");
				SetTimerEx("TimerKICK", 1500, false, "d", playerid);
			}
		}
		case 2: //permanente
		{
			format(string, sizeof string, "{FFFFFF}Cuenta: {00AE57}%s\n\n{FFFFFF}Encargado: {FFBF00}%s\n{FFFFFF}Razón: {00AE57}%s\n{FFFFFF}Fecha: {00AE57}%s\n",
			InfoCuenta[playerid][jNombre], InfoCuenta[playerid][jCulpableBaneo], InfoCuenta[playerid][jRazonBaneo], InfoCuenta[playerid][jFechaBaneo]);
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "Información del bloqueo", string, "", "");
			SetTimerEx("TimerKICK", 1500, false, "d", playerid);
		}
		default: //limpio
		{
			Kick(playerid);
		}
	}
	return 1;
}

MuestraBloqueoPJ(playerid)
{
	new string[1028];
	switch (InfoPersonaje[playerid][pBaneo])
	{
		case 1: //temporal
		{
			if (InfoPersonaje[playerid][pTiempoBaneo] < gettime())
			{
				SendClientMessage(playerid, COLOR_GREY, "El bloqueo de tu personaje ha terminado, ya puedes jugar.");
				InfoPersonaje[playerid][pTiempoBaneo] = 0;
				InfoPersonaje[playerid][pBaneo] = 0;
				new list[32];
				alm(list, "ninguno");
				mysql_format(DBInsanity, string, sizeof string, "UPDATE personajes SET OtakuN_N = 0, TimeBanUwU = 0, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE ID = '%d'", list, list, list, InfoPersonaje[playerid][pID]);
				mysql_tquery(DBInsanity, string);
				CargarCuenta(playerid);
			}
			else
			{
				format(string, sizeof string, "{FFFFFF}Personaje: {00AE57}%s\n\n{FFFFFF}Encargado: {FFBF00}%s\n{FFFFFF}Razón: {00AE57}%s\n{FFFFFF}Fecha: {00AE57}%s\n{FFFFFF}Tiempo: {00AE57}%s\n",
				InfoPersonaje[playerid][pNombre_Apellido], InfoPersonaje[playerid][pCulpableBaneo], InfoPersonaje[playerid][pRazonBaneo], InfoPersonaje[playerid][pFechaBaneo], Segundos_tiempo(InfoPersonaje[playerid][pTiempoBaneo] - gettime()));
				Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "Información del bloqueo temporal", string, "", "");
				SetTimerEx("TimerKICK", 1500, false, "d", playerid);
			}
		}
		case 2: //permanente
		{
			format(string, sizeof string, "{FFFFFF}Personaje: {00AE57}%s\n\n{FFFFFF}Encargado: {FFBF00}%s\n{FFFFFF}Razón: {00AE57}%s\n{FFFFFF}Fecha: {00AE57}%s\n",
			InfoPersonaje[playerid][pNombre_Apellido], InfoPersonaje[playerid][pCulpableBaneo], InfoPersonaje[playerid][pRazonBaneo], InfoPersonaje[playerid][pFechaBaneo]);
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "Información del bloqueo", string, "", "");
			SetTimerEx("TimerKICK", 1500, false, "d", playerid);
		}
		default: //limpio
		{
			Kick(playerid);
		}
	}
	return 1;
}

public OnVehicleDeath(vehicleid)
{
	LockStatus[vehicleid] = 0;
	new VehV = verificar_id_vehiculo(vehicleid);
	if (VehV != -1)
	{
		if (InfoVehiculo[VehV][vModeloNeon] != 0 && InfoVehiculo[VehV][vOnNeon] != 0)
		{
			if (IsValidDynamicObject(InfoVehiculo[VehV][vObjetoNeonL])) DestroyDynamicObject(InfoVehiculo[VehV][vObjetoNeonL]);
			if (IsValidDynamicObject(InfoVehiculo[VehV][vObjetoNeonR])) DestroyDynamicObject(InfoVehiculo[VehV][vObjetoNeonR]);
		}
		Loop(x, 5, 0) if (InfoVehiculo[VehV][vObjModelo][x] != 0) { if (IsValidDynamicObject(InfoVehiculo[VehV][vTuneo][x])) DestroyDynamicObject(InfoVehiculo[VehV][vTuneo][x]); }
	}
    arr_Engine{vehicleid} = 0;
  	return 1;
}

Log(sz_fileName[], sz_input[]) {

	new
		sz_logEntry[156],
		i_dateTime[2][3],
		File: fileGformat = fopen(sz_fileName, io_append);

	gettime(i_dateTime[0][0], i_dateTime[0][1], i_dateTime[0][2]);
	getdate(i_dateTime[1][0], i_dateTime[1][1], i_dateTime[1][2]);

	format(sz_logEntry, sizeof(sz_logEntry), "[%i/%i/%i - %i:%i:%i] %s\r\n", i_dateTime[1][0], i_dateTime[1][1], i_dateTime[1][2], i_dateTime[0][0], i_dateTime[0][1], i_dateTime[0][2], sz_input);
	fwrite(fileGformat, sz_logEntry);
	return fclose(fileGformat);
}

forward BajarDrogas(playerid, veh, id);
public BajarDrogas(playerid, veh, id)
{
	new count;
	if (veh == 1)
	{
		InfoNegocio[id][nCountQVeh1]--;
		count = InfoNegocio[id][nCountQVeh1];
		if (InfoNegocio[id][nCountQVeh1] == 5)
			if (IsValidDynamicObject(InfoNegocio[id][nBarrilVeh1][4])) DestroyDynamicObject(InfoNegocio[id][nBarrilVeh1][4]);
		if (InfoNegocio[id][nCountQVeh1] == 4)
			if (IsValidDynamicObject(InfoNegocio[id][nBarrilVeh1][3])) DestroyDynamicObject(InfoNegocio[id][nBarrilVeh1][3]);
		if (InfoNegocio[id][nCountQVeh1] == 3)
			if (IsValidDynamicObject(InfoNegocio[id][nBarrilVeh1][2])) DestroyDynamicObject(InfoNegocio[id][nBarrilVeh1][2]);
		if (InfoNegocio[id][nCountQVeh1] == 2)
			if (IsValidDynamicObject(InfoNegocio[id][nBarrilVeh1][1])) DestroyDynamicObject(InfoNegocio[id][nBarrilVeh1][1]);
		if (InfoNegocio[id][nCountQVeh1] == 1)
			if (IsValidDynamicObject(InfoNegocio[id][nBarrilVeh1][0])) DestroyDynamicObject(InfoNegocio[id][nBarrilVeh1][0]);
	}
	else if (veh == 2)
	{
		InfoNegocio[id][nCountQVeh2]--;
		count = InfoNegocio[id][nCountQVeh2];
		if (InfoNegocio[id][nCountQVeh2] == 5)
			if (IsValidDynamicObject(InfoNegocio[id][nBarrilVeh2][4])) DestroyDynamicObject(InfoNegocio[id][nBarrilVeh2][4]);
		if (InfoNegocio[id][nCountQVeh2] == 4)
			if (IsValidDynamicObject(InfoNegocio[id][nBarrilVeh2][3])) DestroyDynamicObject(InfoNegocio[id][nBarrilVeh2][3]);
		if (InfoNegocio[id][nCountQVeh2] == 3)
			if (IsValidDynamicObject(InfoNegocio[id][nBarrilVeh2][2])) DestroyDynamicObject(InfoNegocio[id][nBarrilVeh2][2]);
		if (InfoNegocio[id][nCountQVeh2] == 2)
			if (IsValidDynamicObject(InfoNegocio[id][nBarrilVeh2][1])) DestroyDynamicObject(InfoNegocio[id][nBarrilVeh2][1]);
		if (InfoNegocio[id][nCountQVeh2] == 1)
			if (IsValidDynamicObject(InfoNegocio[id][nBarrilVeh2][0])) DestroyDynamicObject(InfoNegocio[id][nBarrilVeh2][0]);
	}
	Streamer_Update(playerid);
	if (count == 0) // por devolver
	{
		new pagoFabrica = Random(10000, 30000), pagoEmpleado = Random(750, 2500), gformat[230];
		format(gformat, sizeof gformat, "Entrega con éxito, la fábrica recibió {00CC00}$%s{FFFFFF} y a tus bolsillos unos {00CC00}$%s{FFFFFF} dólares.", diner_coma(pagoFabrica), diner_coma(pagoEmpleado));
		SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		InfoNegocio[id][nDinero] += pagoFabrica;
		UpdateDineroGuardado(id);
		mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE negocios SET BolosUwU = '%d' WHERE ID = '%d'", InfoNegocio[id][nDinero], InfoNegocio[id][nID_sql]);
		mysql_tquery(DBInsanity, gformat);
		GivePlayerCash(playerid, pagoEmpleado, "entrega exitosa (fabrica drogas)");
		DeletePVar(playerid, "IsFrozen");
		TogglePlayerControllable(playerid, true);
		SendClientMessage(playerid, 0xFFFFFFFF, "Regresa a la fábrica para devolver la {3399FF}camioneta{FFFFFF} y recibir algo más de dinero.");
		EnViajeDrogas[playerid] = 2;
		SetPlayerCheckpoint(playerid, InfoNegocio[id][nExteriorVehX], InfoNegocio[id][nExteriorVehY], InfoNegocio[id][nExteriorVehZ], 10.0);
		return 1;
	}
	//recogiendo
	SetTimerEx("BajarDrogas", 3000, false, "iii", playerid, veh, id);
	return 1;
}

forward RecogerQuimicos(playerid, veh, id);
public RecogerQuimicos(playerid, veh, id)
{
	new count;
	new vehicleid;
	if (veh == 1) { vehicleid = InfoNegocio[id][nVehiculo][0]; InfoNegocio[id][nCountQVeh1]++; count = InfoNegocio[id][nCountQVeh1]; }
	else if (veh == 2) { vehicleid = InfoNegocio[id][nVehiculo][1]; InfoNegocio[id][nCountQVeh2]++; count = InfoNegocio[id][nCountQVeh2]; }
	DarBarril(id, veh, count);
	UsandoVehFabrica[playerid] = vehicleid;
	Streamer_Update(playerid);
	if (count == 5) // por llevar
	{
		DeletePVar(playerid, "IsFrozen");
		TogglePlayerControllable(playerid, true);
		SendClientMessage(playerid, 0xFFFFFFFF, "Regresa a la fábrica para devolver los {3399FF}químicos{FFFFFF}.");
		EnViajeQuimicos[playerid] = 2;
		SetPlayerCheckpoint(playerid, InfoNegocio[id][nExteriorVehX], InfoNegocio[id][nExteriorVehY], InfoNegocio[id][nExteriorVehZ], 10.0);
		return 1;
	}
	//recogiendo
	SetTimerEx("RecogerQuimicos", 3000, false, "iii", playerid, veh, id);
	return 1;
}

DarBarril(id, veh, count)
{
	if (veh == 1)
	{
		new vehicleid = InfoNegocio[id][nVehiculo][0];
		switch (count)
		{
		    case 1:
			{
				InfoNegocio[id][nBarrilVeh1][0] = CreateDynamicObject(3632,0.0000000,0.0000000,-1000.0000000,0.0000000,0.0000000,0.0000000,0,0);
				InfoNegocio[id][nBarrilVeh1][1] = CreateDynamicObject(3632,0.0000000,0.0000000,-1000.0000000,0.0000000,0.0000000,0.0000000,0,0);
				InfoNegocio[id][nBarrilVeh1][2] = CreateDynamicObject(3632,0.0000000,0.0000000,-1000.0000000,0.0000000,0.0000000,0.0000000,0,0);
				InfoNegocio[id][nBarrilVeh1][3] = CreateDynamicObject(3632,0.0000000,0.0000000,-1000.0000000,0.0000000,0.0000000,0.0000000,0,0);
				InfoNegocio[id][nBarrilVeh1][4] = CreateDynamicObject(3632,0.0000000,0.0000000,-1000.0000000,0.0000000,0.0000000,0.0000000,0,0);
				AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh1][0], vehicleid, 0.394999, -1.084999, 0.230000, 0.000000, 0.000000, 0.000000);
			}
			case 2:
			{
				AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh1][1], vehicleid, -0.519999, -1.084999, 0.199500, 0.000000, 0.000000, 0.000000);
		    }
		    case 3:
			{
				AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh1][2], vehicleid, -0.049999, -1.729998, 0.230000, 0.000000, 0.000000, 0.000000);
		    }
		    case 4:
			{
				AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh1][3], vehicleid, 0.429999, -2.320005, 0.165000, 0.000000, 0.000000, 0.000000);
		    }
		    case 5:
			{
				AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh1][4], vehicleid, -0.554999, -2.285004, 0.220000, 0.000000, 0.000000, 0.000000);
		    }
		}
	}
	else if (veh == 2)
	{
		new vehicleid = InfoNegocio[id][nVehiculo][1];
		switch (count)
		{
		    case 1:
			{
				InfoNegocio[id][nBarrilVeh2][0] = CreateDynamicObject(3632,0.0000000,0.0000000,-1000.0000000,0.0000000,0.0000000,0.0000000,0,0);
				InfoNegocio[id][nBarrilVeh2][1] = CreateDynamicObject(3632,0.0000000,0.0000000,-1000.0000000,0.0000000,0.0000000,0.0000000,0,0);
				InfoNegocio[id][nBarrilVeh2][2] = CreateDynamicObject(3632,0.0000000,0.0000000,-1000.0000000,0.0000000,0.0000000,0.0000000,0,0);
				InfoNegocio[id][nBarrilVeh2][3] = CreateDynamicObject(3632,0.0000000,0.0000000,-1000.0000000,0.0000000,0.0000000,0.0000000,0,0);
				InfoNegocio[id][nBarrilVeh2][4] = CreateDynamicObject(3632,0.0000000,0.0000000,-1000.0000000,0.0000000,0.0000000,0.0000000,0,0);
				AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh2][0], vehicleid, 0.394999, -1.084999, 0.230000, 0.000000, 0.000000, 0.000000);
			}
			case 2:
			{
				AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh2][1], vehicleid, -0.519999, -1.084999, 0.199500, 0.000000, 0.000000, 0.000000);
		    }
		    case 3:
			{
				AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh2][2], vehicleid, -0.049999, -1.729998, 0.230000, 0.000000, 0.000000, 0.000000);
		    }
		    case 4:
			{
				AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh2][3], vehicleid, 0.429999, -2.320005, 0.165000, 0.000000, 0.000000, 0.000000);
		    }
		    case 5:
			{
				AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh2][4], vehicleid, -0.554999, -2.285004, 0.220000, 0.000000, 0.000000, 0.000000);
		    }
		}
	}
	return 1;
}

forward RecibirPaquete(playerid);
public RecibirPaquete(playerid)
{
	DeletePVar(playerid, "Congelado");
	TogglePlayerControllable(playerid, true);
	new id_casa = RepartoCasa[playerid], gformat[240];
	SetPlayerCheckpoint(playerid, InfoCasa[id_casa][cExteriorX], InfoCasa[id_casa][cExteriorY], InfoCasa[id_casa][cExteriorZ], 5.0);
	format(gformat, sizeof gformat, "Cogiste el paquete de {FFFFFF}%s{FBC74F}, el lugar de entrega fue marcado en el radar.", GetNameReparto(RepartoID[playerid]));
	SendClientMessage(playerid, 0xFBC74FFF, gformat);
	SetPVarInt(playerid, "EnCheckPoint", 4);
	RemovePlayerAttachedObject(playerid, 7);
	InfoPersonaje[playerid][pManoDerecha] = 55;
	InfoPersonaje[playerid][pManoDerechaCant] = RepartoID[playerid];
	PonerObjeto(playerid, 1, 55);
	return 1;
}

//
public OnPlayerEnterCheckpoint(playerid)
{
	PlayerPlaySound(playerid, 1056, 0.0, 0.0, 0.0);
    new carid = GetPlayerVehicleID(playerid), string[187];

    if (GetPVarInt(playerid, "BuscandoHeridop") == 1){
    	DeletePVar(playerid, "BuscandoHeridop");
    	DisablePlayerCheckpoint(playerid);
    }
    if (GetPVarInt(playerid, "BuscandoTrabajo") == 1)
    {
    	DeletePVar(playerid, "BuscandoTrabajo");
    	DisablePlayerCheckpoint(playerid);
    } 
    if (GetPVarInt(playerid, "Centralitauwu") == 5) 
	{
		DeletePVar(playerid, "Centralitauwu");
		DisablePlayerCheckpoint(playerid);
	}

	if (GetPVarInt(playerid, "EnCheckPoint") == 3) //recoge paquete negocio
	{
		new gformat[170], id_neg = RepartoNegocio[playerid];
		if (!IsPlayerInRangeOfPoint(playerid, 6.0, InfoNegocio[id_neg][nExteriorX], InfoNegocio[id_neg][nExteriorY], InfoNegocio[id_neg][nExteriorZ]))
		{
			format(gformat, sizeof gformat, "El paquete está en el negocio %s, se te volvió a marcar en el radar.", InfoNegocio[id_neg][nNombre]);
			SendClientMessage(playerid, 0xFFFF00FF, gformat);
			SetPlayerCheckpoint(playerid, InfoNegocio[id_neg][nExteriorX], InfoNegocio[id_neg][nExteriorY], InfoNegocio[id_neg][nExteriorZ], 5.0);
			SetPVarInt(playerid, "EnCheckPoint", 3);
			return 1;
		}
		if (InfoPersonaje[playerid][pManoDerecha] != 0)
		{
			SendClientMessage(playerid, 0xFFFF00FF, "Debes tener la mano derecha vacía para tomar el paquete.");
			return 1;
		}
		DeletePVar(playerid, "EnCheckPoint");
		DisablePlayerCheckpoint(playerid);
		TogglePlayerControllable(playerid, false);
		SetPVarInt(playerid, "Congelado", 1);
		SetTimerEx("RecibirPaquete", 10000, false, "d", playerid);
		GameTextForPlayer(playerid, "~n~~n~~n~~n~~n~~w~recibiendo ~p~paquete...", 11000, 3);
	}
	else if (GetPVarInt(playerid, "EnCheckPoint") == 4) //entrega casa
	{
		new gformat[260], id_casa = RepartoCasa[playerid], pago = RepartoPago[playerid], propina;
		if (!IsPlayerInRangeOfPoint(playerid, 6.0, InfoCasa[id_casa][cExteriorX], InfoCasa[id_casa][cExteriorY], InfoCasa[id_casa][cExteriorZ]))
		{
			SendClientMessage(playerid, 0xFFFF00FF, "No estás en el lugar de entrega, se te volvió a marcar en el radar.");
			SetPlayerCheckpoint(playerid, InfoCasa[id_casa][cExteriorX], InfoCasa[id_casa][cExteriorY], InfoCasa[id_casa][cExteriorZ], 5.0);
			SetPVarInt(playerid, "EnCheckPoint", 4);
			return 1;
		}
		if (InfoPersonaje[playerid][pManoDerecha] != 55)
		{
			SendClientMessage(playerid, 0xFFFF00FF, "Debes tener el paquete que cogiste del negocio en tu mano derecha para entregarlo.");
			return 1;
		}
		InfoPersonaje[playerid][pManoDerecha] = 0;
		InfoPersonaje[playerid][pManoDerechaCant] = 0;
		RemovePlayerAttachedObject(playerid, 7);
		//clear cps
		DeletePVar(playerid, "EnCheckPoint");
		DisablePlayerCheckpoint(playerid);
		TogglePlayerAllDynamicCPs(playerid, true);
		//habilidad
		if (InfoCuenta[playerid][jVIP] != 0) InfoPersonaje[playerid][pHabilidad][1] += 2;
		else InfoPersonaje[playerid][pHabilidad][1]++;
		guardar_int_mysql("personajes", "Habilidad2", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pHabilidad][1]);
		//pago
		switch (NivelHabilidad(playerid, 1))
		{
		    case 1: propina = Random(20, 50);
		    case 2: propina = Random(30, 60);
		    case 3: propina = Random(60, 80);
		    case 4: propina = Random(80, 100);
		    case 5: propina = Random(105, 130);
		}

		new neg = IsPlayerContrato(playerid, 6);
		new pago_total;
		if(neg != -1)
		{
			pago += 50;

			if (InfoNegocio[neg][nVenta] != 0)
			{
				InfoNegocio[neg][nDinero] += pago/2;
				guardar_int_mysql("negocios", "BolosUwU", InfoNegocio[neg][nID_sql], InfoNegocio[neg][nDinero]);
			}
			pago_total = propina+(pago/2);
			format(gformat, sizeof gformat, "Has recibido un total de  {49B01E}$%s{FFFFFF} por el reparto.", diner_coma((pago/2) + (propina)));
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
		else
		{
			format(gformat, sizeof gformat, "Has recibido un total de  {49B01E}$%s{FFFFFF} por el reparto.", diner_coma((pago-50) + (propina)));
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
			pago_total = propina+(pago-50);
		}
		GivePlayerCash(playerid, pago_total, "pago repartos");
		//clear reparto
		RepartoID[playerid] = -1;
		RepartoCasa[playerid] = -1;
		RepartoNegocio[playerid] = -1;
		RepartoPago[playerid] = 0;
		InfoPersonaje[playerid][pRepartoViajes]++;
		guardar_int_mysql("personajes", "RepartoViajes", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pRepartoViajes]);
	}
	if (LlegandoLlamadoMecanico[playerid] != 0)
	{
		DisablePlayerCheckpoint(playerid);
	    LlegandoLlamadoMecanico[playerid] = 0;
		SendClientMessage(playerid, 0x00CC00FF, "Llegaste a la posición del llamado.");
	}
	if (EnViajeDrogas[playerid] == 1)
	{
		if (!EnEntregaDrogas(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No estás en el punto de descargar drogas.");
		if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "Debes estar como conductor.");
		new vehid = EsVehFabrica(carid), id = IsPlayerContrato(playerid, 12);
		if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "No trabajas en ninguna fábrica de drogas.");
		if (vehid == 0) return SendClientMessage(playerid, COLOR_GREY, "No estás dentro de un vehículo de fábrica.");
		if (vehid != id) return SendClientMessage(playerid, COLOR_GREY, "No estás dentro de un vehículo de tu fábrica.");
		if (carid == InfoNegocio[id][nVehiculo][0])
		{
			DisablePlayerCheckpoint(playerid);
			InfoNegocio[id][nCountQVeh1] = 6;
			SetTimerEx("BajarDrogas", 3000, false, "iii", playerid, 1, id);
		}
		else if (carid == InfoNegocio[id][nVehiculo][1])
		{
			DisablePlayerCheckpoint(playerid);
			InfoNegocio[id][nCountQVeh2] = 6;
			SetTimerEx("BajarDrogas", 3000, false, "iii", playerid, 2, id);
		}
		SendClientMessage(playerid, 0xFFFFFFFF, "Se está {00AE57}descargando{FFFFFF} la camioneta con las {3399FF}cajas de drogas{FFFFFF}, espera.");
		TogglePlayerControllable(playerid, false);
		SetPVarInt(playerid, "IsFrozen", 1);
	}
	else if (EnViajeDrogas[playerid] == 2)
	{
		if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "Debes estar como conductor.");
		new vehid = EsVehFabrica(carid), id = IsPlayerContrato(playerid, 12);
		if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "No trabajas en ninguna fábrica de drogas.");
		if (vehid == 0) return SendClientMessage(playerid, COLOR_GREY, "No estás dentro de un vehículo de fábrica.");
		if (vehid != id) return SendClientMessage(playerid, COLOR_GREY, "No estás dentro de un vehículo de tu fábrica.");
		new pago = Random(200, 1000);
		format(string, sizeof string, "Recibiste {00CC00}$%s{FFFFFF} por entregar la {00AE57}camioneta{FFFFFF} a la fábrica.", diner_coma(pago));
		SendClientMessage(playerid, 0xFFFFFFFF, string);
		GivePlayerCash(playerid, pago, "devolver camioneta (fabrica drogas)");
		SetVehicleToRespawn(carid);
		SetPosEx(playerid, -2185.1226, -243.5894, 548.9390, 255.7332, InfoNegocio[id][nInteriorInt], InfoNegocio[id][nInteriorVW], 1);
		SetCameraBehindPlayer(playerid);
		EnViajeDrogas[playerid] = 0;
		UsandoVehFabrica[playerid] = 0;
		DisablePlayerCheckpoint(playerid);
	}
	if (EnViajeQuimicos[playerid] == 1)
	{
		if (!EnRecogerQuimicos(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No estás en el punto de recoger químicos.");
		if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "Debes estar como conductor.");
		new vehid = EsVehFabrica(carid), id = IsPlayerContrato(playerid, 12);
		if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "No trabajas en ninguna fábrica de drogas.");
		if (vehid == 0) return SendClientMessage(playerid, COLOR_GREY, "No estás dentro de un vehículo de fábrica.");
		if (vehid != id) return SendClientMessage(playerid, COLOR_GREY, "No estás dentro de un vehículo de tu fábrica.");
		if (carid == InfoNegocio[id][nVehiculo][0])
		{
			DisablePlayerCheckpoint(playerid);
			InfoNegocio[id][nCountQVeh1] = 0;
			SetTimerEx("RecogerQuimicos", 3000, false, "iii", playerid, 1, id);
		}
		else if (carid == InfoNegocio[id][nVehiculo][1])
		{
			DisablePlayerCheckpoint(playerid);
			InfoNegocio[id][nCountQVeh2] = 0;
			SetTimerEx("RecogerQuimicos", 3000, false, "iii", playerid, 2, id);
		}
		SendClientMessage(playerid, 0xFFFFFFFF, "Se está {00AE57}cargando{FFFFFF} la camioneta con los {3399FF}químicos{FFFFFF}, espera.");
		TogglePlayerControllable(playerid, false);
		SetPVarInt(playerid, "IsFrozen", 1);
	}
	else if (EnViajeQuimicos[playerid] == 2)
	{
		if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "Debes estar como conductor.");
		new vehid = EsVehFabrica(carid), id = IsPlayerContrato(playerid, 12);
		if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "No trabajas en ninguna fábrica de drogas.");
		if (vehid == 0) return SendClientMessage(playerid, COLOR_GREY, "No estás dentro de un vehículo de fábrica.");
		if (vehid != id) return SendClientMessage(playerid, COLOR_GREY, "No estás dentro de un vehículo de tu fábrica.");
		//veh 1
		new count = 0;
		if (carid == InfoNegocio[id][nVehiculo][0])
		{
			Loop(e, 5, 0) if (IsValidDynamicObject(InfoNegocio[id][nBarrilVeh1][e]))
			{
				DestroyDynamicObject(InfoNegocio[id][nBarrilVeh1][e]);
				count++;
			}
			InfoNegocio[id][nCountQVeh1] = 0;
		}
		//veh 2
		if (carid == InfoNegocio[id][nVehiculo][1])
		{
			Loop(e, 5, 0) if (IsValidDynamicObject(InfoNegocio[id][nBarrilVeh2][e]))
			{
				DestroyDynamicObject(InfoNegocio[id][nBarrilVeh2][e]);
				count++;
			}
			InfoNegocio[id][nCountQVeh2] = 0;
		}
		new pago = 50, quimis = count*20;
		switch (count)
		{
			case 1: pago += Random(500, 700);
			case 2: pago += Random(800, 1100);
			case 3: pago += Random(1200, 1400);
			case 4: pago += Random(1500, 2000);
			case 5: pago += Random(2400, 3000);
		}
		format(string, sizeof string, "Recibiste {00CC00}$%s{FFFFFF} por entregar {00AE57}%d barriles{FFFFFF} de {3399FF}químicos{FFFFFF}.", diner_coma(pago), count);
		SendClientMessage(playerid, 0xFFFFFFFF, string);
		GivePlayerCash(playerid, pago, "entrega barriles (fabrica drogas)");
		SetVehicleToRespawn(carid);
		SetPosEx(playerid, -2185.1226, -243.5894, 548.9390, 255.7332, InfoNegocio[id][nInteriorInt], InfoNegocio[id][nInteriorVW], 1);
		SetCameraBehindPlayer(playerid);
		InfoNegocio[id][nRecorridosQuimicos]++;
		if (InfoNegocio[id][nRecorridosQuimicos] == 3)
		{
			InfoNegocio[id][nTimeNecesitaQuimicos] = 120;
			guardar_int_mysql("negocios", "TimeNecesitaQuimicos", InfoNegocio[id][nID_sql], InfoNegocio[id][nTimeNecesitaQuimicos]);
			InfoNegocio[id][nRecorridosQuimicos] = 0;
		}
		InfoNegocio[id][nQuimicos] += quimis;
		guardar_int_mysql("negocios", "Quimicos", InfoNegocio[id][nID_sql], InfoNegocio[id][nQuimicos]);
		UpdateQuimicos(id);
		EnViajeQuimicos[playerid] = 0;
		UsandoVehFabrica[playerid] = 0;
	}
	if(GetPVarInt(playerid,"TrackCar") != 0)
	{
	    DisablePlayerCheckpoint(playerid);
		DeletePVar(playerid, "TrackCar");
		return 1;
	}
	if(EMSCallTime[playerid] > 0 && EMSAccepted[playerid] < 999)
	{
	    if(GetPVarInt(EMSAccepted[playerid], "EstaCrack") == 1)
	    {
			ApplyAnimation(EMSAccepted[playerid], "SWAT", "gnstwall_injurd", 4.0, 0, 1, 1, 1, 0, 1);
			dar_chaleco(EMSAccepted[playerid],0);
	    	EMSAccepted[playerid] = 999;
	    	GameTextForPlayer(playerid, "~w~Llegaste", 5000, 1);
	    	EMSCallTime[playerid] = 0;
	    	DisablePlayerCheckpoint(playerid);
		}
		else
		{
            EMSAccepted[playerid] = 999;
		    GameTextForPlayer(playerid, "~r~Paciente ha muerto", 5000, 1);
		    EMSCallTime[playerid] = 0;
	    	DisablePlayerCheckpoint(playerid);
		}
	}
	DisablePlayerCheckpoint(playerid);
	return 1;
}

public OnPlayerStateChange(playerid, newstate, oldstate)
{
    if (IsPlayerNPC(playerid)) return 1;
	new string[256], engine, lights, alarm, doors, bonnet, boot, objective, vehicleid = GetPlayerVehicleID(playerid);
	GetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);
	//spec
	if (GettingSpectated[playerid] != 999)
	{
	    new spectator = GettingSpectated[playerid];
	    if(!IsPlayerConnected(spectator))
	    {
	        GettingSpectated[playerid] = 999;
	        Spectate[spectator] = 999;
		}
		if (newstate == PLAYER_STATE_DRIVER && GetPlayerAdmin(playerid, 1) == 1 || newstate == PLAYER_STATE_PASSENGER && GetPlayerAdmin(playerid, 1) == 1)
		{
	        TogglePlayerSpectating(spectator, true);
			new carid = GetPlayerVehicleID( playerid );
			PlayerSpectateVehicle( spectator, carid );
			SetPVarInt(spectator, "SpecState", newstate);
	    }
	    else if(newstate == PLAYER_STATE_ONFOOT && GetPlayerAdmin(playerid, 1) == 1)
	    {
	        TogglePlayerSpectating(spectator, true);
		   	PlayerSpectatePlayer( spectator, playerid );
		   	SetPlayerInterior( spectator, GetPlayerInterior( playerid ) );
			SetPVarInt(spectator, "SpecState", newstate);
	    }
	}
	//pasajero
	if (newstate == PLAYER_STATE_PASSENGER)
	{
		if (GetPVarInt(playerid, "ToBeEjected") >= 1)
		{
			SetPVarInt(playerid, "ToBeEjected", 0);
			RemovePlayerFromVehicle(playerid);
			new Float:X, Float:Y, Float:Z;
			GetPlayerPos(playerid, X, Y, Z);
			SetPlayerPos(playerid, X, Y+1, Z);
			ClearAnimations(playerid);
			ApplyAnimation(playerid, "WUZI", "CS_Dead_Guy", 4.0, 0, 0, 0, 1, 0, 1);
			return 1;
		}
		gLastCar[playerid] = vehicleid;
	}
	//deja conductor
	if (oldstate == PLAYER_STATE_DRIVER)
	{
		hide_velocimetro(playerid);
	}
	//conductor
	if (newstate == PLAYER_STATE_DRIVER)
	{
		if (GetPVarInt(playerid, "ToBeEjected") >= 1)
		{
			SetPVarInt(playerid, "ToBeEjected", 0);
			RemovePlayerFromVehicle(playerid);
			new Float:X, Float:Y, Float:Z;
			GetPlayerPos(playerid, X, Y, Z);
			SetPlayerPos(playerid, X, Y+1, Z);
			ClearAnimations(playerid);
			ApplyAnimation(playerid, "WUZI", "CS_Dead_Guy", 4.0, 0, 0, 0, 1, 0, 1);
			return 1;
		}
		if (vehicleid != 0) mostrar_velocimetro(playerid, vehicleid);
		SetVehicleParamsEx(vehicleid, arr_Engine{vehicleid}, lights, alarm, doors, bonnet, boot, objective);
		if (Vehiculo_Renta(vehicleid))
		{
			new id = verificar_id_vehiculo(vehicleid);
			if (InfoVehiculo[id][vRentaTiempo] != 0) //rentado
			{
				if (llaves_renta(playerid, vehicleid) != 0) format(string, sizeof string, "Tienes las llaves de {FFFFFF}%s{FF9B6A} rentado. (Tiempo restante %d minutos)", GetVehicleName(vehicleid), InfoVehiculo[id][vRentaTiempo]);
				else format(string, sizeof string, "Este {FFFFFF}%s{FF9B6A} está siendo rentado.", GetVehicleName(vehicleid));
				SendClientMessage(playerid, 0xFF9B6AFF, string);
			}
			else //por rentar
			{
				format(string, sizeof string, "Este %s esta disponible, su renta por 20 minutos es de 200$. (/rentarveh)", GetVehicleName(vehicleid));
				SendClientMessage(playerid, COLOR_LIGHTGREEN, string);
			}
		}
   		gLastCar[playerid] = vehicleid;
		//fábrica
		if (EsVehFabrica(vehicleid))
		{
			new id = EsVehFabrica(vehicleid);
			if (InfoPersonaje[playerid][pNegocio1] == id || InfoPersonaje[playerid][pNegocio2] == id || InfoPersonaje[playerid][pContrato] == id)
			{
				format(string, sizeof string, "Tienes las llaves de la {FFFFFF}%s{00BF00}.", GetVehicleName(vehicleid));
				SendClientMessage(playerid, 0x00BF00FF, string);
			}
			else
			{
				format(string, sizeof string, "Esta {FFFFFF}%s{00BF00} es de una fábrica, ten cuidado.", GetVehicleName(vehicleid));
				SendClientMessage(playerid, 0x00BF00FF, string);
			}
		}
		//usuarios
		Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] == vehicleid && InfoVehiculo[id][vTipo] == 0 && InfoVehiculo[id][vNegocio] == 0)
		{
			if (llaves_vehiculo(playerid, vehicleid) != -1)
			{
				format(string, sizeof string, "Eres el dueño de este {FFFFFF}%s{00BF00}.", GetVehicleName(vehicleid));
				SendClientMessage(playerid, 0x00BF00FF, string);
				if (InfoVehiculo[id][vMulta] != 0)
				{
					format(string, sizeof string, "La policía dejó una multa de $%s en tu vehículo. Debes pagar el mismo en {5ABAFF}comisaria{FFFFFF}.", diner_coma(InfoVehiculo[id][vMulta]));
					SendClientMessage(playerid, 0x00BF00FF, string);
				}
				return 1;
			}
			if (InfoVehiculo[id][vLlavePrestada] == playerid)
			{
				format(string, sizeof string, "Tienes las llaves de este {FFFFFF}%s{00BF00} ({FFFFFF}dueño %s{00BF00}).", GetVehicleName(vehicleid), InfoVehiculo[id][vPropietario]);
				SendClientMessage(playerid, 0x00BF00FF, string);
				return 1;
			}
			GetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);
			format(string, sizeof string, "Este %s tiene propietario y no tienes sus llaves.", GetVehicleName(vehicleid));
			SendClientMessage(playerid, 0x00BF00FF, string);
			if ((engine == VEHICLE_PARAMS_OFF || engine == VEHICLE_PARAMS_UNSET)) SendClientMessage(playerid, COLOR_GREY, "El motor está apagado, puedes usar ganzúas para encenderlo. (/puente)");
			return 1;
		}
	}
	return 1;
}

EsVehFabrica(vehicleid)
{
	Loop(id, totalnegocios, 1) if (InfoNegocio[id][nVehiculo][0] == vehicleid)
	{
		return id;
	}
	Loop(id, totalnegocios, 1) if (InfoNegocio[id][nVehiculo][1] == vehicleid)
	{
		return id;
	}
	return 0;
}

public OnPlayerExitVehicle(playerid, vehicleid)
{
	hide_velocimetro(playerid);
	if (GetPlayerState(playerid) == 1) return 1;
	if (Seatbelt[playerid] == 1)
	{
		if (IsABike(vehicleid)) ameuwu(playerid, "pone las manos en su casco, y se lo quita");
		else ameuwu(playerid, "pone las manos en su cinturón, y se lo quita");
		Seatbelt[playerid] = 0;
	}
	return 1;
}

Show_cuenta(playerid, playerid2)
{
	if (!IsPlayerConnected(playerid) && !IsPlayerConnected(playerid2)) return 1;
	new hide_acoount[3500], gformat[320], gindice[128];

	//estadísticas
	//id
	format(gformat, sizeof gformat, "{3A7EE4}ID DB: {FFFFFF}%d\n", InfoPersonaje[playerid2][pID]);
	strcat(hide_acoount, gformat);
	//id
	format(gformat, sizeof gformat, "{3A7EE4}Cuenta ID: {FFFFFF}%d (%s)\n", InfoCuenta[playerid2][jID], InfoCuenta[playerid2][jNombre]);
	strcat(hide_acoount, gformat);
	//nombre
	format(gformat, sizeof gformat, "{3A7EE4}Nombre: {FFFFFF}%s\n", InfoPersonaje[playerid2][pNombre_Apellido]);
	strcat(hide_acoount, gformat);
	//edad
	format(gformat, sizeof gformat, "{3A7EE4}Edad: {FFFFFF}%d\n", InfoPersonaje[playerid2][pEdad]);
	strcat(hide_acoount, gformat);
	//sexo
	new mSexo[10];
	if (InfoPersonaje[playerid2][pSexo] == 1) alm(mSexo, "Hombre");
	else alm(mSexo, "Mujer");
	format(gformat, sizeof gformat, "{3A7EE4}Sexo: {FFFFFF}%s\n", mSexo);
	strcat(hide_acoount, gformat);
	//nivel
	format(gformat, sizeof gformat, "{3A7EE4}Horas: {FFFFFF}%d\n", InfoPersonaje[playerid2][pNivel]);
	strcat(hide_acoount, gformat);
	//próximo nivel
	new exp = InfoPersonaje[playerid2][pExperiencia], expamount = 60 - exp;
	format(gformat, sizeof gformat, "{3A7EE4}Próximo nivel: {FFFFFF}%d minutos\n", expamount);
	strcat(hide_acoount, gformat);
	//horas conectado
	format(gformat, sizeof gformat, "{3A7EE4}Horas jugando: {FFFFFF}%d\n", InfoPersonaje[playerid2][pHorasOn]);
	strcat(hide_acoount, gformat);
	//dinero
	if (GetPlayerCash(playerid2) >= 0)
	{
		format(gformat, sizeof gformat, "{3A7EE4}Dinero: {00C600}$%s\n", diner_coma(GetPlayerCash(playerid2)));
		strcat(hide_acoount, gformat);
	}
	else
	{
		format(gformat, sizeof gformat, "{3A7EE4}Dinero: {FD1717}$%s\n", diner_coma(GetPlayerCash(playerid2)));
		strcat(hide_acoount, gformat);
	}
	//banco
	if (InfoPersonaje[playerid2][pBanco] >= 0)
	{
		format(gformat, sizeof gformat, "{3A7EE4}Cuenta bancaria: {00C600}$%s\n", diner_coma(InfoPersonaje[playerid2][pBanco]));
		strcat(hide_acoount, gformat);
	}
	else
	{
		format(gformat, sizeof gformat, "{3A7EE4}Cuenta bancaria: {FD1717}$%s\n", diner_coma(InfoPersonaje[playerid2][pBanco]));
		strcat(hide_acoount, gformat);
	}
	//teléfono
	if (InfoPersonaje[playerid2][pTelefono] != 0)
	{
		format(gformat, sizeof gformat, "{3A7EE4}Número de teléfono: {FFFFFF}%d\n", InfoPersonaje[playerid2][pTelefono]);
		strcat(hide_acoount, gformat);
	}
	else strcat(hide_acoount, "{3A7EE4}Número de teléfono: {FD1717}No tienes\n");
	//facción
	if (InfoPersonaje[playerid2][pMiembro] != 0)
	{
		new id = InfoPersonaje[playerid2][pMiembro];
		//facción logo
		format(gformat, sizeof gformat, "{3A7EE4}Facción: {00AE57}%s\n", InfoFaccion[id][fLogo]);
		strcat(hide_acoount, gformat);
		//facción rango
		format(gformat, sizeof gformat, "{3A7EE4}Rango: {00AE57}%s {FFFFFF}(%d)\n", fac_rango[id][InfoPersonaje[playerid2][pRango]-1], InfoPersonaje[playerid2][pRango]);
		strcat(hide_acoount, gformat);
	}
	else strcat(hide_acoount, "{3A7EE4}Facción: {FD1717}No tienes\n");
	//empleo
	if (InfoPersonaje[playerid2][pEmpleo] != 0)
	{
	    new job = InfoPersonaje[playerid2][pEmpleo];
		format(gformat, sizeof gformat, "{3A7EE4}Empleo: {F2F81D}%s (%d)\n", IsNameJob(job), job);
		strcat(hide_acoount, gformat);
	}
	else strcat(hide_acoount, "{3A7EE4}Empleo: {FD1717}No tienes\n");
	//contrato
	if (InfoPersonaje[playerid2][pContrato] != -1)
	{
	    new neg = InfoPersonaje[playerid2][pContrato];
		format(gformat, sizeof gformat, "{3A7EE4}Empresa: {F2F81D}%s (%d)\n", GetNameContrato(neg), neg);
		strcat(hide_acoount, gformat);
	}
	else strcat(hide_acoount, "{3A7EE4}Empresa: {FD1717}No tienes\n");
	//vida
	format(gformat, sizeof gformat, "{3A7EE4}Vida: {FFFFFF}%.1f\n", InfoPersonaje[playerid2][pVida]);
	strcat(hide_acoount, gformat);
	//chaleco
	format(gformat, sizeof gformat, "{3A7EE4}Chaleco: {FFFFFF}%.1f\n", InfoPersonaje[playerid2][pChaleco]);
	strcat(hide_acoount, gformat);
	//interior
	format(gformat, sizeof gformat, "{3A7EE4}Interior: {FFFFFF}%d\n", InfoPersonaje[playerid2][pInterior]);
	strcat(hide_acoount, gformat);
	//virtualworld
	format(gformat, sizeof gformat, "{3A7EE4}Mundo: {FFFFFF}%d\n", InfoPersonaje[playerid2][pVirtualWorld]);
	strcat(hide_acoount, gformat);
	//skin
	format(gformat, sizeof gformat, "{3A7EE4}Skin: {FFFFFF}%d\n", InfoPersonaje[playerid2][pSkin]);
	strcat(hide_acoount, gformat);
	//casa 1
	if (InfoPersonaje[playerid2][pCasa1] != -1)
	{
		format(gformat, sizeof gformat, "{3A7EE4}Casa (1): {FFFFFF}%d\n", InfoPersonaje[playerid2][pCasa1]);
		strcat(hide_acoount, gformat);
	}
	else strcat(hide_acoount, "{3A7EE4}Casa (1): {FD1717}No tienes\n");
	//casa 2
	if (InfoPersonaje[playerid2][pCasa2] != -1)
	{
		format(gformat, sizeof gformat, "{3A7EE4}Casa (2): {FFFFFF}%d\n", InfoPersonaje[playerid2][pCasa2]);
		strcat(hide_acoount, gformat);
	}
	else strcat(hide_acoount, "{3A7EE4}Casa (2): {FD1717}No tienes\n");
	//negocio 1
	if (InfoPersonaje[playerid2][pNegocio1] != -1)
	{
		format(gformat, sizeof gformat, "{3A7EE4}Negocio (1): {FFFFFF}%d\n", InfoPersonaje[playerid2][pNegocio1]);
		strcat(hide_acoount, gformat);
	}
	else strcat(hide_acoount, "{3A7EE4}Negocio (1): {FD1717}No tienes\n");
	//negocio 2
	if (InfoPersonaje[playerid2][pNegocio2] != -1)
	{
		format(gformat, sizeof gformat, "{3A7EE4}Negocio (2): {FFFFFF}%d\n", InfoPersonaje[playerid2][pNegocio2]);
		strcat(hide_acoount, gformat);
	}
	else strcat(hide_acoount, "{3A7EE4}Negocio (2): {FD1717}No tienes\n");
	//garaje
	if (getPlayerGaragesID(playerid2) != 0)
	{
		format(gformat, sizeof gformat, "{3A7EE4}Garaje: {FFFFFF}%d\n", getPlayerGaragesID(playerid2));
		strcat(hide_acoount, gformat);
	}
	else strcat(hide_acoount, "{3A7EE4}Garaje: {FD1717}No tienes\n");
	//arrestos ic
	format(gformat, sizeof gformat, "{3A7EE4}Arrestos IC: {FFFFFF}%d\n", InfoPersonaje[playerid2][pArrestos]);
	strcat(hide_acoount, gformat);
	//arrestos ooc
	format(gformat, sizeof gformat, "{3A7EE4}Arrestos OOC: {FFFFFF}%d\n", InfoPersonaje[playerid2][pJails]);
	strcat(hide_acoount, gformat);
	//tiempo sanción
	if (InfoPersonaje[playerid2][pSancionado] != 0)
	{
		format(gformat, sizeof gformat, "{3A7EE4}Tiempo sanción: {FFFFFF}%d segundos\n", InfoPersonaje[playerid2][pTiempoSancion]);
		strcat(hide_acoount, gformat);
	}
	//fecha de registro
	format(gformat, sizeof gformat, "{3A7EE4}Fecha registro: {FFFFFF}%s\n", InfoPersonaje[playerid2][pFechaRegistro]);
	strcat(hide_acoount, gformat);
	//puntos de rol
	if (InfoPersonaje[playerid2][pPDR] != 0)
	{
		format(gformat, sizeof gformat, "{3A7EE4}Puntos de Rol: {FFFFFF}%d\n", InfoPersonaje[playerid2][pPDR]);
		strcat(hide_acoount, gformat);
	}
	//vip
	if (InfoCuenta[playerid2][jVIP] != 0)
	{
		format(gformat, sizeof gformat, "{3A7EE4}VIP: {C93CCE}%s {FFFFFF}(Día: %d | Mes: %d)\n", GetNameVIP(InfoCuenta[playerid2][jVIP]), InfoCuenta[playerid2][jDiaVIP], InfoCuenta[playerid2][jMesVIP]);
		strcat(hide_acoount, gformat);
	}
	//coins vip
	if (InfoCuenta[playerid2][jCoinsVIP] != 0)
	{
		format(gformat, sizeof gformat, "{3A7EE4}Coins VIP: {FFFFFF}%d\n", InfoCuenta[playerid2][jCoinsVIP]);
		strcat(hide_acoount, gformat);
	}
	//horas extras
	if (InfoCuenta[playerid2][jDobleExp] != 0)
	{
		format(gformat, sizeof gformat, "{3A7EE4}Horas (x2): {FFFFFF}%d\n", InfoCuenta[playerid2][jDobleExp]);
		strcat(hide_acoount, gformat);
	}
	//indice
	if (playerid2 != playerid) format(gindice, sizeof gindice, "{3A7EE4}Estadísticas de %s", InfoPersonaje[playerid2][pNombre_Apellido]);
	else alm(gindice, "{3A7EE4}Estadísticas");
	//diálogo
	Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, gindice, hide_acoount, "Aceptar", "");
	return 1;
}

public OnGameModeExit()
{
    djson_GameModeExit();
    //***SISTEMA AFK***
    for(new i = 0; i < MAX_PLAYERS; i++)
   	{
  	 	KillTimer(Timer[i]);
  	 	TextDrawHideForAll(Text:Messageafk);
  	 	TextDrawDestroy(Text:Messageafk);
	}
    return 1;
}

LoadStuff()
{
	new arrCoords[8][64];
	new strFromFile2[128];
	new File: file = fopen("Archivos_INI/stuff.ini", io_read);
	if (file)
	{
		fread(file, strFromFile2);
		splits(strFromFile2, arrCoords, ',');
		Jackpot = strval(arrCoords[0]);
		Tax = strval(arrCoords[1]);
		FondosAnuncios = strval(arrCoords[2]);
		TaxValue = strval(arrCoords[3]);
		TaxAnuncios = strval(arrCoords[4]);
		if(Tax < 0) Tax = 0;
		if(TaxValue < 0) TaxValue = 0;
		if(FondosAnuncios < 0) FondosAnuncios = 0;
		if(TaxAnuncios < 0) TaxAnuncios = 0;
		Blood = strval(arrCoords[5]);
		Fuel = strval(arrCoords[6]);
		txtcost = strval(arrCoords[7]);
		fclose(file);
		print("Cargado de objetos correctamente.");
	}
	else
	{
	    printf("LoadStuff() has found an error and has to be closed");
	    printf("Error: No file \"stuff.ini\" found!");
	    GameModeExit();
	}
	return 1;
}

SaveStuff()
{
	new coordsstring[128];
	format(coordsstring, sizeof(coordsstring), "%d,%d,%d,%d,%d,%d,%d,%d", Jackpot,Tax,FondosAnuncios,TaxValue,TaxAnuncios,Blood,Fuel,txtcost);
	new File: file2 = fopen("Archivos_INI/stuff.ini", io_write);
	fwrite(file2, coordsstring);
	fclose(file2);
	return 1;
}

saveUbicaciones(slot)
{
    new lfile[24];
	format(lfile, 24, UBICACIONES, slot);
	if (!fexist(lfile)) fcreate(lfile); // If not existing
	new INI:File = INI_Open(lfile);
	INI_SetTag(File,"UbicacionesData");
	INI_WriteString(File,"Ubicacion", InfoGPS[slot][uNombre]);
	INI_WriteFloat(File,"ExteriorX", InfoGPS[slot][uPosicion][0]);
	INI_WriteFloat(File,"ExteriorY", InfoGPS[slot][uPosicion][1]);
	INI_WriteFloat(File,"ExteriorZ", InfoGPS[slot][uPosicion][2]);
	INI_Close(File);
	return 1;
}
loadGPS()
{
    new lfile[24];
	for(new iIndex = 0; iIndex < sizeof(InfoGPS); iIndex++)
	{
		format(lfile, 24, UBICACIONES, iIndex);
		INI_ParseFile(lfile, "loadgps_data", .bExtra = true, .extra = iIndex );
	}
	print("[script] Lista de ubicaciones cargada correctamente");
	return 1;
}

funcion loadgps_data(id, name[], value[])
{
    INI_String("Ubicacion", InfoGPS[id][uNombre],30);
    INI_Float("ExteriorX", InfoGPS[id][uPosicion][0]);
    INI_Float("ExteriorY", InfoGPS[id][uPosicion][1]);
    INI_Float("ExteriorZ", InfoGPS[id][uPosicion][2]);
	return 1;
}

// Garajes.
saveGarages(iIndex)
{
    new gfile[64];
	format(gfile, 64, GARAGES_FILE, iIndex);
	if (!fexist(gfile)) fcreate(gfile); // If not existing
	new INI:File = INI_Open(gfile);
	INI_SetTag(File,"GarageData");
	INI_WriteInt(File,"Tipo", InfoGarages[iIndex][gType]);
	INI_WriteString(File,"Nombre", InfoGarages[iIndex][gName]);
	INI_WriteString(File,"Dueño", InfoGarages[iIndex][gOwner]);
	INI_WriteFloat(File,"ExteriorX", InfoGarages[iIndex][gExteriorPos][0]);
	INI_WriteFloat(File,"ExteriorY", InfoGarages[iIndex][gExteriorPos][1]);
	INI_WriteFloat(File,"ExteriorZ", InfoGarages[iIndex][gExteriorPos][2]);
	INI_WriteFloat(File,"ExteriorAngulo", InfoGarages[iIndex][gExteriorPos][3]);
	INI_WriteFloat(File,"InteriorX", InfoGarages[iIndex][gInteriorPos][0]);
	INI_WriteFloat(File,"InteriorY", InfoGarages[iIndex][gInteriorPos][1]);
	INI_WriteFloat(File,"InteriorZ", InfoGarages[iIndex][gInteriorPos][2]);
	INI_WriteFloat(File,"InteriorAngulo", InfoGarages[iIndex][gInteriorPos][3]);
	INI_WriteInt(File,"Interior", InfoGarages[iIndex][gInterior]);
	INI_WriteInt(File,"Precio", InfoGarages[iIndex][gPrice]);
	INI_WriteInt(File,"Nivel", InfoGarages[iIndex][gLevel]);
	INI_WriteInt(File,"Locked", InfoGarages[iIndex][gLocked]);
	INI_WriteInt(File,"Casa", InfoGarages[iIndex][gHouseID]);
	INI_Close(File);
	return 1;
}

loadGarages()
{
    new gfile[64];
    new strings[280];
	for(new iIndex = 0; iIndex < sizeof(InfoGarages); iIndex++)
	{
		format(gfile, 64, GARAGES_FILE, iIndex);
		INI_ParseFile(gfile, "loadgarages_data", .bExtra = true, .extra = iIndex );
		if (InfoGarages[iIndex][gExteriorPos][0] != 0.0) //fix 30-01-2020
		{
			switch(InfoGarages[iIndex][gLocked])
			{
				case 1:
				{ // Garages Icono
	       			if(!strcmp("Sin Dueño", InfoGarages[iIndex][gOwner])){format(strings, sizeof(strings), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n{A4A4A4}Precio: {FFFFFF}$%d\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FAAC58}Para comprarlo, usa /comprargarage.",
					iIndex, TipoGarage(iIndex), InfoGarages[iIndex][gPrice], InfoGarages[iIndex][gLevel]);}
					else{format(strings, sizeof(strings), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n%s\n{A4A4A4}Propietario: {FFFFFF}%s\n\n{FF0000}[Garaje Cerrado]",
					iIndex, TipoGarage(iIndex), InfoGarages[iIndex][gName], InfoGarages[iIndex][gOwner]);}
				}
				case 0:{
				    if(!strcmp("Sin Dueño", InfoGarages[iIndex][gOwner])){format(strings, sizeof(strings), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n{A4A4A4}Precio: {FFFFFF}$%d\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FAAC58}Para comprarlo, usa /comprargarage.",
					iIndex, TipoGarage(iIndex), InfoGarages[iIndex][gPrice], InfoGarages[iIndex][gLevel]);}
					else{format(strings, sizeof(strings), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n%s\n{A4A4A4}Propietario: {FFFFFF}%s\n\n{FAAC58}Para entrar con el vehículo, usa /entrar.",
					iIndex, TipoGarage(iIndex), InfoGarages[iIndex][gName], InfoGarages[iIndex][gOwner]);}
				}
			}
			InfoGarages[iIndex][gLabelID] = CreateDynamic3DTextLabel(strings, -1, InfoGarages[iIndex][gExteriorPos][0], InfoGarages[iIndex][gExteriorPos][1], InfoGarages[iIndex][gExteriorPos][2], 100, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, -1, -1, -1, 10.0);
			InfoGarages[iIndex][gPickupID] = CreateDynamicPickup(19522, 23, InfoGarages[iIndex][gExteriorPos][0], InfoGarages[iIndex][gExteriorPos][1], InfoGarages[iIndex][gExteriorPos][2], 0, 0, -1, 250);
		}
	}
	print("[CRP] Garages cargados correctamente.");
	return 1;
}
funcion loadgarages_data(id, name[], value[])
{
    INI_Int("Tipo", InfoGarages[id][gType]);
    INI_String("Nombre", InfoGarages[id][gName],48);
    INI_String("Dueño", InfoGarages[id][gOwner],MAX_PLAYER_NAME);
    INI_Float("ExteriorX", InfoGarages[id][gExteriorPos][0]);
    INI_Float("ExteriorY", InfoGarages[id][gExteriorPos][1]);
    INI_Float("ExteriorZ", InfoGarages[id][gExteriorPos][2]);
    INI_Float("ExteriorAngulo", InfoGarages[id][gExteriorPos][3]);
    INI_Float("InteriorX", InfoGarages[id][gInteriorPos][0]);
    INI_Float("InteriorY", InfoGarages[id][gInteriorPos][1]);
    INI_Float("InteriorZ", InfoGarages[id][gInteriorPos][2]);
    INI_Float("InteriorAngulo", InfoGarages[id][gInteriorPos][3]);
    INI_Int("Interior", InfoGarages[id][gInterior]);
    INI_Int("Precio", InfoGarages[id][gPrice]);
    INI_Int("Nivel", InfoGarages[id][gLevel]);
    INI_Int("Locked", InfoGarages[id][gLocked]);
    INI_Int("Casa", InfoGarages[id][gHouseID]);
	return 1;
}

AntiDeAMX()
{
    new a[][] = {
        "Unarmed (Fist)",
        "Brass K"
    };
    #pragma unused a
}

public OnGameModeInit()
{
	AntiDeAMX();

	DBInsanity = mysql_connect(sql_host, sql_user, sql_password, sql_database);

	if (mysql_errno() != 0)
	{
    	print("No se pudo establecer la conexión a la base de datos.");
		SendRconCommand("exit");
    	return 1;
	}
	else
	{
    	print("Conexión MySQL con éxito.");
	}

	mysql_tquery(DBInsanity, "SELECT * FROM `vehiculos` ORDER BY `ID` ASC", "CargarVehiculos");
	mysql_tquery(DBInsanity, "SELECT * FROM `casas` ORDER BY `ID` ASC", "CargarCasas");
	mysql_tquery(DBInsanity, "SELECT * FROM `negocios` ORDER BY `ID` ASC", "CargarNegocios");
	mysql_tquery(DBInsanity, "SELECT * FROM `puertas` ORDER BY `ID` ASC", "CargarPuertas");
	mysql_tquery(DBInsanity, "SELECT * FROM `facciones` ORDER BY `ID` ASC", "CargarFacciones");				// (15/02/2020)
	mysql_tquery(DBInsanity, "SELECT * FROM `actores` ORDER BY `ID` ASC", "CargarActores");					// (02/03/2020)
	mysql_tquery(DBInsanity, "SELECT * FROM `objetos_admin` ORDER BY `ID` ASC", "CargarObjetosAdmin");      // (06/03/2020)
	mysql_tquery(DBInsanity, "SELECT * FROM `cajeros` ORDER BY `ID` ASC", "CargarCajeros");                 // (14/03/2020)
	mysql_tquery(DBInsanity, "SELECT * FROM `graffitis` ORDER BY `ID` ASC", "CargarGraffitis");             // (20/04/2020)

	alm(AnunceString1, "none");
	alm(AnunceString2, "none");
	alm(AnunceString3, "none");
	alm(AnunceString4, "none");

	//configuración
	djson_GameModeInit();
    AllowInteriorWeapons(true);
    ShowPlayerMarkers(PLAYER_MARKERS_MODE_GLOBAL);
    EnableStuntBonusForAll(false);
    DisableInteriorEnterExits();
    ManualVehicleEngineAndLights();
    SetNameTagDrawDistance(20.0);
	Streamer_VisibleItems(STREAMER_TYPE_OBJECT, 2000);

	SendRconCommand("mapname Los Santos");
	SendRconCommand("language Español - Spanish");
	SendRconCommand("weburl "web"");
	SendRconCommand("gamemodetext I-RP v"#version_actual"");
	SendRconCommand("hostname Insanity — Juego de Rol");

	//****************Sistema AFK*****************
	Messageafk = TextDrawCreate(1.000000,435.000000,"  ");
   	TextDrawAlignment(Messageafk,0);
   	TextDrawBackgroundColor(Messageafk,0x000000ff);
   	TextDrawFont(Messageafk,2);
   	TextDrawLetterSize(Messageafk,0.598999,1.300000);
	TextDrawSetOutline(Messageafk,1);
   	TextDrawSetProportional(Messageafk,1);
   	TextDrawSetShadow(Messageafk,1);

	LoadStuff();
	loadGPS();
	loadGarages(); // Garajes.

	bars = LoadModelSelectionMenu("mSelection/bars.txt");

	ClearReports();

	mapeos_total();
	add_mapeos_edinson();

	gettime(ghour, gminute, gsecond);
	FixHour(ghour);
	ghour = shifthour;
	GiftAllowed = 1;

	Loop(v, MAX_VEHICLES, 0) { veh_gasolina[v] = 200; }
	Loop(i, MAX_OBJETOS_S, 0) { InfoSuelo[i][DropLabel] = CreateDynamic3DTextLabel("dropid", -1, -1178.1569, 58.9069, 1.9609, 1.0, .worldid = 1+777, .interiorid = i); }

	// camello
	new ActorCamello[4];
	ActorCamello[0] = CreateDynamicActor(29, 2526.8215, -1641.3239, 13.9997, 336.4544, true, 100.0, 0, 0);
	ActorCamello[1] = CreateDynamicActor(28, 2474.8921, -1324.3365, 27.5433, 290.1262, true, 100.0, 0, 0);
	ActorCamello[2] = CreateDynamicActor(29, 1935.6304, -1060.5109, 24.4119, 216.1305, true, 100.0, 0, 0);
	ActorCamello[3] = CreateDynamicActor(28, 833.7507, -1528.7776, 13.6607, 162.5782, true, 100.0, 0, 0);
	ApplyDynamicActorAnimation(ActorCamello[0], "COP_AMBIENT", "Coplook_watch", 4.1, 0, 1, 1, 1, 1);
	ApplyDynamicActorAnimation(ActorCamello[1], "COP_AMBIENT", "Coplook_watch", 4.1, 0, 1, 1, 1, 1);
	ApplyDynamicActorAnimation(ActorCamello[2], "COP_AMBIENT", "Coplook_watch", 4.1, 0, 1, 1, 1, 1);
	ApplyDynamicActorAnimation(ActorCamello[3], "COP_AMBIENT", "Coplook_watch", 4.1, 0, 1, 1, 1, 1);
	CreateDynamic3DTextLabel("/camello", 0xE6DE48FF, 2526.8215, -1641.3239, 13.9997, 5.0);
	CreateDynamic3DTextLabel("/camello", 0xE6DE48FF, 2474.8921, -1324.3365, 27.5433, 5.0);
	CreateDynamic3DTextLabel("/camello", 0xE6DE48FF, 1935.6304, -1060.5109, 24.4119, 5.0);
	CreateDynamic3DTextLabel("/camello", 0xE6DE48FF, 833.7507, -1528.7776, 13.6607, 5.0);

	// Textdraw's by EdinsonWalker
	TD_Anuncio[0] = TextDrawCreate(533.288879, 405.249786, "");
	TextDrawLetterSize(TD_Anuncio[0], 0.177136, 0.859163);
	TextDrawAlignment(TD_Anuncio[0], 3);
	TextDrawColor(TD_Anuncio[0], -1);
	TextDrawSetShadow(TD_Anuncio[0], 0);
	TextDrawSetOutline(TD_Anuncio[0], 1);
	TextDrawBackgroundColor(TD_Anuncio[0], 255);
	TextDrawFont(TD_Anuncio[0], 1);
	TextDrawSetProportional(TD_Anuncio[0], 1);

	TD_Anuncio[1] = TextDrawCreate(533.288879, 392.999877, "");
	TextDrawLetterSize(TD_Anuncio[1], 0.177136, 0.859163);
	TextDrawAlignment(TD_Anuncio[1], 3);
	TextDrawColor(TD_Anuncio[1], -1);
	TextDrawSetShadow(TD_Anuncio[1], 0);
	TextDrawSetOutline(TD_Anuncio[1], 1);
	TextDrawBackgroundColor(TD_Anuncio[1], 255);
	TextDrawFont(TD_Anuncio[1], 1);
	TextDrawSetProportional(TD_Anuncio[1], 1);

	TD_Anuncio[2] = TextDrawCreate(533.288879, 380.166687, "");
	TextDrawLetterSize(TD_Anuncio[2], 0.177136, 0.859163);
	TextDrawAlignment(TD_Anuncio[2], 3);
	TextDrawColor(TD_Anuncio[2], -1);
	TextDrawSetShadow(TD_Anuncio[2], 0);
	TextDrawSetOutline(TD_Anuncio[2], 1);
	TextDrawBackgroundColor(TD_Anuncio[2], 255);
	TextDrawFont(TD_Anuncio[2], 1);
	TextDrawSetProportional(TD_Anuncio[2], 1);

	TD_Anuncio[3] = TextDrawCreate(533.288879, 367.916625, "");
	TextDrawLetterSize(TD_Anuncio[3], 0.177136, 0.859163);
	TextDrawAlignment(TD_Anuncio[3], 3);
	TextDrawColor(TD_Anuncio[3], -1);
	TextDrawSetShadow(TD_Anuncio[3], 0);
	TextDrawSetOutline(TD_Anuncio[3], 1);
	TextDrawBackgroundColor(TD_Anuncio[3], 255);
	TextDrawFont(TD_Anuncio[3], 1);
	TextDrawSetProportional(TD_Anuncio[3], 1);

	TD_Anuncio[4] = TextDrawCreate(533.288879, 356.249908, "");
	TextDrawLetterSize(TD_Anuncio[4], 0.177136, 0.859163);
	TextDrawAlignment(TD_Anuncio[4], 3);
	TextDrawColor(TD_Anuncio[4], -1);
	TextDrawSetShadow(TD_Anuncio[4], 0);
	TextDrawSetOutline(TD_Anuncio[4], 1);
	TextDrawBackgroundColor(TD_Anuncio[4], 255);
	TextDrawFont(TD_Anuncio[4], 1);
	TextDrawSetProportional(TD_Anuncio[4], 1);

	TDmariguana[0] = TextDrawCreate(-12.588244, -6.583353, "medio");
	TextDrawLetterSize(TDmariguana[0], 0.000000, 53.247062);
	TextDrawTextSize(TDmariguana[0], 646.000000, 0.000000);
	TextDrawAlignment(TDmariguana[0], 1);
	TextDrawColor(TDmariguana[0], -1);
	TextDrawUseBox(TDmariguana[0], 1);
	TextDrawBoxColor(TDmariguana[0], 106);
	TextDrawSetShadow(TDmariguana[0], 0);
	TextDrawBackgroundColor(TDmariguana[0], 255);
	TextDrawFont(TDmariguana[0], 1);
	TextDrawSetProportional(TDmariguana[0], 1);

	TDmariguana[1] = TextDrawCreate(-0.352934, 0.416626, "arriba");
	TextDrawLetterSize(TDmariguana[1], 0.000000, 13.200011);
	TextDrawTextSize(TDmariguana[1], 671.000000, 0.000000);
	TextDrawAlignment(TDmariguana[1], 1);
	TextDrawColor(TDmariguana[1], -1);
	TextDrawUseBox(TDmariguana[1], 1);
	TextDrawBoxColor(TDmariguana[1], 255);
	TextDrawSetShadow(TDmariguana[1], 0);
	TextDrawBackgroundColor(TDmariguana[1], 255);
	TextDrawFont(TDmariguana[1], 2);
	TextDrawSetProportional(TDmariguana[1], 1);

	TDmariguana[2] = TextDrawCreate(-8.352933, 327.666625, "abajo");
	TextDrawLetterSize(TDmariguana[2], 0.000000, 13.200011);
	TextDrawTextSize(TDmariguana[2], 660.000000, 0.000000);
	TextDrawAlignment(TDmariguana[2], 1);
	TextDrawColor(TDmariguana[2], -1);
	TextDrawUseBox(TDmariguana[2], 1);
	TextDrawBoxColor(TDmariguana[2], 255);
	TextDrawSetShadow(TDmariguana[2], 0);
	TextDrawBackgroundColor(TDmariguana[2], 255);
	TextDrawFont(TDmariguana[2], 2);
	TextDrawSetProportional(TDmariguana[2], 1);

	/*TDLogin[0] = TextDrawCreate(240.529586, 55.250041, "");
	TextDrawTextSize(TDLogin[0], 90.000000, 90.000000);
	TextDrawAlignment(TDLogin[0], 1);
	TextDrawColor(TDLogin[0], COLOR_GENERAL);
	TextDrawSetShadow(TDLogin[0], 0);
	TextDrawFont(TDLogin[0], 5);
	TextDrawSetProportional(TDLogin[0], 0);
	TextDrawSetPreviewModel(TDLogin[0], 560);
	TextDrawBackgroundColor(TDLogin[0], 0x00000000);
	TextDrawSetPreviewRot(TDLogin[0], -10.000000, 4.000000, -40.000000, 1.000000);
	TextDrawSetPreviewVehCol(TDLogin[0], 1, 1);

	TDLogin[1] = TextDrawCreate(348.294006, 37.750015, "");
	TextDrawTextSize(TDLogin[1], 90.000000, 90.000000);
	TextDrawAlignment(TDLogin[1], 1);
	TextDrawColor(TDLogin[1], -1);
	TextDrawSetShadow(TDLogin[1], 0);
	TextDrawFont(TDLogin[1], 5);
	TextDrawSetProportional(TDLogin[1], 0);
	TextDrawSetPreviewModel(TDLogin[1], 92);
	TextDrawBackgroundColor(TDLogin[1], 0x00000000);
	TextDrawSetPreviewRot(TDLogin[1], 0.000000, 0.000000, 35.000000, 1.000000);

	TDLogin[2] = TextDrawCreate(247.176803, 59.333370, "Insanity");
	TextDrawLetterSize(TDLogin[2], 0.644706, 2.509997);
	TextDrawAlignment(TDLogin[2], 1);
	TextDrawColor(TDLogin[2], COLOR_GENERAL);
	TextDrawSetShadow(TDLogin[2], 0);
	TextDrawSetOutline(TDLogin[2], 1);
	TextDrawBackgroundColor(TDLogin[2], 255);
	TextDrawFont(TDLogin[2], 3);
	TextDrawSetProportional(TDLogin[2], 1);

	TDLogin[3] = TextDrawCreate(297.059082, 79.166656, "RolePlay");
	TextDrawLetterSize(TDLogin[3], 0.644706, 2.509997);
	TextDrawAlignment(TDLogin[3], 1);
	TextDrawColor(TDLogin[3], -1);
	TextDrawSetShadow(TDLogin[3], 0);
	TextDrawSetOutline(TDLogin[3], 1);
	TextDrawBackgroundColor(TDLogin[3], 255);
	TextDrawFont(TDLogin[3], 3);
	TextDrawSetProportional(TDLogin[3], 1);*/


	velocimetro_nice[0] = TextDrawCreate(538.470458, 358.073455, "box_principal");
	TextDrawLetterSize(velocimetro_nice[0], 0.000000, 4.964698);
	TextDrawTextSize(velocimetro_nice[0], 613.000000, 0.000000);
	TextDrawAlignment(velocimetro_nice[0], 1);
	TextDrawColor(velocimetro_nice[0], -1);
	TextDrawUseBox(velocimetro_nice[0], 1);
	TextDrawBoxColor(velocimetro_nice[0], 572662218);
	TextDrawSetShadow(velocimetro_nice[0], 0);
	TextDrawBackgroundColor(velocimetro_nice[0], 255);
	TextDrawFont(velocimetro_nice[0], 1);
	TextDrawSetProportional(velocimetro_nice[0], 1);

	velocimetro_nice[1] = TextDrawCreate(538.470458, 358.073455, "box_bici");
	TextDrawLetterSize(velocimetro_nice[1], 0.000000, 3.599988);
	TextDrawTextSize(velocimetro_nice[1], 613.000000, 0.000000);
	TextDrawAlignment(velocimetro_nice[1], 1);
	TextDrawColor(velocimetro_nice[1], -1);
	TextDrawUseBox(velocimetro_nice[1], 1);
	TextDrawBoxColor(velocimetro_nice[1], 572662218);
	TextDrawSetShadow(velocimetro_nice[1], 0);
	TextDrawBackgroundColor(velocimetro_nice[1], 255);
	TextDrawFont(velocimetro_nice[1], 1);
	TextDrawSetProportional(velocimetro_nice[1], 1);

	velocimetro_nice[2] = TextDrawCreate(580.823364, 366.271942, "km/h");
	TextDrawLetterSize(velocimetro_nice[2], 0.255939, 1.530820);
	TextDrawAlignment(velocimetro_nice[2], 1);
	TextDrawColor(velocimetro_nice[2], -1);
	TextDrawSetShadow(velocimetro_nice[2], 0);
	TextDrawSetOutline(velocimetro_nice[2], 1);
	TextDrawBackgroundColor(velocimetro_nice[2], 255);
	TextDrawFont(velocimetro_nice[2], 2);
	TextDrawSetProportional(velocimetro_nice[2], 1);

	TD_Load[0] = TextDrawCreate(-14.000000, -15.955551, "box");
	TextDrawLetterSize(TD_Load[0], 0.000000, 51.749965);
	TextDrawTextSize(TD_Load[0], 657.000000, 0.000000);
	TextDrawAlignment(TD_Load[0], 1);
	TextDrawColor(TD_Load[0], -1);
	TextDrawUseBox(TD_Load[0], 1);
	TextDrawBoxColor(TD_Load[0], 0x000000FF);
	TextDrawSetShadow(TD_Load[0], 0);
	TextDrawBackgroundColor(TD_Load[0], 255);
	TextDrawFont(TD_Load[0], 1);
	TextDrawSetProportional(TD_Load[0], 0);

	TD_Load[1] = TextDrawCreate(623.000000, 415.866729, "C_a_r_g_a_n_d_o_._._.");
	TextDrawLetterSize(TD_Load[1], 0.525499, 2.041777);
	TextDrawAlignment(TD_Load[1], 3);
	TextDrawColor(TD_Load[1], -1);
	TextDrawSetShadow(TD_Load[1], 0);
	TextDrawSetOutline(TD_Load[1], 1);
	TextDrawBackgroundColor(TD_Load[1], 255);
	TextDrawFont(TD_Load[1], 0);
	TextDrawSetProportional(TD_Load[1], 1);

	/*TD_Account[0] = TextDrawCreate(246.500000, 127.777786, "box");
	TextDrawLetterSize(TD_Account[0], 0.000000, 20.200004);
	TextDrawTextSize(TD_Account[0], 386.000000, 0.000000);
	TextDrawAlignment(TD_Account[0], 1);
	TextDrawColor(TD_Account[0], -1);
	TextDrawUseBox(TD_Account[0], 1);
	TextDrawBoxColor(TD_Account[0], 714);
	TextDrawSetShadow(TD_Account[0], 0);
	TextDrawBackgroundColor(TD_Account[0], 255);
	TextDrawFont(TD_Account[0], 1);
	TextDrawSetProportional(TD_Account[0], 1);

	TD_Account[1] = TextDrawCreate(317.000000, 274.000091, "Cargando_datos~n~de_tu_cuenta");
	TextDrawLetterSize(TD_Account[1], 0.400000, 1.600000);
	TextDrawAlignment(TD_Account[1], 2);
	TextDrawColor(TD_Account[1], COLOR_GENERAL);
	TextDrawSetShadow(TD_Account[1], 0);
	TextDrawSetOutline(TD_Account[1], 1);
	TextDrawBackgroundColor(TD_Account[1], 255);
	TextDrawFont(TD_Account[1], 3);
	TextDrawSetProportional(TD_Account[1], 1);*/

	/*TD_fechahora = TextDrawCreate(635.000000, 3.333309, "00:00_PM_-_00_de_diciembre_del_0000");
	TextDrawLetterSize(TD_fechahora, 0.185999, 1.456888);
	TextDrawAlignment(TD_fechahora, 3);
	TextDrawColor(TD_fechahora, -1);
	TextDrawSetShadow(TD_fechahora, 0);
	TextDrawSetOutline(TD_fechahora, 1);
	TextDrawBackgroundColor(TD_fechahora, 255);
	TextDrawFont(TD_fechahora, 2);
	TextDrawSetProportional(TD_fechahora, 1);*/

	txtAnimHelper =
	TextDrawCreate(610.0, 400.0, "Presione (ESPACIO) ~w~Para Detener La Animacion");
    TextDrawUseBox(txtAnimHelper, 0);
	TextDrawFont(txtAnimHelper, 2);
	TextDrawSetShadow(txtAnimHelper,0);
	TextDrawSetOutline(txtAnimHelper,1);
	TextDrawBackgroundColor(txtAnimHelper,255);
	TextDrawColor(txtAnimHelper,0x00C200FF);
	TextDrawAlignment(txtAnimHelper,3);

	// CocheVS
	CocheVS[0] = TextDrawCreate(213.000000, 73.000000, "box");
	TextDrawLetterSize(CocheVS[0], 0.000000, 28.962997);
	TextDrawTextSize(CocheVS[0], 423.000000, 0.000000);
	TextDrawAlignment(CocheVS[0], 1);
	TextDrawColor(CocheVS[0], -1);
	TextDrawUseBox(CocheVS[0], 1);
	TextDrawBoxColor(CocheVS[0], 209);
	TextDrawSetShadow(CocheVS[0], 0);
	TextDrawBackgroundColor(CocheVS[0], 135);
	TextDrawFont(CocheVS[0], 1);
	TextDrawSetProportional(CocheVS[0], 1);

	CocheVS[1] = TextDrawCreate(246.666748, 316.493621, "Regresar");
	TextDrawLetterSize(CocheVS[1], 0.319999, 1.409185);
	TextDrawTextSize(CocheVS[1], 20.400000, 49.000000);
	TextDrawAlignment(CocheVS[1], 2);
	TextDrawColor(CocheVS[1], -1);
	TextDrawUseBox(CocheVS[1], 1);
	TextDrawBoxColor(CocheVS[1], 336860415);
	TextDrawSetShadow(CocheVS[1], 0);
	TextDrawSetOutline(CocheVS[1], 1);
	TextDrawBackgroundColor(CocheVS[1], 255);
	TextDrawFont(CocheVS[1], 1);
	TextDrawSetProportional(CocheVS[1], 1);
	TextDrawSetSelectable(CocheVS[1], true);

	CocheVS[2] = TextDrawCreate(389.933349, 316.218139, "Comprar");
	TextDrawLetterSize(CocheVS[2], 0.319999, 1.409185);
	TextDrawTextSize(CocheVS[2], 20.000000, 49.000000);
	TextDrawAlignment(CocheVS[2], 2);
	TextDrawColor(CocheVS[2], -1);
	TextDrawUseBox(CocheVS[2], 1);
	TextDrawBoxColor(CocheVS[2], 336860415);
	TextDrawSetShadow(CocheVS[2], 0);
	TextDrawSetOutline(CocheVS[2], 1);
	TextDrawBackgroundColor(CocheVS[2], 255);
	TextDrawFont(CocheVS[2], 1);
	TextDrawSetProportional(CocheVS[2], 1);
	TextDrawSetSelectable(CocheVS[2], true);

	// mapicon's

	//puntos de referencia
	CreateDynamicMapIcon(1997.3848,-2330.7671,15.8119, 5, 0, 0, 0, -1, 500.0); // AERO
	CreateDynamicMapIcon(982.1611,-1161.3580,25.0972, 52, 0, 0, 0, -1, 500.0); // Banco de LS
	CreateDynamicMapIcon(1310.8230,-1360.2109,37.8764, 25, 0, 0, 0, -1, 500.0); // Casino LS

	// 3d label's
	CreateDynamic3DTextLabel("Para reparaciones y gasolina\nEscribe {00AE57}/tallerpd{EBEBEB} aquí", 0xEBEBEBFF, 1549.3959, -1698.3270, 5.8906, 8.0, .worldid = 0, .interiorid = 0); // tallerpd
	CreateDynamicPickup(1366, 1, 1549.3959, -1698.3270, 5.8906, 0, 0); // tallerpd

	//jobcitos ilegales uwu
	CreateDynamic3DTextLabel("Para obtener el job de {00AE57}Delincuente\n{EBEBEB}usa {00AE57}/delincuente", 0xEBEBEBFF, 2614.9531, -1391.6821, 34.7745, 2.0, INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,0,0); // delincuente owo

	// facción lspd
	CreateDynamic3DTextLabel("Vestuario - Equipamiento", 0xE6DE48FF, 1563.139038,-1660.670166,4990.585937, 2.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,1,1); // VW y Interior.
	CreateDynamic3DTextLabel("Sala de Camáras", 0xE6DE48FF, 1570.088134,-1643.076782,4990.585937, 2.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,1,1);
	CreateDynamic3DTextLabel("Habitación Sur", 0xE6DE48FF, 1570.116943,-1648.917724,4990.585937, 2.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,1,1);
	CreateDynamic3DTextLabel("Habitación Norte", 0xE6DE48FF, 1570.086181,-1660.694946,4990.585937, 2.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,1,1);
	CreateDynamic3DTextLabel("- LSPD -\nAsuntos Internos", 0xE6DE48FF, 1562.799682,-1654.848266,4995.400024, 2.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,1,1);
	CreateDynamic3DTextLabel("- Oficina -\n Coronel LSPD", 0xE6DE48FF, 1570.060913,-1654.852294,4995.400024, 2.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,1,1);
	CreateDynamic3DTextLabel("- Oficina -\n Sub-Cronel LSPD", 0xE6DE48FF, 1570.115234,-1643.015380,4995.400024, 2.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,1,1);
	CreateDynamic3DTextLabel("Sala de reuniones", 0xE6DE48FF, 1569.175537,-1697.985839,4990.585937, 2.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,1,1);
	CreateDynamic3DTextLabel("Recursos Humanos", 0xE6DE48FF, 1568.017700,-1709.321289,4995.420043, 2.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,1,1);
	CreateDynamic3DTextLabel("Escuela de Cadetes", 0xE6DE48FF, 1565.713256,-1700.902709,4995.400024, 2.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,1,1);
	CreateDynamic3DTextLabel("Ascensor Sector Norte\n{FFFFFF}Presiona [F]", COLOR_WHITE, 1554.664062,-1709.667602,4995.55, 3.5,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,1,1);
	CreateDynamic3DTextLabel("Ascensor Sector Norte\n{FFFFFF}Presiona [F]", COLOR_WHITE, 1554.664062,-1709.667602,4990.760253, 3.5,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,1,1);
	CreateDynamic3DTextLabel("Ascensor Sector Norte\n{FFFFFF}Presiona [F]", COLOR_WHITE, 1525.365966,-1677.872680,5.890625, 3.5,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,0,0);
	CreateDynamic3DTextLabel("Ascensor Sector Sur\n{FFFFFF}Presiona [F]", COLOR_WHITE, 1555.022094,-1648.046508,4995.55, 3.5,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,1,1);
	CreateDynamic3DTextLabel("Ascensor Sector Sur\n{FFFFFF}Presiona [F]", COLOR_WHITE, 1555.022094,-1648.046508,4990.700195, 3.5,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,1,1);
	CreateDynamic3DTextLabel("Ascensor Sector Sur\n{FFFFFF}Presiona [F]", COLOR_WHITE, 1555.0,-1648.085815,4985.34, 3.5,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,1,1);
	CreateDynamic3DTextLabel("Acreditación para entrar en prisión\n[CMD] /autorizar [ID] - /arrestar [ID]", 0x13D269FF, 1559.655151,-1649.434326,4990.585937, 4.5,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,1,1);

	//vip
	CreateDynamic3DTextLabel("Para abrir el Locker.\n{FFFFFF}Usa /viplocker",                                               	 COLOR_WHITE,798.4911,-1416.1251,1016.4688+0.6,4.0);/// VIP locker room
	CreateDynamic3DTextLabel("/regalo\n{FFFFFF}para ver el interior.",                                                           COLOR_WHITE,798.0074,-1419.0095,1016.4688+0.8,8.0);/// VIP Lounge

	//mercado negro
	CreateDynamic3DTextLabel("Mercado negro\nUtiliza: {00AE57}/mccomprar",			0xEBEBEBFF, 1266.4241,234.3856,25.0487,8.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,0,0);

	//faccs
	CreateDynamic3DTextLabel("Control de Celdas\n{FFFFFF}Presiona [F]",  														 COLOR_YELLOW, 303.62,-1622.30,87.5,8.0);// NUEVO FBI. (Presione "F")
	CreateDynamic3DTextLabel("[!] {ffffff}''/creararma''",                          						        	 COLOR_GENERAL, 1403.3466,169.7050,1002.5013,8.0);
	CreateDynamic3DTextLabel("[!] {ffffff}''/aprender''",                                							     COLOR_GENERAL, 1401.1886,174.4594,1002.5007,8.0);
	CreateDynamic3DTextLabel("Escribe /ap - /cp\n{FFFFFF}Celda N1",                                                  			 COLOR_YELLOW,1452.379394,-1506.422851,1604.029,3.0);// ap judicial 1
	CreateDynamic3DTextLabel("Escribe /ap - /cp\n{FFFFFF}Celda N2",                                                  			 COLOR_YELLOW,1443.875610,-1524.978759,1604.029,3.0);// ap judicial 2
	CreateDynamic3DTextLabel("Control de Celdas\n{FFFFFF}Presiona [F]",                                                  		 COLOR_YELLOW,1425.134399,-1481.341186,1617.292480,2.5);// ap judicial 3

	//Comandos
	CreateDynamic3DTextLabel("Depósito\n/embargar", 							                                                 COLOR_WHITE, 1636.041259,-1811.950317,13.524469+0.6, 10.0);
	CreateDynamic3DTextLabel("Multas\n{FFFFFF}Usa /pagarm", 					                  								 COLOR_WHITE, 240.4770,112.7777,1003.2188+0.6, 8.0); // Pagar Multas MAP LSPD.
	CreateDynamic3DTextLabel("Multas\n{FFFFFF}Usa /pagarm", 					                  								 COLOR_WHITE, 358.2679,182.0734,1008.3828, 8.0); // Pagar Multas DGT.
	CreateDynamic3DTextLabel("Deseas vender tú coche\n{FFFFFF}Usa /vendercoche.",                                                COLOR_WHITE, 358.2679,186.2302,1008.3828, 8.0); // /vendercoche.
	CreateDynamic3DTextLabel("Sitio de arresto LSPD\n{FFFFFF}Usa /arrestar.",                                                    COLOR_WHITE,1559.3228,-1693.7491,5.8970+0.6,4.0);// Arresto LSPD
	CreateDynamic3DTextLabel("Sitio de arresto FBI\n{FFFFFF}Usa /arrestar.",                                                     COLOR_WHITE,299.9566,-1529.9164,24.9219,8.0); // Arresto FBI.
	CreateDynamic3DTextLabel("Sitio de arresto LSCSD\n{FFFFFF}Usa /arrestar.",											 COLOR_WHITE,613.3228,-589.1623,17.2266+0.6,4.0);///arrest(LSPD)

	CreateDynamic3DTextLabel("Presiona\n{FFFFFF}F Para entrar.",                                                                 COLOR_YELLOW,1564.8464,-1666.1444,28.3956+0.6,4.0); //LSPD Roof enter
	CreateDynamic3DTextLabel("Para aprender algún estilo de pelea\n{FFFFFF}Usa /apelear",                                        COLOR_WHITE, 767.6719,13.6320,1000.7010,8.0); //GYM LS
	CreateDynamic3DTextLabel("Para aprender algún estilo de pelea\n{FFFFFF}Usa /apelear",                                        COLOR_WHITE, 769.00,-47.39,1000.59,8.0); // GYM SF
	CreateDynamic3DTextLabel("GYM Ganton Garage\n{FFFFFF}Usa /entrar",                                                           COLOR_YELLOW,2281.1748,-1724.4528,13.2521+0.6,8.0);
	CreateDynamic3DTextLabel("Sube a una bicicleta\npara {FFFFFF}rentarla",		                                                 0x9ACD32AA,1727.5811,-1865.1080,13.5730+0.5,6.0); //Renk Bike
	CreateDynamic3DTextLabel("Para adquirir licencias\n{FFFFFF}Usa /comprarlicencia", 			                     			 COLOR_WHITE, 1407.6,-1921.669311,1227.8+0.6, 7.5); // /comprarlicencias UNI
	CreateDynamic3DTextLabel("Solicitud de licencias\n{FFFFFF}/comprarlicencia", 			                     			 	 COLOR_WHITE, 1564.0000, -1676.8358, 4989.5386+0.6, 2.5); // /comprarlicencias LSPD

	//gasolineras
	CreateDynamic3DTextLabel("Punto de Gasolina\nUtiliza {00C200}/llenar\n{FFFFFF}Uso exclusivo para vehículos embargados",       COLOR_WHITE,1628.361938,-1808.970458,13.521308+0.6,4.0); // Depósito. (/llenar)
	CreateDynamic3DTextLabel("Punto de Gasolina\nUtiliza {00C200}/llenar\n{FFFFFF}Uso exclusivo para helicópteros",         COLOR_WHITE,1880.558105,-2304.451660,14.119070+0.6,4.0); // Aeropuerto. (/llenar)

	//otros
	CreateDynamic3DTextLabel("Banco Central de Los Santos\nUtiliza {00AE57}/banco",	0xEBEBEBFF, 985.7003, -1171.2474, 24.9037, 8.0);
	CreateDynamicPickup(1239, 1, 985.7003, -1171.2474, 24.9037);

	//prisión
	fen1 = CreateDynamicObject(969,1417.90002441,-1554.90002441,4334.70019531,0.00000000,269.74975586,358.50000000); //object(electricgate) (1)
	fen2 = CreateDynamicObject(969,1425.90002441,-1555.00000000,4334.70019531,0.00000000,269.74743652,359.49755859); //object(electricgate) (2)
	fen3 = CreateDynamicObject(969,1429.50000000,-1554.80004883,4334.70019531,0.00000000,269.74731445,359.49462891); //object(electricgate) (3)
	fen4 = CreateDynamicObject(969,1422.19995117,-1567.00000000,4334.60009766,0.00000000,269.74743652,179.99456787); //object(electricgate) (4)
	fen5 = CreateDynamicObject(969,1414.80004883,-1566.69995117,4334.60009766,0.00000000,269.74182129,179.99450684); //object(electricgate) (5)
	fen6 = CreateDynamicObject(969,1430.19995117,-1566.69995117,4334.70019531,0.00000000,269.74182129,179.99450684); //object(electricgate) (6)
	JDoor1 = CreateButton(1418.19995117,-1555.09997559,4340.79980469, 0.0);
	JDoor2 = CreateButton(1426.00000000,-1555.09997559,4340.79980469, 0.0);
	JDoor3 = CreateButton(1429.80004883,-1554.90002441,4340.79980469, 0.0);
	JDoor4 = CreateButton(1425.80004883,-1566.50000000,4340.79980469, 180);
	JDoor5 = CreateButton(1433.80004883,-1566.40002441,4340.79980469, 180);
	JDoor6 = CreateButton(1418.09997559,-1566.40002441,4340.79980469, 180);

	//prisión qsyo judicial
	PJBT = CreateButton(1440.47095, -1469.90955, 1616.74414, 180);
	PJDOOR = CreateDynamicObject(1495, 1440.71216, -1469.97485, 1615.26636,   0.00000, 0.00000, 0.00000);
	PJBT2 = CreateButton(1422.5317, -1469.8695, 1617.8890, 180);
	PJDOOR2 = CreateDynamicObject(1495, 1422.93811, -1469.96814, 1616.24707,   0.00000, 0.00000, 0.00000);
	PJBT3 = CreateButton(1425.13538, -1481.79163, 1617.80505, 180.0);
	// (Prisión Judicial).
	PJCELDA = CreateDynamicObject(19303, 1436.45630, -1479.50000, 1617.51892,   0.00000, 0.00000, 0.00000);
	PJCELDA2 = CreateDynamicObject(19303, 1432.98425, -1479.50000, 1617.51892,   0.00000, 0.00000, 0.00000);
	PJCELDA3 = CreateDynamicObject(5856, 1451.96338, -1507.66687, 1605.03467,   0.00000, 0.00000, 90.00000);
	PJCELDA4 = CreateDynamicObject(5856, 1444.35950, -1523.42847, 1605.03467,   0.00000, 0.00000, 90.00000);

	//SAEM
	saem1 = CreateDynamicObject(980, 2457.80, -2254.76, 26.90,   0.00, 0.00, 45.17); // Cerrada
	saem2 = CreateDynamicObject(980, 2338.10571, -2353.88281, 15.2,   0.0, 0.0, 44.0); // Cerrada
	saem3 = CreateDynamicObject(980, 2273.59570, -2663.29053, 15.2,   0.0, 0.0, 90.0); // Cerrada
	saemSF = CreateDynamicObject(980, -1529.04, 482.44, 9.06,   0.00, 0.00, 0.00);// puerta sf
	saemLV = CreateDynamicObject(980, 135.24150, 1941.01294, 20.59000,   0.00000, 0.00000, 0.00000); // LV cerrada.
	saemLV2 = CreateDynamicObject(980, 348.98410, 1801.11804, 20.27390,   0.00000, 358.25000, 41.75000); // LV cerrada.

	//SASD
	ObjSD_derecha = CreateDynamicObject(1536, 253.22101, 108.32223, 1002.21582,   0.00000, 0.00000, 90.00000);
	sd_derecha1 = CreateButton(253.44921875,110.59960938,1003.79998779,90.00000000);
	sd_derecha2 = CreateButton(253.00000000,110.59960938,1003.79998779,270.00000000);

	ObjSD_izquierda = CreateDynamicObject(1536, 239.62317, 116.85412, 1002.21582,   0.00000, 0.00000, 90.00000);
	sd_izquierda1 = CreateButton(239.79492188,116.18457031,1003.87286377,90.00000000);
	sd_izquierda2 = CreateButton(239.32031250,116.27441406,1003.87286377,270.00000000);

	//LSPD
	depositoembargo = CreateDynamicObject(980, 1620.6500244,-1861.5996094,15.3000002,0.0000000,0.0000000,179.9945068); //object(airportgate) (3)
	porton_lspd = CreateDynamicObject(980, 1546.19897, -1627.59656, 15.28090, 0.00000, 0.00000, 90.00000);

	//peajes
	peaje1 = CreateDynamicObject(976, 35.25729, -1516.96399, 4.24860,   0.00000, 0.00000, 270.00000);
	peaje2 = CreateDynamicObject(976, 67.85014, -1545.88879, 4.02450,   0.00000, 0.00000, 89.10002);

	//comandos
	CreateDynamicPickup(1239, 1, 240.4770, 112.7777, 1003.2188); // Pagar Multas LS
	CreateDynamicPickup(1240, 1, 1636.041259, -1811.950317, 13.524469); // Embargar
	CreateDynamicPickup(1252, 1, 1628.361938, -1808.970458, 13.521308); // / Gasolinera única - Depósito.
	CreateDynamicPickup(1252, 1, 1880.558105, -2304.451660, 14.119070); // / Gasolinera única - Aeropuerto.
	CreateDynamicPickup(1247, 1, 1559.3228, -1693.7491, 5.8970); // Arresto LSPD
	CreateDynamicPickup(1247, 1, 299.9566, -1529.9164, 24.9219); // Arresto FBI
	CreateDynamicPickup(1247, 1, 613.3228, -589.1623, 17.2266); // Arresto SASD
	CreateDynamicPickup(1239, 1, 767.6719, 13.6320, 1000.7010); // GYM LS

	new tmphour, tmpminute, tmpsecond;
	gettime(tmphour, tmpminute, tmpsecond);
	FixHour(tmphour);
	tmphour = shifthour;
	SetWorldTime(tmphour);
	return 1;
}

EndEffectDroug(playerid, d_tipo)
{
	new si_no = 0;
	if (d_tipo == 1 || d_tipo == 2 || d_tipo == 3) si_no = 1; // cocaína, crack, metanfetamina
	else
	{
		Loop(x, 3, 0) { TextDrawHideForPlayer(playerid, TDmariguana[x]); }
	}
	SendClientMessage(playerid, 0x00B0C4FF, "Los efectos de la droga culminaron.");
	SetPlayerWeather(playerid, ClimaGeneral);
	InfoPersonaje[playerid][pDrogaTipo] = 0;
	InfoPersonaje[playerid][pDrogaTiempo] = 0;
	InfoPersonaje[playerid][pDrogaPower] = 0;
	new query[512];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Droga_tipo = 0, Droga_tiempo = 0, Droga_power = 0 WHERE ID = '%d'", InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, query);
	if (si_no == 1)
	{
		if(InfoPersonaje[playerid][pAdiccion][0] >= 10 || InfoPersonaje[playerid][pAdiccion][1] >= 10 || InfoPersonaje[playerid][pAdiccion][2] >= 10)
			random_abstinence[playerid] = SetTimerEx("RandomAbstinence", 60000*15, false, "i", playerid);
	}
}

funcion RandomAbstinence(playerid)
{
    // En un futuro, hacer que las probabilidades de obtener abstinencia sean mayores, mientras mayor sea el nivel de adicción
    new abstinence = random(11)+1;
    switch(abstinence)
    {
        case 1,5,6,10: random_abstinence[playerid] = SetTimerEx("RandomAbstinence", 60000*15, false, "i", playerid);
        case 2,9: abstinence_power[playerid] = 1, GiveAbstinence(playerid);
        case 3,8: abstinence_power[playerid] = 2, GiveAbstinence(playerid);
        case 4: abstinence_power[playerid] = 3, GiveAbstinence(playerid);
        case 7: abstinence_power[playerid] = 4, GiveAbstinence(playerid);
    }
    return 1;
}

funcion GiveAbstinence(playerid)
{
    if (InfoPersonaje[playerid][pAbstinenceEffect] == 0)
    {
        switch (abstinence_power[playerid])
        {
            case 1: InfoPersonaje[playerid][pAbstinenceTime] = 10;
            case 2: InfoPersonaje[playerid][pAbstinenceTime] = 15;
            case 3: InfoPersonaje[playerid][pAbstinenceTime] = 20;
            case 4: InfoPersonaje[playerid][pAbstinenceTime] = 25;
        }
        InfoPersonaje[playerid][pAbstinenceEffect] = 1;
    }
	new query[256];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET AbstinenceEffect = '%d', AbstinenceTime = '%d' WHERE ID = '%d'", InfoPersonaje[playerid][pAbstinenceEffect], InfoPersonaje[playerid][pAbstinenceTime], InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, query);
    SendClientMessage(playerid, 0xFF6347AA, "Estás adicto a alguna droga y la abstinencia te consume.");
    SendClientMessage(playerid, 0x822828FF, "Puedes aguantar el efecto, consumir una droga a la que eres adicto.");
    return 1;
}

forward timer_minuto();
public timer_minuto()
{
	//resta de gasolina
	Loop(v, MAX_VEHICLES, 0) if (GetVehicleModel(v))
	{
		new modelid = GetVehicleModel(v);
		new engine, lights, alarm, doors, bonnet, boot, objective;
		GetVehicleParamsEx(v, engine, lights, alarm, doors, bonnet, boot, objective);
		switch (modelid)
		{
			case 520, 476, 593, 553, 513, 512, 577, 592, 511, 539, 464, 519: veh_gasolina[v] = 200;
			case 509, 481, 510: veh_gasolina[v] = 200, arr_Engine{v} = 1, SetVehicleParamsEx(v, VEHICLE_PARAMS_ON, lights, alarm, doors, bonnet, boot, objective);
		}
		if (engine == VEHICLE_PARAMS_ON)
		{
			if (veh_gasolina[v] != 0)
			{
				veh_gasolina[v]--;
				if (veh_gasolina[v] == 0) SetVehicleParamsEx(v, VEHICLE_PARAMS_OFF, lights, alarm, doors, bonnet, boot, objective);
			}
			if (arr_Engine{v} == 0) SetVehicleParamsEx(v, VEHICLE_PARAMS_OFF, lights, alarm, doors, bonnet, boot, objective);
		}
	}
	// borrar llamadas 10 minutos
	Loop(id, 50, 1) if (InfoCentralita[id][c_id] != 0)
	{
		if (InfoCentralita[id][c_timer] > 0) InfoCentralita[id][c_timer]--;
		if (InfoCentralita[id][c_timer] == 0) InfoCentralita[id][c_id] = 0;
	}
	//
	Loop(id, totalvehiculos, 1)
	{
		//sistema renta
		if (InfoVehiculo[id][vRentaTiempo] != 0)
		{
		    new vehicleid = InfoVehiculo[id][vIG_id];
			if (InfoVehiculo[id][vRentaTiempo] > 0) InfoVehiculo[id][vRentaTiempo]--;
			if (InfoVehiculo[id][vRentaTiempo] == 3)
			{
				foreach(new p: Player) if (IsPlayerInVehicle(p, vehicleid))
				{
					SendClientMessage(p, COLOR_YELLOW, "Le quedan sólo tres minutos de renta a este vehículo.");
				}
			}
			if (InfoVehiculo[id][vRentaTiempo] == 0)
			{
				foreach(new p: Player) if (IsPlayerInVehicle(p, vehicleid))
				{
					StopAudioStreamForPlayer(p);
					SendClientMessage(p, COLOR_GENERAL, "El vehículo en el que estabas fue respawneado, su tiempo de renta termino.");
				}
				InfoVehiculo[id][vRentaTiempo] = 0;
				alm(InfoVehiculo[id][vRentaDueno], "none");
				SetVehicleToRespawn(vehicleid);
			}
		}
	}
	Loop(id, totalnegocios, 1) if (InfoNegocio[id][nRobado] != 0){
		InfoNegocio[id][nRobado]--;
	}
	Loop(id, totalnegocios, 1) if (InfoNegocio[id][nTipo] == 12)
	{
		if (InfoNegocio[id][nTimeNecesitaQuimicos] != 0)
		{
			InfoNegocio[id][nTimeNecesitaQuimicos]--;
			guardar_int_mysql("negocios", "TimeNecesitaQuimicos", InfoNegocio[id][nID_sql], InfoNegocio[id][nTimeNecesitaQuimicos]);
			if (InfoNegocio[id][nTimeNecesitaQuimicos] == 0) InfoNegocio[id][nRecorridosQuimicos] = 0;
		}
		Loop(x, 5, 0) if (InfoNegocio[id][nTimeCocinando][x] != 0)
		{
			InfoNegocio[id][nTimeCocinando][x]--;
			new gfolmat[64];
			format(gfolmat, sizeof gfolmat, "TimeCocinando%d", x+1);
			guardar_int_mysql("negocios", gfolmat, InfoNegocio[id][nID_sql], InfoNegocio[id][nTimeCocinando][x]);
			UpdateMesasProduccion(id);
		}
	}

    new hour,minuite,second;
    if(PayDayLeft >= 1)
	{
	    PayDayLeft--;
	}
	else
	{
        PayDayLeft = 60;
	}
	if(PayDaySecond >= 1)
	{
	    PayDaySecond--;
	}
	else
	{
        PayDaySecond = 120;
	}
	gettime(hour, minuite, second);
	FixHour(hour);
	hour = shifthour;
	if (PayDayLeft == 0) PayDay();
	if (PayDaySecond == 0) PayDay2();
	foreach(Player, playerid) if (IsPlayerConnectedEx(playerid))
	{
		InfoPersonaje[playerid][pExperiencia] ++;

		if (InfoPersonaje[playerid][pExperiencia] >= 60) SubirNivel(playerid);

		if (InfoPersonaje[playerid][pTimerAnuncios] != 0)
		{
			InfoPersonaje[playerid][pTimerAnuncios]--;
			guardar_int_mysql("personajes", "TimerAnuncios", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTimerAnuncios]);
		}
		if (InfoPersonaje[playerid][pTogCajero] != 0)
		{
			InfoPersonaje[playerid][pTogCajero]--;
			guardar_int_mysql("personajes", "TogCajero", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTogCajero]);
		}
		if (InfoPersonaje[playerid][pRestriccionRobo] != 0)
		{
			InfoPersonaje[playerid][pRestriccionRobo]--;
			guardar_int_mysql("personajes", "RestriccionRobo", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pRestriccionRobo]);
		}
		if (DelayVisita[playerid] != 0) DelayVisita[playerid]--;
		// drogas
		if (InfoPersonaje[playerid][pAbstinenceEffect] == 1)
		{
			SetPlayerDrunkLevel(playerid, 5000);
			if (InfoPersonaje[playerid][pAbstinenceTime] > 0) InfoPersonaje[playerid][pAbstinenceTime]--;
			else
			{
				InfoPersonaje[playerid][pAbstinenceEffect] = 0;
				InfoPersonaje[playerid][pAbstinenceTime] = 0;
				if (InfoPersonaje[playerid][pAdiccion][0] >= 2) InfoPersonaje[playerid][pAdiccion][0] -= 2;
				if (InfoPersonaje[playerid][pAdiccion][1] >= 2) InfoPersonaje[playerid][pAdiccion][1] -= 2;
				if (InfoPersonaje[playerid][pAdiccion][2] >= 2) InfoPersonaje[playerid][pAdiccion][2] -= 2;
				SendClientMessage(playerid, 0x9ACD32AA, "Lograste aguantar el efecto de la abstinencia, bajaste un poco la adicción.");
				if (InfoPersonaje[playerid][pDrogaTipo] != 0) random_abstinence[playerid] = SetTimerEx("RandomAbstinence", 60000*15, false, "i", playerid);
				new	query[1000];
				mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Adiccion_1 = '%d', Adiccion_2 = '%d', Adiccion_3 = '%d', AbstinenceEffect = 0, AbstinenceTime = 0 WHERE ID = '%d'",
				InfoPersonaje[playerid][pAdiccion][0], InfoPersonaje[playerid][pAdiccion][1], InfoPersonaje[playerid][pAdiccion][2], InfoPersonaje[playerid][pID]);
				mysql_tquery(DBInsanity, query);
			}
		}
		if (InfoPersonaje[playerid][pDrogaTipo] != 0)
		{
			if (InfoPersonaje[playerid][pDrogaTiempo] == 0) EndEffectDroug(playerid, InfoPersonaje[playerid][pDrogaTipo]);
			if (InfoPersonaje[playerid][pDrogaTiempo] > 0) InfoPersonaje[playerid][pDrogaTiempo]--;
			guardar_int_mysql("personajes", "Droga_tiempo", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pDrogaTiempo]);
		}
	}
}

stock GetClosestPlayer(p1){
	new Float:dis,Float:dis2,player;
	player = -1;
	dis = 99999.99;
	foreach(Player, x){
		if(x != p1){
			dis2 = GetDistanceBetweenPlayers(x,p1);
			if(dis2 < dis && dis2 != -1.00){
				dis = dis2;
				player = x;
			}
		}
	}
	return player;
}
funcion SubirNivel(playerid)
{
	if (InfoPersonaje[playerid][pNivel] != 0)
	{
		if (InfoPersonaje[playerid][pExperiencia] >= 60)
		{
			new string[256];
			PlayerPlaySound(playerid, 10214, 0.0, 0.0, 0.0);
			InfoPersonaje[playerid][pNivel]++;
			SetPlayerScore(playerid, InfoPersonaje[playerid][pNivel]);
			InfoPersonaje[playerid][pExperiencia] = 0;
			mysql_format(DBInsanity, string, sizeof string, "UPDATE personajes SET Nivel = '%d', Experiencia = '%d' WHERE ID = '%d'", InfoPersonaje[playerid][pNivel], InfoPersonaje[playerid][pExperiencia], InfoPersonaje[playerid][pID]);
			mysql_tquery(DBInsanity, string);

			SendClientMessage(playerid, 0xEBEBEBFF, "Has completado {00AE57}una hora {EBEBEB}de juego. Subes de nivel automáticamente.");
		}
	}
	return 1;
}

funcion PayDay()
{
	PayDayLeft = 60;
	GiftAllowed = 1;
	SaveStuff();
	PaydayOn = 1;
	SetTimer("PayDayOOF", 180000, false);
	foreach(Player, playerid) if (IsPlayerConnectedEx(playerid))
	{
		InfoPersonaje[playerid][YaCobre] = 0;
		PlayerPlaySound(playerid, 1057, 0.0, 0.0, 0.0);
		InfoPersonaje[playerid][pHorasOn]++;
		InfoPersonaje[playerid][pRepartoViajes] = 0;
		new query[320], string[128];
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET YaCobre = 0, HorasOn = '%d', RepartoViajes = 0 WHERE ID = '%d'", InfoPersonaje[playerid][pHorasOn], InfoPersonaje[playerid][pID]);
		mysql_tquery(DBInsanity, query);

		if (MoneyMessage[playerid] == 1)
		{
			if (InfoPersonaje[playerid][pSancionado] < 1 && !member_faccion(playerid, 1, 2, 3, 4))
			{
				format(query, sizeof query, "No pudiste pagar la deuda de {FF0000}$%s{FFFFFF}. Ahora la policía te está buscando.",diner_coma(GetPlayerCash(playerid)));
				SendClientMessage(playerid, COLOR_WHITE, query);
				if (InfoPersonaje[playerid][pEstrellas] < 6) InfoPersonaje[playerid][pEstrellas] += 1;
				SetPlayerWantedLevel(playerid, InfoPersonaje[playerid][pEstrellas]);
				guardar_int_mysql("personajes", "Estrellas", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pEstrellas]);
			}
		}
		InfoPersonaje[playerid][YaCobre] = 1;
		if (InfoPersonaje[playerid][pLimiteRobos] != 0)
		{
			InfoPersonaje[playerid][pLimiteRobos] = 0;
			SendClientMessage(playerid, 0x36C548FF, "Ya puedes volver a robar. (/robar247)");
		}
		//mensaje
		new saldo_viejo = GetPlayerCash(playerid);
		format(string, sizeof string, "Son las %s.", FechaHoy());
		SendClientMessage(playerid, COLOR_GENERAL, string);
		//pago por facción
		new pago2 = 50*InfoPersonaje[playerid][pRango];
		if (InfoPersonaje[playerid][pMiembro] != 0)
		{
			format(string, sizeof string, "Pago de facción: {00DC00}$%s", diner_coma(pago2));
			SendClientMessage(playerid, 0xEBEBEBFF, string);
		}
		//pago por nivel
		new pago1 = 10*InfoPersonaje[playerid][pNivel];
		format(string, sizeof string, "Pago de gobierno: {00DC00}$%s", diner_coma(pago1));
		SendClientMessage(playerid, 0xEBEBEBFF, string);
		//givecash
		GivePlayerCash(playerid, pago1+pago2, "payday");
		format(string, sizeof(string), "Dinero anterior: {00DC00}$%s{EBEBEB} | Dinero ahora: {00AC00}$%s", diner_coma(saldo_viejo), diner_coma(GetPlayerCash(playerid)));
		SendClientMessage(playerid, 0xEBEBEBFF, string);
		//save
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET LimiteRobos = 0, YaCobre = 1, Experiencia = '%d' WHERE ID = '%d'", InfoPersonaje[playerid][pExperiencia], InfoPersonaje[playerid][pID]);
		mysql_tquery(DBInsanity, query);
		guardar_int_mysql("cuentas", "DobleExp", InfoCuenta[playerid][jID], InfoCuenta[playerid][jDobleExp]);

	}
	return 1;
}

forward PayDay2();
public PayDay2()
{
	new query[175];
	SaveStuff();
	PayDaySecond = 120;
	//pago automático:
	Loop(id, totalnegocios, 1) if (InfoNegocio[id][nVenta] != 0)
	{
	    new pagoG = neg_automatico[InfoNegocio[id][nTipo]];
		if (pagoG != 0)
		{
			if (InfoNegocio[id][nProductos] >= 20)
			{
				InfoNegocio[id][nProductos] -= 20;
				InfoNegocio[id][nDinero] += pagoG;
				mysql_format(DBInsanity, query, sizeof query, "UPDATE negocios SET BolosUwU = '%d', Productos = '%d' WHERE ID = '%d'", InfoNegocio[id][nDinero], InfoNegocio[id][nProductos], InfoNegocio[id][nID_sql]);
				mysql_tquery(DBInsanity, query);
				foreach(Player, playerid) if (usuario_registro[playerid] == 2)
				{
					if (InfoPersonaje[playerid][pNegocio1] == id)
					{
						format(query, sizeof query, "Notificación:{FFFFFF} tu negocio (1) {0080C0}%s{FFFFFF}, ha generado en dos horas {00CC00}$%s{FFFFFF} dólares.", InfoNegocio[id][nNombre], diner_coma(pagoG));
						SendClientMessage(playerid, 0x0080C0FF, query);
					}
					if (InfoPersonaje[playerid][pNegocio2] == id)
					{
						format(query, sizeof query, "Notificación:{FFFFFF} tu negocio (2) {0080C0}%s{FFFFFF}, ha generado en dos horas {00CC00}$%s{FFFFFF} dólares.", InfoNegocio[id][nNombre], diner_coma(pagoG));
						SendClientMessage(playerid, 0x0080C0FF, query);
					}
				}
			}
		}
	}
	return 1;
}

funcion PayDayOOF()
{
    PaydayOn = 0;
}

stock ini_GetKey( line[] )
{
	new keyRes[128];
	keyRes[0] = 0;
    if ( strfind( line , "=" , true ) == -1 ) return keyRes;
    strmid( keyRes , line , 0 , strfind( line , "=" , true ) , sizeof( keyRes) );
    return keyRes;
}

stock ini_GetValue( line[] )
{
	new valRes[128];
	valRes[0]=0;
	if ( strfind( line , "=" , true ) == -1 ) return valRes;
	strmid( valRes , line , strfind( line , "=" , true )+1 , strlen( line ) , sizeof( valRes ) );
	return valRes;
}

forward ClosedLSPDPuerta(id);
public ClosedLSPDPuerta(id)
{
	if (id == 0) SetDynamicObjectRot(lspdPuerta[0], 0.0, 0.0, 90.0);
	if (id == 1) SetDynamicObjectRot(lspdPuerta[1], 0.0, 0.0, -90.0);
	return 1;
}

public OnPlayerPressButton(playerid, buttonid)
{
	if (buttonid == lspdBoton[0] || buttonid == lspdBoton[1])
    {
		if (!member_faccion(playerid, 1)) return SendClientMessage(playerid,COLOR_GREY, "Acceso denegado; Sólo policias.");
		SetDynamicObjectRot(lspdPuerta[0], 0.0, 0.0, 190.0);
        SetTimerEx("ClosedLSPDPuerta", 6000, false, "d", 0);
    }
	if (buttonid == lspdBoton[2] || buttonid == lspdBoton[3])
    {
		if (!member_faccion(playerid, 1)) return SendClientMessage(playerid,COLOR_GREY, "Acceso denegado; Sólo policias.");
		SetDynamicObjectRot(lspdPuerta[1], 0.0, 0.0, -190.0);
        SetTimerEx("ClosedLSPDPuerta", 6000, false, "d", 1);
    }
   	if(buttonid == PJBT)
    {
        if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid,COLOR_GREY, "Acceso denegado; Sólo miembros de la ley policial.");
        MoveDynamicObject(PJDOOR,1439.3900, -1469.97485, 1615.26636, 3.5); // Primer acceso.
        SetTimer("CloseDoorPJ", 5000, 0);
    }
   	if(buttonid == PJBT2)
    {
        if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid,COLOR_GREY, "Acceso denegado; Sólo miembros de la ley policial.");
        MoveDynamicObject(PJDOOR2,1421.6000, -1469.96814, 1616.24707, 3.5); // Segundo acceso.
        SetTimer("CloseDoorPJ2", 5000, 0);
    }
   	if(buttonid == PJBT3)
    {
        if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid,COLOR_GREY, "Acceso denegado; Sólo miembros de la ley policial.");
		Dialog_Show(playerid,ShowCeldas,DIALOG_STYLE_LIST,
		"Prisión Judicial","Abrir Celda N1 - (Cierre automático)\nAbrir Celda N2 - (Cierre automático)","Aceptar","Salir");
    } // 1425.13538, -1481.79163, 1617.80505
	if(buttonid == JDoor1)
    {
		if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid,COLOR_GREY, "Acceso denegado; Sólo miembros de la ley policial.");
        MoveDynamicObject(fen1,1417.90002441,-1554.90002441,4330.50000000,6);
        SetTimer("CloseCell1", 5000, 0);
    }
    if(buttonid == JDoor2)
    {
		if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid,COLOR_GREY, "Acceso denegado; Sólo miembros de la ley policial.");
        MoveDynamicObject(fen2,1425.90002441,-1555.00000000,4330.50000000,6);
        SetTimer("CloseCell2", 5000, 0);
    }
    if(buttonid == JDoor3)
    {
		if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid,COLOR_GREY, "Acceso denegado; Sólo miembros de la ley policial.");
        MoveDynamicObject(fen3,1429.50000000,-1554.80004883,4330.50000000,6);
        SetTimer("CloseCell3", 5000, 0);
    }
    if(buttonid == JDoor4)
    {
		if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid,COLOR_GREY, "Acceso denegado; Sólo miembros de la ley policial.");
        MoveDynamicObject(fen4,1422.19995117,-1567.00000000,4330.50000000,6);
        SetTimer("CloseCell4", 5000, 0);
    }
    if(buttonid == JDoor5) // FIX a 6
    {
		if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid,COLOR_GREY, "Acceso denegado; Sólo miembros de la ley policial.");
        MoveDynamicObject(fen6,1430.19995117,-1566.69995117,4330.50000000,6);
        SetTimer("CloseCell5", 5000, 0);
    }
    if(buttonid == JDoor6)
    {
		if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid,COLOR_GREY, "Acceso denegado; Sólo miembros de la ley policial.");
        MoveDynamicObject(fen5,1414.80004883,-1566.69995117,4330.50000000,6);
        SetTimer("CloseCell6", 5000, 0);
    }
   	if(buttonid == courtbuttons[0])
	{
		if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid,COLOR_GREY, "Acceso denegado; Sólo miembros de la ley policial.");
		MoveDynamicObject(courtgates[1],2138.00292969,1290.96386719-10,7698.24169922,4);
		SetTimer("CloseCourtGate2", 5000, 0);
	}
	if(buttonid == courtbuttons[3])
	{
		if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid,COLOR_GREY, "Acceso denegado; Sólo miembros de la ley policial.");
		MoveDynamicObject(courtgates[1],2138.00292969,1290.96386719-10,7698.24169922,4);
		SetTimer("CloseCourtGate2", 5000, 0);
	}
	if(buttonid == courtbuttons[1])
	{
		if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid,COLOR_GREY, "Acceso denegado; Sólo miembros de la ley policial.");
		MoveDynamicObject(courtgates[0],2138.00000000,1316.72106934+10,7698.23632812,4);
		SetTimer("CloseCourtGate1", 5000, 0);
	}
	if(buttonid == courtbuttons[2])
	{
		if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid,COLOR_GREY, "Acceso denegado; Sólo miembros de la ley policial.");
		MoveDynamicObject(courtgates[0],2138.00000000,1316.72106934+10,7698.23632812,4);
		SetTimer("CloseCourtGate1", 5000, 0);
	}
	if(buttonid == FBILobbyRightBTN[0] || buttonid == FBILobbyRightBTN[1])
	{
		if (!member_faccion(playerid, 2)) return SendClientMessage(playerid,COLOR_GREY, "Acceso denegado; Sólo miembros del FBI.");
		MoveDynamicObject(FBILobbyRight,303.84756470,-1521.62988281,-46.13965225,4);
		SetTimer("CloseFBILobbyRight", 2500, 0);
	}
	//sheriff
	if (buttonid == sd_izquierda1)
	{
		if (!member_faccion(playerid, 4)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo miembros de Sheriff.");
		MoveDynamicObject(ObjSD_izquierda, 239.6232, 115.3600, 1002.2158, 4);
		SetTimer("ClosedSDizquierda", 3000, false);
	}
	else if (buttonid == sd_izquierda2)
	{
		if (!member_faccion(playerid, 4)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo miembros de Sheriff.");
		MoveDynamicObject(ObjSD_izquierda, 239.6232, 115.3600, 1002.2158, 4);
		SetTimer("ClosedSDizquierda", 3000, false);
	}
	else if (buttonid == sd_derecha1)
	{
		if (!member_faccion(playerid, 4)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo miembros de Sheriff.");
	    MoveDynamicObject(ObjSD_derecha, 253.2210, 106.8200, 1002.2158, 4);
		SetTimer("ClosedSDderecha", 3000, false);
	}
	else if (buttonid == sd_derecha2)
	{
		if (!member_faccion(playerid, 4)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo miembros de Sheriff.");
 		MoveDynamicObject(ObjSD_derecha, 253.2210, 106.8200, 1002.2158, 4);
		SetTimer("ClosedSDderecha", 3000, false);
	}
	return false;
}

Dialog:ShowCeldas(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0:
		{
			MoveDynamicObject(PJCELDA, 1438.1360, -1479.50000, 1617.51892, 1.5); // Abierto.
			SetTimer("CloseDoorPJCELDA", 9000, 0);
			meuwu(playerid, "pulsa un botón y abre la celda 1.");
		}
		case 1:
		{
			MoveDynamicObject(PJCELDA2, 1434.6080, -1479.50000, 1617.51892, 1.5); // Abierto.
			SetTimer("CloseDoorPJCELDA2", 9000, 0);
			meuwu(playerid, "pulsa un botón y abre la celda 2.");
		}
	}
	return 1;
}

Dialog:ShowElevador1LSPD(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0:
		{
			SetPosEx(playerid, 1554.822021,-1648.085815,4995.55, -90.0, 1, 1, 1);
			SendClientMessage(playerid, COLOR_WHITE, "Usted se encuentra en la primera planta, ubicación de las Oficinas y Asuntos Internos.");
		}
		case 1:
		{
			SetPosEx(playerid, 1555.0,-1648.085815,4985.34, -90.0, 1, 1, 1);
			SendClientMessage(playerid, COLOR_WHITE, "Usted se encuentra en la prisión de LSPD.");
		}
	}
	return 1;
}

Dialog:ShowElevador2LSPD(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0:
		{
			SetPosEx(playerid, 1554.630126,-1709.477050,4995.55, -90.0, 1, 1, 1);
			SendClientMessage(playerid, COLOR_WHITE, "Usted se encuentra en la primera planta, ubicación de Recursos Humanos y Escuela de Cadetes.");
		}
		case 1:
		{
			SetPosEx(playerid, 1525.365966,-1677.872680,5.890625, -90.0, 0, 0, 1);
			SendClientMessage(playerid, COLOR_WHITE, "Usted se encuentra en el garage de LSPD, recuerde pedir permiso antes de usar una patrulla.");
		}
	}
	return 1;
}

// EMS
KillEMSQueue(playerid)
{
	SetPVarInt(playerid, "mueltito", 0);
	SetPVarInt(playerid, "EstaCrack", 0);
    StopLoopingAnim(playerid);
    TogglePlayerControllable(playerid, true);
	DeletePVar(playerid, "IsFrozen");
	dar_vida(playerid, 50);
	InfoPersonaje[playerid][pMuerto] = 0;
	ActualizarEstado(playerid);
	timer_herido[playerid] = 0;
    player_weapon[playerid] = -1;
	player_asesino[playerid] = -1;
	guardar_int_mysql("personajes", "Muerto", InfoPersonaje[playerid][pID], 0);
	guardar_int_mysql("personajes", "Hospital", InfoPersonaje[playerid][pID], 0);
}

public OnPlayerEnterDynamicArea(playerid, areaid)
{
    foreach(Player, i)
	{
		if(InfoBoombox[i][BB_area]) if(areaid == InfoBoombox[i][BB_area])
		{
			new station[256];
			GetPVarString(i, "BBStation", station, sizeof(station));
			if (!isnull(station) && InfoPersonaje[playerid][pTogMusic] == 1)
			{
				SendClientMessage(playerid, COLOR_LIGHTGREEN, "*** Comienzas a oír música proveniente de un equipo de sonido ***");
				PlayStream(playerid, station, InfoBoombox[i][BB_x], InfoBoombox[i][BB_y], InfoBoombox[i][BB_z], 30.0, 1);
			}
			return 1;
		}
	}
	return 1;
}

stock PlayStream(playerid, url[], Float: posX = 0.0, Float: posY = 0.0, Float: posZ = 0.0, Float: distance = 50.0, usepos = 0)
{
	if(GetPVarType(playerid, "MusBB")) StopAudioStreamForPlayer(playerid);
	else SetPVarInt(playerid, "MusBB", 1);
	PlayAudioStreamForPlayer(playerid, url, posX, posY, posZ, distance, usepos);
}

forward StopStream(playerid);
public StopStream(playerid)
{
	DeletePVar(playerid, "MusBB");
	StopAudioStreamForPlayer(playerid);
}

public OnPlayerLeaveDynamicArea(playerid, areaid)
{
	foreach(Player, i)
	{
		if(InfoBoombox[i][BB_area]) if(areaid == InfoBoombox[i][BB_area])
		{
			StopStream(playerid);
			return 1;
		}
	}
	return 1;
}

public OnPlayerEditAttachedObject(playerid, response, index, modelid, boneid,Float:fOffsetX, Float:fOffsetY, Float:fOffsetZ,Float:fRotX, Float:fRotY, Float:fRotZ,Float:fScaleX, Float:fScaleY, Float:fScaleZ )
{
	if (EditandoObjetoJ[playerid] == 2)
	{
		if (InfoPersonaje[playerid][pEspalda] == 0)
		{
			EditandoObjetoJ[playerid] = 0;
			SendClientMessage(playerid, COLOR_GREY, "No tienes ningún arma que editar.");
			return 1;
		}
		if (!response)
		{
			SetPlayerAttachedObject(playerid, 9, modelid, InfoPersonaje[playerid][ptHueso][7], InfoPersonaje[playerid][ptPosX][7], InfoPersonaje[playerid][ptPosY][7], InfoPersonaje[playerid][ptPosZ][7], InfoPersonaje[playerid][ptRotX][7], InfoPersonaje[playerid][ptRotY][7], InfoPersonaje[playerid][ptRotZ][7], 1.000000, 1.000000, 1.000000);
			SendClientMessage(playerid, 0xefefefff, "Cancelaste la edición del arma.");
			EditandoObjetoJ[playerid] = 0;
			return 1;
		}
		InfoPersonaje[playerid][ptPosX][7] = fOffsetX;
	    InfoPersonaje[playerid][ptPosY][7] = fOffsetY;
	    InfoPersonaje[playerid][ptPosZ][7] = fOffsetZ;
	    InfoPersonaje[playerid][ptRotX][7] = fRotX;
	    InfoPersonaje[playerid][ptRotY][7] = fRotY;
	    InfoPersonaje[playerid][ptRotZ][7] = fRotZ;
		InfoPersonaje[playerid][ptScaleX][7] = 1.000000;
		InfoPersonaje[playerid][ptScaleX][7] = 1.000000;
		InfoPersonaje[playerid][ptScaleX][7] = 1.000000;

		RemovePlayerAttachedObject(playerid, 9);

		SetPlayerAttachedObject(playerid, 9, modelid, InfoPersonaje[playerid][ptHueso][7], InfoPersonaje[playerid][ptPosX][7], InfoPersonaje[playerid][ptPosY][7], InfoPersonaje[playerid][ptPosZ][7], InfoPersonaje[playerid][ptRotX][7], InfoPersonaje[playerid][ptRotY][7], InfoPersonaje[playerid][ptRotZ][7], 1.000000, 1.000000, 1.000000);

		EditandoObjetoJ[playerid] = 0;
		ActualizarToy(playerid, 7);

		SendClientMessage(playerid, COLOR_GENERAL, "Posiciones guardadas, si deseas editar otra vez escribe /arma ajustar.");
		return 1;
	}
	new x = slotselection[playerid], gformat[264];
	InfoPersonaje[playerid][ptPosX][x] = fOffsetX;
    InfoPersonaje[playerid][ptPosY][x] = fOffsetY;
    InfoPersonaje[playerid][ptPosZ][x] = fOffsetZ;
    InfoPersonaje[playerid][ptRotX][x] = fRotX;
    InfoPersonaje[playerid][ptRotY][x] = fRotY;
    InfoPersonaje[playerid][ptRotZ][x] = fRotZ;

    InfoPersonaje[playerid][ptScaleX][x] = fScaleX;
    if (fScaleX < 0.1) InfoPersonaje[playerid][ptScaleX][x] = 0.1;
 	else if (fScaleX > 1.5) InfoPersonaje[playerid][ptScaleX][x] = 1.5;

    InfoPersonaje[playerid][ptScaleY][x] = fScaleY;
 	if (fScaleY < 0.1) InfoPersonaje[playerid][ptScaleY][x] = 0.1;
 	else if (fScaleY > 1.5) InfoPersonaje[playerid][ptScaleY][x] = 1.5;

 	InfoPersonaje[playerid][ptScaleZ][x] = fScaleZ;
 	if (fScaleZ < 0.1) InfoPersonaje[playerid][ptScaleZ][x] = 0.1;
 	else if (fScaleZ > 1.5) InfoPersonaje[playerid][ptScaleZ][x] = 1.5;

	SetPlayerAttachedObject(playerid, x, InfoPersonaje[playerid][ptModelo][x], InfoPersonaje[playerid][ptHueso][x], InfoPersonaje[playerid][ptPosX][x], InfoPersonaje[playerid][ptPosY][x], InfoPersonaje[playerid][ptPosZ][x],
	InfoPersonaje[playerid][ptRotX][x], InfoPersonaje[playerid][ptRotY][x], InfoPersonaje[playerid][ptRotZ][x], InfoPersonaje[playerid][ptScaleX][x], InfoPersonaje[playerid][ptScaleY][x], InfoPersonaje[playerid][ptScaleZ][x],
	SetColorToy(InfoPersonaje[playerid][ptColor][x]));
	InfoPersonaje[playerid][ptColocado][x] = 1;
	ActualizarToy(playerid, x);
	format(gformat, sizeof gformat, "Posiciones de tu {00AE57}%s{FFFFFF} actualizadas. Si quieres editar otro toy, usa: {00AE57}/toys{FFFFFF}.", GetNameToy(playerid, x));
	SendClientMessage(playerid, 0xFFFFFFFF, gformat);
	slotselection[playerid] = -1;
	Editing[playerid] = 0;
    return 1;
}

public OnDialogResponse(playerid, dialogid, response, listitem, inputtext[])
{
	return 1;
}
	
IsVehicleBusy(vehicleid) // The_Chaoz ¿?¿?¿
{
    for(new i; i<GetMaxPlayers(); i++)
    	if(IsPlayerConnected(i) && IsPlayerInVehicle(i, vehicleid))
    		return 1;
    return 0;
}

SendVIPMessage(color, gformat[])
{
	foreach(Player, playerid) if (IsPlayerConnectedEx(playerid))
	{
		if (InfoCuenta[playerid][jVIP] != 0 || GetPlayerAdmin(playerid, 1) == 1)
		{
			if (InfoPersonaje[playerid][pTogVIP] == 1)
				SendSplitMessage(playerid, color, gformat);
		}
	}
}

SendAllICMessage(color, string[])
{
	foreach(Player, playerid) if (IsPlayerConnectedEx(playerid) && InfoPersonaje[playerid][pTogAnuncios] == 0)
	{
		SendSplitMessage(playerid, color, string);
	}
}

SendAllMessage(color, string[])
{
	foreach(Player, playerid) if (IsPlayerConnectedEx(playerid) && InfoPersonaje[playerid][pTogOOC] == 1)
	{
		SendSplitMessage(playerid, color, string);
	}
}

GetMiembrosFaccion(id)
{
	new query[160];

	mysql_format(DBInsanity, query, sizeof query, "SELECT * FROM personajes WHERE MiembroFaccion = '%d'", id);
	mysql_query(DBInsanity, query);
	return cache_num_rows();
}

GetEmpleadosFabrica(id)
{
	new query[160];

	mysql_format(DBInsanity, query, sizeof query, "SELECT * FROM personajes WHERE Contrato = '%d'", id);
	mysql_query(DBInsanity, query);
	return cache_num_rows();
}

LlavesNegocio(playerid, id)
{
	if (InfoPersonaje[playerid][pNegocio1] == id) return 1;
	if (InfoPersonaje[playerid][pNegocio2] == id) return 2;
	return 0;
}

stock Float:GetPosInFrontOfPlayer(playerid, &Float:x, &Float:y, Float:distance)//by: whoever
{
	new Float:a;
	GetPlayerPos(playerid, x, y, a);
	switch(IsPlayerInAnyVehicle(playerid))
	{
	    case 0: GetPlayerFacingAngle(playerid, a);
	    case 1: GetVehicleZAngle(GetPlayerVehicleID(playerid), a);
	}
	x += (distance * floatsin(-a, degrees));
	y += (distance * floatcos(-a, degrees));
	return a;
}

AnibleVeh(id)
{
	if (InfoVehiculo[id][vTipo] == 1) return 1;
	if (InfoVehiculo[id][vTipo] == 2) return 1;
	if (InfoVehiculo[id][vTipo] == 3) return 1;
	if (InfoVehiculo[id][vTipo] == 4) return 1;
	return 0;
}

//desde aquí empiezan los comandos.
CMD:identidad(playerid, params[])
{
	if (!member_faccion(playerid, 1, 2, 4)) return SendClientMessage(playerid, COLOR_GREY, "* No eres miembro de LSPD, FBI o LSCSD.");
	new string[256];
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /identidad (Nombre_Apellido)");
	if (!isnull(InfoPersonaje[playerid][pNombre_Temporal])) return SendClientMessage(playerid, COLOR_GREY, "Tienes activado el /adminnombre, sacátelo primero.");
	if (!isnull(InfoPersonaje[playerid][pNombre_PD])) //quitar
	{
	    //función
		alm(InfoPersonaje[playerid][pNombre_PD], "");
		SetPlayerName(playerid, DesbugNombre(playerid));
		//mensaje
		format(string, sizeof string, "Tu nombre ha sido cambiado al anterior: {5ABAFF}%s{FFFFFF}.", InfoPersonaje[playerid][pNombre_Apellido]);
		SendClientMessage(playerid, COLOR_WHITE, string);
	}
	else //poner
	{
		if (!IsValidRoleplayName(params)) return SendClientMessage(playerid, COLOR_GREY, "Nombre inválido, sigue el formato: Nombre_Apellido.");
		if (VerificarPersonaje(params) != 0) return SendClientMessage(playerid, COLOR_WHITE, "Ese nombre ya está registrado.");
	    //función
		alm(InfoPersonaje[playerid][pNombre_PD], params);
		SetPlayerName(playerid, InfoPersonaje[playerid][pNombre_PD]);
		//mensaje
		format(string, sizeof string, "** %s(%d) está temporalmente con el nombre '%s'.", InfoPersonaje[playerid][pNombre_Apellido], playerid, params);
		SendFaccionMessage(InfoPersonaje[playerid][pMiembro], 0x989898FF, string);
		format(string, sizeof string, "Estás temporalmente con el nombre de {5ABAFF}%s{FFFFFF}.", params);
		SendClientMessage(playerid, COLOR_WHITE, string);
		format(string, sizeof string, "%s está usando temporalmente el nombre %s", InfoPersonaje[playerid][pNombre_Apellido], params);
		Log("LOGS/Identidad.log", string);
	}
	return 1;
}
CMD:mascarapd(playerid, params[]) return cmd_identidad(playerid, params);
CMD:mascarasd(playerid, params[]) return cmd_identidad(playerid, params);

/*
CMD:uniformes(playerid)
{
	new neg = IsPlayerContrato(playerid, 13);
	if (neg == -1) return SendClientMessage(playerid, COLOR_GREY, "No trabajas en ninguna clínica.");
	if (!IsPlayerInRangeOfPoint(playerid, 4.0, -2288.0708, 89.1743, -5.3042)) return SendClientMessage(playerid, COLOR_GREY, "No estás en el lugar de uniformes de la clínica.");
	new skins_clinica[7];
	skins_clinica[0] = 274, skins_clinica[1] = 275, skins_clinica[2] = 276, skins_clinica[3] = 277, skins_clinica[4] = 278, skins_clinica[5] = 279, skins_clinica[6] = 308;
	ShowModelSelectionMenuEx(playerid, skins_clinica, sizeof skins_clinica, "Uniformes", Clinica_Skin, -11.0, 0.0, -55.0, 1.0);
	return 1;
}
*/
CMD:curar(playerid, params[])
{
	if (!member_faccion(playerid, 6)) return SendClientMessage(playerid, COLOR_GREY, "No eres parte de LSFD.");
	new gformat[128], playerid2;
	if (sscanf(params, "u", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /curar (JugadorID)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador desconectado.");
	if (!CercaDelMarica(5.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador muy lejos de ti.");
	if (playerid == playerid2) return SendClientMessage(playerid, COLOR_GREY, "* No te puedes curar tu mismo.");
	if (IsPlayerInAnyVehicle(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador está dentro de un vehículo.");

	dar_vida(playerid2, 100.0);
	format(gformat, sizeof gformat, "da servicio médico a %s.", NombreJugador(playerid2));
	meuwu(playerid, gformat);
	return 1;
}

Dialog:CulandoBebe(playerid, response, listitem, inputtext[])
{
	new medico = CulandoCliente[playerid], costo = CulandoPrecio[playerid], neg = CulandoNegocio[playerid], gformat[234];
	if (!IsPlayerConnectedEx(medico))
	{
		CulandoPrecio[playerid] = 0;
		CulandoCliente[playerid] = -1;
		CulandoNegocio[playerid] = -1;
		SendClientMessage(playerid, COLOR_GREY, "* El médico se desconectó, se cancelo la operación.");
		return 1;
	}
	if (!response)
	{
		CulandoPrecio[playerid] = 0;
		CulandoCliente[playerid] = -1;
		CulandoNegocio[playerid] = -1;
		format(gformat, sizeof gformat, "* %s rechazó el servicio médico.", NombreJugador(playerid));
		SendClientMessage(medico, 0xEBEBEBFF, gformat);
		SendClientMessage(playerid, 0xEBEBEBFF, "* Rechazaste el servicio médico.");
		return 1;
	}
	if (GetPlayerCash(playerid) < costo)
	{
		CulandoPrecio[playerid] = 0;
		CulandoCliente[playerid] = -1;
		CulandoNegocio[playerid] = -1;
		format(gformat, sizeof gformat, "* No tienes suficiente dinero ($%s).", diner_coma(costo));
		SendClientMessage(playerid, COLOR_GREY, gformat);
		SendClientMessage(medico, COLOR_GREY, "* Se canceló la oferta, porque el paciente no tiene dinero suficiente.");
		return 1;
	}
	dar_vida(playerid, 100.0);
	format(gformat, sizeof gformat, "da servicio médico a %s", NombreJugador(playerid));
	meuwu(medico, gformat);
	GivePlayerCash(playerid, -costo, "servicio médico");
	format(gformat, sizeof gformat, "Ganaste $%s del servicio médico de %s.", diner_coma(costo/2), NombreJugador(playerid));
	SendClientMessage(medico, COLOR_GREEN, gformat);
	GivePlayerCash(medico, costo/2, "servicio médico");
	if (InfoNegocio[neg][nVenta] != 0)
	{
		InfoNegocio[neg][nDinero] += costo/2;
		guardar_int_mysql("negocios", "BolosUwU", InfoNegocio[neg][nID_sql], InfoNegocio[neg][nDinero]);
	}
	InfoPersonaje[medico][pTriageTime] = 120;
	CulandoPrecio[playerid] = 0;
	CulandoCliente[playerid] = -1;
	CulandoNegocio[playerid] = -1;
	return 1;
}

CMD:cjob(playerid, params[])
{
	new id = InfoPersonaje[playerid][pContrato], string[128];
	if (id == -1)return SendClientMessage(playerid, COLOR_GREY, "No estás en una empresa.");
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /cjob (Texto)");
	format(string, sizeof string, "{FDAD35}[%s] %s:{FFFFFF} %s", GetNameContrato(id), NombreOriginal(playerid), params);
	SendEmpleoMessage(id, 0xFFFFFFFF, string);
	return 1;
}

CMD:rjob(playerid, params[])
{
	new id = InfoPersonaje[playerid][pContrato], string[128];
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "No tienes ningún empleo.");
	if (InfoPersonaje[playerid][pTogRadio] == 0) return SendClientMessage(playerid, COLOR_GREY, "Posees la radio de la empresa apagada, escribe /togradio.");
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /rjob (Texto)");
	format(string, sizeof string, "** [CH: %d] %s: %s", id, NombreJugador(playerid), params);
	SendRadioEmpleoMessage(id, COLOR_RADIO, string);
	format(string, sizeof string, "%s por radio: %s", NombreJugador(playerid), params);
	ProxExDetector(3.5, playerid, string, 0x95939300, 0x95939300, 0x95939300, 0x95939300, 0x95939300);
	return 1;
}

CMD:cancelarreparto(playerid)
{
	new gformat[170];
	if (RepartoID[playerid] == -1) return SendClientMessage(playerid, COLOR_GREY, "No tienes ningún reparto pendiente, usa /repartos.");
	//clear cps
	DeletePVar(playerid, "EnCheckPoint");
	DisablePlayerCheckpoint(playerid);
	//habilidad
	if (InfoPersonaje[playerid][pHabilidad][1] != 0)
	{
		InfoPersonaje[playerid][pHabilidad][1]--;
		guardar_int_mysql("personajes", "Habilidad2", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pHabilidad][1]);
		format(gformat, sizeof gformat, "Cancelaste el reparto. Perdiste un punto de habilidad de repartos, ahora tienes %d de progreso.", InfoPersonaje[playerid][pHabilidad][1]);
	}
	else alm(gformat, "Cancelaste el reparto.");
	SendClientMessage(playerid, 0xE81700FF, gformat);
	//clear reparto
	RepartoID[playerid] = -1;
	RepartoCasa[playerid] = -1;
	RepartoNegocio[playerid] = -1;
	RepartoPago[playerid] = 0;
	TimerRepartos[playerid] = gettime();
	return 1;
}

CMD:repartos(playerid)
{
	new neg = IsPlayerContrato(playerid, 6), job = IsPlayerJob(playerid, 1), string[190];
	if (neg == -1 && job == 0) return SendClientMessage(playerid, COLOR_GREY, "No trabajas en ninguna empresa de repartos.");
	if (InfoPersonaje[playerid][pRepartoViajes] >= 10) return SendClientMessage(playerid, COLOR_GREY, "* Ya has realizado diez repartos, espera el próximo PayDay.");
	if (RepartoID[playerid] != -1) return SendClientMessage(playerid, COLOR_GREY, "Ya tienes un reparto pendiente, puedes usar /cancelarreparto. (Nota: pierdes habilidad de repartos)");
	if (!CheckTimer(120, TimerRepartos[playerid]))
	{
		CrearReparto(playerid);
		new negocio = RepartoNegocio[playerid];
		new casa = RepartoCasa[playerid];
		new pago = RepartoPago[playerid];
		new sInfo[270], sDialog[1028], lugarcasa[128+20], lugalre[128];
		Get2DZone(lugalre, MAX_ZONE_NAME, InfoCasa[casa][cExteriorX], InfoCasa[casa][cExteriorY], InfoCasa[casa][cExteriorZ]);
		format(lugarcasa, sizeof lugarcasa, "%s - %d", lugalre, casa);
		format(sInfo, sizeof sInfo, "{ffffff}Debes recoger el paquete en el negocio:\n{00AE57}%s - %d\n\n", InfoNegocio[negocio][nNombre], negocio); strcat(sDialog, sInfo);
		format(sInfo, sizeof sInfo, "{ffffff}Luego entregar el paquete en la casa:\n{A851FF}%s\n\n", lugarcasa); strcat(sDialog, sInfo);
		format(sInfo, sizeof sInfo, "{ffffff}Tipo de paquete:\n{00A2FF}%s\n\n", GetNameReparto(RepartoID[playerid])); strcat(sDialog, sInfo);
		format(sInfo, sizeof sInfo, "{ffffff}Pago aproximado:\n{49B01E}$%s{ffffff}\n\nEl pago puede aumentar en base a la habilidad de repartidor.\n", diner_coma(pago)); strcat(sDialog, sInfo);
		Dialog_Show(playerid, ShowRepartos, DIALOG_STYLE_MSGBOX, "{00AE57}Información de reparto:", sDialog, "Tomar", "Cancelar");
	}
	else
	{
		format(string, sizeof string, "Faltan %d segundos para que puedas usar este comando.", CheckTimer(120, TimerRepartos[playerid]));
		SendClientMessage(playerid, 0xb0b0b0ff, string);
	}
	return 1;
}

CMD:inforeparto(playerid)
{
	new neg = IsPlayerContrato(playerid, 6), job = IsPlayerJob(playerid, 1);
	if (neg == -1 && job == 0) return SendClientMessage(playerid, COLOR_GREY, "No trabajas en ninguna empresa de repartos.");
	if (RepartoID[playerid] == -1) return SendClientMessage(playerid, COLOR_GREY, "No tienes un reparto pendiente.");
	new negocio = RepartoNegocio[playerid];
	new casa = RepartoCasa[playerid];
	new pago = RepartoPago[playerid];
	new sInfo[270], sDialog[1028], lugarcasa[128+20], lugalre[128];
	Get2DZone(lugalre, MAX_ZONE_NAME, InfoCasa[casa][cExteriorX], InfoCasa[casa][cExteriorY], InfoCasa[casa][cExteriorZ]);
	format(lugarcasa, sizeof lugarcasa, "%s - %d", lugalre, casa);
	format(sInfo, sizeof sInfo, "{ffffff}Debes recoger el paquete en el negocio:\n{00AE57}%s - %d\n\n", InfoNegocio[negocio][nNombre], negocio); strcat(sDialog, sInfo);
	format(sInfo, sizeof sInfo, "{ffffff}Luego entregar el paquete en la casa:\n{A851FF}%s\n\n", lugarcasa); strcat(sDialog, sInfo);
	format(sInfo, sizeof sInfo, "{ffffff}Tipo de paquete:\n{00A2FF}%s\n\n", GetNameReparto(RepartoID[playerid])); strcat(sDialog, sInfo);
	format(sInfo, sizeof sInfo, "{ffffff}Pago aproximado:\n{49B01E}$%s{ffffff}\n\nEl pago puede aumentar en base a la habilidad de repartidor.\n", diner_coma(pago)); strcat(sDialog, sInfo);
	Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{00AE57}Información de tu reparto:", sDialog, "Cerrar", "");
	return 1;
}
CMD:repartoactual(playerid) return cmd_inforeparto(playerid);

Dialog:ShowRepartos(playerid, response, listitem, inputtext[])
{
	if (!response)
	{
		TimerRepartos[playerid] = gettime();
	    RepartoID[playerid] = -1;
		SendClientMessage(playerid, -1, "Cancelaste el reparto actual, puedes hacer uno nuevo en 120 segundos.");
		return 1;
	}
	new gformat[256], id_neg = RepartoNegocio[playerid];
	format(gformat, sizeof gformat, "Debes recoger el {4A76EA}reparto{EBEBEB} del negocio {4A76EA}%s{EBEBEB}, el lugar fue marcado en el radar.", InfoNegocio[id_neg][nNombre]);
	SendClientMessage(playerid, 0xEBEBEBFF, gformat);
	SendClientMessage(playerid, 0xEBEBEBFF, "El paquete puede ser entregado en un vehículo de la empresa, propio o hasta a pie.");
	SetPlayerCheckpoint(playerid, InfoNegocio[id_neg][nExteriorX], InfoNegocio[id_neg][nExteriorY], InfoNegocio[id_neg][nExteriorZ], 5.0);
	SetPVarInt(playerid, "EnCheckPoint", 3);
	return 1;
}

GetNameReparto(id)
{
	new numeReparto[64];
	switch (id)
	{
		case 1: alm(numeReparto, "Pizza de jamón y queso");
		case 2: alm(numeReparto, "Caja de zapatos");
		case 3: alm(numeReparto, "Revistas HOT xxx");
		case 4: alm(numeReparto, "Kit de cargadores");
		case 5: alm(numeReparto, "Juguetes de diversión");
		case 6: alm(numeReparto, "Botellas de ron");
		case 7: alm(numeReparto, "Cables y controles de PS4");
		case 8: alm(numeReparto, "Juego de herramientas");
		case 9: alm(numeReparto, "Teléfono nuevo S10");
		case 10: alm(numeReparto, "Pelucas falsas");
		case 11: alm(numeReparto, "Caja de 6 donas");
		case 12: alm(numeReparto, "Kit de hamburguesas");
		case 13: alm(numeReparto, "2 Kg de pollo");
		case 14: alm(numeReparto, "Ropa gucci");
	}
	return numeReparto;
}

CrearReparto(playerid)
{
	new azar_reparto = Random(1, 14);
	new azar_casa = Random(1, totalcasas);
	new azar_pago = 80;
	switch (azar_reparto)
	{
		case 1: azar_pago = Random(80, 220);
		case 2: azar_pago = Random(70, 120);
		case 3: azar_pago = Random(80, 150);
		case 4: azar_pago = Random(102, 120);
		case 5: azar_pago = Random(96, 136);
		case 6: azar_pago = Random(100, 140);
		case 7: azar_pago = Random(100, 140);
		case 8: azar_pago = Random(93, 250);
		case 9: azar_pago = Random(130, 280);
		case 10: azar_pago = Random(80, 130);
		case 11: azar_pago = Random(85, 140);
		case 12: azar_pago = Random(86, 120);
		case 13: azar_pago = Random(88, 100);
		case 14: azar_pago = Random(90, 150);
	}
	if (InfoCasa[azar_casa][cTipo] != 0 && InfoCasa[azar_casa][cExteriorInt] == 0 && InfoCasa[azar_casa][cExteriorVW] == 0)
	{
		RepartoNegocio[playerid] = GetNegocioReparto(azar_reparto);
		RepartoID[playerid] = azar_reparto;
		RepartoCasa[playerid] = azar_casa;
		RepartoPago[playerid] = azar_pago;
		return 1;
	}
	CrearReparto(playerid);
	return 1;
}

GetNegocioReparto(reparto)
{
	new id = -1;
	new tipo_neg = 1;
	switch (reparto)
	{
		case 1: tipo_neg = 3;
		case 2: tipo_neg = 2;
		case 3: tipo_neg = 7;
		case 4: tipo_neg = 5;
		case 5: tipo_neg = 7;
		case 6: tipo_neg = 8;
		case 7: tipo_neg = 6;
		case 8: tipo_neg = 1;
		case 9: tipo_neg = 1;
		case 10: tipo_neg = 2;
		case 11: tipo_neg = 3;
		case 12: tipo_neg = 3;
		case 13: tipo_neg = 3;
		case 14: tipo_neg = 2;
	}
	//azar
	new azar_negocio = Random(1, totalnegocios);
	Loop(x, totalnegocios, azar_negocio) if (InfoNegocio[x][nTipo] == tipo_neg)
	{
		id = x;
		break;
	}
	//si no consigue nada, pues que lo detecte asi
	if (id == -1)
	{
		Loop(x, totalnegocios, 1) if (InfoNegocio[x][nTipo] == tipo_neg)
		{
			id = x;
			break;
		}
	}
	return id;
}

stock NegocioRandom()
{
	new id = -1;
	id = Random(1, totalnegocios);	
	return id;
}

CMD:panel(playerid)
{
	new dialog[2056], gformat[195];
	format(gformat, sizeof gformat, "{EBEBEB}Status teléfono\t%s\n", (InfoPersonaje[playerid][pTogTelefono]) ? ("{54C822}Encendido") : ("{E81700}Apagado")); strcat(dialog, gformat);
	format(gformat, sizeof gformat, "{EBEBEB}Movimiento de manos\t%s\n", (InfoPersonaje[playerid][pTogManos]) ? ("{54C822}Activado") : ("{E81700}Desactivado")); strcat(dialog, gformat);
	format(gformat, sizeof gformat, "{EBEBEB}Visualización de anuncios\t%s\n", (InfoPersonaje[playerid][pTogAnuncios]) ? ("{E81700}No") : ("{54C822}Sí")); strcat(dialog, gformat);
	format(gformat, sizeof gformat, "{EBEBEB}Visualización de velocimetro\t%s\n", (InfoPersonaje[playerid][pTogVelocimetro]) ? ("{54C822}Sí") : ("{E81700}No")); strcat(dialog, gformat);
	format(gformat, sizeof gformat, "{EBEBEB}Mensajes administrativos\t%s\n", (InfoPersonaje[playerid][pTogOOC]) ? ("{54C822}Habilitados") : ("{E81700}Deshabilitados")); strcat(dialog, gformat);
	format(gformat, sizeof gformat, "{EBEBEB}Mensajes de radio o whatsapp\t%s\n", (InfoPersonaje[playerid][pTogRadio]) ? ("{54C822}Habilitados") : ("{E81700}Deshabilitados")); strcat(dialog, gformat);
	format(gformat, sizeof gformat, "{EBEBEB}Reproductor de música\t%s\n", (InfoPersonaje[playerid][pTogMusic]) ? ("{54C822}Activado") : ("{E81700}Desactivado")); strcat(dialog, gformat);
	format(gformat, sizeof gformat, "{EBEBEB}Audio de radio portátil\t%s\n", (InfoPersonaje[playerid][pTogPortatil]) ? ("{54C822}Activado") : ("{E81700}Desactivado")); strcat(dialog, gformat);
	format(gformat, sizeof gformat, "{EBEBEB}Mensajes de facción\t%s\n", (InfoPersonaje[playerid][pTogFaccion]) ? ("{54C822}Habilitados") : ("{E81700}Deshabilitados")); strcat(dialog, gformat);
	if (InfoCuenta[playerid][jVIP] != 0 || GetPlayerAdmin(playerid, 1) != 0)
	{
		format(gformat, sizeof gformat, "{EBEBEB}Mensajes del canal VIP\t%s\n", (InfoPersonaje[playerid][pTogVIP]) ? ("{54C822}Habilitados") : ("{E81700}Deshabilitados")); strcat(dialog, gformat);
	}
	Dialog_Show(playerid, ShowPanel, DIALOG_STYLE_TABLIST, "Configuración de cuenta", dialog, "Cambiar", "Salir");
	return 1;
}

CMD:togfaccion(playerid)
{
	if (InfoPersonaje[playerid][pTogFaccion] != 0)
	{
		InfoPersonaje[playerid][pTogFaccion] = 0;
		StopAudioStreamForPlayer(playerid);
		SendClientMessage(playerid, 0xEBEBEBFF, "Ahora {E81700}no verás{EBEBEB} los mensajes de facción.");
	}
	else
	{
		InfoPersonaje[playerid][pTogFaccion] = 1;
		SendClientMessage(playerid, 0xEBEBEBFF, "Ahora {54C822}puedes ver{EBEBEB} los mensajes de facción.");
	}
	guardar_int_mysql("personajes", "TogFaccion", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTogFaccion]);
	return 1;
}
CMD:togfac(playerid) return cmd_togfaccion(playerid);

Dialog:ShowPanel(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0: cmd_togmovil(playerid), cmd_panel(playerid);
		case 1: cmd_togmanos(playerid), cmd_panel(playerid);
		case 2: cmd_togad(playerid), cmd_panel(playerid);
		case 3: cmd_velocimetro(playerid), cmd_panel(playerid);
		case 4: cmd_togooc(playerid), cmd_panel(playerid);
		case 5: cmd_radio(playerid), cmd_panel(playerid);
		case 6: cmd_togmusic(playerid), cmd_panel(playerid);
		case 7: cmd_togpr(playerid), cmd_panel(playerid);
		case 8: cmd_togfaccion(playerid), cmd_panel(playerid);
		case 9: cmd_togvip(playerid), cmd_panel(playerid);
	}
	return 1;
}

CMD:togooc(playerid)
{
	if (InfoPersonaje[playerid][pTogOOC] != 0)
	{
		InfoPersonaje[playerid][pTogOOC] = 0;
		SendClientMessage(playerid, 0xEBEBEBFF, "Ahora {E81700}no verás{EBEBEB} los mensajes administrativos ooc.");
	}
	else
	{
		InfoPersonaje[playerid][pTogOOC] = 1;
		SendClientMessage(playerid, 0xEBEBEBFF, "Ahora {54C822}puees ver{EBEBEB} los mensajes administrativos ooc.");
	}
	guardar_int_mysql("personajes", "TogOOC", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTogOOC]);
	return 1;
}

CMD:togphone(playerid)
{
	if (InfoPersonaje[playerid][pTogTelefono] != 0)
	{
		InfoPersonaje[playerid][pTogTelefono] = 0;
		SendClientMessage(playerid, 0xEBEBEBFF, "Ahora tu teléfono está {E81700}apagado{EBEBEB}, ahora no podrás recibir llamadas o mensajes.");
	}
	else
	{
		InfoPersonaje[playerid][pTogTelefono] = 1;
		SendClientMessage(playerid, 0xEBEBEBFF, "Ahora tu teléfono está {54C822}encendido{EBEBEB}, ahora podrás recibir llamadas o mensajes.");
	}
	guardar_int_mysql("personajes", "TogTelefono", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTogTelefono]);
	return 1;
}
CMD:togmovil(playerid) return cmd_togphone(playerid);

CMD:togmanos(playerid)
{
	if (InfoPersonaje[playerid][pTogManos] != 0)
	{
		InfoPersonaje[playerid][pTogManos] = 0;
		SendClientMessage(playerid, 0xEBEBEBFF, "Ahora tienes {E81700}desactivado{EBEBEB} el movimiento de manos cuando escribes en el chat ic.");
	}
	else
	{
		InfoPersonaje[playerid][pTogManos] = 1;
		SendClientMessage(playerid, 0xEBEBEBFF, "Ahora tienes {54C822}activado{EBEBEB} el movimiento de manos cuando escribes en el chat ic.");
	}
	guardar_int_mysql("personajes", "TogManos", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTogManos]);
	return 1;
}

CMD:togad(playerid)
{
	if (InfoPersonaje[playerid][pTogAnuncios] != 0)
	{
		new numer = PlayerViewAnunce[playerid];
		if (numer != 0)
		{
			Loop(x, numer, 0) { TextDrawShowForPlayer(playerid, TD_Anuncio[x]); }
		}
		InfoPersonaje[playerid][pTogAnuncios] = 0;
		SendClientMessage(playerid, 0xEBEBEBFF, "Ahora {54C822}puedes ver{EBEBEB} los anuncios de la parte inferior.");
	}
	else
	{
	    Loop(x, 5, 0) { TextDrawHideForPlayer(playerid, TD_Anuncio[x]); }
		InfoPersonaje[playerid][pTogAnuncios] = 1;
		SendClientMessage(playerid, 0xEBEBEBFF, "Ahora {E81700}no verás{EBEBEB} los anuncios de la parte inferior.");
	}
	guardar_int_mysql("personajes", "TogAnuncios", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTogAnuncios]);
	return 1;
}
CMD:togads(playerid) return cmd_togad(playerid);
CMD:toganuncio(playerid) return cmd_togad(playerid);
CMD:toganuncios(playerid) return cmd_togad(playerid);

CMD:velocimetro(playerid)
{
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "Debes ser el conductor de un vehículo.");
	if (InfoPersonaje[playerid][pTogVelocimetro] == 0)
	{
		new vehicleid = GetPlayerVehicleID(playerid);
		SendClientMessage(playerid, 0xEBEBEBFF, "Ahora puedes {54C822}puedes ver{EBEBEB} el velocimetro.");
		InfoPersonaje[playerid][pTogVelocimetro] = 1;
		mostrar_velocimetro(playerid, vehicleid);
	}
	else
	{
		SendClientMessage(playerid, 0xEBEBEBFF, "Ahora {E81700}no verás{EBEBEB} el velocimetro.");
		InfoPersonaje[playerid][pTogVelocimetro] = 0;
		hide_velocimetro(playerid);
	}
	guardar_int_mysql("personajes", "Velocimetro", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTogVelocimetro]);
	return 1;
}
CMD:togvelocimetro(playerid) return cmd_velocimetro(playerid);

CMD:togmusic(playerid)
{
	if (InfoPersonaje[playerid][pTogMusic] != 0)
	{
		InfoPersonaje[playerid][pTogMusic] = 0;
		StopAudioStreamForPlayer(playerid);
		SendClientMessage(playerid, 0xEBEBEBFF, "Ahora {E81700}no escucharás{EBEBEB} los audios de música.");
	}
	else
	{
		InfoPersonaje[playerid][pTogMusic] = 1;
		SendClientMessage(playerid, 0xEBEBEBFF, "Ahora {54C822}puedes escuchar{EBEBEB} los audios de música.");
	}
	guardar_int_mysql("personajes", "TogMusic", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTogMusic]);
	return 1;
}

CMD:radio(playerid)
{
	if (InfoPersonaje[playerid][pTogRadio] != 0)
	{
		InfoPersonaje[playerid][pTogRadio] = 0;
		StopAudioStreamForPlayer(playerid);
		SendClientMessage(playerid, 0xEBEBEBFF, "Ahora {E81700}no verás{EBEBEB} los mensajes de radio o whatsapp.");
	}
	else
	{
		InfoPersonaje[playerid][pTogRadio] = 1;
		SendClientMessage(playerid, 0xEBEBEBFF, "Ahora {54C822}puedes ver{EBEBEB} los mensajes de radio o whatsapp.");
	}
	guardar_int_mysql("personajes", "TogRadio", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTogRadio]);
	return 1;
}
CMD:togradio(playerid) return cmd_radio(playerid);
CMD:togrd(playerid) return cmd_radio(playerid);
CMD:togwsp(playerid) return cmd_radio(playerid);

CMD:togpr(playerid)
{
	if (no_tiene_manos(playerid, 50) == 0) return 1;
	new string[195];
	if (InfoPersonaje[playerid][pTogPortatil] != 0)
	{
		InfoPersonaje[playerid][pTogPortatil] = 0;
		SendClientMessage(playerid, 0xEBEBEBFF, "Has {E81700}apagado{EBEBEB} tu radio portátil.");
	}
	else
	{
		InfoPersonaje[playerid][pTogPortatil] = 1;
		if (InfoPersonaje[playerid][pFrecuencia_radio] != 0) format(string, sizeof string, "Has {54C822}encendido{EBEBEB} tu radio portátil, frecuencia sincronizada %d khz.", InfoPersonaje[playerid][pFrecuencia_radio]);
		else format(string, sizeof string, "Has {54C822}encendido{EBEBEB} tu radio portátil.");
		SendClientMessage(playerid, 0xEBEBEBFF, string);
	}
	guardar_int_mysql("personajes", "TogPortatil", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTogPortatil]);
	return 1;
}
CMD:togportatil(playerid) return cmd_togpr(playerid);

CMD:togvip(playerid)
{
	if (InfoCuenta[playerid][jVIP] > 0 || GetPlayerAdmin(playerid, 1) != 0)
	{
		if (InfoPersonaje[playerid][pTogVIP] == 0)
		{
			InfoPersonaje[playerid][pTogVIP] = 1;
			SendClientMessage(playerid, 0xEBEBEBFF, "Ahora {54C822}puedes ver{EBEBEB} los mensajes del canal vip.");
		}
		else
		{
			InfoPersonaje[playerid][pTogVIP] = 0;
			SendClientMessage(playerid, 0xEBEBEBFF, "Ahora {E81700}no verás{EBEBEB} los mensajes del canal vip.");
		}
		guardar_int_mysql("personajes", "ChatVIP", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTogVIP]);
		return 1;
	}
	SendClientMessage(playerid, -1, "No tienes acceso a este comando.");
	return 1;
}

CMD:togadmin(playerid)
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (!AdminChat[playerid])
	{
		AdminChat[playerid] = 1;
		SendClientMessage(playerid, COLOR_YELLOW, "Canal de administración desactivado.");
	}
	else
	{
		AdminChat[playerid] = 0;
		SendClientMessage(playerid, COLOR_YELLOW, "Canal de administración activado.");
	}
	return 1;
}
CMD:togac(playerid) return cmd_togadmin(playerid);

CMD:togpm(playerid)
{
	if (!HidePM[playerid])
	{
		HidePM[playerid] = 1;
		SendClientMessage(playerid, COLOR_GRAD2, "Privados bloqueados.");
	}
	else
	{
		HidePM[playerid] = 0;
		SendClientMessage(playerid, COLOR_GRAD2, "Privados habilitados.");
	}
	return 1;
}
CMD:togmp(playerid) return cmd_togpm(playerid);

CMD:irtrabajo(playerid)
{
	new id = InfoPersonaje[playerid][pContrato];
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No tienes ningún trabajo o empleo.");
	SendClientMessage(playerid, COLOR_YELLOW, "Se te marcó en el mapa el lugar donde trabajas.");
	SetPlayerCheckpoint(playerid, InfoNegocio[id][nExteriorX], InfoNegocio[id][nExteriorY], InfoNegocio[id][nExteriorZ], 3.0);
	return 1;
}
CMD:irjob(playerid) return cmd_irtrabajo(playerid);
CMD:gotjob(playerid) return cmd_irtrabajo(playerid);

CMD:renunciar(playerid)
{
	new id = InfoPersonaje[playerid][pEmpleo], gformat[250];
	if (id == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes un empleo.");
	format(gformat, sizeof gformat, "* Renunciaste tu puesto de %s.", IsNameJob(id));
	SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat);
	InfoPersonaje[playerid][pEmpleo] = 0;
	guardar_int_mysql("personajes", "Empleo", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pEmpleo]);
	return 1;
}

CMD:renunciarempresa(playerid)
{
	new id = InfoPersonaje[playerid][pContrato], gformat[250];
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en una empresa.");
	format(gformat, sizeof gformat, "* Renunciaste tu puesto de %s en %s.", GetNameContrato(id), InfoNegocio[id][nNombre]);
	SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat);
	InfoPersonaje[playerid][pContrato] = -1;
	guardar_int_mysql("personajes", "Contrato", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pContrato]);
	return 1;
}

CMD:telefono(playerid)
{
	if (InfoPersonaje[playerid][pTelefono] == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes un número telefónico.");
	if (no_tiene_manos(playerid, 50) == 0) return 1;
	if (InfoPersonaje[playerid][pTiempoSancion] != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes usar este comando mientras estás en prisión.");
	if (GetPVarInt(playerid, "EstaCrack") != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes usar este comando mientras estás herido.");
	new gformat[249], gdialog[480];
	format(gformat, sizeof gformat, "{7777FF}%s\n", FechaHoy()); strcat(gdialog, gformat);
	strcat(gdialog, "{FFFFFF}Marcar un número\n");
	strcat(gdialog, "Enviar un mensaje\n");
	strcat(gdialog, "Aplicaciones\n");
	if (InfoPersonaje[playerid][pTogTelefono] != 0) strcat(gdialog, "{E81700}Apagar {FFFFFF}teléfono\n");
	else strcat(gdialog, "{54C822}Encender {FFFFFF}teléfono\n");
	format(gformat, sizeof gformat, "Número telefónico: {00AE57}%d", InfoPersonaje[playerid][pTelefono]);
	Dialog_Show(playerid, MenuTelefono, DIALOG_STYLE_LIST, gformat, gdialog, "Continuar", "Salir");
	return 1;
}
CMD:celular(playerid) return cmd_telefono(playerid);

Dialog:MenuTelefono(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0: cmd_celular(playerid);
		case 1: Dialog_Show(playerid, MarcarNumero, DIALOG_STYLE_INPUT, "Opción: {00AE57}Marcar un número", "{FFFFFF}Introduce el numero:", "Llamar", "Volver");
		case 2: Dialog_Show(playerid, SMSSend, DIALOG_STYLE_INPUT, "Opción: {00AE57}Enviar mensaje", "{FFFFFF}Introduce el numero:", "Continuar", "Volver");
		case 3:
		{
			if (IsPlayerContrato(playerid, 6) != -1 || IsPlayerJob(playerid, 1) != 0) Dialog_Show(playerid, MenuAplicaciones, DIALOG_STYLE_LIST, "Opción: {00AE57}Aplicaciones", "- Contactos\n- Transferencias express\n- Empleos disponibles\n- {00CC00}Repartos disponibles", "Continuar", "Volver");
			else Dialog_Show(playerid, MenuAplicaciones, DIALOG_STYLE_LIST, "Opción: {00AE57}Aplicaciones", "- Contactos\n- Transferencias express\n- Empleos disponibles", "Continuar", "Volver");
		}
		case 4: //status
		{
			cmd_togmovil(playerid);
			cmd_celular(playerid);
		}
	}
	return 1;
}

Dialog:MarcarNumero(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_celular(playerid);
	new string[128];
	if (isnull(inputtext) || !isnumeric(inputtext)) return Dialog_Show(playerid, MarcarNumero, DIALOG_STYLE_INPUT, "Opción: {00AE57}Marcar un número", "{FFFFFF}Introduce el numero:", "Llamar", "Volver");
	format(string, sizeof string, "%d", strval(inputtext));
	cmd_llamar(playerid, string);
	return 1;
}

Dialog:SMSSend(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_celular(playerid);
	if (GetPlayerCash(playerid) < 2) return SendClientMessage(playerid, COLOR_GREY, "* Debes tener al menos 2$ dólares en bolsillos para enviar mensajes.");
	if (isnull(inputtext) || !isnumeric(inputtext)) return Dialog_Show(playerid, SMSSend, DIALOG_STYLE_INPUT, "Opción: {00AE57}Enviar mensaje", "{FFFFFF}Introduce el numero:", "Continuar", "Volver");
	new string[128];
	format(string, sizeof string, "%d", strval(inputtext));
	NumeroMensaje[playerid] = strval(inputtext);
	Dialog_Show(playerid, SMS2Send, DIALOG_STYLE_INPUT, "Opción: {00AE57}Enviar mensaje", "{FFFFFF}Introduce el texto que vas a enviar:", "Enviar", "Volver");
	return 1;
}

Dialog:SMS2Send(playerid, response, listitem, inputtext[])
{
	if (!response) return Dialog_Show(playerid, SMSSend, DIALOG_STYLE_INPUT, "Opción: {00AE57}Enviar mensaje", "{FFFFFF}Introduce el numero:", "Continuar", "Volver");
	if (isnull(inputtext)) return Dialog_Show(playerid, SMS2Send, DIALOG_STYLE_INPUT, "Opción: {00AE57}Enviar mensaje", "{FFFFFF}Introduce el texto que vas a enviar:", "Enviar", "Volver");
	if (GetPlayerCash(playerid) < 2) return SendClientMessage(playerid, COLOR_GREY, "* Debes tener al menos 2$ dólares en bolsillos para enviar mensajes.");
	new phonenumb = NumeroMensaje[playerid], text[256];
	new string[240];
	alm(text, inputtext);
	foreach(new i: Player) if (IsPlayerConnectedEx(i))
	{
		if (InfoPersonaje[i][pTelefono] == phonenumb && phonenumb != 0)
		{
			new playerid2 = i;
			if (InfoPersonaje[playerid2][pTogTelefono] == 0) return SendClientMessage(playerid, COLOR_GREY, "* Mensaje no enviado, teléfono apagado.");
			format(string, sizeof string, "SMS de %d: %s", InfoPersonaje[playerid][pTelefono], text);
			SendClientMessage(playerid2, 0xFFEA5FFF, string);
			format(string, sizeof string, "SMS a %d: %s", phonenumb, text);
			SendClientMessage(playerid, 0xEBEBEBFF, string);
			PlayerAudio(playerid, 1053, 10.0);
			PlayerAudio(playerid2, 20804, 10.0);
			GivePlayerCash(playerid, -2, "costo de sms");
			ameuwu(playerid, "envía un mensaje de texto");
			return 1;
		}
	}
	SendClientMessage(playerid, COLOR_GREY, "* El número que ha marcado no existe o no está disponible.");
	return 1;
}

CMD:base(playerid)
{
	if (InfoPersonaje[playerid][pTiempoSancion] != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes usar este comando mientras estás en prisión.");
	if (GetPVarInt(playerid, "EstaCrack") != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes usar este comando mientras estás herido.");
	Dialog_Show(playerid, JobTelefonoBase, DIALOG_STYLE_LIST, "Opción: {00AE57}Lugares de trabajo", "- Repartidor\n- Leñador\n- Delincuente\n- Ladrón de autos", "Continuar", "Volver");
	return 1;
}

Dialog:JobTelefonoBase(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new job = listitem +1, gformat[128];

	if(JobDeshabilitado(job))
	{	
		format(gformat, sizeof gformat, "El trabajo de {00AE57}%s{EBEBEB} está deshabilitado en estos momentos.", IsNameJob(job));
		SendClientMessage(playerid, 0xEBEBEBFF, gformat);
		return 1;
	}

	if(JobIlegal(job))
	{	
		format(gformat, sizeof gformat, "El trabajo de {00AE57}%s{EBEBEB} es ilegal, ¡debes buscar tú mismo su ubicación!", IsNameJob(job));
		SendClientMessage(playerid, 0xEBEBEBFF, gformat);
		return 1;
	}

	switch(job)
	{
		case 1:{
			format(gformat, sizeof gformat, "El trabajo de {00AE57}%s{EBEBEB} no tiene una base específica.", IsNameJob(job));
			SendClientMessage(playerid, 0xEBEBEBFF, gformat);
		}
		case 2:
		{
			format(gformat, sizeof gformat, "Se ha marcado en el radar la ubicación de: {00AE57}%s{EBEBEB}", IsNameJob(job));
			SendClientMessage(playerid, 0xEBEBEBFF, gformat);
			SetPlayerCheckpoint(playerid, -554.0010, -1496.7751, 9.4138, 20.0);
			SetPVarInt(playerid, "BuscandoTrabajo", 1);
		}
	}
	return 1;
}

CMD:empleos(playerid)
{
	if (InfoPersonaje[playerid][pTelefono] == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes un número telefónico.");
	if (no_tiene_manos(playerid, 50) == 0) return 1;
	if (InfoPersonaje[playerid][pTiempoSancion] != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes usar este comando mientras estás en prisión.");
	if (GetPVarInt(playerid, "EstaCrack") != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes usar este comando mientras estás herido.");
	Dialog_Show(playerid, JobTelefono, DIALOG_STYLE_LIST, "Opción: {00AE57}Empleos disponibles", "- Repartidor\n- Leñador\n- Delincuente\n- Ladrón de autos", "Continuar", "Volver");
	return 1;
}
CMD:trabajos(playerid) return cmd_empleos(playerid);

Dialog:MenuAplicaciones(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_celular(playerid);
	switch (listitem)
	{
		case 0: cmd_agenda(playerid);
		case 1: cmd_transferir(playerid);
		case 2: cmd_empleos(playerid);
		case 3: cmd_repartos(playerid);
	}
	return 1;
}

/* Removido, renovación del sistema by Artic. 21/11/2020
Dialog:JobTelefono(playerid, response, listitem, inputtext[])
{
	if (!response)
	{
		if (IsPlayerContrato(playerid, 6) != -1 || IsPlayerJob(playerid, 1) != 0) Dialog_Show(playerid, MenuAplicaciones, DIALOG_STYLE_LIST, "Opción: {00AE57}Aplicaciones", "- Contactos\n- Transferencias express\n- Empleos disponibles\n- {00CC00}Repartos disponibles", "Continuar", "Volver");
		else Dialog_Show(playerid, MenuAplicaciones, DIALOG_STYLE_LIST, "Opción: {00AE57}Aplicaciones", "- Contactos\n- Transferencias express\n- Empleos disponibles", "Continuar", "Volver");
		return 1;
	}
	new gformat[294];
	if (InfoPersonaje[playerid][pEmpleo] != 0)
	{
	    new job = InfoPersonaje[playerid][pEmpleo];
		format(gformat, sizeof gformat, "* Te encuentras trabajando como %s, usa /renunciar.", IsNameJob(job));
		SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat);
		return 1;
	}
	new dialog[3084], tipo = -1, Count = 0, gformat4[320];
	switch (listitem)
	{
		case 0: tipo = 6;
		case 1: tipo = 9;
		case 2: tipo = 13;
	}
 	Loop(id, totalnegocios, 1) if (InfoNegocio[id][nTipo] == tipo && InfoNegocio[id][nEmpleo] == 1)
	{
		format(gformat4, sizeof gformat4, "%s\n", InfoNegocio[id][nNombre]);
		strcat(dialog, gformat4);
		//conteo
		new gformat2[64];
		format(gformat2, sizeof gformat2, "idAplsdci%d", Count);
		SetPVarInt(playerid, gformat2, id);
		Count++;
	}
	if (Count == 0)
	{
		format(gformat, sizeof gformat, "* No hay negocios/empresas que busquen empleados como %s.", IsNameContrato(tipo));
		SendClientMessage(playerid, COLOR_GREY, gformat);
	    return 1;
	}
	Dialog_Show(playerid, Job2Telefono, DIALOG_STYLE_LIST, IsNameContrato(tipo), dialog, "Unirse", "Volver");
	return 1;
}*/

Dialog:JobTelefono(playerid, response, listitem, inputtext[])
{
	if (!response)
	{
		if (IsPlayerContrato(playerid, 6) != -1 || IsPlayerJob(playerid, 1) != 0) Dialog_Show(playerid, MenuAplicaciones, DIALOG_STYLE_LIST, "Opción: {00AE57}Aplicaciones", "- Contactos\n- Transferencias express\n- Empleos disponibles\n- {00CC00}Repartos disponibles", "Continuar", "Volver");
		else Dialog_Show(playerid, MenuAplicaciones, DIALOG_STYLE_LIST, "Opción: {00AE57}Aplicaciones", "- Contactos\n- Transferencias express\n- Empleos disponibles", "Continuar", "Volver");
		return 1;
	}
	new gformat[128];
	new job = listitem + 1;

	if(JobDeshabilitado(job))
	{	
		format(gformat, sizeof gformat, "El trabajo de {00AE57}%s{FFFFFF} está deshabilitado en estos momentos.", IsNameJob(job));
		SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		return 1;
	}

	if(JobIlegal(job))
	{	
		format(gformat, sizeof gformat, "El trabajo de {00AE57}%s{FFFFFF} es ilegal, ¡debes buscar tú mismo su ubicación!", IsNameJob(job));
		SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		return 1;
	}

	if (InfoPersonaje[playerid][pEmpleo] != 0)
	{
	    new work = InfoPersonaje[playerid][pEmpleo];
		format(gformat, sizeof gformat, "* Te encuentras trabajando como %s, usa /renunciar.", IsNameJob(work));
		SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat);
		return 1;
	}
	new gstring[80];
	InfoPersonaje[playerid][pEmpleo] = job;

	format(gstring, sizeof gstring, "Ahora eres {54C822}%s{FFFFFF}.", IsNameJob(job));
	SendClientMessage(playerid, 0xFFFFFFFF, gstring);
	SendClientMessage(playerid, 0xFFFFFFFF, "Para más información ({00AE57}/ayuda{FFFFFF}), puedes usar {00AE57}/renunciar{FFFFFF} para dejar el empleo y {00AE57}/base{FFFFFF} para localizarlo.");
	guardar_int_mysql("personajes", "Empleo", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pEmpleo]);
	return 1;
}
/* Removido, separación de Empleos / Negocios. Artic — 21/11/2020
Dialog:Job2Telefono(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_empleos(playerid);
	new ID = listitem, gformat[40], gstring[220];
	format(gformat, sizeof gformat, "idAplsdci%d", ID);
	new neg = GetPVarInt(playerid, gformat);
	//notificación
	foreach(Player, playerid2) if (usuario_registro[playerid2] == 2)
	{
		if (InfoPersonaje[playerid2][pNegocio1] == neg)
		{
			format(gstring, sizeof gstring, "Notificación:{FFFFFF} %s es tu nuevo empleado en tu negocio (1) {00AE57}%s", NombreOriginal(playerid), InfoNegocio[neg][nNombre]);
			SendClientMessage(playerid2, 0x54C822FF, gstring);
		}
		if (InfoPersonaje[playerid2][pNegocio2] == neg)
		{
			format(gstring, sizeof gstring, "Notificación:{FFFFFF} %s es tu nuevo empleado en tu negocio (2) {00AE57}%s", NombreOriginal(playerid), InfoNegocio[neg][nNombre]);
			SendClientMessage(playerid2, 0x54C822FF, gstring);
		}
	}
	new type = InfoNegocio[neg][nTipo];
	format(gstring, sizeof gstring, "Ahora formas parte de {00AE57}%s{FFFFFF} como {54C822}%s{FFFFFF}.", InfoNegocio[neg][nNombre], IsNameContrato(type));
	SendClientMessage(playerid, 0xFFFFFFFF, gstring);
	SendClientMessage(playerid, 0xFFFFFFFF, "Para más información ({00AE57}/ayuda contrato{FFFFFF}), puedes usar {00AE57}/renunciar{FFFFFF} para dejar el empleo.");
	InfoPersonaje[playerid][pContrato] = neg;
	guardar_int_mysql("personajes", "Contrato", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pContrato]);
	return 1;
}*/

CMD:delincuente(playerid)
{
	if (member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "No puedes ser delincuente siendo de una facción legal.");
	if (!IsPlayerInRangeOfPoint(playerid, 3.0, 2614.9531,-1391.6821,34.7745)) return SendClientMessage(playerid, COLOR_GREY, "No estás en el lugar adecuado.");
	if (InfoPersonaje[playerid][pNivel] <= 4) return SendClientMessage(playerid, COLOR_GREY, "Necesitas mínimo 5 horas totales.");
	if (IsPlayerJob(playerid, 3) != 0) return SendClientMessage(playerid, COLOR_GREY, "mogólico, ya tenes el job XDXDXDXD");
	new gstring[128];
	if (InfoPersonaje[playerid][pEmpleo] != 0)
	{
		new work = InfoPersonaje[playerid][pEmpleo];
		format(gstring, sizeof gstring, "* Te encuentras trabajando como %s, usa /renunciar.", IsNameJob(work));
		SendClientMessage(playerid, COLOR_LIGHTBLUE, gstring);
		return 1;
	}
	InfoPersonaje[playerid][pEmpleo] = 3;
	new job = InfoPersonaje[playerid][pEmpleo];
	format(gstring, sizeof gstring, "Ahora eres {54C822}%s{FFFFFF}.", IsNameJob(job));
	SendClientMessage(playerid, 0xFFFFFFFF, gstring);
	SendClientMessage(playerid, 0xFFFFFFFF, "Para más información ({00AE57}/ayuda trabajo{FFFFFF}), puedes usar {00AE57}/renunciar{FFFFFF} para dejar el empleo.");
	guardar_int_mysql("personajes", "Empleo", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pEmpleo]);
	return 1;
}

CMD:graffiti(playerid)
{
	if (!member_faccion(playerid, 7)) return SendClientMessage(playerid, COLOR_GREY, "No formas parte de una pandilla.");
	if (no_tiene_manos(playerid, 36) == 0) return 1;
	new dialog[2048];
	strcat(dialog, "{F80101}INFORMACIÓN:\n");
	strcat(dialog, "{EBEBEB}Se utiliza una plantilla especial BBcode para el formato de mensajes usando un sistema (c).\n\n");
	strcat(dialog, "{EBEBEB}	(n) Para una nueva línea.\n");
	strcat(dialog, "{EBEBEB}	Colores: {0000FF}(a): Azul, {FFFFFF}(b): Blanco, {FFFF00}(am): Amarillo, {00C200}(v): Verde\n");
	strcat(dialog, "{EBEBEB}	{EBEBEB}(ne): Negro, {00AE57}(na): Naranja, {FF0000}(r): Rojo, {00FFFF}(ce): Celeste\n\n");
	strcat(dialog, "{EBEBEB}[USO] Esto hará que (v){00C200}palabra{EBEBEB}(b) sea verde y el resto blanco.\n\n");
	strcat(dialog, "{EBEBEB}- Trate de que su texto no sea tan largo. El máximo es de 60 caracteres.\n");
	Dialog_Show(playerid, GraffitiPersonalizado, DIALOG_STYLE_INPUT, "Escribe lo que quieras", dialog, "Continuar", "Salir");
	return 1;
}

Dialog:GraffitiPersonalizado(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	if (strlen(inputtext) > 60 || strlen(inputtext) < 4)
	{
		SendClientMessage(playerid, COLOR_GREY, "Su graffiti personalizadono puede tener menos de 4 o más de 60 carácteres.");
		return cmd_graffiti(playerid);
	}
	SetPVarInt(playerid, "LetraGraffiti", 10);
	SetPVarInt(playerid, "SetraGraffiti", 10);
	SetPVarString(playerid, "TextoGraffiti", inputtext);
	new text[256];
	format(text, sizeof text, "Graffiti actual: {EBEBEB}%s", inputtext);
	SendClientMessage(playerid, 0x00AE57FF, text);
	SendClientMessage(playerid, 0xA9D159FF, "Ahora puedes pintar cualquier punto de graffiti, sólo rocia la pared con tu spray!");
	return 1;
}

CMD:vergraffitis(playerid)
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new pro[500], pro2[3024], tgraffitis = 0;
	//indice
	strcat(pro2, "(id) Mensaje\tCreador\tFecha\n");
	Loop(id, MAX_GRAFFITIS, 1) if (InfoGraffiti[id][gr_PosX])
	{
	    if (InfoGraffiti[id][gr_Fecha] == 0) format(pro, sizeof pro, "{EBEBEB}(%d) Sin pintar uwu\n", id);
		else format(pro, sizeof pro, "{EBEBEB}(%d) %.20s\t{00AE57}%s\t{00CC00}%s\n", id, InfoGraffiti[id][gr_Mensaje], InfoGraffiti[id][gr_Creador], Segundos_tiempo(gettime() - InfoGraffiti[id][gr_Fecha]));
		strcat(pro2, pro);
		format(pro, sizeof pro, "e_graffiti%d", tgraffitis);
		SetPVarInt(playerid, pro, id);
		tgraffitis++;
	}
	if (tgraffitis != 0) Dialog_Show(playerid, AdminGraffiti, DIALOG_STYLE_TABLIST_HEADERS, "Graffitis", pro2, "Continuar", "Salir");
	else Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "Graffitis", "{EBEBEB}No hay ningún graffiti creados.", "Cerrar", "");
	SetPVarInt(playerid, "z_graffs", 1);
	return 1;
}
CMD:graffitis(playerid) return cmd_vergraffitis(playerid);

Dialog:AdminGraffiti(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	if (GetPVarInt(playerid, "z_graffs") == 1)
	{
		new ID = listitem, StrPVar[40];
		format(StrPVar, sizeof StrPVar, "e_graffiti%d", ID);
		new i = GetPVarInt(playerid, StrPVar);
		if (InfoCuenta[playerid][jAdmin] < 1) return Dialog_Show(playerid, AdminGraffiti, DIALOG_STYLE_LIST, "Graffitis", "Ir", "Continuar", "Volver");
		else Dialog_Show(playerid, AdminGraffiti, DIALOG_STYLE_LIST, "Graffitis", "Ir\nEditar coordenadas\nLimpiar\nBorrar coordenadas", "Continuar", "Volver");
		SetPVarInt(playerid, "z_graffs", 2);
		SetPVarInt(playerid, "grafs", i);
		return 1;
	}
	else if (GetPVarInt(playerid, "z_graffs") == 2)
	{
		if (!response) return cmd_vergraffitis(playerid);
		new i = GetPVarInt(playerid, "grafs");
		new gformat[512];
		switch (listitem)
		{
			case 0: // ir
				SetPosEx(playerid, InfoGraffiti[i][gr_PosX], InfoGraffiti[i][gr_PosY], InfoGraffiti[i][gr_PosZ], 0.0, InfoGraffiti[i][gr_Interior], InfoGraffiti[i][gr_VirtualWorld], 1);
			case 1: // editar
			{
				edicion_sql_actual[playerid] = i;
				EditDynamicObject(playerid, InfoGraffiti[i][gr_Objeto]);
				InfoPersonaje[playerid][pEditingMode] = 13;
			}
			case 2: // limpiar
			{
				alm(InfoGraffiti[i][gr_Mensaje], "ninguno");
				alm(InfoGraffiti[i][gr_Creador], "ninguno");
				InfoGraffiti[i][gr_Fecha] = 0;
				if (IsValidDynamicObject(InfoGraffiti[i][gr_Objeto])) DestroyDynamicObject(InfoGraffiti[i][gr_Objeto]);
				InfoGraffiti[i][gr_Objeto] = CreateDynamicObject(18665, InfoGraffiti[i][gr_PosX], InfoGraffiti[i][gr_PosY], InfoGraffiti[i][gr_PosZ], InfoGraffiti[i][gr_RotX], InfoGraffiti[i][gr_RotY], InfoGraffiti[i][gr_RotZ], -1, 0, -1, 6000.0);
				mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE graffitis SET Mensaje = '%e', Creador = '%e', Fecha = '%d' WHERE ID = '%d'", InfoGraffiti[i][gr_Mensaje], InfoGraffiti[i][gr_Creador], InfoGraffiti[i][gr_Fecha], InfoGraffiti[i][grID_sql]);
				mysql_tquery(DBInsanity, gformat);
				Streamer_Update(playerid);
			}
			case 3: // borrar
			{
				alm(InfoGraffiti[i][gr_Mensaje], "ninguno");
				alm(InfoGraffiti[i][gr_Creador], "ninguno");
				InfoGraffiti[i][gr_Fecha] = 0;
				InfoGraffiti[i][gr_PosX] = 0.0;
				InfoGraffiti[i][gr_PosY] = 0.0;
				InfoGraffiti[i][gr_PosZ] = 0.0;
				InfoGraffiti[i][gr_RotX] = 0.0;
				InfoGraffiti[i][gr_RotY] = 0.0;
				InfoGraffiti[i][gr_RotZ] = 0.0;
			    InfoGraffiti[i][gr_Interior] = 0;
			    InfoGraffiti[i][gr_VirtualWorld] = 0;
				InfoGraffiti[i][gr_Fecha] = 0;
				if (IsValidDynamicObject(InfoGraffiti[i][gr_Objeto])) DestroyDynamicObject(InfoGraffiti[i][gr_Objeto]);
				new query[1024];
				mysql_format(DBInsanity, query, sizeof query, "UPDATE graffitis SET Mensaje = '%e', Creador = '%e', Fecha = '%d', PotX = 0.0, PotY = 0.0, PotZ = 0.0, RotX = 0.0, RotY = 0.0, RotZ = 0.0, Interior = 0, VirtualWorld = 0 WHERE ID = '%d'",
				InfoGraffiti[i][gr_Mensaje], InfoGraffiti[i][gr_Creador], InfoGraffiti[i][gr_Fecha], InfoGraffiti[i][grID_sql]);
				mysql_tquery(DBInsanity, query);
				format(gformat, sizeof gformat, "Borraste el graffiti ID %d, SQL vacía: %d", i, InfoGraffiti[i][grID_sql]);
				SendClientMessage(playerid, -1, gformat);
				Streamer_Update(playerid);
			}
		}
	}
	return 1;
}

CMD:darapodo(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	new playerid2, apodo[32];
	if (sscanf(params, "ds[32]", playerid2, apodo)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /darapodo (JugadorID) (Apodo)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador no es miembro de la administración.");
	if (!InfoCuenta[playerid2][jAdmin]) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador no forma parte de la administración.");
	alm(InfoCuenta[playerid2][jApodo], apodo);
	guardar_string_mysql("cuentas", "Apodo", InfoCuenta[playerid2][jID], InfoCuenta[playerid2][jApodo]);
	SendClientMessage(playerid, COLOR_RED, "Apodo editado con éxito.");
	return 1;
}
CMD:creargraffiti(playerid)
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (InfoPersonaje[playerid][pEditingMode] != 0) return SendClientMessage(playerid, COLOR_GREY, "Estás editando un objeto.");
	new objeto = -1;
	Loop(a, MAX_GRAFFITIS, 1) if (InfoGraffiti[a][gr_PosX] == 0.0)
	{
		objeto = a;
		break;
	}
	if (objeto == -1) return SendClientMessage(playerid, COLOR_GREY, "Se alcanzó el límite de graffitis. (Max: 50)");
	GetPlayerPos(playerid, InfoGraffiti[objeto][gr_PosX], InfoGraffiti[objeto][gr_PosY], InfoGraffiti[objeto][gr_PosZ]);
	InfoGraffiti[objeto][gr_Interior] = GetPlayerInterior(playerid);
	InfoGraffiti[objeto][gr_VirtualWorld] = GetPlayerVirtualWorld(playerid);
	InfoGraffiti[objeto][gr_Objeto] = CreateDynamicObject(18665, InfoGraffiti[objeto][gr_PosX], InfoGraffiti[objeto][gr_PosY], InfoGraffiti[objeto][gr_PosZ], 0.0, 0.0, 0.0, InfoGraffiti[objeto][gr_VirtualWorld], InfoGraffiti[objeto][gr_Interior], -1, 6000.0);
	EditDynamicObject(playerid, InfoGraffiti[objeto][gr_Objeto]);
	edicion_sql_actual[playerid] = objeto;
	InfoPersonaje[playerid][pEditingMode] = 13;
	SendClientMessage(playerid, -1, "Mantén presionado {589DA0}~k~~PED_SPRINT~{FFFFFF} para cambiar la posición de la cámara y editar mejor el graffiti.");
	return 1;
}

CMD:heridos(playerid)
{
	if (!member_faccion(playerid, 1, 4)) return SendClientMessage(playerid, COLOR_GREY, "* No eres miembro de LSPD o LSCSD.");
	new string[128], totalstr[3000], count = 0;
	foreach(Player, i)
	{
		if (AvisoPD[i] == 1)
		{
			new Float:PosX, Float:PosY, Float:PosZ;
			GetPlayerPos(playerid, PosX, PosY, PosZ);

			new location[MAX_ZONE_NAME];
			Get2DZone(location, sizeof location, PosX, PosY, PosZ);

			format(string, sizeof string, "Persona herida\tUbicación: %s\n", location);
			strcat(totalstr, string);

			format(string, sizeof string, "Heridos%d", count);
			SetPVarInt(playerid, string, i);
			count++;
		}
	}
	if(count == 0) return Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{D6E1EB}Heridos", "No hay heridos.", "Aceptar", "");
	Dialog_Show(playerid, HeridosPD, DIALOG_STYLE_LIST, "{D6E1EB}Heridos", totalstr, "Localizar", "Cancelar");
	return 1;
}

Dialog:HeridosPD(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;

	new string[128];

	format(string, sizeof string, "Heridos%d", listitem);
	new id = GetPVarInt(playerid, string);

	new Float:x, Float:y, Float:z;
	GetPlayerPos(id, x, y, z);

	SetPVarInt(playerid, "BuscandoHeridop", 1);
	SetPlayerCheckpoint(playerid, x, y, z, 5.0);
	SendClientMessage(playerid, -1, "Se ha trazado la posición del herido.");
	return 1;
}

CMD:centralita(playerid, params[])
{
	if (!member_faccion(playerid, 1, 4)) return SendClientMessage(playerid, COLOR_GREY, "* No eres miembro de LSPD o LSCSD.");
	new vehicleid = GetPlayerVehicleID(playerid);
	if (!Vehiculo_LSPD(vehicleid) && !Vehiculo_SASD(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "* Debes estar dentro de un vehículo LSPD o LSCSD.");
	new string[128], id;
	new strtotal[1500];
	if (!sscanf(params, "d", id))
	{
		if (InfoCentralita[id][c_id] == 0) return SendClientMessage(playerid, COLOR_GREY, "Esa llamada es inexistente");
		llamadaPolicia[playerid] = id;
		format(string, sizeof string, "{00a2ff}* Nombre del ciudadano:{DDCC72} %s\n", InfoCentralita[id][c_nombre]); strcat(strtotal, string);
		if (strlen(InfoCentralita[id][c_situacion]) > 60)
		{
			format(string, sizeof string, "{00a2ff}* Situación:{DDCC72} %.60s\n", InfoCentralita[id][c_situacion]); strcat(strtotal, string);
			format(string, sizeof string, "{DDCC72}%s\n", InfoCentralita[id][c_situacion][60]); strcat(strtotal, string);
		}
		else if (strlen(InfoCentralita[id][c_situacion]) <= 60) format(string, sizeof string, "{00a2ff}* Situación:{DDCC72} %s\n", InfoCentralita[id][c_situacion]); strcat(strtotal, string);
		format(string, sizeof string, "{00a2ff}* Lugar:{DDCC72} %s\n", InfoCentralita[id][c_lugar]); strcat(strtotal, string);
		format(string, sizeof string, "{00a2ff}* Localización:{DDCC72} %s\n", InfoCentralita[id][c_localizacion]); strcat(strtotal, string);
		SetPVarInt(playerid, "Centralitauwu", 1);
		Dialog_Show(playerid, Centralita, DIALOG_STYLE_MSGBOX, "{D6E1EB}Centralita policial", strtotal, "Opciones", "Salir");

	}
	else 
	{
		new cantidadowo = 0;
		Loop(x, 50, 1) if (InfoCentralita[x][c_id] != 0)
		{
			format(string, sizeof string, "ID: %d: Localizacion: %s, estado: %s\n", x, InfoCentralita[x][c_localizacion], (InfoCentralita[x][c_atendida]) ? ("{E81700}Atendida") : ("{54C822}Disponible")); strcat(strtotal, string);
			format(string, sizeof string, "Centralita%d", cantidadowo);
			SetPVarInt(playerid, string, x);
			cantidadowo++;
		}
		if (cantidadowo == 0) return Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{D6E1EB}Centralita policial", "No hay llamadas.", "Aceptar", "");
		Dialog_Show(playerid, Centralita2, DIALOG_STYLE_LIST, "{D6E1EB}Centralita policial", strtotal, "Ver", "Salir");
	}
	return 1;
}

Dialog:Centralita(playerid, response, listitem, inputtext[])
{
	if (!response) return DeletePVar(playerid, "Centralitauwu");
	if (GetPVarInt(playerid, "Centralitauwu") == 1)
	{
		Dialog_Show(playerid, Centralita, DIALOG_STYLE_LIST, "{D6E1EB}Centralita policial", "Atender\nBorrar\n", "ver", "Salir");	
		SetPVarInt(playerid, "Centralitauwu", 2);
		return 1;
	}
	else if (GetPVarInt(playerid, "Centralitauwu") == 2)
	{
		new id = llamadaPolicia[playerid];
		if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "Hubo un error al procesar lo que pediste.");
		switch (listitem)
		{
			case 0:
			{
				new Float:cenX = InfoCentralita[id][c_pos][0];
				new Float:cenY = InfoCentralita[id][c_pos][1]; 
				new Float:cenZ = InfoCentralita[id][c_pos][2];
				if (InfoCentralita[id][c_negocio] >= 1) {
					new nego = InfoCentralita[id][c_negocio];
					cenX = InfoNegocio[nego][nExteriorX];
					cenY = InfoNegocio[nego][nExteriorY];
					cenZ = InfoNegocio[nego][nExteriorZ];
				}
				InfoCentralita[id][c_atendida] = 1;
				SetPlayerCheckpoint(playerid, cenX, cenY, cenZ, 5.0);
				SendClientMessageEx(playerid, 0xEBEBEBFF, "Has tomado la llamada. Se trazó la posición de la llamada, ubicación: {00AE57}%s", InfoCentralita[id][c_localizacion]);
				SetPVarInt(playerid, "Centralitauwu", 5);
				llamadaPolicia[playerid] = -1;
			}
			case 1:
			{
				if (InfoPersonaje[playerid][pRango] < 2) return SendClientMessage(playerid, COLOR_GREY, "Necesitas ser rango 2.");
				InfoCentralita[id][c_timer] = 0;
				InfoCentralita[id][c_id] = 0;
				SendClientMessageEx(playerid, 0xEBEBEBFF, "Has borrado la llamada {00AE57}%d", id);
			}
		}
	}
	return 1;
}

Dialog:Centralita2(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new string[128], strtotal[800];
	format(string, sizeof string, "Centralita%d", listitem);
	new id = GetPVarInt(playerid, string);

	llamadaPolicia[playerid] = id;
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "Hubo un error al obtener la información.");
	format(string, sizeof string, "{00a2ff}* Nombre del ciudadano:{DDCC72} %s\n", InfoCentralita[id][c_nombre]); strcat(strtotal, string);
	if (strlen(InfoCentralita[id][c_situacion]) > 60)
	{
		format(string, sizeof string, "{00a2ff}* Situación:{DDCC72} %.60s\n", InfoCentralita[id][c_situacion]); strcat(strtotal, string);
		format(string, sizeof string, "{DDCC72}%s\n", InfoCentralita[id][c_situacion][60]); strcat(strtotal, string);
	}
	else if (strlen(InfoCentralita[id][c_situacion]) <= 60) format(string, sizeof string, "{00a2ff}* Situación:{DDCC72} %s\n", InfoCentralita[id][c_situacion]); strcat(strtotal, string);
	format(string, sizeof string, "{00a2ff}* Lugar:{DDCC72} %s\n", InfoCentralita[id][c_lugar]); strcat(strtotal, string);
	format(string, sizeof string, "{00a2ff}* Localización:{DDCC72} %s\n", InfoCentralita[id][c_localizacion]); strcat(strtotal, string);
	SetPVarInt(playerid, "Centralitauwu", 1);
	Dialog_Show(playerid, Centralita, DIALOG_STYLE_MSGBOX, "{D6E1EB}Centralita policial", strtotal, "ver", "Salir");
	return 1;
}

CMD:tallerpd(playerid)
{
	if (!IsPlayerInRangeOfPoint(playerid, 5.0, 1549.3959, -1698.3270, 5.8906)) return SendClientMessage(playerid, COLOR_GREY, "* No estás cerca del taller policial.");
	if (!member_faccion(playerid, 1, 4)) return SendClientMessage(playerid, COLOR_GREY, "* No eres miembro de LSPD o LSCSD.");
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "* Debes ser el conductor un vehículo.");
	new vehicleid = GetPlayerVehicleID(playerid);
	if (!Vehiculo_LSPD(vehicleid) && !Vehiculo_SASD(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "* Debes estar dentro de un vehículo LSPD o LSCSD.");
	Dialog_Show(playerid, TallerPolicial, DIALOG_STYLE_LIST, "{D6E1EB}Taller policial", "Motor + Carrocería\n200 litros de gasolina", "Seleccionar", "Salir");
	return 1;
}

Dialog:TallerPolicial(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	if (!IsPlayerInRangeOfPoint(playerid, 5.0, 1549.3959, -1698.3270, 5.8906)) return SendClientMessage(playerid, COLOR_GREY, "* No estás cerca del taller policial.");
	if (!member_faccion(playerid, 1, 4)) return SendClientMessage(playerid, COLOR_GREY, "* No eres miembro de LSPD o LSCSD.");
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "* Debes ser el conductor un vehículo.");
	new vehicleid = GetPlayerVehicleID(playerid);
	if (!Vehiculo_LSPD(vehicleid) && !Vehiculo_SASD(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "* Debes estar dentro de un vehículo LSPD o LSCSD.");
	switch (listitem)
	{
		case 0: //reparación
		{
			new Float: cvida;
			GetVehicleHealth(vehicleid, cvida);
			if (cvida >= 990.0) return SendClientMessage(playerid, COLOR_GREY, "* El health (/dl) del vehículo pasa los 990.");
			RepairVehicle(vehicleid);
			if (GetVehicleModel(vehicleid) == 528 || GetVehicleModel(vehicleid) == 427) SetVehicleHealth(vehicleid, 5000.0);
			else SetVehicleHealth(vehicleid, 1000.0);
			ameuwu(playerid, "pide al mecánico policial que repare su vehículo.");
		}
		case 1:
		{
			if (veh_gasolina[vehicleid] >= 199) return SendClientMessage(playerid, COLOR_GREY, "* El tanque de gasolina del vehículo no aguanta más de 200 litros.");
			veh_gasolina[vehicleid] = 200;
			Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] == vehicleid)
			{
				InfoVehiculo[v][vGasolina] = veh_gasolina[vehicleid];
				guardar_int_mysql("vehiculos", "Gasolina", InfoVehiculo[v][vID_sql], InfoVehiculo[v][vGasolina]);
				break;
			}
			ameuwu(playerid, "pide al mecánico policial que llene de combustible su vehículo.");
		}
	}
	return 1;
}

CMD:veh_sirena(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new vehicleid, string[160], Float: vehx, Float: vehy, Float: vehz, Float: vehr;
	if (sscanf(params, "d", vehicleid)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /veh_sirena (VehiculoID) [para saber ID exacta acercate al vehículo con /dl]");
	Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] == vehicleid)
	{
		if (AnibleVeh(v) == 0) return SendClientMessage(playerid, COLOR_GREY, "Sólo puedes agregar sirena en vehículos LSPD/FBI/SAEM/LSCSD.");
		if (InfoVehiculo[v][vSirena] == 0)
		{
			format(string, sizeof string, "Colocaste sonido de sirena en el %s de %s.", GetNameVehicle(InfoVehiculo[v][vModelo]), InfoVehiculo[v][vPropietario]);
			InfoVehiculo[v][vSirena] = 1;
		}
		else
		{
			format(string, sizeof string, "Retiraste sonido de sirena del %s de %s.", GetNameVehicle(InfoVehiculo[v][vModelo]), InfoVehiculo[v][vPropietario]);
			InfoVehiculo[v][vSirena] = 0;
		}
		SendClientMessage(playerid, COLOR_YELLOW, string);
		guardar_int_mysql("vehiculos", "Sirena", InfoVehiculo[v][vID_sql], InfoVehiculo[v][vSirena]);
		GetVehicleHealth(vehicleid, InfoVehiculo[v][vVida]);
		GetVehicleDamageStatus(vehicleid, InfoVehiculo[v][vDanioSuperficie], InfoVehiculo[v][vDanioPuertas], InfoVehiculo[v][vDanioLuces], InfoVehiculo[v][vDanioRuedas]);
		GetVehiclePos(vehicleid, vehx, vehy, vehz);
		GetVehicleZAngle(vehicleid, vehr);
		DestroyVehicle(vehicleid);
		InfoVehiculo[v][vIG_id] = CreateVehicle(InfoVehiculo[v][vModelo], vehx, vehy, vehz, vehr, InfoVehiculo[v][vColor_1], InfoVehiculo[v][vColor_2], -1, InfoVehiculo[v][vSirena]);
		new v_vehicleid = InfoVehiculo[v][vIG_id];
		if (InfoVehiculo[v][vSeguro] != 0) LockPlayerVehicle(v_vehicleid);
		if (InfoVehiculo[v][vPaintJob] != -1) ChangeVehiclePaintjob(v_vehicleid, InfoVehiculo[v][vPaintJob]);
		LinkVehicleToInterior(v_vehicleid, InfoVehiculo[v][vInterior]);
		SetVehicleExVirtualWorld(v_vehicleid, InfoVehiculo[v][vVirtualWorld]);
		if (InfoVehiculo[v][vModelo] == 528 || InfoVehiculo[v][vModelo] == 427) SetVehicleHealth(v_vehicleid, 5000.0);
		else SetVehicleHealth(v_vehicleid, InfoVehiculo[v][vVida]);
		UpdateVehicleDamageStatus(v_vehicleid, InfoVehiculo[v][vDanioSuperficie], InfoVehiculo[v][vDanioPuertas], InfoVehiculo[v][vDanioLuces], InfoVehiculo[v][vDanioRuedas]);
		Loop(m, MAX_MODIFICACIONES, 0) { AddVehicleComponent(v_vehicleid, InfoVehiculo[v][vModificacion][m]); }
		if (!isnull(InfoVehiculo[v][vCallSign]))
		{
			DestroyDynamic3DTextLabel(InfoVehiculo[v][vOnCallSign]);
			InfoVehiculo[v][vOnCallSign] = CreateDynamic3DTextLabel(InfoVehiculo[v][vCallSign], 0xEBEBEBFF, -1.0, -2.8, 0.0, 30.0, INVALID_PLAYER_ID, v_vehicleid);
		}
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Ese vehículo no está spawneado o no existe.");
	return 1;
}

CMD:adminfac(playerid)
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes variables de encargado de facciones.");
	SendClientMessage(playerid, COLOR_YELLOW, "/facciones - /crearfaccion - /statusfacc - /facchat - /supervisar - /hacerlider - /hacersublider");
	SendClientMessage(playerid, COLOR_YELLOW, "/borrarfaccion - /darmiembro - /limpiarfaccion - /editarfnombre - /editarfequipo - /qfaccoff");
	SendClientMessage(playerid, COLOR_YELLOW, "/editarfaccion - /editarflogo - /editarflider - /editarfsublider - /editarfskin");
	return 1;
}
CMD:adminfacciones(playerid) return cmd_adminfac(playerid);

CMD:borraranuncios(playerid)
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new count = 0, string[190];
	if (strcmp(AnunceString1, "none", true) == 0) { } else { count++; }
	if (strcmp(AnunceString2, "none", true) == 0) { } else { count++; }
	if (strcmp(AnunceString3, "none", true) == 0) { } else { count++; }
	if (strcmp(AnunceString4, "none", true) == 0) { } else { count++; }
	if (count != 0)
	{
		AnunceID = 0;
		alm(AnunceString1, "none");
		alm(AnunceString2, "none");
		alm(AnunceString3, "none");
		alm(AnunceString4, "none");
		Loop(playerid2, MAX_PLAYERS, 0) if (IsPlayerConnectedEx(playerid2))
		{
			PlayerViewAnunce[playerid2] = 0;
			Loop(x, 5, 0) { TextDrawHideForPlayer(playerid2, TD_Anuncio[x]); }
		}
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) borró %d anuncios.", InfoCuenta[playerid][jApodo], playerid, count);
		SendAdminMessage(0xFF6347FF, string);
		DiferenciaAnuncio = gettime();
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "* No hay ningún anuncio publicado.");
	return 1;
}

CMD:ad(playerid)
{
	if (InfoPersonaje[playerid][pHorasOn] < 2) return SendClientMessage(playerid, COLOR_GREY, "* Debes jugar al menos dos horas el servidor para enviar anuncios.");
	if (InfoPersonaje[playerid][pBlockAD] == 1) return SendClientMessage(playerid, COLOR_GREY, "* Estás bloqueado del sistema de anuncios, contacta un administrador sobre esto.");
	if (InfoPersonaje[playerid][pSancionado] != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes usar este comando mientras estás en prisión.");
	new string[190], d_anuncie[1028];
	if (InfoPersonaje[playerid][pTimerAnuncios] != 0)
	{
		format(string, sizeof string, "Debes esperar %d minutos para enviar otro anuncio.", InfoPersonaje[playerid][pTimerAnuncios]);
		SendClientMessage(playerid, COLOR_GREY, string);
		return 1;
	}
	if (no_tiene_manos(playerid, 50) == 0) return 1;
	if (GetPlayerCash(playerid) < TaxAnuncios) return SendClientMessage(playerid, COLOR_GREY, "* No tienes suficiente dinero.");
	if (!CheckTimer(60, DiferenciaAnuncio))
	{
		strcat(d_anuncie, "Tipo\tUso\n");
		strcat(d_anuncie, "{00AE57}COMERCIO\t{EBEBEB}Compras/ventas/alquileres o similares.\n");
		strcat(d_anuncie, "{00AE57}EVENTOS\t{EBEBEB}Para anunciar eventos.\n");
		strcat(d_anuncie, "{00AE57}SORTEOS\t{EBEBEB}Para anunciar sorteos.\n");
		strcat(d_anuncie, "{00AE57}EMPLEOS\t{EBEBEB}Para buscar o ofrecer empleo.\n");
		strcat(d_anuncie, "{00AE57}SERVICIOS\t{EBEBEB}Para buscar o ofrecer servicios.");
		Dialog_Show(playerid, ShowAnuncio, DIALOG_STYLE_TABLIST_HEADERS, "Elige el tipo de anuncio a enviar", d_anuncie, "Continuar", "Salir");
	}
	else
	{
		format(string, sizeof string, "Faltan %d segundos para poder enviar otro anuncio global.", CheckTimer(60, DiferenciaAnuncio));
		SendClientMessage(playerid, COLOR_GREY, string);
	}
	return 1;
}
CMD:ads(playerid) return cmd_ad(playerid);
CMD:anuncio(playerid) return cmd_ad(playerid);
CMD:anuncios(playerid) return cmd_ad(playerid);

Dialog:ShowAnuncio(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new tipo = listitem+1, string[512];
	new name_tipo[32];
	switch (tipo)
	{
		case 1: name_tipo = "Comercio";
		case 2: name_tipo = "Eventos";
		case 3: name_tipo = "Sorteos";
		case 4: name_tipo = "Empleos";
		case 5: name_tipo = "Servicios";
	}
	if (GetPlayerCash(playerid) < TaxAnuncios) return SendClientMessage(playerid, COLOR_GREY, "* No tienes suficiente dinero.");
	tipo_anuncio[playerid] = tipo;
	format(string, sizeof string, "{EBEBEB}Bien has elegido el tipo {00AE57}%s{EBEBEB}.\n\nA continuación escribe el enunciado a publicar:", name_tipo);
	Dialog_Show(playerid, Show2Anuncio, DIALOG_STYLE_INPUT, "Anuncio global", string, "Enviar", "Volver");
	return 1;
}

Dialog:Show2Anuncio(playerid, response, listitem, inputtext[])
{
	new str[128];
	if (!response) return cmd_ads(playerid);
	if (!strlen(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "* No escribiste nada, intentalo de nuevo.");
	if (strlen(inputtext) > 65 || strlen(inputtext) < 10)
	{
		SendClientMessage(playerid, COLOR_GREY, "* No puedes escribir un anuncio con menos de 10 carácteres ni mayor a 64 carácteres.");
		return 1;
	}
	if (!IsValidCaracterAnunce(inputtext))
	{
		SendClientMessage(playerid, COLOR_GREY, "* Su anuncio sólo puede contener letras, números y estos simbolos '[].,_()$'.");
		return 1;
	}
	if (GetPlayerCash(playerid) < TaxAnuncios) return SendClientMessage(playerid, COLOR_GREY, "* No tienes suficiente dinero.");
	new tipo = tipo_anuncio[playerid], name_tipo[64], string[512];
	switch (tipo)
	{
		case 1: name_tipo = "~g~~h~[Comercio LS]~w~~h~~h~";
		case 2: name_tipo = "~p~[Eventos LS]~w~~h~~h~";
		case 3: name_tipo = "~r~~h~[Sorteos LS]~w~~h~~h~";
		case 4: name_tipo = "~y~[Empleos LS]~w~~h~~h~";
		case 5: name_tipo = "~b~~h~~h~[Servicios LS]~w~~h~~h~";
	}
	/*format(string, sizeof string, "%s%s ~g~~h~~h~Móvil: %d", name_tipo, inputtext, InfoPersonaje[playerid][pTelefono]);
	RegistrarAnuncio(string); // register anunce
	DiferenciaAnuncio = gettime(); */
	format(str, sizeof(str), "[Advertisement] %s [PH: %d]", inputtext, InfoPersonaje[playerid][pTelefono]);
	SendClientMessageToAll(COLOR_GREEN2, str);
	RegistrarAnuncio(string); // register anunce
	DiferenciaAnuncio = gettime();

	format(string, sizeof string, "Anuncio por %s (ID: %d)", NombreOriginal(playerid), playerid);
	SendAdminMessage(0xF7FE2EFF, string);
	GivePlayerCash(playerid, -TaxAnuncios, "anuncio");
	FondosAnuncios += TaxAnuncios;
	InfoPersonaje[playerid][pTimerAnuncios] = 10;
	guardar_int_mysql("personajes", "TimerAnuncios", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTimerAnuncios]);
	return 1;
}

RegistrarAnuncio(string[])
{
	TextDrawSetStringEx(TD_Anuncio[0], string);
	if (AnunceID == 0)
	{
		if (strcmp(AnunceString1, "none", true) == 0)
		{
			alm(AnunceString1, string);
		}
		else
		{
			TextDrawSetStringEx(TD_Anuncio[1], AnunceString1);
			TextDrawSetStringEx(TD_Anuncio[2], AnunceString2);
			TextDrawSetStringEx(TD_Anuncio[3], AnunceString3);
			TextDrawSetStringEx(TD_Anuncio[4], AnunceString4);
			alm(AnunceString4, AnunceString3);
			alm(AnunceString3, AnunceString2);
			alm(AnunceString2, AnunceString1);
			alm(AnunceString1, string);
		}
		AnunceID = 1;
	}
	else if (AnunceID == 1)
	{
		if (strcmp(AnunceString2, "none", true) == 0)
		{
			TextDrawSetStringEx(TD_Anuncio[1], AnunceString1);
			alm(AnunceString2, AnunceString1);
			alm(AnunceString1, string);
		}
		else
		{
			TextDrawSetStringEx(TD_Anuncio[1], AnunceString1);
			TextDrawSetStringEx(TD_Anuncio[2], AnunceString2);
			TextDrawSetStringEx(TD_Anuncio[3], AnunceString3);
			TextDrawSetStringEx(TD_Anuncio[4], AnunceString4);
			alm(AnunceString4, AnunceString3);
			alm(AnunceString3, AnunceString2);
			alm(AnunceString2, AnunceString1);
			alm(AnunceString1, string);
		}
		AnunceID = 2;
	}
	else if (AnunceID == 2)
	{
		if (strcmp(AnunceString3, "none", true) == 0)
		{
			TextDrawSetStringEx(TD_Anuncio[1], AnunceString1);
			TextDrawSetStringEx(TD_Anuncio[2], AnunceString2);
			alm(AnunceString3, AnunceString2);
			alm(AnunceString2, AnunceString1);
			alm(AnunceString1, string);
		}
		else
		{
			TextDrawSetStringEx(TD_Anuncio[1], AnunceString1);
			TextDrawSetStringEx(TD_Anuncio[2], AnunceString2);
			TextDrawSetStringEx(TD_Anuncio[3], AnunceString3);
			TextDrawSetStringEx(TD_Anuncio[4], AnunceString4);
			alm(AnunceString4, AnunceString3);
			alm(AnunceString3, AnunceString2);
			alm(AnunceString2, AnunceString1);
			alm(AnunceString1, string);
		}
		AnunceID = 3;
	}
	else if (AnunceID == 3)
	{
		if (strcmp(AnunceString4, "none", true) == 0)
		{
			TextDrawSetStringEx(TD_Anuncio[1], AnunceString1);
			TextDrawSetStringEx(TD_Anuncio[2], AnunceString2);
			TextDrawSetStringEx(TD_Anuncio[3], AnunceString3);
			alm(AnunceString4, AnunceString3);
			alm(AnunceString3, AnunceString2);
			alm(AnunceString2, AnunceString1);
			alm(AnunceString1, string);
		}
		else
		{
			TextDrawSetStringEx(TD_Anuncio[1], AnunceString1);
			TextDrawSetStringEx(TD_Anuncio[2], AnunceString2);
			TextDrawSetStringEx(TD_Anuncio[3], AnunceString3);
			TextDrawSetStringEx(TD_Anuncio[4], AnunceString4);
			alm(AnunceString4, AnunceString3);
			alm(AnunceString3, AnunceString2);
			alm(AnunceString2, AnunceString1);
			alm(AnunceString1, string);
		}
		AnunceID = 4;
	}
	else if (AnunceID == 4)
	{
		TextDrawSetStringEx(TD_Anuncio[1], AnunceString1);
		TextDrawSetStringEx(TD_Anuncio[2], AnunceString2);
		TextDrawSetStringEx(TD_Anuncio[3], AnunceString3);
		TextDrawSetStringEx(TD_Anuncio[4], AnunceString4);
		alm(AnunceString4, AnunceString3);
		alm(AnunceString3, AnunceString2);
		alm(AnunceString2, AnunceString1);
		alm(AnunceString1, string);
		AnunceID = 0;
	}
	Loop(playerid, MAX_PLAYERS, 0) if (IsPlayerConnectedEx(playerid))
	{
		new numer = PlayerViewAnunce[playerid];
		if (numer != 5)
		{
			PlayerViewAnunce[playerid]++;
			if (InfoPersonaje[playerid][pTogAnuncios] == 0)
				TextDrawShowForPlayer(playerid, TD_Anuncio[numer]);
		}
	}
    return 1;
}

stock IsValidCaracterAnunce(const password[])
{
    for(new i = 0; password[i] != EOS; ++i)
    {
        switch(password[i])
        {
            case '0'..'9', 'A'..'Z', 'a'..'z', '.', ',', '(', ')', '[', ']', ' ', '_', '$', 'ñ': continue;
            default: return 0;
        }
    }
    return 1;
}

CMD:irllamado(playerid, params[])
{
	new id = IsPlayerContrato(playerid, 9);
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "No trabajas en ningún taller mecánico.");
	if (LlegandoLlamadoMecanico[playerid] != 0) return SendClientMessage(playerid, COLOR_GREY, "* Ya estás en un llamado de mecánico.");
	new playerid2, gformat[190];
	if (sscanf(params, "u", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /irllamado (JugadorID)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador desconectado.");
	if (EnLlamadoMecanico[playerid2] == 0) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador no solicita un mecánico.");
	Loop(playerid3, MAX_PLAYERS, 0) if (IsPlayerConnectedEx(playerid3) && PermisosContrato(playerid3, id) != 0)
	{
		format(gformat, sizeof gformat, "* %s aceptó el llamado de %s.", NombreJugador(playerid), NombreJugador(playerid2));
		SendClientMessage(playerid3, COLOR_LIGHTBLUE, gformat);
	}
	format(gformat, sizeof gformat, "* El mecánico %s aceptó tu llamado, espera en tu posición.", NombreJugador(playerid));
	SendClientMessage(playerid2, COLOR_LIGHTGREEN, gformat);
	new Float: PosOwO[3];
	GetPlayerPos(playerid2, PosOwO[0], PosOwO[1], PosOwO[2]);
	SetPlayerCheckpoint(playerid, PosOwO[0], PosOwO[1], PosOwO[2], 5.0);
	EnLlamadoMecanico[playerid2] = 0;
    LlegandoLlamadoMecanico[playerid] = 1;
	return 1;
}

CMD:mecanicos(playerid)
{
	new dialog_taller[2056], gformat[256], iCount = 0;
	if (EnLlamadoMecanico[playerid] != 0)
	{
		format(gformat, sizeof gformat, "* Ya has solicitado un mecánico, espera %d segundos para solicitar otro.", EnLlamadoMecanico[playerid]);
		SendClientMessage(playerid, COLOR_GREY, gformat);
		return 1;
	}
	strcat(dialog_taller, "Taller\tEmpleados en servicio\n");
	Loop(id, totalnegocios, 1) if (InfoNegocio[id][nTipo] == 9)
	{
		format(gformat, sizeof gformat, "{EFEFEF}%s\t{00CC00}%d\n", InfoNegocio[id][nNombre], CountEmpleados(id));
		strcat(dialog_taller, gformat);
		//conteo
		new gformat2[64];
		format(gformat2, sizeof gformat2, "idTallers%d", iCount);
		SetPVarInt(playerid, gformat2, id);
		iCount++;
	}
	if (iCount == 0) return SendClientMessage(playerid, COLOR_WHITE, "No hay ningún taller existente.");
	Dialog_Show(playerid, ServiciosMecanicos, DIALOG_STYLE_TABLIST_HEADERS, "Talleres de la ciudad", dialog_taller, "Llamar", "Salir");
	return 1;
}

Dialog:ServiciosMecanicos(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new ID = listitem, gformat[40], gstring[220];
	format(gformat, sizeof gformat, "idTallers%d", ID);
	new neg = GetPVarInt(playerid, gformat);
	if (CountEmpleados(neg) == 0) return SendClientMessage(playerid, COLOR_GREY, "* No hay ningún empleado en servicio en ese taller.");
	Loop(playerid2, MAX_PLAYERS, 0) if (IsPlayerConnectedEx(playerid2) && PermisosContrato(playerid2, neg) != 0)
	{
		format(gstring, sizeof gstring, "** %s solicita un mecánico en su posición. (/irllamado %d) **", NombreJugador(playerid), playerid);
		SendClientMessage(playerid2, COLOR_LIGHTBLUE, gstring);
	}
	format(gstring, sizeof gstring, "Has solicitado un mecánico del taller %s.", InfoNegocio[neg][nNombre]);
	SendClientMessage(playerid, COLOR_LIGHTRED, gstring);
	EnLlamadoMecanico[playerid] = 120;
	return 1;
}

CMD:mostrarprecios(playerid, params[])
{
	new id = EnNegocio(playerid);
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ningún negocio.");
	if (InfoNegocio[id][nTipo] != 9) return SendClientMessage(playerid, COLOR_GREY, "* Este negocio no es un taller mecánico.");
	if (PermisosContrato(playerid, id) == 0) return SendClientMessage(playerid, COLOR_GREY, "No trabajas en este taller mecánico.");
	new playerid2, dialog_taller[2056], gformat[256];
	if (sscanf(params, "u", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /mostrarprecios (JugadorID)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador desconectado.");
	if (!CercaDelMarica(5.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador muy lejos de ti.");
	strcat(dialog_taller, "Servicio\tCosto máximo\n");
	format(gformat, sizeof gformat, "{EFEFEF}Pintura\t{00CC00}$%s\n", diner_coma(InfoNegocio[id][nPrecioPintura]));
	strcat(dialog_taller, gformat);
	format(gformat, sizeof gformat, "{EFEFEF}PaintJob\t{00CC00}$%s\n", diner_coma(InfoNegocio[id][nPrecioPaintJob]));
	strcat(dialog_taller, gformat);
	format(gformat, sizeof gformat, "{EFEFEF}Reparación\t{00CC00}$%s\n", diner_coma(InfoNegocio[id][nPrecioReparacion]));
	strcat(dialog_taller, gformat);
	format(gformat, sizeof gformat, "{EFEFEF}Gasolina\t{00CC00}$%s\n", diner_coma(InfoNegocio[id][nPrecioGasolina]));
	strcat(dialog_taller, gformat);
	format(gformat, sizeof gformat, "{EFEFEF}Llantas\t{00CC00}$%s\n", diner_coma(InfoNegocio[id][nPrecioLlantas]));
	strcat(dialog_taller, gformat);
	format(gformat, sizeof gformat, "{EFEFEF}Nitro\t{00CC00}$%s\n", diner_coma(InfoNegocio[id][nPrecioNitro]));
	strcat(dialog_taller, gformat);
	format(gformat, sizeof gformat, "{EFEFEF}Hidráulica\t{00CC00}$%s\n", diner_coma(InfoNegocio[id][nPrecioHyd]));
	strcat(dialog_taller, gformat);
	format(gformat, sizeof gformat, "{EFEFEF}Tunning carroceria\t{00CC00}$%s", diner_coma(InfoNegocio[id][nPrecioTuneo]));
	strcat(dialog_taller, gformat);
	Dialog_Show(playerid2, ShowInvalido, DIALOG_STYLE_TABLIST_HEADERS, "Precios del taller:", dialog_taller, "Cerrar", "");
	format(gformat, sizeof gformat, "le muestra los precios del taller a %s.", NombreJugador(playerid2));
	if (playerid != playerid2) meuwu(playerid, gformat);
	return 1;
}

CMD:tuneo(playerid, params[])
{
	new id = EnNegocio(playerid);
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ningún negocio.");
	if (InfoNegocio[id][nTipo] != 9) return SendClientMessage(playerid, COLOR_GREY, "* Este negocio no es un taller mecánico.");
 	if (PermisosContrato(playerid, id) == 0) return SendClientMessage(playerid, COLOR_GREY, "No trabajas en este taller mecánico.");
	new playerid2, costo, gformat[190];
	if (sscanf(params, "ud", playerid2, costo)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /tuneo (JugadorID) (Precio)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador desconectado.");
	if (!CercaDelMarica(5.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador muy lejos de ti.");
	if (TallerMecanico[playerid2] != -1) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador tiene una oferta de servicio mecánico pendiente.");
	if (GetPlayerState(playerid2) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador no esta dentro de un vehículo como conductor.");
	new vehicleid = GetPlayerVehicleID(playerid2);
	if (!eEnvcvehs(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "* Ese vehículo se le puede tunear la carrocería.");
	new minimocost = MinimoPrecioTaller(8), maximocost = InfoNegocio[id][nPrecioTuneo];
	if (costo < minimocost || costo > maximocost)
	{
		format(gformat, sizeof gformat, "El cobro mínimo por tuneo es de $%s y el máximo de $%s.", diner_coma(minimocost), diner_coma(maximocost));
		SendClientMessage(playerid, COLOR_RED, gformat);
		return 1;
	}
	TallerCliente[playerid] = playerid2;
	TallerMecanico[playerid2] = playerid;
	TallerCosto[playerid2] = costo;
	ID_Taller_Cobro[playerid2] = id;
	ID_Veh_Cobro[playerid2] = vehicleid;
	Dialog_Show(playerid, Show_TuneoMecanico, DIALOG_STYLE_LIST, "Menú de Tuneo", "- Chasis X-Flow\n- Chasis Alien", "Continuar", "Salir");
	return 1;
}
CMD:tunear(playerid, params[]) return cmd_tuneo(playerid, params);

Dialog:Show_TuneoMecanico(playerid, response, listitem, inputtext[])
{
	new cliente = TallerCliente[playerid];
	new costo = TallerCosto[cliente], vehicleid = ID_Veh_Cobro[cliente], gformat[234];
	if (!IsPlayerConnectedEx(cliente))
	{
		TallerCliente[playerid] = -1;
		SendClientMessage(playerid, COLOR_GREY, "* El cliente se desconectó, se cancelo la operación.");
		return 1;
	}
	if (!response)
	{
		TallerCliente[playerid] = -1;
		TallerMecanico[cliente] = -1;
		TallerCosto[cliente] = 0;
		ID_Taller_Cobro[cliente] = -1;
		ID_Veh_Cobro[cliente] = 0;
		format(gformat, sizeof gformat, "* %s canceló el servicio de tuneo.", NombreJugador(playerid));
		SendClientMessage(cliente, 0xEBEBEBFF, gformat);
		SendClientMessage(playerid, 0xEBEBEBFF, "* Cancelaste el servicio de tuneo.");
		return 1;
	}
	if (GetPlayerCash(cliente) < costo)
	{
		TallerCliente[playerid] = -1;
		TallerMecanico[cliente] = -1;
		TallerCosto[cliente] = 0;
		ID_Taller_Cobro[cliente] = -1;
		ID_Veh_Cobro[cliente] = 0;
		format(gformat, sizeof gformat, "* No tienes suficiente dinero ($%s).", diner_coma(costo));
		SendClientMessage(cliente, COLOR_GREY, gformat);
		SendClientMessage(playerid, COLOR_GREY, "* Se canceló la oferta, porque el cliente no tiene dinero suficiente.");
		return 1;
	}
	new name_tuneo[32];
	switch (listitem)
	{
		case 0: alm(name_tuneo, "Chasis X-Flow");
		case 1: alm(name_tuneo, "Chasis Alien");
	}
	TallerColor1[cliente] = listitem;
	new gdsdu[512];
	format(gdsdu, sizeof gdsdu, "{00AE57}%s{EBEBEB} te ofrece tuneo '%s' para tu {00AE57}%s{EBEBEB} por {00CC00}$%s{EBEBEB}\n\
	Si quieres proceder con el servicio presiona '{FFFF00}continuar{EBEBEB}'\n", NombreJugador(playerid), name_tuneo, GetVehicleName(vehicleid), diner_coma(costo));
	Dialog_Show(cliente, VentaTuneo, DIALOG_STYLE_MSGBOX, "Chasis nuevo", gdsdu, "Continuar", "Salir");
	return 1;
}

Dialog:VentaTuneo(playerid, response, listitem, inputtext[])
{
	new mecanico = TallerMecanico[playerid], costo = TallerCosto[playerid], neg = ID_Taller_Cobro[playerid], vehicleid = ID_Veh_Cobro[playerid], gformat[234];
	if (!IsPlayerConnectedEx(mecanico))
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		SendClientMessage(playerid, COLOR_GREY, "* El mecánico se desconectó, se cancelo la operación.");
		return 1;
	}
	if (!response)
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		format(gformat, sizeof gformat, "* %s rechazó el servicio de tuneo.", NombreJugador(playerid));
		SendClientMessage(mecanico, 0xEBEBEBFF, gformat);
		SendClientMessage(playerid, 0xEBEBEBFF, "* Rechazaste el servicio de tuneo.");
		return 1;
	}
	if (GetPlayerCash(playerid) < costo)
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		format(gformat, sizeof gformat, "* No tienes suficiente dinero ($%s).", diner_coma(costo));
		SendClientMessage(playerid, COLOR_GREY, gformat);
		SendClientMessage(mecanico, COLOR_GREY, "* Se canceló la oferta, porque el cliente no tiene dinero suficiente.");
		return 1;
	}
	new name_tuneo[32];
	switch (TallerColor1[playerid])
	{
		case 0: alm(name_tuneo, "Chasis X-Flow");
		case 1: alm(name_tuneo, "Chasis Alien");
	}
	AplicarTuneo(vehicleid, TallerColor1[playerid]);
	if (EsteVehEs(playerid, vehicleid) > -1) { ActualizarMods(EsteVehEs(playerid, vehicleid)); }
	format(gformat, sizeof gformat, "coloca %s al vehículo %s de %s.", name_tuneo, GetVehicleName(vehicleid), NombreJugador(playerid));
	meuwu(mecanico, gformat);
	GivePlayerCash(playerid, -costo, "servicio tuneo");
	format(gformat, sizeof gformat, "Ganaste $%s del servicio de %s de %s.", diner_coma(costo/2), name_tuneo, NombreJugador(playerid));
	SendClientMessage(mecanico, COLOR_GREEN, gformat);
	GivePlayerCash(mecanico, costo/2, "servicio tuneo");
	if (InfoNegocio[neg][nVenta] != 0)
	{
		InfoNegocio[neg][nDinero] += costo/2;
		guardar_int_mysql("negocios", "BolosUwU", InfoNegocio[neg][nID_sql], InfoNegocio[neg][nDinero]);
	}
	TallerMecanico[playerid] = -1;
	TallerCosto[playerid] = 0;
	ID_Taller_Cobro[playerid] = -1;
	ID_Veh_Cobro[playerid] = 0;
	return 1;
}

AplicarTuneo(idcar, type)
{
	if (type == 0)
	{
		switch (GetVehicleModel(idcar))
		{
			case 560:
			{
				AddVehicleComponent(idcar, 1030);
				AddVehicleComponent(idcar, 1033);
				AddVehicleComponent(idcar, 1140);
				AddVehicleComponent(idcar, 1170);
				AddVehicleComponent(idcar, 1029);
				AddVehicleComponent(idcar, 1139);
			}
			case 562:
			{
				AddVehicleComponent(idcar, 1039);
				AddVehicleComponent(idcar, 1035);
				AddVehicleComponent(idcar, 1148);
				AddVehicleComponent(idcar, 1172);
				AddVehicleComponent(idcar, 1037);
				AddVehicleComponent(idcar, 1146);
			}
			case 565:
			{
				AddVehicleComponent(idcar, 1048);
				AddVehicleComponent(idcar, 1053);
				AddVehicleComponent(idcar, 1050);
				AddVehicleComponent(idcar, 1151);
				AddVehicleComponent(idcar, 1152);
				AddVehicleComponent(idcar, 1045);
			}
			case 559:
			{
				AddVehicleComponent(idcar, 1070);
				AddVehicleComponent(idcar, 1068);
				AddVehicleComponent(idcar, 1158);
				AddVehicleComponent(idcar, 1161);
				AddVehicleComponent(idcar, 1173);
				AddVehicleComponent(idcar, 1066);
			}
			case 561:
			{
				AddVehicleComponent(idcar, 1057);
				AddVehicleComponent(idcar, 1061);
				AddVehicleComponent(idcar, 1060);
				AddVehicleComponent(idcar, 1156);
				AddVehicleComponent(idcar, 1157);
				AddVehicleComponent(idcar, 1059);
			}
			case 558:
			{
				AddVehicleComponent(idcar, 1093);
				AddVehicleComponent(idcar, 1091);
				AddVehicleComponent(idcar, 1163);
				AddVehicleComponent(idcar, 1167);
				AddVehicleComponent(idcar, 1165);
				AddVehicleComponent(idcar, 1089);
			}
		}
	}
	else if (type == 1)
	{
		switch (GetVehicleModel(idcar))
		{
			case 560:
			{
				AddVehicleComponent(idcar, 1026);
				AddVehicleComponent(idcar, 1032);
				AddVehicleComponent(idcar, 1138);
				AddVehicleComponent(idcar, 1141);
				AddVehicleComponent(idcar, 1169);
				AddVehicleComponent(idcar, 1028);
			}
			case 562:
			{
				AddVehicleComponent(idcar, 1036);
				AddVehicleComponent(idcar, 1038);
				AddVehicleComponent(idcar, 1149);
				AddVehicleComponent(idcar, 1171);
				AddVehicleComponent(idcar, 1034);
				AddVehicleComponent(idcar, 1147);
			}
			case 565:
			{
				AddVehicleComponent(idcar, 1047);
				AddVehicleComponent(idcar, 1054);
				AddVehicleComponent(idcar, 1049);
				AddVehicleComponent(idcar, 1150);
				AddVehicleComponent(idcar, 1153);
				AddVehicleComponent(idcar, 1046);
			}
			case 559:
			{
				AddVehicleComponent(idcar, 1069);
				AddVehicleComponent(idcar, 1067);
				AddVehicleComponent(idcar, 1162);
				AddVehicleComponent(idcar, 1159);
				AddVehicleComponent(idcar, 1160);
				AddVehicleComponent(idcar, 1065);
			}
			case 561:
			{
				AddVehicleComponent(idcar, 1056);
				AddVehicleComponent(idcar, 1055);
				AddVehicleComponent(idcar, 1058);
				AddVehicleComponent(idcar, 1154);
				AddVehicleComponent(idcar, 1153);
				AddVehicleComponent(idcar, 1064);
			}
			case 558:
			{
				AddVehicleComponent(idcar, 1094);
				AddVehicleComponent(idcar, 1088);
				AddVehicleComponent(idcar, 1164);
				AddVehicleComponent(idcar, 1168);
				AddVehicleComponent(idcar, 1166);
				AddVehicleComponent(idcar, 1092);
			}
		}
	}
	return 1;
}

CMD:hyd(playerid, params[])
{
	new neg = EnNegocio(playerid);
	if (neg == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ningún negocio.");
	if (InfoNegocio[neg][nTipo] != 9) return SendClientMessage(playerid, COLOR_GREY, "* Este negocio no es un taller mecánico.");
 	if (PermisosContrato(playerid, neg) == 0) return SendClientMessage(playerid, COLOR_GREY, "No trabajas en este taller mecánico.");
	new playerid2, costo, gformat[190];
	if (sscanf(params, "ud", playerid2, costo)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /hyd (JugadorID) (Precio)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador desconectado.");
	if (!CercaDelMarica(5.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador muy lejos de ti.");
	if (TallerMecanico[playerid2] != -1) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador tiene una oferta de servicio mecánico pendiente.");
	if (GetPlayerState(playerid2) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador no esta dentro de un vehículo como conductor.");
	new vehicleid = GetPlayerVehicleID(playerid2);
	if (Valid_Vehicle_Nitro(GetVehicleModel(vehicleid)) == 0) return SendClientMessage(playerid, COLOR_GREY, "* Ese vehículo no admite componente Hydraulics.");
	if (tiene_componente(1087, vehicleid) != 0) return SendClientMessage(playerid, COLOR_GREY, "* Ese vehículo ya tiene componente Hydraulics.");
	new minimocost = MinimoPrecioTaller(7), maximocost = InfoNegocio[neg][nPrecioHyd];
	if (costo < minimocost || costo > maximocost)
	{
		format(gformat, sizeof gformat, "El cobro mínimo por Hydraulics es de $%s y el máximo de $%s.", diner_coma(minimocost), diner_coma(maximocost));
		SendClientMessage(playerid, COLOR_RED, gformat);
		return 1;
	}
	TallerMecanico[playerid2] = playerid;
	TallerCosto[playerid2] = costo;
	ID_Taller_Cobro[playerid2] = neg;
	ID_Veh_Cobro[playerid2] = vehicleid;
	new gdsdu[512];
	format(gdsdu, sizeof gdsdu, "{00AE57}%s{EBEBEB} te ofrece Hydraulics para tu {00AE57}%s{EBEBEB} por {00CC00}$%s{EBEBEB}\n\
	Si quieres proceder con el servicio presiona '{FFFF00}continuar{EBEBEB}'\n", NombreJugador(playerid), GetVehicleName(vehicleid), diner_coma(costo));
	Dialog_Show(playerid2, VentaHydraulics, DIALOG_STYLE_MSGBOX, "Hydraulics", gdsdu, "Continuar", "Salir");
	return 1;
}

Dialog:VentaHydraulics(playerid, response, listitem, inputtext[])
{
	new mecanico = TallerMecanico[playerid], costo = TallerCosto[playerid], neg = ID_Taller_Cobro[playerid], vehicleid = ID_Veh_Cobro[playerid], gformat[234];
	if (!IsPlayerConnectedEx(mecanico))
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		SendClientMessage(playerid, COLOR_GREY, "* El mecánico se desconectó, se cancelo la operación.");
		return 1;
	}
	if (!response)
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		format(gformat, sizeof gformat, "* %s rechazó el servicio de Hydraulics.", NombreJugador(playerid));
		SendClientMessage(mecanico, 0xEBEBEBFF, gformat);
		SendClientMessage(playerid, 0xEBEBEBFF, "* Rechazaste el servicio de Hydraulics.");
		return 1;
	}
	if (GetPlayerCash(playerid) < costo)
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		format(gformat, sizeof gformat, "* No tienes suficiente dinero ($%s).", diner_coma(costo));
		SendClientMessage(playerid, COLOR_GREY, gformat);
		SendClientMessage(mecanico, COLOR_GREY, "* Se canceló la oferta, porque el cliente no tiene dinero suficiente.");
		return 1;
	}
	AddVehicleComponent(vehicleid, 1087);
	if (EsteVehEs(playerid, vehicleid) > -1) { ActualizarMods(EsteVehEs(playerid, vehicleid)); }
	format(gformat, sizeof gformat, "coloca Hydraulics al vehículo %s de %s.", GetVehicleName(vehicleid), NombreJugador(playerid));
	meuwu(mecanico, gformat);
	GivePlayerCash(playerid, -costo, "servicio hydraulics");
	format(gformat, sizeof gformat, "Ganaste $%s del servicio de Hydraulics de %s.", diner_coma(costo/2), NombreJugador(playerid));
	SendClientMessage(mecanico, COLOR_GREEN, gformat);
	GivePlayerCash(mecanico, costo/2, "servicio hydraulics");
	if (InfoNegocio[neg][nVenta] != 0)
	{
		InfoNegocio[neg][nDinero] += costo/2;
		guardar_int_mysql("negocios", "BolosUwU", InfoNegocio[neg][nID_sql], InfoNegocio[neg][nDinero]);
	}
	TallerMecanico[playerid] = -1;
	TallerCosto[playerid] = 0;
	ID_Taller_Cobro[playerid] = -1;
	ID_Veh_Cobro[playerid] = 0;
	return 1;
}

CMD:nitro(playerid, params[])
{
	new neg = EnNegocio(playerid);
	if (neg == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ningún negocio.");
	if (InfoNegocio[neg][nTipo] != 9) return SendClientMessage(playerid, COLOR_GREY, "* Este negocio no es un taller mecánico.");
 	if (PermisosContrato(playerid, neg) == 0) return SendClientMessage(playerid, COLOR_GREY, "No trabajas en este taller mecánico.");
	new playerid2, costo, gformat[190];
	if (sscanf(params, "ud", playerid2, costo)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /nitro (JugadorID) (Precio)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador desconectado.");
	if (!CercaDelMarica(5.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador muy lejos de ti.");
	if (TallerMecanico[playerid2] != -1) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador tiene una oferta de servicio mecánico pendiente.");
	if (GetPlayerState(playerid2) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador no esta dentro de un vehículo como conductor.");
	new vehicleid = GetPlayerVehicleID(playerid2);
	if (Valid_Vehicle_Nitro(GetVehicleModel(vehicleid)) == 0) return SendClientMessage(playerid, COLOR_GREY, "* Ese vehículo no admite componente nitro.");
	if (tiene_componente(1008, vehicleid) != 0) return SendClientMessage(playerid, COLOR_GREY, "* Ese vehículo ya tiene componente nitro.");
	new minimocost = MinimoPrecioTaller(6), maximocost = InfoNegocio[neg][nPrecioNitro];
	if (costo < minimocost || costo > maximocost)
	{
		format(gformat, sizeof gformat, "El cobro mínimo por nitro es de $%s y el máximo de $%s.", diner_coma(minimocost), diner_coma(maximocost));
		SendClientMessage(playerid, COLOR_RED, gformat);
		return 1;
	}
	TallerMecanico[playerid2] = playerid;
	TallerCosto[playerid2] = costo;
	ID_Taller_Cobro[playerid2] = neg;
	ID_Veh_Cobro[playerid2] = vehicleid;
	new gdsdu[512];
	format(gdsdu, sizeof gdsdu, "{00AE57}%s{EBEBEB} te ofrece nitro para tu {00AE57}%s{EBEBEB} por {00CC00}$%s{EBEBEB}\n\
	Si quieres proceder con el servicio presiona '{FFFF00}continuar{EBEBEB}'\n", NombreJugador(playerid), GetVehicleName(vehicleid), diner_coma(costo));
	Dialog_Show(playerid2, VentaNitro, DIALOG_STYLE_MSGBOX, "Nitrous x5", gdsdu, "Continuar", "Salir");
	return 1;
}

Dialog:VentaNitro(playerid, response, listitem, inputtext[])
{
	new mecanico = TallerMecanico[playerid], costo = TallerCosto[playerid], neg = ID_Taller_Cobro[playerid], vehicleid = ID_Veh_Cobro[playerid], gformat[234];
	if (!IsPlayerConnectedEx(mecanico))
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		SendClientMessage(playerid, COLOR_GREY, "* El mecánico se desconectó, se cancelo la operación.");
		return 1;
	}
	if (!response)
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		format(gformat, sizeof gformat, "* %s rechazó el servicio de nitro.", NombreJugador(playerid));
		SendClientMessage(mecanico, 0xEBEBEBFF, gformat);
		SendClientMessage(playerid, 0xEBEBEBFF, "* Rechazaste el servicio de nitro.");
		return 1;
	}
	if (GetPlayerCash(playerid) < costo)
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		format(gformat, sizeof gformat, "* No tienes suficiente dinero ($%s).", diner_coma(costo));
		SendClientMessage(playerid, COLOR_GREY, gformat);
		SendClientMessage(mecanico, COLOR_GREY, "* Se canceló la oferta, porque el cliente no tiene dinero suficiente.");
		return 1;
	}
	AddVehicleComponent(vehicleid, 1008);
	if (EsteVehEs(playerid, vehicleid) > -1) { ActualizarMods(EsteVehEs(playerid, vehicleid)); }
	format(gformat, sizeof gformat, "coloca Nitrous x5 al vehículo %s de %s.", GetVehicleName(vehicleid), NombreJugador(playerid));
	meuwu(mecanico, gformat);
	GivePlayerCash(playerid, -costo, "servicio nitro");
	format(gformat, sizeof gformat, "Ganaste $%s del servicio de Nitrous x5 de %s.", diner_coma(costo/2), NombreJugador(playerid));
	SendClientMessage(mecanico, COLOR_GREEN, gformat);
	GivePlayerCash(mecanico, costo/2, "servicio nitro");
	if (InfoNegocio[neg][nVenta] != 0)
	{
		InfoNegocio[neg][nDinero] += costo/2;
		guardar_int_mysql("negocios", "BolosUwU", InfoNegocio[neg][nID_sql], InfoNegocio[neg][nDinero]);
	}
	TallerMecanico[playerid] = -1;
	TallerCosto[playerid] = 0;
	ID_Taller_Cobro[playerid] = -1;
	ID_Veh_Cobro[playerid] = 0;
	return 1;
}

tiene_componente(componente, vehicleid)
{
	new id = verificar_id_vehiculo(vehicleid);
	if (id == -1) return 0;
	Loop(x, MAX_MODIFICACIONES, 0)
	{
		if (InfoVehiculo[id][vModificacion][x] == componente)
			return 1;
	}
	return 0;
}

CMD:llantas(playerid, params[])
{
	new neg = EnNegocio(playerid);
	if (neg == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ningún negocio.");
	if (InfoNegocio[neg][nTipo] != 9) return SendClientMessage(playerid, COLOR_GREY, "* Este negocio no es un taller mecánico.");
 	if (PermisosContrato(playerid, neg) == 0) return SendClientMessage(playerid, COLOR_GREY, "No trabajas en este taller mecánico.");
	new playerid2, costo, gformat[190];
	if (sscanf(params, "ud", playerid2, costo)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /llantas (JugadorID) (Precio)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador desconectado.");
	if (!CercaDelMarica(5.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador muy lejos de ti.");
	if (TallerMecanico[playerid2] != -1) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador tiene una oferta de servicio mecánico pendiente.");
	if (GetPlayerState(playerid2) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador no esta dentro de un vehículo como conductor.");
	new vehicleid = GetPlayerVehicleID(playerid2);
	if (EstaEnAvion(vehicleid) || EstaEnBote(vehicleid) || EnMotos_Bicis(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "* No puedes colocar llantas en ese tipo de vehículo.");
	new minimocost = MinimoPrecioTaller(5), maximocost = InfoNegocio[neg][nPrecioLlantas];
	if (costo < minimocost || costo > maximocost)
	{
		format(gformat, sizeof gformat, "El cobro mínimo por llantas es de $%s y el máximo de $%s.", diner_coma(minimocost), diner_coma(maximocost));
		SendClientMessage(playerid, COLOR_RED, gformat);
		return 1;
	}
	TallerCliente[playerid] = playerid2;
	TallerMecanico[playerid2] = playerid;
	TallerCosto[playerid2] = costo;
	ID_Taller_Cobro[playerid2] = neg;
	ID_Veh_Cobro[playerid2] = vehicleid;
	Dialog_Show(playerid, Show_LlantasMecanico, DIALOG_STYLE_LIST, "Menú de llantas",
	"- Offroad Wheels\n\
	- Shadow Wheels\n\
	- Mega Wheels\n\
	- Rimshine Wheels\n\
	- Wires Wheels\n\
	- Classic Wheels\n\
	- Twist Wheels\n\
	- Cutter Wheels\n\
	- Stitch Wheels\n\
	- Grove Wheels\n\
	- Import Wheels\n\
	- Dollar Wheels\n\
	- Trance Wheels\n\
	- Atomic Wheels\n\
	- Ahab Wheels\n\
	- Virtual Wheels\n\
	- Access Wheels", "Continuar", "Salir");
	return 1;
}

Dialog:Show_LlantasMecanico(playerid, response, listitem, inputtext[])
{
	new cliente = TallerCliente[playerid];
	new costo = TallerCosto[cliente], vehicleid = ID_Veh_Cobro[cliente], gformat[234];
	if (!IsPlayerConnectedEx(cliente))
	{
		TallerCliente[playerid] = -1;
		SendClientMessage(playerid, COLOR_GREY, "* El cliente se desconectó, se cancelo la operación.");
		return 1;
	}
	if (!response)
	{
		TallerCliente[playerid] = -1;
		TallerMecanico[cliente] = -1;
		TallerCosto[cliente] = 0;
		ID_Taller_Cobro[cliente] = -1;
		ID_Veh_Cobro[cliente] = 0;
		format(gformat, sizeof gformat, "* %s canceló el servicio de las llantas.", NombreJugador(playerid));
		SendClientMessage(cliente, 0xEBEBEBFF, gformat);
		SendClientMessage(playerid, 0xEBEBEBFF, "* Cancelaste el servicio de las llantas.");
		return 1;
	}
	if (GetPlayerCash(cliente) < costo)
	{
		TallerCliente[playerid] = -1;
		TallerMecanico[cliente] = -1;
		TallerCosto[cliente] = 0;
		ID_Taller_Cobro[cliente] = -1;
		ID_Veh_Cobro[cliente] = 0;
		format(gformat, sizeof gformat, "* No tienes suficiente dinero ($%s).", diner_coma(costo));
		SendClientMessage(cliente, COLOR_GREY, gformat);
		SendClientMessage(playerid, COLOR_GREY, "* Se canceló la oferta, porque el cliente no tiene dinero suficiente.");
		return 1;
	}
	new name_llantas[32], rin = -1;
	switch (listitem)
	{
		case 0: rin = 1025, alm(name_llantas, "Offroad Wheels");
		case 1: rin = 1073, alm(name_llantas, "Shadow Wheels");
		case 2: rin = 1074, alm(name_llantas, "Mega Wheels");
		case 3: rin = 1075, alm(name_llantas, "Rimshine Wheels");
		case 4: rin = 1076, alm(name_llantas, "Wires Wheels");
		case 5: rin = 1077, alm(name_llantas, "Classic Wheels");
		case 6: rin = 1078, alm(name_llantas, "Twist Wheels");
		case 7: rin = 1079, alm(name_llantas, "Cutter Wheels");
		case 8: rin = 1080, alm(name_llantas, "Stitch Wheels");
		case 9: rin = 1081, alm(name_llantas, "Grove Wheels");
		case 10: rin = 1082, alm(name_llantas, "Import Wheels");
		case 11: rin = 1083, alm(name_llantas, "Dollar Wheels");
		case 12: rin = 1084, alm(name_llantas, "Trance Wheels");
		case 13: rin = 1085, alm(name_llantas, "Atomic Wheels");
		case 14: rin = 1096, alm(name_llantas, "Ahab Wheels");
		case 15: rin = 1097, alm(name_llantas, "Virtual Wheels");
		case 16: rin = 1098, alm(name_llantas, "Access Wheels");
	}
	if (tiene_componente(rin, vehicleid) != 0)
	{
		TallerCliente[playerid] = -1;
		TallerMecanico[cliente] = -1;
		TallerCosto[cliente] = 0;
		ID_Taller_Cobro[cliente] = -1;
		ID_Veh_Cobro[cliente] = 0;
		SendClientMessage(playerid, COLOR_GREY, "* Ese juego de llantas ya está instalado.");
		return 1;
	}
	TallerColor1[cliente] = listitem;
	new gdsdu[512];
	format(gdsdu, sizeof gdsdu, "{00AE57}%s{EBEBEB} te ofrece llantas '%s' para tu {00AE57}%s{EBEBEB} por {00CC00}$%s{EBEBEB}\n\
	Si quieres proceder con el servicio presiona '{FFFF00}continuar{EBEBEB}'\n", NombreJugador(playerid), name_llantas, GetVehicleName(vehicleid), diner_coma(costo));
	Dialog_Show(cliente, VentaLlantas, DIALOG_STYLE_MSGBOX, "Llantas nuevas", gdsdu, "Continuar", "Salir");
	return 1;
}

Dialog:VentaLlantas(playerid, response, listitem, inputtext[])
{
	new mecanico = TallerMecanico[playerid], costo = TallerCosto[playerid], neg = ID_Taller_Cobro[playerid], vehicleid = ID_Veh_Cobro[playerid], gformat[234];
	if (!IsPlayerConnectedEx(mecanico))
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		SendClientMessage(playerid, COLOR_GREY, "* El mecánico se desconectó, se cancelo la operación.");
		return 1;
	}
	if (!response)
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		format(gformat, sizeof gformat, "* %s rechazó el servicio de llantas.", NombreJugador(playerid));
		SendClientMessage(mecanico, 0xEBEBEBFF, gformat);
		SendClientMessage(playerid, 0xEBEBEBFF, "* Rechazaste el servicio de llantas.");
		return 1;
	}
	if (GetPlayerCash(playerid) < costo)
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		format(gformat, sizeof gformat, "* No tienes suficiente dinero ($%s).", diner_coma(costo));
		SendClientMessage(playerid, COLOR_GREY, gformat);
		SendClientMessage(mecanico, COLOR_GREY, "* Se canceló la oferta, porque el cliente no tiene dinero suficiente.");
		return 1;
	}
	new name_llantas[32], rin = -1;
	switch (TallerColor1[playerid])
	{
		case 0: rin = 1025, alm(name_llantas, "Offroad Wheels");
		case 1: rin = 1073, alm(name_llantas, "Shadow Wheels");
		case 2: rin = 1074, alm(name_llantas, "Mega Wheels");
		case 3: rin = 1075, alm(name_llantas, "Rimshine Wheels");
		case 4: rin = 1076, alm(name_llantas, "Wires Wheels");
		case 5: rin = 1077, alm(name_llantas, "Classic Wheels");
		case 6: rin = 1078, alm(name_llantas, "Twist Wheels");
		case 7: rin = 1079, alm(name_llantas, "Cutter Wheels");
		case 8: rin = 1080, alm(name_llantas, "Stitch Wheels");
		case 9: rin = 1081, alm(name_llantas, "Grove Wheels");
		case 10: rin = 1082, alm(name_llantas, "Import Wheels");
		case 11: rin = 1083, alm(name_llantas, "Dollar Wheels");
		case 12: rin = 1084, alm(name_llantas, "Trance Wheels");
		case 13: rin = 1085, alm(name_llantas, "Atomic Wheels");
		case 14: rin = 1096, alm(name_llantas, "Ahab Wheels");
		case 15: rin = 1097, alm(name_llantas, "Virtual Wheels");
		case 16: rin = 1098, alm(name_llantas, "Access Wheels");
	}
	AddVehicleComponent(vehicleid, rin);
	if (EsteVehEs(playerid, vehicleid) > -1) { ActualizarMods(EsteVehEs(playerid, vehicleid)); }
	format(gformat, sizeof gformat, "coloca %s al vehículo %s de %s.", name_llantas, GetVehicleName(vehicleid), NombreJugador(playerid));
	meuwu(mecanico, gformat);
	GivePlayerCash(playerid, -costo, "servicio llantas");
	format(gformat, sizeof gformat, "Ganaste $%s del servicio de %s de %s.", diner_coma(costo/2), name_llantas, NombreJugador(playerid));
	SendClientMessage(mecanico, COLOR_GREEN, gformat);
	GivePlayerCash(mecanico, costo/2, "servicio llantas");
	if (InfoNegocio[neg][nVenta] != 0)
	{
		InfoNegocio[neg][nDinero] += costo/2;
		guardar_int_mysql("negocios", "BolosUwU", InfoNegocio[neg][nID_sql], InfoNegocio[neg][nDinero]);
	}
	TallerMecanico[playerid] = -1;
	TallerCosto[playerid] = 0;
	ID_Taller_Cobro[playerid] = -1;
	ID_Veh_Cobro[playerid] = 0;
	return 1;
}

CMD:gasolina(playerid, params[])
{
 	new neg = IsPlayerContrato(playerid, 9);
	if (neg == -1) return SendClientMessage(playerid, COLOR_GREY, "No trabajas en ningún taller mecánico.");
	new playerid2, costo, gformat[190];
	if (sscanf(params, "ud", playerid2, costo)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /gasolina (JugadorID) (Precio)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador desconectado.");
	if (!CercaDelMarica(5.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador muy lejos de ti.");
	if (TallerMecanico[playerid2] != -1) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador tiene una oferta de servicio mecánico pendiente.");
	if (GetPlayerState(playerid2) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador no esta dentro de un vehículo como conductor.");
	new vehicleid = GetPlayerVehicleID(playerid2);
	if (veh_gasolina[vehicleid] >= 199) return SendClientMessage(playerid, COLOR_GREY, "* El tanque de gasolina del vehículo no aguanta más de 200 litros.");
	new minimocost = MinimoPrecioTaller(4), maximocost = InfoNegocio[neg][nPrecioGasolina];
	if (costo < minimocost || costo > maximocost)
	{
		format(gformat, sizeof gformat, "El cobro mínimo por gasolina es de $%s y el máximo de $%s.", diner_coma(minimocost), diner_coma(maximocost));
		SendClientMessage(playerid, COLOR_RED, gformat);
		return 1;
	}
	TallerMecanico[playerid2] = playerid;
	TallerCosto[playerid2] = costo;
	ID_Taller_Cobro[playerid2] = neg;
	ID_Veh_Cobro[playerid2] = vehicleid;
	new gdsdu[512];
	format(gdsdu, sizeof gdsdu, "{00AE57}%s{EBEBEB} te ofrece gasolina para tu {00AE57}%s{EBEBEB} por {00CC00}$%s{EBEBEB}\n\
	Si quieres proceder con el servicio presiona '{FFFF00}continuar{EBEBEB}'\n", NombreJugador(playerid), GetVehicleName(vehicleid), diner_coma(costo));
	Dialog_Show(playerid2, VentaGasolina, DIALOG_STYLE_MSGBOX, "Gasolina", gdsdu, "Continuar", "Salir");
	return 1;
}

Dialog:VentaGasolina(playerid, response, listitem, inputtext[])
{
	new mecanico = TallerMecanico[playerid], costo = TallerCosto[playerid], neg = ID_Taller_Cobro[playerid], vehicleid = ID_Veh_Cobro[playerid], gformat[234];
	if (!IsPlayerConnectedEx(mecanico))
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		SendClientMessage(playerid, COLOR_GREY, "* El mecánico se desconectó, se cancelo la operación.");
		return 1;
	}
	if (!response)
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		format(gformat, sizeof gformat, "* %s rechazó la gasolina.", NombreJugador(playerid));
		SendClientMessage(mecanico, 0xEBEBEBFF, gformat);
		SendClientMessage(playerid, 0xEBEBEBFF, "* Rechazaste la gasolina.");
		return 1;
	}
	if (GetPlayerCash(playerid) < costo)
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		format(gformat, sizeof gformat, "* No tienes suficiente dinero ($%s).", diner_coma(costo));
		SendClientMessage(playerid, COLOR_GREY, gformat);
		SendClientMessage(mecanico, COLOR_GREY, "* Se canceló la oferta, porque el cliente no tiene dinero suficiente.");
		return 1;
	}
	veh_gasolina[vehicleid] = 200;
	Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] == vehicleid)
	{
		InfoVehiculo[v][vGasolina] = veh_gasolina[vehicleid];
		guardar_int_mysql("vehiculos", "Gasolina", InfoVehiculo[v][vID_sql], InfoVehiculo[v][vGasolina]);
		break;
	}
	format(gformat, sizeof gformat, "llena de combustible el vehículo %s de %s.", GetVehicleName(vehicleid), NombreJugador(playerid));
	meuwu(mecanico, gformat);
	GivePlayerCash(playerid, -costo, "servicio gasolina");
	format(gformat, sizeof gformat, "Ganaste $%s del servicio de gasolina (200 litros) de %s.", diner_coma(costo/2), NombreJugador(playerid));
	SendClientMessage(mecanico, COLOR_GREEN, gformat);
	GivePlayerCash(mecanico, costo/2, "servicio gasolina");
	if (InfoNegocio[neg][nVenta] != 0)
	{
		InfoNegocio[neg][nDinero] += costo/2;
		guardar_int_mysql("negocios", "BolosUwU", InfoNegocio[neg][nID_sql], InfoNegocio[neg][nDinero]);
	}
	TallerMecanico[playerid] = -1;
	TallerCosto[playerid] = 0;
	ID_Taller_Cobro[playerid] = -1;
	ID_Veh_Cobro[playerid] = 0;
	return 1;
}

CMD:reparar(playerid, params[])
{
 	new neg = IsPlayerContrato(playerid, 9);
	if (neg == -1) return SendClientMessage(playerid, COLOR_GREY, "No trabajas en ningún taller mecánico.");
	new playerid2, costo, gformat[190];
	if (sscanf(params, "ud", playerid2, costo)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /reparar (JugadorID) (Precio)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador desconectado.");
	if (!CercaDelMarica(5.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador muy lejos de ti.");
	if (TallerMecanico[playerid2] != -1) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador tiene una oferta de servicio mecánico pendiente.");
	if (GetPlayerState(playerid2) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador no esta dentro de un vehículo como conductor.");
	new vehicleid = GetPlayerVehicleID(playerid2), Float: cvida;
	GetVehicleHealth(vehicleid, cvida);
	if (cvida >= 999.0) return SendClientMessage(playerid, COLOR_GREY, "* Ese vehículo no necesita reparación.");
	new minimocost = MinimoPrecioTaller(3), maximocost = InfoNegocio[neg][nPrecioReparacion];
	if (costo < minimocost || costo > maximocost)
	{
		format(gformat, sizeof gformat, "El cobro mínimo por reparación es de $%s y el máximo de $%s.", diner_coma(minimocost), diner_coma(maximocost));
		SendClientMessage(playerid, COLOR_RED, gformat);
		return 1;
	}
	TallerMecanico[playerid2] = playerid;
	TallerCosto[playerid2] = costo;
	ID_Taller_Cobro[playerid2] = neg;
	ID_Veh_Cobro[playerid2] = vehicleid;
	new gdsdu[512];
	format(gdsdu, sizeof gdsdu, "{00AE57}%s{EBEBEB} te ofrece reparar tu {00AE57}%s{EBEBEB} por {00CC00}$%s{EBEBEB}\n\
	Si quieres proceder con el servicio presiona '{FFFF00}continuar{EBEBEB}'\n", NombreJugador(playerid), GetVehicleName(vehicleid), diner_coma(costo));
	Dialog_Show(playerid2, VentaReparacion, DIALOG_STYLE_MSGBOX, "Reparación", gdsdu, "Continuar", "Salir");
	return 1;
}

Dialog:VentaReparacion(playerid, response, listitem, inputtext[])
{
	new mecanico = TallerMecanico[playerid], costo = TallerCosto[playerid], neg = ID_Taller_Cobro[playerid], vehicleid = ID_Veh_Cobro[playerid], gformat[234];
	if (!IsPlayerConnectedEx(mecanico))
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		SendClientMessage(playerid, COLOR_GREY, "* El mecánico se desconectó, se cancelo la operación.");
		return 1;
	}
	if (!response)
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		format(gformat, sizeof gformat, "* %s rechazó la reparación.", NombreJugador(playerid));
		SendClientMessage(mecanico, 0xEBEBEBFF, gformat);
		SendClientMessage(playerid, 0xEBEBEBFF, "* Rechazaste la reparación.");
		return 1;
	}
	if (GetPlayerCash(playerid) < costo)
	{
		TallerMecanico[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		format(gformat, sizeof gformat, "* No tienes suficiente dinero ($%s).", diner_coma(costo));
		SendClientMessage(playerid, COLOR_GREY, gformat);
		SendClientMessage(mecanico, COLOR_GREY, "* Se canceló la oferta, porque el cliente no tiene dinero suficiente.");
		return 1;
	}
	RepairVehicle(vehicleid);
	if (GetVehicleModel(vehicleid) == 528 || GetVehicleModel(vehicleid) == 427) SetVehicleHealth(vehicleid, 5000.0);
	else SetVehicleHealth(vehicleid, 1000.0);
	format(gformat, sizeof gformat, "repara el vehículo %s de %s.", GetVehicleName(vehicleid), NombreJugador(playerid));
	meuwu(mecanico, gformat);
	GivePlayerCash(playerid, -costo, "servicio reparación");
	format(gformat, sizeof gformat, "Ganaste $%s del servicio de reparación de %s.", diner_coma(costo/2), NombreJugador(playerid));
	SendClientMessage(mecanico, COLOR_GREEN, gformat);
	GivePlayerCash(mecanico, costo/2, "servicio reparación");
	if (InfoNegocio[neg][nVenta] != 0)
	{
		InfoNegocio[neg][nDinero] += costo/2;
		guardar_int_mysql("negocios", "BolosUwU", InfoNegocio[neg][nID_sql], InfoNegocio[neg][nDinero]);
	}
	TallerMecanico[playerid] = -1;
	TallerCosto[playerid] = 0;
	ID_Taller_Cobro[playerid] = -1;
	ID_Veh_Cobro[playerid] = 0;
	return 1;
}

CMD:pintura(playerid, params[])
{
	new neg = EnNegocio(playerid);
	if (neg == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ningún negocio.");
	if (InfoNegocio[neg][nTipo] != 9) return SendClientMessage(playerid, COLOR_GREY, "* Este negocio no es un taller mecánico.");
 	if (PermisosContrato(playerid, neg) == 0) return SendClientMessage(playerid, COLOR_GREY, "No trabajas en este taller mecánico.");
	new playerid2, color1, color2, costo, gformat[190];
	if (sscanf(params, "uddd", playerid2, color1, color2, costo)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /pintura (JugadorID) (Color1) (Color2) (Precio)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador desconectado.");
	if (!CercaDelMarica(5.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador muy lejos de ti.");
	if (TallerMecanico[playerid2] != -1) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador tiene una oferta de servicio mecánico pendiente.");
	if (GetPlayerState(playerid2) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador no esta dentro de un vehículo como conductor.");
	new vehicleid = GetPlayerVehicleID(playerid2);
	if (vehiculos_legales(vehicleid) != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes pintar vehículos de facciones legales.");
	new id = verificar_id_vehiculo(vehicleid);
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* Ese vehículo no es compatible para cambiar color.");
	if (color1 < 0 || color1 > 254) { SendClientMessage(playerid, COLOR_GREY, "* El color 1 no puede superar el ID 254."); return 1; }
	if (color2 < 0 || color2 > 254) { SendClientMessage(playerid, COLOR_GREY, "* El color 2 no puede superar el ID 254."); return 1; }
	new minimocost = MinimoPrecioTaller(1), maximocost = InfoNegocio[neg][nPrecioPintura];
	if (costo < minimocost || costo > maximocost)
	{
		format(gformat, sizeof gformat, "El cobro mínimo por pintura es de $%s y el máximo de $%s.", diner_coma(minimocost), diner_coma(maximocost));
		SendClientMessage(playerid, COLOR_RED, gformat);
		return 1;
	}
	TallerMecanico[playerid2] = playerid;
	TallerColor1[playerid2] = color1;
	TallerColor2[playerid2] = color2;
	TallerCosto[playerid2] = costo;
	ID_Taller_Cobro[playerid2] = neg;
	ID_Veh_Cobro[playerid2] = vehicleid;
	new gdsdu[512];
	format(gdsdu, sizeof gdsdu, "{00AE57}%s{EBEBEB} te ofrece cambiar la pintura (%d | %d) de tu {00AE57}%s{EBEBEB} por {00CC00}$%s{EBEBEB}\n\
	Si quieres proceder con el servicio presiona '{FFFF00}continuar{EBEBEB}'\n", NombreJugador(playerid), color1, color2, InfoVehiculo[id][vNombre], diner_coma(costo));
	Dialog_Show(playerid2, VentaPintura, DIALOG_STYLE_MSGBOX, "Cambio de pintura", gdsdu, "Continuar", "Salir");
	return 1;
}

Dialog:VentaPintura(playerid, response, listitem, inputtext[])
{
	new mecanico = TallerMecanico[playerid], color1 = TallerColor1[playerid], color2 = TallerColor2[playerid], costo = TallerCosto[playerid], neg = ID_Taller_Cobro[playerid];
	new vehicleid = ID_Veh_Cobro[playerid], gformat[234];
	if (vehiculos_legales(vehicleid) != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes pintar vehículos de facciones legales.");
	new id = verificar_id_vehiculo(vehicleid);
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* Ese vehículo no es compatible para cambiar color.");
	if (!IsPlayerConnectedEx(mecanico))
	{
		TallerMecanico[playerid] = -1;
		TallerColor1[playerid] = -1;
		TallerColor2[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		SendClientMessage(playerid, COLOR_GREY, "* El mecánico se desconectó, se cancelo la operación.");
		return 1;
	}
	if (!response)
	{
		TallerMecanico[playerid] = -1;
		TallerColor1[playerid] = -1;
		TallerColor2[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		format(gformat, sizeof gformat, "* %s rechazó el cambio de pintura.", NombreJugador(playerid));
		SendClientMessage(mecanico, 0xEBEBEBFF, gformat);
		SendClientMessage(playerid, 0xEBEBEBFF, "* Rechazaste el cambio de pintura.");
		return 1;
	}
	if (GetPlayerCash(playerid) < costo)
	{
		TallerMecanico[playerid] = -1;
		TallerColor1[playerid] = -1;
		TallerColor2[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		format(gformat, sizeof gformat, "* No tienes suficiente dinero ($%s).", diner_coma(costo));
		SendClientMessage(playerid, COLOR_GREY, gformat);
		SendClientMessage(mecanico, COLOR_GREY, "* Se canceló la oferta, porque el cliente no tiene dinero suficiente.");
		return 1;
	}
	InfoVehiculo[id][vColor_1] = color1;
	InfoVehiculo[id][vColor_2] = color2;
	mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE vehiculos SET Color_1 = '%d', Color_2 = '%d' WHERE ID = '%d'", InfoVehiculo[id][vColor_1], InfoVehiculo[id][vColor_2], InfoVehiculo[id][vID_sql]);
	mysql_tquery(DBInsanity, gformat);
	format(gformat, sizeof gformat, "cambió la pintura del %s de %s.", InfoVehiculo[id][vNombre], NombreJugador(playerid));
	meuwu(mecanico, gformat);
	ChangeVehicleColor(vehicleid, color1, color2);
	GivePlayerCash(playerid, -costo, "servicio pintura");
	format(gformat, sizeof gformat, "Ganaste $%s del servicio de pintura de %s.", diner_coma(costo/2), NombreJugador(playerid));
	SendClientMessage(mecanico, COLOR_GREEN, gformat);
	GivePlayerCash(mecanico, costo/2, "servicio pintura");
	if (InfoNegocio[neg][nVenta] != 0)
	{
		InfoNegocio[neg][nDinero] += costo/2;
		guardar_int_mysql("negocios", "BolosUwU", InfoNegocio[neg][nID_sql], InfoNegocio[neg][nDinero]);
	}
	TallerMecanico[playerid] = -1;
	TallerColor1[playerid] = -1;
	TallerColor2[playerid] = -1;
	TallerCosto[playerid] = 0;
	ID_Taller_Cobro[playerid] = -1;
	ID_Veh_Cobro[playerid] = 0;
	return 1;
}

CMD:paintjob(playerid, params[])
{
	new neg = EnNegocio(playerid);
	if (neg == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ningún negocio.");
	if (InfoNegocio[neg][nTipo] != 9) return SendClientMessage(playerid, COLOR_GREY, "* Este negocio no es un taller mecánico.");
 	if (PermisosContrato(playerid, neg) == 0) return SendClientMessage(playerid, COLOR_GREY, "No trabajas en este taller mecánico.");
	new playerid2, color1, costo, gformat[190];
	if (sscanf(params, "udd", playerid2, color1, costo)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /paintjob (JugadorID) (PaintJob [3 para remover]) (Precio)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador desconectado.");
	if (!CercaDelMarica(5.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador muy lejos de ti.");
	if (TallerMecanico[playerid2] != -1) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador tiene una oferta de servicio mecánico pendiente.");
	if (GetPlayerState(playerid2) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador no esta dentro de un vehículo como conductor.");
	new vehicleid = GetPlayerVehicleID(playerid2);
	if (vehiculos_legales(vehicleid) != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes pintar vehículos de facciones legales.");
	new id = verificar_id_vehiculo(vehicleid);
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* Ese vehículo no es compatible para cambiar color.");
	if (color1 < 0 || color1 > 6) { SendClientMessage(playerid, COLOR_GREY, "* El paintjob no puede superar el ID 6."); return 1; }
	if (IsVehiclePaintjobCompatible(InfoVehiculo[id][vModelo]) == 0) return SendClientMessage(playerid, COLOR_GREY, "* Ese vehículo no es compatible con paintjob.");
	new minimocost = MinimoPrecioTaller(2), maximocost = InfoNegocio[neg][nPrecioPaintJob];
	if (costo < minimocost || costo > maximocost)
	{
		format(gformat, sizeof gformat, "El cobro mínimo por paintjob es de $%s y el máximo de $%s.", diner_coma(minimocost), diner_coma(maximocost));
		SendClientMessage(playerid, COLOR_RED, gformat);
		return 1;
	}
	TallerMecanico[playerid2] = playerid;
	TallerColor1[playerid2] = color1;
	TallerCosto[playerid2] = costo;
	ID_Taller_Cobro[playerid2] = neg;
	ID_Veh_Cobro[playerid2] = vehicleid;
	new gdsdu[512];
	format(gdsdu, sizeof gdsdu, "{00AE57}%s{EBEBEB} te ofrece cambiar el paitjob (%d) de tu {00AE57}%s{EBEBEB} por {00CC00}$%s{EBEBEB}\n\
	Si quieres proceder con el servicio presiona '{FFFF00}continuar{EBEBEB}'\n", NombreJugador(playerid), color1, InfoVehiculo[id][vNombre], diner_coma(costo));
	Dialog_Show(playerid2, VentaPaintJob, DIALOG_STYLE_MSGBOX, "Cambio de paintjob", gdsdu, "Continuar", "Salir");
	return 1;
}

IsVehiclePaintjobCompatible(model)
{
	switch(model)
	{
		case 483: return 1;
		case 534: return 3;
		case 535: return 3;
		case 536: return 3;
		case 558: return 3;
		case 559: return 3;
		case 560: return 3;
		case 561: return 3;
		case 562: return 3;
		case 565: return 3;
		case 567: return 3;
		case 575: return 2;
		case 576: return 3;

		default:
			return 0;
	}

	return 0;
}

Dialog:VentaPaintJob(playerid, response, listitem, inputtext[])
{
	new mecanico = TallerMecanico[playerid], color1 = TallerColor1[playerid], costo = TallerCosto[playerid], neg = ID_Taller_Cobro[playerid];
	new vehicleid = ID_Veh_Cobro[playerid], gformat[234];
	if (vehiculos_legales(vehicleid) != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes pintar vehículos de facciones legales.");
	new id = verificar_id_vehiculo(vehicleid);
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* Ese vehículo no es compatible para cambiar color.");
	if (!IsPlayerConnectedEx(mecanico))
	{
		TallerMecanico[playerid] = -1;
		TallerColor1[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		SendClientMessage(playerid, COLOR_GREY, "* El mecánico se desconectó, se cancelo la operación.");
		return 1;
	}
	if (!response)
	{
		TallerMecanico[playerid] = -1;
		TallerColor1[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		format(gformat, sizeof gformat, "* %s rechazó el cambio de paintjob.", NombreJugador(playerid));
		SendClientMessage(mecanico, 0xEBEBEBFF, gformat);
		SendClientMessage(playerid, 0xEBEBEBFF, "* Rechazaste el cambio de paintjob.");
		return 1;
	}
	if (GetPlayerCash(playerid) < costo)
	{
		TallerMecanico[playerid] = -1;
		TallerColor1[playerid] = -1;
		TallerCosto[playerid] = 0;
		ID_Taller_Cobro[playerid] = -1;
		ID_Veh_Cobro[playerid] = 0;
		format(gformat, sizeof gformat, "* No tienes suficiente dinero ($%s).", diner_coma(costo));
		SendClientMessage(playerid, COLOR_GREY, gformat);
		SendClientMessage(mecanico, COLOR_GREY, "* Se canceló la oferta, porque el cliente no tiene dinero suficiente.");
		return 1;
	}
	InfoVehiculo[id][vPaintJob] = color1;
	guardar_int_mysql("vehiculos", "PaintJob", InfoVehiculo[id][vID_sql], InfoVehiculo[id][vPaintJob]);
	ChangeVehiclePaintjob(vehicleid, color1);
	format(gformat, sizeof gformat, "cambió el paintjob del %s de %s.", InfoVehiculo[id][vNombre], NombreJugador(playerid));
	meuwu(mecanico, gformat);
	GivePlayerCash(playerid, -costo, "servicio paintjob");
	format(gformat, sizeof gformat, "Ganaste $%s del servicio de paintjob de %s.", diner_coma(costo/2), NombreJugador(playerid));
	SendClientMessage(mecanico, COLOR_GREEN, gformat);
	GivePlayerCash(mecanico, costo/2, "servicio paintjob");
	if (InfoNegocio[neg][nVenta] != 0)
	{
		InfoNegocio[neg][nDinero] += costo/2;
		guardar_int_mysql("negocios", "BolosUwU", InfoNegocio[neg][nID_sql], InfoNegocio[neg][nDinero]);
	}
	TallerMecanico[playerid] = -1;
	TallerColor1[playerid] = -1;
	TallerCosto[playerid] = 0;
	ID_Taller_Cobro[playerid] = -1;
	ID_Veh_Cobro[playerid] = 0;
	return 1;
}

new IDOpcionPrecio[MAX_PLAYERS];
CMD:cambiarprecios(playerid)
{
	new id = EnNegocio(playerid);
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ningún negocio.");
	if (LlavesNegocio(playerid, id) == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes las llaves de este negocio.");
	if (InfoNegocio[id][nTipo] != 9) return SendClientMessage(playerid, COLOR_GREY, "* Tu negocio no es un taller mecánico.");
	new dialog_taller[2056], gformat[256];
	strcat(dialog_taller, "Servicio\tCosto máximo\n");
	format(gformat, sizeof gformat, "{EFEFEF}Pintura\t{00CC00}$%s\n", diner_coma(InfoNegocio[id][nPrecioPintura]));
	strcat(dialog_taller, gformat);
	format(gformat, sizeof gformat, "{EFEFEF}PaintJob\t{00CC00}$%s\n", diner_coma(InfoNegocio[id][nPrecioPaintJob]));
	strcat(dialog_taller, gformat);
	format(gformat, sizeof gformat, "{EFEFEF}Reparación\t{00CC00}$%s\n", diner_coma(InfoNegocio[id][nPrecioReparacion]));
	strcat(dialog_taller, gformat);
	format(gformat, sizeof gformat, "{EFEFEF}Gasolina\t{00CC00}$%s\n", diner_coma(InfoNegocio[id][nPrecioGasolina]));
	strcat(dialog_taller, gformat);
	format(gformat, sizeof gformat, "{EFEFEF}Llantas\t{00CC00}$%s\n", diner_coma(InfoNegocio[id][nPrecioLlantas]));
	strcat(dialog_taller, gformat);
	format(gformat, sizeof gformat, "{EFEFEF}Nitro\t{00CC00}$%s\n", diner_coma(InfoNegocio[id][nPrecioNitro]));
	strcat(dialog_taller, gformat);
	format(gformat, sizeof gformat, "{EFEFEF}Hidráulica\t{00CC00}$%s\n", diner_coma(InfoNegocio[id][nPrecioHyd]));
	strcat(dialog_taller, gformat);
	format(gformat, sizeof gformat, "{EFEFEF}Tunning carroceria\t{00CC00}$%s", diner_coma(InfoNegocio[id][nPrecioTuneo]));
	strcat(dialog_taller, gformat);
	Dialog_Show(playerid, ChangePrecioTaller, DIALOG_STYLE_TABLIST_HEADERS, "Precios del taller:", dialog_taller, "Continuar", "Salir");
    IDOpcionPrecio[playerid] = -1;
	return 1;
}

Dialog:ChangePrecioTaller(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new id = EnNegocio(playerid);
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ningún negocio.");
	if (LlavesNegocio(playerid, id) == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes las llaves de este negocio.");
	if (InfoNegocio[id][nTipo] != 9) return SendClientMessage(playerid, COLOR_GREY, "* Tu negocio no es un taller mecánico.");
	new nametip[32], tipo = listitem+1, valor = 0, dialog_precio[512], gtitulo[128];
	switch (tipo)
	{
		case 1: alm(nametip, "Pintura"), valor = InfoNegocio[id][nPrecioPintura];
		case 2: alm(nametip, "PaintJob"), valor = InfoNegocio[id][nPrecioPaintJob];
		case 3: alm(nametip, "Reparación"), valor = InfoNegocio[id][nPrecioReparacion];
		case 4: alm(nametip, "Gasolina"), valor = InfoNegocio[id][nPrecioGasolina];
		case 5: alm(nametip, "Llantas"), valor = InfoNegocio[id][nPrecioLlantas];
		case 6: alm(nametip, "Nitro"), valor = InfoNegocio[id][nPrecioNitro];
		case 7: alm(nametip, "Hidráulica"), valor = InfoNegocio[id][nPrecioHyd];
		case 8: alm(nametip, "Tunning carroceria"), valor = InfoNegocio[id][nPrecioTuneo];
	}
    IDOpcionPrecio[playerid] = tipo;
	format(dialog_precio, sizeof dialog_precio,
	"{EBEBEB}El precio actual del servicio {00AE57}%s{EBEBEB} es {00CC00}$%s{EBEBEB}\n\n\
	Introduce el nuevo monto $ máximo del servicio.\n", nametip, diner_coma(valor));
	format(gtitulo, sizeof gtitulo, "{EBEBEB}Nuevo precio de {00AE57}%s", nametip);
	Dialog_Show(playerid, Change2PrecioTaller, DIALOG_STYLE_INPUT, gtitulo, dialog_precio, "Continuar", "Volver");
	return 1;
}

Dialog:Change2PrecioTaller(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new id = EnNegocio(playerid);
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ningún negocio.");
	if (LlavesNegocio(playerid, id) == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes las llaves de este negocio.");
	if (InfoNegocio[id][nTipo] != 9) return SendClientMessage(playerid, COLOR_GREY, "* Tu negocio no es un taller mecánico.");
	if (!isnumeric(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo números, vuelve a intentarlo");
	new nametip[32], tipo = IDOpcionPrecio[playerid], valor = strval(inputtext), gformat[320];
	new minimocost = MinimoPrecioTaller(tipo), maximocost = MinimoPrecioTaller(tipo)*3;
	if (valor < minimocost || valor > maximocost)
	{
	    format(gformat, sizeof gformat, "Sólo puedes colocar de mínimo $%s y máximo $%s.", diner_coma(minimocost), diner_coma(maximocost));
		SendClientMessage(playerid, COLOR_RED, gformat);
	    return 1;
	}
	switch (tipo)
	{
		case 1: alm(nametip, "Pintura"), InfoNegocio[id][nPrecioPintura] = valor;
		case 2: alm(nametip, "PaintJob"), InfoNegocio[id][nPrecioPaintJob] = valor;
		case 3: alm(nametip, "Reparación"), InfoNegocio[id][nPrecioReparacion] = valor;
		case 4: alm(nametip, "Gasolina"), InfoNegocio[id][nPrecioGasolina] = valor;
		case 5: alm(nametip, "Llantas"), InfoNegocio[id][nPrecioLlantas] = valor;
		case 6: alm(nametip, "Nitro"), InfoNegocio[id][nPrecioNitro] = valor;
		case 7: alm(nametip, "Hidráulica"), InfoNegocio[id][nPrecioHyd] = valor;
		case 8: alm(nametip, "Tunning carroceria"), InfoNegocio[id][nPrecioTuneo] = valor;
	}
	IDOpcionPrecio[playerid] = -1;
	format(gformat, sizeof gformat, "El nuevo costo del servicio {5EAEFF}%s{EBEBEB} es de {00CC00}$%s", nametip, diner_coma(valor));
	SendClientMessage(playerid, 0xEBEBEBFF, gformat);
	ActualizarPrecioNegocio(id);
	return 1;
}

MinimoPrecioTaller(tipo)
{
	new valore = 0;
	switch (tipo)
	{
		case 1: valore = 500;
		case 2: valore = 700;
		case 3: valore = 1000;
		case 4: valore = 200;
		case 5: valore = 4000;
		case 6: valore = 8000;
		case 7: valore = 5000;
		case 8: valore = 12000;
	}
	return valore;
}

CMD:taller(playerid)
{
	new id = EnNegocio(playerid);
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en el interior de ningún negocio.");
	if (InfoNegocio[id][nTipo] != 9) return SendClientMessage(playerid, COLOR_GREY, "* No estás dentro de un taller mecánico.");
	if (CountEmpleados(id) != 0) return SendClientMessageEx(playerid, 0x5EAEFFFF, "* Se encuentran %d mecánicos de este taller conectados, si no ves ninguno en el taller usa /mecanicos.", CountEmpleados(id));
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "* Usted no es el conductor del vehículo.");
	new dialog_taller[1028], gformat[170], reparacion = InfoNegocio[id][nPrecioReparacion], gasolina = InfoNegocio[id][nPrecioGasolina], pintura = InfoNegocio[id][nPrecioPintura];
	strcat(dialog_taller, "Servicio\tPrecio\n");
	new Float: cvida, idcoche = GetPlayerVehicleID(playerid);
	GetVehicleHealth(idcoche, cvida);
	new pagar, Percent_damage = floatround(cvida);
	pagar = (920-Percent_damage);
	//reparacion
	if (pagar <= 0) format(gformat, sizeof gformat, "{EFEFEF}Reparación\t{fff000}no necesita\n");
	else format(gformat, sizeof gformat, "{EFEFEF}Reparación\t{00CC00}$%s\n", diner_coma(reparacion-pagar));
	strcat(dialog_taller, gformat);
	//pintura
	format(gformat, sizeof gformat, "{EFEFEF}Pintura\t{00CC00}$%s\n", diner_coma(pintura));
	strcat(dialog_taller, gformat);
	//gasolina
	if (veh_gasolina[idcoche] >= 200) format(gformat, sizeof gformat, "{EFEFEF}Gasolina: 40 litros\t{fff000}no necesita\n");
	else format(gformat, sizeof gformat, "{EFEFEF}Gasolina: 100 litros\t{00CC00}$%s\n", diner_coma(gasolina));
	strcat(dialog_taller, gformat);
	//indice
	Dialog_Show(playerid, ShowTallerDinamico, DIALOG_STYLE_TABLIST_HEADERS, "Taller dinámico", dialog_taller, "Continuar", "Salir");
	return 1;
}

NoEstaEnTaller(playerid)
{
	new id = EnNegocio(playerid);
	if (id == -1) { SendClientMessage(playerid, COLOR_GREY, "* No estás en el interior de ningún negocio."); return 1; }
	if (InfoNegocio[id][nTipo] != 9) { SendClientMessage(playerid, COLOR_GREY, "* No estás dentro de un taller mecánico."); return 1; }
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) { SendClientMessage(playerid, COLOR_GREY, "* Usted no es el conductor del vehículo."); return 1; }
	return 0;
}

Dialog:ShowTallerDinamico(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	if (NoEstaEnTaller(playerid) == 1) return 1;
	new id = EnNegocio(playerid);
	new vehicleid = GetPlayerVehicleID(playerid), string[190];
	new reparacion = InfoNegocio[id][nPrecioReparacion], gasolina = InfoNegocio[id][nPrecioGasolina], pintura = InfoNegocio[id][nPrecioPintura];
	switch (listitem)
	{
		case 0: //reparación
		{
			new Float: cvida;
			GetVehicleHealth(vehicleid, cvida);
			new pagar, Percent_damage = floatround(cvida);
			if (Percent_damage >= 920) return SendClientMessage(playerid, COLOR_GREY, "* El health (/dl) del vehículo pasa los 920.");
			pagar = (920-Percent_damage);
			if (GetPlayerCash(playerid) < reparacion-pagar) { format(string, sizeof string, "* No tienes suficiente dinero ($%s).", diner_coma(reparacion-pagar)); SendClientMessage(playerid, COLOR_GREY, string); return 1; }
			new cobro = reparacion-pagar;
			RepairVehicle(vehicleid);
			if (GetVehicleModel(vehicleid) == 528 || GetVehicleModel(vehicleid) == 427) SetVehicleHealth(vehicleid, 5000.0);
			else SetVehicleHealth(vehicleid, 920.0);
			GivePlayerCash(playerid, -cobro, "servicio reparación (npc)");
			meuwu(playerid, "paga por la reparación de su vehículo.");
			if (InfoNegocio[id][nVenta] != 0)
			{
				InfoNegocio[id][nDinero] += cobro;
				guardar_int_mysql("negocios", "BolosUwU", InfoNegocio[id][nID_sql], InfoNegocio[id][nDinero]);
			}
		}
		case 1:
		{
			if (GetPlayerCash(playerid) < pintura) { format(string, sizeof string, "* No tienes suficiente dinero ($%s).", diner_coma(pintura)); SendClientMessage(playerid, COLOR_GREY, string); return 1; }
			ShowVehColor(playerid, "", 1); //color
		}
		case 2:
		{
			if (GetPlayerCash(playerid) < gasolina) { format(string, sizeof string, "* No tienes suficiente dinero ($%s).", diner_coma(gasolina)); SendClientMessage(playerid, COLOR_GREY, string); return 1; }
			if (veh_gasolina[vehicleid] >= 199) return SendClientMessage(playerid, COLOR_GREY, "* El tanque de gasolina del vehículo no aguanta más de 200 litros.");
			GivePlayerCash(playerid, -gasolina, "servicio gasolina (npc)");
			veh_gasolina[vehicleid] += 100;
			if (veh_gasolina[vehicleid] >= 200) veh_gasolina[vehicleid] = 200;
			Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] == vehicleid)
			{
				InfoVehiculo[v][vGasolina] = veh_gasolina[vehicleid];
				guardar_int_mysql("vehiculos", "Gasolina", InfoVehiculo[v][vID_sql], InfoVehiculo[v][vGasolina]);
				break;
			}
			meuwu(playerid, "paga por el combustible de su vehículo");
			if (InfoNegocio[id][nVenta] != 0)
			{
				InfoNegocio[id][nDinero] += gasolina;
				guardar_int_mysql("negocios", "BolosUwU", InfoNegocio[id][nID_sql], InfoNegocio[id][nDinero]);
			}
		}
	}
	return 1;
}

ShowVehColor(playerid, msg[] = "", color)
{
	if (NoEstaEnTaller(playerid) == 1) return 1;
	new color_string[3256];
	if (strlen(msg)) format(color_string, sizeof(color_string), "{E74C3C}%s\n\n", msg);
	for(new i; i < sizeof(ColorList); i++) format(color_string, sizeof(color_string), "%s{%06x}%03d %s", color_string, ColorList[i] >>> 8, i, ((i+1) % 10 == 0) ? ("\n") : (""));
	if (color == 1) Dialog_Show(playerid, Change1ColorVeh, DIALOG_STYLE_INPUT, "{FFFFFF}Escoge el {3498DB}color UNO", color_string, "Continuar", "Salir");
	else if (color == 2)  Dialog_Show(playerid, Change2ColorVeh, DIALOG_STYLE_INPUT, "{FFFFFF}Escoge el {00cc00}color DOS", color_string, "Continuar", "Volver");
	return 1;
}

new colorvehselec[MAX_PLAYERS];

Dialog:Change1ColorVeh(playerid, response, listitem, inputtext[])
{
	if (NoEstaEnTaller(playerid) == 1) return 1;
	if (!response) return 1;
	new id = EnNegocio(playerid);
	new pintura = InfoNegocio[id][nPrecioPintura], string[170];
	if (GetPlayerCash(playerid) < pintura) { format(string, sizeof string, "* No tienes suficiente dinero ($%s).", diner_coma(pintura)); SendClientMessage(playerid, COLOR_GREY, string); return 1; }
	if (!isnumeric(inputtext)) return ShowVehColor(playerid, "ID del color inválido.", 1);
	new color = strval(inputtext);
	if(!(0 <= color <= sizeof(ColorList)-1)) return ShowVehColor(playerid, "ID del color inválido.", 1);
	colorvehselec[playerid] = color;
	ShowVehColor(playerid, "", 2);
	return 1;
}

Dialog:Change2ColorVeh(playerid, response, listitem, inputtext[])
{
	if (NoEstaEnTaller(playerid) == 1) return 1;
	if (!response) return ShowVehColor(playerid, "", 1); //color
	new id = EnNegocio(playerid);
	new pintura = InfoNegocio[id][nPrecioPintura], string[170];
	if (GetPlayerCash(playerid) < pintura) { format(string, sizeof string, "* No tienes suficiente dinero ($%s).", diner_coma(pintura)); SendClientMessage(playerid, COLOR_GREY, string); return 1; }
	if (!isnumeric(inputtext)) return ShowVehColor(playerid, "ID del color inválido.", 2);
	new color1 = colorvehselec[playerid], color2 = strval(inputtext);
	if(!(0 <= color2 <= sizeof(ColorList)-1)) return ShowVehColor(playerid, "ID del color inválido.", 2);
	new vehicleid = GetPlayerVehicleID(playerid);
	ChangeVehicleColor(vehicleid, color1, color2);
	GivePlayerCash(playerid, -pintura, "servicio pintura (npc)");
	SendClientMessage(playerid, ColorList[color1], "** Cambiaste el color del vehículo **");
	Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] == vehicleid)
	{
		InfoVehiculo[v][vColor_1] = color1;
		InfoVehiculo[v][vColor_2] = color2;
		guardar_int_mysql("vehiculos", "Color_1", InfoVehiculo[v][vID_sql], InfoVehiculo[v][vColor_1]);
		guardar_int_mysql("vehiculos", "Color_2", InfoVehiculo[v][vID_sql], InfoVehiculo[v][vColor_2]);
		break;
	}
	ameuwu(playerid, "paga por la pintura de su vehículo");
	if (InfoNegocio[id][nVenta] != 0)
	{
		InfoNegocio[id][nDinero] += pintura;
		guardar_int_mysql("negocios", "BolosUwU", InfoNegocio[id][nID_sql], InfoNegocio[id][nDinero]);
	}
	return 1;
}


CountEmpleados(id)
{
	new count = 0;
	Loop(playerid, MAX_PLAYERS, 0) if (IsPlayerConnectedEx(playerid) && PermisosContrato(playerid, id) != 0)
	{
		count++;
	}
	return count;
}

CMD:botiquin(playerid, params[])
{
	if (no_tiene_manos(playerid, 53) == 0) return 1;
	new playerid2, string[190];
	if (sscanf(params, "u", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /botiquin (JugadorID)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Jugador desconectado.");
	if (!CercaDelMarica(3.5, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "El jugador no está cerca tuyo.");
	if (GetPVarInt(playerid2, "EstaCrack") != 0) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador está en estado herido.");
	if (InfoPersonaje[playerid2][pVida] >= 80) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador no necesita botiquin ahora mismo.");
	if (InfoPersonaje[playerid][pManoDerecha] == 53) InfoPersonaje[playerid][pManoDerechaCant]--;
	else InfoPersonaje[playerid][pManoIzquierdaCant]--;
	ActualizarManos(playerid);
	if (playerid != playerid2)
	{
		TogglePlayerControllable(playerid, false);
		TogglePlayerControllable(playerid2, false);
		ApplyAnimation(playerid, "MEDIC", "CPR", 4.1, 0, 1, 1, 0, 0, 1);
		ApplyAnimation(playerid2, "CRACK", "crckidle2", 4.1, 1, 1, 1, 0, 0, 1);
		SetCameraBehindPlayer(playerid2);
		format(string, sizeof string, "* %s le da primeros auxilios a %s con su botiquin.", NombreJugador(playerid), NombreJugador(playerid2));
		ProxDetector(20.0, playerid, string, 0x1EB032FF, 0x1EB032FF, 0x1EB032FF, 0x1EB032FF, 0x1EB032FF);
	 	SetTimerEx("CurarBotiquin", 8000, false, "ii", playerid, playerid2);
 	}
 	else
 	{
		new Float: health = InfoPersonaje[playerid][pVida];
		if (health >= 50) dar_vida(playerid, 100);
		else dar_vida(playerid, health + 50.0);
		format(string, sizeof string, "* %s se aplica primeros auxilios con su botiquin.", NombreJugador(playerid));
		ProxDetector(20.0, playerid, string, 0x1EB032FF, 0x1EB032FF, 0x1EB032FF, 0x1EB032FF, 0x1EB032FF);
 	}
	return 1;
}
CMD:hpsave(playerid, params[]) return cmd_botiquin(playerid, params);

funcion CurarBotiquin(playerid, playerid2)
{
	TogglePlayerControllable(playerid, true);
	TogglePlayerControllable(playerid2, true);
    ClearAnimations(playerid);
    ClearAnimations(playerid2);
	new Float: health = InfoPersonaje[playerid2][pVida];
	if (health >= 50) dar_vida(playerid2, 100);
	else dar_vida(playerid2, health + 50.0);
	return 1;
}

CMD:teclas(playerid)
{
	SendClientMessage(playerid, -1, "q no voy hacer est0 jajasaldud0sss :vxdxd!!11");
	return 1;
}

CMD:vobjeto(playerid, params[])
{
	if (InfoCuenta[playerid][jVIP] != 3) return SendClientMessage(playerid, COLOR_WHITE, "* Debes ser mínimo VIP gold.");
	new vehicleid;
	if (sscanf(params, "s[32]", params))
	{
		SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /vobjeto (Opción) (VehiculoID)");
		SendClientMessage(playerid, COLOR_WHITE, "Opciones: agregar, editar, borrar");
		return 1;
	}
	if (!strcmp(params, "agregar", true, 7))
	{
		if (sscanf(params, "s[32]i", params, vehicleid)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /vobjeto agregar (VehiculoID)");
		if (vehicleid < 1 || vehicleid > MAX_VEHICLES) return SendClientMessage(playerid, COLOR_GREY, "* Vehículo inválido.");
		if (!GetVehicleModel(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "* Vehículo inválido, intenta con otra ID.");
	 	if (GetDistancePlayerVeh(playerid, vehicleid) >= 6.0) return SendClientMessage(playerid, COLOR_GREY, "* Debes estar al menos 6 metros del vehículo seleccionado.");
 		new id = verificar_id_vehiculo(vehicleid);
		if (id == -1) return SendClientMessage(playerid, 0xebebebff, "* Este vehículo no es dinámico.");
		if (llaves_vehiculo(playerid, vehicleid) == -1) return SendClientMessage(playerid, COLOR_GREY, "* No tienes las llaves de este vehículo.");
		if (CountObjVeh(id) >= 3) return SendClientMessage(playerid, COLOR_GREY, "* No puedes instalar más de tres objetos en tu vehículo siendo VIP Oro.");
		ShowModelSelectionMenuEx(playerid, VehicleFurnObjs, sizeof VehicleFurnObjs, "Elige un objeto", Create_VehObject, 16.0, 0.0, -55.0);
		SetPVarInt(playerid, "FurnVehicleID", id);
	}
	else if (!strcmp(params, "editar", true, 6))
	{
		new slotuwu;
		if (sscanf(params, "s[32]ii", params, vehicleid, slotuwu)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /vobjeto editar (VehiculoID) (Slot)");
		if (vehicleid < 1 || vehicleid > MAX_VEHICLES) return SendClientMessage(playerid, COLOR_GREY, "* Vehículo inválido.");
		if (slotuwu < 1 || slotuwu > 5) return SendClientMessage(playerid, COLOR_GREY, "* Prueba entre 1 - 5.");
		if (!GetVehicleModel(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "* Vehículo inválido, intenta con otra ID.");
	 	if (GetDistancePlayerVeh(playerid, vehicleid) >= 6.0) return SendClientMessage(playerid, COLOR_GREY, "* Debes estar al menos 6 metros del vehículo seleccionado.");
		new id = verificar_id_vehiculo(vehicleid);
		if (id == -1) return SendClientMessage(playerid, 0xebebebff, "* Este vehículo no es dinámico.");
		if (llaves_vehiculo(playerid, vehicleid) == -1) return SendClientMessage(playerid, COLOR_GREY, "* No tienes las llaves de este vehículo.");
		if (CountObjVeh(id) == 0) return SendClientMessage(playerid, COLOR_GREY, "* Este vehículo no tiene ningún objeto agregado.");
		new xdxd = slotuwu-1;
		if (InfoVehiculo[id][vObjModelo][xdxd] == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes nada en ese slot.");
		if (IsValidDynamicObject(InfoVehiculo[id][vTuneo][xdxd])) DestroyDynamicObject(InfoVehiculo[id][vTuneo][xdxd]);
		new Float:X, Float:Y, Float:Z;
		GetPlayerPos(playerid, X, Y, Z);
		new obj = CreatePlayerObject(playerid, InfoVehiculo[id][vObjModelo][xdxd], X+1.0, Y+1.0, Z, 0.0, 0.0, 0.0, 100.0);
		SetPVarInt(playerid, "FurnModelo", InfoVehiculo[id][vObjModelo][xdxd]);
		SetPVarInt(playerid, "FurnObject", obj);
		SetPVarInt(playerid, "EditorMode", 2);
		EditPlayerObject(playerid, obj);
		SetPVarInt(playerid, "FurnVehicleID", id);
		SetPVarInt(playerid, "FurnSlotObj", xdxd);
	}
	else if (!strcmp(params, "borrar", true, 6))
	{
		new slotuwu;
		if (sscanf(params, "s[32]ii", params, vehicleid, slotuwu)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /vobjeto borrar (VehiculoID) (Slot)");
		if (vehicleid < 1 || vehicleid > MAX_VEHICLES) return SendClientMessage(playerid, COLOR_GREY, "* Vehículo inválido.");
		if (slotuwu < 1 || slotuwu > 5) return SendClientMessage(playerid, COLOR_GREY, "* Prueba entre 1 - 5.");
		if (!GetVehicleModel(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "* Vehículo inválido, intenta con otra ID.");
	 	if (GetDistancePlayerVeh(playerid, vehicleid) >= 6.0) return SendClientMessage(playerid, COLOR_GREY, "* Debes estar al menos 6 metros del vehículo seleccionado.");
		new id = verificar_id_vehiculo(vehicleid);
		if (id == -1) return SendClientMessage(playerid, 0xebebebff, "* Este vehículo no es dinámico.");
		if (llaves_vehiculo(playerid, vehicleid) == -1) return SendClientMessage(playerid, COLOR_GREY, "* No tienes las llaves de este vehículo.");
		if (CountObjVeh(id) == 0) return SendClientMessage(playerid, COLOR_GREY, "* Este vehículo no tiene ningún objeto agregado.");
		new xd = slotuwu-1;
		if (InfoVehiculo[id][vObjModelo][xd] == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes nada en ese slot.");
		if (IsValidDynamicObject(InfoVehiculo[id][vTuneo][xd])) DestroyDynamicObject(InfoVehiculo[id][vTuneo][xd]);
		InfoVehiculo[id][vObjModelo][xd] = 0;
		InfoVehiculo[id][vObjPosX][xd] = 0;
		InfoVehiculo[id][vObjPosY][xd] = 0;
		InfoVehiculo[id][vObjPosZ][xd] = 0;
		InfoVehiculo[id][vObjRotX][xd] = 0;
		InfoVehiculo[id][vObjRotY][xd] = 0;
		InfoVehiculo[id][vObjRotZ][xd] = 0;
		new query[1028];
		mysql_format(DBInsanity, query, sizeof query, "UPDATE vehiculos SET ObjModelo_%d = '%d', ObjPosX_%d = '%f', ObjPosY_%d = '%f', ObjPosZ_%d = '%f', ObjRotX_%d = '%f', ObjRotY_%d = '%f', ObjRotZ_%d = '%f' WHERE ID = '%d'",
		xd+1, InfoVehiculo[id][vObjModelo][xd], xd+1, InfoVehiculo[id][vObjPosX][xd], xd+1, InfoVehiculo[id][vObjPosY][xd], xd+1, InfoVehiculo[id][vObjPosZ][xd], xd+1, InfoVehiculo[id][vObjRotX][xd], xd+1, InfoVehiculo[id][vObjRotY][xd], xd+1, InfoVehiculo[id][vObjRotZ][xd], InfoVehiculo[id][vID_sql]);
		mysql_tquery(DBInsanity, query);
	}
	return 1;
}

CountObjVeh(id)
{
	new count = 0;
	Loop(x, 5, 0) if (InfoVehiculo[id][vObjModelo][x] != 0)
	{
		count++;
	}
	return count;
}

CMD:banco(playerid)
{
	if (!IsPlayerInRangeOfPoint(playerid, 3.0, 985.7003, -1171.2474, 24.9037)) return SendClientMessage(playerid, COLOR_GREY, "* No estás en el Banco Central de Los Santos.");
	Dialog_Show(playerid, ShowBanco, DIALOG_STYLE_LIST, "{00AE57}Banco", "Consultar saldo\nRetirar efectivo\nDepositar efectivo\nTransferir dinero", "Continuar", "Salir");
	return 1;
}

Dialog:ShowBanco(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0:
		{
			new gformat[170];
			format(gformat, sizeof gformat, "Tienes $%s en tu cuenta bancaria.", diner_coma(InfoPersonaje[playerid][pBanco]));
			SendClientMessage(playerid, 0x0CA7B8FF, gformat);
		}
		case 1:
		{
			Dialog_Show(playerid, RetirarBancoEfectivo, DIALOG_STYLE_INPUT, "{00AE57}Retirar efectivo", "{EBEBEB}Por favor, ingrese el monto a retirar:\n", "Retirar", "Volver");
		}
		case 2:
		{
			Dialog_Show(playerid, DepositarBancoEfectivo, DIALOG_STYLE_INPUT, "{00AE57}Depositar efectivo", "{EBEBEB}Por favor, ingrese el monto a depositar:\n", "Depositar", "Volver");
		}
		case 3:
		{
			if (InfoPersonaje[playerid][pHorasOn] < 3) return SendClientMessage(playerid, COLOR_GREY, "* Necesitas jugar al menos tres horas, para poder transferir dinero.");
            ConTransferir[playerid] = 1;
			Dialog_Show(playerid, TransferirBancoDinero, DIALOG_STYLE_INPUT, "{00AE57}Transferencia (paso 1)", "{EBEBEB}Por favor, ingrese {00AE57}ID del jugador{EBEBEB} que deseas transferir dinero:", "Continuar", "Volver");
		}
	}
	return 1;
}

Dialog:RetirarBancoEfectivo(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_banco(playerid);
	if (!isnumeric(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo números porfavor, vuelve a intentarlo.");
	new dinero = strval(inputtext), string[170];
	if (dinero < 1 || dinero > 1000000) return SendClientMessage(playerid, COLOR_GREY, "* Máximo que puedes retirar más de $1,000,000.");
	if (dinero > InfoPersonaje[playerid][pBanco]) return SendClientMessage(playerid, COLOR_GREY, "* No tienes esa cantidad en tu cuenta bancaria.");
	GivePlayerCash(playerid, dinero, "retiro de dinero banco");
	InfoPersonaje[playerid][pBanco] -= dinero;
	format(string, sizeof string, "* Sacaste en efectivo $%s. Ahora tienes en tu cuenta bancaria $%s.", diner_coma(dinero), diner_coma(InfoPersonaje[playerid][pBanco]));
	SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	ameuwu(playerid, "hace una transacción bancaria");
	format(string, sizeof string, "[RETIRO BANCO] %s retiró $%s.", NombreDeCuenta(playerid), diner_coma(dinero));
	Log("LOGS/banco.log", string);
	guardar_int_mysql("personajes", "BanescoOwO", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pBanco]);
	return 1;
}

Dialog:DepositarBancoEfectivo(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_banco(playerid);
	if (!isnumeric(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo números porfavor, vuelve a intentarlo.");
	new dinero = strval(inputtext), string[170];
	if (dinero < 1 || dinero > 1000000) return SendClientMessage(playerid, COLOR_GREY, "* Máximo que puedes depositar más de $1,000,000.");
	if (dinero > GetPlayerCash(playerid)) return SendClientMessage(playerid, COLOR_GREY, "* No tienes esa cantidad en efectivo.");
	GivePlayerCash(playerid, -dinero, "deposito de dinero banco");
	InfoPersonaje[playerid][pBanco] += dinero;
	format(string, sizeof string, "* Depositaste en efectivo $%s. Ahora tienes en tu cuenta bancaria $%s.", diner_coma(dinero), diner_coma(InfoPersonaje[playerid][pBanco]));
	SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	ameuwu(playerid, "hace una transacción bancaria");
	format(string, sizeof string, "[DEPOSITO BANCO] %s depositó $%s.", NombreDeCuenta(playerid), diner_coma(dinero));
	Log("LOGS/banco.log", string);
	guardar_int_mysql("personajes", "BanescoOwO", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pBanco]);
	return 1;
}

Dialog:TransferirBancoDinero(playerid, response, listitem, inputtext[])
{
	if (ConTransferir[playerid] == 2)
	{
		if (!response)
	    {
   			if (IsPlayerContrato(playerid, 6) != -1 || IsPlayerJob(playerid, 1) != 0) Dialog_Show(playerid, MenuAplicaciones, DIALOG_STYLE_LIST, "Opción: {00AE57}Aplicaciones", "- Contactos\n- Transferencias express\n- Empleos disponibles\n- {00CC00}Repartos disponibles", "Continuar", "Volver");
			else Dialog_Show(playerid, MenuAplicaciones, DIALOG_STYLE_LIST, "Opción: {00AE57}Aplicaciones", "- Contactos\n- Transferencias express\n- Empleos disponibles", "Continuar", "Volver");
			return 1;
		}
	}
	else { if (!response) return cmd_banco(playerid); }
	
	if (!isnumeric(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo números porfavor, vuelve a intentarlo.");
	new playerid2 = strval(inputtext);
	if (playerid == playerid2) return SendClientMessage(playerid, COLOR_GREY, "* No puedes transferirte dinero a ti mismo.");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador no conectado.");
	SetPVarInt(playerid,"JugadorATransferir",playerid2);
	Dialog_Show(playerid, TransferirBanco2Dinero, DIALOG_STYLE_INPUT, "{00AE57}Transferencia (paso 2)", "{EBEBEB}Ahora ingresa el monto a transferir:", "Transferir", "Volver");
	return 1;
}

Dialog:TransferirBanco2Dinero(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	if (!isnumeric(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo números porfavor, vuelve a intentarlo.");
	new playerid2 = GetPVarInt(playerid, "JugadorATransferir"), dinero = strval(inputtext), string[180];
	if (dinero > InfoPersonaje[playerid][pBanco]) return SendClientMessage(playerid, COLOR_GREY, "* Cantidad incorrecta.");
	if (dinero < 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes transferir menos de 0.");
	InfoPersonaje[playerid][pBanco] -= dinero;
	InfoPersonaje[playerid2][pBanco] += dinero;
	format(string, sizeof string, "* Realizaste una transferencia de $%s a %s.", diner_coma(dinero), NombreJugador(playerid2));
	SendClientMessage(playerid, 0xEAEA00FF, string);
	format(string, sizeof string, "* Recibiste una transferencia de $%s de %s.", diner_coma(dinero), NombreJugador(playerid));
	SendClientMessage(playerid2, 0xFFFF04FF, string);
	PlayerPlaySound(playerid, 1052, 0.0, 0.0, 0.0);
	PlayerPlaySound(playerid2, 1052, 0.0, 0.0, 0.0);
	format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} %s(%d) hizo una transferencia de $%s a %s(%d).", NombreOriginal(playerid), playerid, diner_coma(dinero), NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFFFFFFFF, string);
	format(string, sizeof string, "[TRANSFERENCIA BANCO] %s transfirió $%s a %s.", NombreDeCuenta(playerid), diner_coma(dinero), NombreDeCuenta(playerid2));
	Log("LOGS/banco.log", string);
	guardar_int_mysql("personajes", "BanescoOwO", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pBanco]);
	guardar_int_mysql("personajes", "BanescoOwO", InfoPersonaje[playerid2][pID], InfoPersonaje[playerid2][pBanco]);
	DeletePVar(playerid, "JugadorATransferir");
	ameuwu(playerid, "hace una transacción bancaria");
	return 1;
}

new OBJ_Dinamita[MAX_PLAYERS];
CMD:dinamita(playerid)
{
	if (no_tiene_manos(playerid, 52) == 0) return 1;
	if (IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "* No puedes poner dinamita estando en un vehículo.");
	if (InfoPersonaje[playerid][pManoDerecha] == 52)
	{
		InfoPersonaje[playerid][pManoDerecha] = 0;
		InfoPersonaje[playerid][pManoDerechaCant] = 0;
		RemovePlayerAttachedObject(playerid, 7);
	}
	else
	{
		InfoPersonaje[playerid][pManoIzquierda] = 0;
		InfoPersonaje[playerid][pManoIzquierdaCant] = 0;
		RemovePlayerAttachedObject(playerid, 8);
	}
	new Float:x, Float:y, Float:z;
	GetPlayerPos(playerid, x, y, z);
	GetPosInFrontOfPlayer(playerid, x, y, 0.6);
	OBJ_Dinamita[playerid] = CreateDynamicObject(1654, x, y, z-0.8, 0, 0, 0, GetPlayerVirtualWorld(playerid), GetPlayerInterior(playerid) );
	SetTimerEx("DetonarDinamita", 12000, false, "dfff", playerid, x, y, z);
	ameuwu(playerid,"coloca dinamita en el suelo");
	ApplyAnimation(playerid, "BOMBER", "BOM_Plant", 4.0, 0, 1, 1, 0,0);
	SendClientMessage(playerid, COLOR_YELLOW, "La dinamita explotará en 12 segundos.");
	Streamer_Update(playerid);
	return 1;
}

forward DetonarDinamita(playerid, Float:x, Float:y, Float:z);
public DetonarDinamita(playerid, Float:x, Float:y, Float:z)
{
	CreateExplosionEx(x, y, z, 0, 10.0);
	if (IsValidDynamicObject(OBJ_Dinamita[playerid])) DestroyDynamicObject(OBJ_Dinamita[playerid]);
	return 1;
}

CreateExplosionEx(Float: x, Float: y, Float: z, type, Float: rango)
{
	Loop(playerid, MAX_PLAYERS, 0) if (IsPlayerConnectedEx(playerid))
	{
		new Float: damage, Float: rango2 = GetPlayerDistanceFromPoint(playerid, x, y, z);
		switch (floatround(rango2))
		{
			case 1: damage = 90;
			case 2: damage = 80;
			case 3: damage = 70;
			case 4: damage = 60;
			case 5: damage = 50;
			case 6: damage = 40;
			case 7: damage = 30;
			case 8: damage = 20;
			case 9: damage = 10;
			case 10: damage = 5;
		}
		BajarVida(playerid, damage);
	}
	CreateExplosion(x, y, z, type, rango);
	return 1;
}

new EnIDatm[MAX_PLAYERS];
CMD:cajero(playerid)
{
	new id = -1;
	Loop(x, MAX_CAJEROS, 1) if (IsPlayerInRangeOfPoint(playerid, 2.0, InfoCajero[x][atmPotX], InfoCajero[x][atmPotY], InfoCajero[x][atmPotZ]) && InfoPersonaje[playerid][pInterior] == InfoCajero[x][atmInterior] && InfoPersonaje[playerid][pVirtualWorld] == InfoCajero[x][atmVirtualWorld])
	{
		id = x;
		break;
	}
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás cerca de ningún cajero.");
	Dialog_Show(playerid, ShowCajero, DIALOG_STYLE_LIST, "{00AE57}Cajero", "Consultar saldo\nRetirar efectivo\nTransferir dinero", "Continuar", "Salir");
	EnIDatm[playerid] = id;
	return 1;
}
CMD:atm(playerid) return cmd_cajero(playerid);

Dialog:ShowCajero(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0:
		{
			new gformat[170];
			format(gformat, sizeof gformat, "Tienes $%s en tu cuenta bancaria.", diner_coma(InfoPersonaje[playerid][pBanco]));
			SendClientMessage(playerid, 0x0CA7B8FF, gformat);
		}
		case 1:
		{
			if (InfoPersonaje[playerid][pTogCajero] != 0)
			{
				new gformat[190];
				format(gformat, sizeof gformat, "* Debes esperar %d minutos para volver a retirar efectivo, puedes ir al banco sino quieres esperar.", InfoPersonaje[playerid][pTogCajero]);
				SendClientMessage(playerid, COLOR_GREY, gformat);
			    return 1;
			}
			Dialog_Show(playerid, RetirarEfectivo, DIALOG_STYLE_INPUT, "{00AE57}Retirar efectivo", "{EBEBEB}Por favor, ingrese el monto a retirar:\n\n{0CA7B8}El máximo a retirar es de $100,000 dólares por hora.", "Retirar", "Volver");
		}
		case 2:
		{
			if (InfoPersonaje[playerid][pHorasOn] < 3) return SendClientMessage(playerid, COLOR_GREY, "* Necesitas jugar al menos tres horas, para poder transferir dinero.");
			Dialog_Show(playerid, TransferirDinero, DIALOG_STYLE_INPUT, "{00AE57}Transferencia (paso 1)", "{EBEBEB}Por favor, ingrese {00AE57}ID del jugador{EBEBEB} que deseas transferir dinero:", "Continuar", "Volver");
		}
	}
	return 1;
}

Dialog:RetirarEfectivo(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_cajero(playerid);
	new id = EnIDatm[playerid];
	if (InfoCajero[id][atmDinero] == 0) return SendClientMessage(playerid, COLOR_GREY, "* No hay más efectivo en este cajero.");
	if (!isnumeric(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo números porfavor, vuelve a intentarlo.");
	new dinero = strval(inputtext), string[170];
	if (dinero < 1 || dinero > 100000) return SendClientMessage(playerid, COLOR_GREY, "* Máximo que puedes retirar por hora es $100,000.");
	if (dinero > InfoPersonaje[playerid][pBanco]) return SendClientMessage(playerid, COLOR_GREY, "* No tienes esa cantidad en tu cuenta bancaria.");
	if (dinero > InfoCajero[id][atmDinero]) return SendClientMessage(playerid, COLOR_GREY, "* No hay esa cantidad de efectivo en este cajero automático.");
	GivePlayerCash(playerid, dinero, "retiro de dinero atm");
	InfoPersonaje[playerid][pBanco] -= dinero;
	InfoCajero[id][atmDinero] -= dinero;
	guardar_int_mysql("cajeros", "BolosUwU", InfoCajero[id][atmID_sql], InfoCajero[id][atmDinero]);
	format(string, sizeof string, "* Sacaste en efectivo $%s. Ahora tienes en tu cuenta bancaria $%s.", diner_coma(dinero), diner_coma(InfoPersonaje[playerid][pBanco]));
	SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	ameuwu(playerid, "hace una transacción bancaria");
	format(string, sizeof string, "[RETIRO ATM] %s retiró $%s.", NombreDeCuenta(playerid), diner_coma(dinero));
	Log("LOGS/banco.log", string);
	guardar_int_mysql("personajes", "BanescoOwO", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pBanco]);
	Label_cajero(id, 0);
	if (dinero >= 20000)
	{
		InfoPersonaje[playerid][pTogCajero] = 60;
		guardar_int_mysql("personajes", "TogCajero", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTogCajero]);
	}
	return 1;
}

Dialog:TransferirDinero(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_cajero(playerid);
	if (!isnumeric(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo números porfavor, vuelve a intentarlo.");
	new playerid2 = strval(inputtext);
	if (playerid == playerid2) return SendClientMessage(playerid, COLOR_GREY, "* No puedes transferirte dinero a ti mismo.");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador no conectado.");
	SetPVarInt(playerid,"JugadorATransferir",playerid2);
	Dialog_Show(playerid, Transferir2Dinero, DIALOG_STYLE_INPUT, "{00AE57}Transferencia (paso 2)", "{EBEBEB}Ahora ingresa el monto a transferir:", "Transferir", "Salir");
	return 1;
}

Dialog:Transferir2Dinero(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	if (!isnumeric(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo números porfavor, vuelve a intentarlo.");
	new playerid2 = GetPVarInt(playerid, "JugadorATransferir"), dinero = strval(inputtext), string[180];
	if (dinero > InfoPersonaje[playerid][pBanco]) return SendClientMessage(playerid, COLOR_GREY, "* Cantidad incorrecta.");
	if (dinero < 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes transferir menos de 0.");
	InfoPersonaje[playerid][pBanco] -= dinero;
	InfoPersonaje[playerid2][pBanco] += dinero;
	format(string, sizeof string, "* Realizaste una transferencia de $%s a %s.", diner_coma(dinero), NombreJugador(playerid2));
	SendClientMessage(playerid, 0xEAEA00FF, string);
	format(string, sizeof string, "* Recibiste una transferencia de $%s de %s.", diner_coma(dinero), NombreJugador(playerid));
	SendClientMessage(playerid2, 0xFFFF04FF, string);
	PlayerPlaySound(playerid, 1052, 0.0, 0.0, 0.0);
	PlayerPlaySound(playerid2, 1052, 0.0, 0.0, 0.0);
	format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} %s(%d) hizo una transferencia de $%s a %s(%d).", NombreOriginal(playerid), playerid, diner_coma(dinero), NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFFFFFFFF, string);
	format(string, sizeof string, "[TRANSFERENCIA ATM] %s transfirió $%s a %s.", NombreDeCuenta(playerid), diner_coma(dinero), NombreDeCuenta(playerid2));
	Log("LOGS/banco.log", string);
	guardar_int_mysql("personajes", "BanescoOwO", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pBanco]);
	guardar_int_mysql("personajes", "BanescoOwO", InfoPersonaje[playerid2][pID], InfoPersonaje[playerid2][pBanco]);
	DeletePVar(playerid, "JugadorATransferir");
	ameuwu(playerid, "hace una transacción bancaria");
	return 1;
}

CMD:limpiarobjetov(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new vehicleid, sstring[186];
	if (sscanf(params, "i", vehicleid)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /limpiarobjetov (VehiculoID)");
	if (vehicleid < 1 || vehicleid > MAX_VEHICLES) return SendClientMessage(playerid, COLOR_GREY, "* Vehículo inválido.");
	if (!GetVehicleModel(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "* Vehículo inválido, intenta con otra ID.");
	new id = verificar_id_vehiculo(vehicleid), iCount = 0;
	if (id == -1) return SendClientMessage(playerid, 0xebebebff, "* Este vehículo no es dinámico.");
	if (CountObjVeh(id) == 0) return SendClientMessage(playerid, COLOR_GREY, "* Este vehículo no tiene ningún objeto agregado.");
	Loop(xd, 5, 0) if (InfoVehiculo[id][vObjModelo][xd] != 0)
	{
	    iCount++;
		if (IsValidDynamicObject(InfoVehiculo[id][vTuneo][xd])) DestroyDynamicObject(InfoVehiculo[id][vTuneo][xd]);
		InfoVehiculo[id][vObjModelo][xd] = 0;
		InfoVehiculo[id][vObjPosX][xd] = 0;
		InfoVehiculo[id][vObjPosY][xd] = 0;
		InfoVehiculo[id][vObjPosZ][xd] = 0;
		InfoVehiculo[id][vObjRotX][xd] = 0;
		InfoVehiculo[id][vObjRotY][xd] = 0;
		InfoVehiculo[id][vObjRotZ][xd] = 0;
		new query[1028];
		mysql_format(DBInsanity, query, sizeof query, "UPDATE vehiculos SET ObjModelo_%d = '%d', ObjPosX_%d = '%f', ObjPosY_%d = '%f', ObjPosZ_%d = '%f', ObjRotX_%d = '%f', ObjRotY_%d = '%f', ObjRotZ_%d = '%f' WHERE ID = '%d'",
		xd+1, InfoVehiculo[id][vObjModelo][xd], xd+1, InfoVehiculo[id][vObjPosX][xd], xd+1, InfoVehiculo[id][vObjPosY][xd], xd+1, InfoVehiculo[id][vObjPosZ][xd], xd+1, InfoVehiculo[id][vObjRotX][xd], xd+1, InfoVehiculo[id][vObjRotY][xd], xd+1, InfoVehiculo[id][vObjRotZ][xd], InfoVehiculo[id][vID_sql]);
		mysql_tquery(DBInsanity, query);
	}
	format(sstring, sizeof sstring, "Administración:{FFFFFF} %s(%d) limpió %d objetos VIP del vehículo ID %d.", InfoCuenta[playerid][jApodo], playerid, iCount, vehicleid);
	SendAdminMessage(0xFF6347FF, sstring);
	return 1;
}

CMD:crearcajero(playerid)
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (InfoPersonaje[playerid][pEditingMode] != 0) return SendClientMessage(playerid, COLOR_GREY, "Estás editando un objeto.");
	new query[1028];
	Loop(id, MAX_CAJEROS, 1) if (!InfoCajero[id][atmModelo])
	{
		InfoCajero[id][atmModelo] = 19324;
		InfoCajero[id][atmDinero] = 5000000;
		GetPlayerPos(playerid, InfoCajero[id][atmPotX], InfoCajero[id][atmPotY], InfoCajero[id][atmPotZ]);
		InfoCajero[id][atmInterior] = GetPlayerInterior(playerid);
		InfoCajero[id][atmVirtualWorld] = GetPlayerVirtualWorld(playerid);
		Label_cajero(id, 1);
		SendClientMessage(playerid, 0x90C3D4FF, "Creaste el cajero indicado, ahora editalo.");
		EditDynamicObject(playerid, InfoCajero[id][atmObject]);
		InfoPersonaje[playerid][pEditingMode] = 74;
		edicion_sql_actual[playerid] = id;
		//opción idsql ya creada.
		if (InfoCajero[id][atmID_sql] != 0)
		{
			mysql_format(DBInsanity, query, sizeof query, "UPDATE cajeros SET Modelo = '%d', BolosUwU = '%d', PotX = '%f', PotY = '%f', PotZ = '%f', RotX = '%f', RotY = '%f', RotZ = '%f', Interior = '%d', VirtualWorld = '%d' WHERE ID = '%d'",
			InfoCajero[id][atmModelo],
			InfoCajero[id][atmDinero],
			InfoCajero[id][atmPotX],
			InfoCajero[id][atmPotY],
			InfoCajero[id][atmPotZ],
			InfoCajero[id][atmRotX],
			InfoCajero[id][atmRotY],
			InfoCajero[id][atmRotZ],
			InfoCajero[id][atmInterior],
			InfoCajero[id][atmVirtualWorld],
			InfoCajero[id][atmID_sql]);
			mysql_tquery(DBInsanity, query);
			id = MAX_CAJEROS;
			return 1;
		}
		mysql_format(DBInsanity, query, sizeof query, "INSERT INTO cajeros (Modelo, BolosUwU, PotX, PotY, PotZ, RotX, RotY, RotZ, Interior, VirtualWorld) VALUES ('%d', '%d', '%f', '%f', '%f', '%f', '%f', '%f', '%d', '%d')",
		InfoCajero[id][atmModelo],
		InfoCajero[id][atmDinero],
		InfoCajero[id][atmPotX],
		InfoCajero[id][atmPotY],
		InfoCajero[id][atmPotZ],
		InfoCajero[id][atmRotX],
		InfoCajero[id][atmRotY],
		InfoCajero[id][atmRotZ],
		InfoCajero[id][atmInterior],
		InfoCajero[id][atmVirtualWorld]);
		mysql_tquery(DBInsanity, query, "OnCajeroCreate", "i", id);
		id = MAX_CAJEROS;
	}
	return 1;
}

forward OnCajeroCreate(id);
public OnCajeroCreate(id)
{
	InfoCajero[id][atmID_sql] = cache_insert_id();
	cache_unset_active();
    return 1;
}

CMD:borrarcajero(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new id, string[256];
	if (sscanf(params, "d", id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /borrarcajero (CajeroID)");
	if (!InfoCajero[id][atmModelo]) return SendClientMessage(playerid, COLOR_GREY, "Id cajero invalida.");
	InfoCajero[id][atmModelo] = 0;
	InfoCajero[id][atmDinero] = 0;
	InfoCajero[id][atmPotX] = 0.0;
	InfoCajero[id][atmPotY] = 0.0;
	InfoCajero[id][atmPotZ] = 0.0;
	InfoCajero[id][atmRotX] = 0.0;
	InfoCajero[id][atmRotY] = 0.0;
	InfoCajero[id][atmRotZ] = 0.0;
	InfoCajero[id][atmInterior] = 0;
	InfoCajero[id][atmVirtualWorld] = 0;
	if (IsValidDynamicObject(InfoCajero[id][atmObject])) DestroyDynamicObject(InfoCajero[id][atmObject]);
	DestroyDynamic3DTextLabel(Text3D: InfoCajero[id][atmLabel]);
	new query[2048];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE cajeros SET Modelo = 0, BolosUwU = 0, PotX = 0.0, PotY = 0.0, PotZ = 0.0, RotX = 0.0, RotY = 0.0, RotZ = 0.0, Interior = 0, VirtualWorld = 0 WHERE ID = '%d'", InfoCajero[id][atmID_sql]);
	mysql_tquery(DBInsanity, query);
	format(string, sizeof string, "Borraste el cajero ID %d, SQL vacía: %d", id, InfoCajero[id][atmID_sql]);
	SendClientMessage(playerid, -1, string);
	return 1;
}

CMD:ircajero(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new id, string[128];
	if (sscanf(params, "d", id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /ircajero (CajeroID)");
	if (id < 1 || id >= MAX_CAJEROS) return SendClientMessage(playerid, COLOR_GREY, "ID de cajero erróneo.");
	if (!InfoCajero[id][atmModelo]) return SendClientMessage(playerid, COLOR_GREY, "Id cajero invalida.");
	SetPosEx(playerid, InfoCajero[id][atmPotX], InfoCajero[id][atmPotY], InfoCajero[id][atmPotZ], 0.0, InfoCajero[id][atmInterior], InfoCajero[id][atmVirtualWorld], 1);
	format(string, sizeof string, "Teleport al cajero ID %d.", id);
	SendClientMessage(playerid, COLOR_YELLOW, string);
	return 1;
}

CMD:avisarpd(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") == 0) return SendClientMessage(playerid, COLOR_GREY, "* No estás en estado herido o muerto.");
	if (AvisoPD[playerid] == 1) return SendClientMessage(playerid, COLOR_GREY, "* Ya has avisado sobre tu muerte.");
	Dialog_Show(playerid, AvisoPD, DIALOG_STYLE_MSGBOX, "{00AE57}Aviso de muerte", "Tomando en cuenta el entorno, presiona 'Aceptar' para dar aviso a PD/FD sobre tu muerte.", "Aceptar", "Cancelar");
	return 1;
}

Dialog:AvisoPD(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	SendClientMessage(playerid, -1, "Has dado aviso sobre tu muerte. Los servicios fueron alertados.");
	new Float:PosX, Float:PosY, Float:PosZ;
	GetPlayerPos(playerid, PosX, PosY, PosZ);
	AvisoPD[playerid] = 1;
	new location[MAX_ZONE_NAME];
	Get2DZone(location, MAX_ZONE_NAME, PosX, PosY, PosZ);
	new string[128];
	format(string, sizeof string, "CENTRAL: Hay un nuevo herido registrado en %s. (/heridos)", location);
	SendRadioMessage(1, COLOR_RADIO, string);
	SendRadioMessage(4, COLOR_RADIO, string);

	new INT = GetPlayerInterior(playerid);
	new VW = GetPlayerVirtualWorld(playerid);
	foreach(Player, i)
	{
		if(IsPlayerInRangeOfPoint(i, 30.0, PosX, PosY, PosZ) && GetPlayerInterior(i) == INT && GetPlayerVirtualWorld(i) == VW)
		{
			SendSplitMessage(i, 0x9EC73DAA, "[NPC] Alguien llamó a emergencias tras la situación ocurrida.");
		}
	}
	return 1;
}

CMD:reaparecer(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") == 0) return SendClientMessage(playerid, COLOR_GREY, "* No estás en estado herido o muerto.");
	new gformat[128];
	if (timer_herido[playerid] != 0)
	{
		format(gformat, sizeof gformat, "Puedes reaparecer en el hospital en %d segundos.", timer_herido[playerid]);
		SendClientMessage(playerid, 0x6DDC76FF, gformat);
		return 1;
	}
	GoToHospital(playerid);
	return 1;
}

CMD:camello(playerid)
{
	if (!EnCamellos(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No estás en el punto de descargar drogas.");
	new dialg_products[1028];
	strcat(dialg_products, "Producto\tValor\tUnidades\n");
	strcat(dialg_products, "{EBEBEB}Materiales\t{04B404}$2,800\t{00AE57}100\n");
	strcat(dialg_products, "{EBEBEB}Cocaína\t{04B404}$1,650\t{00AE57}10 gramos\n");
	strcat(dialg_products, "{EBEBEB}Crack\t{04B404}$1,426\t{00AE57}15 gramos\n");
	strcat(dialg_products, "{EBEBEB}Marihuana\t{04B404}$2,500\t{00AE57}30 gramos");
	Dialog_Show(playerid, ShowCamello, DIALOG_STYLE_TABLIST_HEADERS, "{00AE57}Traficante", dialg_products, "Comprar", "Salir");
	return 1;
}

Dialog:ShowCamello(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new string[195];
	switch (listitem)
	{
		case 0:
		{
		    new precio = 2800;
			if (GetPlayerCash(playerid) < precio)
			{
				format(string, sizeof string, "Te hacen falta $%s para comprar '{00AE57}100 materiales{EBEBEB}' por $%s.", diner_coma(precio-GetPlayerCash(playerid)), diner_coma(precio));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
				return 1;
			}
			InfoPersonaje[playerid][pMateriales] += 100;
			guardar_int_mysql("personajes", "Materiales", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pMateriales]);
			format(string, sizeof string, "Compraste 100 materiales por $2,800 dólares. Ahora tienes %d materiales.", InfoPersonaje[playerid][pMateriales]);
			SendClientMessage(playerid, COLOR_LIGHTGREEN, string);
			GivePlayerCash(playerid, -precio, "compra de materiales");
		}
		case 1:
		{
		    new precio = 1650;
			if (GetPlayerCash(playerid) < precio)
			{
				format(string, sizeof string, "Te hacen falta $%s para comprar '{00AE57}10 gramos de cocaína{EBEBEB}' por $%s.", diner_coma(precio-GetPlayerCash(playerid)), diner_coma(precio));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
				return 1;
			}
			if (DarObjeto(playerid, 46, 10) == 2) return 1;
			SendClientMessage(playerid, COLOR_LIGHTGREEN, "Compraste 10 gramos de cocaína por $1,650 dólares.");
			GivePlayerCash(playerid, -precio, "10gr de cocaina");
		}
		case 2:
		{
		    new precio = 1426;
			if (GetPlayerCash(playerid) < precio)
			{
				format(string, sizeof string, "Te hacen falta $%s para comprar '{00AE57}15 gramos de crack{EBEBEB}' por $%s.", diner_coma(precio-GetPlayerCash(playerid)), diner_coma(precio));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
				return 1;
			}
			if (DarObjeto(playerid, 44, 15) == 2) return 1;
			SendClientMessage(playerid, COLOR_LIGHTGREEN, "Compraste 15 gramos de crack por $1,426 dólares.");
			GivePlayerCash(playerid, -precio, "15gr de crack");
		}
		case 3:
		{
		    new precio = 2500;
			if (GetPlayerCash(playerid) < precio)
			{
				format(string, sizeof string, "Te hacen falta $%s para comprar '{00AE57}30 gramos de marihuana{EBEBEB}' por $%s.", diner_coma(precio-GetPlayerCash(playerid)), diner_coma(precio));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
				return 1;
			}
			if (DarObjeto(playerid, 43, 30) == 2) return 1;
			SendClientMessage(playerid, COLOR_LIGHTGREEN, "Compraste 30 gramos de marihuana por $2,500 dólares.");
			GivePlayerCash(playerid, -precio, "30gr de marihuana");
		}
	}
	return 1;
}

EnCamellos(playerid)
{
	if (IsPlayerInRangeOfPoint(playerid, 5.0, 2526.8215, -1641.3239, 13.9997)) return 1;
	else if (IsPlayerInRangeOfPoint(playerid, 5.0, 2474.8921, -1324.3365, 27.5433)) return 1;
	else if (IsPlayerInRangeOfPoint(playerid, 5.0, 1935.6304, -1060.5109, 24.4119)) return 1;
	else if (IsPlayerInRangeOfPoint(playerid, 5.0, 833.7507, -1528.7776, 13.6607)) return 1;
	return 0;
}

CMD:equiposonido(playerid)
{
 	if (InfoBoombox[playerid][BB_obj]) return SendClientMessage(playerid, -1, "Escribe {00AE57}/encender{FFFFFF} para cambiar la emisora o {00AE57}/requipo{FFFFFF} para recoger tu estéreo.");
	if (no_tiene_manos(playerid, 51) == 0) return 1;
	foreach(Player, i)
	{
		if (InfoBoombox[i][BB_obj])
		{
			if (IsPlayerInRangeOfPoint(playerid, 30.0, InfoBoombox[i][BB_x], InfoBoombox[i][BB_y], InfoBoombox[i][BB_z]))
			{
				SendClientMessage(playerid, COLOR_GREY, "No puedes colocar tu boombox aquí, se encuentra uno cerca.");
				return 1;
			}
		}
	}
	if (InfoPersonaje[playerid][pManoDerecha] == 51)
	{
		InfoPersonaje[playerid][pManoDerecha] = 0;
		InfoPersonaje[playerid][pManoDerechaCant] = 0;
		RemovePlayerAttachedObject(playerid, 7);
	}
	else
	{
		InfoPersonaje[playerid][pManoIzquierda] = 0;
		InfoPersonaje[playerid][pManoIzquierdaCant] = 0;
		RemovePlayerAttachedObject(playerid, 8);
	}
	ApplyAnimation(playerid, "BOMBER", "BOM_Plant", 4.0, 0, 1, 1, 0,0);
	new Float:X, Float:Y, Float:Z, Float:A, string[128];
	GetPlayerPos(playerid, X, Y, Z);
	GetPlayerFacingAngle(playerid, A);
	InfoBoombox[playerid][BB_obj] = CreateDynamicObject(2103, X, Y, Z-1, 0.0, 0.0, A, .worldid = GetPlayerVirtualWorld(playerid), .interiorid = GetPlayerInterior(playerid));
	format(string, sizeof string, "Boombox de %s{EBEBEB}\n(/encender)", NombreOriginal(playerid));
	InfoBoombox[playerid][BB_label] = CreateDynamic3DTextLabel(string, COLOR_GENERAL, X, Y, Z-0.45, 20.0, .worldid = GetPlayerVirtualWorld(playerid), .interiorid = GetPlayerInterior(playerid));
	InfoBoombox[playerid][BB_area] = CreateDynamicSphere(X, Y, Z, 30.0, GetPlayerVirtualWorld(playerid), GetPlayerInterior(playerid));
	InfoBoombox[playerid][BB_x] = X;
	InfoBoombox[playerid][BB_y] = Y;
	InfoBoombox[playerid][BB_z] = Z;
	InfoBoombox[playerid][BB_int] = GetPlayerInterior(playerid);
	InfoBoombox[playerid][BB_vw] = GetPlayerVirtualWorld(playerid);
	SendClientMessage(playerid, 0xEBEBEBFF, "Boombox plantado, usa ({00AE57}/encender{EBEBEB}) para configurar las opciones de radio.");
	Streamer_Update(playerid);
 	return 1;
}
CMD:boombox(playerid) return cmd_equiposonido(playerid);
CMD:esonido(playerid) return cmd_equiposonido(playerid);

forward ReproducirBoombox(playerid, music[]);
public ReproducirBoombox(playerid, music[])
{
	if(InfoBoombox[playerid][BB_obj])
	{
		foreach(Player, i) if (IsPlayerConnectedEx(i) && InfoPersonaje[i][pTogMusic] == 1)
		{
			if(IsPlayerInDynamicArea(i, InfoBoombox[playerid][BB_area]))
			{
				PlayStream(i, music, InfoBoombox[playerid][BB_x], InfoBoombox[playerid][BB_y], InfoBoombox[playerid][BB_z], 30.0, 1);
			}
		}
		SetPVarString(playerid, "BBStation", music);
	}
	return 1;
}

CMD:encender(playerid)
{
	if (!InfoBoombox[playerid][BB_obj]) return SendClientMessage(playerid, COLOR_GREY, "No has colocado ningún boombox.");
	if (!IsPlayerInRangeOfPoint(playerid, 4.0, InfoBoombox[playerid][BB_x], InfoBoombox[playerid][BB_y], InfoBoombox[playerid][BB_z])) return SendClientMessage(playerid, COLOR_GREY, "No estás cerca de tu boombox.");
	if (GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DUCK) return SendClientMessage(playerid, COLOR_GREY, "Debes estar agachado.");
	Dialog_Show(playerid, ShowBoombox, DIALOG_STYLE_LIST, "{00AE57}Boombox", "{F50000}Detener música{FFFFFF}\nRadios\nURL - Internet\n{00CC00}Recoger radio", "Continuar", "Salir");
	return 1;
}

CMD:requiposonido(playerid)
{
	if (!InfoBoombox[playerid][BB_obj]) return SendClientMessage(playerid, COLOR_GREY, "No has colocado ningún boombox.");
	if (!IsPlayerInRangeOfPoint(playerid, 4.0, InfoBoombox[playerid][BB_x], InfoBoombox[playerid][BB_y], InfoBoombox[playerid][BB_z])) return SendClientMessage(playerid, COLOR_GREY, "No estás cerca de tu boombox.");
	if (GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DUCK) return SendClientMessage(playerid, COLOR_GREY, "Debes estar agachado.");
	if (DarObjeto(playerid, 51, 1) == 2) return 1;
	foreach(Player, i) if (IsPlayerInDynamicArea(i, InfoBoombox[playerid][BB_area]))
	{
		StopStream(i);
	}
	InfoBoombox[playerid][BB_area] = 0;
	if (IsValidDynamicObject(InfoBoombox[playerid][BB_obj])) DestroyDynamicObject(InfoBoombox[playerid][BB_obj]);
	DestroyDynamic3DTextLabel(Text3D: InfoBoombox[playerid][BB_label]);
	InfoBoombox[playerid][BB_obj] = 0;
	InfoBoombox[playerid][BB_x] = 0.0;
	InfoBoombox[playerid][BB_y] = 0.0;
	InfoBoombox[playerid][BB_z] = 0.0;
	InfoBoombox[playerid][BB_int] = 0;
	InfoBoombox[playerid][BB_vw] = 0;
	DeletePVar(playerid, "BBStation");
	SendClientMessage(playerid, COLOR_YELLOW, "Recogiste tu boombox.");
	return 1;
}
CMD:requipo(playerid) return cmd_requiposonido(playerid);

Dialog:ShowBoombox(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch(listitem)
	{
		case 0:
		{
			if (InfoBoombox[playerid][BB_area])
			{
				foreach(Player, i)
				{
					if(IsPlayerInDynamicArea(i, InfoBoombox[playerid][BB_area]))
						StopStream(i);
				}
				DeletePVar(playerid, "BBStation");
			}
			SendClientMessage(playerid, COLOR_RED, "Apagaste tu equipo sonido.");
		}
		case 1:
		{
			new StationsDialog[1560];
			strcat(StationsDialog, "Radio\tGénero\n");
			strcat(StationsDialog, "{EBEBEB}Top Latino\t{00AE57}Variado\n");
			strcat(StationsDialog, "{EBEBEB}Dubbase.FM\t{00AE57}Dubstep\n");
			strcat(StationsDialog, "{EBEBEB}Soft Rock Cafe\t{00AE57}Heavy Metal\n");
			strcat(StationsDialog, "{EBEBEB}Aural Moon\t{00AE57}Punk\n");
			strcat(StationsDialog, "{EBEBEB}Idobi Radio\t{00AE57}Electronic\n");
			strcat(StationsDialog, "{EBEBEB}www.Hot108.com\t{00AE57}Hip Hop\n");
			strcat(StationsDialog, "{EBEBEB}Sensacion Peru\t{00AE57}Pop\n");
			strcat(StationsDialog, "{EBEBEB}DEEGAY RADIO\t{00AE57}Dance Pop\n");
			strcat(StationsDialog, "{EBEBEB}PaganMetalRadio\t{00AE57}Extreme Metal\n");
			strcat(StationsDialog, "{EBEBEB}PulsRadio TRANCE\t{00AE57}Eletronic\n");
			strcat(StationsDialog, "{EBEBEB}The Trip\t{00AE57}Music Usa\n");
			strcat(StationsDialog, "{EBEBEB}Radio Hunter\t{00AE57}Electrónica");
			Dialog_Show(playerid, EmisorasBoombox, DIALOG_STYLE_TABLIST_HEADERS, "{00AE57}Radios", StationsDialog, "Continuar", "Volver");
		}
		case 2: Dialog_Show(playerid, UrlBoombox, DIALOG_STYLE_INPUT, "{00AE57}URL internet", "{EBEBEB}Inserta un Stream ({00AE57}www.offliberty.com{EBEBEB}) para reproducirlo", "Continuar", "Volver");
		case 3:
		{
			if (!IsPlayerInRangeOfPoint(playerid, 4.0, InfoBoombox[playerid][BB_x], InfoBoombox[playerid][BB_y], InfoBoombox[playerid][BB_z])) return SendClientMessage(playerid, COLOR_GREY, "No estás cerca de tu boombox.");
			if (DarObjeto(playerid, 51, 1) == 2) return 1;
			foreach(Player, i) if (IsPlayerInDynamicArea(i, InfoBoombox[playerid][BB_area]))
			{
				StopStream(i);
			}
			InfoBoombox[playerid][BB_area] = 0;
			if (IsValidDynamicObject(InfoBoombox[playerid][BB_obj])) DestroyDynamicObject(InfoBoombox[playerid][BB_obj]);
			DestroyDynamic3DTextLabel(Text3D: InfoBoombox[playerid][BB_label]);
			InfoBoombox[playerid][BB_obj] = 0;
			InfoBoombox[playerid][BB_x] = 0.0;
			InfoBoombox[playerid][BB_y] = 0.0;
			InfoBoombox[playerid][BB_z] = 0.0;
			InfoBoombox[playerid][BB_int] = 0;
			InfoBoombox[playerid][BB_vw] = 0;
			DeletePVar(playerid, "BBStation");
			SendClientMessage(playerid, COLOR_YELLOW, "Recogiste tu boombox.");
		}
	}
	return 1;
}

Dialog:EmisorasBoombox(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_encender(playerid);
	switch (listitem)
	{
		case 0: ReproducirBoombox(playerid, "http://yp.shoutcast.com/sbin/tunein-station.pls?id=1652147");
		case 1: ReproducirBoombox(playerid, "http://148.251.91.15:7004");
		case 2: ReproducirBoombox(playerid, "http://173.244.215.163:8380");
		case 3: ReproducirBoombox(playerid, "http://64.202.98.133:2010");
		case 4: ReproducirBoombox(playerid, "http://50.117.115.211:80");
		case 5: ReproducirBoombox(playerid, "http://108.61.30.179:4010");
		case 6: ReproducirBoombox(playerid, "http://50.7.64.226:80/frisky_mp3_hi");
		case 7: ReproducirBoombox(playerid, "http://yp.shoutcast.com/sbin/tunein-station.pls?id=1747543");
		case 8: ReproducirBoombox(playerid, "http://62.210.209.179:8030/stream");
		case 9: ReproducirBoombox(playerid, "http://yp.shoutcast.com/sbin/tunein-station.pls?id=1316323");
		case 10: ReproducirBoombox(playerid, "http://somafm.com/tags.pls");
		case 11: ReproducirBoombox(playerid, "http://listen.shoutcast.com:80/RadioHunter-TheHitzChannel");
	}
	return 1;
}

Dialog:UrlBoombox(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_encender(playerid);
	if (isnull(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "No has introducido ningún URL.");
	ReproducirBoombox(playerid, inputtext);
	return 1;
}

CMD:arrastrar(playerid, params[])
{
	if (InfoPersonaje[playerid][pHorasOn] < 10) return SendClientMessage(playerid, COLOR_GREY, "* Debes tener al menos 10 horas jugando el servidor.");
	new playerid2, gformat[160];
	if (sscanf(params, "u", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /arrastrar (PlayerID)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador desconectado.");
	if (playerid == playerid2) return SendClientMessage(playerid, COLOR_GREY, "* No te vas arrastrar a ti mismo jasjajsa, ppendejoxxd");
	if (!CercaDelWeon(3.5, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Estás lejos del jugador.");
	if (EstaParaArrastrar(playerid2) == 0) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador debe estar en estado de herido/muerto/rendido/esposado.");
	new Float:p_x, Float:p_y, Float:p_z, interior = GetPlayerInterior(playerid), vw = GetPlayerVirtualWorld(playerid);
	GetPlayerPos(playerid, p_x, p_y, p_z);
	SetPosEx(playerid2, p_x, p_y+0.5, p_z, 0, interior, vw, 1);
	format(gformat, sizeof gformat, "* %s se aprovecha de tu estado y te arrastra hacía él.", NombreJugador(playerid));
	SendClientMessage(playerid2, 0x1EB032FF, gformat);
	format(gformat, sizeof gformat, "* Aprovechas del estado de %s para arrastrarlo hacía ti.", NombreJugador(playerid2));
	SendClientMessage(playerid, 0x1EB032FF, gformat);
	return 1;
}

EstaParaArrastrar(playerid)
{
	if (GetPlayerSpecialAction(playerid) == SPECIAL_ACTION_HANDSUP) return 1;
	if (GetPVarInt(playerid, "PlayerCuffed") == 1) return 1;
	if (GetPVarInt(playerid, "EstaCrack") != 0) return 1;
	return 0;
}

CMD:arma(playerid, params[])
{
	if (sscanf(params, "s[32]", params[0])) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /arma (Colgar - Ajustar - Hueso - Tomar)");
	if (strcmp(params[0], "colgar", true) == 0) cmd_espalda(playerid);
	else if (strcmp(params[0], "ajustar", true) == 0) cmd_pespalda(playerid);
	else if (strcmp(params[0], "hueso", true) == 0)
	{
		if (EditandoObjetoJ[playerid]) return SendClientMessage(playerid, COLOR_GREY, "Ya estás editando un arma.");
		new gformat[512];
		format(gformat, sizeof(gformat), "Columna vertebral\nCabeza\nBrazo izquierdo\nBrazo derecho\nMano izquierda\nMano derecha\nMuslo izquierdo\nMuslo derecho\n\
		Pie izquierdo\nPie derecho\nPantorrilla derecha\nPantorrilla izquierda\nAntebrazo izquierdo\nAntebrazo derecho\nClavícula izquierda\n\
		Clavícula derecha\nCuello\nMandíbula");
		Dialog_Show(playerid, EditHueso, DIALOG_STYLE_LIST, "Hueso", gformat, "Continuar", "Salir");
	}
	else if (strcmp(params[0], "tomar", true) == 0) cmd_qespalda(playerid);
	else SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /arma (Colgar - Ajustar - Hueso - Tomar)");
	return 1;
}

Dialog:EditHueso(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;

	InfoPersonaje[playerid][ptHueso][7] = listitem + 1;
	SendClientMessage(playerid, COLOR_YELLOW, "Cambiaste el hueso de tu arma.");
	if (InfoPersonaje[playerid][pEspalda] != 0)
	{
		RemovePlayerAttachedObject(playerid, 9);
		PonerObjeto(playerid, 3, InfoPersonaje[playerid][pEspalda]);
	}
	return 1;
}

CMD:espalda(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") == 1) return SendClientMessage(playerid, COLOR_GREY, "No puedes usar este comando mientras estás herido.");
	if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessage(playerid, COLOR_GREY, "No puedes usar este comando en esta situación.");
	new string[256], manod = InfoPersonaje[playerid][pManoDerecha];
	if (EditandoObjetoJ[playerid]) return SendClientMessage(playerid, COLOR_GREY, "Ya estás editando un arma.");
	if (InfoPersonaje[playerid][pEspalda] != 0) return SendClientMessage(playerid, COLOR_GREY, "Posees un arma colgada, debes usar (/arma tomar) para quitarla.");
	if (manod == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes nada en tu mano derecha mano.");
	new weaponid = InfoInventario[manod][IDArma];
	if (!weaponid) return SendClientMessage(playerid, COLOR_GREY, "No estás sosteniendo un arma.");
	if (!IsObjectWearable(manod)) return SendClientMessage(playerid, COLOR_GREY, "Este objeto no puede ser editado.");
	format(string, sizeof string, "Te cuelgas tu %s.", GetNameObjeto(manod));
	SendClientMessage(playerid, 0xA7CE00FF, string);
	InfoPersonaje[playerid][pEspalda] = manod, InfoPersonaje[playerid][pEspaldaCant] = InfoPersonaje[playerid][pManoDerechaCant];
	InfoPersonaje[playerid][pManoDerecha] = 0, InfoPersonaje[playerid][pManoDerechaCant] = 0;
	PonerObjeto(playerid, 3, manod);
	ResetPlayerWeapons(playerid);
	RemovePlayerAttachedObject(playerid, 7);
	new query[512];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Espalda = '%d', Cantidad_espalda = '%d', Mano_derecha = '%d', Cantidad_mano_derecha = '%d' WHERE ID = '%d'",
	InfoPersonaje[playerid][pEspalda], InfoPersonaje[playerid][pEspaldaCant], InfoPersonaje[playerid][pManoDerecha], InfoPersonaje[playerid][pManoDerechaCant], InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, query);
	return 1;
}

CMD:pespalda(playerid)
{
	if (InfoPersonaje[playerid][pEspalda] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes nada colgado en tu cuerpo.");
	if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessage(playerid, COLOR_GREY, "No puedes usar este comando en esta situación.");
	new obj = InfoPersonaje[playerid][pEspalda];
	new weaponid = InfoInventario[obj][IDArma];
	if (!weaponid) return SendClientMessage(playerid, COLOR_GREY, "No estás sosteniendo un arma.");
	if (!IsObjectWearable(obj)) return SendClientMessage(playerid, COLOR_GREY, "Esta arma no puede ser editada.");
	if (EditandoObjetoJ[playerid]) return SendClientMessage(playerid, COLOR_GREY, "Ya estás editando un arma.");
	EditAttachedObject(playerid, 9);
	EditandoObjetoJ[playerid] = 2;
	SendClientMessage(playerid, -1, "Mantén presionado {00AE57}~k~~PED_SPRINT~{FFFFFF} para cambiar la posición de la cámara.");
	return 1;
}

IsObjectWearable(objectid)
{
	switch (objectid)
	{
		case 2..15: return 1;
		case 19..40: return 1;
		case 54: return 1;
	}
	return 0;
}

CMD:qespalda(playerid)
{
	new string[170], Espalda = InfoPersonaje[playerid][pEspalda];
	if (Espalda == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes ningún arma colgada.");
	if (EditandoObjetoJ[playerid]) return SendClientMessage(playerid, COLOR_GREY, "No puedes tomar el arma mientras editas.");
	if (InfoPersonaje[playerid][pManoDerecha] > 0 && InfoPersonaje[playerid][pManoIzquierda] > 0) { SendClientMessage(playerid, COLOR_GREY, "Posees ambas manos ocupadas."); return 1; }
	if (InfoPersonaje[playerid][pManoDerecha] == 0)
	{
		format(string, sizeof string, "Agarras tu %s.", GetNameObjeto(Espalda));
		SendClientMessage(playerid, 0xA7CE00FF, string);
		GivePlayerWeapon(playerid, InfoInventario[Espalda][IDArma], InfoPersonaje[playerid][pEspaldaCant]);
		InfoPersonaje[playerid][pManoDerecha] = Espalda;
		InfoPersonaje[playerid][pManoDerechaCant] = InfoPersonaje[playerid][pEspaldaCant];
		PonerObjeto(playerid, 1, Espalda);
	}
	else if (InfoPersonaje[playerid][pManoIzquierda] == 0)
	{
		format(string, sizeof string, "Agarras tu %s.", GetNameObjeto(Espalda));
		SendClientMessage(playerid, 0xA7CE00FF, string);
		InfoPersonaje[playerid][pManoIzquierda] = Espalda;
		InfoPersonaje[playerid][pManoIzquierdaCant] = InfoPersonaje[playerid][pEspaldaCant];
		PonerObjeto(playerid, 2, Espalda);
	}
	InfoPersonaje[playerid][pEspalda] = 0, InfoPersonaje[playerid][pEspaldaCant] = 0;
	RemovePlayerAttachedObject(playerid, 9);
	new query[1000];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Espalda = '%d', Cantidad_espalda = '%d', Mano_derecha = '%d', Cantidad_mano_derecha = '%d', Mano_izquierda = '%d', Cantidad_mano_izquierda = '%d' WHERE ID = '%d'",
	InfoPersonaje[playerid][pEspalda], InfoPersonaje[playerid][pEspaldaCant], InfoPersonaje[playerid][pManoDerecha], InfoPersonaje[playerid][pManoDerechaCant], InfoPersonaje[playerid][pManoIzquierda], InfoPersonaje[playerid][pManoIzquierdaCant], InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, query);
	return 1;
}

CMD:altavoz(playerid)
{
	if (EnLlamada[playerid] == 0) return SendClientMessage(playerid, COLOR_GREY, "* No te encuentras en una llamada.");
	if (Altavoz[playerid] == 0)
	{
		Altavoz[playerid] = 1;
		SendClientMessage(playerid, 0xA7CE00FF, "Altavoz activado.");
	}
	else
	{
		Altavoz[playerid] = 0;
		SendClientMessage(playerid, 0xA7CE00FF, "Altavoz desactivado.");
	}
	return 1;
}

CMD:llamar(playerid, params[])
{
	if (InfoPersonaje[playerid][pTelefono] == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes un número telefónico.");
	if (no_tiene_manos(playerid, 50) == 0) return 1;
	if (InfoPersonaje[playerid][pTiempoSancion] != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes usar este comando mientras estás en prisión.");
	if (GetPVarInt(playerid, "EstaCrack") != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes usar este comando mientras estás herido.");
	if (InfoPersonaje[playerid][pTogTelefono] == 0) return SendClientMessage(playerid, COLOR_GREY, "* Tu teléfono se encuentra apagado, escribe /togphone para encenderlo.");
	if (EnLlamada[playerid] != 0) return SendClientMessage(playerid, COLOR_GREY, "* Ya te encuentras en una llamada.");
	if (GetPlayerCash(playerid) < 3) return SendClientMessage(playerid, COLOR_GREY, "* Debes tener al menos 3$ dólares en bolsillos para llamar.");
	new numero;
	if (sscanf(params, "d", numero)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /llamar (Número)");
	if (numero == 0) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /llamar (Número)");
	if (numero == InfoPersonaje[playerid][pTelefono]) return SendClientMessage(playerid, COLOR_GREY, "* No te puedes llamar a tí mismo, acaso eres pendejo XDdXD.");
	ameuwu(playerid, "saca su móvil y marca unos números");
	llamar_numero(playerid, numero);
	return 1;
}

posee_telefono(playerid)
{
	if (InfoPersonaje[playerid][pManoDerecha] == 50) return 1;
	if (InfoPersonaje[playerid][pManoIzquierda] == 50) return 1;
	for (new x = 0; x < 10; x++)
		if (InfoPersonaje[playerid][pBolsillo][x] == 50) return 1;
	for (new x = 0; x < 6; x++)
		if (InfoPersonaje[playerid][pCinturon][x] == 50) return 1;
	return 0;
}

forward llamar_numero(playerid, numero);
public llamar_numero(playerid, numero)
{
	if (numero == InfoPersonaje[playerid][pTelefono]) return SendClientMessage(playerid, COLOR_GREY, "* No te puedes llamar a tí mismo, acaso eres pendejo XDd.");
	new string[256];
	if (numero == 911) //emergencias
	{
		if (OnDuty[playerid] != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes llamar a la estación estando de servicio.");

		EnLlamada[playerid] = 911;
		SetPVarInt(playerid, "en_emergencias", 0);

		SendClientMessage(playerid, 0xFFF000FF, "[Teléfono: 911]: Emergencias, ¿qué servicio necesita? ¿PD o SD?");
		return 1;
	}
	new tlfencontrado = 0;
	Loop(playerid2, MAX_PLAYERS, 0) if (IsPlayerConnectedEx(playerid2))
	{
		if (InfoPersonaje[playerid2][pTelefono] == numero)
		{
			if (EnLlamada[playerid2] != 0 || PersonaEnLlamada[playerid2] != -1) { tlfencontrado = -1; break; }
			if (!posee_telefono(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* El teléfono seleccionado se encuentra apagado. (1)");
			if (InfoPersonaje[playerid2][pTogTelefono] == 0) return SendClientMessage(playerid, COLOR_GREY, "* El teléfono seleccionado se encuentra apagado. (2)");
			tlfencontrado = 1;
			meuwu(playerid2, "le suena el móvil.");
			format(string, sizeof string, "* Llamada entrante del número %d, escribe /contestar para responder la llamada.", InfoPersonaje[playerid][pTelefono]);
			SendClientMessage(playerid2, COLOR_LIGHTGREEN, string);
			format(string, sizeof string, "*** Llamando al número %d ***", numero);
			SendClientMessage(playerid, 0xEBEBEBFF, string);
			ToqueLlamada[playerid2] = 0;
			PersonaEnLlamada[playerid] = playerid2;
			PersonaEnLlamada[playerid2] = playerid;
			EnLlamada[playerid] = 1;
			ToqueLlamadaTimer[playerid2] = SetTimerEx("OnLlamadaPhone", 15000, true, "i", playerid2);
			break;
		}
	}
	if (tlfencontrado == -1) SendClientMessage(playerid, COLOR_GREY, "* El número que ha marcado está en una llamada.");
	if (tlfencontrado == 0) SendClientMessage(playerid, COLOR_GREY, "* El número que ha marcado no existe o no está disponible.");
	return 1;
}

CMD:colgar(playerid)
{
	new string[245], oyente = PersonaEnLlamada[playerid];
	if (EnLlamada[playerid] == 1) //está llamando a alguien
	{
		EnLlamada[playerid] = 0;
		SendClientMessage(playerid, COLOR_GREY, "*** Has colgado.");
		format(string, sizeof string, "Tienes una llamada perdida del %d.", InfoPersonaje[playerid][pTelefono]);
		SendClientMessage(oyente, 0x9C791200, string);
		KillTimer(ToqueLlamadaTimer[oyente]);
		ToqueLlamada[oyente] = 0;
		PersonaEnLlamada[oyente] = -1;
		PersonaEnLlamada[playerid] = -1;
		return 1;
	}
	if (EnLlamada[playerid] == 2 || EnLlamada[playerid] == 3) //llamando normal
	{
		SendClientMessage(playerid, COLOR_GREY, "*** Has colgado.");
		SendClientMessage(oyente, COLOR_GREY, "*** Han colgado.");
		if (EnLlamada[playerid] == 3)
		{
			SendClientMessage(playerid, COLOR_LIGHTRED, "Coste de la llamada: 1$");
			GivePlayerCash(playerid, -1, "costo de llamada");
		}
		if (EnLlamada[oyente] == 3)
		{
			SendClientMessage(oyente, COLOR_LIGHTRED, "Coste de la llamada: 1$");
			GivePlayerCash(oyente, -1, "costo de llamada");
		}
		EnLlamada[playerid] = 0;
		EnLlamada[oyente] = 0;
		PersonaEnLlamada[oyente] = -1;
		PersonaEnLlamada[playerid] = -1;
		return 1;
	}
	if (EnLlamada[playerid] == 911) //llamando a emergencias
	{
		EnLlamada[playerid] = 0;
		SendClientMessage(playerid, COLOR_GREY, "*** Has colgado.");
	}
	if (EnLlamada[playerid] == 912) //llamada de emergencias
	{
		SendClientMessage(playerid, COLOR_GREY, "*** Has colgado.");
		SendClientMessage(oyente, COLOR_GREY, "*** Han colgado.");
		EnLlamada[playerid] = 0;
		EnLlamada[oyente] = 0;
		PersonaEnLlamada[oyente] = -1;
		PersonaEnLlamada[playerid] = -1;
	}
	return 1;
}

forward OnLlamadaPhone(playerid);
public OnLlamadaPhone(playerid)
{
	new string[240];
	if (!telefono_enmanos(playerid))
	{
		EnLlamada[PersonaEnLlamada[playerid]] = 0;
		ToqueLlamada[playerid] = 0;
		SendClientMessage(PersonaEnLlamada[playerid], 0xEBEBEBFF, "No contestan.");
		PersonaEnLlamada[PersonaEnLlamada[playerid]] = -1;
		PersonaEnLlamada[playerid] = -1;
		KillTimer(ToqueLlamadaTimer[playerid]);
		return 1;
	}
	if (ToqueLlamada[playerid] > 4)
	{
		if (PersonaEnLlamada[playerid] != -1) EnLlamada[PersonaEnLlamada[playerid]] = 0;
		ToqueLlamada[playerid] = 0;
		format(string, sizeof string, "* Llamada perdida del %d.", InfoPersonaje[PersonaEnLlamada[playerid]][pTelefono]);
		SendClientMessage(playerid, COLOR_YELLOW, string);
		SendClientMessage(PersonaEnLlamada[playerid], 0xEBEBEBFF, "No contestan.");
		for(new i=0; i<MAX_PLAYERS; i++) { if(PersonaEnLlamada[i] == playerid){PersonaEnLlamada[i] = -1; break;} }
		PersonaEnLlamada[playerid] = -1;
		KillTimer(ToqueLlamadaTimer[playerid]);
		return 1;
	}
	/*PlayerAudio(playerid, 20600, 15.0);*/
	SendClientMessage(PersonaEnLlamada[playerid], 0xEBEBEBFF, "* Llamando...");
	ToqueLlamada[playerid] ++;
	return 1;
}

telefono_enmanos(playerid)
{
	if (InfoPersonaje[playerid][pManoDerecha] == 50) return 1;
	if (InfoPersonaje[playerid][pManoIzquierda] == 50) return 1;
	return 0;
}

CMD:transferir(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes usar este comando mientras estás herido.");
	if (InfoPersonaje[playerid][pTelefono] == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes un número telefónico.");
	if (no_tiene_manos(playerid, 50) == 0) return 1;
	if (InfoPersonaje[playerid][pHorasOn] < 3) return SendClientMessage(playerid, COLOR_GREY, "* Necesitas jugar al menos tres horas, para poder transferir dinero.");
	Dialog_Show(playerid, TransferirBancoDinero, DIALOG_STYLE_INPUT, "{00AE57}Transferencia (paso 1)", "{EBEBEB}Por favor, ingrese {00AE57}ID del jugador{EBEBEB} que deseas transferir dinero:", "Continuar", "Volver");
    ConTransferir[playerid] = 2;
	return 1;
}

CMD:sms(playerid, params[])
{
	if (GetPVarInt(playerid, "EstaCrack") != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes usar este comando mientras estás herido.");
	if (InfoPersonaje[playerid][pTelefono] == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes un número telefónico.");
	if (no_tiene_manos(playerid, 50) == 0) return 1;
	new string[256], phonenumb, text[256];
	if (sscanf(params, "ds[256]", phonenumb, text)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /sms (Número) (Texto)");
	if (GetPlayerCash(playerid) < 2) return SendClientMessage(playerid, COLOR_GREY, "* Debes tener al menos 2$ dólares en bolsillos para enviar mensajes.");
	foreach(new i: Player) if (IsPlayerConnectedEx(i))
	{
		if (InfoPersonaje[i][pTelefono] == phonenumb && phonenumb != 0)
		{
			new playerid2 = i;
			if (InfoPersonaje[playerid2][pTogTelefono] == 0) return SendClientMessage(playerid, COLOR_GREY, "* Mensaje no enviado, teléfono apagado.");
			format(string, sizeof string, "SMS de %d: %s", InfoPersonaje[playerid][pTelefono], text);
			SendClientMessage(playerid2, 0xFFEA5FFF, string);
			format(string, sizeof string, "SMS a %d: %s", phonenumb, text);
			SendClientMessage(playerid, 0xEBEBEBFF, string);
			PlayerAudio(playerid, 1053, 10.0);
			PlayerAudio(playerid2, 20804, 10.0);
			GivePlayerCash(playerid, -2, "costo de sms");
			ameuwu(playerid, "envía un mensaje de texto");
			return 1;
		}
	}
	SendClientMessage(playerid, COLOR_GREY, "* El número que ha marcado no existe o no está disponible.");
	return 1;
}

CMD:contestar(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes usar este comando mientras estás herido.");
	if (no_tiene_manos(playerid, 50) == 0) return 1;
	if (EnLlamada[playerid] != 0) return SendClientMessage(playerid, COLOR_GREY, "* Ya te encuentras en una llamada.");
	if (PersonaEnLlamada[playerid] > -1)//llamada normal
	{
		SendClientMessage(playerid, COLOR_YELLOW, "Contestas la llamada.");
		SendClientMessage(PersonaEnLlamada[playerid], COLOR_YELLOW, "Contestaron el teléfono, se te cobrara 1$ por esta llamada.");
		EnLlamada[playerid] = 2;
		EnLlamada[PersonaEnLlamada[playerid]] = 3;
		KillTimer(ToqueLlamadaTimer[playerid]);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "* Parece no haber llamadas entrantes.");
	return 1;
}
CMD:atender(playerid) return cmd_contestar(playerid);

CMD:consumir(playerid, params[])
{
    new efecto_droga = InfoPersonaje[playerid][pDrogaTipo]; //tipo de droga
	new potencia_efecto = InfoPersonaje[playerid][pDrogaPower]; //potencia de la droga
	new query[1000];

	if (GetPVarInt(playerid, "EstaCrack") == 1) return SendClientMessage(playerid, COLOR_GREY, "No puedes usar este comando mientras estás herido.");
    if (sscanf(params, "s[32]", params[0])) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /consumir (Item)"), SendClientMessage(playerid, -1, "Items disponibles: cocaina, crack, metanfetamina, marihuana");
	if (strcmp(params[0], "cocaina", true) == 0)
    {
		new obj = 46;
		if (no_tiene_manos(playerid, obj) == 0) return 1;
		if (efecto_droga == 1 && potencia_efecto == 3) return SendClientMessage(playerid, COLOR_RED, "Ya consumiste demasiada cocaína.");

        //resta la droga
        if (InfoPersonaje[playerid][pManoDerecha] == obj) InfoPersonaje[playerid][pManoDerechaCant] --;
        else InfoPersonaje[playerid][pManoIzquierdaCant] --;
		ActualizarManos(playerid);

        if(efecto_droga != 0 && efecto_droga != 1) ContadorCuraciones[playerid] = 0;
        KillTimer(random_abstinence[playerid]);
        if(InfoPersonaje[playerid][pAdiccion][0] > 0 && InfoPersonaje[playerid][pAbstinenceEffect] == 1) InfoPersonaje[playerid][pAbstinenceTime] = 0;

        SendClientMessage(playerid, 0xFFFF00AA, "Consumes cocaína.");
        SendClientMessage(playerid, 0x9ACD32AA, "Te sientes más resistente. Sientes un mayor bienestar. Desarrollas paranoia, estás atento a todo tu entorno.");
        if (potencia_efecto != 0 && efecto_droga != 1) InfoPersonaje[playerid][pDrogaPower] = 0;

		if (efecto_droga != 1)
		{
			SetPlayerWeather(playerid, 124);
			ContadorCuraciones[playerid] = 13;
			SetTimerEx("DrogaCuracion", 10000, false, "i", playerid);
			InfoPersonaje[playerid][pDrogaTipo] = 1;
			InfoPersonaje[playerid][pDrogaPower] = 2;
			InfoPersonaje[playerid][pDrogaTiempo] = 15;
		}
		else
		{
			InfoPersonaje[playerid][pDrogaPower] = 3;
			InfoPersonaje[playerid][pDrogaTiempo] += 10;
		}

		if (InfoPersonaje[playerid][pAdiccion][0] == 0)
        {
			if (InfoPersonaje[playerid][pAdiccion][1] > 0 || InfoPersonaje[playerid][pAdiccion][2] > 0) InfoPersonaje[playerid][pAdiccion][0] = 5;
			else InfoPersonaje[playerid][pAdiccion][0] = 3;
		}
        else
        {
            new addiction = random(6);
            if (InfoPersonaje[playerid][pAdiccion][1] > 0 || InfoPersonaje[playerid][pAdiccion][2] > 0) InfoPersonaje[playerid][pAdiccion][0] += 5+addiction;
            else InfoPersonaje[playerid][pAdiccion][0] += 3+addiction;
        }
        if (InfoPersonaje[playerid][pAdiccion][0] > 100) InfoPersonaje[playerid][pAdiccion][0] = 100;
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET AbstinenceTime = '%d', Droga_tipo = '%d', Droga_tiempo = '%d', Droga_power = '%d', Adiccion_1 = '%d' WHERE ID = '%d'",
		InfoPersonaje[playerid][pAbstinenceTime], InfoPersonaje[playerid][pDrogaTipo], InfoPersonaje[playerid][pDrogaTiempo], InfoPersonaje[playerid][pDrogaPower], InfoPersonaje[playerid][pAdiccion][0], InfoPersonaje[playerid][pID]);
		mysql_tquery(DBInsanity, query);
    }
    else if (strcmp(params[0], "crack", true) == 0)
    {
        new obj = 44;
        if (no_tiene_manos(playerid, obj) == 0) return 1;
        if (efecto_droga == 2 && potencia_efecto == 3) return SendClientMessage(playerid, COLOR_RED, "Ya consumiste demasiado crack.");

        //resta la droga
        if (InfoPersonaje[playerid][pManoDerecha] == obj) InfoPersonaje[playerid][pManoDerechaCant] --;
        else InfoPersonaje[playerid][pManoIzquierdaCant] --;
        ActualizarManos(playerid);
        if(efecto_droga != 0 && efecto_droga != 2) ContadorCuraciones[playerid] = 0;
        KillTimer(random_abstinence[playerid]);
        if(InfoPersonaje[playerid][pAdiccion][1] > 0 && InfoPersonaje[playerid][pAbstinenceEffect] == 1) InfoPersonaje[playerid][pAbstinenceTime] = 0;

        SendClientMessage(playerid, 0xFFFF00AA, "Consumes crack.");
        SendClientMessage(playerid, 0x9ACD32AA, "Te sientes más resistente. Sientes un mayor bienestar. Desarrollas paranoia, estás atento a todo tu entorno.");
        if (potencia_efecto != 0 && efecto_droga != 2) InfoPersonaje[playerid][pDrogaPower] = 0;

        if (efecto_droga != 2)
        {
			SetPlayerWeather(playerid, 124);
            ContadorCuraciones[playerid] = 6;
            SetTimerEx("DrogaCuracion", 5000, false, "i", playerid);
			InfoPersonaje[playerid][pDrogaTipo] = 2;
			InfoPersonaje[playerid][pDrogaPower] = 2;
			InfoPersonaje[playerid][pDrogaTiempo] = 20;
		}
		else
		{
			InfoPersonaje[playerid][pDrogaPower] = 3;
			InfoPersonaje[playerid][pDrogaTiempo] += 10;
		}
        if (InfoPersonaje[playerid][pAdiccion][1] == 0)
        {
            if (InfoPersonaje[playerid][pAdiccion][0] > 0 || InfoPersonaje[playerid][pAdiccion][2] > 0) InfoPersonaje[playerid][pAdiccion][1] = 7;
            else InfoPersonaje[playerid][pAdiccion][1] = 4;
        }
        else
        {
            new addiction = random(6);
            if(InfoPersonaje[playerid][pAdiccion][0] > 0 || InfoPersonaje[playerid][pAdiccion][2] > 0) InfoPersonaje[playerid][pAdiccion][1] += 7+addiction;
            else InfoPersonaje[playerid][pAdiccion][1] += 4+addiction;
        }
        if (InfoPersonaje[playerid][pAdiccion][1] > 100) InfoPersonaje[playerid][pAdiccion][1] = 100;
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET AbstinenceTime = '%d', Droga_tipo = '%d', Droga_tiempo = '%d', Droga_power = '%d', Adiccion_2 = '%d' WHERE ID = '%d'",
		InfoPersonaje[playerid][pAbstinenceTime], InfoPersonaje[playerid][pDrogaTipo], InfoPersonaje[playerid][pDrogaTiempo], InfoPersonaje[playerid][pDrogaPower], InfoPersonaje[playerid][pAdiccion][1], InfoPersonaje[playerid][pID]);
		mysql_tquery(DBInsanity, query);
    }
    else if (strcmp(params[0], "metanfetamina", true) == 0)
    {
        new obj = 45;
        if (no_tiene_manos(playerid, obj) == 0) return 1;
        if (efecto_droga == 3 && potencia_efecto == 3) return SendClientMessage(playerid, COLOR_RED, "Ya consumiste demasiada metanfetamina.");

        //resta la droga
        if (InfoPersonaje[playerid][pManoDerecha] == obj) InfoPersonaje[playerid][pManoDerechaCant] --;
        else InfoPersonaje[playerid][pManoIzquierdaCant] --;
        ActualizarManos(playerid);
        if(efecto_droga != 0 && efecto_droga != 3) ContadorCuraciones[playerid] = 0;
        KillTimer(random_abstinence[playerid]);
        if(InfoPersonaje[playerid][pAdiccion][2] > 0 && InfoPersonaje[playerid][pAbstinenceEffect] == 1) InfoPersonaje[playerid][pAbstinenceTime] = 0;

        SendClientMessage(playerid, 0xFFFF00AA, "Consumes metanfetamina.");
        SendClientMessage(playerid, 0x9ACD32AA, "Te sientes más enérgico y con mayor confianza. Aumenta tu concentración. Desarrollas paranoia y agresividad.");
        if (potencia_efecto != 0 && efecto_droga != 3) InfoPersonaje[playerid][pDrogaPower] = 0;

        if (efecto_droga != 3)
        {
			SetPlayerWeather(playerid, -66);
            ContadorCuraciones[playerid] = 9;
            SetTimerEx("DrogaCuracion", 13000, false, "i", playerid);
			InfoPersonaje[playerid][pDrogaTipo] = 3;
			InfoPersonaje[playerid][pDrogaPower] = 2;
			InfoPersonaje[playerid][pDrogaTiempo] = 10;
		}
    	else
		{
			InfoPersonaje[playerid][pDrogaPower] = 3;
			InfoPersonaje[playerid][pDrogaTiempo] += 5;
        }
        if (InfoPersonaje[playerid][pAdiccion][2] == 0)
        {
            if (InfoPersonaje[playerid][pAdiccion][0] > 0 || InfoPersonaje[playerid][pAdiccion][1] > 0) InfoPersonaje[playerid][pAdiccion][2] = 5;
            else InfoPersonaje[playerid][pAdiccion][2] = 3;
        }
        else
        {
            new addiction = random(3);
            if (InfoPersonaje[playerid][pAdiccion][0] > 0 || InfoPersonaje[playerid][pAdiccion][1] > 0) InfoPersonaje[playerid][pAdiccion][2] += 5+addiction;
            else InfoPersonaje[playerid][pAdiccion][2] += 3+addiction;
        }
        if(InfoPersonaje[playerid][pAdiccion][2] > 100) InfoPersonaje[playerid][pAdiccion][2] = 100;
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET AbstinenceTime = '%d', Droga_tipo = '%d', Droga_tiempo = '%d', Droga_power = '%d', Adiccion_3 = '%d' WHERE ID = '%d'",
		InfoPersonaje[playerid][pAbstinenceTime], InfoPersonaje[playerid][pDrogaTipo], InfoPersonaje[playerid][pDrogaTiempo], InfoPersonaje[playerid][pDrogaPower], InfoPersonaje[playerid][pAdiccion][2], InfoPersonaje[playerid][pID]);
		mysql_tquery(DBInsanity, query);
    }
    else if (strcmp(params[0], "marihuana", true) == 0)
    {
        SendClientMessage(playerid, COLOR_GREEN, "Para consumir marihuana utiliza /fumar (Canuto ó Blunt)");
    }
    return 1;
}

CMD:fumar(playerid, params[])
{
	new manoder = InfoPersonaje[playerid][pManoDerecha];
	/*
		41 Encendedor
		42 Paquete de cigarros
		43 Marihuana
		47 Canuto de marihuana
		48 Blunt de marihuana
		49 Cigarro
	*/
	new query[500];
	if ((manoder == 42 || manoder == 43) && InfoPersonaje[playerid][pManoDerechaCant] > 0)
	{
		if (InfoPersonaje[playerid][pManoIzquierda] != 41) return SendClientMessage(playerid, COLOR_GREY, "Debes tener un encendedor en tu mano izquierda.");
		if (InfoPersonaje[playerid][pManoIzquierdaCant] == 0) return SendClientMessage(playerid, COLOR_GREY, "El encendedor que tienes ya no tiene gas.");
		new slot = -1;
		Loop(x, 10, 0) if (InfoPersonaje[playerid][pBolsillo][x] == 0)
		{
			slot = x;
			break;
		}
		if (slot == -1) return SendClientMessage(playerid, COLOR_GREY, "No tienes donde guardar el objeto de la mano derecha.");
		switch (manoder)
		{
			case 43: //marihuana
			{
				if (!sscanf(params, "s[7]", params[0]))
				{
					if (!strcmp(params[0], "canuto", true))
					{
						RemovePlayerAttachedObject(playerid, 7);
						InfoPersonaje[playerid][pManoDerechaCant]--;
						InfoPersonaje[playerid][pManoIzquierdaCant]--;
						InfoPersonaje[playerid][pBolsillo][slot] = 43;
						InfoPersonaje[playerid][pBolsilloCant][slot] = InfoPersonaje[playerid][pManoDerechaCant];
						InfoPersonaje[playerid][pManoDerecha] = 47;
						InfoPersonaje[playerid][pManoDerechaCant] = 5;
						PonerObjeto(playerid, 1, 47);
						SendClientMessage(playerid, 0xFFFF00AA, "Te lías un canuto de marihuana, para dar otra calada utliza /fumar.");
						cmd_fumando(playerid, "5");
						mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Bolsillo_%d = '%d', Cantidad_bolsillo_%d = '%d', Mano_derecha = '%d', Cantidad_mano_derecha = '%d', Mano_izquierda = '%d', Cantidad_mano_izquierda = '%d' WHERE ID = '%d'",
						slot+1, InfoPersonaje[playerid][pBolsillo][slot], slot+1, InfoPersonaje[playerid][pBolsilloCant][slot], InfoPersonaje[playerid][pManoDerecha], InfoPersonaje[playerid][pManoDerechaCant], InfoPersonaje[playerid][pManoIzquierda], InfoPersonaje[playerid][pManoIzquierdaCant], InfoPersonaje[playerid][pID]);
						mysql_tquery(DBInsanity, query);
						return 1;
					}
					else if (!strcmp(params[0], "blunt", true))
					{
						RemovePlayerAttachedObject(playerid, 7);
						InfoPersonaje[playerid][pManoDerechaCant]--;
						InfoPersonaje[playerid][pManoIzquierdaCant]--;
						InfoPersonaje[playerid][pBolsillo][slot] = 43;
						InfoPersonaje[playerid][pBolsilloCant][slot] = InfoPersonaje[playerid][pManoDerechaCant];
						InfoPersonaje[playerid][pManoDerecha] = 0;
						InfoPersonaje[playerid][pManoDerecha] = 48;
						InfoPersonaje[playerid][pManoDerechaCant] = 5;
						PonerObjeto(playerid, 1, 48);
						SendClientMessage(playerid, 0xFFFF00AA, "Te lías un blunt de marihuana, para dar otra calada utliza /fumar.");
						cmd_fumando(playerid, "5");
						mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Bolsillo_%d = '%d', Cantidad_bolsillo_%d = '%d', Mano_derecha = '%d', Cantidad_mano_derecha = '%d', Mano_izquierda = '%d', Cantidad_mano_izquierda = '%d' WHERE ID = '%d'",
						slot+1, InfoPersonaje[playerid][pBolsillo][slot], slot+1, InfoPersonaje[playerid][pBolsilloCant][slot], InfoPersonaje[playerid][pManoDerecha], InfoPersonaje[playerid][pManoDerechaCant], InfoPersonaje[playerid][pManoIzquierda], InfoPersonaje[playerid][pManoIzquierdaCant], InfoPersonaje[playerid][pID]);
						mysql_tquery(DBInsanity, query);
						return 1;
					}
					else return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /fumar (Canuto ó Blunt)");
				}
				else return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /fumar (Canuto ó Blunt)");
			}
			case 42: //paquete cigarros
			{
				RemovePlayerAttachedObject(playerid, 7);
				InfoPersonaje[playerid][pManoDerechaCant]--;
				InfoPersonaje[playerid][pManoIzquierdaCant]--;
				InfoPersonaje[playerid][pBolsillo][slot] = 42;
				InfoPersonaje[playerid][pBolsilloCant][slot] = InfoPersonaje[playerid][pManoDerechaCant];
				InfoPersonaje[playerid][pManoDerecha] = 49;
				InfoPersonaje[playerid][pManoDerechaCant] = 5;
				PonerObjeto(playerid, 1, 49);
				SendClientMessage(playerid, 0xFFFF00AA, "Te lías un cigarro, para dar otra calada utliza /fumar.");
				cmd_fumando(playerid, "5");
				mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Bolsillo_%d = '%d', Cantidad_bolsillo_%d = '%d', Mano_derecha = '%d', Cantidad_mano_derecha = '%d', Mano_izquierda = '%d', Cantidad_mano_izquierda = '%d' WHERE ID = '%d'",
				slot+1, InfoPersonaje[playerid][pBolsillo][slot], slot+1, InfoPersonaje[playerid][pBolsilloCant][slot], InfoPersonaje[playerid][pManoDerecha], InfoPersonaje[playerid][pManoDerechaCant], InfoPersonaje[playerid][pManoIzquierda], InfoPersonaje[playerid][pManoIzquierdaCant], InfoPersonaje[playerid][pID]);
				mysql_tquery(DBInsanity, query);
				return 1;
			}
		}
	}
	else if (manoder == 47 || manoder == 48 || manoder == 49)
	{
		switch (manoder)
		{
			case 47:
			{
				if (InfoPersonaje[playerid][pDrogaTipo] != 0) ContadorCuraciones[playerid] = 0;
				KillTimer(random_abstinence[playerid]);

				if (InfoPersonaje[playerid][pDrogaTipo] != 4)
				{
					SendClientMessage(playerid, 0x9ACD32AA, "Te sientes cada vez más relajado. Todo te causa gracia. De vez en cuando cambia tu forma de pensar y comportamiento.");
					InfoPersonaje[playerid][pDrogaTipo] = 4;
					InfoPersonaje[playerid][pDrogaPower] = 1;
					InfoPersonaje[playerid][pDrogaTiempo] = 3;
					ContadorCuraciones[playerid] = 29;
					Loop(x, 3, 0) { TextDrawShowForPlayer(playerid, TDmariguana[x]); }
					SetPlayerWeather(playerid, 124);
					SetTimerEx("DrogaCuracion", 15000, false, "i", playerid);
				}
				else
				{
					InfoPersonaje[playerid][pDrogaPower] += 1;
					InfoPersonaje[playerid][pDrogaTiempo] += 1;
				}
				InfoPersonaje[playerid][pManoDerechaCant]--;
				cmd_fumando(playerid, "5");
				mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Cantidad_mano_derecha = '%d', Droga_tipo = '%d', Droga_power = '%d', Droga_tiempo = '%d' WHERE ID = '%d'", InfoPersonaje[playerid][pManoDerechaCant], InfoPersonaje[playerid][pDrogaTipo], InfoPersonaje[playerid][pDrogaPower], InfoPersonaje[playerid][pDrogaTiempo], InfoPersonaje[playerid][pID]);
				mysql_tquery(DBInsanity, query);
				return 1;
			}
			case 48:
			{
				if (InfoPersonaje[playerid][pDrogaTipo] != 0) ContadorCuraciones[playerid] = 0;
				KillTimer(random_abstinence[playerid]);

				if (InfoPersonaje[playerid][pDrogaTipo] != 4)
				{
					SendClientMessage(playerid, 0x9ACD32AA, "Te sientes cada vez más relajado. Todo te causa gracia. De vez en cuando cambia tu forma de pensar y comportamiento.");
					InfoPersonaje[playerid][pDrogaTipo] = 4;
					InfoPersonaje[playerid][pDrogaPower] = 1;
					InfoPersonaje[playerid][pDrogaTiempo] = 3;
					ContadorCuraciones[playerid] = 15;
					Loop(x, 3, 0) { TextDrawShowForPlayer(playerid, TDmariguana[x]); }
					SetPlayerWeather(playerid, 124);
					SetTimerEx("DrogaCuracion", 15000, false, "i", playerid);
				}
				else
				{
					InfoPersonaje[playerid][pDrogaPower] += 1;
					InfoPersonaje[playerid][pDrogaTiempo] += 1;
				}
				InfoPersonaje[playerid][pManoDerechaCant]--;
				cmd_fumando(playerid, "5");
				mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Cantidad_mano_derecha = '%d', Droga_tipo = '%d', Droga_power = '%d', Droga_tiempo = '%d' WHERE ID = '%d'", InfoPersonaje[playerid][pManoDerechaCant], InfoPersonaje[playerid][pDrogaTipo], InfoPersonaje[playerid][pDrogaPower], InfoPersonaje[playerid][pDrogaTiempo], InfoPersonaje[playerid][pID]);
				mysql_tquery(DBInsanity, query);
				return 1;
			}
			case 49:
			{
				InfoPersonaje[playerid][pManoDerechaCant]--;
				cmd_fumando(playerid, "5");
				ActualizarManos(playerid);
			}
			default: return SendClientMessage(playerid, COLOR_GREY, "No tienes nada en manos que fumar.");
		}
	}
	else return SendClientMessage(playerid, COLOR_GREY, "No tienes nada para encender o fumar en tu mano derecha.");
	return 1;
}

forward DrogaCuracion(playerid);
public DrogaCuracion(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") != 0)
	{
		ContadorCuraciones[playerid] = 0;
		return 1;
	}
	if (InfoPersonaje[playerid][pDrogaTipo] != 0 && ContadorCuraciones[playerid] != 0)
	{
		new tiempo, Float:curacion, Float:sangre = InfoPersonaje[playerid][pVida];
		switch (InfoPersonaje[playerid][pDrogaTipo])
		{
			case 1: curacion = 7.0, tiempo = 10000;
			case 2: curacion = 15.0, tiempo = 5000;
			case 3: curacion = 10.0, tiempo = 13000;
			case 4: curacion = 6.0, tiempo = 15000;
		}
		if (curacion+sangre > 100.0) dar_vida(playerid, 100.0), ContadorCuraciones[playerid] = 0;
		else
		{
			dar_vida(playerid, sangre+curacion);
			ContadorCuraciones[playerid] --;
			if (ContadorCuraciones[playerid] > 0) SetTimerEx("DrogaCuracion", tiempo, false, "i", playerid);
		}
	}
	else ContadorCuraciones[playerid] = 0;
	return 1;
}

CMD:fumando(playerid, params[])
{
	new animacion;
	if (sscanf(params, "d", animacion)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /fumando (1-7)");
	switch (animacion)
	{
		case 1: ApplyAnimation(playerid, 	"SMOKING",	"M_smklean_loop",	4.0, 1, 0, 1, 0, 0, 1);
		case 2: ApplyAnimation(playerid, 	"SMOKING",	"M_smkstnd_loop",	4.0, 1, 0, 1, 0, 0, 1);
		case 3: ApplyAnimation(playerid, 	"SMOKING",	"M_smk_out",		4.0, 0, 1, 1, 0, 0, 1);
		case 4: ApplyAnimation(playerid, 	"SMOKING",	"M_smk_in",			4.0, 0, 1, 1, 0, 0, 1);
		case 5: ApplyAnimation(playerid, 	"GANGS", 	"smkcig_prtl",		4.0, 0, 1, 1, 0, 0, 1);
		case 6: ApplyAnimation(playerid, 	"SMOKING",	"M_smk_drag",		4.0, 0, 1, 1, 0, 0, 1);
		case 7: ApplyAnimation(playerid,	"SMOKING",	"F_smklean_loop",	4.0, 1, 0, 1, 0, 0, 1);
		default: SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /fumando (1-7)");
	}
	return 1;
}

CMD:adminmap(playerid)
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	SendClientMessage(playerid, COLOR_YELLOW, "Comandos del sistema de objetos dinámicos (MAP)");
	SendClientMessage(playerid, 0xEBEBEBFF, "/mapear (Para crear objeto) - /a_objetos (Ver objetos en rango especifico) - /irobjeto (Ir objeto especifico)");
	SendClientMessage(playerid, 0xEBEBEBFF, "/objetosadmin (Para ver diálogo de objetos creados) - /editar_objeto (Editar objeto especifico)");
	SendClientMessage(playerid, 0xEBEBEBFF, "/aborrarobjeto (Borrar objeto especifico) - /borrarobjetoadmin (Borrar objeto más cercano)");
	return 1;
}

CMD:a_objetos(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[128], radius;
	if (sscanf(params, "d", radius)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /a_objetos (Radio)");
	if (radius < 1 || radius > 100) { SendClientMessage(playerid, COLOR_GREY, "El radio debe ser de 1 a 100."); return 1; }
	Loop(id, MAX_OBJETOS_ADMIN, 1) if (IsPlayerInRangeOfPoint(playerid, radius, InfoObjeto[id][oPotX], InfoObjeto[id][oPotY], InfoObjeto[id][oPotZ]) && InfoPersonaje[playerid][pInterior] == InfoObjeto[id][oInterior] && InfoPersonaje[playerid][pVirtualWorld] == InfoObjeto[id][oVirtualWorld])
	{
		format(string, sizeof string, "ID: %d - Modelo: %d", id, InfoObjeto[id][oModelo]);
		SendClientMessage(playerid, COLOR_YELLOW, string);
	}
	return 1;
}

CMD:irobjeto(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new id;
	if (sscanf(params, "i", id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /irobjeto (ObjetoID)");
	if (id < 1 || id >= MAX_OBJETOS_ADMIN) return SendClientMessage(playerid, COLOR_GREY, "ID de objeto admin inválido.");
	if (!InfoObjeto[id][oPotX]) return SendClientMessage(playerid, COLOR_GREY, "ID Invalida.");

	SetPosEx(playerid, InfoObjeto[id][oPotX], InfoObjeto[id][oPotY], InfoObjeto[id][oPotZ], 0.0, InfoObjeto[id][oInterior], InfoObjeto[id][oVirtualWorld], 1);
	SendClientMessage(playerid, COLOR_LIGHTBLUE, "Teleportado.");
	return 1;
}

CMD:aborrarobjeto(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new id;
	if (sscanf(params, "i", id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /aborrarobjeto (ObjetoID)");
	if (id < 1 || id >= MAX_OBJETOS_ADMIN) return SendClientMessage(playerid, COLOR_GREY, "ID de objeto admin inválido.");
	if (!InfoObjeto[id][oPotX]) return SendClientMessage(playerid, COLOR_GREY, "ID Invalida.");

	if (IsValidDynamicObject(InfoObjeto[id][oObjeto])) DestroyDynamicObject(InfoObjeto[id][oObjeto]);

	new string[256];
	format(string, sizeof string , "Borraste el objeto ID %d (Modelo: %d), SQL vacía: %d", id, InfoObjeto[id][oModelo], InfoObjeto[id][oID_sql]);

	InfoObjeto[id][oModelo] = 0;
	InfoObjeto[id][oPotX] = 0.0;
	InfoObjeto[id][oPotY] = 0.0;
	InfoObjeto[id][oPotZ] = 0.0;
	InfoObjeto[id][oRotX] = 0.0;
	InfoObjeto[id][oRotY] = 0.0;
	InfoObjeto[id][oRotZ] = 0.0;
	InfoObjeto[id][oInterior] = 0;
	InfoObjeto[id][oVirtualWorld] = 0;

	new query[1028];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE objetos_admin SET Modelo = 0, PotX = 0.0, PotY = 0.0, PotZ = 0.0, RotX = 0.0, RotY = 0.0, RotZ = 0.0, Interior = 0, VirtualWorld = 0 WHERE ID = '%d'", InfoObjeto[id][oID_sql]);
	mysql_tquery(DBInsanity, query);

	SendClientMessage(playerid, -1, string);
	return 1;
}

CMD:borrarobjetoadmin(playerid)
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	Loop(id, MAX_OBJETOS_ADMIN, 1) if (InfoObjeto[id][oPotX] != 0.0)
	{
		if (IsPlayerInRangeOfPoint(playerid, 3.0, InfoObjeto[id][oPotX], InfoObjeto[id][oPotY], InfoObjeto[id][oPotZ]) && InfoPersonaje[playerid][pInterior] == InfoObjeto[id][oInterior] && InfoPersonaje[playerid][pVirtualWorld] == InfoObjeto[id][oVirtualWorld])
		{
			if (IsValidDynamicObject(InfoObjeto[id][oObjeto])) DestroyDynamicObject(InfoObjeto[id][oObjeto]);

			new string[256];
			format(string, sizeof string , "Borraste el objeto ID %d (Modelo: %d), SQL vacía: %d", id, InfoObjeto[id][oModelo], InfoObjeto[id][oID_sql]);

			InfoObjeto[id][oModelo] = 0;
			InfoObjeto[id][oPotX] = 0.0;
			InfoObjeto[id][oPotY] = 0.0;
			InfoObjeto[id][oPotZ] = 0.0;
			InfoObjeto[id][oRotX] = 0.0;
			InfoObjeto[id][oRotY] = 0.0;
			InfoObjeto[id][oRotZ] = 0.0;
			InfoObjeto[id][oInterior] = 0;
			InfoObjeto[id][oVirtualWorld] = 0;

			new query[2048];
			mysql_format(DBInsanity, query, sizeof query, "UPDATE objetos_admin SET Modelo = 0, PotX = 0.0, PotY = 0.0, PotZ = 0.0, RotX = 0.0, RotY = 0.0, RotZ = 0.0, Interior = 0, VirtualWorld = 0 WHERE ID = '%d'", InfoObjeto[id][oID_sql]);
			mysql_tquery(DBInsanity, query);

			SendClientMessage(playerid, -1, string);
			return 1;
		}
	}
	SendClientMessage(playerid, COLOR_GREY, "No estás cerca de ningún objeto dinámico admin.");
	return 1;
}

CMD:objetosadmin(playerid)
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new as2[256], DComandosAdmin[3500], tobjects, i = 0;
	Loop(id, MAX_OBJETOS_ADMIN, 1) if (InfoObjeto[id][oPotX] != 0.0)
	{
		i++;
		format(as2, sizeof(as2), "ID: %d | OBJETO: %d | ", id, InfoObjeto[id][oModelo]);
		strcat(DComandosAdmin, as2);
		if (i == 6)
		{
			i = 0;
			strcat(DComandosAdmin, "\n");
		}
		tobjects++;
	}
	if(tobjects > 0) Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "Objetos admin", DComandosAdmin, "Cerrar", "");
	else Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "Objetos admin", "{FFFFFF}No hay ningún objeto dinámico creado.", "Cerrar", "");
	return 1;
}

CMD:editar_objeto(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new id;
	if (InfoPersonaje[playerid][pEditingMode] != 0) return SendClientMessage(playerid, COLOR_GREY, "Estás editando un objeto.");
	if (sscanf(params, "d", id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editar_objeto (ObjetoID)");
	if (id < 1 || id >= MAX_OBJETOS_ADMIN) return SendClientMessage(playerid, COLOR_GREY, "ID de objeto admin inválido.");
	if (!InfoObjeto[id][oPotX]) return SendClientMessage(playerid, COLOR_GREY, "ID Invalida.");

	if (IsPlayerInRangeOfPoint(playerid, 3.0, InfoObjeto[id][oPotX], InfoObjeto[id][oPotY], InfoObjeto[id][oPotZ]) && InfoPersonaje[playerid][pInterior] == InfoObjeto[id][oInterior] && InfoPersonaje[playerid][pVirtualWorld] == InfoObjeto[id][oVirtualWorld])
	{
		edicion_sql_actual[playerid] = id;
		InfoPersonaje[playerid][pEditingMode] = 4;
		EditDynamicObject(playerid, InfoObjeto[id][oObjeto]);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "No estás cerca del objeto.");
	return 1;
}

CMD:mapear(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new id = -1;
	Loop(x, MAX_OBJETOS_ADMIN, 1) if (InfoObjeto[x][oModelo] == 0)
	{
		id = x;
		break;
	}
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "Se alcanzó el límite de objetos admin (200).");
	if (isnull(params))
	{
		new OA[20];
		OA[0] = 2636; OA[1] = 2121; OA[2] = 1811; OA[3] = 2748; OA[4] = 2763; OA[5] = 2644; OA[6] = 2188; OA[7] = 11691; OA[8] = 2111; OA[9] = 1824; OA[10] = 1896;
		OA[11] = 1516; OA[12] = 15037; OA[13] = 2636; OA[14] = 3039; OA[15] = 3862; OA[16] = 3040; OA[17] = 3860; OA[18] = 8572; OA[19] = 19470;
		ShowModelSelectionMenuEx(playerid, OA, 20, "Objetos	", IDObj_Admin);
		edicion_sql_actual[playerid] = id;
	}
	else
	{
		new modelid;
		if (sscanf(params, "d", modelid)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /crearobjetoadmin (Modelo de SAMP)");
		if (modelid < 700 || modelid > 19000) return SendClientMessage(playerid, COLOR_GREY, "Modelo inválido, intenta con otro.");

		Creando_Objeto_Admin(playerid, id, modelid);
	}
	return 1;
}
CMD:crearobjetoadmin(playerid, params[]) return cmd_mapear(playerid, params);

Creando_Objeto_Admin(playerid, id, modelid)
{
	new query[1028];
	GetPlayerPos(playerid, InfoObjeto[id][oPotX], InfoObjeto[id][oPotY], InfoObjeto[id][oPotZ]);
	InfoObjeto[id][oModelo] = modelid;
	InfoObjeto[id][oInterior] = GetPlayerInterior(playerid);
	InfoObjeto[id][oVirtualWorld] = GetPlayerVirtualWorld(playerid);
	InfoObjeto[id][oObjeto] = CreateDynamicObject(InfoObjeto[id][oModelo], InfoObjeto[id][oPotX]-2.0, InfoObjeto[id][oPotY]-1.0, InfoObjeto[id][oPotZ], InfoObjeto[id][oRotX], InfoObjeto[id][oRotY], InfoObjeto[id][oRotZ], .interiorid = InfoObjeto[id][oInterior], .worldid = InfoObjeto[id][oVirtualWorld]);
	edicion_sql_actual[playerid] = id;
	InfoPersonaje[playerid][pEditingMode] = 4;
	EditDynamicObject(playerid, InfoObjeto[id][oObjeto]);
	//opción idsql ya creada.
	if (InfoObjeto[id][oID_sql] != 0)
	{
		mysql_format(DBInsanity, query, sizeof query, "UPDATE objetos_admin SET Modelo = '%d', PotX = '%f', PotY = '%f', PotZ = '%f', RotX = '%f', RotY = '%f', RotZ = '%f', Interior = '%d', VirtualWorld = '%d' WHERE ID = '%d'",
		InfoObjeto[id][oModelo],
		InfoObjeto[id][oPotX],
		InfoObjeto[id][oPotY],
		InfoObjeto[id][oPotZ],
		InfoObjeto[id][oRotX],
		InfoObjeto[id][oRotY],
		InfoObjeto[id][oRotZ],
		InfoObjeto[id][oInterior],
		InfoObjeto[id][oVirtualWorld],
		InfoObjeto[id][oID_sql]);
		mysql_tquery(DBInsanity, query);
		return 1;
	}
	mysql_format(DBInsanity, query, sizeof query, "INSERT INTO objetos_admin (Modelo, PotX, PotY, PotZ, RotX, RotY, RotZ, Interior, VirtualWorld) VALUES ('%d', '%f', '%f', '%f', '%f', '%f', '%f', '%d', '%d')",
	InfoObjeto[id][oModelo],
	InfoObjeto[id][oPotX],
	InfoObjeto[id][oPotY],
	InfoObjeto[id][oPotZ],
	InfoObjeto[id][oRotX],
	InfoObjeto[id][oRotY],
	InfoObjeto[id][oRotZ],
	InfoObjeto[id][oInterior],
	InfoObjeto[id][oVirtualWorld]);
	mysql_tquery(DBInsanity, query, "OnObjetoAdminCreate", "i", id);
	return 1;
}

forward OnObjetoAdminCreate(id);
public OnObjetoAdminCreate(id)
{
	InfoObjeto[id][oID_sql] = cache_insert_id();
	cache_unset_active();
    return 1;
}

CMD:listaadmin(playerid) return cmd_listaadmins(playerid);
CMD:listaadmins(playerid)
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	mysql_tquery(DBInsanity, "SELECT * FROM cuentas WHERE JotoOtaku != 0", "OnMembersAdmin", "d", playerid);
	return 1;
}
CMD:administracion(playerid) return cmd_listaadmins(playerid);

forward OnMembersAdmin(playerid);
public OnMembersAdmin(playerid)
{
	new members = 0, gformat[256], dialog[3072] = "Nombre\tRango\tEstado\tDuty\n";
	Loop(player, cache_num_rows(), 0)
	{
		new nombreapellido[32], rango, newid = -1, isname[32] = "Admin";
		reg_string(player, "Nombre", nombreapellido, 32);
		reg_int(player, "JotoOtaku", rango);
		//fix 22/04/2020
		foreach(Player, juegador) if (IsPlayerConnectedEx(juegador) && !strcmp(InfoCuenta[juegador][jNombre], nombreapellido, true)) { newid = juegador; }
		//fix 22/04/2020
		//leer nombre rango
		if (!strcmp(nombreapellido, "Andres", true)) { alm(isname, "Propietario"); }
		else if (!strcmp(nombreapellido, "Artic", true)) { alm(isname, "Programador"); }
		else
		{
			switch (rango)
			{
				case 1: alm(isname, "Orientador");
				case 2: alm(isname, "Moderador I");
				case 3: alm(isname, "Moderador II");
				case 4: alm(isname, "Moderador III");
				case 5: alm(isname, "Administrador");
				case 6: alm(isname, "Game Operator");
			}
		}
		//muestra
		if (IsPlayerConnectedEx(newid)) format(gformat, sizeof gformat, "%s\t%s (%d)\t{29B311}Conectado (ID %d)\t%s\n", nombreapellido, isname, rango, newid, (papilla[newid]) ? ("{55AD30}On-duty") : ("{F92B2B}Off-duty"));
		else format(gformat, sizeof gformat, "%s\t%s (%d)\t{E24D32}Desconectado\n", nombreapellido, isname, rango);
		strcat(dialog, gformat);
		format(gformat, sizeof gformat, "Miembro_List%d", members);
		SetPVarString(playerid, gformat, nombreapellido);
		members++;
	}
	if (members == 0) return Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_LIST, "Administración {00AE57}Insanity Roleplay", "{FFFFFF}No se encontraron miembros de la administración.", "Cerrar", "");
	if (GetPlayerAdmin(playerid, 10) != 0) Dialog_Show(playerid, MenuAdmins, DIALOG_STYLE_TABLIST_HEADERS, "Administración {00AE57}Insanity Roleplay", dialog, "Continuar", "Salir");
	else Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_TABLIST_HEADERS, "Administración {00AE57}Insanity Roleplay", dialog, "Cerrar", "");
	return 1;
}

Dialog:MenuAdmins(playerid, response, listitem, inputtext[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (!response) return 1;
	new ID = listitem, gformat[128], nombre_miembro[32];
	format(gformat, sizeof gformat, "Miembro_List%d", ID);
	GetPVarString(playerid, gformat, nombre_miembro, sizeof nombre_miembro);
	SetPVarString(playerid, "Miembro_Actual", nombre_miembro);
	format(gformat, sizeof gformat, "Miembro: {00AE57}%s", nombre_miembro);
	Dialog_Show(playerid, OpcionAdmins, DIALOG_STYLE_LIST, gformat, "Dar rango\nÚltima conexión\n{B00000}Expulsar de la administración", "Continuar", "Volver");
	return 1;
}

Dialog:OpcionAdmins(playerid, response, listitem, inputtext[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (!response) return cmd_listaadmins(playerid);
	new nombre_miembro[32], newid, string[320], ultimaconexion[256];
	GetPVarString(playerid, "Miembro_Actual", nombre_miembro, sizeof nombre_miembro);
	//fix 22/04/2020
	foreach(Player, juegador) if (IsPlayerConnectedEx(juegador) && !strcmp(InfoCuenta[juegador][jNombre], nombre_miembro, true)) { newid = juegador; }
 	//fix 22/04/2020
	if (VerificarCuenta(nombre_miembro))
	{
		reg_string(0, "UltimaConexion", ultimaconexion, 256);
	}
	else return SendClientMessage(playerid, COLOR_GREY, "Esa cuenta no existe.");
	switch (listitem)
	{
		case 0: //dar rango admin
		{
			new dialog[254], titulo[64];
			strcat(dialog, "Orientador\n");
			strcat(dialog, "Moderador I\n");
			strcat(dialog, "Moderador II\n");
			strcat(dialog, "Moderador III\n");
			strcat(dialog, "Administrador\n");
			strcat(dialog, "Game Operator\n");
			format(titulo, sizeof titulo, "Admin: {00AE57}%s", nombre_miembro);
			Dialog_Show(playerid, DarAdminRango, DIALOG_STYLE_LIST, titulo, dialog, "Continuar", "Salir");
		}
		case 1: //última conexión
		{
			if (IsPlayerConnectedEx(newid))
			{
				format(string, sizeof string, "%s está conectado ID: %d", nombre_miembro, newid);
				SendClientMessage(playerid, COLOR_GREEN, string);
				return 1;
			}
			format(string, sizeof string, "%s: %s", nombre_miembro, ultimaconexion);
			SendClientMessage(playerid, COLOR_PURPLE, string);
		}
		case 2: //expulsar de la facción
		{
			//leer nombre rango
			if (!strcmp(nombre_miembro, "Andres", true))
			{
				SendClientMessage(playerid, COLOR_RED, "No intentes expulsar a Kozlov gAy.");
				return 1;
			}
			else if (!strcmp(nombre_miembro, "Artic", true))
			{
				SendClientMessage(playerid, COLOR_RED, "wtf no podés sacar a artickkkkkk XDDXDXD");
				return 1;
			}
			new list[32];
			alm(list, "niub");
			if (IsPlayerConnectedEx(newid))
			{
				if (playerid == newid) return SendClientMessage(playerid, COLOR_GREY, "No te puedes expulsar de la administración.");
				alm(InfoCuenta[newid][jApodo], list);
				InfoCuenta[newid][jAdmin] = 0;
				InfoCuenta[newid][jEncFac] = 0;
				papilla[newid] = 0;
				SetPlayerColor(newid, 0xFFFFFF00);
				GivePlayerSkin(newid, 155);
			}
			format(string, sizeof string, "Administración{FFFFFF} %s(%d) expulsó de la administración a %s.", InfoCuenta[playerid][jApodo], playerid, nombre_miembro);
			SendAdminMessage(0xFF6347FF, string);
			mysql_format(DBInsanity, string, sizeof string, "UPDATE cuentas SET Apodo = '%e', JotoOtaku = 0, EncFac = 0 WHERE Nombre = '%e'", list, nombre_miembro);
			mysql_tquery(DBInsanity, string);
		}
	}
	return 1;
}

Dialog:DarAdminRango(playerid, response, listitem, inputtext[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (!response) return 1;
	new nombre_miembro[32], newid = -1, string[256], rango = listitem+1;
	GetPVarString(playerid, "Miembro_Actual", nombre_miembro, sizeof nombre_miembro);
	//fix 22/04/2020
	foreach(Player, juegador) if (IsPlayerConnectedEx(juegador) && !strcmp(InfoCuenta[juegador][jNombre], nombre_miembro, true)) { newid = juegador; }
	//fix 22/04/2020
	if (IsPlayerConnectedEx(newid)) InfoCuenta[newid][jAdmin] = rango;
	new isname[32];
	switch (rango)
	{
		case 1: alm(isname, "Orientador");
		case 2: alm(isname, "Moderador I");
		case 3: alm(isname, "Moderador II");
		case 4: alm(isname, "Moderador III");
		case 5: alm(isname, "Administrador");
		case 6: alm(isname, "Game Operator");
	}

	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) ha asignado %s(%d) a %s.", InfoCuenta[playerid][jApodo], playerid, isname, rango, nombre_miembro);
	SendAdminMessage(0xFF6347FF, string);

	mysql_format(DBInsanity, string, sizeof string, "UPDATE cuentas SET JotoOtaku = '%d' WHERE Nombre = '%e'", rango, nombre_miembro);
	mysql_tquery(DBInsanity, string);
	return 1;
}

CMD:darempleo(playerid)
{
	SendClientMessage(playerid, COLOR_GREEN, "Comandos hábiles:{EBEBEB} /darempleo1 ({00A2FF}tu negocio slot 1{EBEBEB}) - /darempleo2 ({00A2FF}tu negocio slot 2{EBEBEB})");
	return 1;
}
CMD:dartrabajo(playerid) return cmd_darempleo(playerid);
CMD:darjob(playerid) return cmd_darempleo(playerid);

NegocioEmpleados(id)
{
	switch (InfoNegocio[id][nTipo])
	{
		case 6: return 1;
		case 9: return 1;
		case 12: return 1;
		case 13: return 1;
	}
	return 0;
}

CMD:darempleo1(playerid, params[])
{
	if (YaOfrecioEmpleo[playerid] != -1) return SendClientMessage(playerid, COLOR_GREY, "Ya has ofrecido empleo.");
	new id = InfoPersonaje[playerid][pNegocio1], playerid2, dialog[550];
	if (InfoPersonaje[playerid][pNegocio1] == -1) return SendClientMessage(playerid, COLOR_GREY, "No tienes ningún negocio en el slot 1.");
	if (NegocioEmpleados(id) == 0) return SendClientMessage(playerid, COLOR_GREY, "Tu negocio del slot 1, no puede tener empleados.");
	if (GetEmpleadosFabrica(id) >= 20) return SendClientMessage(playerid, COLOR_GREY, "No puedes tener más de 20 empleados en tu negocio del slot 1.");
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /darempleo1 (PlayerID)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "El jugador seleccionado no se encuentra conectado.");
	if (TomandoTrabajo[playerid2] != -1) return SendClientMessage(playerid, COLOR_GREY, "Este jugador está en otra tarea, espera.");
	if (InfoPersonaje[playerid2][pContrato] != -1) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador ya está trabajando en otro negocio/empresa.");
	IDfabrica[playerid2] = id;
	TomandoTrabajo[playerid2] = playerid;
	YaOfrecioEmpleo[playerid] = playerid2;
	format(dialog, sizeof dialog, "{EBEBEB}%s te ha ofrecido trabajar en su negocio/empresa:\n\
	{00AE57}%s, {EBEBEB}si quieres ser parte presiona 'si', de lo contrario presiona 'no'.\n", NombreJugador(playerid), InfoNegocio[id][nNombre]);
	Dialog_Show(playerid2, InviteEmpleo, DIALOG_STYLE_MSGBOX, "Unirse empleo", dialog, "Si", "No");
	format(dialog, sizeof dialog, "Has ofrecido a %s, trabajar en tu negocio/empresa.", NombreJugador(playerid2));
	SendClientMessage(playerid, COLOR_GREEN, dialog);
	return 1;
}
CMD:dartrabajo1(playerid, params[]) return cmd_darempleo1(playerid, params);
CMD:darjob1(playerid, params[]) return cmd_darempleo1(playerid, params);

CMD:darempleo2(playerid, params[])
{
	if (YaOfrecioEmpleo[playerid] != -1) return SendClientMessage(playerid, COLOR_GREY, "Ya has ofrecido empleo.");
	new id = InfoPersonaje[playerid][pNegocio2], playerid2, dialog[550];
	if (InfoPersonaje[playerid][pNegocio2] == -1) return SendClientMessage(playerid, COLOR_GREY, "No tienes ningún negocio en el slot 2.");
	if (NegocioEmpleados(id) == 0) return SendClientMessage(playerid, COLOR_GREY, "Tu negocio del slot 2, no puede tener empleados.");
	if (GetEmpleadosFabrica(id) >= 20) return SendClientMessage(playerid, COLOR_GREY, "No puedes tener más de 20 empleados en tu negocio del slot 2.");
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /darempleo2 (PlayerID)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "El jugador seleccionado no se encuentra conectado.");
	if (TomandoTrabajo[playerid2] != -1) return SendClientMessage(playerid, COLOR_GREY, "Este jugador está en otra tarea, espera.");
	if (InfoPersonaje[playerid2][pContrato] != -1) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador ya está trabajando en otro negocio/empresa.");
	IDfabrica[playerid2] = id;
	TomandoTrabajo[playerid2] = playerid;
	YaOfrecioEmpleo[playerid] = playerid2;
	format(dialog, sizeof dialog, "{EBEBEB}%s te ha ofrecido trabajar en su negocio/empresa:\n\
	{00AE57}%s, {EBEBEB}si quieres ser parte presiona 'si', de lo contrario presiona 'no'.\n", NombreJugador(playerid), InfoNegocio[id][nNombre]);
	Dialog_Show(playerid2, InviteEmpleo, DIALOG_STYLE_MSGBOX, "Unirse empleo", dialog, "Si", "No");
	format(dialog, sizeof dialog, "Has ofrecido a %s, trabajar en tu negocio/empresa.", NombreJugador(playerid2));
	SendClientMessage(playerid, COLOR_GREEN, dialog);
	return 1;
}
CMD:dartrabajo2(playerid, params[]) return cmd_darempleo2(playerid, params);
CMD:darjob2(playerid, params[]) return cmd_darempleo2(playerid, params);

Dialog:InviteEmpleo(playerid, response, listitem, inputtext[])
{
	new string[256], playerid2 = TomandoTrabajo[playerid], id = IDfabrica[playerid], query[512];
	if (!IsPlayerConnectedEx(playerid2))
	{
		TomandoTrabajo[playerid] = -1;
		SendClientMessage(playerid, COLOR_GREY, "El dueño se ha desconectado, perdiste la oferta.");
		return 1;
	}
	if (!response) //rechazo
	{
		format(string, sizeof string, "Rechaste la invitación a %s.", InfoNegocio[id][nNombre]);
		SendClientMessage(playerid, 0xEFEFEFFF, string);
		format(string, sizeof string, "%s rechazó la invitación", NombreJugador(playerid));
		SendClientMessage(playerid2, 0xEFEFEFFF, string);
		TomandoTrabajo[playerid] = -1;
		YaOfrecioEmpleo[playerid2] = -1;
		return 1;
	}
	//acepto
	InfoPersonaje[playerid][pContrato] = id;
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Contrato = '%d' WHERE ID = '%d'", InfoPersonaje[playerid][pContrato], InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, query);
	format(string, sizeof string, "Ahora trabajas en el negocio '%s'.", InfoNegocio[id][nNombre]);
	SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	format(string, sizeof string, "%s aceptó la invitación, ahora tienes un total de %d empleados.", NombreJugador(playerid), GetEmpleadosFabrica(id));
	SendClientMessage(playerid2, COLOR_LIGHTBLUE, string);
	format(string, sizeof string, "Registros: %s ahora trabaja en %s por %s.", NombreDeCuenta(playerid), InfoNegocio[id][nNombre], NombreDeCuenta(playerid2));
	Log("LOGS/UnirseEmpleo.log", string);
	TomandoTrabajo[playerid] = -1;
	YaOfrecioEmpleo[playerid2] = -1;
	return 1;
}

CMD:listaempleados(playerid)
{
	SendClientMessage(playerid, COLOR_GREEN, "Comandos hábiles:{EBEBEB} /empleados1 ({00A2FF}tu negocio slot 1{EBEBEB}) - /empleados2 ({00A2FF}tu negocio slot 2{EBEBEB})");
	return 1;
}
CMD:empleados(playerid) return cmd_listaempleados(playerid);

CMD:listaempleados1(playerid)
{
	new id = InfoPersonaje[playerid][pNegocio1], query[256];
	if (InfoPersonaje[playerid][pNegocio1] == -1) return SendClientMessage(playerid, COLOR_GREY, "No tienes ningún negocio en el slot 1.");
	if (NegocioEmpleados(id) == 0) return SendClientMessage(playerid, COLOR_GREY, "Tu negocio del slot 1, no puede tener empleados.");
	mysql_format(DBInsanity, query, sizeof query, "SELECT * FROM personajes WHERE Contrato = '%d'", id);
	mysql_tquery(DBInsanity, query, "OnEmpleoNegocio", "dd", playerid, id);
	return 1;
}
CMD:empleados1(playerid) return cmd_listaempleados1(playerid);

CMD:listaempleados2(playerid)
{
	new id = InfoPersonaje[playerid][pNegocio2], query[256];
	if (InfoPersonaje[playerid][pNegocio2] == -1) return SendClientMessage(playerid, COLOR_GREY, "No tienes ningún negocio en el slot 2.");
	if (NegocioEmpleados(id) == 0) return SendClientMessage(playerid, COLOR_GREY, "Tu negocio del slot 2, no puede tener empleados.");
	mysql_format(DBInsanity, query, sizeof query, "SELECT * FROM personajes WHERE Contrato = '%d'", id);
	mysql_tquery(DBInsanity, query, "OnEmpleoNegocio", "dd", playerid, id);
	return 1;
}
CMD:empleados2(playerid) return cmd_listaempleados2(playerid);

forward OnEmpleoNegocio(playerid, id);
public OnEmpleoNegocio(playerid, id)
{
	new members = 0, gformat[256], dialog[4700] = "Nombre\tEstado\n";
	Loop(player, cache_num_rows(), 0)
	{
		new nombreapellido[32], newid = -1;
		reg_string(player, "Nombre_Apellido", nombreapellido, 32);
		//fix 22/04/2020
		foreach(Player, juegador) if (IsPlayerConnectedEx(juegador) && !strcmp(InfoPersonaje[juegador][pNombre_Apellido], nombreapellido, true)) { newid = juegador; }
		//fix 22/04/2020
		if (IsPlayerConnectedEx(newid)) format(gformat, sizeof gformat, "%s\t{29B311}Conectado\n", nombreapellido);
		else format(gformat, sizeof gformat, "%s\t{E24D32}Desconectado\n", nombreapellido);
		strcat(dialog, gformat);
		format(gformat, sizeof gformat, "Empleado_List%d", members);
		SetPVarString(playerid, gformat, nombreapellido);
		members++;
	}
	if (members == 0) return Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_LIST, InfoNegocio[id][nNombre], "{FFFFFF}No se encontraron empleados.", "Cerrar", "");
	Dialog_Show(playerid, MenuEmpleados, DIALOG_STYLE_TABLIST_HEADERS, InfoNegocio[id][nNombre], dialog, "Continuar", "Salir");
	return 1;
}

Dialog:MenuEmpleados(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new ID = listitem, gformat[128], name_empleado[32];
	format(gformat, sizeof gformat, "Empleado_List%d", ID);
	GetPVarString(playerid, gformat, name_empleado, sizeof name_empleado);
	SetPVarString(playerid, "Empleado_Actual", name_empleado);
	format(gformat, sizeof gformat, "Empleado: {00AE57}%s", name_empleado);
	Dialog_Show(playerid, OpcionEmpleados, DIALOG_STYLE_LIST, gformat, "Ver última conexión\n{B00000}Despedir de tu negocio", "Continuar", "Salir");
	return 1;
}

Dialog:OpcionEmpleados(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new name_empleado[32], newid = -1, string[256], ultimaconexion[256], query[512];
	GetPVarString(playerid, "Empleado_Actual", name_empleado, sizeof name_empleado);
	//fix 22/04/2020
	foreach(Player, juegador) if (IsPlayerConnectedEx(juegador) && !strcmp(InfoPersonaje[juegador][pNombre_Apellido], name_empleado, true)) { newid = juegador; }
 	//fix 22/04/2020
	if (VerificarPersonaje(name_empleado))
	{
		reg_string(0, "UltimaConexion", ultimaconexion, 256);
	}
	else return SendClientMessage(playerid, COLOR_GREY, "Esa cuenta no existe.");
	switch (listitem)
	{
		case 0: //última conexión
		{
			if (IsPlayerConnectedEx(newid))
			{
				format(string, sizeof string, "%s está conectado ID: %d", name_empleado, newid);
				SendClientMessage(playerid, COLOR_GREEN, string);
				return 1;
			}
			format(string, sizeof string, "%s: %s", name_empleado, ultimaconexion);
			SendClientMessage(playerid, COLOR_PURPLE, string);
		}
		case 1: //despedir
		{
			if (IsPlayerConnectedEx(newid))
			{
			    if (playerid == newid) return SendClientMessage(playerid, COLOR_GREY, "No te puedes expulsar del negocio, pendejo.");
				InfoPersonaje[newid][pContrato] = -1;
			}
			format(string, sizeof string, "Sacaste de la lista de empleados a %s, rolea que lo despediste.", name_empleado);
			SendClientMessage(playerid, 0x33CCFFFF, string);
			mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Contrato = -1 WHERE Nombre_Apellido = '%e'", name_empleado);
			mysql_tquery(DBInsanity, query);
		}
	}
	return 1;
}

CMD:cambios(playerid)
{
	new show_log_gm[2500];

	strcat(show_log_gm, "{E0E0E0}v4.20 ({00AE57}02/12/2020{E0E0E0}) {FFBF00}ACTUAL{E0E0E0}\n");
	strcat(show_log_gm, "{E0E0E0}v4.16 ({00AE57}08/05/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v4.11 ({00AE57}28/04/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v4.00 ({00AE57}24/04/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v3.97 ({00AE57}16/04/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v3.81 ({00AE57}13/04/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v3.70 ({00AE57}09/04/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v3.38 ({00AE57}17/03/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v3.19 ({00AE57}13/03/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v3.00 ({00AE57}08/03/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v2.26 ({00AE57}28/02/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v2.18 ({00AE57}24/02/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v2.09 ({00AE57}22/02/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v2.00 ({00AE57}15/02/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v1.60 ({00AE57}30/01/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v1.51 ({00AE57}25/01/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v1.49 ({00AE57}24/01/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v1.44 ({00AE57}18/01/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v1.41 ({00AE57}17/01/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v1.32 ({00AE57}11/01/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v1.26 ({00AE57}08/01/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v1.17 ({00AE57}07/01/2020{E0E0E0})\n");
	strcat(show_log_gm, "{E0E0E0}v1.10 ({00AE57}03/01/2020{E0E0E0})\n");

	Dialog_Show(playerid, ChangeLog, DIALOG_STYLE_LIST, "Versión actual: {00AE57}"#version_actual"", show_log_gm, "Ver", "Cerrar");
	return 1;
}
CMD:changelog(playerid) return cmd_cambios(playerid);
CMD:update(playerid) return cmd_cambios(playerid);
CMD:actualizacion(playerid) return cmd_cambios(playerid);
CMD:actualizaciones(playerid) return cmd_cambios(playerid);

Dialog:ChangeLog(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new show_log_gm[3000];
	switch (listitem)
	{
		case 0: //4.20 21/11/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora se puede tener un job sin ser de empresa.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregados jobs: Repartidor, delincuente, leñador.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado el /ame y renovación del código del /me - /do\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Posibilidad de ver el interior de una casa para comprar. (/vercasa)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Comando para ver detalles de una propiedad en venta\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Cambios en la economía (Sujeto a cambios)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Nueva ubicación del mercado negro.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Re-implementación de la /mascara\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora puedes guardar o sacar un auto propio. (/llaves)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora puedes ver las ubicaciones de los jobs legales. (/base)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Sistema de centralita para PD y SD. (/centralita)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Se ha eliminado el sistema de acentos y macros.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v4.20{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 1: //4.16 08/05/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevo sistema de cuentas y personajes.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado comando para quitar seguros /aseguro. (STAFF)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado comando para quitar efectos de droga /quitarefectos. (STAFF)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora se puede expulsar (banear) personajes y cuentas por minutos. (STAFF)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Se activó el comando /ref(uerzos) para la facción Sheriff's.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Se desactivó temporalmente el sistema de máscara de usuarios.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de invitación a facciones como rango alto.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de comandos /enmascaradospd y /enmascaradosadmin.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de puntos de rol y nivel de rol.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de advertencias y bloqueos de dudas/reportes. (STAFF)\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v4.16{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 2: //4.11 28/04/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del /estado, ahora carga automáticamente cuando logeas.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado /togfaccion, para silenciar mensajes de facción.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado opción 'skins exclusivos' en el casillero VIP.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado /identidad para facciones LSPD, FBI & LSCSD.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado /enmascaradosadmin & /enmascaradospd para rango Moderador II. (STAFF)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora sólo se puede hacer diez (10) repartos por PayDay.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el /tallerpd sólo funciona con vehículos de LSPD.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el /nombreadmin lo puede usar rango Encargado. (STAFF)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el /repartos es directo, agregado también /inforeparto.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el /gmaletero y /smaletero funciona desde dentro del vehículo si es tipo policial.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora los vehículos 'Enforcer' & 'FBI Truck' spawnean con 5000.0 de vida.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora los ocupantes de vehículos 'Enforcer' & 'FBI Truck' no pueden ser heridos.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora si un usuario supera las 15 sanciones OOC, es baneado automáticamente.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de documentos falsos. (/dnifalso)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de listado de negocios tipo empleo. (/empleos)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de permisos de comandos de la facción Sheriff's.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de color en segunda linea de mensaje del /ao.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de /dar materiales, anteriormente podías dar negativos.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de botiquin, anteriormente no curaba al seleccionado.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de /refuerzos, ahora la solicitud se marca en todo el mapa.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido comando /aa, ahora si el admin está duty su comando /b cambia.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido de las tiendas de ropa el skin ID 179, ahora es VIP.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v4.11{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 3: //4.00 24/04/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ajustes en el sistema de anuncios.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación de los comando /soporte & /habilidad.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado taller policial para LSPD. (/tallerpd)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevo menú telefónico en diálogo. (/telefono)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevo comando para la configuración de cuenta. (/panel)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevo sistema de graffitis para facciones tipo pandilla.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado /irjob (entrada del negocio/empresa) & /renunciar (dejar empleo).\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado /cjob (chat ooc) & /rjob (radio ic) para los trabajos.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevos negocios tipo trabajo: Repartos (repartidor) & Clínica (médico).\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevos mapeos: Ayuntamiento (ext), Playa beach, Avenidas, Basurero & Hospital (int).\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el /spawncasa se puede usar desde VIP plata.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora cuando usan /robar247 también alerta a la administración.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el /liberar detecta si el jugador está sancionado o no.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora puedes transferir dinero del banco desde tu teléfono. (/transferir)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora puedes conseguir trabajo en negocios/empresas que lo permitan. (/empleos)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora los negocios tipo trabajo, pueden decidir si el contrato es público o no.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora los dueños de negocios tipo trabajo, no necesitan contrato para las funciones del empleo.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora los médicos son los únicos que pueden usar /curar, anteriormente SAEM podía hacerlo.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de comandos /tog(...) ahora son más precisos y se actualiza la variable.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de visualización de animaciones que debías usar dos veces el comando.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de spawn en el hospital luego de relogear o ser reanimado.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de mensaje cuando solicitas un mecánico, ahora aparece el ID del cliente.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de verificación de Nombre en /listamiembros, /listaadmins & /empleados.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de detector de vehículos disponibles para los repartos en las fábricas de drogas.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido comando /casco, ahora debes comprar el casco en una tienda de ropa.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v4.00{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 4: //3.97 16/04/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación completa de diseño del /gps & /darlicencia (armas).\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado posibilidad de sirena en vehículos policiales. (/veh_sirena)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado comandos de uso directo: /luces, /capo, /maletero & /vestado.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado más objetos al sistema de accesorios (bandanas, lentes y relojes).\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora la escopeta no-letal se puede editar con /espalda.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora puedes recoger tu boombox desde el menú de /encender.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora los vehículos de facciones legales también consumen gasolina.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora los negocios de tipo empleados no generan ganancia automática ni requieren productos.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora los negocios restan productos si el costo pasa los $500 o en ganancia automática (2hs).\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Se aumentó el máximo de productos por negocio a 4,000 stocks.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Se aumentó la ganancia automática de los negocios, y se reguló el cobro de productos.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de posición de spawn cuando eliges 'en avión' en el registro.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de guardado de licencia de armas, ahora se carga perfectamente en /licencias.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de comando /gunlocker, automáticamente si supera el máximo de 10 se corrige.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección al colocar boombox, ya no se edita la posición y se cambió el modelo del mismo.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido mapas de interés, ahora si usas /vermapa te mostrará el menú de GPS.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v3.97{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 5: //3.81 13/04/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado facción 'Sheriff's Department'.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevo diseño más sonido cuando recibes/pierdes dinero.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado mapeos: parque verona, depósito, skate park, gym ganton.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el centralita especifica si llamar un policía o sheriff.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el /revisarmaletero & /limpiarmaletero es sólo para LSPD/LSCSD.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el efecto de balas de gomas es de 15 segundos y tazeado 8 segundos.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Se aumentó el máximo de barricadas a 50 objetos de /bar y otros.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de dinero cuando reparas vehículo en /taller.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de balas de goma cuando disparas desde un vehículo.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v3.81{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 6: //3.70 09/04/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación completa del sistema de velocimetro.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación completa del comando /id, ahora busca varios usuarios a la vez.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del /botiquin como objeto de inventario y se consigue en hospitales.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del sistema de anuncios, comandos nuevos /toganuncios & /borraranuncios.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevo objeto 'escopeta no-letal' al sistema de inventario.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevamente el comando /adminfac para encargados de facciones.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado restricción de tres minutos para el comando /reportarbug.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado opción 'recargar balas' en el /equipo de LSPD, FBI & SAEM.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el máximo de miembros por facción es de 70 miembros.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora las fábricas generan dinero automáticamente cada dos horas.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el nombre original no sale en el /id cuando usas máscara.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora se puede crear vehículos dinámicos para negocios/empresas/fábricas.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora la gasolina se resta por minuto que el motor del vehículo esté encendido.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el /revisar no exige permisos de /rendirse para facciones LSPD, FBI & SAEM.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora los miembros con rango máximo tienen los mismos permisos de lider de facción.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el mensaje de (/puente) a LSPD/FBI identifica sospechoso y modelo del vehículo.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora la opción 'facciones' en /rcategoria especifica la facción a respawnear vehículos.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora puedes usar /venderarma sin necesidad de tener un trabajo, restricción 5 horas de juego.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de preguntas/respuestas del test de rol cuando registras.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección mensaje de verificación de multicuentas cuando inician sesión.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de rango de entradas/salidas, ahora es de 1.5 metros (antes 3.0).\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección del comando /comprar en ammunation opción 'comprar balas'.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección del comando /dinamita, anteriormente no detectaba el objeto.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección del comando /dardinero, anteriormente no detectaba el id del jugador. (STAFF)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido mapeo de depósito LSPD, ahora cuando pagas embargo puedes recogerlo donde mismo.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de anuncio guardado (/myad) y sistema médico más mapeo del hospital market.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sprays de pintura de vehículos de los 24/7, función renovada en los nuevos talleres.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v3.70{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 7: //3.38 17/03/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del sistema CallSign, ahora con guardado SQL.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del comando /reportes, /mccomprar & /b (nuevo diseño).\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del comando /comprar de los negocios tipo concesionaria.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del sistema de cajeros automáticos, ahora con guardado SQL.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del /detener, ahora se puede usar con jugadores esposados/atados.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado comando /rcategoria para respawnear vehículos por categoria.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado comando /banco para hacer transacciones bancarias sin restricciones.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado comando /reaparecer para spawnear en el hospital cuando estás herido/muerto.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevo sistema de objetos en vehículos (/vobjeto) en BETA para usuarios VIP oro.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevo objeto 'Dinamita' al inventario, el mismo se consigue en el mercado negro.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el /mascara no oculta el nombre, ahora se cambia a 'DesconocidoX' en tabulador.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora cuando mueres por bug, reapareces en la misma posición en estado muerto.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de duplicado de armas en cinturón táctico.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de sistema de crear objetos dinámicos.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de texto flotante cuando caes herido/muerto.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de mensaje cuando desconectas del servidor.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de mensaje cuando compras materiales en el /camello.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de kick si estás fuera de jail.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de tarjeta de crédito, robar banco y bomba.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v3.38{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 8: //3.19 13/03/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del comando /musica. (STAFF)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del sistema de boombox, ahora como objeto de inventario.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del diseño /comprar de negocios, algunos precios se aumentaron.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado opción armas, en el comando /quitar.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado cuatro puntos de drogas y materiales (/camello) en la ciudad.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado opción trabajo, casa y negocio (ranura 2) en /darstat. (STAFF)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado /togmanos para no mover las manos cuando hablas, también se cambió la animación.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora con el objeto teléfono S10 puedes usar /agenda.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora no desaparecen objetos normales del inventario en prisión.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el seguro industrial es gratis en todos los vehículos. (/lock o /seguro)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora la posición del objeto que tiras al suelo está más pegado al personaje.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora se interpreta el radio portable como una aplicación de teléfono S10.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de sistema de vehículos (/vendermicoche).\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de llamadas al 911, ya no se necesita /centralita.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de NRG-500 en /precios, también se añadió un diálogo antes comprar.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de permisos de /motor en vehículos rentables.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de comandos /esposar, /desposar, /detener, /reanimar & /estacionar.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido negocio tipo electrónica, ahora todo se vende en 24sietes.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de loteria, ipodmusic, seguro de alarma, /google, /robarshop & sprunks.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v3.19{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 9: //3.00 08/03/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del login, agregado logo más nuevas tomas de cámara.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del sistema de actores dinámicos, ahora con guardado SQL.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del sistema de drogas, nuevos efectos y beneficios de curaciones. (/consumir)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del comando /recoger, ahora se puede especificar ID. (Label en objeto tirado)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del sistema de renta de vehículos, ahora con guardado SQL. (/rentarveh)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del sistema de teléfono. (/llamar - /sms - /altavoz - /colgar)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del comando /reanimar, ahora sólo es de uso LSPD, FBI, SAEM & LSMD.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora para /esposar no se necesita de que el individuo tenga las manos arriba.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora puedes editar el arma de /espalda, nuevo comando para la edición /arma.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora los objetos en el suelo duran dos horas, anteriormente eran cinco horas.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora la restricción de /venderarma es de cinco horas.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora los comandos /ip & /obtenerip son para rango propietario. (STAFF)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora la muestra de /dni, /dnifalso & /licencias es en chat, anteriormente era en textdraw.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora para abrir un maletero (/v maletero) se necesita las llaves del vehículo.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora cualquiera puede usar /gmaletero - /smaletero en los vehículos con maletero abierto.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado comando /arrastrar, debes tener mínimo 10 horas de juego.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado el número de facción (ID SQL) en el comando /facciones.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado comando /fllaves para localizar vehículos de facciones.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado opción 'borrar objetos de manos' en el /equipo de LSPD, FBI & SAEM.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevos objetos: Teléfono S10, Marihuana, Crack, Metanfetamina, Cocaína, Cigarros & Encendedor.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado sistema de creación de objetos dinámicos in game, con guardado SQL. (/adminmap)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Se cambió la posición de la prisión de OOC.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de comandos /atar, /vendar, /revivir & /encontrar persona.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de permisos de vehículos, con esto se soluciona los mensajes de /estacionar.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de puntos de drogas. (/comprarmarihuana - /comprarcrack)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema obsoleto de detectar malas palabras y supuesto spam en chat IC.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido trabajo de vendedor de móviles & repartidor de pizzas.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v3.00{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 10: //2.26 28/02/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el único color de TAB es de los miembros de la administración.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora todos los vehículos del servidor son dinámicos con guardado SQL.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora se puede utilizar /comprarcasa & /vendercasa para la ranura 2.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora las estadísticas de inicio es nivel 1 con $20,000 dólares.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora los lideres de facción pueden estacionar sus vehículos.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado comandos /crearvehiculo - /borrarvehiculo. (STAFF)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado linea de cantidad de materiales en /inventario viejo.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Se habilitó nuevamente el comando /su & /encontrar para FBI.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Se habilitó las opciones despedir & última conexión en /empleados.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de mensajes administrativos en general.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de puntos de /arrestar, anteriormente no detectaba el jugador seleccionado.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de comandos /darskin (no cedía skin) & /kickname (expulsaba siempre id 0).\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido trabajo de conductor de trenes, jardinero & heladero.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de /luces de LSPD & FBI.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de vehículos en renta, próximamente uno renovado.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v2.26{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 11: //2.18 24/02/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de tres horas VIP bronce.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación completa del sistema administrativo.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevo sistema de seguridad. (Pregunta & Respuesta)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado comando /administracion para ver miembros offline. (STAFF)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de errores menores más optimización de código del GM.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v2.18{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 12: //2.09 22/02/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del texto label cuando caes herido/muerto.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del /duda, ahora las revisa la administración.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado opción de cambiar color de toys para usuarios VIP Gold.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevo sistema de fábrica de drogas, como nuevo tipo de negocios.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado ranura extra de casa y negocio para usuarios VIPs Silver y Gold.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el /aceptar muerte cobra $35,000 dólares.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el /viplocker sólo cuenta con dos armas para VIP Gold.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora se pueden ver los CoinsVIP en /cuenta.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el máximo de miembros por facción es de 50.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el velocimetro no aparece en los pasajeros de vehículos.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el tiempo de spawn como herido es de 4 mins y de muerto 2 mins.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido el comando /desban & /desbanip.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido comandos /darcoinsvip & /quitarcoinsvip.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido el contador de miembros de /facciones.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de ropero skins de casas.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido el sistema de canal de dudas /n.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido pickups & labels del antiguo sistema de /equipo.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido caracteristica de ir a prisión teniendo estrellas al caer muerto.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v2.09{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 13: //2.00 15/02/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del sistema /callsign, ahora lo puede usar LSPD, FBI, SAEM y LSMD.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del comando /placa, ahora lo pueden usar todas las facciones legales.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del diseño de muestra de estadísticas del usuario. (/stats)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación completa del sistema de facciones y familias, ahora con guardado SQL. (/facciones)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el color VIP de TAB nunca desaparece, hasta que el vencimiento del beneficio.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora si tu facción tiene punto de spawn, al morir apareces en ese punto.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora puedes abrir el inventario nuevo con la letra Y.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora los textos de chat y /me /do e /intentar, pasan a segunda linea.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Se suprimieron todos los colores de TAB, ahora sólo se mantienen el de VIP y staff.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido ped de CJ al correr o caminar, ahora es distinto.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido comando de /encontrar de FBI y sistemas relacionados a LSTV.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido error de variable de LlaveVeh, comando /darllave.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido detección de vehículo en la opción de /misil.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}- Corregido detector de cuando estás con sanción ooc y te vas fuera de la jaula.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v2.00{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 14: //1.60 30/01/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido mapeos innecesarios.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de helper, hitman, religiones y sistema judicial.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Cambios en el mapeo exterior de ayuntamiento.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado pequeño detector de si tienes coordenadas bugeadas, te envía a LS.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevo diseño de muestra de tus vehículos. (/llaves o /vehiculos)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el detector de nombre inválido sólo te kickea.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el test de rol es sólo para usuarios nuevos. (registro)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora puedes ver el máximo de slots de maletero cuando compras un vehículo.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido creación de pickup/labels no existentes en coordenadas 0.0 0.0 0.0.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido mapeo interior y prisión de FBI, ahora se puede /arrestar en el estacionamiento.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v1.60{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 15: //1.51 25/01/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corrección de errores menores.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevo test de rol.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevo sistema de compra de vehículos.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado tipo pescadería y concesionaria a los negocios.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v1.51{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 16: //1.49 24/01/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación completa del sistema de negocios, ahora con guardado SQL.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación completa del sistema de puertas dinámicas, ahora con guardado SQL.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado botones en las puertas de movimiento principales de LSPD.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora puedes ubicar tu casa desde /gps.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora si el servidor detecta un arma por cheat o whitebug, te kickea.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido barra de espacio de /bolsillos.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido sistema de botones para puertas de movimiento.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido posición de objeto cuchillo en mano izquierda.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de matrimonio.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de keypad, totalmente obsoleto.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v1.49{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 17: //1.44 18/01/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Cambios en el include de selector de imagen.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación completa del comando /comprartoys & /toys.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevo anti-vehicle spawning.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado sistema de corregir nombre inválido en el login.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevo sistema de compra de skins en las tiendas de ropa.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido error de inicio de ingresar comandos sin logear al servidor.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v1.44{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 18: //1.41 17/01/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación de /payday.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación de sistema de /refuerzos. (LSPD)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación de comandos /sacarmaletero & /guardarmaletero.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación completa del sistema de casas, ahora con guardado SQL.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora puedes escribir hasta 64 carácteres en el /estado.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora si contienes algo en /espalda, te saldrá como opción extra en /bolsillos.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora los toys se actualizan en tiempo real, ahora con guardado SQL. (toys user: 4, vip: 7)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora si desconectas con un toy colocado, cuando reconectes te aparece puesto.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora puedes usar /espalda en objetos: bate, pala, palo de billar, katana, dildos, entre otros.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora cuando desconectas, los vehículos propios sólo guardan el HP & gasolina. (anteriormente la posición)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado /vender arma, /aceptar arma & /cancelar arma.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado comando para desbugear el arma como pasajero en vehículos. (/drivebug)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado comandos para el staff: /limpiarsuelo - /verarmas - /limpiararmas (PlayerID).\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado sistema de cinturón táctico para LSPD, FBI & SAEM. (/ct - /sacarct - /guardarct)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado sistema de neones para VIP Gold. (/ponerneon para instalar y /neon para colocar/quitar)\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido error de guardado y carga de skin, ahora también se guarda el skin de trabajo/facción.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido error de velocimetro, anteriormente salía el cuadro de combustible en vehículos bicicletas.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v1.41{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 19: //1.32 11/01/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Optimización del OnPlayerDisconnect.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado textdraw de cargado de cuenta.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado compra de balas en ammunation.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado creación de balas en fabrica de armas.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Se cambió la apariencia del velocimetro.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Se cambió el 3dlabel's de los vehículos en venta.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora los objetos/balas se actualizan en tiempo real.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora cuando cuando mueres no pierdes lo que tenías en /bolsillos.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del sistema de muerte, ahora son dos tipos (1 herido) (2 muerto).\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido el máximo de balas para todas las armas, adjuntando un default para cada.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido sistema premium, además de un nuevo detector al conectar mostrando fecha de vencimiento.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v1.32{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 20: //v1.26 08/01/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del sistema de táser.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación de los comandos /darllave y /quitarllave.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del comando /estacionar, ahora apaga el vehículo y guarda las variables.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora cuando estás adminduty no te hacen daño las caidas, balas, golpes.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el dibujado de nombres-id-vida-chaleco encima del skin es de 20.0 metros.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido falla de cobro de dinero en el /pagarmulta cuando pagas un embargo.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Optimizado el comando /puente, ahora puedes usar ganzúas en cualquier vehículo menos en los legales.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora cuando vendes un vehículo a otro usuario, se pierde la variable de llave prestada del vehículo.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado sinonimos de comandos: /traercar-/getcar-/traerauto /ircar-/gotocar-/irauto.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora el /traerauto lleva el vehículo también GetPlayerInterior.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido el sistema de venta /vendermicoche & /aceptar coche.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado comando /localizar con algunas mejoras en el código.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del comando /gunlocker-/maxmaletero, ahora hasta 10 slots como máximo.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora si dejaste el vehículo con seguro y relogeas, se mantiene el mismo con seguro.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado comandos para LSPD: /revisarmaletero & /limpiarmaletero.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de intermitentes, esto lagea cuando se usa con usuarios cerca.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v1.26{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 21: //v1.17 07/01/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado nuevo sistema de /bolsillos (BETA, actualmente solo armas).\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del sistema de guardado de cuentas, ahora es SQL.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido sistema de /acento.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido comando /darestilopelea.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido /adminnombre, ahora se guardan los stats así tengas un nombre temporal.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación de interfaz del /ao.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del comando /cambiarclaveusuario.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación de los comandos /unirse(2) & /renunciar(2).\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del /mascara (Permanece al relogear) (Ahora se muestra como 'DesconocidoNum').\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del comando /jailoffline, ahora verifica si el jugador está conectado y se añade razón de jail.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora en vez de Hierba se menciona Marihuana en todo el gamemode.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora se regulan las fumadas de crack & marihuana.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de plantar semillas, esto generaba un crash cada ciertas horas.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v1.17{E0E0E0})", show_log_gm, "Cerrar", "");
		}
		case 22: //v1.10 03/01/2020
		{
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido lo obsoleto de autojail.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido código obsoleto del antiguo sistema de casas.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de paintball, totalmente innecesario.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de habiliad de idiomas, totalmente innecesario.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Removido sistema de desconexión por supuestamente estar AFK, totalmente innecesario.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora cuando subes de nivel se actualiza el score de TAB.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación de varios textdraws.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del comando /changepass.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del sistema de agenda telefónica.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación del sistema de registro e ingreso.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora cuando escribes en el chat en el login, no te kickea simplemente no muestra el mensaje.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Agregado variables de fecha de registro & última conexión.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Corregido mensaje de muestra del /PayDay.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora puedes usar /robar247, cinco veces por PayDay.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora ya no quita 1000 cuando envias un /re.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Renovación de interfaz de: /staff - /aa - /a.\n");
			strcat(show_log_gm, "{00AE57}- {E0E0E0}Ahora puedes dar/quitar el encargado en los comandos: /daref - /dares - /daregame - /dareban.\n");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{E0E0E0}({00AE57}v1.10{E0E0E0})", show_log_gm, "Cerrar", "");
		}
	}
	return 1;
}

//nuevo sistema de facciones dinámicas (desde 11/02/2020 hasta el 14/02/2020)
new ID_ACTUAL_FACUWU[MAX_PLAYERS];
new ID_ACTUAL_EquipoUWU[MAX_PLAYERS];

stock TieneArmamento(id)
{
	new count = 0;
	Loop(x, 20, 0) if (InfoFaccion[id][fEquipo][x] != 0) { count++; }
	return count;
}

stock TieneSkin(id)
{
	new count = 0;
	Loop(x, 20, 0) if (InfoFaccion[id][fSkin][x] != 0) { count++; }
	return count;
}

GetObjEquipo(obj)
{
	new name_ex[64];
	if (obj == 900) alm(name_ex, "Botiquin HP");
	else if (obj == 950) alm(name_ex, "Chaleco");
	else
	{
		alm(name_ex, InfoInventario[obj][NombreObjeto]);
	}
	return name_ex;
}

ValidObjEquipo(obj)
{
	if (obj == 0) return 1;
	if (obj == 900) return 1;
	if (obj == 950) return 1;
	if (obj >= 1 && obj <= sizeof InfoInventario) return 1;
	return 0;
}

CMD:f(playerid, params[])
{
	new id = InfoPersonaje[playerid][pMiembro], string[512];
	if (id == 0) return SendClientMessage(playerid, COLOR_GREY, "No estás en ninguna facción.");
	if (InfoPersonaje[playerid][pTogFaccion] == 0) return SendClientMessage(playerid, COLOR_GREY, "Posees los mensajes de facción desactivados, escribe /togfaccion.");
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /f (Texto)");

	format(string, sizeof string, "(( [%s] %s %s: %s ))", InfoFaccion[id][fLogo], fac_rango[id][InfoPersonaje[playerid][pRango]-1], NombreOriginal(playerid), params);
	switch (id)
	{
		case 1..5: SendFaccionMessage(id, COLOR_RADIO, string);
	    default: SendFaccionMessage(id, 0x04FFFFFF, string);
	}
	return 1;
}
CMD:fac(playerid, params[]) return cmd_f(playerid, params);

CMD:r(playerid, params[])
{
	new id = InfoPersonaje[playerid][pMiembro], string[314];
	if (!member_faccion(playerid, 1, 2, 3, 4, 5)) return SendClientMessage(playerid, COLOR_GREY, "Sólo facciones oficiales del servidor tienen radio.");
	if (InfoPersonaje[playerid][pTogRadio] == 0) return SendClientMessage(playerid, COLOR_GREY, "Posees la radio de facción apagada, escribe /togradio.");
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /r (Texto)");
	if (member_faccion(playerid, 1)) format(string, sizeof string, "** [CH: %d, S: %d] %s: %s", 911, 1, NombreJugador(playerid), params);
	if (member_faccion(playerid, 2)) format(string, sizeof string, "** [CH: %d, S: %d] %s: %s", 650, 2, NombreJugador(playerid), params);
	if (member_faccion(playerid, 3)) format(string, sizeof string, "** [CH: %d, S: %d] %s: %s", 700, 3, NombreJugador(playerid), params);
	if (member_faccion(playerid, 4)) format(string, sizeof string, "** [CH: %d, S: %d] %s: %s", 911, 4, NombreJugador(playerid), params);
	if (member_faccion(playerid, 5)) format(string, sizeof string, "** [CH: %d, S: %d] %s: %s", 600, 5, NombreJugador(playerid), params);
	SendRadioMessage(id, 0xFFEC8BFF, string);
	format(string, sizeof string, "%s por radio: %s", NombreJugador(playerid), params);
	ProxExDetector(3.5, playerid, string, 0x95939300, 0x95939300, 0x95939300, 0x95939300, 0x95939300);
	return 1;
}

CMD:wsp(playerid, params[])
{
	new id = InfoPersonaje[playerid][pMiembro], string[314];
	if (!member_faccion(playerid, 6, 7, 8)) return SendClientMessage(playerid, COLOR_GREY, "Sólo facciones no-oficiales del servidor tienen wsp.");
	if (InfoPersonaje[playerid][pTogRadio] == 0) return SendClientMessage(playerid, COLOR_GREY, "Posees el whastapp deshabilitado, escribe /togwsp.");
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /wsp (Texto)");
	format(string, sizeof string, "[WhatsApp de %s]: %s", NombreJugador(playerid), params);
	SendRadioMessage(id, 0x00D356FF, string);
	return 1;
}

CMD:d(playerid, params[])
{
	new id = InfoPersonaje[playerid][pMiembro], rango = InfoPersonaje[playerid][pRango], string[314];
	if (!member_faccion(playerid, 1, 2, 3, 4, 5)) return SendClientMessage(playerid, COLOR_GREY, "Sólo facciones oficiales del servidor tienen acceso.");
	if (InfoPersonaje[playerid][pTogRadio] == 0) return SendClientMessage(playerid, COLOR_GREY, "Posees la radio de facción apagada, escribe /togradio.");
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /d (Texto)");
	format(string, sizeof string, "** [%s] %s %s: %s **", InfoFaccion[id][fLogo], fac_rango[id][rango-1], NombreJugador(playerid), params);
	SendRadioMessage(1, 0xF07A7AFF, string);
	SendRadioMessage(2, 0xF07A7AFF, string);
	SendRadioMessage(3, 0xF07A7AFF, string);
	SendRadioMessage(4, 0xF07A7AFF, string);
	SendRadioMessage(5, 0xF07A7AFF, string);
	format(string, sizeof string, "%s por radio: %s", NombreJugador(playerid), params);
	ProxExDetector(3.5, playerid, string, 0x95939300, 0x95939300, 0x95939300, 0x95939300, 0x95939300);
	return 1;
}

CMD:dooc(playerid, params[])
{
	new id = InfoPersonaje[playerid][pMiembro], rango = InfoPersonaje[playerid][pRango], string[314];
	if (!member_faccion(playerid, 1, 2, 3, 4, 5)) return SendClientMessage(playerid, COLOR_GREY, "Sólo facciones oficiales del servidor tienen acceso.");
	if (InfoPersonaje[playerid][pTogRadio] == 0) return SendClientMessage(playerid, COLOR_GREY, "Posees la radio de facción apagada, escribe /togradio.");
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /d (Texto)");
	format(string, sizeof string, "(( [OOC: %s] %s %s: %s ))", InfoFaccion[id][fLogo], fac_rango[id][rango-1], NombreJugador(playerid), params);
	SendRadioMessage(1, 0xAC58FAFF, string);
	SendRadioMessage(2, 0xAC58FAFF, string);
	SendRadioMessage(3, 0xAC58FAFF, string);
	SendRadioMessage(4, 0xAC58FAFF, string);
	SendRadioMessage(5, 0xAC58FAFF, string);
	return 1;
}

CMD:equipo(playerid)
{
	new id = InfoPersonaje[playerid][pMiembro];
	if (id == 0) return SendClientMessage(playerid, COLOR_GREY, "No estás en ninguna facción.");
	if (InfoFaccion[id][fArmarioX] == 0.0) return SendClientMessage(playerid, COLOR_GREY, "Su facción no tiene ajustado el lugar de /equipo.");
	if (IsPlayerInRangeOfPoint(playerid, 4.0, InfoFaccion[id][fArmarioX], InfoFaccion[id][fArmarioY], InfoFaccion[id][fArmarioZ]) && InfoPersonaje[playerid][pInterior] == InfoFaccion[id][fArmarioInt] && InfoPersonaje[playerid][pVirtualWorld] == InfoFaccion[id][fArmarioVW])
	{
		new dialog[1870], titul[170], dialog2[256], count = 0, gformat[40];
		if (member_faccion(playerid, 1, 2, 3, 4, 5)) //lspd, fbi, saem, sasd, gob
		{
			//duty
			if (OnDuty[playerid] != 0)
			{
				strcat(dialog, "{EFEFEF}Colocarse {FD1717}fuera de servicio\n");
				//conteo
				format(gformat, sizeof gformat, "RanuraEq%d", count);
				SetPVarInt(playerid, gformat, 0);
				count++;
			}
			else
			{
				strcat(dialog, "{EFEFEF}Colocarse {00C600}en servicio\n");
				//conteo
				format(gformat, sizeof gformat, "RanuraEq%d", count);
				SetPVarInt(playerid, gformat, 0);
				count++;
			}
			//equipo
			Loop(x, 20, 0) if (InfoFaccion[id][fEquipo][x] != 0)
			{
				format(dialog2, sizeof dialog2, "{EFEFEF}%s\n", GetObjEquipo(InfoFaccion[id][fEquipo][x]));
				strcat(dialog, dialog2);
				//conteo
				format(gformat, sizeof gformat, "RanuraEq%d", count);
				SetPVarInt(playerid, gformat, x+1);
				count++;
			}
			//skins
			if (TieneSkin(id) != 0)
			{
				strcat(dialog, "{EFEFEF}Uniformes\n");
				//conteo
				format(gformat, sizeof gformat, "RanuraEq%d", count);
				SetPVarInt(playerid, gformat, 21);
				count++;
				if (GetPlayerSkin(playerid) != InfoPersonaje[playerid][pSkin])
				{
					strcat(dialog, "{EFEFEF}Vestir ropa normal\n");
					//conteo
					format(gformat, sizeof gformat, "RanuraEq%d", count);
					SetPVarInt(playerid, gformat, 22);
					count++;
				}
			}
			if (member_faccion(playerid, 1, 2, 3, 4))
			{
				strcat(dialog, "{EFEFEF}- Encubierto\n");
				//conteo
				format(gformat, sizeof gformat, "RanuraEq%d", count);
				SetPVarInt(playerid, gformat, 23);
				count++;
				strcat(dialog, "{EFEFEF}+ Accessorios\n");
				//conteo
				format(gformat, sizeof gformat, "RanuraEq%d", count);
				SetPVarInt(playerid, gformat, 24);
				count++;
				strcat(dialog, "{EFEFEF}+ Borrar objetos de manos\n");
				//conteo
				format(gformat, sizeof gformat, "RanuraEq%d", count);
				SetPVarInt(playerid, gformat, 25);
				count++;
				strcat(dialog, "{EFEFEF}+ Recargar balas");
				//conteo
				format(gformat, sizeof gformat, "RanuraEq%d", count);
				SetPVarInt(playerid, gformat, 26);
				count++;
			}
		}
		else //otros
		{
			//equipo
			Loop(x, 20, 0) if (InfoFaccion[id][fEquipo][x] != 0)
			{
				format(dialog2, sizeof dialog2, "{EFEFEF}%s\n", GetObjEquipo(InfoFaccion[id][fEquipo][x]));
				strcat(dialog, dialog2);
				//conteo
				format(gformat, sizeof gformat, "RanuraEq%d", count);
				SetPVarInt(playerid, gformat, x);
				count++;
			}
			//skins
			if (TieneSkin(id) != 0)
			{
				strcat(dialog, "{EFEFEF}Skins\n");
				//conteo
				format(gformat, sizeof gformat, "RanuraEq%d", count);
				SetPVarInt(playerid, gformat, 20);
				count++;
				if (GetPlayerSkin(playerid) != InfoPersonaje[playerid][pSkin])
				{
					strcat(dialog, "{EFEFEF}Vestir skin normal");
					//conteo
					format(gformat, sizeof gformat, "RanuraEq%d", count);
					SetPVarInt(playerid, gformat, 21);
					count++;
				}
			}
		}
		format(titul, sizeof titul, "Equipo de {00AE57}%s", InfoFaccion[id][fLogo]);
		Dialog_Show(playerid, ShowEquipo, DIALOG_STYLE_LIST, titul, dialog, "Continuar", "Salir");
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "No estás en el lugar de /equipo.");
	return 1;
}

Dialog:ShowEncubierto(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_equipo(playerid);
	new skinid = strval(inputtext);
	if (IsValidSkin(skinid) == 0) return SendClientMessage(playerid, COLOR_GREY, "Debes de escoger una id de skin entre 1 y 311.");
	GivePlayerJobSkin(playerid, skinid);
	return 1;
}

Dialog:ShowEquipo(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new ID = listitem, xwds[40];
	format(xwds, sizeof xwds, "RanuraEq%d", ID);
	new x = GetPVarInt(playerid, xwds);
	new faccion = InfoPersonaje[playerid][pMiembro], gformat[170];
	new matts = InfoFaccion[faccion][fMateriales];
	if (member_faccion(playerid, 1, 2, 3, 4, 5)) //lspd, fbi, saem, sasd, gob
	{
		switch (x)
		{
			case 0: //duty
			{
				if (OnDuty[playerid] != 0)
				{
					OnDuty[playerid] = 0;
					meuwu(playerid, "deja su placa en el casillero y deja su labor.");
				}
				else
				{
					OnDuty[playerid] = 1;
					meuwu(playerid, "coge su placa del casillero y entra en su labor.");
				}
			}
			case 1..20: //equipo
			{
				if (matts <= 0) return SendClientMessage(playerid, COLOR_GREY, "Su facción no dispone de armamento o materiales en su armario.");
				new objeto = InfoFaccion[faccion][fEquipo][x-1];
				if (objeto == 900)
				{
					if (InfoPersonaje[playerid][pVida] >= 99.0) return SendClientMessage(playerid, COLOR_GREY, "Ya tienes la vida full.");
					dar_vida(playerid, 100);
					meuwu(playerid, "coge un botiquin hp del casillero.");
				}
				else if (objeto == 950)
				{
					if (InfoPersonaje[playerid][pChaleco] >= 99.0) return SendClientMessage(playerid, COLOR_GREY, "Ya tienes el chaleco full.");
					dar_chaleco(playerid, 100);
					meuwu(playerid, "coge un chaleco del casillero.");
				}
				else
				{
					if (InfoPersonaje[playerid][pManoDerecha] > 0 && InfoPersonaje[playerid][pManoIzquierda] > 0) return SendClientMessage(playerid, COLOR_GREY, "Posees ambas manos ocupadas, guarda o arroja lo que llevas.");
					if (InfoPersonaje[playerid][pManoDerecha] != 0)
					{ 
						InfoPersonaje[playerid][pManoIzquierda] = objeto;
						InfoPersonaje[playerid][pManoIzquierdaCant] = InfoInventario[objeto][MaxCantidad];
						PonerObjeto(playerid, 2, objeto);
						format(gformat, sizeof gformat, "coge %s del casillero en su mano izquierda.", GetObjEquipo(objeto));
					}
					else
					{
						InfoPersonaje[playerid][pManoDerecha] = objeto;
						InfoPersonaje[playerid][pManoDerechaCant] = InfoInventario[objeto][MaxCantidad];
						PonerObjeto(playerid, 1, objeto);
						if (InfoInventario[objeto][IDArma] > 0) { GivePlayerWeapon(playerid, InfoInventario[objeto][IDArma], InfoInventario[objeto][MaxCantidad]); }
						format(gformat, sizeof gformat, "coge %s del casillero en su mano derecha.", GetObjEquipo(objeto));
					}
					meuwu(playerid, gformat);
					ActualizarManos(playerid);
				}
			}
			case 21: //skins
			{
				new SkinMuestra[20], count = 0;
				Loop(e, 20, 0) if (InfoFaccion[faccion][fSkin][e] != 0)
				{
					SkinMuestra[count] = InfoFaccion[faccion][fSkin][e];
					count++;
				}
				ShowModelSelectionMenuEx(playerid, SkinMuestra, count, InfoFaccion[faccion][fLogo], Equipo_Skin, -11.0, 0.0, -55.0, 1.0);
			}
			case 22: //skin normal
			{
				if (InfoPersonaje[playerid][pJobSkin] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes puesto ningún skin de facción o trabajo.");
				GivePlayerSkin(playerid, InfoPersonaje[playerid][pSkin]);
				meuwu(playerid, "se viste con su ropa normal.");
			}
			case 23: //encubierto
			{
				Dialog_Show(playerid, ShowEncubierto, DIALOG_STYLE_INPUT, "{00AE57}Encubierto", "{FFFFFF}Introduce la skin de 1 entre 311:", "Continuar", "Volver");
			}
			case 24: //accesorios
			{
				new max_cToys = 4;
				if (InfoCuenta[playerid][jVIP] == 3) max_cToys = 7;
				Loop(id, max_cToys, 0) if (InfoPersonaje[playerid][ptModelo][id] == 0)
				{
					slotselection[playerid] = id;
					new ToyMuestra[180], count = 0;
					Loop(e, sizeof InfoToy, 0) if (InfoToy[e][accTipo] == 2)
					{
						ToyMuestra[count] = InfoToy[e][accModelo];
						count++;
					}
					ShowModelSelectionMenuEx(playerid, ToyMuestra, count, "Toys de policia", Compra_Toy);
					return 1;
				}
				new gformat2[128];
				format(gformat2, sizeof gformat2, "No puedes tener más de %d toys.", max_cToys);
				SendClientMessage(playerid, COLOR_GREY, gformat2);
			}
			case 25: //borrar objetos
			{
				new count = 0, gformat2[128];
				if (InfoPersonaje[playerid][pManoDerecha] != 0)
				{
					format(gformat2, sizeof gformat2, "Borraste %s de tu mano derecha.", InfoInventario[InfoPersonaje[playerid][pManoDerecha]][NombreObjeto]);
				    count++;
					RemovePlayerAttachedObject(playerid, 7);
					InfoPersonaje[playerid][pManoDerecha] = 0;
					InfoPersonaje[playerid][pManoDerechaCant] = 0;
					ResetPlayerWeapons(playerid);
					SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat2);
				}
				if (InfoPersonaje[playerid][pManoIzquierda] != 0)
				{
				    format(gformat2, sizeof gformat2, "Borraste %s de tu mano izquierda.", InfoInventario[InfoPersonaje[playerid][pManoIzquierda]][NombreObjeto]);
					count++;
					RemovePlayerAttachedObject(playerid, 8);
					InfoPersonaje[playerid][pManoIzquierda] = 0;
					InfoPersonaje[playerid][pManoIzquierdaCant] = 0;
					SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat2);
				}
				if (count == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes nada que borrar de tus manos, están vacías.");
				new query[500];
				mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Mano_derecha = 0, Cantidad_mano_derecha = 0, Mano_izquierda = 0, Cantidad_mano_izquierda = 0 WHERE ID = '%d'", InfoPersonaje[playerid][pID]);
				mysql_tquery(DBInsanity, query);
			}/*
			case 26: //recargar balas
			{
				format(gformat, sizeof gformat, "{FFFFFF}Puedes recargar {00AE57}%d balas{FFFFFF} más para tu {00AE57}%s{FFFFFF}.\n", InfoInventario[mano][MaxCantidad]-cantidad, InfoInventario[mano][NombreObjeto]);
				Dialog_Show(playerid, BalasEquipo, DIALOG_STYLE_INPUT, "{00AE57}Recarga de balas", "Cargador 9mm\nCargador Desert eagle\nCargador MP5\nCargador M4\nCargador AK47\nCargador Uzi\nCargador Tec9\nCargador Rifle", "Crear", "Volver");
			}*/
		}
	}
	else //otros
	{
		switch (x)
		{
			case 0..19: //equipo
			{
				if (matts <= 0) return SendClientMessage(playerid, COLOR_GREY, "Su facción no dispone de armamento o materiales en su armario.");
				new objeto = InfoFaccion[faccion][fEquipo][x];
				if (objeto == 900)
				{
					if (InfoPersonaje[playerid][pVida] >= 99.0) return SendClientMessage(playerid, COLOR_GREY, "Ya tienes la vida full.");
					dar_vida(playerid, 100);
					meuwu(playerid, "coge un botiquin hp del armario.");
				}
				else if (objeto == 950)
				{
					if (InfoPersonaje[playerid][pChaleco] >= 99.0) return SendClientMessage(playerid, COLOR_GREY, "Ya tienes el chaleco full.");
					dar_chaleco(playerid, 100);
					meuwu(playerid, "coge un chaleco del armario.");
				}
				else
				{
					if (InfoPersonaje[playerid][pManoDerecha] > 0 && InfoPersonaje[playerid][pManoIzquierda] > 0) return SendClientMessage(playerid, COLOR_GREY, "Posees ambas manos ocupadas, guarda o arroja lo que llevas.");
					if (InfoPersonaje[playerid][pManoDerecha] != 0)
					{
						InfoPersonaje[playerid][pManoIzquierda] = objeto;
						InfoPersonaje[playerid][pManoIzquierdaCant] = InfoInventario[objeto][DefaultCantidad];
						PonerObjeto(playerid, 2, objeto);
						format(gformat, sizeof gformat, "coge %s del armario en su mano izquierda.", GetObjEquipo(objeto));
					}
					else
					{
						InfoPersonaje[playerid][pManoDerecha] = objeto;
						InfoPersonaje[playerid][pManoDerechaCant] = InfoInventario[objeto][DefaultCantidad];
						PonerObjeto(playerid, 1, objeto);
						if (InfoInventario[objeto][IDArma] > 0) { GivePlayerWeapon(playerid, InfoInventario[objeto][IDArma], InfoInventario[objeto][DefaultCantidad]); }
						format(gformat, sizeof gformat, "coge %s del armario en su mano derecha.", GetObjEquipo(objeto));
					}
					meuwu(playerid, gformat);
					ActualizarManos(playerid);
				}
			}
			case 20: //skins
			{
				new SkinMuestra[20], count = 0;
				Loop(e, 20, 0) if (InfoFaccion[faccion][fSkin][e] != 0)
				{
					SkinMuestra[count] = InfoFaccion[faccion][fSkin][e];
					count++;
				}
				ShowModelSelectionMenuEx(playerid, SkinMuestra, count, InfoFaccion[faccion][fLogo], Equipo_Skin, -11.0, 0.0, -55.0, 1.0);

			}
			case 21: //skin normal
			{
				if (InfoPersonaje[playerid][pJobSkin] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes puesto ningún skin de facción o trabajo.");
				GivePlayerSkin(playerid, InfoPersonaje[playerid][pSkin]);
				meuwu(playerid, "se viste con su ropa normal.");
			}
		}
	}
	return 1;
}
/*
Dialog:BalasEquipo(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_equipo(playerid);
		
	new gformat[128];
	switch (listitem)
	{
		case 0:
		{
			if (DarObjeto(playerid, 57, 24) == 2) return 1;

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Creaste {00AE57cargador de 9mm{FFFFFF} por {00CC00}%d{FFFFFF} materiales.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
		case 1:
		{
			if (DarObjeto(playerid, 58, 14) == 2) return 1;

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Creaste {00AE57cargador de deagle{FFFFFF} por {00CC00}%d{FFFFFF} materiales.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
		case 2:
		{
			if (DarObjeto(playerid, 61, 50) == 2) return 1;

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Creaste {00AE57cargador de MP5{FFFFFF} por {00CC00}%d{FFFFFF} materiales.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
		case 3:
		{
			if (DarObjeto(playerid, 63, 50) == 2) return 1;

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Creaste {00AE57cargador de M4{FFFFFF} por {00CC00}%d{FFFFFF} materiales.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
		case 4:
		{
			if (DarObjeto(playerid, 62, 50) == 2) return 1;

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Creaste {00AE57cargador de AK47{FFFFFF} por {00CC00}%d{FFFFFF} materiales.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
		case 5:
		{
			if (DarObjeto(playerid, 60, 50) == 2) return 1;

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Creaste {00AE57cargador de Uzi{FFFFFF} por {00CC00}%d{FFFFFF} materiales.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
		case 6:
		{
			if (DarObjeto(playerid, 64, 50) == 2) return 1;

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Creaste {00AE57cargador de Tec9{FFFFFF} por {00CC00}%d{FFFFFF} materiales.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
		case 7:
		{
			if (DarObjeto(playerid, 65, 5) == 2) return 1;

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Creaste {00AE57cargador de rifle{FFFFFF} por {00CC00}%d{FFFFFF} materiales.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
	}
	//guarda variables
	ActualizarManos(playerid);

	//guarda variables
	ActualizarManos(playerid);
	//mensaje de compra uwu
	format(gformat, sizeof gformat, "Recargaste {00AE57}%d balas{FFFFFF} a tu {00AE57}%s{FFFFFF}, ahora tienes {00AE57}%d balas{FFFFFF}.", balasCant, InfoInventario[mano][NombreObjeto], InfoPersonaje[playerid][pManoDerechaCant]);
	SendClientMessage(playerid, 0xFFFFFFFF, gformat);
	return 1;
}*/

GetColorLogo(tipo)
{
	new color[12];
	switch (tipo)
	{
		case 1: alm(color, "{3052DC}");
		case 2: alm(color, "{119585}");
		case 3: alm(color, "{16AE00}");
		case 4: alm(color, "{B7834F}");
		case 5: alm(color, "{A09792}");
		case 6: alm(color, "{F8F210}");
		default: alm(color, "{E87400}");
	}
	return color;
}

CMD:facciones(playerid)
{
	new gformat[320], dialog[3048] = "# Logo & Nombre\tMiembros\tLíder\tSub Líder\n";
	Loop(id, totalfacciones, 1) if (InfoFaccion[id][fTipo] != 0)
	{
		format(gformat, sizeof gformat, "{EBEBEB}(%d %s%s{EBEBEB}) %s\t%d\t{589DA0}%s\t{589DA0}%s\n", id, GetColorLogo(InfoFaccion[id][fTipo]), InfoFaccion[id][fLogo], InfoFaccion[id][fNombre], GetMiembrosFaccion(id), InfoFaccion[id][fLider], InfoFaccion[id][fSubLider]);
		strcat(dialog, gformat);
	}
	Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_TABLIST_HEADERS, "Facciones", dialog, "Cerrar", "");
	return 1;
}
CMD:organizaciones(playerid) return cmd_facciones(playerid);
CMD:bandas(playerid) return cmd_facciones(playerid);

CMD:statusfacc(playerid)
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes variables de encargado de facciones.");
	new gformat[320], dialog[2048] = "Facción\tDinero\tMateriales\tSalario\n";
	Loop(id, totalfacciones, 1) if (InfoFaccion[id][fTipo] != 0)
	{
		format(gformat, sizeof gformat, "%s%s\t{00CC00}$%s\t{589DA0}%d\t{00CC00}$%s\n", GetColorLogo(InfoFaccion[id][fTipo]), InfoFaccion[id][fLogo], diner_coma(InfoFaccion[id][fDinero]), InfoFaccion[id][fMateriales], diner_coma(InfoFaccion[id][fSalario]));
		strcat(dialog, gformat);
	}
	Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_TABLIST_HEADERS, "Status de facciones", dialog, "Cerrar", "");
	return 1;
}
CMD:statusfacciones(playerid) return cmd_statusfacc(playerid);

CMD:facchat(playerid, params[])
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes variables de encargado de facciones.");
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /facchat (Mensaje para miembros en las facciones)");
	new string[320];
	format(string, sizeof string, "{00A2FF}[E.F] %s:{FFFFFF} %s", NombreOriginal(playerid), params);
	foreach(Player, i) if (IsPlayerConnectedEx(i))
	{
		if (InfoPersonaje[i][pMiembro] != 0)
			SendSplitMessage(i, 0xFFFFFFFF, string);
	}
	return 1;
}

CMD:supervisar(playerid, params[])
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes variables de encargado de facciones.");
	new faccion, string[345];
	if (sscanf(params, "d", faccion)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /supervisar (FacciónID)");
	if (faccion < 0 || faccion > MAX_FACCIONES) return SendClientMessage(playerid, COLOR_GREY, "ID de facción incorrecta.");
	if (faccion == 0)
	{
		InfoPersonaje[playerid][pLider] = 0;
		InfoPersonaje[playerid][pMiembro] = 0;
		InfoPersonaje[playerid][pRango] = 0;
		SendClientMessage(playerid, COLOR_LIGHTBLUE, "Has dejado de supervisar facciones.");
		return 1;
	}
	if (!InfoFaccion[faccion][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
	InfoPersonaje[playerid][pLider] = faccion;
	InfoPersonaje[playerid][pMiembro] = faccion;
	InfoPersonaje[playerid][pRango] = InfoFaccion[faccion][fMaxRangos];
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) está supervisando %s.", InfoCuenta[playerid][jApodo], playerid, InfoFaccion[faccion][fNombre]);
	SendAdminMessage(0xFF6347FF, string);
	return 1;
}

CMD:hacerlider(playerid, params[])
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes variables de encargado de facciones.");
	new playerid2, faccion, string[512], query[512];
	if (sscanf(params, "dd", playerid2, faccion)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /hacerlider [id jugador] [facción]");
	if (faccion < 1 || faccion > MAX_FACCIONES) return SendClientMessage(playerid, COLOR_GREY, "ID de facción incorrecta.");
	if (!InfoFaccion[faccion][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "El jugador seleccionado no se encuentra conectado.");
	if (strcmp(InfoFaccion[faccion][fLider], "disponible", true) == 0)
	{
		if (InfoPersonaje[playerid2][pMiembro] != 0) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador ya está en una facción.");
		alm(InfoFaccion[faccion][fLider], NombreDeCuenta(playerid2));
		mysql_format(DBInsanity, query, sizeof query, "UPDATE facciones SET Lider = '%e' WHERE ID = '%d'", InfoFaccion[faccion][fLider], InfoFaccion[faccion][fID_sql]);
		mysql_tquery(DBInsanity, query);
		InfoPersonaje[playerid2][pLider] = faccion;
		InfoPersonaje[playerid2][pMiembro] = faccion;
		InfoPersonaje[playerid2][pRango] = InfoFaccion[faccion][fMaxRangos];
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET LiderFaccion = '%d', MiembroFaccion = '%d', Rango = '%d' WHERE ID = '%d'", faccion, faccion, InfoPersonaje[playerid2][pRango], InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
		format(string, sizeof string, "* %s te asignó el líder de %s.", NombreOriginal(playerid), InfoFaccion[faccion][fNombre]);
		SendClientMessage(playerid2, 0x6ADFFFFF, string);
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) asignó lider de %s a %s(%d).", InfoCuenta[playerid][jApodo], playerid, InfoFaccion[faccion][fNombre], NombreOriginal(playerid2), playerid2);
		SendAdminMessage(0xFF6347FF, string);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Esa facción ya posee lider, prueba /hacersublider.");
	return 1;
}

CMD:hacersublider(playerid, params[])
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes variables de encargado de facciones.");
	new playerid2, faccion, string[512], query[512];
	if (sscanf(params, "dd", playerid2, faccion)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /hacersublider [id jugador] [facción]");
	if (faccion < 1 || faccion > MAX_FACCIONES) return SendClientMessage(playerid, COLOR_GREY, "ID de facción incorrecta.");
	if (!InfoFaccion[faccion][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "El jugador seleccionado no se encuentra conectado.");
	if (strcmp(InfoFaccion[faccion][fSubLider], "disponible", true) == 0)
	{
		if (InfoPersonaje[playerid2][pMiembro] != 0) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador ya está en una facción.");
		alm(InfoFaccion[faccion][fSubLider], NombreDeCuenta(playerid2));
		mysql_format(DBInsanity, query, sizeof query, "UPDATE facciones SET SubLider = '%e' WHERE ID = '%d'", InfoFaccion[faccion][fSubLider], InfoFaccion[faccion][fID_sql]);
		mysql_tquery(DBInsanity, query);
		InfoPersonaje[playerid2][pLider] = faccion;
		InfoPersonaje[playerid2][pMiembro] = faccion;
		InfoPersonaje[playerid2][pRango] = InfoFaccion[faccion][fMaxRangos];
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET LiderFaccion = '%d', MiembroFaccion = '%d', Rango = '%d' WHERE ID = '%d'", faccion, faccion, InfoPersonaje[playerid2][pRango], InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
		format(string, sizeof string, "* %s te asignó el sublíder de %s.", NombreOriginal(playerid), InfoFaccion[faccion][fNombre]);
		SendClientMessage(playerid2, 0x6ADFFFFF, string);
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) asignó sublider de %s a %s(%d).", InfoCuenta[playerid][jApodo], playerid, InfoFaccion[faccion][fNombre], NombreOriginal(playerid2), playerid2);
		SendAdminMessage(0xFF6347FF, string);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Esa facción ya posee sublider, intenta con /darmiembro o limpiando la facción.");
	return 1;
}

CMD:darmiembro(playerid, params[])
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes variables de encargado de facciones.");
	new playerid2, id, rango, gformat[256];
	if (sscanf(params, "ddd", playerid2, id, rango)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /darmiembro (JugadorID) (FacciónID) (Rango)");
	if (id < 0 || id > MAX_FACCIONES) return SendClientMessage(playerid, COLOR_GREY, "ID de facción incorrecta.");
	if (InfoPersonaje[playerid2][pLider] != 0) return SendClientMessage(playerid, COLOR_GREY, "No puedes usar este comando en lideres, debes limpiar la facción.");
	if (id == 0)
	{
		if (InfoPersonaje[playerid2][pMiembro] == 0) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador no está en ninguna facción.");
		OnDuty[playerid2] = 0;
		InfoPersonaje[playerid2][pLider] = 0;
		InfoPersonaje[playerid2][pMiembro] = 0;
		InfoPersonaje[playerid2][pRango] = 0;
		mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE personajes SET Rango = '%d', LiderFaccion = 0, MiembroFaccion = '%d' WHERE ID = '%d'", InfoPersonaje[playerid2][pRango], InfoPersonaje[playerid2][pMiembro], InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, gformat);
		format(gformat, sizeof gformat, "%s te sacó de la facción en la que estabas.", NombreOriginal(playerid));
		SendClientMessage(playerid2, 0x6ADFFFFF, gformat);
		format(gformat, sizeof gformat, "Administración:{FFFFFF} %s(%d) saco a %s(%d) de la facción en la que estaba.", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
		SendAdminMessage(0xFF6347FF, gformat);
		return 1;
	}
	if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "El jugador seleccionado no se encuentra conectado.");
	if (rango < 1 || rango > InfoFaccion[id][fMaxRangos])
	{
		format(gformat, sizeof gformat, "El máximo de rangos de %s es de %d.", InfoFaccion[id][fLogo], InfoFaccion[id][fMaxRangos]);
		SendClientMessage(playerid, COLOR_GREY, gformat);
		return 1;
	}
	OnDuty[playerid2] = 0;
	InfoPersonaje[playerid2][pLider] = 0;
	InfoPersonaje[playerid2][pMiembro] = id;
	InfoPersonaje[playerid2][pRango] = rango;
	mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE personajes SET Rango = '%d', LiderFaccion = 0, MiembroFaccion = '%d' WHERE ID = '%d'", InfoPersonaje[playerid2][pRango], InfoPersonaje[playerid2][pMiembro], InfoPersonaje[playerid2][pID]);
	mysql_tquery(DBInsanity, gformat);
	format(gformat, sizeof gformat, "%s te asignó miembro de %s con rango %d.", NombreOriginal(playerid), InfoFaccion[id][fLogo], rango);
	SendClientMessage(playerid2, 0x6ADFFFFF, gformat);
	format(gformat, sizeof gformat, "Administración:{FFFFFF} %s(%d) asignó miembro de %s (rango %d) a %s(%d).", InfoCuenta[playerid][jApodo], playerid, InfoFaccion[id][fLogo], rango, NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, gformat);
	return 1;
}
CMD:hacermiembro(playerid, params[]) return cmd_darmiembro(playerid, params);

CMD:crearfaccion(playerid, params[])
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes variables de encargado de facciones.");
	new tipo, string[256], query[1028];
	if (sscanf(params, "d", tipo)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /crearfaccion (Tipo) [1: Legal | 2: Pandilla | 3: Mafia]");
	if (tipo < 1 || tipo > 3) return SendClientMessage(playerid, 0xFF6347AA, "Tipos (1: Legal | 2: Pandilla | 3: Mafia)"); 															//	if (tipo < 1 || tipo > 5) return SendClientMessage(playerid, 0xFF6347AA, "1lspd, 2fbi, 3saem, 4medicos, 5gobierno");
	tipo += 5;
	Loop(id, MAX_FACCIONES, 1) if (!InfoFaccion[id][fTipo])
	{
		alm(InfoFaccion[id][fNombre], "/editarfnombre");
		alm(InfoFaccion[id][fLogo], "none");
		alm(InfoFaccion[id][fLider], "disponible");
		alm(InfoFaccion[id][fSubLider], "disponible");
		alm(InfoFaccion[id][fMensaje], "none");
		InfoFaccion[id][fTipo] = tipo;
		InfoFaccion[id][fMaxRangos] = 6;
		Loop(x, 15, 0)
		{
			new gformat[15];
			format(gformat, sizeof gformat, "Rank%d", x+1);
			alm(fac_rango[id][x], gformat);
		}
		format(string, sizeof string, "Registros: %s ha creado la facción ID %d.", InfoCuenta[playerid][jApodo], id);
		Log("LOGS/Facciones.log", string);
		format(string, sizeof string, "Creaste la facción ID %d, configurala con /editarfnombre, /editarflogo y /editarfaccion", id);
		SendClientMessage(playerid, 0x90C3D4FF, string);

		//opción idsql ya creada.
		if (InfoFaccion[id][fID_sql] != 0)
		{
			mysql_format(DBInsanity, query, sizeof query, "UPDATE facciones SET Nombre = '%e', Logo = '%e', Lider = '%e', SubLider = '%e', Mensaje = '%e', Tipo = '%d', MaxRangos = '%d' WHERE ID = '%d'",
			InfoFaccion[id][fNombre],
			InfoFaccion[id][fLogo],
			InfoFaccion[id][fLider],
			InfoFaccion[id][fSubLider],
			InfoFaccion[id][fMensaje],
			InfoFaccion[id][fTipo],
			InfoFaccion[id][fMaxRangos],
			InfoFaccion[id][fID_sql]);
			mysql_tquery(DBInsanity, query);
			id = MAX_FACCIONES;
			return 1;
		}
		mysql_format(DBInsanity, query, sizeof query, "INSERT INTO facciones (Nombre, Logo, Lider, SubLider, Mensaje, Tipo, MaxRangos) VALUES ('%e', '%e', '%e', '%e', '%e', '%d', '%d')",
		InfoFaccion[id][fNombre],
		InfoFaccion[id][fLogo],
		InfoFaccion[id][fLider],
		InfoFaccion[id][fSubLider],
		InfoFaccion[id][fMensaje],
		InfoFaccion[id][fTipo],
		InfoFaccion[id][fMaxRangos]);
		mysql_tquery(DBInsanity, query, "OnFactionCreate", "i", id);
		id = MAX_FACCIONES;
		return 1;
	}
	SendClientMessage(playerid, COLOR_RED, "Se alcanzó el máximo de facciones (50)");
	return 1;
}
CMD:crearfac(playerid, params[]) return cmd_crearfaccion(playerid, params);

forward OnFactionCreate(id);
public OnFactionCreate(id)
{
	totalfacciones++;
	InfoFaccion[id][fID_sql] = cache_insert_id();
	cache_unset_active();
    return 1;
}

CMD:borrarfaccion(playerid, params[])
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes variables de encargado de facciones.");
	new id, query[256];
	if (sscanf(params, "d", id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /borrarfaccion [slot]");
	if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
	if (!strcmp(InfoCuenta[playerid][jNombre], "Andres", true) || !strcmp(InfoCuenta[playerid][jNombre], "Artic", true))
	{
		mysql_format(DBInsanity, query, sizeof query, "SELECT * FROM personajes WHERE MiembroFaccion = '%d'", id);
		mysql_tquery(DBInsanity, query, "OnActiveMembers", "dd", playerid, id);
	}
	else
	{
		if (NoFacEdit(id)) return SendClientMessage(playerid, COLOR_GREY, "No puedes borrar facciones oficiales del servidor.");
		mysql_format(DBInsanity, query, sizeof query, "SELECT * FROM personajes WHERE MiembroFaccion = '%d'", id);
		mysql_tquery(DBInsanity, query, "OnActiveMembers", "dd", playerid, id);
	}
	return 1;
}
CMD:borrarfac(playerid, params[]) return cmd_borrarfaccion(playerid, params);

forward OnActiveMembers(playerid, id);
public OnActiveMembers(playerid, id)
{
	new members = 0;
	Loop(player, cache_num_rows(), 0)
	{
		new nombreapellido[32], newid = -1;
		reg_string(player, "Nombre_Apellido", nombreapellido, 32);
		//fix 22/04/2020
		foreach(Player, juegador) if (IsPlayerConnectedEx(juegador) && !strcmp(InfoPersonaje[juegador][pNombre_Apellido], nombreapellido, true)) { newid = juegador; }
 		//fix 22/04/2020
		if (IsPlayerConnectedEx(newid))
		{
			InfoPersonaje[newid][pLider] = 0;
			InfoPersonaje[newid][pMiembro] = 0;
			InfoPersonaje[newid][pRango] = 0;
			SendClientMessage(playerid, COLOR_LIGHTRED, "Acaban de borrar la facción en la que estabas.");
		}
		new query[256];
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET LiderFaccion = 0, MiembroFaccion = 0, Rango = 0 WHERE Nombre_Apellido = '%e'", nombreapellido);
		mysql_tquery(DBInsanity, query);
		members++;
	}
	alm(InfoFaccion[id][fNombre], "none");
	alm(InfoFaccion[id][fLogo], "none");
	alm(InfoFaccion[id][fLider], "disponible");
	alm(InfoFaccion[id][fSubLider], "disponible");
	alm(InfoFaccion[id][fMensaje], "none");
	InfoFaccion[id][fTipo] = 0;
	InfoFaccion[id][fDinero] = 0;
	InfoFaccion[id][fSalario] = 0;
	InfoFaccion[id][fMaxRangos] = 6;
	InfoFaccion[id][fSpawnX] = 0.0;
	InfoFaccion[id][fSpawnY] = 0.0;
	InfoFaccion[id][fSpawnZ] = 0.0;
	InfoFaccion[id][fSpawnR] = 0.0;
	InfoFaccion[id][fSpawnInt] = 0;
	InfoFaccion[id][fSpawnVW] = 0;
	InfoFaccion[id][fArmarioX] = 0.0;
	InfoFaccion[id][fArmarioY] = 0.0;
	InfoFaccion[id][fArmarioZ] = 0.0;
	InfoFaccion[id][fArmarioInt] = 0;
	InfoFaccion[id][fArmarioVW] = 0;
	InfoFaccion[id][fMateriales] = 0;
	DestroyDynamicPickup(InfoFaccion[id][fArmarioPickup]);
	DestroyDynamic3DTextLabel(InfoFaccion[id][fArmarioLabel]);
	Loop(x, 20, 0)
	{
		InfoFaccion[id][fEquipo][x] = 0;
		InfoFaccion[id][fSkin][x] = 0;
		new que3ry[256];
		mysql_format(DBInsanity, que3ry, sizeof que3ry, "UPDATE facciones SET Equipo%d = 0, Skin%d = 0 WHERE ID = '%d'", x+1, x+1, InfoFaccion[id][fID_sql]);
		mysql_tquery(DBInsanity, que3ry);
	}
	Loop(x, 15, 0)
	{
		new gformat[15], que3ry[256];
		format(gformat, sizeof(gformat), "Rank%d", x+1);
		alm(fac_rango[id][x], gformat);
		mysql_format(DBInsanity, que3ry, sizeof que3ry, "UPDATE facciones SET Rango%d = '%e' WHERE ID = '%d'", x+1, fac_rango[id][x], InfoFaccion[id][fID_sql]);
		mysql_tquery(DBInsanity, que3ry);
	}
	new query[2048], string[256];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE facciones SET Nombre = '%e', Logo = '%e', Lider = '%e', SubLider = '%e', Mensaje = '%e', Tipo = 0, BolosUwU = 0, Salario = 0, \
	SpawnX = 0.0, SpawnY = 0.0, SpawnZ = 0.0, SpawnR = 0.0, SpawnInt = 0, SpawnVW = 0, ArmarioX = 0.0, ArmarioY = 0.0, ArmarioZ = 0.0, ArmarioInt = 0, ArmarioVW = 0, Materiales = 0, MaxRangos = 6 WHERE ID = '%d'",
	InfoFaccion[id][fNombre], InfoFaccion[id][fLogo], InfoFaccion[id][fLider], InfoFaccion[id][fSubLider], InfoFaccion[id][fMensaje], InfoFaccion[id][fID_sql]);
	mysql_tquery(DBInsanity, query);
	format(string, sizeof string, "Borraste la facción ID %d con %d miembros, SQL vacía: %d", id, members, InfoFaccion[id][fID_sql]);
	SendClientMessage(playerid, COLOR_LIGHTGREEN, string);
	return 1;
}

CMD:limpiarf(playerid, params[]) return cmd_limpiarfaccion(playerid, params);
CMD:limpiarfaccion(playerid, params[])
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes variables de encargado de facciones.");
	new id, query[256];
	if (sscanf(params, "d", id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /limpiarfaccion (FacciónID)");
	if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
	mysql_format(DBInsanity, query, sizeof query, "SELECT * FROM personajes WHERE MiembroFaccion = '%d'", id);
	mysql_tquery(DBInsanity, query, "OnLimpiezaFacction", "dd", playerid, id);
	return 1;
}

forward OnLimpiezaFacction(playerid, id);
public OnLimpiezaFacction(playerid, id)
{
	new members = 0;
	new query[512];
	Loop(player, cache_num_rows(), 0)
	{
		new nombreapellido[32], newid = -1;
		reg_string(player, "Nombre_Apellido", nombreapellido, 32);
		//fix 22/04/2020
		foreach(Player, juegador) if (IsPlayerConnectedEx(juegador) && !strcmp(InfoPersonaje[juegador][pNombre_Apellido], nombreapellido, true)) { newid = juegador; }
 		//fix 22/04/2020
		if (IsPlayerConnectedEx(newid))
		{
			InfoPersonaje[newid][pLider] = 0;
			InfoPersonaje[newid][pMiembro] = 0;
			InfoPersonaje[newid][pRango] = 0;
			SendClientMessage(playerid, COLOR_LIGHTRED, "Acaban de limpiar la facción en la que estabas.");
		}
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET LiderFaccion = 0, MiembroFaccion = 0, Rango = 0 WHERE Nombre_Apellido = '%e'", nombreapellido);
		mysql_tquery(DBInsanity, query);
		members++;
	}
	alm(InfoFaccion[id][fLider], "disponible");
	alm(InfoFaccion[id][fSubLider], "disponible");
	alm(InfoFaccion[id][fMensaje], "none");
	mysql_format(DBInsanity, query, sizeof query, "UPDATE facciones SET Lider = '%e', SubLider = '%e', Mensaje = '%e' WHERE ID = '%d'", InfoFaccion[id][fLider], InfoFaccion[id][fSubLider], InfoFaccion[id][fMensaje], InfoFaccion[id][fID_sql]);
	mysql_tquery(DBInsanity, query);
	format(query, sizeof query, "Limpiaste %s con %d miembros.", InfoFaccion[id][fNombre], members);
	SendClientMessage(playerid, COLOR_LIGHTGREEN, query);
	return 1;
}

CMD:editarfnombre(playerid, params[])
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes variables de encargado de facciones.");
	new id, fnombre[128], query[256];
	if (sscanf(params, "ds[128]", id, fnombre)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarfnombre (FacciónID) (Nombre)");
	if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
	if (!strcmp(InfoCuenta[playerid][jNombre], "Andres", true) || !strcmp(InfoCuenta[playerid][jNombre], "Artic", true))
	{
		alm(InfoFaccion[id][fNombre], fnombre);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE facciones SET Nombre = '%e' WHERE ID = '%d'", InfoFaccion[id][fNombre], InfoFaccion[id][fID_sql]);
		mysql_tquery(DBInsanity, query);
		format(query, sizeof query, "Facción %d | %s", id, fnombre);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, query);
	}
	else
	{
		if (NoFacEdit(id)) return SendClientMessage(playerid, COLOR_GREY, "No puedes editar facciones oficiales del servidor.");
		alm(InfoFaccion[id][fNombre], fnombre);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE facciones SET Nombre = '%e' WHERE ID = '%d'", InfoFaccion[id][fNombre], InfoFaccion[id][fID_sql]);
		mysql_tquery(DBInsanity, query);
		format(query, sizeof query, "Facción %d | %s", id, fnombre);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, query);
	}
	return 1;
}

CMD:editarflogo(playerid, params[])
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes variables de encargado de facciones.");
	new id, flogo[11], query[256];
	if (sscanf(params, "ds[11]", id, flogo)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarflogo (FacciónID) (LogoTipo)");
	if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
	if (!strcmp(InfoCuenta[playerid][jNombre], "Andres", true) || !strcmp(InfoCuenta[playerid][jNombre], "Artic", true))
	{
		alm(InfoFaccion[id][fLogo], flogo);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE facciones SET Logo = '%e' WHERE ID = '%d'", InfoFaccion[id][fLogo], InfoFaccion[id][fID_sql]);
		mysql_tquery(DBInsanity, query);
		format(query, sizeof query, "Facción %d | %s", id, flogo);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, query);
		if (InfoFaccion[id][fArmarioX] != 0.0) faccion_armario(id, 1);
	}
	else
	{
		if (NoFacEdit(id)) return SendClientMessage(playerid, COLOR_GREY, "No puedes editar facciones oficiales del servidor.");
		alm(InfoFaccion[id][fLogo], flogo);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE facciones SET Logo = '%e' WHERE ID = '%d'", InfoFaccion[id][fLogo], InfoFaccion[id][fID_sql]);
		mysql_tquery(DBInsanity, query);
		format(query, sizeof query, "Facción %d | %s", id, flogo);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, query);
		if (InfoFaccion[id][fArmarioX] != 0.0) faccion_armario(id, 1);
	}
	return 1;
}

CMD:editarflider(playerid, params[])
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes variables de encargado de facciones.");
	new id, flider[25], query[256];
	if (sscanf(params, "ds[25]", id, flider)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarflider (FacciónID) (Lider)");
	if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
	alm(InfoFaccion[id][fLider], flider);
	mysql_format(DBInsanity, query, sizeof query, "UPDATE facciones SET Lider = '%e' WHERE ID = '%d'", InfoFaccion[id][fLider], InfoFaccion[id][fID_sql]);
	mysql_tquery(DBInsanity, query);
	format(query, sizeof query, "Facción %d | Lider: %s", id, flider);
	SendClientMessage(playerid, COLOR_LIGHTBLUE, query);
	return 1;
}

CMD:editarfsublider(playerid, params[])
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes variables de encargado de facciones.");
	new id, flider[25], query[256];
	if (sscanf(params, "ds[25]", id, flider)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarfsublider (FacciónID) (SubLider)");
	if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
	alm(InfoFaccion[id][fSubLider], flider);
	mysql_format(DBInsanity, query, sizeof query, "UPDATE facciones SET SubLider = '%e' WHERE ID = '%d'", InfoFaccion[id][fSubLider], InfoFaccion[id][fID_sql]);
	mysql_tquery(DBInsanity, query);
	format(query, sizeof query, "Facción %d | Sub Lider: %s", id, flider);
	SendClientMessage(playerid, COLOR_LIGHTBLUE, query);
	return 1;
}

CMD:editarfaccion(playerid, params[])
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes variables de encargado de facciones.");
	new id, string[512], input;
	if (sscanf(params, "s[32]", params))
	{
		SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarf (Nombre) (FacciónID) (Opción)");
		SendClientMessage(playerid, COLOR_GREEN, "Opciones: dinero - tipo - salario - maxrangos - spawn - posequipo - materiales");
		return 1;
	}
	if (!strcmp(params, "dinero", true, 6))
	{
		if (sscanf(params, "s[32]ii", params, id, input)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarf dinero (FacciónID) ($)");
		if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
		InfoFaccion[id][fDinero] += input;
		guardar_int_mysql("facciones", "BolosUwU", InfoFaccion[id][fID_sql], InfoFaccion[id][fDinero]);
		format(string, sizeof string, "Ahora los fondos de la facción %s (%d) son $%d dólares.", InfoFaccion[id][fLogo], id, input);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	}
	else if (!strcmp(params, "tipo", true, 4))
	{
		if (sscanf(params, "s[32]ii", params, id, input)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarf tipo (FacciónID) (Tipo)");
		if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
		if (NoFacEdit(id)) return SendClientMessage(playerid, COLOR_GREY, "No puedes editar facciones oficiales del servidor.");
		if (input < 1 || input > 3) return SendClientMessage(playerid, 0xFF6347AA, "Tipos (1: Legal | 2: Pandilla | 3: Mafia)");
		input += 5;
		InfoFaccion[id][fTipo] = input;
		guardar_int_mysql("facciones", "Tipo", InfoFaccion[id][fID_sql], InfoFaccion[id][fTipo]);
		format(string, sizeof string, "Ahora el tipo de la facción %s (%d) es %d.", InfoFaccion[id][fLogo], id, input-5);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	}
	else if (!strcmp(params, "salario", true, 7))
	{
		if (sscanf(params, "s[32]ii", params, id, input)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarf salario (FacciónID) ($)");
		if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
		InfoFaccion[id][fSalario] = input;
		guardar_int_mysql("facciones", "Salario", InfoFaccion[id][fID_sql], InfoFaccion[id][fSalario]);
		format(string, sizeof string, "Ahora el salario de la facción %s (%d) es de $%d dólares.", InfoFaccion[id][fLogo], id, input);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	}
	else if (!strcmp(params, "materiales", true, 10))
	{
		if (sscanf(params, "s[32]ii", params, id, input)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarf materiales (FacciónID) (Cantidad)");
		if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
		if (InfoFaccion[id][fArmarioX] == 0.0) return SendClientMessage(playerid, COLOR_GREY, "No has configurado el lugar del /equipo. Utiliza: /editarf posequipo");
		InfoFaccion[id][fMateriales] = input;
		guardar_int_mysql("facciones", "Materiales", InfoFaccion[id][fID_sql], InfoFaccion[id][fMateriales]);
		format(string, sizeof string, "Ahora los materiales de la facción %s (%d) son %d.", InfoFaccion[id][fLogo], id, input);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
		faccion_armario(id, 1);
	}
	else if (!strcmp(params, "maxrangos", true, 9))
	{
		if (sscanf(params, "s[32]ii", params, id, input)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarf maxrangos (FacciónID) (Max)");
		if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
		InfoFaccion[id][fMaxRangos] = input;
		guardar_int_mysql("facciones", "MaxRangos", InfoFaccion[id][fID_sql], InfoFaccion[id][fMaxRangos]);
		format(string, sizeof string, "Ahora el máximo de rangos de la facción %s (%d) es de %d rangos.", InfoFaccion[id][fLogo], id, input);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	}
	else if (!strcmp(params, "spawn", true, 5))
	{
		if (sscanf(params, "s[32]i", params, id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarf spawn (FacciónID)");
		if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
		GetPlayerPos(playerid, InfoFaccion[id][fSpawnX], InfoFaccion[id][fSpawnY], InfoFaccion[id][fSpawnZ]);
		GetPlayerFacingAngle(playerid, InfoFaccion[id][fSpawnR]);
		InfoFaccion[id][fSpawnInt] = GetPlayerInterior(playerid);
		InfoFaccion[id][fSpawnVW] = GetPlayerVirtualWorld(playerid);
		format(string, sizeof string, "Cambiaste el spawn de la facción %s (%d).", InfoFaccion[id][fLogo], id);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
		mysql_format(DBInsanity, string, sizeof string, "UPDATE facciones SET SpawnX = '%f', SpawnY = '%f', SpawnZ = '%f', SpawnR = '%f', SpawnInt = '%d', SpawnVW = '%d' WHERE ID = '%d'", InfoFaccion[id][fSpawnX], InfoFaccion[id][fSpawnY], InfoFaccion[id][fSpawnZ], InfoFaccion[id][fSpawnR], InfoFaccion[id][fSpawnInt], InfoFaccion[id][fSpawnVW], InfoFaccion[id][fID_sql]);
		mysql_tquery(DBInsanity, string);
	}
	else if (!strcmp(params, "posequipo", true, 9))
	{
		if (sscanf(params, "s[32]i", params, id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarf posequipo (FacciónID)");
		if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
		GetPlayerPos(playerid, InfoFaccion[id][fArmarioX], InfoFaccion[id][fArmarioY], InfoFaccion[id][fArmarioZ]);
		InfoFaccion[id][fArmarioInt] = GetPlayerInterior(playerid);
		InfoFaccion[id][fArmarioVW] = GetPlayerVirtualWorld(playerid);
		format(string, sizeof string, "Cambiaste el lugar del /equipo de la facción %s (%d).", InfoFaccion[id][fLogo], id);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
		mysql_format(DBInsanity, string, sizeof string, "UPDATE facciones SET ArmarioX = '%f', ArmarioY = '%f', ArmarioZ = '%f', ArmarioInt = '%d', ArmarioVW = '%d' WHERE ID = '%d'", InfoFaccion[id][fArmarioX], InfoFaccion[id][fArmarioY], InfoFaccion[id][fArmarioZ], InfoFaccion[id][fArmarioInt], InfoFaccion[id][fArmarioVW], InfoFaccion[id][fID_sql]);
		mysql_tquery(DBInsanity, string);
		faccion_armario(id, 0);
	}
	return 1;
}
CMD:editarf(playerid, params[]) return cmd_editarfaccion(playerid, params);

NoFacEdit(id)
{
	switch (id)
	{
		case 1..5: return 1;
	}
	return 0;
}

CMD:editarfskin(playerid, params[])
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes variables de encargado de facciones.");
	new id, pslot, pskin, query[256];
	if (sscanf(params, "ddd", id, pslot, pskin)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarfskin (FacciónID) (Slot [1-20]) (SkinModel)");
	if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
	if (pslot < 1 || pslot > 20) return SendClientMessage(playerid, COLOR_GREY, "Slot inválido, prueba entre 1 al 20.");
	if (pskin == -1)
	{
		InfoFaccion[id][fSkin][pslot-1] = 0;
		mysql_format(DBInsanity, query, sizeof query, "UPDATE facciones SET Skin%d = 0 WHERE ID = '%d'", pslot, InfoFaccion[id][fID_sql]);
		mysql_tquery(DBInsanity, query);
		format(query, sizeof query, "Facción %s | Skin%d: removido", InfoFaccion[id][fLogo], pslot);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, query);
		return 1;
	}
	if (IsValidSkin(pskin) == 0) return SendClientMessage(playerid, COLOR_GREY, "Skin inválido, prueba entre 1 al 311.");
	Loop(x, 20, 0) if (InfoFaccion[id][fSkin][x] == pskin)
	{
		format(query, sizeof query, "Ya está el skin %d en el slot %d.", pskin, x+1);
		SendClientMessage(playerid, COLOR_GREY, query);
		return 1;
	}
	InfoFaccion[id][fSkin][pslot-1] = pskin;
	mysql_format(DBInsanity, query, sizeof query, "UPDATE facciones SET Skin%d = '%d' WHERE ID = '%d'", pslot, InfoFaccion[id][fSkin][pslot-1], InfoFaccion[id][fID_sql]);
	mysql_tquery(DBInsanity, query);
	format(query, sizeof query, "Facción %s | Skin%d: %d {FFFFFF}(Si quieres quitar el skin de este slot %d, usa en skin -1)", InfoFaccion[id][fLogo], pslot, pskin, pslot);
	SendClientMessage(playerid, COLOR_LIGHTBLUE, query);
	return 1;
}

CMD:editarfequipo(playerid, params[])
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes variables de encargado de facciones.");
	new id, dialog[1024], gformat[256];
	if (sscanf(params, "d", id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarfequipo (FacciónID)");
	if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
	Loop(x, 20, 0)
	{
		if (InfoFaccion[id][fEquipo][x] != 0) format(gformat, sizeof gformat, "{FFFFFF}%d | {00AE57}%s\n", x+1, GetObjEquipo(InfoFaccion[id][fEquipo][x]));
		else format(gformat, sizeof gformat, "{CCCCCC}%d | Vacío\n", x+1);
		strcat(dialog, gformat);
	}
	format(gformat, sizeof gformat, "Equipo de %s", InfoFaccion[id][fLogo]);
	Dialog_Show(playerid, ChangeFequipo, DIALOG_STYLE_LIST, gformat, dialog, "Cambiar", "Salir");
	ID_ACTUAL_FACUWU[playerid] = id;
	return 1;
}

Dialog:ChangeFequipo(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new gformat[450], id = ID_ACTUAL_FACUWU[playerid];
	format(gformat, sizeof gformat, "Estás editando el slot %d (objeto actual: %s)\n\nEscribe el id del nuevo objeto (id 900 es vida - id 950 es chaleco - el resto en /listaobjetos): ", listitem+1, GetObjEquipo(InfoFaccion[id][fEquipo][listitem]));
	Dialog_Show(playerid, Change2Fequipo, DIALOG_STYLE_INPUT, "Ajustes de /equipo", gformat, "Continuar", "Salir");
	ID_ACTUAL_EquipoUWU[playerid] = listitem;
	return 1;
}

Dialog:Change2Fequipo(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	if (!isnumeric(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "Sólo números porfavor, vuelve a intentarlo.");
	new obj = strval(inputtext);
	if (ValidObjEquipo(obj) == 0) return SendClientMessage(playerid, COLOR_GREY, "Objeto inválido, revisa /listaobjetos.");
	new slot = ID_ACTUAL_EquipoUWU[playerid], id = ID_ACTUAL_FACUWU[playerid], gformat[240];
	Loop(x, 20, 0) if (obj != 0 && InfoFaccion[id][fEquipo][x] == obj)
	{
		format(gformat, sizeof gformat, "%s ya lo tienes en el slot %d", GetObjEquipo(obj), x+1);
		SendClientMessage(playerid, COLOR_GREY, gformat);
		return 1;
	}
	InfoFaccion[id][fEquipo][slot] = obj;
	mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE facciones SET Equipo%d = '%d' WHERE ID = '%d'", slot+1, InfoFaccion[id][fEquipo][slot], InfoFaccion[id][fID_sql]);
	mysql_tquery(DBInsanity, gformat);
	format(gformat, sizeof gformat, "Facción: %s | Agregaste %s en el slot %d.", InfoFaccion[id][fLogo], GetObjEquipo(obj), slot+1);
	SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat);
	return 1;
}

CMD:irfaccion(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new id, gformat[180];
	if (sscanf(params, "d", id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /irfaccion (FacciónID) [esto te llevará al /equipo de la facción]");
	if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "ID de facción invalida.");
	if (InfoFaccion[id][fArmarioX] == 0.0) return SendClientMessage(playerid, COLOR_GREY, "Esa facción no tiene ajustado el lugar de /equipo.");
	SetPosEx(playerid, InfoFaccion[id][fArmarioX], InfoFaccion[id][fArmarioY], InfoFaccion[id][fArmarioZ], 0.0000, InfoFaccion[id][fArmarioInt], InfoFaccion[id][fArmarioVW], 1);
	format(gformat, sizeof gformat, "Acabas de ir al lugar de /equipo de %s.", InfoFaccion[id][fLogo]);
	SendClientMessage(playerid, COLOR_GREEN, gformat);
	return 1;
}
CMD:irf(playerid, params[]) return cmd_irfaccion(playerid, params);

//
CMD:ct(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "No tienes un cinturón táctico.");
	ver_cinturon(playerid);
	return 1;
}

ver_cinturon(playerid)
{
	ActualizarManos(playerid);
	// normal
	new dialog[1024], dialog2[256], count = 0;
	Loop(x, 6, 0)
	{
		if (InfoPersonaje[playerid][pCinturon][x] != 0) format(dialog2, sizeof dialog2, "{FFFFFF}%s\n", slot_objeto(InfoPersonaje[playerid][pCinturon][x], InfoPersonaje[playerid][pCinturonCant][x])), count++;
		else alm(dialog2, "{CCCCCC}—\n");
		strcat(dialog, dialog2);
	}
	//barra espacio
	strcat(dialog, "{8000FF}--------------------\n");
	//mano derecha
	if (InfoPersonaje[playerid][pManoDerecha] != 0) format(dialog2, sizeof dialog2, "{FFFFFF}Mano derecha: %s\n", slot_inv(InfoPersonaje[playerid][pManoDerecha], InfoPersonaje[playerid][pManoDerechaCant])), count++;
	else alm(dialog2, "{CCCCCC}Mano derecha vacía\n");
	strcat(dialog, dialog2);
	//mano izquierda
	if (InfoPersonaje[playerid][pManoIzquierda] != 0) format(dialog2, sizeof dialog2, "{FFFFFF}Mano izquierda: %s\n", slot_inv(InfoPersonaje[playerid][pManoIzquierda], InfoPersonaje[playerid][pManoIzquierdaCant])), count++;
	else alm(dialog2, "{CCCCCC}Mano izquierda vacía\n");
	strcat(dialog, dialog2);
	//show_dialog
	if (count == 0) return Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "Cinturón táctico", "{CCCCCC}No tienes nada que sacar o guardar.", "Cerrar", "");
	Dialog_Show(playerid, OpcionCinturon, DIALOG_STYLE_LIST, "Cinturón táctico", dialog, "Continuar", "Salir");
	return 1;
}

Dialog:OpcionCinturon(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0..5: sacar_cinturon(playerid, listitem);
		case 6: return cmd_ct(playerid);
		case 7: guardar_cinturon(playerid, 1);
		case 8: guardar_cinturon(playerid, 2);
	}
	return 1;
}

CMD:guardarct(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "No tienes un cinturón táctico.");
	guardar_cinturon(playerid, 1);
	return 1;
}
CMD:gct(playerid) return cmd_guardarct(playerid);

CMD:sacarct(playerid, params[])
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "No tienes un cinturón táctico.");
	new id;
	if (sscanf(params, "i", id))
	{
		new count = 0, dialog[256];
		Loop(x, 6, 0) if (InfoPersonaje[playerid][pCinturon][x] != 0) count++;
		if (count == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes nada en tu cinturón táctico.");
		SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /sacarct (Slot)");
		Loop(x, 6, 0) if (InfoPersonaje[playerid][pCinturon][x] != 0)
		{
			format(dialog, sizeof(dialog), "Tienes en {00AE57}slot %d{EBEBEB}: %s", x+1, slot_objeto(InfoPersonaje[playerid][pCinturon][x], InfoPersonaje[playerid][pCinturonCant][x]));
			SendClientMessage(playerid, 0xEBEBEBFF, dialog);
		}
		return 1;
	}
	if (sscanf(params, "i", id)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /sacarct (Slot)");
	if (id < 1 || id > 6) { SendClientMessage(playerid, COLOR_GREY, "El número del espacio debe estar entre 1 y 6."); return 1; }
	sacar_cinturon(playerid, id - 1);
	return 1;
}
CMD:sct(playerid, params[]) return cmd_sacarct(playerid, params);

sacar_cinturon(playerid, id)
{
	new query[512];
	ActualizarManos(playerid);
	new Bol = InfoPersonaje[playerid][pCinturon][id], Cant = InfoPersonaje[playerid][pCinturonCant][id], string[128];
	if (Bol == 0) return 1;
	if (InfoPersonaje[playerid][pManoDerecha] == 0)
	{
		if (InfoInventario[Bol][IDArma] > 0)
		{
			new arma = InfoInventario[Bol][IDArma], municion = Cant;
			if (municion > 0) { GivePlayerWeapon(playerid, arma, municion); }
		}
		InfoPersonaje[playerid][pManoDerecha] = Bol;
		InfoPersonaje[playerid][pManoDerechaCant] = Cant;
		PonerObjeto(playerid, 1, Bol);
		InfoPersonaje[playerid][pCinturon][id] = 0;
		InfoPersonaje[playerid][pCinturonCant][id] = 0;
		format(string, sizeof string, "desenfunda su %s reglamentaria", InfoInventario[Bol][NombreObjeto]);
		ameuwu(playerid, string);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Cinturon_%d = '%d', Cantidad_cinturon_%d = '%d', Mano_derecha = '%d', Cantidad_mano_derecha = '%d' WHERE ID = '%d'",
		id+1, InfoPersonaje[playerid][pCinturon][id], id+1, InfoPersonaje[playerid][pCinturonCant][id], InfoPersonaje[playerid][pManoDerecha], InfoPersonaje[playerid][pManoDerechaCant], InfoPersonaje[playerid][pID]);
		mysql_tquery(DBInsanity, query);
		return 1;
	}
	else if (InfoPersonaje[playerid][pManoIzquierda] == 0)
	{
		InfoPersonaje[playerid][pManoIzquierda] = Bol;
		InfoPersonaje[playerid][pManoIzquierdaCant] = Cant;
		PonerObjeto(playerid, 2, Bol);
		InfoPersonaje[playerid][pCinturon][id] = 0;
		InfoPersonaje[playerid][pCinturonCant][id] = 0;
		format(string, sizeof string, "desenfunda su %s reglamentaria", InfoInventario[Bol][NombreObjeto]);
		ameuwu(playerid, string);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Cinturon_%d = '%d', Cantidad_cinturon_%d = '%d', Mano_izquierda = '%d', Cantidad_mano_izquierda = '%d' WHERE ID = '%d'",
		id+1, InfoPersonaje[playerid][pCinturon][id], id+1, InfoPersonaje[playerid][pCinturonCant][id], InfoPersonaje[playerid][pManoIzquierda], InfoPersonaje[playerid][pManoIzquierdaCant], InfoPersonaje[playerid][pID]);
		mysql_tquery(DBInsanity, query);
	} else return SendClientMessage(playerid, COLOR_GREY, "Posees ambas manos ocupadas, guarda o arroja lo que llevas.");
	return 1;
}

guardar_cinturon(playerid, mano)
{
	new query[512];
	if (GetPVarInt(playerid, "EstaCrack") == 1) return SendClientMessage(playerid, COLOR_GREY, "No puedes usar este comando mientras estás herido.");
	ActualizarManos(playerid);
	if(mano == 1)
	{
		if(InfoPersonaje[playerid][pManoDerecha] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes un objeto en tu mano derecha.");
		new Mano = InfoPersonaje[playerid][pManoDerecha], Cant = InfoPersonaje[playerid][pManoDerechaCant], string[128], BolsilloLibre;
		if(InfoInventario[Mano][Guardable] == 2 || InfoInventario[Mano][Guardable] == 3) return SendClientMessage(playerid, COLOR_GREY, "Este objeto es demasiado grande.");
		Loop(x, 6, 0) if(InfoPersonaje[playerid][pCinturon][x] == 0)
		{
			InfoPersonaje[playerid][pCinturon][x] = Mano;
			InfoPersonaje[playerid][pCinturonCant][x] = Cant;
			RemovePlayerAttachedObject(playerid, 7);
			ResetPlayerWeapons(playerid);
			InfoPersonaje[playerid][pManoDerecha] = 0;
			InfoPersonaje[playerid][pManoDerechaCant] = 0;
			format(string, sizeof string, "enfunda su %s reglamentaria", InfoInventario[Mano][NombreObjeto]);
			ameuwu(playerid, string);
			BolsilloLibre = 1;
			mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Cinturon_%d = '%d', Cantidad_cinturon_%d = '%d', Mano_derecha = '%d', Cantidad_mano_derecha = '%d' WHERE ID = '%d'",
			x+1, InfoPersonaje[playerid][pCinturon][x], x+1, InfoPersonaje[playerid][pCinturonCant][x], InfoPersonaje[playerid][pManoDerecha], InfoPersonaje[playerid][pManoDerechaCant], InfoPersonaje[playerid][pID]);
			mysql_tquery(DBInsanity, query);
			return 1;
		}
		if (BolsilloLibre == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes más huecos en tu cinturón.");
	}
	else if (mano == 2)
	{
		if (InfoPersonaje[playerid][pManoIzquierda] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes un objeto en tu mano izquierda.");
		new Mano = InfoPersonaje[playerid][pManoIzquierda], Cant = InfoPersonaje[playerid][pManoIzquierdaCant], string[128], BolsilloLibre;
		if (InfoInventario[Mano][Guardable] == 2 || InfoInventario[Mano][Guardable] == 3) return SendClientMessage(playerid, COLOR_GREY, "Este objeto es demasiado grande.");
		Loop(x, 6, 0) if(InfoPersonaje[playerid][pCinturon][x] == 0)
		{
			InfoPersonaje[playerid][pCinturon][x] = Mano;
			InfoPersonaje[playerid][pCinturonCant][x] = Cant;
			RemovePlayerAttachedObject(playerid, 8);
			InfoPersonaje[playerid][pManoIzquierda] = 0;
			InfoPersonaje[playerid][pManoIzquierdaCant] = 0;
			format(string, sizeof string, "enfunda su %s reglamentaria", InfoInventario[Mano][NombreObjeto]);
			ameuwu(playerid, string);
			BolsilloLibre = 1;
			mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Cinturon_%d = '%d', Cantidad_cinturon_%d = '%d', Mano_izquierda = '%d', Cantidad_mano_izquierda = '%d' WHERE ID = '%d'",
			x+1, InfoPersonaje[playerid][pCinturon][x], x+1, InfoPersonaje[playerid][pCinturonCant][x], InfoPersonaje[playerid][pManoIzquierda], InfoPersonaje[playerid][pManoIzquierdaCant], InfoPersonaje[playerid][pID]);
			mysql_tquery(DBInsanity, query);
			return 1;
		}
		if (BolsilloLibre == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes más huecos en tu cinturón.");
	}
	return 1;
}

CMD:recargar(playerid)
{
	//guarda variables
	ActualizarManos(playerid);
	new der = InfoPersonaje[playerid][pManoDerecha], dercant = InfoPersonaje[playerid][pManoDerechaCant], arma = InfoInventario[der][IDArma];
	if (arma > 0) 
	{
		if (dercant != 0) return SendClientMessage(playerid, COLOR_GREY, "El arma no debe tener munición.");
		new cargador;
		switch (der)
		{
			case 19, 20: cargador = 57;
			case 21: cargador = 58;
			case 22..24: cargador = 59;
			case 25: cargador = 60;
			case 26: cargador = 61;
			case 27: cargador = 62;
			case 28: cargador = 63;
			case 29: cargador = 64;
			case 30, 31: cargador = 65;
		}
		new slot = -1;

		new testouwu[60];
		if (InfoPersonaje[playerid][pManoIzquierda] == cargador)
		{
			if (InfoPersonaje[playerid][pManoIzquierda] != 0)
			{
				format(testouwu, sizeof testouwu, "recarga su %s", InfoInventario[der][NombreObjeto]);
				ameuwu(playerid, testouwu);
				InfoPersonaje[playerid][pManoDerechaCant] = InfoPersonaje[playerid][pManoIzquierdaCant];
				InfoPersonaje[playerid][pManoIzquierda] = 0;
				InfoPersonaje[playerid][pManoIzquierdaCant] = 0;

				ResetPlayerWeapons(playerid);
				GivePlayerWeapon(playerid, arma, InfoPersonaje[playerid][pManoDerechaCant]);

				format(testouwu, sizeof testouwu, "Recargas tu {00AE57}%s{EBEBEB} con {00AE57}%d{EBEBEB} balas.", InfoInventario[der][NombreObjeto], InfoPersonaje[playerid][pManoDerechaCant]);
				SendClientMessage(playerid, 0xEBEBEBFF, testouwu);
				return 1;
			}
			return SendClientMessage(playerid, COLOR_GREY, "El cargador de tu mano izquierda está vacio.");
		}

		Loop(x, 10, 0) if (InfoPersonaje[playerid][pBolsillo][x] != 0)
		{
			if (InfoPersonaje[playerid][pBolsillo][x] == cargador)
			{
				slot = x;
				break;
			}
		}

		if (slot != -1)
		{
			if (InfoPersonaje[playerid][pBolsilloCant][slot] != 0)
			{
				format(testouwu, sizeof testouwu, "recarga su %s", InfoInventario[der][NombreObjeto]);
				ameuwu(playerid, testouwu);
				InfoPersonaje[playerid][pManoDerechaCant] = InfoPersonaje[playerid][pBolsilloCant][slot];
				InfoPersonaje[playerid][pBolsillo][slot] = 0;
				InfoPersonaje[playerid][pBolsilloCant][slot] = 0;

				ResetPlayerWeapons(playerid);
				GivePlayerWeapon(playerid, arma, InfoPersonaje[playerid][pManoDerechaCant]);

				format(testouwu, sizeof testouwu, "Recargas tu {00AE57}%s{EBEBEB} con {00AE57}%d{EBEBEB} balas.", InfoInventario[der][NombreObjeto], InfoPersonaje[playerid][pManoDerechaCant]);
				SendClientMessage(playerid, 0xEBEBEBFF, testouwu);
				return 1;
			}
			return SendClientMessageEx(playerid, COLOR_GREY, "El cargador de tu bolsillo %d está vacio.", slot + 1);
		}
		SendClientMessage(playerid, COLOR_GREY, "No tienes un cargador del arma que tienes.");

	}
	return 1;
}
CMD:cargar(playerid) return cmd_recargar(playerid);
CMD:rec(playerid) return cmd_recargar(playerid);

CMD:crearobjeto(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new idobj, cantidad, string[180];
	if (sscanf(params, "ii", idobj, cantidad)) { SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /crearobjeto (ObjetoID) (Cantidad)"); return 1; }
	if (idobj <= 0) return SendClientMessage(playerid, COLOR_GREY, "La ID del objeto no puede ser nula o negativa.");
	if (cantidad <= 0) return SendClientMessage(playerid, COLOR_GREY, "La cantidad no puede ser nula o negativa.");
	if (idobj < 0 || idobj >= sizeof(InfoInventario)) return SendClientMessage(playerid, COLOR_GREY, "ID de objeto erroneo.");
	if (InfoPersonaje[playerid][pManoDerecha] > 0 && InfoPersonaje[playerid][pManoIzquierda] > 0) return SendClientMessage(playerid, COLOR_GREY, "Posees ambas manos ocupadas, guarda o arroja lo que llevas.");

	if (InfoPersonaje[playerid][pManoDerecha] != 0)
	{
		InfoPersonaje[playerid][pManoIzquierda] = idobj;
		InfoPersonaje[playerid][pManoIzquierdaCant] = cantidad;
		PonerObjeto(playerid, 2, idobj);
		format(string, sizeof string, "Administración:{FFFFFF} %s ha creado (ID %d | %s | Cantidad %d) en mano izquierda.", InfoCuenta[playerid][jApodo], idobj, InfoInventario[idobj][NombreObjeto], cantidad);
	}
	else
	{
		InfoPersonaje[playerid][pManoDerecha] = idobj;
		InfoPersonaje[playerid][pManoDerechaCant] = cantidad;
		PonerObjeto(playerid, 1, idobj);
		if (InfoInventario[idobj][IDArma] > 0) { GivePlayerWeapon(playerid, InfoInventario[idobj][IDArma], cantidad); }
		format(string, sizeof string, "Administración:{FFFFFF} %s ha creado (ID %d | %s | Cantidad %d) en mano derecha.", InfoCuenta[playerid][jApodo], idobj, InfoInventario[idobj][NombreObjeto], cantidad);
	}
	ActualizarManos(playerid);
	SendAdminMessage(0xFF6347FF, string);
	format(string, sizeof string, "Registros: %s ha creado (ID %d | %s | Cantidad %d)", InfoCuenta[playerid][jApodo], idobj, InfoInventario[idobj][NombreObjeto], cantidad);
	Log("LOGS/CrearObjeto.log", string);
	return 1;
}

CMD:listaobjeto(playerid) return cmd_listaobjetos(playerid);
CMD:listaobjetos(playerid)
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	new DComandosAdmin[3500], as2[60], i = 0;
	for(new a = 1; a < sizeof(InfoInventario); a++)
	{
		i++;
		format(as2, sizeof(as2), "%d - %s | ", a, InfoInventario[a][NombreObjeto]);
		strcat(DComandosAdmin, as2);
		if(i == 6)
		{
			i = 0;
			strcat(DComandosAdmin, "\n");
		}
	}
	Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "Lista del /crearobjeto", DComandosAdmin, "Continuar", "");
	return 1;
}

CMD:inventario(playerid)
{
	Dialog_Show(playerid, ShowInventario, DIALOG_STYLE_LIST, "¿Qué inventario revisaras?", "Antiguo inventario\nNuevo inventario", "Continuar", "Salir");
	return 1;
}
CMD:inv(playerid) return cmd_inventario(playerid);

Dialog:ShowInventario(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0: //inventario viejo del gm
		{
			new dialogInv[1028], gInv[256];
			if (GetPlayerCash(playerid) != 0)
			{
				format(gInv, sizeof gInv, "{00CC00}$%s{CCCCCC} dólares\n", diner_coma(GetPlayerCash(playerid)));
				strcat(dialogInv, gInv);
			}
			if (InfoPersonaje[playerid][pMascara] != 0)
			{
				alm(gInv, "{CCCCCC}Mascara\n");
				strcat(dialogInv, gInv);
			}
			if (InfoPersonaje[playerid][pPescados] != 0)
			{
				format(gInv, sizeof gInv, "{00AE57}%d{CCCCCC} peces\n", InfoPersonaje[playerid][pPescados]);
				strcat(dialogInv, gInv);
			}
			if (InfoPersonaje[playerid][pGanzuas] != 0)
			{
				format(gInv, sizeof gInv, "{00AE57}%d{CCCCCC} ganzúas\n", InfoPersonaje[playerid][pGanzuas]);
				strcat(dialogInv, gInv);
			}
			if (InfoPersonaje[playerid][pMateriales] != 0)
			{
				format(gInv, sizeof gInv, "{FF2F2F}%d{CCCCCC} materiales\n", InfoPersonaje[playerid][pMateriales]);
				strcat(dialogInv, gInv);
			}
			format(gInv, sizeof gInv, "{CCCCCC}Inventario de {00AE57}%s", NombreJugador(playerid));
			Dialog_Show(playerid, OldInventario, DIALOG_STYLE_MSGBOX, gInv, dialogInv, "Cerrar", "");
		}
		case 1: //inventario nuevo by edinsonwalker
		{
			cmd_bol(playerid);
		}
	}
	return 1;
}

CMD:bol(playerid)
{
	ActualizarManos(playerid);
	new dialog[1024], dialog2[256], count = 0;
	//indice
	strcat(dialog, "Objeto\tDetalles\n");
	Loop(x, 10, 0)
	{
		if (InfoPersonaje[playerid][pBolsillo][x] != 0) format(dialog2, sizeof dialog2, "{FFFFFF}%s\n", slot_inv(InfoPersonaje[playerid][pBolsillo][x], InfoPersonaje[playerid][pBolsilloCant][x])), count++;
		else alm(dialog2, "{CCCCCC}—\n");
		strcat(dialog, dialog2);
	}
	//barra espacio
	strcat(dialog, "{8000FF}--------------------\n");
	//mano derecha
	if (InfoPersonaje[playerid][pManoDerecha] != 0) format(dialog2, sizeof dialog2, "{FFFFFF}Mano derecha: %s\n", slot_inv(InfoPersonaje[playerid][pManoDerecha], InfoPersonaje[playerid][pManoDerechaCant])), count++;
	else alm(dialog2, "{CCCCCC}Mano derecha vacía\n");
	strcat(dialog, dialog2);
	//mano izquierda
	if (InfoPersonaje[playerid][pManoIzquierda] != 0) format(dialog2, sizeof dialog2, "{FFFFFF}Mano izquierda: %s\n", slot_inv(InfoPersonaje[playerid][pManoIzquierda], InfoPersonaje[playerid][pManoIzquierdaCant])), count++;
	else alm(dialog2, "{CCCCCC}Mano izquierda vacía\n");
	strcat(dialog, dialog2);
	//espalda
	if (InfoPersonaje[playerid][pEspalda] != 0)
	{
		format(dialog2, sizeof dialog2, "{00AE57}%s:{FFFFFF} %s\n", GetParteToy(playerid, 7), slot_inv(InfoPersonaje[playerid][pEspalda], InfoPersonaje[playerid][pEspaldaCant])), count++;
		strcat(dialog, dialog2);
	}
	//formato
	format(dialog2, sizeof dialog2, "{CCCCCC}Bolsillos de {00AE57}%s", NombreJugador(playerid));
	//show_dialog
	if (count == 0) return Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, dialog2, "{CCCCCC}No tienes nada que sacar o guardar.", "Cerrar", "");
	Dialog_Show(playerid, OpcionInventario, DIALOG_STYLE_TABLIST_HEADERS, dialog2, dialog, "Continuar", "Salir");
	return 1;
}
CMD:bolsillos(playerid) return cmd_bol(playerid);

Dialog:OpcionInventario(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0..9: sacar_inventario(playerid, listitem);
		case 10: return cmd_bol(playerid);
		case 11: guardar_inventario(playerid, 1);
		case 12: guardar_inventario(playerid, 2);
		case 13: cmd_qespalda(playerid);
	}
	return 1;
}

CMD:mano(playerid) return cmd_cmano(playerid);
CMD:cmano(playerid)
{
	ActualizarManos(playerid);
	if (InfoPersonaje[playerid][pManoDerecha] == 0 && InfoPersonaje[playerid][pManoIzquierda] == 0) { SendClientMessage(playerid, COLOR_GREY, "No tienes nada en ninguna mano."); return 1; }
	new ManoDer = InfoPersonaje[playerid][pManoDerecha], ManoDerCant = InfoPersonaje[playerid][pManoDerechaCant];
	new ManoIzq = InfoPersonaje[playerid][pManoIzquierda], ManoIzqCant = InfoPersonaje[playerid][pManoIzquierdaCant];
	if (ManoDer == 0)
	{
		RemovePlayerAttachedObject(playerid, 8);
		PonerObjeto(playerid, 1, ManoIzq);
		SendClientMessage(playerid, 0xF8D48CFF, "Intercambiaste los objetos de tus manos.");
		if(InfoInventario[ManoIzq][IDArma] > 0) {
			GivePlayerWeapon(playerid, InfoInventario[ManoIzq][IDArma], ManoIzqCant);
		}
	}
	else if (ManoIzq == 0)
	{
		PonerObjeto(playerid, 2, ManoDer);
		ResetPlayerWeapons(playerid);
		RemovePlayerAttachedObject(playerid, 7);
		SendClientMessage(playerid, 0xF8D48CFF, "Intercambiaste los objetos de tus manos.");
	}
	else
	{
		ResetPlayerWeapons(playerid);
		PonerObjeto(playerid, 1, ManoIzq);
		PonerObjeto(playerid, 2, ManoDer);
		SendClientMessage(playerid, 0xF8D48CFF, "Intercambiaste los objetos de tus manos.");
		if(InfoInventario[ManoIzq][IDArma] > 0) { GivePlayerWeapon(playerid, InfoInventario[ManoIzq][IDArma], ManoIzqCant); }
	}
	InfoPersonaje[playerid][pManoDerechaCant] = ManoIzqCant, InfoPersonaje[playerid][pManoDerecha] = ManoIzq;
	InfoPersonaje[playerid][pManoIzquierdaCant] = ManoDerCant, InfoPersonaje[playerid][pManoIzquierda] = ManoDer;
	new query[500];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Mano_derecha = '%d', Cantidad_mano_derecha = '%d', Mano_izquierda = '%d', Cantidad_mano_izquierda = '%d' WHERE ID = '%d'",
	InfoPersonaje[playerid][pManoDerecha], InfoPersonaje[playerid][pManoDerechaCant], InfoPersonaje[playerid][pManoIzquierda], InfoPersonaje[playerid][pManoIzquierdaCant], InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, query);
	return 1;
}

CMD:guardar(playerid)
{
	if (InfoPersonaje[playerid][pManoDerecha] == 0) guardar_inventario(playerid, 2);
	else guardar_inventario(playerid, 1);
	return 1;
}

CMD:sacar(playerid, params[])
{
	new id;
	if (sscanf(params, "i", id))
	{
	    new count = 0, dialog[256];
		Loop(x, 10, 0) if (InfoPersonaje[playerid][pBolsillo][x] != 0) count++;
		if (count == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes nada en tus bolsillos.");

		Loop(x, 10, 0) if (InfoPersonaje[playerid][pBolsillo][x] != 0)
		{
			format(dialog, sizeof(dialog), "Tienes en {00AE57}slot %d{EBEBEB}: %s", x+1, slot_objeto(InfoPersonaje[playerid][pBolsillo][x], InfoPersonaje[playerid][pBolsilloCant][x]));
			SendClientMessage(playerid, 0xEBEBEBFF, dialog);
		}
		return 1;
	}
	if (id < 1 || id > 10) { SendClientMessage(playerid, COLOR_GREY, "El número de slot debe estar entre 1 y 10."); return 1; }
	sacar_inventario(playerid, id - 1);
	return 1;
}

sacar_inventario(playerid, id)
{
	new query[1000];
	ActualizarManos(playerid);
	new Bol = InfoPersonaje[playerid][pBolsillo][id], Cant = InfoPersonaje[playerid][pBolsilloCant][id], string[128];
	if(Bol == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes nada en ese slot.");
	if(InfoPersonaje[playerid][pManoIzquierda] == 0)
	{
	    if(InfoPersonaje[playerid][pManoDerecha] == 0)
		{
			if(InfoInventario[Bol][IDArma] > 0)
			{
				new arma = InfoInventario[Bol][IDArma], municion = Cant;
				if(municion > 0) { GivePlayerWeapon(playerid, arma, municion); }
				format(string, sizeof string, "desenfunda su %s", InfoInventario[Bol][NombreObjeto]);
				ameuwu(playerid, string);
			}
			InfoPersonaje[playerid][pManoDerecha] = Bol;
			InfoPersonaje[playerid][pManoDerechaCant] = Cant;
			PonerObjeto(playerid, 1, Bol);
			InfoPersonaje[playerid][pBolsillo][id] = 0;
			InfoPersonaje[playerid][pBolsilloCant][id] = 0;
			format(string, sizeof string, "Sacas tu %s en mano derecha.", InfoInventario[Bol][NombreObjeto]);
			SendClientMessage(playerid, 0xA7CE00FF, string);
			mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Bolsillo_%d = '%d', Cantidad_bolsillo_%d = '%d', Mano_derecha = '%d', Cantidad_mano_derecha = '%d' WHERE ID = '%d'", id+1, InfoPersonaje[playerid][pBolsillo][id], id+1, InfoPersonaje[playerid][pBolsilloCant][id], InfoPersonaje[playerid][pManoDerecha], InfoPersonaje[playerid][pManoDerechaCant], InfoPersonaje[playerid][pID]);
			mysql_tquery(DBInsanity, query);
			return 1;
		}
		else
		{
		    new x_bol = InfoPersonaje[playerid][pManoDerecha], x_cant = InfoPersonaje[playerid][pManoDerechaCant];
		    if(InfoInventario[x_bol][IDArma] > 0) //- Si es arma
			{
				if(IntentoChitearBalas(playerid)) return 1;
				x_cant = InfoPersonaje[playerid][pManoDerechaCant];
				RemovePlayerWeapon(playerid, InfoInventario[x_bol][IDArma]);
				format(string, sizeof string, "desenfunda su %s", InfoInventario[Bol][NombreObjeto]);
				ameuwu(playerid, string);
			}
			InfoPersonaje[playerid][pManoIzquierda] = x_bol;
			InfoPersonaje[playerid][pManoIzquierdaCant] = x_cant;
			PonerObjeto(playerid, 2, x_bol);
			if(InfoInventario[Bol][IDArma] > 0)
			{
				new arma = InfoInventario[Bol][IDArma], municion = Cant;
				if(municion > 0) { GivePlayerWeapon(playerid, arma, municion); }
			}
			InfoPersonaje[playerid][pManoDerecha] = Bol;
			InfoPersonaje[playerid][pManoDerechaCant] = Cant;
			PonerObjeto(playerid, 1, Bol);
			InfoPersonaje[playerid][pBolsillo][id] = 0;
			InfoPersonaje[playerid][pBolsilloCant][id] = 0;
			format(string, sizeof string, "Sacas tu %s en mano derecha, moviste a tu mano izquierda tu %s.", InfoInventario[Bol][NombreObjeto], InfoInventario[x_bol][NombreObjeto]);
			SendClientMessage(playerid, 0xA7CE00FF, string);
			mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Bolsillo_%d = '%d', Cantidad_bolsillo_%d = '%d', Mano_derecha = '%d', Cantidad_mano_derecha = '%d', Mano_izquierda = '%d', Cantidad_mano_izquierda = '%d' WHERE ID = '%d'",
			id+1, InfoPersonaje[playerid][pBolsillo][id], id+1, InfoPersonaje[playerid][pBolsilloCant][id], InfoPersonaje[playerid][pManoDerecha], InfoPersonaje[playerid][pManoDerechaCant], InfoPersonaje[playerid][pManoIzquierda], InfoPersonaje[playerid][pManoIzquierdaCant], InfoPersonaje[playerid][pID]);
			mysql_tquery(DBInsanity, query);
			return 1;
		}
	}
	else if(InfoPersonaje[playerid][pManoDerecha] == 0)
	{
		if(InfoInventario[Bol][IDArma] > 0)
		{
			new arma = InfoInventario[Bol][IDArma], municion = Cant;
			if(municion > 0) { GivePlayerWeapon(playerid, arma, municion); }
			format(string, sizeof string, "desenfunda su %s", InfoInventario[Bol][NombreObjeto]);
			ameuwu(playerid, string);
		}
		InfoPersonaje[playerid][pManoDerecha] = Bol;
		InfoPersonaje[playerid][pManoDerechaCant] = Cant;
		PonerObjeto(playerid, 1, Bol);
		InfoPersonaje[playerid][pBolsillo][id] = 0;
		InfoPersonaje[playerid][pBolsilloCant][id] = 0;
		format(string, sizeof string, "Sacas tu %s en mano derecha.", InfoInventario[Bol][NombreObjeto]);
		SendClientMessage(playerid, 0xA7CE00FF, string);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Bolsillo_%d = '%d', Cantidad_bolsillo_%d = '%d', Mano_derecha = '%d', Cantidad_mano_derecha = '%d' WHERE ID = '%d'", id+1, InfoPersonaje[playerid][pBolsillo][id], id+1, InfoPersonaje[playerid][pBolsilloCant][id], InfoPersonaje[playerid][pManoDerecha], InfoPersonaje[playerid][pManoDerechaCant], InfoPersonaje[playerid][pID]);
		mysql_tquery(DBInsanity, query);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Posees ambas manos ocupadas, guarda o arroja lo que llevas.");
	return 1;
}

guardar_inventario(playerid, mano)
{
	new query[512];
	if (GetPVarInt(playerid, "EstaCrack") == 1) return SendClientMessage(playerid, COLOR_GREY, "No puedes usar este comando mientras estás herido.");
	ActualizarManos(playerid);
	if(mano == 1)
	{
		if(InfoPersonaje[playerid][pManoDerecha] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes un objeto en tu mano derecha.");
		new Mano = InfoPersonaje[playerid][pManoDerecha], Cant = InfoPersonaje[playerid][pManoDerechaCant], string[128], BolsilloLibre;
		if(InfoInventario[Mano][Guardable] == 2 || InfoInventario[Mano][Guardable] == 3) return SendClientMessage(playerid, COLOR_GREY, "Este objeto es demasiado grande.");
		for(new x = 0; x < 10; x++)
		{
			if(InfoPersonaje[playerid][pBolsillo][x] == 0)
			{
				InfoPersonaje[playerid][pBolsillo][x] = Mano;
				InfoPersonaje[playerid][pBolsilloCant][x] = Cant;
				RemovePlayerAttachedObject(playerid, 7);
				ResetPlayerWeapons(playerid);
				InfoPersonaje[playerid][pManoDerecha] = 0;
				InfoPersonaje[playerid][pManoDerechaCant] = 0;
				format(string, sizeof string, "Guardas tu %s.", InfoInventario[Mano][NombreObjeto]);
				SendClientMessage(playerid, 0xA7CE00FF, string);
				BolsilloLibre = 1;
				mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Bolsillo_%d = '%d', Cantidad_bolsillo_%d = '%d', Mano_derecha = '%d', Cantidad_mano_derecha = '%d' WHERE ID = '%d'", x+1, InfoPersonaje[playerid][pBolsillo][x], x+1, InfoPersonaje[playerid][pBolsilloCant][x], InfoPersonaje[playerid][pManoDerecha], InfoPersonaje[playerid][pManoDerechaCant], InfoPersonaje[playerid][pID]);
				mysql_tquery(DBInsanity, query);
				return 1;
			}
		}
		if(BolsilloLibre == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes espacio en tus bolsillos.");
	}
	else if(mano == 2)
	{
		if(InfoPersonaje[playerid][pManoIzquierda] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes un objeto en tu mano izquierda.");
		new Mano = InfoPersonaje[playerid][pManoIzquierda], Cant = InfoPersonaje[playerid][pManoIzquierdaCant], string[128], BolsilloLibre;
		if(InfoInventario[Mano][Guardable] == 2 || InfoInventario[Mano][Guardable] == 3) return SendClientMessage(playerid, COLOR_GREY, "Este objeto es demasiado grande.");
		for(new x = 0; x < 10; x++)
		{
			if(InfoPersonaje[playerid][pBolsillo][x] == 0)
			{
				InfoPersonaje[playerid][pBolsillo][x] = Mano;
				InfoPersonaje[playerid][pBolsilloCant][x] = Cant;
				RemovePlayerAttachedObject(playerid, 8);
				InfoPersonaje[playerid][pManoIzquierda] = 0;
				InfoPersonaje[playerid][pManoIzquierdaCant] = 0;
				format(string, sizeof string, "Guardas tu %s.", InfoInventario[Mano][NombreObjeto]);
				SendClientMessage(playerid, 0xA7CE00FF, string);
				BolsilloLibre = 1;
				mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Bolsillo_%d = '%d', Cantidad_bolsillo_%d = '%d', Mano_izquierda = '%d', Cantidad_mano_izquierda = '%d' WHERE ID = '%d'", x+1, InfoPersonaje[playerid][pBolsillo][x], x+1, InfoPersonaje[playerid][pBolsilloCant][x], InfoPersonaje[playerid][pManoIzquierda], InfoPersonaje[playerid][pManoIzquierdaCant], InfoPersonaje[playerid][pID]);
				mysql_tquery(DBInsanity, query);
				return 1;
			}
		}
		if(BolsilloLibre == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes espacio en tus bolsillos.");
	}
	return 1;
}

CMD:tirar(playerid)
{
	new query[256];
	ActualizarManos(playerid);
	if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessage(playerid, COLOR_GREY, "No puedes usar este comando en esta situación.");
	if (InfoPersonaje[playerid][pManoDerecha] != 0)
	{
		new ManoDer = InfoPersonaje[playerid][pManoDerecha], ManoDerCant = InfoPersonaje[playerid][pManoDerechaCant];
		format(query, sizeof query, "tira su %s", InfoInventario[ManoDer][NombreObjeto]);
		ameuwu(playerid, query);
		ResetPlayerWeapons(playerid);
		InfoPersonaje[playerid][pManoDerecha] = 0;
		InfoPersonaje[playerid][pManoDerechaCant] = 0;
		RemovePlayerAttachedObject(playerid, 7);
		new Float: X, Float: Y, Float: Z;
		GetPlayerPos(playerid, X, Y, Z);
		new World = GetPlayerVirtualWorld(playerid);
		new Interior = GetPlayerInterior(playerid);
		tirar_objeto(ManoDer, ManoDerCant, X, Y, Z, World, Interior, 0);
		Streamer_Update(playerid);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Mano_derecha = 0, Cantidad_mano_derecha = 0 WHERE ID = '%d'", InfoPersonaje[playerid][pID]);
		mysql_tquery(DBInsanity, query);
		return 1;
	}
	if (InfoPersonaje[playerid][pManoIzquierda] != 0)
	{
		new ManoDer = InfoPersonaje[playerid][pManoIzquierda], ManoDerCant = InfoPersonaje[playerid][pManoIzquierdaCant];
		format(query, sizeof query, "tira su %s", InfoInventario[ManoDer][NombreObjeto]);
		ameuwu(playerid, query);
		ResetPlayerWeapons(playerid);
		InfoPersonaje[playerid][pManoIzquierda] = 0;
		InfoPersonaje[playerid][pManoIzquierdaCant] = 0;
		RemovePlayerAttachedObject(playerid, 8);
		new Float: X, Float: Y, Float: Z;
		GetPlayerPos(playerid, X, Y, Z);
		new World = GetPlayerVirtualWorld(playerid);
		new Interior = GetPlayerInterior(playerid);
		tirar_objeto(ManoDer, ManoDerCant, X, Y, Z, World, Interior, 0);
		Streamer_Update(playerid);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Mano_izquierda = 0, Cantidad_mano_izquierda = 0 WHERE ID = '%d'", InfoPersonaje[playerid][pID]);
		mysql_tquery(DBInsanity, query);
		return 1;
	}
	SendClientMessage(playerid, 0xccccccff, "No posees ningún objeto en tus manos.");
	return 1;
}

CMD:recogerobjeto(playerid, params[]) return cmd_recoger(playerid, params);
CMD:recoger(playerid, params[])
{
	if (InfoPersonaje[playerid][pManoDerecha] > 0 && InfoPersonaje[playerid][pManoIzquierda] > 0) { SendClientMessage(playerid, COLOR_GREY, "No puedes recoger nada si tienes ambas manos ocupadas."); return 1; }
	if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) { SendClientMessage(playerid, COLOR_GREY, "No puedes usar este comando en esta situación."); return 1; }
	if (GetPVarInt(playerid, "EstaCrack") == 1) return SendClientMessage(playerid, COLOR_GREY, "No puedes usar este comando mientras estás herido.");
	if (isnull(params)) recoger_objeto(playerid, -1);
	else
	{
		new id;
		if (sscanf(params, "d", id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /recogerobjeto (ObjetoID)");
		if (id < 0 || id >= MAX_OBJETOS_S) return SendClientMessage(playerid, COLOR_GREY, "* Objeto incorrecto, selecciona entre 0-300.");
    	recoger_objeto(playerid, id);
	}
    return 1;
}

recoger_objeto(playerid, id)
{
	new ObjetoExiste = 0;
	if (id == -1)
	{
		Loop(x, sizeof InfoSuelo, 0) if (IsPlayerInRangeOfPoint(playerid, 2.0, InfoSuelo[x][DropPosX], InfoSuelo[x][DropPosY], InfoSuelo[x][DropPosZ]))
		{
			if (GetPlayerVirtualWorld(playerid) == InfoSuelo[x][DropVWorld] && GetPlayerInterior(playerid) == InfoSuelo[x][DropInterior])
			{
				if (InfoSuelo[x][DropID] != 0)
				{
					id = x;
					ObjetoExiste = 1;
				}
				break;
			}
		}
	}
	else
	{
		if (IsPlayerInRangeOfPoint(playerid, 2.0, InfoSuelo[id][DropPosX], InfoSuelo[id][DropPosY], InfoSuelo[id][DropPosZ]))
		{
			if (GetPlayerVirtualWorld(playerid) == InfoSuelo[id][DropVWorld] && GetPlayerInterior(playerid) == InfoSuelo[id][DropInterior])
			{
				if (InfoSuelo[id][DropID] != 0)
				{
					ObjetoExiste = 1;
				}
			}
		}
	}
	if (ObjetoExiste == 0) return SendClientMessage(playerid, COLOR_GREY, "No estás cerca de ningún objeto o del objeto seleccionado.");
	new string[256], objeto = InfoSuelo[id][DropID];
	new weaponid = InfoInventario[objeto][IDArma];
	if (InfoPersonaje[playerid][pHorasOn] < 3)
	{
		if (weaponid >= 22 && weaponid <= 34)
		{
			SendClientMessage(playerid, COLOR_GREY, "Necesitas tener mínimo 3 horas de juego para tomar este tipo de arma.");
			return 1;
		}
	}
	if (IsValidDynamicObject(ObjetoCaido[id])) DestroyDynamicObject(ObjetoCaido[id]);
	DestroyDynamic3DTextLabel(InfoSuelo[id][DropLabel]);
	InfoSuelo[id][DropLabel] = CreateDynamic3DTextLabel("dropid", -1, -1178.1569, 58.9069, 1.9609, 1.0, .worldid = 1+777, .interiorid = id);
	if (InfoPersonaje[playerid][pManoDerecha] == 0)
	{
		InfoPersonaje[playerid][pManoDerecha] = objeto, InfoPersonaje[playerid][pManoDerechaCant] = InfoSuelo[id][DropCantidad];
		if (InfoInventario[objeto][IDArma] > 0 && InfoSuelo[id][DropCantidad] > 0) { GivePlayerWeapon(playerid, InfoInventario[objeto][IDArma], InfoSuelo[id][DropCantidad]); }
		PonerObjeto(playerid, 1, objeto);
		mysql_format(DBInsanity, string, sizeof string, "UPDATE personajes SET Mano_derecha = '%d', Cantidad_mano_derecha = '%d' WHERE ID = '%d'", InfoPersonaje[playerid][pManoDerecha], InfoPersonaje[playerid][pManoDerechaCant], InfoPersonaje[playerid][pID]);
		mysql_tquery(DBInsanity, string);
	}
	else if (InfoPersonaje[playerid][pManoIzquierda] == 0)
	{
		InfoPersonaje[playerid][pManoIzquierda] = objeto, InfoPersonaje[playerid][pManoIzquierdaCant] = InfoSuelo[id][DropCantidad];
		PonerObjeto(playerid, 2, objeto);
		mysql_format(DBInsanity, string, sizeof string, "UPDATE personajes SET Mano_izquierda = '%d', Cantidad_mano_izquierda = '%d' WHERE ID = '%d'", InfoPersonaje[playerid][pManoIzquierda], InfoPersonaje[playerid][pManoIzquierdaCant], InfoPersonaje[playerid][pID]);
		mysql_tquery(DBInsanity, string);
	}
	format(string, sizeof string, "Recogiste del suelo %s{EBEBEB}.", slot_objeto(objeto, InfoSuelo[id][DropCantidad]));
	SendClientMessage(playerid, 0xEBEBEBFF, string);
	InfoSuelo[id][DropPosX] = 0.0;
	InfoSuelo[id][DropPosY] = 0.0;
	InfoSuelo[id][DropPosZ] = 0.0;
	InfoSuelo[id][DropID] = 0;
	InfoSuelo[id][DropCantidad] = 0;
	KillTimer(ObjTimer[id]);
	Streamer_Update(playerid);
	return 1;
}

CMD:dararma(playerid, params[]) return cmd_ceder(playerid, params);
CMD:ceder(playerid, params[])
{
	if (InfoPersonaje[playerid][pManoDerecha] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes nada en tu mano derecha.");
	new playerid2, string[256];
	if (!CheckTimer(5, CederTiempo[playerid]))
	{
		if (sscanf(params, "u", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /ceder (PlayerID)");
		if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "El jugador seleccionado no se encuentra conectado.");
		if (!CercaDelWeon(8.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Estás lejos del jugador.");
		new weaponid = InfoInventario[InfoPersonaje[playerid][pManoDerecha]][IDArma];
		if (InfoPersonaje[playerid2][pHorasOn] < 3)
		{
			if (weaponid >= 22 && weaponid <= 34)
			{
				SendClientMessage(playerid, COLOR_GREY, "Ese jugador necesita tener al menos 3 horas de juego para recibir este tipo de arma.");
				return 1;
			}
		}
		if (InfoPersonaje[playerid2][pManoIzquierda] > 0 && InfoPersonaje[playerid2][pManoDerecha] > 0) { SendClientMessage(playerid, COLOR_GREY, "Este jugador tiene ambas manos ocupadas."); return 1; }
		new ManoDer = InfoPersonaje[playerid][pManoDerecha], ManoDerCant = InfoPersonaje[playerid][pManoDerechaCant];
		if (InfoPersonaje[playerid2][pManoDerecha] == 0)
		{
			if (InfoInventario[ManoDer][IDArma] > 0) { GivePlayerWeapon(playerid2, InfoInventario[ManoDer][IDArma], ManoDerCant); }
			InfoPersonaje[playerid2][pManoDerecha] = ManoDer, InfoPersonaje[playerid2][pManoDerechaCant] = ManoDerCant, PonerObjeto(playerid2, 1, ManoDer), ActualizarManos(playerid2);
		}
		else if (InfoPersonaje[playerid2][pManoIzquierda] == 0)
		{
			InfoPersonaje[playerid2][pManoIzquierda] = ManoDer, InfoPersonaje[playerid2][pManoIzquierdaCant] = ManoDerCant, PonerObjeto(playerid2, 2, ManoDer), ActualizarManos(playerid2);
		}
		InfoPersonaje[playerid][pManoDerecha] = 0;
		InfoPersonaje[playerid][pManoDerechaCant] = 0;
		ResetPlayerWeapons(playerid);
		CederTiempo[playerid] = gettime();
		format(string, sizeof string, "%s te entrega su %s.", NombreJugador(playerid), InfoInventario[ManoDer][NombreObjeto]);
		SendClientMessage(playerid, 0xf0ff00FF, string);
		format(string, sizeof string, "Entregas tu %s a %s.", InfoInventario[ManoDer][NombreObjeto], NombreJugador(playerid2));
		SendClientMessage(playerid, 0xf0ff00FF, string);
		ActualizarManos(playerid);
		ActualizarManos(playerid2);
	}
	else
	{
		format(string, sizeof string, "Faltan %d segundos para que puedas usar este comando.", CheckTimer(5, CederTiempo[playerid]));
		SendClientMessage(playerid, 0xb0b0b0ff, string);
	}
	return 1;
}

CMD:payday(playerid)
{
	new string[266];
	if (PaydayOn == 0)
	{
		format(string, sizeof string, "Faltan {00AE57}%d{FFFFFF} minutos para el próximo {00AE57}PayDay{FFFFFF}.", PayDayLeft);
		SendClientMessage(playerid, 0xFFFFFFFF, string);
	}
	else
	{
		format(string, sizeof string, "Faltan {00AE57}%d{FFFFFF} minutos para el próximo {00AE57}PayDay{FFFFFF}.", PayDayLeft);
		SendClientMessage(playerid, 0xFFFFFFFF, string);
	}
	return 1;
}

CMD:setpayday(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	new pd_minutes, string[160];
	if (sscanf(params, "d", pd_minutes)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /setpayday (Minutos)");
	PayDayLeft = pd_minutes;
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) estableció %d minutos el PayDay.", InfoCuenta[playerid][jApodo], playerid, PayDayLeft);
	SendAdminMessage(0xFF6347FF, string);
	return 1;
}

CMD:dropa(playerid)
{
	if (InfoPersonaje[playerid][pJobSkin] == 0) return SendClientMessage(playerid, -1, "No tienes puesto ninguna ropa de trabajo.");
	GivePlayerSkin(playerid, InfoPersonaje[playerid][pJobSkin]);
	InfoPersonaje[playerid][pJobSkin] = 0;
	guardar_int_mysql("personajes", "JobSkin", InfoPersonaje[playerid][pID], 0);
	return 1;
}

CMD:rellenarauto(playerid)
{
	new idcar = GetPlayerVehicleID(playerid), string[128];
	if (autorepara[playerid] == 1)
	{
		if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		{
			format(string, sizeof string, "* %s llena el tanque de su vehículo.", NombreJugador(playerid));
			ProxDetector(30.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
			veh_gasolina[idcar] = 30;
			autorepara[playerid] = 0;
		}
	}
	return 1;
}

CMD:quitardni(playerid, params[])
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (sscanf(params, "u", params[0])) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /quitardni (PlayerID)");
	if (!IsPlayerConnected(params[0])) return SendClientMessage(playerid, COLOR_GREY, "Jugador no conectado.");
	if (InfoPersonaje[params[0]][pFalsoDocumento] == 0) return SendClientMessage(playerid, COLOR_GREY, "Esa persona no tiene un DNI Falso.");
	new query[128];
	InfoPersonaje[params[0]][pFalsoDocumento] = 0;
	alm(InfoPersonaje[params[0]][pFalsoNombre], "none");
	format(query, sizeof query, "* Le has quitado el DNI Falso a {5ABAFF}%s{FFFFFF}.", NombreJugador(params[0]));
	SendClientMessage(playerid, COLOR_WHITE, query);
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET FalsoDocumento = 0, FalsoNombre = '%e' WHERE ID = '%d'", InfoPersonaje[params[0]][pFalsoNombre], InfoPersonaje[params[0]][pID]);
	mysql_tquery(DBInsanity, query);
	return 1;
}
//comandos de negocios:
CMD:irnegocio(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new id, gformat[170];
	if (sscanf(params, "d", id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /irnegocio (NegocioID)");
	if (id < 1 || id >= totalnegocios) return SendClientMessage(playerid, -1, "ID de negocio inválida.");
	if (InfoNegocio[id][nTipo] == 0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
	SetPosEx(playerid, InfoNegocio[id][nExteriorX], InfoNegocio[id][nExteriorY], InfoNegocio[id][nExteriorZ], InfoNegocio[id][nExteriorR], InfoNegocio[id][nExteriorInt], InfoNegocio[id][nExteriorVW], 1);
	format(gformat, sizeof gformat, "Te has movido al negocio {00AE57}%s{FFFFFF} ID %d.", InfoNegocio[id][nNombre], id);
	SendClientMessage(playerid, COLOR_WHITE, gformat);
	return 1;
}

CMD:avenegocio(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	new id, gformat[240];
	if (sscanf(params, "d", id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /avenegocio (NegocioID)");
	if (id < 1 || id >= totalnegocios) return SendClientMessage(playerid, -1, "ID de negocio inválida.");
	if (InfoNegocio[id][nTipo] == 0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
	if (InfoNegocio[id][nVenta] == 0) return SendClientMessage(playerid, -1, "Ese negocio ya está en venta.");

	foreach(Player, p)
	{
		if (InfoPersonaje[p][pNegocio1] == id)
		{
			format(gformat, sizeof gformat, "Admin %s vendió tu negocio (1) id: %d", NombreOriginal(playerid), id);
			SendClientMessage(playerid, COLOR_ORANGE, gformat);
			InfoPersonaje[p][pNegocio1] = -1;
		}
		if (InfoPersonaje[p][pNegocio2] == id)
		{
			format(gformat, sizeof gformat, "Admin %s vendió tu negocio (2) id: %d", NombreOriginal(playerid), id);
			SendClientMessage(playerid, COLOR_ORANGE, gformat);
			InfoPersonaje[p][pNegocio2] = -1;
		}
	}
	LimpiarEmpleados(id);
	//limpiar negocio
	if (VerificarPersonaje(InfoNegocio[id][nPropietario]))
	{
		new neg1, neg2;
		reg_int(0, "Negocio", neg1);
		reg_int(0, "Negocio2", neg2);
		if (neg1 == id)
		{
			mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE personajes SET Negocio = -1 WHERE Nombre_Apellido = '%e'", InfoNegocio[id][nPropietario]);
			mysql_tquery(DBInsanity, gformat);
		}
		if (neg2 == id)
		{
			mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE personajes SET Negocio2 = -1 WHERE Nombre_Apellido = '%e'", InfoNegocio[id][nPropietario]);
			mysql_tquery(DBInsanity, gformat);
		}
	}

	format(gformat, sizeof gformat, "Admin %s vendió el negocio %d (propietario %s).", InfoCuenta[playerid][jApodo], id, InfoNegocio[id][nPropietario]);
	Log("LOGS/negocios.log", gformat);

	alm(InfoNegocio[id][nPropietario], "gobielno");
	InfoNegocio[id][nSeguro] = 0;
	InfoNegocio[id][nVenta] = 0;
	InfoNegocio[id][nEmpleo] = 0;
	LabelPickup_negocio(id, 1, 0, 0, 0);

	format(gformat, sizeof gformat, "Vendiste el negocio %d (%s), las ganancias se conservan.", id, InfoNegocio[id][nNombre]);
	SendClientMessage(playerid, COLOR_GREY, gformat);

	mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE negocios SET Propietario = '%e', Empleo = 0, Seguro = 0, Venta = 0 WHERE ID = '%d'", InfoNegocio[id][nPropietario], InfoNegocio[id][nID_sql]);
	mysql_tquery(DBInsanity, gformat);
	return 1;
}

CMD:editarnegocio(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	new string[860], id, valor;
	if (sscanf(params, "s[32]", params))
	{
		SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarnegocio (Opción) (NegocioID) (Monto)");
		SendClientMessage(playerid, COLOR_GREY, "Opciones: exterior, interior, nivel, ganancias, precio, productos");
		SendClientMessage(playerid, COLOR_GREY, "Opciones: comprar, mapicon, skinactor, posactor, posvehiculo, vehfabrica");
		return 1;
	}
	if (!strcmp(params, "exterior", true, 8))
	{
		if (sscanf(params, "s[32]i", params, id)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarnegocio exterior (NegocioID)");
		if (id < 1 || id >= totalnegocios) return SendClientMessage(playerid, -1, "ID de negocio inválida.");
		if (InfoNegocio[id][nTipo] == 0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		GetPlayerPos(playerid, InfoNegocio[id][nExteriorX], InfoNegocio[id][nExteriorY], InfoNegocio[id][nExteriorZ]);
		GetPlayerFacingAngle(playerid, InfoNegocio[id][nExteriorR]);
		InfoNegocio[id][nExteriorInt] = GetPlayerInterior(playerid);
		InfoNegocio[id][nExteriorVW] = GetPlayerVirtualWorld(playerid);
		mysql_format(DBInsanity, string, sizeof string, "UPDATE negocios SET ExteriorX = '%f', ExteriorY = '%f', ExteriorZ = '%f', ExteriorR = '%f', ExteriorInt = '%d', ExteriorVW = '%d' WHERE ID = '%d'", InfoNegocio[id][nExteriorX], InfoNegocio[id][nExteriorY], InfoNegocio[id][nExteriorZ], InfoNegocio[id][nExteriorR], InfoNegocio[id][nExteriorInt], InfoNegocio[id][nExteriorVW], InfoNegocio[id][nID_sql]);
		mysql_tquery(DBInsanity, string);
		LabelPickup_negocio(id, 1, 1, 0, 0);
		format(string, sizeof string, "Cambiaste el exterior del negocio %d.", id);
		SendClientMessage(playerid, COLOR_WHITE, string);
		if (InfoNegocio[id][nTipo] == 9)
		{
			GetPlayerPos(playerid, InfoNegocio[id][nExteriorVehX], InfoNegocio[id][nExteriorVehY], InfoNegocio[id][nExteriorVehZ]);
			GetPlayerFacingAngle(playerid, InfoNegocio[id][nExteriorVehR]);
			GetPosInFrontOfPlayer(playerid, InfoNegocio[id][nExteriorVehX_V], InfoNegocio[id][nExteriorVehY_V], 2.5);
			mysql_format(DBInsanity, string, sizeof string, "UPDATE negocios SET ExteriorVehX = '%f', ExteriorVehY = '%f', ExteriorVehZ = '%f', ExteriorVehR = '%f', ExteriorVehX_V = '%f', ExteriorVehY_V = '%f' WHERE ID = '%d'", InfoNegocio[id][nExteriorVehX], InfoNegocio[id][nExteriorVehY], InfoNegocio[id][nExteriorVehZ], InfoNegocio[id][nExteriorVehR], InfoNegocio[id][nExteriorVehX_V], InfoNegocio[id][nExteriorVehY_V], InfoNegocio[id][nID_sql]);
			mysql_tquery(DBInsanity, string);
		}
	}
	else if (!strcmp(params, "interior", true, 8))
	{
		if (sscanf(params, "s[32]i", params, id)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarnegocio interior (NegocioID)");
		if (id < 1 || id >= totalnegocios) return SendClientMessage(playerid, -1, "ID de negocio inválida.");
		if (InfoNegocio[id][nTipo] == 0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		GetPlayerPos(playerid, InfoNegocio[id][nInteriorX], InfoNegocio[id][nInteriorY], InfoNegocio[id][nInteriorZ]);
		GetPlayerFacingAngle(playerid, InfoNegocio[id][nInteriorR]);
		InfoNegocio[id][nInteriorInt] = GetPlayerInterior(playerid);
		InfoNegocio[id][nInteriorVW] = 100+id;
		mysql_format(DBInsanity, string, sizeof string, "UPDATE negocios SET InteriorX = '%f', InteriorY = '%f', InteriorZ = '%f', InteriorR = '%f', InteriorInt = '%d', InteriorVW = '%d' WHERE ID = '%d'", InfoNegocio[id][nInteriorX], InfoNegocio[id][nInteriorY], InfoNegocio[id][nInteriorZ], InfoNegocio[id][nInteriorR], InfoNegocio[id][nInteriorInt], InfoNegocio[id][nInteriorVW], InfoNegocio[id][nID_sql]);
		mysql_tquery(DBInsanity, string);
		LabelPickup_negocio(id, 1, 0, 0, 0);
		format(string, sizeof string, "Cambiaste el interior del negocio %d.", id);
		SendClientMessage(playerid, COLOR_WHITE, string);
	}
	else if (!strcmp(params, "skinactor", true, 9))
	{
		if (sscanf(params, "s[32]i", params, id)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarnegocio skinactor (NegocioID)");
		if (id < 1 || id >= totalnegocios) return SendClientMessage(playerid, -1, "ID de negocio inválida.");
		if (InfoNegocio[id][nTipo] == 0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		actore_skin[playerid] = id;
		new SkinMuestra[200], count = 0;
		Loop(x, sizeof InfoSkin, 0) if (InfoSkin[x][sTipo] == 1)
		{
			SkinMuestra[count] = x;
			count++;
		}
		ShowModelSelectionMenuEx(playerid, SkinMuestra, count, "Skin para el actor", Actor_Skin, -11.0, 0.0, -55.0, 1.0);
	}
	else if (!strcmp(params, "posactor", true, 8))
	{
		if (sscanf(params, "s[32]i", params, id)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarnegocio posactor (NegocioID)");
		if (id < 1 || id >= totalnegocios) return SendClientMessage(playerid, -1, "ID de negocio inválida.");
		if (InfoNegocio[id][nTipo] == 0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		if (InfoNegocio[id][nActorSkin] == 0) return SendClientMessage(playerid, -1, "Aún no colocas un skin al actor.");
		GetPlayerPos(playerid, InfoNegocio[id][nActorX], InfoNegocio[id][nActorY], InfoNegocio[id][nActorZ]);
		GetPlayerFacingAngle(playerid, InfoNegocio[id][nActorR]);
		mysql_format(DBInsanity, string, sizeof string, "UPDATE negocios SET ActorX = '%f', ActorY = '%f', ActorZ = '%f', ActorR = '%f' WHERE ID = '%d'", InfoNegocio[id][nActorX], InfoNegocio[id][nActorY], InfoNegocio[id][nActorZ], InfoNegocio[id][nActorR], InfoNegocio[id][nID_sql]);
		mysql_tquery(DBInsanity, string);
		LabelPickup_negocio(id, 0, 0, 1, 0);
		format(string, sizeof string, "Cambiaste el lugar del actor del negocio %d.", id);
		SendClientMessage(playerid, COLOR_WHITE, string);
	}
	else if (!strcmp(params, "comprar", true, 7))
	{
		if (sscanf(params, "s[32]i", params, id)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarnegocio comprar (NegocioID)");
		if (id < 1 || id >= totalnegocios) return SendClientMessage(playerid, -1, "ID de negocio inválida.");
		if (InfoNegocio[id][nTipo] == 0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		GetPlayerPos(playerid, InfoNegocio[id][nLugarCompraX], InfoNegocio[id][nLugarCompraY], InfoNegocio[id][nLugarCompraZ]);
		mysql_format(DBInsanity, string, sizeof string, "UPDATE negocios SET LugarCompraX = '%f', LugarCompraY = '%f', LugarCompraZ = '%f' WHERE ID = '%d'", InfoNegocio[id][nLugarCompraX], InfoNegocio[id][nLugarCompraY], InfoNegocio[id][nLugarCompraZ], InfoNegocio[id][nID_sql]);
		mysql_tquery(DBInsanity, string);
		LabelPickup_negocio(id, 0, 0, 0, 1);
		format(string, sizeof string, "Cambiaste el lugar de /comprar del negocio %d.", id);
		SendClientMessage(playerid, COLOR_WHITE, string);
	}
	else if (!strcmp(params, "precio", true, 6))
	{
		if (sscanf(params, "s[32]ii", params, id, valor)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarnegocio precio (NegocioID) ($)");
		if (id < 1 || id >= totalnegocios) return SendClientMessage(playerid, -1, "ID de negocio inválida.");
		if (InfoNegocio[id][nTipo] == 0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		InfoNegocio[id][nPrecio] = valor;
		format(string, sizeof string, "Cambiaste el precio ($%s) del negocio %d.", diner_coma(valor), id);
		SendClientMessage(playerid, COLOR_WHITE, string);
		guardar_int_mysql("negocios", "Precio", InfoNegocio[id][nID_sql], InfoNegocio[id][nPrecio]);
		//Labelupdate_negocio(id);
	}
	else if (!strcmp(params, "nivel", true, 5))
	{
		if (sscanf(params, "s[32]ii", params, id, valor)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarnegocio nivel (NegocioID) (Nivel)");
		if (id < 1 || id >= totalnegocios) return SendClientMessage(playerid, -1, "ID de negocio inválida.");
		if (InfoNegocio[id][nTipo] == 0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		if (valor < 1 || valor > 99) return SendClientMessage(playerid, COLOR_WHITE, "Sólo hasta el nivel 99.");
		InfoNegocio[id][nNivel] = valor;
		format(string, sizeof string, "Cambiaste el nivel (%d) del negocio %d.", valor, id);
		SendClientMessage(playerid, COLOR_WHITE, string);
		guardar_int_mysql("negocios", "Nivel", InfoNegocio[id][nID_sql], InfoNegocio[id][nNivel]);
		//Labelupdate_negocio(id);
	}
	else if (!strcmp(params, "ganancias", true, 9))
	{
		if (sscanf(params, "s[32]ii", params, id, valor)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarnegocio ganancias (NegocioID) ($)");
		if (id < 1 || id >= totalnegocios) return SendClientMessage(playerid, -1, "ID de negocio inválida.");
		if (InfoNegocio[id][nTipo] == 0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		InfoNegocio[id][nDinero] = valor;
		format(string, sizeof string, "Cambiaste las ganacias ($%s) del negocio %d.", diner_coma(valor), id);
		SendClientMessage(playerid, COLOR_WHITE, string);
		guardar_int_mysql("negocios", "BolosUwU", InfoNegocio[id][nID_sql], InfoNegocio[id][nDinero]);
		if (InfoNegocio[id][nTipo] == 12) UpdateDineroGuardado(id);
	}
	else if (!strcmp(params, "productos", true, 9))
	{
		if (sscanf(params, "s[32]ii", params, id, valor)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarnegocio productos (NegocioID) (Cantidad)");
		if (id < 1 || id >= totalnegocios) return SendClientMessage(playerid, -1, "ID de negocio inválida.");
		if (InfoNegocio[id][nTipo] == 0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		InfoNegocio[id][nProductos] = valor;
		format(string, sizeof string, "Cambiaste los productos (%d) del negocio %d.", valor, id);
		SendClientMessage(playerid, COLOR_WHITE, string);
		guardar_int_mysql("negocios", "Productos", InfoNegocio[id][nID_sql], InfoNegocio[id][nProductos]);
	}
	else if (!strcmp(params, "mapicon", true, 7))
	{
		if (sscanf(params, "s[32]ii", params, id, valor)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarnegocio mapicon (NegocioID) (ModelID)");
		if (id < 1 || id >= totalnegocios) return SendClientMessage(playerid, -1, "ID de negocio inválida.");
		if (InfoNegocio[id][nTipo] == 0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		InfoNegocio[id][nMapIcon] = valor;
		format(string, sizeof string, "Cambiaste el mapicon (%d) del negocio %d.", valor, id);
		SendClientMessage(playerid, COLOR_WHITE, string);
		guardar_int_mysql("negocios", "MapIcon", InfoNegocio[id][nID_sql], InfoNegocio[id][nMapIcon]);
		LabelPickup_negocio(id, 0, 1, 0, 0);
	}
	else if (!strcmp(params, "posvehiculo", true, 11))
	{
		if (sscanf(params, "s[32]i", params, id)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarnegocio posvehiculo (NegocioID)");
		if (id < 1 || id >= totalnegocios) return SendClientMessage(playerid, -1, "ID de negocio inválida.");
		if (InfoNegocio[id][nTipo] == 0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		if (InfoNegocio[id][nTipo] != 10) return SendClientMessage(playerid, -1, "Ese negocio no es tipo concesionario.");
		if (InfoPersonaje[playerid][pInterior] != 0 && InfoPersonaje[playerid][pVirtualWorld] != 0) return SendClientMessage(playerid, -1, "No puedes editar el spawn del vehiculo comprado en interiores.");
		GetPlayerPos(playerid, InfoNegocio[id][nVehicleX], InfoNegocio[id][nVehicleY], InfoNegocio[id][nVehicleZ]);
		GetPlayerFacingAngle(playerid, InfoNegocio[id][nVehicleR]);
		mysql_format(DBInsanity, string, sizeof string, "UPDATE negocios SET VehicleX = '%f', VehicleY = '%f', VehicleZ = '%f', VehicleR = '%f' WHERE ID = '%d'", InfoNegocio[id][nVehicleX], InfoNegocio[id][nVehicleY], InfoNegocio[id][nVehicleZ], InfoNegocio[id][nVehicleR], InfoNegocio[id][nID_sql]);
		mysql_tquery(DBInsanity, string);
		format(string, sizeof string, "Cambiaste el spawn de compra de vehiculo del negocio %d.", id);
		SendClientMessage(playerid, COLOR_WHITE, string);
	}
	else if (!strcmp(params, "vehfabrica", true, 10))
	{
		if (sscanf(params, "s[32]i", params, id)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarnegocio vehfabrica (NegocioID)");
		if (id < 1 || id >= totalnegocios) return SendClientMessage(playerid, -1, "ID de negocio inválida.");
		if (InfoNegocio[id][nTipo] == 0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		if (InfoNegocio[id][nTipo] != 12) return SendClientMessage(playerid, -1, "Ese negocio no es tipo fábrica.");
		GetPlayerPos(playerid, InfoNegocio[id][nExteriorVehX], InfoNegocio[id][nExteriorVehY], InfoNegocio[id][nExteriorVehZ]);
		GetPlayerFacingAngle(playerid, InfoNegocio[id][nExteriorVehR]);
		GetPosInFrontOfPlayer(playerid, InfoNegocio[id][nExteriorVehX_V], InfoNegocio[id][nExteriorVehY_V], 2.5);
		mysql_format(DBInsanity, string, sizeof string, "UPDATE negocios SET ExteriorVehX = '%f', ExteriorVehY = '%f', ExteriorVehZ = '%f', ExteriorVehR = '%f', ExteriorVehX_V = '%f', ExteriorVehY_V = '%f' WHERE ID = '%d'", InfoNegocio[id][nExteriorVehX], InfoNegocio[id][nExteriorVehY], InfoNegocio[id][nExteriorVehZ], InfoNegocio[id][nExteriorVehR], InfoNegocio[id][nExteriorVehX_V], InfoNegocio[id][nExteriorVehY_V], InfoNegocio[id][nID_sql]);
		mysql_tquery(DBInsanity, string);
		LabelPickup_negocio(id, 1, 0, 0, 0);
		format(string, sizeof string, "Cambiaste el exterior vehículo de fabrica del negocio %d.", id);
		SendClientMessage(playerid, COLOR_WHITE, string);
	}
	return 1;
}
CMD:editarn(playerid, params[]) return cmd_editarnegocio(playerid, params);

RandomSkinCivil()
{
	new skindefault = -1;
	new jandom = Random(1, 300);
	Loop(x, sizeof InfoSkin, 0) if (InfoSkin[x][sTipo] == 1 && InfoSkin[x][sModelo] == jandom)
	{
		skindefault = x;
	}
	if (skindefault == -1) return RandomSkinCivil();
	return skindefault;
}

Positions_Negocio(id, tipo)
{
	new myint, myskin, mytipo;
	new Float: myposX, Float: myposY, Float: myposZ, Float: myposR;
	new Float: compraX, Float: compraY, Float: compraZ;
	new Float: jactorX, Float: jactorY, Float: jactorZ, Float: jactorR;
	myskin = RandomSkinCivil();
	switch (tipo)
	{
		case 1: //24-7 pequeño
		{
            mytipo = 1;
			myposX = -27.3552, myposY = -58.2659, myposZ = 1003.5469, myposR = 2.3829, myint = 6;
			compraX = -23.3468, compraY = -55.4924, compraZ = 1003.5469;
			jactorX = -22.8758, jactorY = -57.5155, jactorZ = 1003.5469, jactorR = 9.1313;
		}
		case 2: //24-7 grande
		{
            mytipo = 1;
			myposX = -30.9624, myposY = -92.0089, myposZ = 1003.5469, myposR = 4.8661, myint = 18;
			compraX = -28.0597, compraY = -89.8704, compraZ = 1003.5469;
			jactorX = -27.7799, jactorY = -91.6342, jactorZ = 1003.5469, jactorR = 6.6012;
		}
		case 3: //binco
		{
            mytipo = 2;
			myposX = 207.6547, myposY = -111.2579, myposZ = 1005.1328, myposR = 356.0927, myint = 15;
			compraX = 207.5624, compraY = -100.7229, compraZ = 1005.2578;
			jactorX = 207.5043, jactorY = -98.7054, jactorZ = 1005.2578, jactorR = 182.9861;
		}
		case 4: //sub urban
		{
            mytipo = 2;
			myposX = 203.8141, myposY = -50.6344, myposZ = 1001.8047, myposR = 1.7561, myint = 1;
			compraX = 203.8293, compraY = -43.3790, compraZ = 1001.8047;
			jactorX = 203.8100, jactorY = -41.6695, jactorZ = 1001.8047, jactorR = 182.0694;
		}
		case 5: //ZIP
		{
            mytipo = 2;
			myposX = 161.3801, myposY = -97.1028, myposZ = 1001.8047, myposR = 2.9859, myint = 18;
			compraX = 161.3631, compraY = -83.5608, compraZ = 1001.8047;
			jactorX = 161.3364, jactorY = -81.0248, jactorZ = 1001.8047, jactorR = 182.9859;
		}
		case 6: //victim
		{
            mytipo = 2;
			myposX = 227.5202, myposY = -8.1432, myposZ = 1002.2109, myposR = 93.2500, myint = 5;
			compraX = 206.3774, compraY = -7.9412, compraZ = 1001.2109;
			jactorX = 204.8456, jactorY = -8.7871, jactorZ = 1001.2109, jactorR = 277.9267;
		}
		case 7: //pro laps
		{
            mytipo = 2;
			myposX = 207.0223, myposY = -140.3593, myposZ = 1003.5078, myposR = 4.5758, myint = 3;
			compraX = 207.1047, compraY = -129.2098, compraZ = 1003.5078;
			jactorX = 207.0363, jactorY = -127.7927, jactorZ = 1003.5078, jactorR = 180.8391;
		}
		case 8: //ds
		{
            mytipo = 2;
			myposX = 204.3592, myposY = -168.8523, myposZ = 1000.5234, myposR = 0.2125, myint = 14;
			compraX = 204.2387, compraY = -159.3654, compraZ = 1000.5234;
			jactorX = 204.2719, jactorY = -157.7728, jactorZ = 1000.5234, jactorR = 180.5491;
		}
		case 9: //cluckin bell
		{
            mytipo = 3;
			myskin = 167;
			myposX = 364.9182, myposY = -11.7833, myposZ = 1001.8516, myposR = 3.0558, myint = 9;
			compraX = 370.9220, compraY = -6.0173, compraZ = 1001.8589;
			jactorX = 370.8978, jactorY = -4.4378, jactorZ = 1001.8589, jactorR = 178.9823;
		}
		case 10: //pizzeria
		{
            mytipo = 3;
			myskin = 155;
			myposX = 372.4181, myposY = -133.5219, myposZ = 1001.4922, myposR = 358.9738, myint = 5;
			compraX = 376.6881, compraY = -118.8069, compraZ = 1001.4995;
			jactorX = 376.6858, jactorY = -117.2020, jactorZ = 1001.4922, jactorR = 182.3972;
		}
		case 11: //burger shot
		{
            mytipo = 3;
			myskin = 205;
			myposX = 362.9157, myposY = -75.2065, myposZ = 1001.5078, myposR = 317.3002, myint = 10;
			compraX = 376.5519, compraY = -67.4450, compraZ = 1001.5078;
			jactorX = 376.4981, jactorY = -65.8334, jactorZ = 1001.5078, jactorR = 182.7574;
		}
		case 12: //gasolinera
		{
            mytipo = 4;
			myposX = -27.3804, myposY = -31.7613, myposZ = 1003.5573, myposR = 3.0473, myint = 4;
			compraX = -30.6065, compraY = -28.9321, compraZ = 1003.5573;
			jactorX = -30.3688, jactorY = -30.8017, jactorZ = 1003.5573, jactorR = 354.1288;
		}
		case 13: //ammunation pequeño
		{
            mytipo = 5;
			myposX = 296.8890, myposY = -112.0669, myposZ = 1001.5156, myposR = 4.0106, myint = 6;
			compraX = 290.2662, compraY = -106.2288, compraZ = 1001.5156;
			jactorX = 290.2452, jactorY = -104.4911, jactorZ = 1001.5156, jactorR = 183.9872;
		}
		case 14: //ammunation mediano
		{
            mytipo = 5;
			myposX = 285.3417, myposY = -41.6345, myposZ = 1001.5156, myposR = 357.3369, myint = 1;
			compraX = 295.3187, compraY = -38.4259, compraZ = 1001.5156;
			jactorX = 295.4275, jactorY = -40.3169, jactorZ = 1001.5156, jactorR = 4.3987;
		}
		case 15: //ammunation grande
		{
            mytipo = 5;
			myposX = 315.8150, myposY = -143.6635, myposZ = 999.6016, myposR = 6.1806, myint = 7;
			compraX = 314.0374, compraY = -133.6105, compraZ = 999.6016;
			jactorX = 316.1269, jactorY = -133.4615, jactorZ = 999.6016, jactorR = 87.1663;
		}
		case 16: //mecánico
		{
            mytipo = 9;
			myposX = 1506.8711, myposY = -1635.7693, myposZ = 1374.5045, myposR = 188.2864, myint = 34;
			compraX = 0.0, compraY = 0.0, compraZ = 0.0;
			jactorX = 1504.0543, jactorY = -1636.4006, jactorZ = 1374.5045, jactorR = 278.9244;
		}
		case 17: //sex shop
		{
            mytipo = 7;
			myskin = 178;
			myposX = -100.3137, myposY = -25.0355, myposZ = 1000.7188, myposR = 2.6871, myint = 3;
			compraX = -104.7556, compraY = -10.7418, compraZ = 1000.7188;
			jactorX = -104.7971, jactorY = -8.9126, jactorZ = 1000.7188, jactorR = 183.0237;
		}
		case 18: //bar
		{
            mytipo = 8;
			myposX = 501.8990, myposY = -67.5652, myposZ = 998.7578, myposR = 182.8555, myint = 11;
			compraX = 496.9826, compraY = -76.0265, compraZ = 998.7578;
			jactorX = 497.1426, jactorY = -77.5720, jactorZ = 998.7651, jactorR = 3.8187;
		}
		case 19: //alhambra
		{
            mytipo = 8;
			myposX = 493.4397, myposY = -24.9173, myposZ = 1000.6719, myposR = 359.2636, myint = 17;
			compraX = 499.9566, compraY = -18.8178, compraZ = 1000.6719;
			jactorX = 501.8318, jactorY = -18.7009, jactorZ = 1000.6719, jactorR = 90.5894;
		}
		case 20: //strip club
		{
            mytipo = 8;
			myposX = 1204.8147, myposY = -13.8345, myposZ = 1000.9219, myposR = 7.3870, myint = 2;
			compraX = 1215.7231, compraY = -13.3252, compraZ = 1000.9219;
			jactorX = 1215.9199, jactorY = -15.2619, jactorZ = 1000.9219, jactorR = 2.8553;
		}
		case 21: //pescadería
		{
            mytipo = 11;
			myposX = 981.2192, myposY = -1946.9337, myposZ = 2835.0000, myposR = 268.4117, myint = 4;
			compraX = 990.6504, compraY = -1943.0256, compraZ = 2835.0078;
			jactorX = 991.4003, jactorY = -1941.1827, jactorZ = 2835.0078, jactorR = 178.9425;
		}
		case 22: //concesionaria
		{
            mytipo = 10;
			myposX = 1494.4860, myposY = 1303.5802, myposZ = 1093.2891, myposR = 359.0949, myint = 3;
			compraX = 1490.7678, compraY = 1306.2170, compraZ = 1093.2964;
			jactorX = 1488.8588, jactorY = 1305.5000, jactorZ = 1093.2964, jactorR = 282.8092;
		}
		case 23: //fábrica de drogas
		{
            mytipo = 12;
			myposX = -2139.3433, myposY = -253.7772, myposZ = 544.7299, myposR = 90.0000, myint = 9;
			compraX = 0.0, compraY = 0.0, compraZ = 0.0;
			jactorX = 0.0, jactorY = 0.0, jactorZ = 0.0, jactorR = 0.0;
			myskin = 0;
		}
		case 24: //repartidor
		{
			mytipo = 6;
			myposX = 1033.3253, myposY = -310.3433, myposZ = 2076.6460, myposR = 0.0000, myint = 51;
			compraX = 0.0, compraY = 0.0, compraZ = 0.0;
			jactorX = 0.0, jactorY = 0.0, jactorZ = 0.0, jactorR = 0.0;
			myskin = 0;
		}
	}
	InfoNegocio[id][nTipo] = mytipo;
	InfoNegocio[id][nActorSkin] = myskin;
	InfoNegocio[id][nInteriorInt] = myint;
	InfoNegocio[id][nInteriorVW] = 100+id;
	InfoNegocio[id][nInteriorX] = myposX; InfoNegocio[id][nInteriorY] = myposY; InfoNegocio[id][nInteriorZ] = myposZ; InfoNegocio[id][nInteriorR] = myposR;
	InfoNegocio[id][nLugarCompraX] = compraX; InfoNegocio[id][nLugarCompraY] = compraY; InfoNegocio[id][nLugarCompraZ] = compraZ;
	InfoNegocio[id][nActorX] = jactorX; InfoNegocio[id][nActorY] = jactorY; InfoNegocio[id][nActorZ] = jactorZ; InfoNegocio[id][nActorR] = jactorR;
}

CMD:crearnegocio(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	new precio, nivel, tipo, gformat[260];
	if (sscanf(params, "ddd", tipo, precio, nivel))
	{
		SendClientMessage(playerid, COLOR_GREY, "Utiliza: /crearnegocio (Tipo) (Precio) (Nivel)");
		SendClientMessage(playerid, COLOR_WHITE, "Tipos: 1 (24-7 pequeño) 2 (24-7 grande) 3 (binco) 4 (Sub urban) 5 (ZIP) 6 (Victim) 7 (Pro Laps) 8 (Ds) 9 (Cluckin bell)");
		SendClientMessage(playerid, COLOR_WHITE, "Tipos: 10 (Pizzería) 11 (Burger shot) 12 (Gasolinera) 13 (Ammunation pequeño) 14 (Ammunation mediano) 15 (Ammunation grande)");
		SendClientMessage(playerid, COLOR_WHITE, "Tipos: 16 (Mecánico) 17 (Sex shop) 18 (Bar) 19 (Alhambra) 20 (Strip club) 21 (Puerto de pescadería) 22 (Concesionaria)");
		SendClientMessage(playerid, COLOR_WHITE, "Tipos: 23 (Fábrica de drogas) 24 (Repartidor)");
		return 1;
	}
	if (tipo < 1 || tipo > 25) return SendClientMessage(playerid, COLOR_WHITE, "Los tipos están entre 1 - 25.");
	Loop(id, MAX_NEGOCIOS, 1) if (InfoNegocio[id][nTipo] == 0)
	{
		GetPlayerPos(playerid, InfoNegocio[id][nExteriorX], InfoNegocio[id][nExteriorY], InfoNegocio[id][nExteriorZ]);
		GetPlayerFacingAngle(playerid, InfoNegocio[id][nExteriorR]);
		InfoNegocio[id][nVenta] = 0;
		InfoNegocio[id][nPrecio] = precio;
		InfoNegocio[id][nNivel] = nivel;
		InfoNegocio[id][nExteriorVW] = GetPlayerVirtualWorld(playerid);
		InfoNegocio[id][nExteriorInt] = GetPlayerInterior(playerid);
		Positions_Negocio(id, tipo);
		alm(InfoNegocio[id][nNombre], GetTipoNegocio(InfoNegocio[id][nTipo]));
		LabelPickup_negocio(id, 1, 0, 1, 1);
		InfoNegocio[id][nProductos] = 800;
		format(gformat, sizeof gformat, "Negocio nuevo ID: %d - Precio: $%s - Tipo: %s.", id, diner_coma(precio), GetTipoNegocio(InfoNegocio[id][nTipo]));
		SendClientMessage(playerid, 0x90C3D4FF, gformat);
		switch (InfoNegocio[id][nTipo])
		{
			case 6:
			{
				InfoNegocio[id][nEmpleo] = 1;
			}
			case 9:
			{
				GetPlayerPos(playerid, InfoNegocio[id][nExteriorVehX], InfoNegocio[id][nExteriorVehY], InfoNegocio[id][nExteriorVehZ]);
				GetPlayerFacingAngle(playerid, InfoNegocio[id][nExteriorVehR]);
				GetPosInFrontOfPlayer(playerid, InfoNegocio[id][nExteriorVehX_V], InfoNegocio[id][nExteriorVehY_V], 2.5);InfoNegocio[id][nPrecioPintura] = 500;
				InfoNegocio[id][nPrecioPaintJob] = 700;
				InfoNegocio[id][nPrecioReparacion] = 1000;
				InfoNegocio[id][nPrecioGasolina] = 200;
				InfoNegocio[id][nPrecioLlantas] = 4000;
				InfoNegocio[id][nPrecioNitro] = 8000;
				InfoNegocio[id][nPrecioHyd] = 5000;
				InfoNegocio[id][nPrecioTuneo] = 15000;
				InfoNegocio[id][nEmpleo] = 1;
			}
			case 10: SendClientMessage(playerid, 0xFFFF00FF, "Recuerda usar /editarn posvehiculo (NegocioID), para editar el lugar de entrega de compra.");
			case 12:
			{
				InfoNegocio[id][nEmpleo] = 0;
				SendClientMessage(playerid, 0xFFFF00FF, "Recuerda usar /editarn vehfabrica (NegocioID), para editar el lugar de entrada de vehículos.");
				//cartel de dinero
				InfoNegocio[id][nObjMoney] = CreateDynamicObject(19353, -2190.02563, -206.69887, 545.51245, 0.00000, 0.00000, 0.00000, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt], -1);
				UpdateDineroGuardado(id);
				//vehículos
				InfoNegocio[id][nVehiculo][0] = CreateVehicle(554, -2168.7524, -246.0328, 544.7685, -91.0200, 1, 53, -1);
				LinkVehicleToInterior(InfoNegocio[id][nVehiculo][0], InfoNegocio[id][nInteriorInt]);
				SetVehicleVirtualWorld(InfoNegocio[id][nVehiculo][0], InfoNegocio[id][nInteriorVW]);
				SetVehicleHealth(InfoNegocio[id][nVehiculo][0], 5000.0);
				InfoNegocio[id][nVehiculo][1] = CreateVehicle(554, -2162.6091, -251.6801, 544.7685, -72.0600, 1, 53, -1);
				LinkVehicleToInterior(InfoNegocio[id][nVehiculo][1], InfoNegocio[id][nInteriorInt]);
				SetVehicleVirtualWorld(InfoNegocio[id][nVehiculo][1], InfoNegocio[id][nInteriorVW]);
				SetVehicleHealth(InfoNegocio[id][nVehiculo][1], 5000.0);
				//quimicos
				new QuimiEx[240];
				format(QuimiEx, sizeof QuimiEx, "{00AE57}Tanque de almacenaje{FFFFFF}\nQuímicos acumulados: {3399FF}%d{FFFFFF}\nPresiona {00AE57}'H'{FFFFFF} para preparar el cristal", InfoNegocio[id][nQuimicos]);
				InfoNegocio[id][nLabelQuimicos][0] = CreateDynamic3DTextLabel(QuimiEx, -1, -2155.43799, -264.92325, 544.66193, 8.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
				InfoNegocio[id][nLabelQuimicos][1] = CreateDynamic3DTextLabel(QuimiEx, -1, -2158.95898, -265.10498, 544.66193, 8.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
				InfoNegocio[id][nLabelQuimicos][2] = CreateDynamic3DTextLabel(QuimiEx, -1, -2162.32373, -265.29837, 544.66193, 8.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
				//cocinando metanfetamina
				new MetanEx[340];
				format(MetanEx, sizeof MetanEx, "{00AE57}Mesa de producción #1{FFFFFF}\n%s", EstadoMesaProduccion(id, 0));
				InfoNegocio[id][nLabelCocina][0] = CreateDynamic3DTextLabel(MetanEx, -1, -2161.47070, -233.69153, 544.87073, 6.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
				format(MetanEx, sizeof MetanEx, "{00AE57}Mesa de producción #2{FFFFFF}\n%s", EstadoMesaProduccion(id, 1));
				InfoNegocio[id][nLabelCocina][1] = CreateDynamic3DTextLabel(MetanEx, -1, -2166.25708, -233.69153, 544.87073, 6.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
				format(MetanEx, sizeof MetanEx, "{00AE57}Mesa de producción #3{FFFFFF}\n%s", EstadoMesaProduccion(id, 2));
				InfoNegocio[id][nLabelCocina][2] = CreateDynamic3DTextLabel(MetanEx, -1, -2170.97900, -233.69153, 544.87073, 6.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
				format(MetanEx, sizeof MetanEx, "{00AE57}Mesa de producción #4{FFFFFF}\n%s", EstadoMesaProduccion(id, 3));
				InfoNegocio[id][nLabelCocina][3] = CreateDynamic3DTextLabel(MetanEx, -1, -2175.96655, -233.69153, 544.87073, 6.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
				format(MetanEx, sizeof MetanEx, "{00AE57}Mesa de producción #5{FFFFFF}\n%s", EstadoMesaProduccion(id, 4));
				InfoNegocio[id][nLabelCocina][4] = CreateDynamic3DTextLabel(MetanEx, -1, -2181.32300, -233.69153, 544.87073, 6.0, .worldid = InfoNegocio[id][nInteriorVW], .interiorid = InfoNegocio[id][nInteriorInt]);
			}
		}
		new que2ry[2000], query[3500];
		//opción idsql ya creada.
		if (InfoNegocio[id][nID_sql] != 0)
		{
			format(que2ry, sizeof que2ry, "UPDATE negocios SET Nombre = '%s', Tipo = '%d', Empleo = '%d', Venta = '%d', Precio = '%d', Nivel = '%d', ExteriorX = '%f', ExteriorY = '%f', ExteriorZ = '%f', ExteriorR = '%f', ExteriorInt = '%d', ExteriorVW = '%d', InteriorX = '%f', InteriorY = '%f', InteriorZ = '%f', InteriorR = '%f', InteriorInt = '%d', InteriorVW = '%d',",
			InfoNegocio[id][nNombre],
			InfoNegocio[id][nTipo],
			InfoNegocio[id][nEmpleo],
			InfoNegocio[id][nVenta],
			InfoNegocio[id][nPrecio],
			InfoNegocio[id][nNivel],
			InfoNegocio[id][nExteriorX],
			InfoNegocio[id][nExteriorY],
			InfoNegocio[id][nExteriorZ],
			InfoNegocio[id][nExteriorR],
			InfoNegocio[id][nExteriorInt],
			InfoNegocio[id][nExteriorVW],
			InfoNegocio[id][nInteriorX],
			InfoNegocio[id][nInteriorY],
			InfoNegocio[id][nInteriorZ],
			InfoNegocio[id][nInteriorR],
			InfoNegocio[id][nInteriorInt],
			InfoNegocio[id][nInteriorVW]);
			mysql_format(DBInsanity, query, sizeof query, "%s LugarCompraX = '%f', LugarCompraY = '%f', LugarCompraZ = '%f', Productos = '%d', ActorX = '%f', ActorY = '%f', ActorZ = '%f', ActorR = '%f', ActorSkin = '%d' WHERE ID = '%d'",
			que2ry,
			InfoNegocio[id][nLugarCompraX],
			InfoNegocio[id][nLugarCompraY],
			InfoNegocio[id][nLugarCompraZ],
			InfoNegocio[id][nProductos],
			InfoNegocio[id][nActorX],
			InfoNegocio[id][nActorY],
			InfoNegocio[id][nActorZ],
			InfoNegocio[id][nActorR],
			InfoNegocio[id][nActorSkin],
			InfoNegocio[id][nID_sql]);
			mysql_tquery(DBInsanity, query);
			if (InfoNegocio[id][nTipo] == 9)
			{
				new string[512];
				mysql_format(DBInsanity, string, sizeof string, "UPDATE negocios SET ExteriorVehX = '%f', ExteriorVehY = '%f', ExteriorVehZ = '%f', ExteriorVehR = '%f', ExteriorVehX_V = '%f', ExteriorVehY_V = '%f' WHERE ID = '%d'", InfoNegocio[id][nExteriorVehX], InfoNegocio[id][nExteriorVehY], InfoNegocio[id][nExteriorVehZ], InfoNegocio[id][nExteriorVehR], InfoNegocio[id][nExteriorVehX_V], InfoNegocio[id][nExteriorVehY_V], InfoNegocio[id][nID_sql]);
				mysql_tquery(DBInsanity, string);
				ActualizarPrecioNegocio(id);
			}
			id = MAX_NEGOCIOS;
			return 1;
		}
		format(que2ry, sizeof que2ry, "INSERT INTO negocios (Nombre, Tipo, Empleo, Venta, Precio, Nivel, ExteriorX, ExteriorY, ExteriorZ, ExteriorR, ExteriorInt, ExteriorVW, InteriorX, InteriorY, InteriorZ, InteriorR, InteriorInt, InteriorVW, LugarCompraX, LugarCompraY, LugarCompraZ,");
		mysql_format(DBInsanity, query, sizeof query, "%s Productos, ActorX, ActorY, ActorZ, ActorR, ActorSkin) VALUES ('%e', '%d', '%d', '%d', '%d',  '%d', '%f', '%f', '%f', '%f', '%d', '%d', '%f', '%f', '%f', '%f', '%d', '%d', '%f', '%f', '%f', '%d', '%f', '%f', '%f', '%f', '%d')",
		que2ry,
		InfoNegocio[id][nNombre],
		InfoNegocio[id][nTipo],
		InfoNegocio[id][nEmpleo],
		InfoNegocio[id][nVenta],
		InfoNegocio[id][nPrecio],
		InfoNegocio[id][nNivel],
		InfoNegocio[id][nExteriorX],
		InfoNegocio[id][nExteriorY],
		InfoNegocio[id][nExteriorZ],
		InfoNegocio[id][nExteriorR],
		InfoNegocio[id][nExteriorInt],
		InfoNegocio[id][nExteriorVW],
		InfoNegocio[id][nInteriorX],
		InfoNegocio[id][nInteriorY],
		InfoNegocio[id][nInteriorZ],
		InfoNegocio[id][nInteriorR],
		InfoNegocio[id][nInteriorInt],
		InfoNegocio[id][nInteriorVW],
		InfoNegocio[id][nLugarCompraX],
		InfoNegocio[id][nLugarCompraY],
		InfoNegocio[id][nLugarCompraZ],
		InfoNegocio[id][nProductos],
		InfoNegocio[id][nActorX],
		InfoNegocio[id][nActorY],
		InfoNegocio[id][nActorZ],
		InfoNegocio[id][nActorR],
		InfoNegocio[id][nActorSkin]);
		mysql_tquery(DBInsanity, query, "OnNegocioCreate", "i", id);
		id = MAX_NEGOCIOS;
		return 1;
	}
	SendClientMessage(playerid, COLOR_RED, "Se alcanzó el máximo de negocios (100)");
	return 1;
}

forward OnNegocioCreate(id);
public OnNegocioCreate(id)
{
	InfoNegocio[id][nID_sql] = cache_insert_id();
	cache_unset_active();
	totalnegocios++;
	if (InfoNegocio[id][nTipo] == 9)
	{
		new string[512];
		mysql_format(DBInsanity, string, sizeof string, "UPDATE negocios SET ExteriorVehX = '%f', ExteriorVehY = '%f', ExteriorVehZ = '%f', ExteriorVehR = '%f', ExteriorVehX_V = '%f', ExteriorVehY_V = '%f' WHERE ID = '%d'", InfoNegocio[id][nExteriorVehX], InfoNegocio[id][nExteriorVehY], InfoNegocio[id][nExteriorVehZ], InfoNegocio[id][nExteriorVehR], InfoNegocio[id][nExteriorVehX_V], InfoNegocio[id][nExteriorVehY_V], InfoNegocio[id][nID_sql]);
		mysql_tquery(DBInsanity, string);
		ActualizarPrecioNegocio(id);
	}
    return 1;
}

CMD:borrarnegocio(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	new id, gformat[235], query[1408];
	if (sscanf(params, "d", id)) return SendClientMessage(playerid, COLOR_GREY, "Utiliza: /borrarnegocio (NegocioID)");
	if (id < 1 || id >= totalnegocios) return SendClientMessage(playerid, -1, "ID de negocio inválida.");
	if (InfoNegocio[id][nTipo] == 0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
	//si tenía dueño
	if (InfoNegocio[id][nVenta] != 0)
	{
		foreach(Player, p)
		{
			if (InfoPersonaje[p][pNegocio1] == id)
			{
				format(gformat, sizeof gformat, "Admin %s vendió tu negocio (1) %d.", NombreOriginal(playerid), id);
				SendClientMessage(playerid, COLOR_ORANGE, gformat);
				InfoPersonaje[p][pNegocio1] = -1;
			}
			if (InfoPersonaje[p][pNegocio2] == id)
			{
				format(gformat, sizeof gformat, "Admin %s vendió tu negocio (2) %d.", NombreOriginal(playerid), id);
				SendClientMessage(playerid, COLOR_ORANGE, gformat);
				InfoPersonaje[p][pNegocio2] = -1;
			}
		}
		LimpiarEmpleados(id);
		//limpiar negocio
		if (VerificarPersonaje(InfoNegocio[id][nPropietario]))
		{
			new neg1, neg2;
			reg_int(0, "Negocio", neg1);
			reg_int(0, "Negocio2", neg2);
			if (neg1 == id)
			{
				mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE personajes SET Negocio = -1 WHERE Nombre_Apellido = '%e'", InfoNegocio[id][nPropietario]);
				mysql_tquery(DBInsanity, gformat);
			}
			if (neg2 == id)
			{
				mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE personajes SET Negocio2 = -1 WHERE Nombre_Apellido = '%e'", InfoNegocio[id][nPropietario]);
				mysql_tquery(DBInsanity, gformat);
			}
		}
	}
	//destroy pickup+label
	noexitnegocio(id);
	//reset variables
	alm(InfoNegocio[id][nNombre], "none");
	alm(InfoNegocio[id][nPropietario], "gobielno");
	InfoNegocio[id][nVenta] = 0;
	if (InfoNegocio[id][nTipo] == 12)
	{
		if (IsValidDynamicObject(InfoNegocio[id][nObjMoney])) DestroyDynamicObject(InfoNegocio[id][nObjMoney]);
		DestroyVehicle(InfoNegocio[id][nVehiculo][0]);
		DestroyVehicle(InfoNegocio[id][nVehiculo][1]);
	}
	InfoNegocio[id][nTipo] = 0;
	InfoNegocio[id][nPrecio] = 0;
	InfoNegocio[id][nNivel] = 0;
	InfoNegocio[id][nExteriorX] = 0.0;
	InfoNegocio[id][nExteriorY] = 0.0;
	InfoNegocio[id][nExteriorZ] = 0.0;
	InfoNegocio[id][nExteriorR] = 0.0;
	InfoNegocio[id][nExteriorInt] = 0;
	InfoNegocio[id][nExteriorVW] = 0;
	InfoNegocio[id][nInteriorX] = 0.0;
	InfoNegocio[id][nInteriorY] = 0.0;
	InfoNegocio[id][nInteriorZ] = 0.0;
	InfoNegocio[id][nInteriorR] = 0.0;
	InfoNegocio[id][nInteriorInt] = 0;
	InfoNegocio[id][nInteriorVW] = 0;
	InfoNegocio[id][nLugarCompraX] = 0.0;
	InfoNegocio[id][nLugarCompraY] = 0.0;
	InfoNegocio[id][nLugarCompraZ] = 0.0;
	InfoNegocio[id][nSeguro] = 0;
	InfoNegocio[id][nDinero] = 0;
	InfoNegocio[id][nProductos] = 0;
	InfoNegocio[id][nMapIcon] = 0;
	InfoNegocio[id][nActorX] = 0.0;
	InfoNegocio[id][nActorY] = 0.0;
	InfoNegocio[id][nActorZ] = 0.0;
	InfoNegocio[id][nActorR] = 0.0;
	InfoNegocio[id][nActorSkin] = 0;
	InfoNegocio[id][nVehicleX] = 0.0;
	InfoNegocio[id][nVehicleY] = 0.0;
	InfoNegocio[id][nVehicleZ] = 0.0;
	InfoNegocio[id][nVehicleR] = 0.0;
	InfoNegocio[id][nExteriorVehX] = 0.0;
	InfoNegocio[id][nExteriorVehY] = 0.0;
	InfoNegocio[id][nExteriorVehZ] = 0.0;
	InfoNegocio[id][nExteriorVehR] = 0.0;
	InfoNegocio[id][nExteriorVehX_V] = 0.0;
	InfoNegocio[id][nExteriorVehY_V] = 0.0;
	InfoNegocio[id][nEmpleado][0] = 0;
	InfoNegocio[id][nEmpleado][1] = 0;
	InfoNegocio[id][nEmpleado][2] = 0;
	InfoNegocio[id][nEmpleado][3] = 0;
	InfoNegocio[id][nEmpleado][4] = 0;
	InfoNegocio[id][nQuimicos] = 0;
	InfoNegocio[id][nTimeNecesitaQuimicos] = 0;
	InfoNegocio[id][nCocinando][0] = 0;
	InfoNegocio[id][nCocinando][1] = 0;
	InfoNegocio[id][nCocinando][2] = 0;
	InfoNegocio[id][nCocinando][3] = 0;
	InfoNegocio[id][nCocinando][4] = 0;
	InfoNegocio[id][nTimeCocinando][0] = 0;
	InfoNegocio[id][nTimeCocinando][1] = 0;
	InfoNegocio[id][nTimeCocinando][2] = 0;
	InfoNegocio[id][nTimeCocinando][3] = 0;
	InfoNegocio[id][nTimeCocinando][4] = 0;
	InfoNegocio[id][nEntregasListas] = 0;

	InfoNegocio[id][nPrecioPintura] = 0;
	InfoNegocio[id][nPrecioPaintJob] = 0;
	InfoNegocio[id][nPrecioReparacion] = 0;
	InfoNegocio[id][nPrecioGasolina] = 0;
	InfoNegocio[id][nPrecioLlantas] = 0;
	InfoNegocio[id][nPrecioNitro] = 0;
	InfoNegocio[id][nPrecioHyd] = 0;
	InfoNegocio[id][nPrecioTuneo] = 0;
	ActualizarPrecioNegocio(id);
	
	//query
	mysql_format(DBInsanity, query, sizeof query, "UPDATE negocios SET Nombre = '%e', Propietario = '%e', Venta = 0, Tipo = 0, Precio = 0, Nivel = 0, ExteriorX = 0.0, ExteriorY = 0.0, ExteriorZ = 0.0,  ExteriorR = 0.0, \
	ExteriorInt = 0.0, ExteriorVW = 0.0, ExteriorVehX = 0.0, ExteriorVehY = 0.0, ExteriorVehZ = 0.0, ExteriorVehR = 0.0, ExteriorVehX_V = 0.0, ExteriorVehY_V = 0.0 WHERE ID = '%d'", InfoNegocio[id][nNombre], InfoNegocio[id][nPropietario], InfoNegocio[id][nID_sql]);
	mysql_tquery(DBInsanity, query);
	mysql_format(DBInsanity, query, sizeof query, "UPDATE negocios SET InteriorX = 0.0, InteriorY = 0.0, InteriorZ = 0.0, InteriorR = 0.0, InteriorInt = 0, InteriorVW = 0, LugarCompraX = 0.0, \
	LugarCompraY = 0.0, LugarCompraZ = 0.0, Seguro = 0, BolosUwU = 0, Productos = 0, MapIcon = 0, ActorX = 0.0, ActorY = 0.0, ActorZ = 0.0, ActorR = 0.0, ActorSkin = 0 WHERE ID = '%d'", InfoNegocio[id][nID_sql]);
	mysql_tquery(DBInsanity, query);
	mysql_format(DBInsanity, query, sizeof query, "UPDATE negocios SET Empleado1 = 0, Empleado2 = 0, Empleado3 = 0, Empleado4 = 0, Empleado5 = 0, Quimicos = 0, TimeNecesitaQuimicos = 0, Cocinando1 = 0, Cocinando2 = 0, Cocinando3 = 0, \
	Cocinando4 = 0, Cocinando5 = 0, TimeCocinando1 = 0, TimeCocinando2 = 0, TimeCocinando3 = 0, TimeCocinando4 = 0, TimeCocinando5 = 0, EntregasListas = 0 WHERE ID = '%d'", InfoNegocio[id][nID_sql]);
	mysql_tquery(DBInsanity, query);
	//mensaje
	format(gformat, sizeof gformat, "Borraste el negocio ID %d, SQL vacía: %d", id, InfoNegocio[id][nID_sql]);
	SendClientMessage(playerid, -1, gformat);
	return 1;
}

CMD:negocioname(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	new query[256], id, doorname[32];
	if (sscanf(params, "ds[32]", id, doorname)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarnombrenegocio (NegocioID) (Nombre)");
	if (id < 1 || id >= totalnegocios) return SendClientMessage(playerid, -1, "ID de negocio inválida.");
	if (InfoNegocio[id][nTipo] == 0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
	if (strlen(doorname) > 31 || strlen(doorname) < 0) { SendClientMessage(playerid, -1, "Sólo puedes escribir menos de 30 carácteres."); return 1; }
	alm(InfoNegocio[id][nNombre], doorname);
	format(query, sizeof query, "Cambiaste el nombre (%s) del negocio %d.", doorname, id);
	SendClientMessage(playerid, 0xFFFFFFFF, query);
	//Labelupdate_negocio(id);
	guardar_string_mysql("negocios", "Nombre", InfoNegocio[id][nID_sql], InfoNegocio[id][nNombre]);
	return 1;
}
CMD:editarnnombre(playerid, params[]) return cmd_negocioname(playerid, params);
CMD:editarnegocionombre(playerid, params[]) return cmd_negocioname(playerid, params);
CMD:editarnombrenegocio(playerid, params[]) return cmd_negocioname(playerid, params);

GetExtNegocio(playerid)
{
	new id = -1;
	Loop(x, totalnegocios, 1)
	{
		if (IsPlayerInRangeOfPoint(playerid, 1.5, InfoNegocio[x][nExteriorX], InfoNegocio[x][nExteriorY], InfoNegocio[x][nExteriorZ]) && InfoPersonaje[playerid][pInterior] == InfoNegocio[x][nExteriorInt] && InfoPersonaje[playerid][pVirtualWorld] == InfoNegocio[x][nExteriorVW])
		{
			id = x;
		}
		if (InfoNegocio[x][nExteriorVehX] != 0.0)
		{
			if (IsPlayerInRangeOfPoint(playerid, 10.0, InfoNegocio[x][nExteriorVehX], InfoNegocio[x][nExteriorVehY], InfoNegocio[x][nExteriorVehZ]) && InfoPersonaje[playerid][pInterior] == InfoNegocio[x][nExteriorInt] && InfoPersonaje[playerid][pVirtualWorld] == InfoNegocio[x][nExteriorVW])
			{
				id = x;
			}
		}
	}
	return id;
}

GetIntNegocio(playerid, tipo = 0)
{
	new id = -1;
	Loop(x, totalnegocios, 1)
	{
		if (!tipo)
		{
			if (IsPlayerInRangeOfPoint(playerid, 1.5, InfoNegocio[x][nInteriorX], InfoNegocio[x][nInteriorY], InfoNegocio[x][nInteriorZ]) && InfoPersonaje[playerid][pInterior] == InfoNegocio[x][nInteriorInt] && InfoPersonaje[playerid][pVirtualWorld] == InfoNegocio[x][nInteriorVW])
			{
				id = x;
			}
			if (IsPlayerInRangeOfPoint(playerid, 10.0, -2144.1904, -247.4404, 544.8129) && InfoPersonaje[playerid][pInterior] == InfoNegocio[x][nInteriorInt] && InfoPersonaje[playerid][pVirtualWorld] == InfoNegocio[x][nInteriorVW])
			{
				id = x;
			}
			if (IsPlayerInRangeOfPoint(playerid, 10.0, 1512.2188,-1638.6256,1374.6003) && InfoPersonaje[playerid][pInterior] == InfoNegocio[x][nInteriorInt] && InfoPersonaje[playerid][pVirtualWorld] == InfoNegocio[x][nInteriorVW])
			{
				id = x;
			}
		}
		else if (tipo == 1)
		{
			if (IsPlayerInRangeOfPoint(playerid, 30.0, InfoNegocio[x][nInteriorX], InfoNegocio[x][nInteriorY], InfoNegocio[x][nInteriorZ]) && InfoPersonaje[playerid][pInterior] == InfoNegocio[x][nInteriorInt] && InfoPersonaje[playerid][pVirtualWorld] == InfoNegocio[x][nInteriorVW])
			{
				id = x;
			}
		}
	}
	return id;
}

CMD:comprarnegocio(playerid)
{
	new id = GetExtNegocio(playerid), string[245];
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en el exterior de ningún negocio.");
	if (InfoNegocio[id][nVenta] != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes comprar un negocio con dueño.");
	if (GetPlayerCash(playerid) < InfoNegocio[id][nPrecio])
	{
		format(string, sizeof string, "No tienes dinero suficiente! Te faltan {00cc00}$%s", diner_coma(InfoNegocio[id][nPrecio]-GetPlayerCash(playerid)));
		SendClientMessage(playerid, COLOR_GRAD2, string);
		return 1;
	}
	if (InfoCuenta[playerid][jVIP] == 0 || InfoCuenta[playerid][jVIP] == 1)
	{
		if (InfoPersonaje[playerid][pNegocio1] != -1) return SendClientMessage(playerid, COLOR_GREY, "Las cuentas comunes o VIP bronce, sólo pueden comprar un negocio.");
		InfoPersonaje[playerid][pNegocio1] = id;
		guardar_int_mysql("personajes", "Negocio", InfoPersonaje[playerid][pID], id);
	}
	else
	{
		if (InfoPersonaje[playerid][pNegocio1] == -1)
		{
			InfoPersonaje[playerid][pNegocio1] = id;
			guardar_int_mysql("personajes", "Negocio", InfoPersonaje[playerid][pID], id);
		}
		else if (InfoPersonaje[playerid][pNegocio2] == -1)
		{
			InfoPersonaje[playerid][pNegocio2] = id;
			guardar_int_mysql("personajes", "Negocio2", InfoPersonaje[playerid][pID], id);
		}
		else { SendClientMessage(playerid, COLOR_GREY, "Ya tienes el máximo de negocios."); return 1; }
	}
	GivePlayerCash(playerid, -InfoNegocio[id][nPrecio], "compra de negocio");
	Tax += InfoNegocio[id][nPrecio];
	alm(InfoNegocio[id][nPropietario], NombreDeCuenta(playerid));
	InfoNegocio[id][nVenta] = 1;
	SendClientMessage(playerid, COLOR_WHITE, "Felicitaciones por tu nueva compra!");
	SendClientMessage(playerid, COLOR_WHITE, "Escribe {00AE57}/ayuda negocio{FFFFFF} para ver los comandos disponibles!");
	mysql_format(DBInsanity, string, sizeof string, "UPDATE negocios SET Propietario = '%e', Venta = 1 WHERE ID = '%d'", InfoNegocio[id][nPropietario], InfoNegocio[id][nID_sql]);
	mysql_tquery(DBInsanity, string);
	if (InfoNegocio[id][nTipo] == 9) SendClientMessage(playerid, 0x5EAEFFFF, "Puedes cambiar el precio de los servicios desde /cambiarprecios.");
	LabelPickup_negocio(id, 1, 0, 0, 0);
	return 1;
}

CMD:vendernegocio(playerid)
{
	new id = GetExtNegocio(playerid), string[250];
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en el exterior de ningún negocio.");
	if (LlavesNegocio(playerid, id) == 0) return SendClientMessage(playerid, COLOR_GREY, "* Este negocio no te pertenece.");
	new money = InfoNegocio[id][nPrecio]+InfoNegocio[id][nDinero];
	format(string, sizeof string, "Vendiste tu negocio. Recuperaste {00CC00}$%s{FFFFFF} del negocio más {00CC00}$%s{FFFFFF} de ganancias.", diner_coma(InfoNegocio[id][nPrecio]), diner_coma(InfoNegocio[id][nDinero]));
	SendClientMessage(playerid, -1, string);
 	GivePlayerCash(playerid, money, "venta de negocio");
	if (LlavesNegocio(playerid, id) == 1)
	{
		InfoPersonaje[playerid][pNegocio1] = -1;
		guardar_int_mysql("personajes", "Negocio", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pNegocio1]);
	}
	else if (LlavesNegocio(playerid, id) == 2)
	{
		InfoPersonaje[playerid][pNegocio2] = -1;
		guardar_int_mysql("personajes", "Negocio2", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pNegocio2]);
	}
	LimpiarEmpleados(id);
	InfoNegocio[id][nEmpleo] = 0;
	InfoNegocio[id][nDinero] = 0;
	InfoNegocio[id][nVenta] = 0;
	if (InfoNegocio[id][nTipo] == 12) UpdateDineroGuardado(id);
	alm(InfoNegocio[id][nPropietario], "gobielno");
	mysql_format(DBInsanity, string, sizeof string, "UPDATE negocios SET Propietario = '%e', Venta = 0, BolosUwU = 0, Empleo = 0 WHERE ID = '%d'", InfoNegocio[id][nPropietario], InfoNegocio[id][nID_sql]);
	mysql_tquery(DBInsanity, string);
	LabelPickup_negocio(id, 1, 0, 0, 0);
	return 1;
}

CMD:nseguro(playerid)
{
	new id = 0;
	if (GetExtNegocio(playerid) != -1) id = GetExtNegocio(playerid);
	if (GetIntNegocio(playerid) != -1) id = GetIntNegocio(playerid);
	if (id == 0) return SendClientMessage(playerid, COLOR_GREY, "* No estás en la entrada/salida de ningún negocio.");
	if (LlavesNegocio(playerid, id) == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes las llaves de este negocio.");
	if (InfoNegocio[id][nTipo] == 12) return SendClientMessage(playerid, COLOR_GREY, "Las fábricas no necesitan cerrarse o abrirse.");
	if (InfoNegocio[id][nSeguro] != 0)
	{
		ameuwu(playerid, "saca su llave de negocio y lo abre");
		InfoNegocio[id][nSeguro] = 0;
	}
	else
	{
		ameuwu(playerid, "saca su llave de negocio y lo cierra");
		InfoNegocio[id][nSeguro] = 1;
	}
	//Labelupdate_negocio(id);
	guardar_int_mysql("negocios", "Seguro", InfoNegocio[id][nID_sql], InfoNegocio[id][nSeguro]);
	return 1;
}
CMD:negocioseguro(playerid) return cmd_nseguro(playerid);

CMD:negociomenu(playerid)
{
	new id = EnNegocio(playerid), gformat[520];
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ningún negocio.");
	if (LlavesNegocio(playerid, id) == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes las llaves de este negocio.");
	switch (InfoNegocio[id][nTipo])
	{
		case 9: format(gformat, sizeof gformat, "{0080C0}%s\n{EBEBEB}Dinero en caja: {00CC00}$%s\n{EBEBEB}Puerta: %s", InfoNegocio[id][nNombre], diner_coma(InfoNegocio[id][nDinero]), (InfoNegocio[id][nSeguro]) ? ("{F92B2B}Cerrada") : ("{55AD30}Abierta"));
		case 6,12,13: format(gformat, sizeof gformat, "{0080C0}%s\n{EBEBEB}Dinero guardado: {00CC00}$%s", InfoNegocio[id][nNombre], diner_coma(InfoNegocio[id][nDinero]));
		default: format(gformat, sizeof gformat, "{0080C0}%s\n{EBEBEB}Dinero en caja: {00CC00}$%s\n{EBEBEB}Puerta: %s\n{EBEBEB}Productos: {8E4BE9}%d", InfoNegocio[id][nNombre], diner_coma(InfoNegocio[id][nDinero]), (InfoNegocio[id][nSeguro]) ? ("{F92B2B}Cerrada") : ("{55AD30}Abierta"), InfoNegocio[id][nProductos]);
	}
	Dialog_Show(playerid, NegocioOpciones, DIALOG_STYLE_LIST, "Menú de negocio", gformat, "Continuar", "Salir");
	return 1;
}
CMD:negocio(playerid) return cmd_negociomenu(playerid);
CMD:menunegocio(playerid) return cmd_negociomenu(playerid);
CMD:fabrica(playerid) return cmd_negociomenu(playerid);

new CobroActual[MAX_PLAYERS];

Dialog:NegocioOpciones(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new id = EnNegocio(playerid), gformat[360];
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ningún negocio.");
	switch (InfoNegocio[id][nTipo])
	{
		case 6, 9, 12, 13:
		{
		  	switch (listitem)
			{
				case 0:
				{
					format(gformat, sizeof gformat, "{EBEBEB}Nombre actual: {0080C0}%s", InfoNegocio[id][nNombre]);
					Dialog_Show(playerid, NegocioNombre, DIALOG_STYLE_INPUT, gformat, "{EBEBEB}Escribe el nuevo nombre de tu negocio:", "Continuar", "Volver");
				}
				case 1:
				{
				    format(gformat, sizeof gformat, "Dinero: {00CC00}$%s", diner_coma(InfoNegocio[id][nDinero]));
					Dialog_Show(playerid, DineroNegocio, DIALOG_STYLE_LIST, gformat, "- Retirar dinero\n- Depositar dinero", "Continuar", "Volver");
				}
				case 2:
				{
					if (InfoNegocio[id][nSeguro] != 0)
					{
						ameuwu(playerid, "saca su llave de negocio y lo abre");
						InfoNegocio[id][nSeguro] = 0;
					}
					else
					{
						ameuwu(playerid, "saca su llave de negocio y lo cierra");
						InfoNegocio[id][nSeguro] = 1;
					}
					//Labelupdate_negocio(id);
					guardar_int_mysql("negocios", "Seguro", InfoNegocio[id][nID_sql], InfoNegocio[id][nSeguro]);
				}
			}
		}
		default:
		{
		  	switch (listitem)
			{
				case 0:
				{
					format(gformat, sizeof gformat, "{EBEBEB}Nombre actual: {0080C0}%s", InfoNegocio[id][nNombre]);
					Dialog_Show(playerid, NegocioNombre, DIALOG_STYLE_INPUT, gformat, "{EBEBEB}Escribe el nuevo nombre de tu negocio:", "Continuar", "Volver");
				}
				case 1:
				{
				    format(gformat, sizeof gformat, "Dinero: {00CC00}$%s", diner_coma(InfoNegocio[id][nDinero]));
					Dialog_Show(playerid, DineroNegocio, DIALOG_STYLE_LIST, gformat, "- Retirar dinero\n- Depositar dinero", "Continuar", "Volver");
				}
				case 2:
				{
					if (InfoNegocio[id][nSeguro] != 0)
					{
						ameuwu(playerid, "saca su llave de negocio y lo abre");
						InfoNegocio[id][nSeguro] = 0;
					}
					else
					{
						ameuwu(playerid, "saca su llave de negocio y lo cierra");
						InfoNegocio[id][nSeguro] = 1;
					}
					//Labelupdate_negocio(id);
					guardar_int_mysql("negocios", "Seguro", InfoNegocio[id][nID_sql], InfoNegocio[id][nSeguro]);
				}
				case 3:
				{
					new pagoG = neg_automatico[InfoNegocio[id][nTipo]];
					if (pagoG == 0) return SendClientMessage(playerid, COLOR_GREY, "* Tu negocio/empresa no necesita productos.");
					CobroActual[playerid] = (pagoG/2)*10;
					format(gformat, sizeof gformat, "{EBEBEB}¿Deseas pagar {F72222}$%s{EBEBEB} por 200 productos?\nPodrías generar {00CC00}$%s{EBEBEB} cada dos horas por 20 productos.", diner_coma(CobroActual[playerid]), diner_coma(pagoG));
					Dialog_Show(playerid, NegocioProductos, DIALOG_STYLE_MSGBOX, "Productos", gformat, "Ordenar", "Volver");
				}
			}
		}
	}
	return 1;
}

Dialog:NegocioProductos(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_negociomenu(playerid);
	new id = EnNegocio(playerid), query[260];
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ningún negocio.");
	new costo = CobroActual[playerid];
	if (GetPlayerCash(playerid) >= costo)
	{
		if (InfoNegocio[id][nProductos] >= 4000) return SendClientMessage(playerid, 0xEFEFEFFF, "No puedes tener más de 4,000 productos.");
		InfoNegocio[id][nProductos] += 200;
		GivePlayerCash(playerid, -costo, "compra de productos");
		guardar_int_mysql("negocios", "Productos", InfoNegocio[id][nID_sql], InfoNegocio[id][nProductos]);
		format(query, sizeof query, "Pagaste 200 productos por $%s. Ahora tienes %d productos.", diner_coma(costo), InfoNegocio[id][nProductos]);
		SendClientMessage(playerid, 0xFFEA5FFF, query);
	}
	else
	{
		format(query, sizeof query, "No tienes $%s para pagar los productos.", diner_coma(costo));
		SendClientMessage(playerid, 0xEFEFEFFF, query);
	}
	return 1;
}

Dialog:NegocioNombre(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_negociomenu(playerid);
	new id = EnNegocio(playerid), gformat[260];
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ningún negocio.");
	if (!strlen(inputtext))
	{
		SendClientMessage(playerid, COLOR_GREY, "Escribe algo.");
		format(gformat, sizeof gformat, "{EBEBEB}Nombre actual: {0080C0}%s", InfoNegocio[id][nNombre]);
		Dialog_Show(playerid, NegocioNombre, DIALOG_STYLE_INPUT, gformat, "{EBEBEB}Escribe el nuevo nombre de tu negocio:", "Continuar", "Volver");
		return 1;
	}
	if (strlen(inputtext) > 30 || strlen(inputtext) < 0)
	{
		SendClientMessage(playerid, COLOR_GREY, "No puedes poner el nombre con más de 30 carácteres.");
		format(gformat, sizeof gformat, "{EBEBEB}Nombre actual: {0080C0}%s", InfoNegocio[id][nNombre]);
		Dialog_Show(playerid, NegocioNombre, DIALOG_STYLE_INPUT, gformat, "{EBEBEB}Escribe el nuevo nombre de tu negocio:", "Continuar", "Volver");
		return 1;
	}
	alm(InfoNegocio[id][nNombre], inputtext);
	//Labelupdate_negocio(id);
	guardar_string_mysql("negocios", "Nombre", InfoNegocio[id][nID_sql], InfoNegocio[id][nNombre]);
	format(gformat, sizeof gformat, "Nombre de negocio cambiado a {0080C0}%s", InfoNegocio[id][nNombre]);
	SendClientMessage(playerid, -1, gformat);
	return 1;
}

Dialog:DineroNegocio(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_negociomenu(playerid);
	new id = EnNegocio(playerid), gformat[260];
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ningún negocio.");
	switch (listitem)
	{
		case 0:
		{
			format(gformat, sizeof gformat, "{EBEBEB}Ingresa el monto que quieres retirar de la caja.\n\nTienes {00CC00}$%s{EBEBEB} dólares.\n", diner_coma(InfoNegocio[id][nDinero]));
			Dialog_Show(playerid, DineroRNegocio, DIALOG_STYLE_INPUT, "Sacar dinero", gformat, "Continuar", "Volver");
		}
		case 1:
		{
			format(gformat, sizeof gformat, "{EBEBEB}Ingresa el monto que quieres depositar en la caja.\n\nTienes {00CC00}$%s{EBEBEB} dólares.\n", diner_coma(InfoNegocio[id][nDinero]));
			Dialog_Show(playerid, DineroDNegocio, DIALOG_STYLE_INPUT, "Guardar dinero", gformat, "Continuar", "Volver");
		}
	}
	return 1;
}

Dialog:DineroRNegocio(playerid, response, listitem, inputtext[])
{
	new id = EnNegocio(playerid), gformat[260];
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ningún negocio.");
	if (!response)
	{
		format(gformat, sizeof gformat, "Dinero: {00CC00}$%s", diner_coma(InfoNegocio[id][nDinero]));
		Dialog_Show(playerid, DineroNegocio, DIALOG_STYLE_LIST, gformat, "- Retirar dinero\n- Depositar dinero", "Continuar", "Volver");
		return 1;
	}
	new amount = strval(inputtext);
	if (!isnumeric(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo números porfavor, vuelve a intentarlo.");
	if (amount < 1) return SendClientMessage(playerid, COLOR_GREY, "* No puedes retirar menos de un dolar.");
	if (InfoNegocio[id][nDinero] >= amount)
	{
		InfoNegocio[id][nDinero] -= amount;
		GivePlayerCash(playerid, amount, "retiro de caja negocio");
		format(gformat, sizeof gformat, "Retiraste $%s dejaste en la caja $%s, ahora tienes en bolsillos $%s.", diner_coma(amount), diner_coma(InfoNegocio[id][nDinero]), diner_coma(GetPlayerCash(playerid)));
		SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat);
		guardar_int_mysql("negocios", "BolosUwU", InfoNegocio[id][nID_sql], InfoNegocio[id][nDinero]);
		if (InfoNegocio[id][nTipo] == 12) UpdateDineroGuardado(id);
		return 1;
	}
	format(gformat, sizeof gformat, "* No puedes retirar $%s, si sólo tienes en el bául $%s.", diner_coma(amount), diner_coma(InfoNegocio[id][nDinero]));
	SendClientMessage(playerid, COLOR_GREY, gformat);
	return 1;
}

Dialog:DineroDNegocio(playerid, response, listitem, inputtext[])
{
	new id = EnNegocio(playerid), gformat[260];
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ningún negocio.");
	if (!response)
	{
		format(gformat, sizeof gformat, "Dinero: {00CC00}$%s", diner_coma(InfoNegocio[id][nDinero]));
		Dialog_Show(playerid, DineroNegocio, DIALOG_STYLE_LIST, gformat, "- Retirar dinero\n- Depositar dinero", "Continuar", "Volver");
		return 1;
	}
	new amount = strval(inputtext);
	if (!isnumeric(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo números porfavor, vuelve a intentarlo.");
	if (amount < 1) return SendClientMessage(playerid, COLOR_GREY, "* No puedes depositar menos de un dolar.");
	if (GetPlayerCash(playerid) >= amount)
	{
		InfoNegocio[id][nDinero] += amount;
		GivePlayerCash(playerid, -amount, "deposito de caja negocio");
		format(gformat, sizeof gformat, "Depositaste $%s en la caja (total: $%s), ahora tienes en bolsillos $%s.", diner_coma(amount), diner_coma(InfoNegocio[id][nDinero]), diner_coma(GetPlayerCash(playerid)));
		SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat);
		guardar_int_mysql("negocios", "BolosUwU", InfoNegocio[id][nID_sql], InfoNegocio[id][nDinero]);
		if (InfoNegocio[id][nTipo] == 12) UpdateDineroGuardado(id);
		return 1;
	}
	format(gformat, sizeof gformat, "* No puedes depositar $%s, si sólo tienes en bolsillos $%s.", diner_coma(amount), diner_coma(GetPlayerCash(playerid)));
	SendClientMessage(playerid, COLOR_GREY, gformat);
	return 1;
}

CMD:desbug(playerid)
{
	if (InfoPersonaje[playerid][pSancionado] >= 1) return SendClientMessage(playerid, COLOR_GRAD2, "Información: No puedes usar este comando mientras estás en prisión.");
	SetPlayerInterior(playerid,0);
	SetPlayerVirtualWorld(playerid, 0);
	InfoPersonaje[playerid][pInterior] = 0;
	InfoPersonaje[playerid][pVirtualWorld] = 0;
	SendClientMessage(playerid, 0xFF6347FF, "Administración: {FFFFFF}Hemos desbugueado tu Interior y Virtual World, si el prolema persiste reloguea o autorepórtate.");
	return 1;
}

CMD:precios(playerid) return Dialog_Show(playerid, PreciosVIP, DIALOG_STYLE_LIST, "{00AE57}¿Interesado en comprar?",
"Info VIP {00AE57}Bronce\n\
Info VIP {00AE57}Plata\n\
Info VIP {00AE57}Oro\n\
Comprar vehículo {00AE57}VIP\n",
"Continuar", "Salir");

Dialog:PreciosVIP(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0: Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "VIP {00AE57}Bronce", "Beneficios:\n\
			- Tendrás $800,000 dólares extra en tu cuenta.\n\
			- Acceso a comando /repararpremium.\n\
			- Acceso a chat VIP \n\
			- 4 monedas para comprar vehículos VIP\n", "Cerrar", "");
		case 1: Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "VIP {00AE57}Plata", "Beneficios:\n\
			- Tendrás $1,500,000 dólares extra en tu cuenta.\n\
			- Acceso a comando /repararpremium.\n\
			- Acceso a comando /skinpremium.\n\
			- Acceso a comando /spawncasa.\n\
			- Acceso a chat VIP \n\
			- 9 monedas para comprar vehículos VIP\n", "Cerrar", "");
		case 2: Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "VIP {00AE57}Oro",	"Beneficios:\n\
			- Tendrás $2,500,000 dólares extra en tu cuenta.\n\
			- Acceso a comando /repararpremium.\n\
			- Acceso a comando /skinpremium.\n\
			- Acceso a comando /spawncasa.\n\
			- Acceso a chat VIP \n\
			- Nivel máximo de armero.\n\
			- 15 monedas para comprar vehículos VIP\n\
			- Acceso a colores para toys (NUEVO)\n\
			- Acceso a comando /ponerneon (NUEVO)\n", "Cerrar", "");
		case 3:
		{
			new string1[1028];
			strcat(string1, "ID SAMP\tTipo\tModelo\tValor monedas\n");
			strcat(string1, "403\tCamión\tLinerunner\t7\n");
			strcat(string1, "408\tCamión basura\tTrashmaster\t9\n");
			strcat(string1, "409\tLimosina\tStretch\t12\n");
			strcat(string1, "411\tSport\tInfernus\t15\n");
			strcat(string1, "415\tSport\tCheetah\t12\n");
			strcat(string1, "424\tOff Road\tBF Injection\t2\n");
			strcat(string1, "428\tBlindado\tSecuricar\t9\n");
			strcat(string1, "Siguiente página");
			Dialog_Show(playerid, BuyVehVIP, DIALOG_STYLE_TABLIST_HEADERS, "VIP {00AE57}Vehículos", string1, "Continuar", "Volver");
		}
	}
	return 1;
}

new complandomodelovip[MAX_PLAYERS];
new complandopreciovip[MAX_PLAYERS];

Dialog:BuyVehVIP(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_precios(playerid);
	new valor = 0, modelo = 0;
	switch (listitem)
	{
		case 0: valor = 7, modelo = 403;
		case 1: valor = 9, modelo = 408;
		case 2: valor = 12, modelo = 409;
		case 3: valor = 15, modelo = 411;
		case 4: valor = 12, modelo = 415;
		case 5: valor = 2, modelo = 424;
		case 6: valor = 9, modelo = 428;
		case 7:
		{
			new string2[1028];
			strcat(string2, "ID SAMP\tTipo\tModelo\tValor monedas\n");
			strcat(string2, "431\tServicios\tBus\t4\n");
			strcat(string2, "434\tEspecial\tHotknife\t5\n");
			strcat(string2, "437\tServicios\tCoach\t4\n");
			strcat(string2, "442\tServicios\tRomero\t3\n");
			strcat(string2, "443\tIndustrial\tPacker\t8\n");
			strcat(string2, "444\tOff Road\tMonster Truck\t10\n");
			strcat(string2, "451\tSport\tTurismo\t14\n");
			strcat(string2, "470\tOff Road\tPatriot\t5\n");
			strcat(string2, "487\tHelicopteros\tMaverick\t20\n");
			strcat(string2, "495\tOff Road\tSandking\t5\n");
			strcat(string2, "506\tSport\tSuper GT\t8\n");
			strcat(string2, "522\tMoto\tNRG-500\t8\n");
			strcat(string2, "541\tSport\tBullet\t10\n");
			strcat(string2, "571\tMario\tKart\t3\n");
			strcat(string2, "579\tOff Road\tHuntley\t2\n");
			strcat(string2, "580\tSaloon\tStrafford\t3\n");
			strcat(string2, "587\tSport\tEuros\t3");
			Dialog_Show(playerid, Buy2VehVIP, DIALOG_STYLE_TABLIST_HEADERS, "VIP {00AE57}Vehículos", string2, ">", "");
			return 1;
		}
	}
	complandomodelovip[playerid] = modelo;
	complandopreciovip[playerid] = valor;
	new gformat[256];
	format(gformat, sizeof gformat, "{FFFFFF}¿Estás seguro que quieres comprar este {00AE57}%s{FFFFFF} Coins: {00CC00}%d\n", GetNameVehicle(modelo), valor);
	Dialog_Show(playerid, ComplandoVehVIP, DIALOG_STYLE_MSGBOX, "{00AE57}Compra vehículo VIP", gformat, "Comprar", "Salir");
	return 1;
}

Dialog:Buy2VehVIP(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_precios(playerid);
	new valor = 0, modelo = 0;
	switch (listitem)
	{
		case 0: valor = 4, modelo = 431;
		case 1: valor = 5, modelo = 434;
		case 2: valor = 4, modelo = 437;
		case 3: valor = 3, modelo = 442;
		case 4: valor = 8, modelo = 443;
		case 5: valor = 10, modelo = 444;
		case 6: valor = 14, modelo = 451;
		case 7: valor = 5, modelo = 470;
		case 8: valor = 20, modelo = 487;
		case 9: valor = 5, modelo = 495;
		case 10: valor = 8, modelo = 506;
		case 11: valor = 8, modelo = 522;
		case 12: valor = 10, modelo = 541;
		case 13: valor = 3, modelo = 571;
		case 14: valor = 2, modelo = 579;
		case 15: valor = 3, modelo = 580;
		case 16: valor = 3, modelo = 587;
	}
	complandomodelovip[playerid] = modelo;
	complandopreciovip[playerid] = valor;
	new gformat[256];
	format(gformat, sizeof gformat, "{FFFFFF}¿Estás seguro que quieres comprar este {00AE57}%s{FFFFFF} Coins: {00CC00}%d\n", GetNameVehicle(modelo), valor);
	Dialog_Show(playerid, ComplandoVehVIP, DIALOG_STYLE_MSGBOX, "{00AE57}Compra vehículo VIP", gformat, "Comprar", "Salir");
	return 1;
}

DetectarMaxVehiculos(playerid)
{
	new carsamount = VehicleCount(playerid);
	if (InfoCuenta[playerid][jVIP] == 0 && carsamount >= 3)
	{
		SendClientMessage(playerid, COLOR_GREY, "* Usuarios normales sólo pueden tener 3 vehículos.");
		return 1;
	}
	if (InfoCuenta[playerid][jVIP] == 1 && carsamount >= 4)
	{
		SendClientMessage(playerid, COLOR_GREY, "* Usuarios VIP Bronce sólo pueden tener 4 vehículos.");
		return 1;
	}
	if (InfoCuenta[playerid][jVIP] == 2 && carsamount >= 6)
	{
		SendClientMessage(playerid, COLOR_GREY, "* Usuarios VIP Plata sólo pueden tener 6 vehículos.");
		return 1;
	}
	if (InfoCuenta[playerid][jVIP] == 3 && carsamount >= 8)
	{
		SendClientMessage(playerid, COLOR_GREY, "* Usuarios VIP Oro sólo pueden tener 8 vehículos.");
		return 1;
	}
	if (InfoCuenta[playerid][jVIP] == 4 && carsamount >= 12)
	{
		SendClientMessage(playerid, COLOR_GREY, "* Usuarios VIP Platino sólo pueden tener 12 vehículos.");
		return 1;
	}
	return 2;
}

Dialog:ComplandoVehVIP(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new gformat[256], modelo = complandomodelovip[playerid], valor = complandopreciovip[playerid];
	if (InfoCuenta[playerid][jCoinsVIP] < valor)
	{
		format(gformat, sizeof gformat, "El costo del modelo {00AE57}%d{FFFFFF} es {00AE57}%d coins VIP{FFFFFF}, los cuales no tienes!", modelo, valor);
		SendClientMessage(playerid, -1, gformat);
		return 1;
	}
	if (DetectarMaxVehiculos(playerid) == 1) return 1;
	InfoCuenta[playerid][jCoinsVIP] -= valor;
	guardar_int_mysql("cuentas", "CoinsVIP", InfoCuenta[playerid][jID], InfoCuenta[playerid][jCoinsVIP]);
	new Float: X, Float:Y, Float: Z, Float: Angle, color1 = random(240), color2 = random(240);
	GetPlayerPos(playerid, X, Y, Z);
	GetPlayerFacingAngle(playerid, Angle);
	crear_vehiculo(playerid, modelo, X, Y, Z, Angle, GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid), color1, color2, 0, 5, 0, -1);
	format(gformat, sizeof gformat, "Felicidades por tu nuevo vehículo, gastaste %d coins vip.", valor);
	SendClientMessage(playerid, COLOR_YELLOW, gformat);
	return 1;
}

CMD:iractor(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new id;
	if (sscanf(params, "d", id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /iractor (ActorID)");
	if (id < 1 || id > totalactores) return SendClientMessage(playerid, COLOR_GREY, "Actor no encontrado. ID erronéo.");
	if (InfoActor[id][aPosX] == 0.0) return SendClientMessage(playerid, COLOR_GREY, "Actor no creado, créalo antes.");
	SetPosEx(playerid, InfoActor[id][aPosX], InfoActor[id][aPosY], InfoActor[id][aPosZ], InfoActor[id][aPosR], InfoActor[id][aInterior], InfoActor[id][aVirtualWorld], 1);
	GameTextForPlayer(playerid, "~w~Teletransportado", 5000, 1);
	return 1;
}

CMD:crearactor(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new skin, nombre[24], gformat[210];
	if (sscanf(params, "ds[24]", skin, nombre)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /crearactor (SkinID) (Nombre)");
	if (IsValidSkin(skin) == 0) return SendClientMessage(playerid, COLOR_GREY, "Debes de escoger una id de skin entre 1 y 311.");
	if (strlen(nombre) > 24 || strlen(nombre) < 0) { SendClientMessage(playerid, -1, "Sólo puedes escribir menos de 24 carácteres."); return 1; }
	Loop(id, MAX_ACTORES, 1) if (InfoActor[id][aPosX] == 0)
	{
		GetPlayerPos(playerid, InfoActor[id][aPosX], InfoActor[id][aPosY], InfoActor[id][aPosZ]);
		GetPlayerFacingAngle(playerid, InfoActor[id][aPosR]);
		InfoActor[id][aVirtualWorld] = GetPlayerVirtualWorld(playerid);
		InfoActor[id][aInterior] = GetPlayerInterior(playerid);
		InfoActor[id][aSkin] = skin;
		alm(InfoActor[id][aNombre], nombre);
		format(gformat, sizeof gformat, "Actor %d - Nombre: %s - Skin: %d.", id, nombre, skin);
		SendClientMessage(playerid, 0x90C3D4FF, gformat);
		Dynamic_actor(id);
		new query[1500];
		//opción idsql ya creada.
		if (InfoActor[id][aID_sql] != 0)
		{
			mysql_format(DBInsanity, query, sizeof query, "UPDATE actores SET Nombre = '%e', Skin = '%d', PosX = '%f', PosY = '%f', PosZ = '%f', PosR = '%f', Interior = '%d', VirtualWorld = '%d' WHERE ID = '%d'",
			InfoActor[id][aNombre],
			InfoActor[id][aSkin],
			InfoActor[id][aPosX],
			InfoActor[id][aPosY],
			InfoActor[id][aPosZ],
			InfoActor[id][aPosR],
			InfoActor[id][aInterior],
			InfoActor[id][aVirtualWorld],
			InfoActor[id][aID_sql]);
			mysql_tquery(DBInsanity, query);
			id = MAX_ACTORES;
			return 1;
		}
		mysql_format(DBInsanity, query, sizeof query, "INSERT INTO actores (Nombre, Skin, PosX, PosY, PosZ, PosR, Interior, VirtualWorld) VALUES ('%e', '%d', '%f',  '%f', '%f', '%f', '%d', '%d')",
		InfoActor[id][aNombre],
		InfoActor[id][aSkin],
		InfoActor[id][aPosX],
		InfoActor[id][aPosY],
		InfoActor[id][aPosZ],
		InfoActor[id][aPosR],
		InfoActor[id][aInterior],
		InfoActor[id][aVirtualWorld]);
		mysql_tquery(DBInsanity, query, "OnActorCreate", "i", id);
		id = MAX_ACTORES;
		return 1;
	}
	SendClientMessage(playerid, COLOR_RED, "Se alcanzó el máximo de actores (100)");
	return 1;
}

forward OnActorCreate(id);
public OnActorCreate(id)
{
	InfoActor[id][aID_sql] = cache_insert_id();
	cache_unset_active();
	totalactores++;
    return 1;
}

CMD:borraractor(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	new id, gformat[235], query[1028];
	if (sscanf(params, "d", id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /borraractor (ActorID)");
	if (id < 1 || id > totalactores) return SendClientMessage(playerid, COLOR_GREY, "Actor no encontrado.");
	if (InfoActor[id][aPosX] == 0.0) return SendClientMessage(playerid, COLOR_GREY, "Ese actor no existe.");

	DestroyDynamic3DTextLabel(InfoActor[id][aLabel]);
	DestroyDynamicActor(InfoActor[id][aID_ig]);

	alm(InfoActor[id][aNombre], "ninguno");
	InfoActor[id][aSkin] = -1;
	InfoActor[id][aPosX] = 0.0;
	InfoActor[id][aPosY] = 0.0;
	InfoActor[id][aPosZ] = 0.0;
	InfoActor[id][aPosR] = 0.0;
	InfoActor[id][aInterior] = 0;
	InfoActor[id][aVirtualWorld] = 0;
	InfoActor[id][aAnimacion] = 0;

	mysql_format(DBInsanity, query, sizeof query, "UPDATE actores SET Nombre = '%e', Skin = 0, PosX = 0.0, PosY = 0.0, PosZ = 0.0, PosR = 0.0, Interior = 0, VirtualWorld = 0, Animacion = 0 WHERE ID = '%d'", InfoActor[id][aNombre], InfoActor[id][aID_sql]);
	mysql_tquery(DBInsanity, query);
	//mensaje
	format(gformat, sizeof gformat, "Borraste el acctor ID %d, SQL vacía: %d", id, InfoActor[id][aID_sql]);
	SendClientMessage(playerid, -1, gformat);
	return 1;
}

CMD:skinactor(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	new id, skin, gformat[235];
	if (sscanf(params, "dd", id, skin)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /skinactor (ActorID) (SkinID)");
	if (id < 1 || id > totalactores) return SendClientMessage(playerid, COLOR_GREY, "Actor no encontrado.");
	if (InfoActor[id][aPosX] == 0.0) return SendClientMessage(playerid, COLOR_GREY, "Ese actor no existe.");
	if (IsValidSkin(skin) == 0) return SendClientMessage(playerid, COLOR_GREY, "Debes de escoger una id de skin entre 1 y 311.");
	InfoActor[id][aSkin] = skin;
	Dynamic_actor(id);
	guardar_int_mysql("actores", "Skin", InfoActor[id][aID_sql], InfoActor[id][aSkin]);
	format(gformat, sizeof gformat, "Actor %d - Skin: %d.", id, skin);
	SendClientMessage(playerid, 0x90C3D4FF, gformat);
	Streamer_Update(playerid);
	return 1;
}

CMD:animactor(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	new id, anim, gformat[235];
	if (sscanf(params, "dd", id, anim)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /animactor (ActorID) (AnimaciónID)");
	if (id < 1 || id > totalactores) return SendClientMessage(playerid, COLOR_GREY, "Actor no encontrado.");
	if (InfoActor[id][aPosX] == 0.0) return SendClientMessage(playerid, COLOR_GREY, "Ese actor no existe.");
	if (anim < 0 || anim > 10) return SendClientMessage(playerid, COLOR_GREY, "Anim erronéa: 0 - 10 Animación | ID 0 deja el Actor en estado Off.");
	InfoActor[id][aAnimacion] = anim;
	if (anim == 0) ClearDynamicActorAnimations(InfoActor[id][aID_ig]);
	else Animacion_actor(id);
	guardar_int_mysql("actores", "Animacion", InfoActor[id][aID_sql], InfoActor[id][aAnimacion]);
	format(gformat, sizeof gformat, "Actor %d - Animación: %d.", id, anim);
	SendClientMessage(playerid, 0x90C3D4FF, gformat);
	Streamer_Update(playerid);
	return 1;
}

CMD:nombreactor(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	new id, doorname[24], gformat[235];
	if (sscanf(params, "ds[24]", id, doorname)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /nombreactor (ActorID) (Nombre)");
	if (id < 1 || id > totalactores) return SendClientMessage(playerid, COLOR_GREY, "Actor no encontrado.");
	if (InfoActor[id][aPosX] == 0.0) return SendClientMessage(playerid, COLOR_GREY, "Ese actor no existe.");
	if (strlen(doorname) > 23 || strlen(doorname) < 0) { SendClientMessage(playerid, -1, "Sólo puedes escribir menos de 24 carácteres."); return 1; }
	alm(InfoActor[id][aNombre], doorname);
	Dynamic_actor(id);
	format(gformat, sizeof gformat, "Actor %d - Nombre: %s.", id, doorname);
	SendClientMessage(playerid, 0x90C3D4FF, gformat);
	guardar_string_mysql("actores", "Nombre", InfoActor[id][aID_sql], InfoActor[id][aNombre]);
	Streamer_Update(playerid);
	return 1;
}

CMD:adminduty(playerid)
{
	new string[256];
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (papilla[playerid] == 0)
	{
		papilla[playerid] = 1;
		if (InfoPersonaje[playerid][pSexo] == 1) SetPlayerSkin(playerid, 217);
		else SetPlayerSkin(playerid, 211);
		AdminDuty[playerid] = 1;
		InfoPersonaje[playerid][pTogTelefono] = 0;
		SetPlayerColor(playerid, 0x00AE5700);
		format(string, sizeof string, "%s {6DDC76}%s(%d){FFFFFF} ahora está On-Duty.", GetAdminName(playerid), InfoCuenta[playerid][jApodo], playerid);
	}
	else
	{
		InfoPersonaje[playerid][pTogTelefono] = 1;
		SetPlayerColor(playerid, 0xFFFFFF00);
		if (InfoPersonaje[playerid][pJobSkin] != 0) SetPlayerSkin(playerid, InfoPersonaje[playerid][pJobSkin]);
		else SetPlayerSkin(playerid, InfoPersonaje[playerid][pSkin]);
		papilla[playerid]= 0;
		format(string, sizeof string, "%s {6DDC76}%s(%d){FFFFFF} ahora está Off-Duty.", GetAdminName(playerid), InfoCuenta[playerid][jApodo], playerid);
	}
	SendAdminMessage(0xFFFFFFFF, string);
	return 1;
}
CMD:aduty(playerid) return cmd_adminduty(playerid);
CMD:staffon(playerid) return cmd_adminduty(playerid);
CMD:onstaff(playerid) return cmd_adminduty(playerid);


CMD:sentarse(playerid, params[])
{
	new anim;
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	if (sscanf(params, "d", anim)) return SendClientMessage(playerid,COLOR_WHITE,"Utiliza: /sentarse (1-6)");
	switch (anim)
	{
		case 1: LoopingAnim(playerid,"BEACH","bather",4.0,1,0,0,0,0);
		case 2: LoopingAnim(playerid,"BEACH","Lay_Bac_Loop",4.0,1,0,0,0,0);
		case 3: LoopingAnim(playerid,"BEACH","ParkSit_W_loop",4.0,1,0,0,0,0);
		case 4: LoopingAnim(playerid,"BEACH","SitnWait_loop_W",4.0,1,0,0,0,0);
		case 5: LoopingAnim(playerid,"BEACH","SitnWait_loop_W",4.0,1,0,0,0,0);
		case 6: LoopingAnim(playerid,"BEACH", "ParkSit_M_loop", 4.0,1,0,0,0,0);
		default: return SendClientMessage(playerid,COLOR_WHITE,"Utiliza: /sentarse (1-6)");
	}
	return 1;
}

CMD:orinar(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	SetPlayerSpecialAction(playerid, 68);
	return 1;
}

CMD:dj(playerid, params[])
{
	new anim;
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	if (sscanf(params, "d", anim)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /dj [1-4]");
	switch (anim)
	{
		case 1: LoopingAnim(playerid,"SCRATCHING","scdldlp",4.0,1,0,0,0,0);
		case 2: LoopingAnim(playerid,"SCRATCHING","scdlulp",4.0,1,0,0,0,0);
		case 3: LoopingAnim(playerid,"SCRATCHING","scdrdlp",4.0,1,0,0,0,0);
		case 4: LoopingAnim(playerid,"SCRATCHING","scdrulp",4.0,1,0,0,0,0);
		default: return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /dj [1-4]");
	}
	return 1;
}

CMD:sinaliento(playerid, params[])
{
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	new anim;
	if (sscanf(params, "d", anim)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /sinaliento (1-2)");
	switch (anim)
	{
		case 1: LoopingAnim(playerid,"PED","IDLE_tired",4.0,1,0,0,0,0);
		case 2: LoopingAnim(playerid,"FAT","IDLE_tired",4.0,1,0,0,0,0);
		default: return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /sinaliento (1-2)");
	}
	SetPVarInt(playerid, "PlayerCuffed", 2);
	return 1;
}

CMD:poli(playerid, params[])
{
	new anim;
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	if (sscanf(params, "d", anim)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /poli (1-2)");
	switch (anim)
	{
		case 1:LoopingAnim(playerid,"POLICE","CopTraf_Come",4.0,0,0,0,0,0);
		case 2:LoopingAnim(playerid,"POLICE","CopTraf_Stop",4.0,0,0,0,0,0);
		default: return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /poli (1-2)");
	}
	return 1;
}

CMD:asiento(playerid, params[])
{
	new anim;
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	if (sscanf(params, "d", anim)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /asiento (1-7)");
	if (anim < 1 || anim > 7) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /asiento (1-7)");
	switch (anim)
	{
		case 1: LoopingAnim(playerid,"Attractors","Stepsit_in",4.0,0,0,0,1,0);// Not looping
		case 2: LoopingAnim(playerid,"CRIB","PED_Console_Loop",4.0,1,0,0,0,0);
		case 3: LoopingAnim(playerid,"INT_HOUSE","LOU_In",4.0,0,0,0,1,0); // Not looping
		case 4: LoopingAnim(playerid,"MISC","SEAT_LR",4.0,1,0,0,0,0);
		case 5: LoopingAnim(playerid,"MISC","Seat_talk_01",4.0,1,0,0,0,0);
		case 6: LoopingAnim(playerid,"MISC","Seat_talk_02",4.0,1,0,0,0,0);
		case 7: LoopingAnim(playerid,"ped","SEAT_down",4.0,0,0,0,1,0); // Not looping
	}
	return 1;
}

CMD:bailar(playerid, params[])
{
	new dancestyle;
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	if (sscanf(params, "d", dancestyle)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /bailar (1-3)");
	switch (dancestyle)
	{
		case 1: SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DANCE1);
		case 2: SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DANCE2);
		case 3: SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DANCE3);
		case 4: SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DANCE4);
	}
	return 1;
}

CMD:cruzar(playerid, params[])
{
	new anim;
	if (sscanf(params, "d", anim)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /cruzar [1-5]");
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	switch (anim)
	{
		case 1: LoopingAnim(playerid, "COP_AMBIENT", "Coplook_loop", 4.0, 0, 1, 1, 1, -1);
		case 2: LoopingAnim(playerid, "DEALER", "DEALER_IDLE", 4.0, 0, 1, 1, 1, -1);
		case 3: LoopingAnim(playerid, "DEALER", "DEALER_IDLE_01", 4.0, 0, 1, 1, 1, -1);
		case 4: LoopingAnim(playerid,"GRAVEYARD","mrnM_loop",4.0,1,0,0,0,0);
		case 5: LoopingAnim(playerid,"GRAVEYARD","prst_loopa",4.0,1,0,0,0,0);
		default: return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /cruzar (1-5)");
	}
	return 1;
}

CMD:jiggy(playerid, params[])
{
	new anim;
	if (sscanf(params, "d", anim)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /jiggy (1-10)");
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	switch (anim)
	{
		case 1: LoopingAnim(playerid,"DANCING","DAN_Down_A",4.0,1,0,0,0,0);
		case 2: LoopingAnim(playerid,"DANCING","DAN_Left_A",4.0,1,0,0,0,0);
		case 3: LoopingAnim(playerid,"DANCING","DAN_Loop_A",4.0,1,0,0,0,0);
		case 4: LoopingAnim(playerid,"DANCING","DAN_Right_A",4.0,1,0,0,0,0);
		case 5: LoopingAnim(playerid,"DANCING","DAN_Up_A",4.0,1,0,0,0,0);
		case 6: LoopingAnim(playerid,"DANCING","dnce_M_a",4.0,1,0,0,0,0);
		case 7: LoopingAnim(playerid,"DANCING","dnce_M_b",4.0,1,0,0,0,0);
		case 8: LoopingAnim(playerid,"DANCING","dnce_M_c",4.0,1,0,0,0,0);
		case 9: LoopingAnim(playerid,"DANCING","dnce_M_c",4.0,1,0,0,0,0);
		case 10: LoopingAnim(playerid,"DANCING","dnce_M_d",4.0,1,0,0,0,0);
		default: return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /jiggy (1-10)");
	}
	return 1;
}

CMD:ped(playerid, params[])
{
	new anim;
	if (sscanf(params, "d", anim)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /ped (1-26)");
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	switch (anim)
	{
		case 1: LoopingAnim(playerid,"PED","JOG_femaleA",4.0,1,1,1,1,1);
		case 2: LoopingAnim(playerid,"PED","JOG_maleA",4.0,1,1,1,1,1);
		case 3: LoopingAnim(playerid,"PED","WOMAN_walkfatold",4.0,1,1,1,1,1);
		case 4: LoopingAnim(playerid,"PED","run_fat",4.0,1,1,1,1,1);
		case 5: LoopingAnim(playerid,"PED","run_fatold",4.0,1,1,1,1,1);
		case 6: LoopingAnim(playerid,"PED","run_old",4.0,1,1,1,1,1);
		case 7: LoopingAnim(playerid,"PED","Run_Wuzi",4.0,1,1,1,1,1);
		case 8: LoopingAnim(playerid,"PED","swat_run",4.0,1,1,1,1,1);
		case 9: LoopingAnim(playerid,"PED","WALK_fat",4.0,1,1,1,1,1);
		case 10: LoopingAnim(playerid,"PED","WALK_fatold",4.0,1,1,1,1,1);
		case 11: LoopingAnim(playerid,"PED","WALK_gang1",4.0,1,1,1,1,1);
		case 12: LoopingAnim(playerid,"PED","WALK_gang2",4.0,1,1,1,1,1);
		case 13: LoopingAnim(playerid,"PED","WALK_old",4.0,1,1,1,1,1);
		case 14: LoopingAnim(playerid,"PED","WALK_shuffle",4.0,1,1,1,1,1);
		case 15: LoopingAnim(playerid,"PED","woman_run",4.0,1,1,1,1,1);
		case 16: LoopingAnim(playerid,"PED","WOMAN_runbusy",4.0,1,1,1,1,1);
		case 17: LoopingAnim(playerid,"PED","WOMAN_runfatold",4.0,1,1,1,1,1);
		case 18: LoopingAnim(playerid,"PED","woman_runpanic",4.0,1,1,1,1,1);
		case 19: LoopingAnim(playerid,"PED","WOMAN_runsexy",4.0,1,1,1,1,1);
		case 20: LoopingAnim(playerid,"PED","WOMAN_walkbusy",4.0,1,1,1,1,1);
		case 21: LoopingAnim(playerid,"PED","WOMAN_walkfatold",4.0,1,1,1,1,1);
		case 22: LoopingAnim(playerid,"PED","WOMAN_walknorm",4.0,1,1,1,1,1);
		case 23: LoopingAnim(playerid,"PED","WOMAN_walkold",4.0,1,1,1,1,1);
		case 24: LoopingAnim(playerid,"PED","WOMAN_walkpro",4.0,1,1,1,1,1);
		case 25: LoopingAnim(playerid,"PED","WOMAN_walksexy",4.0,1,1,1,1,1);
		case 26: LoopingAnim(playerid,"PED","WOMAN_walkshop",4.0,1,1,1,1,1);
		default: return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /ped (1-26)");
	}
	return 1;
}

CMD:rap(playerid, params[])
{
	new rapstyle;
	if (sscanf(params, "d", rapstyle)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /rap (1-3)");
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	switch (rapstyle)
	{
		case 1: LoopingAnim(playerid,"RAPPING","RAP_A_Loop",4.0,1,1,1,1,0);
		case 2: LoopingAnim(playerid,"RAPPING","RAP_B_Loop",4.0,1,1,1,1,0);
		case 3: LoopingAnim(playerid,"RAPPING","RAP_C_Loop",4.0,1,1,1,1,0);
		default: return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /rap [1-3]");
	}
	return 1;
}

CMD:gesto(playerid, params[])
{
	new gesto;
	if (sscanf(params, "d", gesto)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /gesto (1-15)");
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	switch (gesto)
	{
		case 1: LoopingAnim(playerid,"GHANDS","gsign1",4.0,0,0,0,0,0);
		case 2: LoopingAnim(playerid,"GHANDS","gsign1LH",4.0,0,0,0,0,0);
		case 3: LoopingAnim(playerid,"GHANDS","gsign2",4.0,0,0,0,0,0);
		case 4: LoopingAnim(playerid,"GHANDS","gsign2LH",4.0,0,0,0,0,0);
		case 5: LoopingAnim(playerid,"GHANDS","gsign3",4.0,0,0,0,0,0);
		case 6: LoopingAnim(playerid,"GHANDS","gsign3LH",4.0,0,0,0,0,0);
		case 7: LoopingAnim(playerid,"GHANDS","gsign4",4.0,0,0,0,0,0);
		case 8: LoopingAnim(playerid,"GHANDS","gsign4LH",4.0,0,0,0,0,0);
		case 9: LoopingAnim(playerid,"GHANDS","gsign5",4.0,0,0,0,0,0);
		case 10: LoopingAnim(playerid,"GHANDS","gsign5",4.0,0,0,0,0,0);
		case 11: LoopingAnim(playerid,"GHANDS","gsign5LH",4.0,0,0,0,0,0);
		case 12: LoopingAnim(playerid,"GANGS","Invite_No",4.0,0,0,0,0,0);
		case 13: LoopingAnim(playerid,"GANGS","Invite_Yes",4.0,0,0,0,0,0);
		case 14: LoopingAnim(playerid,"GANGS","prtial_gngtlkD",4.0,0,0,0,0,0);
		case 15: LoopingAnim(playerid,"GANGS","smkcig_prtl",4.0,0,0,0,0,0);
		default: return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /gesto (1-15)");
	}
	return 1;
}

CMD:sexo(playerid, params[])
{
	new sexstyle;
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora !");
	if (sscanf(params, "d", sexstyle)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /sexo (1-8)");
	switch (sexstyle)
	{
		case 1: LoopingAnim(playerid,"SNM","SPANKING_IDLEW",4.1,0,1,1,1,0);
		case 2: LoopingAnim(playerid,"SNM","SPANKING_IDLEP",4.1,0,1,1,1,0);
		case 3: LoopingAnim(playerid,"SNM","SPANKINGW",4.1,0,1,1,1,0);
		case 4: LoopingAnim(playerid,"SNM","SPANKINGP",4.1,0,1,1,1,0);
		case 5: LoopingAnim(playerid,"SNM","SPANKEDW",4.1,0,1,1,1,0);
		case 6: LoopingAnim(playerid,"SNM","SPANKEDP",4.1,0,1,1,1,0);
		case 7: LoopingAnim(playerid,"SNM","SPANKING_ENDW",4.1,0,1,1,1,0);
		case 8: LoopingAnim(playerid,"SNM","SPANKING_ENDP",4.1,0,1,1,1,0);
		default: return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /sexo (1-8)");
	}
	return 1;
}

CMD:apuntar(playerid, params[])
{
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora !");
	if (sscanf(params, "i", params[0]))   return SendClientMessage(playerid, COLOR_GREEN, "Utilize: /apuntar [1-3]");
	if (params[0] < 1 || params[0] > 3)   return SendClientMessage(playerid, COLOR_GREEN, "Utilize: /apuntar [1-3]");
	switch (params[0])
	{
		case 1: LoopingAnim(playerid,"SHOP","ROB_Loop_Threat",4.1,1,0,0,1,1);
		case 2: LoopingAnim(playerid,"ped", "ARRESTgun", 4.0,0,1,1,1,1);
		case 3: LoopingAnim(playerid,"SHOP","SHP_Gun_Aim",4.1,1,0,0,1,1);
	}
	return 1;
}

CMD:apoyarse(playerid, params[])
{
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora !");
	if (sscanf(params, "i", params[0]))   return SendClientMessage(playerid, COLOR_GREEN, "Utilize: /apoyarse [1-2]");
	if (params[0] < 1 || params[0] > 2)   return SendClientMessage(playerid, COLOR_GREEN, "Utilize: /apoyarse [1-2]");
	switch(params[0])
	{
		case 1: LoopingAnim(playerid,"GANGS","leanIDLE",4.0,1,0,1,1,1);
		case 2: LoopingAnim(playerid,"MISC","Plyrlean_loop",4.0,1,1,1,1,1);
	}
	return 1;
}

CMD:levantarse(playerid) return cmd_depie(playerid);

CMD:dedo(playerid)
{
	LoopingAnim(playerid,"RIOT","RIOT_FUKU",4.0,0,0,0,0,0);
	return 1;
}

CMD:correr(playerid, params[])
{
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora !");
	if (sscanf(params, "i", params[0]))   return SendClientMessage(playerid, COLOR_GREEN, "Utilize: /correr [1-6]");
	if (params[0] < 1 || params[0] > 6)   return SendClientMessage(playerid, COLOR_GREEN, "Utilize: /correr [1-6]");
	switch (params[0])
	{
		case 1: LoopingAnim(playerid,"PED","run_civi",4.1,1,1,1,1,1);
		case 2: LoopingAnim(playerid,"PED","run_gang1",4.1,1,1,1,1,1);
		case 3: LoopingAnim(playerid,"PED","run_old",4.1,1,1,1,1,1);
		case 4: LoopingAnim(playerid,"PED","run_fat",4.1,1,1,1,1,1);
		case 5: LoopingAnim(playerid,"PED","woman_run",4.1,1,1,1,1,1);
		case 6: LoopingAnim(playerid,"PED","WOMAN_runsexy",4.1,1,1,1,1,1);
	}
	return 1;
}

CMD:mecanico(playerid, params[])
{
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora !");
	if (sscanf(params, "i", params[0]))   return SendClientMessage(playerid, COLOR_GREEN, "Utilize: /mecanico [1-2]");
	if (params[0] < 1 || params[0] > 2)   return SendClientMessage(playerid, COLOR_GREEN, "Utilize: /mecanico [1-2]");
	switch (params[0])
	{
		case 1: LoopingAnim(playerid,"CAR","Fixn_Car_Loop",4.1,1,0,0,1,1);
		case 2: LoopingAnim(playerid,"CAR","Fixn_Car_Out",4.1,0,0,0,1,1);
	}
	return 1;
}

CMD:chora(playerid)
{
	LoopingAnim(playerid, "COP_AMBIENT", "Coplook_watch",4.0,0,0,0,0,0);
	return 1;
}

CMD:relax(playerid)
{
	LoopingAnim(playerid, "CRACK", "crckidle1",4.0,0,1,1,1,-1);
	return 1;
}

CMD:saludo2(playerid)
{
	LoopingAnim(playerid,"ON_LOOKERS","Pointup_loop",4.0,0,0,0,0,0);
	return 1;
}

CMD:llorar(playerid)
{
	LoopingAnim(playerid,"GRAVEYARD","mrnF_loop",4.0,1,0,0,0,0);
	return 1;
}

CMD:saludo(playerid)
{
	ApplyAnimation(playerid,"WUZI","Wuzi_Greet_Wuzi",4.0,0,0,0,0,0);
	return 1;
}

CMD:quieto(playerid)
{
	LoopingAnim(playerid,"WUZI","Wuzi_stand_loop", 4.0, 1, 0, 0, 0, 0);
	return 1;
}

CMD:enganche(playerid)
{
	LoopingAnim(playerid,"MISC","Hiker_Pose", 4.0, 1, 0, 0, 0, 0);
	return 1;
}

CMD:cpr(playerid)
{
	LoopingAnim(playerid,"MEDIC","CPR",4.0,0,0,0,0,0);
	return 1;
}

CMD:borracho(playerid)
{
	LoopingAnim(playerid,"PED","WALK_DRUNK",4.1,1,1,1,1,1);
	return 1;
}

CMD:arobar(playerid)
{
	LoopingAnim(playerid,"ped", "ARRESTgun", 4.0, 0, 1, 1, 1, 0);
	return 1;
}

CMD:reir(playerid)
{
	ApplyAnimation(playerid, "RAPPING", "Laugh_01", 4.0, 0, 0, 0, 0, 0);
	return 1;
}

CMD:amenazar(playerid)
{
	LoopingAnim(playerid, "SHOP", "ROB_Loop_Threat", 4.0, 1, 0, 0, 0, 0);
	return 1;
}

CMD:depie(playerid)
{
	ApplyAnimation(playerid, "ped", "SEAT_up", 4.000000, 0, 0, 1, 0, 0);
	return 1;
}

CMD:hablando(playerid)
{
	LoopingAnim(playerid,"PED","IDLE_CHAT",4.0,1,0,0,1,1);
	return 1;
}

CMD:agonizar(playerid)
{
	ApplyAnimation(playerid, "WUZI", "CS_Dead_Guy", 4.0, 0, 0, 0, 1, 0);
	SendClientMessage(playerid, COLOR_WHITE, "Usa /depie o /levantarse para finalizar la animación.");
	return 1;
}

CMD:rodar(playerid)
{
	ApplyAnimation(playerid,"MD_CHASE","MD_HANG_Lnd_Roll",4.1,0,1,1,1,0);
	SendClientMessage(playerid, COLOR_WHITE, "Usa /depie o /levantarse para finalizar la animación.");
	return 1;
}

CMD:dormir(playerid)
{
	ApplyAnimation(playerid,"INT_HOUSE","BED_In_R",4.1,0,0,0,1,0);
	SendClientMessage(playerid, COLOR_WHITE, "Usa /depie o /levantarse para finalizar la animación.");
	return 1;
}

CMD:herido(playerid)
{
	ApplyAnimation(playerid, "SWEET", "LaFin_Sweet", 4.0, 0, 1, 1, 1, 0);
	SendClientMessage(playerid, COLOR_WHITE, "Usa /depie o /levantarse para finalizar la animación.");
	return 1;
}

CMD:agredido(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	LoopingAnim(playerid, "POLICE", "crm_drgbst_01", 4.0, 0, 0, 0, 1, 0);
	return 1;
}

CMD:gritar(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	LoopingAnim(playerid,"RIOT","RIOT_shout",4.0,1,1,1,1,1);
	return 1;
}

CMD:animar(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	LoopingAnim(playerid,"RIOT","RIOT_CHANT",4.0,1,1,1,1,1);
	return 1;
}

CMD:paja(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	LoopingAnim(playerid, "PAULNMAC", "wank_loop", 4.0, 1, 0, 0, 1, 0);
	return 1;
}

CMD:esconderse(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	LoopingAnim(playerid, "ped", "cower", 3.0, 1, 0, 0, 0, 0);
	SetPVarInt(playerid, "PlayerCuffed", 2);
	return 1;
}

CMD:rendirse(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	if (PlayerDrunk[playerid] > 9) return SendClientMessage(playerid, COLOR_GREY, "No puedes usar este comando ahora.");
	if (GetPVarInt(playerid, "IsFrozen") == 1) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto porque estás congelado.");
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_HANDSUP);
	return 1;
}

CMD:vomitar(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	LoopingAnim(playerid, "FOOD", "EAT_Vomit_P", 3.0, 0, 0, 0, 0, 0);
	return 1;
}

CMD:crack(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	LoopingAnim(playerid, "CRACK", "crckdeth2", 4.0, 1, 0, 0, 0, 0);
	SetPVarInt(playerid, "PlayerCuffed", 2);
	return 1;
}

CMD:fokear(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	LoopingAnim(playerid,"PED","fucku",4.0,0,0,0,0,0);
	return 1;
}

CMD:taichi(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	LoopingAnim(playerid,"PARK","Tai_Chi_Loop", 4.0, 1, 0, 0, 0, 0);
	return 1;
}

CMD:beso(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") != 0 || IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	LoopingAnim(playerid,"KISSING","Playa_Kiss_01",4.0,0,0,0,0,0);
	return 1;
}

CMD:w(playerid, params[])
{
	if (sscanf(params, "us[128]", params[0], params[1])) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /w (PlayerID) (Texto)");
	if (!IsPlayerConnectedEx(params[0])) return SendClientMessage(playerid, COLOR_GREY, "El jugador seleccionado no se encuentra conectado.");
	if (HidePM[params[0]] == 1) return SendClientMessage(playerid, COLOR_WHITE, "El usuario a quien intentas mensajear tiene los MP bloqueados.");
	new string[128];
	format(string, sizeof string, "(( Mensaje Priv. de %s (%d): %s ))", NombreOriginal(playerid), playerid, params[1]);
	SendSplitMessage(params[0], 0xE9BC0AFF, string);
	format(string, sizeof string, "(( Mensaje Priv. a %s (%d): %s ))", NombreOriginal(params[0]), params[0] ,params[1]);
	SendSplitMessage(playerid,  0xE9BC0AFF, string);
	Loop(playeridX, MAX_PLAYERS, 0) if (See_MP[playeridX] == 0 && InfoCuenta[playeridX][jAdmin] >= 1)
	{
		format(string, sizeof string, "(( Priv. de %s (%d) a %s (%d): %s ))", NombreOriginal(playerid), playerid, NombreOriginal(params[0]), params[0], params[1]);
		SendSplitMessage(playeridX, 0xFF8000FF, string);
	}
	return 1;
}
CMD:mp(playerid, params[]) return cmd_w(playerid, params);

CMD:apelear(playerid)
{
	if (!IsPlayerInRangeOfPoint(playerid, 10, 767.6719, 13.6320, 1000.7010)) return SendClientMessage(playerid, COLOR_WHITE, "No estas en el GYM.");
	Dialog_Show(playerid, FSTYLE_DIALOG, DIALOG_STYLE_LIST, "{00AE57}Que le gustaria aprender?", "Me gustaría aprender Knee Head\t 1500$\nMe gustaría aprender Kung Fu\t 1000$\nMe gustaría aprender Boxeo\t 800$\nMe gustaría aprender pelea callejera\t 800$\nMe gustaría aprender pelea de codos\t 800$", "Sí", "No");
	return 1;
}

Dialog:FSTYLE_DIALOG(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0:
		{
			if (CheckMoney(playerid, 1500) == 0) return 1;
			GivePlayerCash(playerid, -1500, "estilo de pelea (1)");
			InfoPersonaje[playerid][pEstiloPelea] = 7;
			SetPlayerFightingStyle (playerid, FIGHT_STYLE_KNEEHEAD);
			SendClientMessage(playerid, COLOR_WHITE, "Felicidades! Has aprendido Knee Head.");
			ApplyAnimation(playerid,"benchpress", "gym_bp_celebrate",4.0,1,1,1,1,500);
		}
		case 1:
		{
			if (CheckMoney(playerid, 1000) == 0) return 1;
			GivePlayerCash(playerid, -1000, "estilo de pelea (2)");
			InfoPersonaje[playerid][pEstiloPelea] = 6;
			SetPlayerFightingStyle (playerid, FIGHT_STYLE_KUNGFU);
			SendClientMessage(playerid, COLOR_WHITE, "Felicidades! Has aprendido Kung Fu.");
			ApplyAnimation(playerid,"benchpress", "gym_bp_celebrate",4.0,1,1,1,1,500);
		}
		case 2:
		{
			if (CheckMoney(playerid, 800) == 0) return 1;
			GivePlayerCash(playerid, -800, "estilo de pelea (3)");
			InfoPersonaje[playerid][pEstiloPelea] = 5;
			SetPlayerFightingStyle (playerid, FIGHT_STYLE_BOXING);
			SendClientMessage(playerid, COLOR_WHITE, "Felicidades! Has aprendido a Boxear.");
			ApplyAnimation(playerid,"benchpress", "gym_bp_celebrate",4.0,1,1,1,1,500);
		}
		case 3:
		{
			if (CheckMoney(playerid, 800) == 0) return 1;
			GivePlayerCash(playerid, -800, "estilo de pelea (4)");
			InfoPersonaje[playerid][pEstiloPelea] = 15;
			SetPlayerFightingStyle (playerid, FIGHT_STYLE_GRABKICK);
			SendClientMessage(playerid, COLOR_WHITE, "Felicidades! Has aprendido pelea callejera.");
			ApplyAnimation(playerid,"benchpress", "gym_bp_celebrate",4.0,1,1,1,1,500);
		}
		case 4:
		{
			if (CheckMoney(playerid, 800) == 0) return 1;
			GivePlayerCash(playerid, -800, "estilo de pelea (5)");
			InfoPersonaje[playerid][pEstiloPelea] = 16;
			SetPlayerFightingStyle (playerid, FIGHT_STYLE_ELBOW);
			SendClientMessage(playerid, COLOR_WHITE, "Felicidades! Has aprendido a usar los codos.");
			ApplyAnimation(playerid,"benchpress", "gym_bp_celebrate",4.0,1,1,1,1,500);
		}
	}
	guardar_int_mysql("personajes", "EstiloPelea", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pEstiloPelea]);
	return 1;
}

CMD:venderarma(playerid,params[])
{
	if (InfoPersonaje[playerid][pHorasOn] < 5) return SendClientMessage(playerid, COLOR_GREY, "* Necesitas tener al menos 5 horas para usar este comando.");
	new playerid2, precio, string[180], objeto = InfoPersonaje[playerid][pManoDerecha], objetocantidad = InfoPersonaje[playerid][pManoDerechaCant];
	if (member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "No puedes vender armas siendo policia o FBI!");
	if (GunVendedor[playerid] != -1) return SendClientMessage(playerid, COLOR_GREY, "Ya has ofrecido algo, espera la respuesta del cliente.");
	if (objeto == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes nada en tu mano derecha mano.");
    if (InfoInventario[objeto][IDArma] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes un arma en tu mano derecha.");
	if (sscanf(params, "dd", playerid2, precio)) return SendClientMessage(playerid,COLOR_WHITE,"Utiliza: /venderarma (ID) (Precio)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid,COLOR_WHITE,"Ese jugador no está conectado.");
	if (!CercaDelMarica(5.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Ese jugador no está cerca tuyo.");
	if (GunCliente[playerid2] != -1) return SendClientMessage(playerid, COLOR_GREY, "Ya le han ofrecido algo a ese jugador.");
	if (precio < 1 || precio > 99999) return SendClientMessage(playerid, 0xFF6347AA, "Sólo precio desde $1 hasta $99,999.");

	new name_ofrece[65];
	if (objetocantidad == 0 || objetocantidad == 1) format(name_ofrece, sizeof name_ofrece, "%s", InfoInventario[objeto][NombreObjeto]);
	else format(name_ofrece, sizeof name_ofrece, "%s con %d balas", InfoInventario[objeto][NombreObjeto], objetocantidad);
	format(string, sizeof string, "* %s quiere venderte su %s por $%s. Usa /aceptar arma para pagarlo.", NombreJugador(playerid), name_ofrece, diner_coma(precio));
	SendClientMessage(playerid2, COLOR_LIGHTBLUE, string);
	format(string, sizeof string, "* Has ofrecido tu %s a %s por $%s. Espera su respuesta.", name_ofrece, NombreJugador(playerid2), diner_coma(precio));
	SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	if (objetocantidad >= 2) SendClientMessage(playerid, COLOR_YELLOW, "ADVERTENCIA:{FFFFFF} Si intentas guardar el arma, tirarla, cambiarla de mano o gastarle balas, se cancela la venta.");
	GunCliente[playerid2] = playerid;
	GunObjeto[playerid2] = objeto;
	GunCantidad[playerid2] = objetocantidad;
	GunPrecio[playerid2] = precio;
	GunVendedor[playerid] = playerid2;
	return 1;
}

CMD:aceptar(playerid, params[])
{
	new string[480];
	if (isnull(params))
	{
		SendClientMessage(playerid, COLOR_WHITE, "USA: /aceptar (nombre)");
		SendClientMessage(playerid, COLOR_WHITE, "Nombres: bebida - multa - materiales - coche");
		SendClientMessage(playerid, COLOR_WHITE, "Nombres: recarga - vip - coinsvip");
		return 1;
	}
	if (strcmp(params, "arma", true) == 0) //agregado 17/01/2019 by EdinsonWalker
	{
		new playerid2 = GunCliente[playerid], objeto = GunObjeto[playerid], objetocantidad = GunCantidad[playerid], precio = GunPrecio[playerid];
		if (!IsPlayerConnected(playerid2))
		{
			GunCliente[playerid] = -1;
			GunObjeto[playerid] = 0;
			GunCantidad[playerid] = 0;
			GunPrecio[playerid] = 0;
			SendClientMessage(playerid, COLOR_WHITE, "Vendedor desconectado.");
			return 1;
		}
		if (playerid2 == -1)
		{
			GunCliente[playerid] = -1;
			GunObjeto[playerid] = 0;
			GunCantidad[playerid] = 0;
			GunPrecio[playerid] = 0;
			SendClientMessage(playerid, COLOR_WHITE, "Nadie te ha ofrecido un arma!");
			return 1;
		}
		if (!CercaDelMarica(5.0, playerid2, playerid)) return SendClientMessage(playerid, COLOR_WHITE, "No estás cerca del que te va a vender el arma.");
		if (GetPlayerCash(playerid) < precio)
		{
			format(string, sizeof string, "Te faltan $%s, para comprar el arma a %s.", diner_coma(precio-GetPlayerCash(playerid)), NombreJugador(playerid2));
			SendClientMessage(playerid, COLOR_GREY, string);
			return 1;
		}
		if (InfoPersonaje[playerid2][pManoDerecha] != objeto)
		{
			GunCliente[playerid] = -1;
			GunObjeto[playerid] = 0;
			GunCantidad[playerid] = 0;
			GunPrecio[playerid] = 0;
			SendClientMessage(playerid, COLOR_WHITE, "Error en la venta, el arma del vendedor que te intenta vender ya no lo lleva en su mano derecha.");
			SendClientMessage(playerid2, COLOR_WHITE, "Error en la venta, ya no llevas el arma a vender en tu mano derecha.");
			GunVendedor[playerid2] = -1;
			return 1;
		}
		if (InfoPersonaje[playerid2][pManoDerechaCant] != objetocantidad)
		{
			GunCliente[playerid] = -1;
			GunObjeto[playerid] = 0;
			GunCantidad[playerid] = 0;
			GunPrecio[playerid] = 0;
			SendClientMessage(playerid, COLOR_WHITE, "Error en la venta, la munición del arma cambió.");
			SendClientMessage(playerid2, COLOR_WHITE, "Error en la venta, gastaste las balas del arma a vender.");
			GunVendedor[playerid2] = -1;
			return 1;
		}
	//	if (InfoPersonaje[playerid][pManoDerecha] != 0) return SendClientMessage(playerid, COLOR_GREY, "Debes tener tu mano derecha vacía.");
		new name_ofrece[65];
		if (objetocantidad == 0 || objetocantidad == 1) format(name_ofrece, sizeof name_ofrece, "%s", InfoInventario[objeto][NombreObjeto]);
		else format(name_ofrece, sizeof name_ofrece, "%s con %d balas", InfoInventario[objeto][NombreObjeto], objetocantidad);
		InfoPersonaje[playerid2][pManoDerecha] = 0;
		InfoPersonaje[playerid2][pManoDerechaCant] = 0;
		ResetPlayerWeapons(playerid2);
		ActualizarManos(playerid2);
		GivePlayerCash(playerid2, precio, "venta de armas");
		GivePlayerCash(playerid, -precio, "venta de armas");
		if (InfoInventario[objeto][IDArma] > 0) { GivePlayerWeapon(playerid, InfoInventario[objeto][IDArma], objetocantidad); }
		InfoPersonaje[playerid][pManoDerecha] = objeto;
		InfoPersonaje[playerid][pManoDerechaCant] = objetocantidad;
		PonerObjeto(playerid, 1, objeto);
		ActualizarManos(playerid);
		format(string, sizeof string, "%s compró %s a %s por $%s.", NombreDeCuenta(playerid), name_ofrece, NombreDeCuenta(playerid2), diner_coma(precio));
		Log("LOGS/venderarma.log", string);
		format(string, sizeof string, "compra %s a %s.", name_ofrece, NombreJugador(playerid2));
		meuwu(playerid, string);
		format(string, sizeof string, "* Pagaste $%s por %s.", diner_coma(precio), name_ofrece);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
		GunVendedor[playerid2] = -1;
		GunCliente[playerid] = -1;
		GunObjeto[playerid] = 0;
		GunCantidad[playerid] = 0;
		GunPrecio[playerid] = 0;
		return 1;
	}
		    else if(strcmp(params, "saludo",true) == 0){
	        	new Count;
		        foreach(Player, i){
	               	if(GetPVarInt(i, "shrequest") == playerid){
                    	new
                        	Float: ppFloats[3];

                    	GetPlayerPos(i, ppFloats[0], ppFloats[1], ppFloats[2]);

                    	if(!IsPlayerInRangeOfPoint(playerid, 5, ppFloats[0], ppFloats[1], ppFloats[2])){
     						Count++;
                   	    	SendClientMessage(playerid, COLOR_WHITE, "Estás demasiado lejos. No puedes aceptar el saludo ahora.");
                    	}
                    	else
						{
                        	switch(GetPVarInt(i, "shstyle"))
							{
                            	case 1:
                            	{
                            	    Count++;
                            	    PlayerFacePlayer( playerid, i );
                            	    ApplyAnimation( playerid, "GANGS", "hndshkaa", 4.0, 1, 1, 1, 0, 1000,1);
                            	    ApplyAnimation( i, "GANGS", "hndshkaa", 4.0, 1, 1, 1, 0, 1000,1);
                            	    SetPVarInt(i, "shrequest", INVALID_PLAYER_ID);
                            	    format(string, sizeof string, "* %s se saluda con %s.", NombreJugador(i), NombreJugador(playerid));
                            	    ProxDetector(30.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
                            	    DeletePVar(i, "shstyle");
                            	}
                           	 	case 2:
                            	{
                            	    Count++;
                            	    PlayerFacePlayer( playerid, i );
                            	    ApplyAnimation( playerid, "GANGS", "hndshkba", 4.0, 1, 1, 1, 0, 1000,1);
                            	    ApplyAnimation( i, "GANGS", "hndshkba", 4.0, 1, 1, 1, 0, 1000,1);
                            	    SetPVarInt(i, "shrequest", INVALID_PLAYER_ID);
                            	    format(string, sizeof string, "* %s se saluda con %s.", NombreJugador(i), NombreJugador(playerid));
                            	    ProxDetector(30.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
                            	    DeletePVar(i, "shstyle");
                            	}
                            	case 3:
                            	{
                                	Count++;
                                	PlayerFacePlayer( playerid, i );
                                	ApplyAnimation( playerid, "GANGS", "hndshkca", 4.0, 1, 1, 1, 0, 1000,1);
                                	ApplyAnimation( i, "GANGS", "hndshkca", 4.0, 1, 1, 1, 0, 1000,1);
                                	SetPVarInt(i, "shrequest", INVALID_PLAYER_ID);
                                	format(string, sizeof string, "* %s se saluda con %s.", NombreJugador(i), NombreJugador(playerid));
                                	ProxDetector(30.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
                                	DeletePVar(i, "shstyle");
                            	}
                            	case 4:
                            	{
                                	Count++;
                                	PlayerFacePlayer( playerid, i );
                                	ApplyAnimation( playerid, "GANGS", "hndshkcb", 4.0, 1, 1, 1, 0, 1000,1);
                                	ApplyAnimation( i, "GANGS", "hndshkca", 4.0, 1, 1, 1, 0, 1000,1);
                                	SetPVarInt(i, "shrequest", INVALID_PLAYER_ID);
                                	format(string, sizeof string, "* %s se saluda con %s.", NombreJugador(i), NombreJugador(playerid));
                                	ProxDetector(30.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
                                	DeletePVar(i, "shstyle");
                            	}
                            	case 5:
                            	{
                           	    	Count++;
                            	   	PlayerFacePlayer( playerid, i );
                            	    ApplyAnimation( playerid, "GANGS", "hndshkda", 4.0, 1, 1, 1, 0, 1000,1);
                            	    ApplyAnimation( i, "GANGS", "hndshkca", 4.0, 1, 1, 1, 0, 1000,1);
                            	    SetPVarInt(i, "shrequest", INVALID_PLAYER_ID);
                            	    format(string, sizeof string, "* %s se saluda con %s.", NombreJugador(i), NombreJugador(playerid));
                            	    ProxDetector(30.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
                            	    DeletePVar(i, "shstyle");
                            	}
                            	case 6:
                            	{
                            	    Count++;
                            	    PlayerFacePlayer( playerid, i );
                            	    ApplyAnimation( playerid, "GANGS","hndshkfa_swt", 4.0, 1, 1, 1, 0, 2600,1);
                            	    ApplyAnimation( i, "GANGS","hndshkfa_swt", 4.0, 1, 1, 1, 0, 2600,1);
                            	    SetPVarInt(i, "shrequest", INVALID_PLAYER_ID);
                            	    format(string, sizeof string, "* %s se saluda con %s.", NombreJugador(i), NombreJugador(playerid));
                            	    ProxDetector(30.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
                            	    DeletePVar(i, "shstyle");
                            	}
                            	case 7:
                            	{
                            	    Count++;
                            	    PlayerFacePlayer( playerid, i );
                            	    ApplyAnimation( playerid, "GANGS", "prtial_hndshk_01", 4.0, 1, 1, 1, 0, 1250,1);
                            	    ApplyAnimation( i, "GANGS", "prtial_hndshk_01", 4.0, 1, 1, 1, 0, 1250,1);
                            	    SetPVarInt(i, "shrequest", INVALID_PLAYER_ID);
                            	    format(string, sizeof string, "* %s se saluda con %s.", NombreJugador(i), NombreJugador(playerid));
                            	    ProxDetector(30.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
                            	    DeletePVar(i, "shstyle");
                            	}
                            	case 8:
                            	{
                                	Count++;
                                	PlayerFacePlayer( playerid, i );
                                	ApplyAnimation( playerid, "GANGS", "prtial_hndshk_biz_01", 3.7, 1, 1, 1, 0, 2200,1);
                                	ApplyAnimation( i, "GANGS", "prtial_hndshk_biz_01", 3.5, 1, 1, 1, 0, 2200,1);
                                	SetPVarInt(i, "shrequest", INVALID_PLAYER_ID);
                                	format(string, sizeof string, "* %s se saluda con %s.", NombreJugador(i), NombreJugador(playerid));
                                	ProxDetector(30.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
                                	DeletePVar(i, "shstyle");
                            	}
                        	}
                    	}
                	}
            	}
        	    if(Count == 0) return SendClientMessage(playerid, COLOR_WHITE, "Nadie te ha saludado.");
    	        return 1;
	        }
			else if(strcmp(params,"multa",true) == 0){
			    if(TicketOffer[playerid] == 999) return SendClientMessage(playerid, COLOR_WHITE, "{FFFF00}[ERROR]:{FFFFFF} Nadie te multado.");
			    format(string, sizeof string, "* %s paga una multa", NombreJugador(playerid));
   				ProxDetector(30.0,playerid, string, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE);
   				format(string, sizeof string, " %s pagó una multa de %d$.", NombreJugador(playerid), TicketMoney[playerid]);
   				SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
   				SendClientMessage(TicketOffer[playerid], COLOR_LIGHTBLUE, string);
				GivePlayerCash(playerid, -TicketMoney[playerid], "aceptar multa");
   				Tax += TicketMoney[playerid];
   				TicketOffer[playerid] = 999;
				TicketMoney[playerid] = 0;
				Facturing[playerid] = 0;
			}
			else if(strcmp(params,"licencia",true) == 0)
			{
			    if (NombreLicencia[playerid] == 999) return SendClientMessage(playerid, COLOR_WHITE, "Nadie te ha ofrecido una licencia.");
				if (CheckMoney(playerid, PrecioLicencia[playerid]) == 0)
				{
   					NombreLicencia[playerid] = 999;
					PrecioLicencia[playerid] = 0;
					Facturing[playerid] = 0;
				    SendClientMessage(NombreLicencia[playerid], 0xEBEBEBFF, "El sujeto no tiene suficiente dinero para pagar la licencia.");
				    return 1;
				}
				ameuwu(playerid, "obtiene una licencia de armas");
				GivePlayerCash(playerid, -PrecioLicencia[playerid], "aceptar licencia");
   				Tax += PrecioLicencia[playerid];
   				InfoPersonaje[playerid][pLicencia][3] = 1;
				guardar_int_mysql("personajes", "Licencia4", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pLicencia][3]);
   				NombreLicencia[playerid] = 999;
				PrecioLicencia[playerid] = 0;
				Facturing[playerid] = 0;
			}
			if (strcmp(params, "coche", true) == 0) //corregido 09/01/2019 by EdinsonWalker
			{
				new playerid2 = Pla_vehicle[playerid], veh = Osql_vehicle[playerid], precio = Price_vehicle[playerid];
				if (!IsPlayerConnected(playerid2))
				{
					Osql_vehicle[playerid] = 0;
					Pla_vehicle[playerid] = 999;
					Price_vehicle[playerid] = 0;
					SendClientMessage(playerid, COLOR_WHITE, "Vendedor desconectado.");
					return 1;
				}
				if (playerid2 == 999)
				{
					Osql_vehicle[playerid] = 0;
					Pla_vehicle[playerid] = 999;
					Price_vehicle[playerid] = 0;
					SendClientMessage(playerid, COLOR_WHITE, "Nadie te ha ofrecido un coche!");
					return 1;
				}
				if (!CercaDelMarica(8.0, playerid2, playerid)) return SendClientMessage(playerid, COLOR_WHITE, "No estás cerca del que te va a vender el vehículo.");
				if (GetPlayerCash(playerid) < precio)
				{
					format(string, sizeof string, "Te faltan $%s, para comprar el vehículo a %s.", diner_coma(precio-GetPlayerCash(playerid)), NombreJugador(playerid2));
					SendClientMessage(playerid, COLOR_GREY, string);
					return 1;
				}
				new vehicleid = InfoVehiculo[veh][vIG_id];
				if (!IsPlayerInVehicle(playerid2, vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "El vendedor debe estar dentro del vehículo que te va a vender.");
				if (DetectarMaxVehiculos(playerid) == 1)
				{
					Osql_vehicle[playerid] = 0;
					Pla_vehicle[playerid] = 999;
					Price_vehicle[playerid] = 0;
					return 1;
				}
				//
				new ip[32], ipex[32];
				GetPlayerIp(playerid, ip, sizeof(ip));
				GetPlayerIp(playerid2, ipex, sizeof(ipex));
				format(string, sizeof string, "[CAR] %s (IP: %s) pagó $%s a %s por el %s (IP: %s)", NombreDeCuenta(playerid), ip, diner_coma(precio), NombreDeCuenta(playerid2), GetVehicleName(vehicleid), ipex);
				Log("LOGS/pay.log", string);
				format(string, sizeof string, "* Has pagado $%s a %s por su %s. (Usa /ayuda vehículo para más información)", diner_coma(precio), NombreJugador(playerid2), GetVehicleName(vehicleid));
				SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
				format(string, sizeof string, "* Vendiste tu %s a %s por $%s.", GetVehicleName(vehicleid), NombreJugador(playerid), diner_coma(precio));
				SendClientMessage(playerid2, COLOR_LIGHTBLUE, string);
				// AntiAbuso. (Regalar coches o similares.
				format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} %s(%d) le compró un %s por $%s a %s(%d).", NombreOriginal(playerid), playerid, GetVehicleName(vehicleid), diner_coma(precio), NombreOriginal(playerid2), playerid2);
				SendAdminMessage(0xFFFFFFFF, string);
				// AntiAbuso 2. (Venta de vehículo entre 2 personas con al misma IP).
				if (!strcmp(InfoCuenta[playerid][jIP], InfoCuenta[Pla_vehicle[playerid]][jIP], false) && InfoCuenta[playerid][jMulticuenta] == 0 && InfoCuenta[Pla_vehicle[playerid]][jMulticuenta] == 0)
				{
					// Si las IP son iguales y ambos son multicuentas NO AUTORIZADAS = 0.
					new ipc[32], stringlog[180]; GetPlayerIp(playerid, ipc, 32);
					format(stringlog, sizeof(stringlog), "[ATENCIÓN] Posibles multicuentas: %s(%d) ha vendido un vehículo a %s(%d). [IP: %s]", NombreOriginal(playerid2), playerid2, NombreOriginal(playerid), playerid, ipc);
					SendAdminMessage(COLOR_YELLOW, stringlog); Log("LOGS/multicuentas.log", stringlog);
				}

				GivePlayerCash(playerid2, precio, "venta de vehiculo");
				GivePlayerCash(playerid, -precio, "venta de vehiculo");

				RemovePlayerFromVehicle(playerid2);
				new Float:slx, Float:sly, Float:slz, query3[186];
				GetPlayerPos(playerid2, slx, sly, slz);
				SetPlayerPos(playerid2, slx, sly, slz+2);
				PutPlayerInVehicle(playerid, vehicleid, 0);
				//actualizar vehículo
				alm(InfoVehiculo[veh][vPropietario], InfoPersonaje[playerid][pNombre_Apellido]);

				mysql_format(DBInsanity, query3, sizeof query3, "UPDATE vehiculos SET Propietario = '%e' WHERE ID = '%d'", InfoVehiculo[veh][vPropietario], InfoVehiculo[veh][vID_sql]);
				mysql_tquery(DBInsanity, query3);

				if (InfoVehiculo[veh][vLlavePrestada] != -1)
				{
					InfoPersonaje[InfoVehiculo[veh][vLlavePrestada]][pLlaveVehicle] = 0;
					InfoVehiculo[veh][vLlavePrestada] = -1;
				}

				Osql_vehicle[playerid] = 0;
				Pla_vehicle[playerid] = 999;
				Price_vehicle[playerid] = 0;

				return 1;
			}
			else if(strcmp(params,"materiales",true) == 0){
	            if(MatsOffer[playerid] < 999){
	                if(GetPlayerCash(playerid) >= MatsPrice[playerid]){
						if(IsPlayerConnected(MatsOffer[playerid])){
							if(InfoPersonaje[MatsOffer[playerid]][pMateriales] < MatsAmount[playerid]) return SendClientMessage(playerid,COLOR_WHITE, "{FFFF00}[ERROR]:{FFFFFF} No tiene los materiales suficientes.");

							new playerid2 = MatsOffer[playerid];
	         				format(string, sizeof string, "* Compraste %d materiales por $%d, de  %s.", MatsAmount[playerid], MatsPrice[playerid], NombreJugador(playerid2));
	            			SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	              			format(string, sizeof string, "* %s has vendido %d materiales, sumaste $%d a tu bolsillo.", NombreJugador(playerid), MatsAmount[playerid], MatsPrice[playerid]);
	                		SendClientMessage(MatsOffer[playerid], COLOR_LIGHTBLUE, string);

	                  		GivePlayerCash(playerid2, MatsPrice[playerid], "venta de materiales");
							GivePlayerCash(playerid, -MatsPrice[playerid], "venta de materiales");
	                    	InfoPersonaje[playerid][pMateriales] += MatsAmount[playerid];
	                    	InfoPersonaje[playerid2][pMateriales] -= MatsAmount[playerid];
							guardar_int_mysql("personajes", "Materiales", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pMateriales]);
							guardar_int_mysql("personajes", "Materiales", InfoPersonaje[playerid2][pID], InfoPersonaje[playerid2][pMateriales]);
	                        new ip[32], ipex[32];
	                        GetPlayerIp(playerid, ip, sizeof(ip));
	                        GetPlayerIp(playerid2, ipex, sizeof(ipex));
	                        format(string, sizeof string, "[MATS DEAL] %s(IP:%s) pagó %d materiales de %s(IP:%s)", NombreDeCuenta(playerid), ip, MatsAmount[playerid], NombreDeCuenta(playerid2), ipex);
	                        Log("LOGS/pay.log", string);
	                    	MatsOffer[playerid] = 999;
	                    	MatsPrice[playerid] = 0;
	                    	MatsAmount[playerid] = 0;
	                    }
	                }
	                else return SendClientMessage(playerid, COLOR_WHITE, "{FFFF00}[ERROR]:{FFFFFF} No tienes dinero suficiente.");
				}
            	else return SendClientMessage(playerid, COLOR_WHITE, "Nadie te ha ofrecido materiales.");
			}
			else if(strcmp(params,"coinsvip",true) == 0){
	            if(FOffer[playerid] < 999){
	                if(GetPlayerCash(playerid) >= FPrice[playerid]){
						if(IsPlayerConnected(FOffer[playerid])){
							if(InfoCuenta[FOffer[playerid]][jCoinsVIP] < FAmount[playerid]) return SendClientMessage(playerid,COLOR_GREY, "No tiene los coins VIP suficientes.");

	         				format(string, sizeof string, "* Compraste %d coins VIP por $%d, de %s.", FAmount[playerid], FPrice[playerid], NombreJugador(FOffer[playerid]));
	            			SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	              			format(string, sizeof string, "* %s has vendido %d coins VIP, ganaste $%d de dinero.", NombreJugador(playerid), FAmount[playerid], FPrice[playerid]);
	                		SendClientMessage(FOffer[playerid], COLOR_LIGHTBLUE, string);

	                  		GivePlayerCash(FOffer[playerid], FPrice[playerid], "venta de coinsvip");
							GivePlayerCash(playerid, -FPrice[playerid], "venta de coinsvip");
	                    	InfoCuenta[playerid][jCoinsVIP] += FAmount[playerid];
                            InfoCuenta[FOffer[playerid]][jCoinsVIP] -= FAmount[playerid];
                            guardar_int_mysql("cuentas", "CoinsVIP", InfoCuenta[playerid][jID], InfoCuenta[playerid][jCoinsVIP]);
                            guardar_int_mysql("cuentas", "CoinsVIP", InfoCuenta[FOffer[playerid]][jID], InfoCuenta[FOffer[playerid]][jCoinsVIP]);
	                    	FOffer[playerid] = 999;
	                    	FPrice[playerid] = 0;
	                    	FAmount[playerid] = 0;
	                    }
	                }
	                else return SendClientMessage(playerid, COLOR_GREY, "No tienes dinero suficiente.");
				}
            	else return SendClientMessage(playerid, COLOR_WHITE, "Nadie te ha ofrecido coins VIP del Gold Gift.");
			}
			else if(strcmp(params,"vip",true) == 0){
	            if(VIPOffer[playerid] < 999){
	                if(GetPlayerCash(playerid) >= VIPPrice[playerid]){
						if(IsPlayerConnected(VIPOffer[playerid])){
							if(InfoCuenta[VIPOffer[playerid]][jVIP] == 0) return SendClientMessage(playerid,COLOR_GREY, "Ese usuario no es Premium.");
    			    		new viptype[10];
			   			 	switch(InfoCuenta[VIPOffer[playerid]][jVIP])
			    			{
			        			case 1: viptype = "Bronce";
			        			case 2: viptype = "Silver";
			        			case 3: viptype = "Gold";
			        			case 4: viptype = "Platinum";
			    			}
							format(string, sizeof string, "* Compraste el VIP %s de %s por $%d.",viptype,NombreJugador(VIPOffer[playerid]),VIPPrice[playerid]);
	            			SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	              			format(string, sizeof string, "* %s le has vendido tu VIP %s y ganaste $%d de dinero.",NombreJugador(playerid),viptype,VIPPrice[playerid]);
	                		SendClientMessage(VIPOffer[playerid], COLOR_LIGHTBLUE, string);
	                        new ip[32], ipex[32];
	                        GetPlayerIp(playerid, ip, sizeof(ip));
	                        GetPlayerIp(VIPOffer[playerid], ipex, sizeof(ipex));
	                        format(string, sizeof string, "[VIP DEAL] %s(IP:%s) pagó VIP %s por $%d de %s(IP:%s)", NombreDeCuenta(playerid), ip, viptype, VIPPrice[playerid],NombreDeCuenta(VIPOffer[playerid]), ipex);
	                        Log("LOGS/pay.log", string);
							new level = InfoCuenta[VIPOffer[playerid]][jVIP],
                				dExpire = InfoCuenta[VIPOffer[playerid]][jDiaVIP],
                				mExpire = InfoCuenta[VIPOffer[playerid]][jMesVIP];
	                  		GivePlayerCash(VIPOffer[playerid], VIPPrice[playerid], "venta de vip");
							GivePlayerCash(playerid, -VIPPrice[playerid], "venta de vip");
							// buyer
	                    	InfoCuenta[playerid][jVIP] = level;
	                    	InfoCuenta[playerid][jMesVIP] = mExpire;
	                    	InfoCuenta[playerid][jDiaVIP] = dExpire;
							new query[512];
							mysql_format(DBInsanity, query, sizeof query, "UPDATE cuentas SET VIP = '%d', MesVIP = '%d', DiaVIP = '%d' WHERE ID = '%d'", level, mExpire, dExpire, InfoCuenta[playerid][jID]);
							mysql_tquery(DBInsanity, query);
	                    	// Offer
	                    	InfoCuenta[VIPOffer[playerid]][jVIP] = 0;
	                    	InfoCuenta[VIPOffer[playerid]][jMesVIP] = -1;
	                    	InfoCuenta[VIPOffer[playerid]][jDiaVIP] = -1;
							mysql_format(DBInsanity, string, sizeof string, "UPDATE cuentas SET VIP = 0, MesVIP = -1, DiaVIP = -1 WHERE ID = '%d'", InfoCuenta[VIPOffer[playerid]][jID]);
							mysql_tquery(DBInsanity, string);
	                    	VIPOffer[playerid] = 999;
	                    	VIPPrice[playerid] = 0;
	                    }
	                    else return SendClientMessage(playerid, COLOR_WHITE, "La persona que te ofreció se desconectó.");
	                }
	                else return SendClientMessage(playerid, COLOR_GREY, "No tienes dinero suficiente.");
				}
            	else return SendClientMessage(playerid, COLOR_WHITE, "Nadie te ha ofrecido VIP.");
			}
        	else { return 1; }
   	 	return 1;
	}

//Toys
CMD:ctoys(playerid)
{
	if (IsPlayerInRangeOfPoint(playerid, 5.0, 802.5069,-1419.6813,1016.4688))
	{
		if (InfoCuenta[playerid][jVIP] != 3) return SendClientMessage(playerid, COLOR_WHITE, "Debes ser mínimo VIP gold.");
		Loop(id, 7, 0) if (InfoPersonaje[playerid][ptModelo][id] == 0)
		{
			slotselection[playerid] = id;
			new ToyMuestra[180], count = 0;
			Loop(x, sizeof InfoToy, 0) if (InfoToy[x][accTipo] == 3)
			{
				ToyMuestra[count] = InfoToy[x][accModelo];
				count++;
			}
			ShowModelSelectionMenuEx(playerid, ToyMuestra, count, "Toys V.I.P", Compra_Toy);
			return 1;
		}
		SendClientMessage(playerid, COLOR_GREY, "No puedes tener más de 7 toys.");
		return 1;
	}
	return 1;
}
CMD:comprartoys(playerid) return cmd_ctoys(playerid);

CMD:ayuda(playerid)
{
	Dialog_Show(playerid, ShowHelp, DIALOG_STYLE_LIST, "{00AE57}Menú de ayuda",
	"{00AE57}> {ffffff}General\n\
	{00AE57}> {ffffff}Facción\n\
	{00AE57}> {ffffff}Chat\n\
	{00AE57}> {ffffff}Teléfono\n\
	{00AE57}> {ffffff}Casa\n\
	{00AE57}> {ffffff}Vehículo\n\
	{00AE57}> {ffffff}Banco\n\
	{00AE57}> {ffffff}V.I.P\n\
	{00AE57}> {ffffff}Inventario\n\
	{00AE57}> {ffffff}Negocio\n\
	{00AE57}> {ffffff}Animaciones\n\
	{00AE57}> {ffffff}Contrato\n\
	{00AE57}> {ffffff}Trabajo", "Continuar", "Salir");
	return 1;
}

Dialog:ShowHelp(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0: Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{00AE57}General",
		"{FFFFFF}/cuenta /cambiarclave /mostrar /removergps /dnifalso\n\
		/pagar /payday /id /comprar /animaciones /ven /ap /cp /apgarage\n\
		/togphone /darcheque /eject /llenar /moneda /dar /duda /re", "Cerrar", "");
		case 1:
		{
		    new id = InfoPersonaje[playerid][pMiembro];
			new dialog_help[1024], dialog_name[128];
		    if (id == 0) return SendClientMessage(playerid, COLOR_GREY, "No estás en una facción.");
		    switch (InfoFaccion[id][fTipo])
		    {
		        case 1: //lspd
		        {
					strcat(dialog_help, "{FFFFFF}/f - /r - /d - /dooc - /equipo - /apgarage - /placa - /callsign - /ram - /revisarcasa - /incautar - /ap - /cp\n");
					strcat(dialog_help, "{FFFFFF}/duty - /radio - /arrestar - /detener - /esposar - /desesposar - /spikes - /pspikes - /qspikes - /limpiar\n");
					strcat(dialog_help, "{FFFFFF}/quitar - /multar - /su - /sospechosos - /ct - /sacarct - /guardarct - /ref - /noref - /darlicencia - /dejarmulta\n");
					strcat(dialog_help, "{FFFFFF}/enganchar - /desenganchar - /embargar - /vcoche - /verllaves - /codigos - /derechos - /autorizar\n");
					strcat(dialog_help, "{FFFFFF}/identidad - /reanimar - /bar - /bar2 - /bar3 - /bengala - /cono - /qb - /revisarmaletero - /limpiarmaletero\n");
					if (InfoPersonaje[playerid][pLider] != 0) strcat(dialog_help, "{00AE57}Lider:{FFFFFF} /invitar - /fnombre - /frango - /listamiembros - /gob\n");
				}
				case 2: //fbi
				{
					strcat(dialog_help, "{FFFFFF}/f - /r - /d - /dooc - /duty - /radio - /callsign - /arrestar - /detener - /esposar - /desesposar - /limpiar\n");
					strcat(dialog_help, "{FFFFFF}/equipo - /autorizar - /codigos - /derechos - /quitar - /multar - /sospechosos - /ct - /sacarct - /guardarct\n");
					strcat(dialog_help, "{FFFFFF}/identidad - /dejarmulta - /enganchar - /desenganchar - /embargar - /vcoche - /revisarcasa - /incautar\n");
					strcat(dialog_help, "{FFFFFF}/reanimar - /placa - /ram - /spikes - /pspikes - /qspikes - /bar - /bar2 - /bar3 - /bengala - /cono - /qb - /verllaves\n");
					if (InfoPersonaje[playerid][pLider] != 0) strcat(dialog_help, "{00AE57}Lider:{FFFFFF} /invitar - /fnombre - /frango - /listamiembros - /gob\n");
				}
				case 3: //saem
				{
					strcat(dialog_help, "{FFFFFF}/f - /r - /d - /dooc - /duty - /placa - /radio - /arrestar - /detener - /limpiar - /revisarcasa - /misil\n");
					strcat(dialog_help, "{FFFFFF}/equipo - /autorizar - /codigos - /derechos - /quitar - /multar - /sospechosos - /ct - /sacarct - /guardarct - /incautar\n");
					strcat(dialog_help, "{FFFFFF}/dejarmulta - /enganchar - /desenganchar - /embargar - /vcoche - /cono - /qb - /verllaves\n");
					strcat(dialog_help, "{FFFFFF}/reanimar - /callsign - /esposar - /desesposar - /ram - /spikes - /pspikes - /qspikes - /bar - /bar2 - /bar3 - /bengala\n");
					if (InfoPersonaje[playerid][pLider] != 0) strcat(dialog_help, "{00AE57}Lider:{FFFFFF} /invitar - /fnombre - /frango - /listamiembros - /gob\n");
				}
				case 4: //sasd
				{
					strcat(dialog_help, "{FFFFFF}/f - /r - /d - /dooc - /equipo - /placa - /callsign - /ram - /revisarcasa - /incautar - /limpiar\n");
					strcat(dialog_help, "{FFFFFF}/identidad - /duty - /radio - /arrestar - /detener - /esposar - /desesposar - /spikes - /pspikes - /qspikes\n");
					strcat(dialog_help, "{FFFFFF}/quitar - /multar - /su - /sospechosos - /ct - /sacarct - /guardarct - /ref - /noref - /darlicencia - /dejarmulta\n");
					strcat(dialog_help, "{FFFFFF}/enganchar - /desenganchar - /embargar - /vcoche - /verllaves - /codigos - /derechos - /autorizar\n");
					strcat(dialog_help, "{FFFFFF}/reanimar - /bar - /bar2 - /bar3 - /bengala - /cono - /qb - /revisarmaletero - /limpiarmaletero\n");
					if (InfoPersonaje[playerid][pLider] != 0) strcat(dialog_help, "{00AE57}Lider:{FFFFFF} /invitar - /fnombre - /frango - /listamiembros - /gob\n");
				}
				case 5: //gob
				{
					strcat(dialog_help, "{FFFFFF}/f - /r - /d - /dooc - /placa - /radio - /equipo\n");
					if (InfoPersonaje[playerid][pLider] != 0) strcat(dialog_help, "{00AE57}Lider:{FFFFFF} /invitar - /listamiembros - /fnombre - /frango - /gob - /impuesto - /sacarfondos - /dejarfondos\n");
				}
				case 6: //legal
				{
					strcat(dialog_help, "{FFFFFF}/f - /wsp - /togwsp - /equipo\n");
					if (InfoPersonaje[playerid][pLider] != 0) strcat(dialog_help, "{00AE57}Lider:{FFFFFF} /invitar - /fnombre - /frango - /listamiembros\n");
				}
				case 7: //pandilla
				{
					strcat(dialog_help, "{FFFFFF}/f - /wsp - /togwsp - /equipo - /graffiti\n");
					if (InfoPersonaje[playerid][pLider] != 0) strcat(dialog_help, "{00AE57}Lider:{FFFFFF} /invitar - /fnombre - /frango - /listamiembros\n");
				}
				case 8: //mafia
				{
					strcat(dialog_help, "{FFFFFF}/f - /wsp - /togwsp - /equipo\n");
					if (InfoPersonaje[playerid][pLider] != 0) strcat(dialog_help, "{00AE57}Lider:{FFFFFF} /invitar - /fnombre - /frango - /listamiembros\n");
				}
			}
			format(dialog_name, sizeof(dialog_name), "Comandos de %s%s", GetColorLogo(InfoFaccion[id][fTipo]), InfoFaccion[id][fLogo]);
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, dialog_name, dialog_help, "Cerrar", "");
		}
		case 2: Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{00AE57}Ayuda - Chat", "{FFFF00}Comandos IC:\n{FFFFFF}(/g)ritar (/s)usurar /me /c (/r)adio\n\n{FFFF00}Comandos OOC:\n{FFFFFF}/b (/w)hisper (/f)accion", "Cerrar", "");
		case 3: Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{00AE57}Ayuda - Teléfono", "{FFFFFF}/telefono - /llamar - /contestar - /colgar - /sms - /altavoz - /transferir", "Cerrar", "");
		case 4: Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{00AE57}Ayuda - Casa", "{FFFFFF}/comprarcasa /timbre /vendercasa /menucasa\n/guardararmario /sacararmario /casaseguro /visitar", "Cerrar", "");
		case 5: Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{00AE57}Ayuda - Vehículo", "{FFFFFF}/llaves /estacionar /v (nombre) /qmod /seguro\n/velocimetro /gunlocker /vendermicoche /llenar\n /smaletero /gmaletero /darllave /quitarllave", "Cerrar", "");
		case 6: Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{00AE57}Ayuda - Banco", "{FFFFFF}/depositar /sacar /transferir\n /balance /atm", "Cerrar", "");
		case 7:
		{
			if (InfoCuenta[playerid][jVIP] == 0) return SendClientMessage(playerid, COLOR_GREY, "* No eres miembro VIP.");
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{00AE57}Ayuda - VIP", "{FFFFFF}/viplocker /vendercoinsvip /togvip\n/automensaje /ayudacoinsvip /vip\n/spawncasa /skinpremium /repararpremium /ponerneon /neon", "Cerrar", "");
		}
		case 8: Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{00AE57}Ayuda - Inventario", "{FFFFFF}/bolsillos /mano /guardar /sacar /tirar\n/recoger /ceder /arma (Colgar - Ajustar - Hueso - Tomar)", "Cerrar", "");
		case 9: Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{00AE57}Ayuda - Negocio", "{FFFFFF}/comprarnegocio /vendernegocio /negociomenu /negocioseguro\n/darempleo - /empleados", "Cerrar", "");
		case 10: cmd_animaciones(playerid);
		case 11:
		{
			new id = InfoPersonaje[playerid][pContrato];
			if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No trabajas en ningún negocio/empresa.");
			switch (InfoNegocio[id][nTipo])
			{
				case 6: SendClientMessageEx(playerid, 0x15BDA8FF, "%s: {EBEBEB}/repartos - /inforeparto - /cancelarreparto - /habilidad", GetNameContrato(id));
				case 9: SendClientMessageEx(playerid, 0x15BDA8FF, "%s: {EBEBEB}/irllamado - /mostrarprecios - /reparar - /gasolina - /pintura - /paintjob - /llantas - /nitro - /hyd - /tuneo", GetNameContrato(id));
				case 12: SendClientMessageEx(playerid, 0x15BDA8FF, "%s: {EBEBEB}Dentro de la fábrica donde trabajas, encontrarás las indicaciones y pedidos por completar.", GetNameContrato(id));
				case 13: SendClientMessageEx(playerid, 0x15BDA8FF, "%s: {EBEBEB}/curar - /botiquin - /uniformes", GetNameContrato(id));
			}
			SendClientMessage(playerid, 0xEBEBEBFF, "Comandos disponibles: {15BDA8}/irjob{EBEBEB} - {15BDA8}/cjob{EBEBEB} - {15BDA8}/rjob{EBEBEB} - {15BDA8}/renunciarempresa{EBEBEB}");
		}
		case 12:
		{
			new id = InfoPersonaje[playerid][pEmpleo];
			if (id == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes un empleo.");
			switch (id)
			{
				case 1: SendClientMessageEx(playerid, 0x15BDA8FF, "%s: {EBEBEB}/repartos - /inforeparto - /cancelarreparto - /habilidad", IsNameJob(id)); 
				case 2: SendClientMessageEx(playerid, 0x15BDA8FF, "%s: {EBEBEB}Acércate a la zona de tala y sigue las instrucciones.", IsNameJob(id)); 
				case 3: SendClientMessageEx(playerid, 0x15BDA8FF, "%s: {EBEBEB}/hurtar - /robarnegocio", IsNameJob(id)); 
				case 4: SendClientMessageEx(playerid, 0x15BDA8FF, "%s: {EBEBEB}Deshabilitado.", IsNameJob(id)); 

			}
			SendClientMessage(playerid, 0xEBEBEBFF, "Comandos disponibles: {15BDA8}/renunciar{EBEBEB}");
		}
	}
	return 1;
}

CMD:aiuda(playerid, params[])
{
	SendClientMessage(playerid, COLOR_GREEN2, "___________AYUDA___________");
	SendClientMessage(playerid, COLOR_STAT1, "[CUENTA] /reglas /stats /estilo /panel");
	SendClientMessage(playerid, COLOR_STAT2, "[GENERAL] /cuenta /cambiarclave /mostrar /removergps /pagar /payday /id /(re)port /comprar /licencias");
	SendClientMessage(playerid, COLOR_STAT1, "[GENERAL] /animaciones /darcheque /ad /moneda /entrar /salir /dar /duda /peaje /botiquin /mascara /saludar");
	SendClientMessage(playerid, COLOR_STAT2, "[GENERAL] /reanimar /aceptarmuerte /heridas /admins /duty /fumar");
	SendClientMessage(playerid, COLOR_STAT2, "[INVENTARIO] /bol /mano /guardar /sacar /tirar /recoger /ceder /arma");
	SendClientMessage(playerid, COLOR_STAT1, "[VEHÍCULO] /llaves /estacionar /v (nombre) /seguro /velocimetro /vendermicoche /llenar /smaletero /gmaletero /darllave");
	SendClientMessage(playerid, COLOR_STAT1, "[WEAPONS] /mypackage /weapons /lg /gg /dropgun /unpackage /sellpackage /place /takegun");
	SendClientMessage(playerid, COLOR_STAT2, "[CHAT] (/g)ritar (/s)usurar /me /c (/r)adio /mp (OOC) /faccion (OOC)");
	SendClientMessage(playerid, COLOR_STAT1, "[EMOTES] /ame /aceptarsaludo");
	SendClientMessage(playerid, COLOR_STAT2, "[BANCO] /depositar /sacar /transferir /balance /atm");
	SendClientMessage(playerid, COLOR_STAT1, "[AYUDA] /ayudatelefono /ayudacasa /negocioayuda /ayudatrabajo /ayudafaccion");
	SendClientMessage(playerid, COLOR_STAT2, "[AYUDA] /ayudaradio /ayudapremium");
	SendClientMessage(playerid, COLOR_STAT1, "[TOG/BLOCK] /togphone /tog(vip)(fac) /togmp");
	SendClientMessage(playerid, COLOR_GREEN2, "_______________________________________");
	SendClientMessage(playerid, COLOR_STAT1, "Por favor, para más información puede visitar la documentación en la sección del foro o usar /duda.");
	return 1;
}

CMD:ayudacasa(playerid, params[])
{
	SendClientMessage(playerid, COLOR_GREEN2, "|_____________________CASAS AYUDA______________________|");
	SendClientMessage(playerid, COLOR_STAT1, "/comprarcasa /timbre /vendercasa /menucasa");
	SendClientMessage(playerid, COLOR_STAT1, "/guardararmario /sacararmario /casaseguro /visitar");
	SendClientMessage(playerid, COLOR_GREEN2, "|_____________________________________________________|");
	return 1;
}

CMD:ayudatelefono(playerid, params[])
{
	SendClientMessage(playerid, COLOR_GREEN2, "|_____________________TELÉFONOS AYUDA______________________|");
	SendClientMessage(playerid, COLOR_STAT1, "/telefono - /llamar - /contestar - /colgar");
	SendClientMessage(playerid, COLOR_STAT1, "/altavoz - /transferir");
	SendClientMessage(playerid, COLOR_GREEN2, "|_____________________________________________________|");
	return 1;
}

CMD:ayudanegocio(playerid, params[])
{
	SendClientMessage(playerid, COLOR_GREEN2, "|_____________________NEGOCIOS AYUDA______________________|");
	SendClientMessage(playerid, COLOR_STAT1, "/comprarnegocio /vendernegocio /negociomenu /negocioseguro");
	SendClientMessage(playerid, COLOR_STAT1, "/darempleo - /empleados");
	SendClientMessage(playerid, COLOR_GREEN2, "|_____________________________________________________|");
	return 1;
}

CMD:ayudapremium(playerid, params[])
{
	SendClientMessage(playerid, COLOR_GREEN2, "|_____________________PREMIUM AYUDA______________________|");
	SendClientMessage(playerid, COLOR_YELLOW2,"NOTA: Si requieres más ayuda, abre ticket en el discord");
	SendClientMessage(playerid, COLOR_STAT1, "/viplocker /vendercoinsvip /togvip");
	SendClientMessage(playerid, COLOR_STAT1, "/automensaje /ayudacoinsvip /vip");
	SendClientMessage(playerid, COLOR_STAT1, "/spawncasa /skinpremium /repararpremium /ponerneon /neon");	
	SendClientMessage(playerid, COLOR_GREEN2, "|_____________________________________________________|");
	return 1;
}

CMD:factionhelp(playerid, params[])
{
	new id = InfoPersonaje[playerid][pMiembro];
	if (InfoFaccion[id][fTipo] != 0) 
		return SendClientMessage(playerid, COLOR_LIGHTRED, "ERROR: {FFFFFF}You're not authorized to use this command.");

			if (InfoPersonaje[playerid][pMiembro] && InfoFaccion[id][fTipo] == 1)
			{
			SendClientMessage(playerid, COLOR_LIGHTRED, "[ ! ]{FFFFFF} /(gov)ernment (/r)adio (/d)epartments (/m)egaphone /duty /uniform /door /tolls /cuff,");
			SendClientMessage(playerid, COLOR_LIGHTRED, "[ ! ]{FFFFFF} /uncuff /callsign /checkplate /frisk /revoke /rb(1-10) /rrb(1-10) /cone /disband /siren /siren2,");
			SendClientMessage(playerid, COLOR_LIGHTRED, "[ ! ]{FFFFFF} /arrest /mdc /tazer /rubberbullets /vehiclefine /vehiclefines /fine /fines /authorizeswat /deauthorizeswat");
			} 
			else
			{
			if (InfoFaccion[id][fTipo] == 3)
			SendClientMessage(playerid, COLOR_LIGHTRED, "[ ! ]{FFFFFF} /(gov)ernment (/r)adio (/d)epartments (/m)egaphone /duty /uniform /door /tolls /cuff,");
			}
	return 1;
}

CMD:heridas(playerid, params[])
{
	new id;
	if (sscanf(params, "u", id)) return SendClientMessage(playerid, 0xFF6347FF, "Utiliza: {FFFFFF}/heridas (PlayerID)");
	if (!IsPlayerConnected(id)) return SendClientMessage(playerid, 0xFF6347FF, "Usuario no conectado.");
	if (!CercaDelWeon(7.0, playerid, id)) return SendClientMessage(playerid, COLOR_GREY, "Estás lejos del jugador.");
	ShowPlayerDamages(id, playerid);
	return 1;
}

CMD:gotogarage(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new garageID;
	if (sscanf(params, "d", garageID)) return SendClientMessage(playerid, COLOR_WHITE, "USA: /gotogarage [garageid]");
	if (garageID < 1 || garageID > MAX_GARAGES) return SendClientMessage(playerid, COLOR_GREY, "* ID de garage inválido.");
	if (InfoGarages[garageID][gExteriorPos][0] == 0.0) return SendClientMessage(playerid, COLOR_GREY, "* ID de garage inválido.");
	SetPosEx(playerid, InfoGarages[garageID][gExteriorPos][0], InfoGarages[garageID][gExteriorPos][1], InfoGarages[garageID][gExteriorPos][2], InfoGarages[garageID][gExteriorPos][3], 0, 0, 1);
	return 1;
}
CMD:irgaraje(playerid, params[]) return cmd_gotogarage(playerid, params);

CMD:gtipo(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	new garageID, gCType, strings[280];
	if (sscanf(params, "dd", garageID, gCType))
	{
		SendClientMessage(playerid, COLOR_GREY, "USA: /gtipo [garageid] [tipo]");
		SendClientMessage(playerid, COLOR_GREY, "Pequeño 1, Mediano 2, Grande 3.");
		return 1;
	}
	if (garageID < 1 || garageID > MAX_GARAGES) return SendClientMessage(playerid, COLOR_GREY, "* ID de garage inválido.");
	if (InfoGarages[garageID][gExteriorPos][0] == 0.0) return SendClientMessage(playerid, COLOR_GREY, "* ID de garage inválido.");
	InfoGarages[garageID][gType] = gCType;
	format(strings, sizeof(strings), "Cambiaste el tipo del garage ID %d al tipo %d.", garageID, gCType);
	SendClientMessage(playerid, COLOR_WHITE, strings);
	update_label_garaje(garageID);
	SaveVarGarages(1,garageID, "Tipo",InfoGarages[garageID][gType]);
	return 1;
}

CMD:agaragename(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	new strings[280], x, gname[32];
	if (sscanf(params, "ds[24]", x, gname)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /agaragenme (ID) (Nombre del Garage)");
	if (x < 1 || x > MAX_GARAGES) return SendClientMessage(playerid, COLOR_GREY, "* ID de garage inválido.");
	if (InfoGarages[x][gExteriorPos][0] == 0.0) return SendClientMessage(playerid, COLOR_GREY, "* ID de garage inválido.");
	if (strlen(gname) >= 33 || strlen(gname) < 1) return SendClientMessage(playerid, COLOR_GREY, "* Muchos carácteres sólo 1 - 32.");
	format(strings, sizeof(strings), "Cambiaste el nombre del garage ID %d garage a '%s'.",x, gname);
	SendClientMessage(playerid, COLOR_WHITE, strings);
	alm(InfoGarages[x][gName], gname);
	update_label_garaje(x);
	saveGarages(x);
	return 1;
}

CMD:gprecio(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	new garageID, garagePrice, strings[280];
	if (sscanf(params, "dd", garageID, garagePrice)) return SendClientMessage(playerid, COLOR_GREY, "USA: /gprecio [garageid] [precio]");
	if (garageID < 1 || garageID > garageID) return SendClientMessage(playerid, COLOR_GREY, "* ID de garage inválido.");
	if (InfoGarages[garageID][gExteriorPos][0] == 0.0) return SendClientMessage(playerid, COLOR_GREY, "* ID de garage inválido.");
	format(strings, sizeof(strings), "Cambiaste el precio del garage ID %d a $%d.", garageID, garagePrice);
	SendClientMessage(playerid, COLOR_WHITE, strings);
	InfoGarages[garageID][gPrice] = garagePrice;
	update_label_garaje(garageID);
	SaveVarGarages(1,garageID, "Precio",InfoGarages[garageID][gPrice]);
	return 1;
}

update_label_garaje(garageID)
{
	new strings[280];
	if (!strcmp("Sin Dueño", InfoGarages[garageID][gOwner]))
	{
		switch (InfoGarages[garageID][gLocked])
		{
			case 1: format(strings, sizeof(strings), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n{A4A4A4}Precio: {FFFFFF}$%d\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FAAC58}Para comprarlo, usa /comprargarage.", garageID, TipoGarage(garageID), InfoGarages[garageID][gPrice], InfoGarages[garageID][gLevel]);
			case 0: format(strings, sizeof(strings), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n{A4A4A4}Precio: {FFFFFF}$%d\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FAAC58}Para comprarlo, usa /comprargarage.", garageID, TipoGarage(garageID), InfoGarages[garageID][gPrice], InfoGarages[garageID][gLevel]);
		}
	}
	else
	{
		switch (InfoGarages[garageID][gLocked])
		{
			case 1: format(strings, sizeof(strings), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n%s\n{A4A4A4}Propietario: {FFFFFF}%s\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FF0000}[Garaje Cerrado]", garageID, TipoGarage(garageID), InfoGarages[garageID][gName], InfoGarages[garageID][gOwner], InfoGarages[garageID][gLevel]);
			case 0: format(strings, sizeof(strings), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n%s\n{A4A4A4}Propietario: {FFFFFF}%s\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FAAC58}Para entrar con el vehículo, usa /entrar.", garageID, TipoGarage(garageID), InfoGarages[garageID][gName], InfoGarages[garageID][gOwner], InfoGarages[garageID][gLevel]);
		}
	}
	UpdateDynamic3DTextLabelText(InfoGarages[garageID][gLabelID], -1, strings);
}

CMD:gnivel(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	new garageID, garageLevel, strings[280];
	if (sscanf(params, "dd", garageID, garageLevel)) return SendClientMessage(playerid, COLOR_GREY, "USA: /gnivel [garageid] [precio]");
	if (garageID < 1 || garageID > garageID) return SendClientMessage(playerid, COLOR_GREY, "* ID de garage inválido.");
	if (InfoGarages[garageID][gExteriorPos][0] == 0.0) return SendClientMessage(playerid, COLOR_GREY, "* ID de garage inválido.");
	format(strings, sizeof(strings), "Cambiaste el nivel del garage ID %d a %d.", garageID, garageLevel);
	SendClientMessage(playerid, COLOR_WHITE, strings);
	InfoGarages[garageID][gLevel] = garageLevel;
	update_label_garaje(garageID);
	SaveVarGarages(1,garageID, "Nivel",InfoGarages[garageID][gLevel]);
	return 1;
}

CMD:abrirporton(playerid, params[])
{
    //#pragma unused params
	if(getPlayerGaragesID(playerid) >= 1)
	{
	    new x = getPlayerGaragesID(playerid);
	    new strings[280];
	    switch(InfoGarages[x][gLocked])
		{
			case 0: return SendClientMessage(playerid, COLOR_WHITE, "Usa /cerrarporton.");
			case 1:
			{
				format(strings, sizeof(strings), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n%s\n{A4A4A4}Propietario: {FFFFFF}%s\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FAAC58}Para entrar con el vehículo, usa /entrar.",
				x, TipoGarage(x), InfoGarages[x][gName], InfoGarages[x][gOwner], InfoGarages[x][gLevel]);
                UpdateDynamic3DTextLabelText(InfoGarages[x][gLabelID], -1, strings);
				InfoGarages[x][gLocked] = 0;
			    SendClientMessage(playerid, COLOR_WHITE, "El porton del garage fue abierto.");
			    SaveVarGarages(1,x, "Locked",InfoGarages[x][gLocked]);
			}
		}
	}
	else SendClientMessage(playerid, COLOR_GREY, "* No tienes un garage para hacer esto.");
	return 1;
}
CMD:cerrarporton(playerid, params[])
{
    //#pragma unused params
	if(getPlayerGaragesID(playerid) >= 1)
	{
	    new x = getPlayerGaragesID(playerid);
	    new strings[280];
	    switch(InfoGarages[x][gLocked])
		{
			case 0:
			{
				format(strings, sizeof(strings), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n%s\n{A4A4A4}Propietario: {FFFFFF}%s\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FF0000}[Garaje Cerrado]",
				x, TipoGarage(x), InfoGarages[x][gName], InfoGarages[x][gOwner], InfoGarages[x][gLevel]);
                UpdateDynamic3DTextLabelText(InfoGarages[x][gLabelID], -1, strings);
				InfoGarages[x][gLocked] = 1;
				SendClientMessage(playerid, COLOR_WHITE, "El porton del garage fue cerrado.");
				SaveVarGarages(1,x, "Locked",InfoGarages[x][gLocked]);
			}
			case 1: return SendClientMessage(playerid, COLOR_WHITE, "Usa /abrirporton.");
		}
	}
	else SendClientMessage(playerid, COLOR_GREY, "* No tienes un garage para hacer esto.");
	return 1;
}

CMD:movergarage(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	new garageID, subject[32];
	if (sscanf(params, "ds[32]", garageID, subject)) return SendClientMessage(playerid, COLOR_GREY, "USA: /movergarage [ID de Garage] [exterior/interior]");
	if (garageID < 1 || garageID > garageID) return SendClientMessage(playerid, COLOR_GREY, "* ID de garage inválido.");
	if (InfoGarages[garageID][gExteriorPos][0] == 0.0) return SendClientMessage(playerid, COLOR_GREY, "* ID de garage inválido.");
	if (strcmp(subject, "exterior", true) == 0)
	{
		GetPlayerPos(playerid, InfoGarages[garageID][gExteriorPos][0], InfoGarages[garageID][gExteriorPos][1], InfoGarages[garageID][gExteriorPos][2]);
		GetPlayerFacingAngle(playerid, InfoGarages[garageID][gExteriorPos][3]);
		DestroyDynamic3DTextLabel(InfoGarages[garageID][gLabelID]);
		DestroyDynamicPickup(InfoGarages[garageID][gPickupID]);
		new labelString[256];
		if (!strcmp("Sin Dueño", InfoGarages[garageID][gOwner]))
		{
			switch (InfoGarages[garageID][gLocked])
			{
				case 1: format(labelString, sizeof(labelString), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n{A4A4A4}Precio: {FFFFFF}$%d\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FAAC58}Para comprarlo, usa /comprargarage.", garageID, TipoGarage(garageID), InfoGarages[garageID][gPrice], InfoGarages[garageID][gLevel]);
				case 0: format(labelString, sizeof(labelString), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n{A4A4A4}Precio: {FFFFFF}$%d\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FAAC58}Para comprarlo, usa /comprargarage.", garageID, TipoGarage(garageID), InfoGarages[garageID][gPrice], InfoGarages[garageID][gLevel]);
			}
			InfoGarages[garageID][gLabelID] = CreateDynamic3DTextLabel(labelString, -1, InfoGarages[garageID][gExteriorPos][0], InfoGarages[garageID][gExteriorPos][1], InfoGarages[garageID][gExteriorPos][2], 100, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, -1, -1, -1, 10.0);
			InfoGarages[garageID][gPickupID] = CreateDynamicPickup(19133, 23, InfoGarages[garageID][gExteriorPos][0], InfoGarages[garageID][gExteriorPos][1], InfoGarages[garageID][gExteriorPos][2], 0, 0, -1, 250);
		}
		else
		{
			switch (InfoGarages[garageID][gLocked])
			{
				case 1: format(labelString, sizeof(labelString), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n%s\n{A4A4A4}Propietario: {FFFFFF}%s\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FF0000}[Garaje Cerrado]", garageID, TipoGarage(garageID), InfoGarages[garageID][gName], InfoGarages[garageID][gOwner], InfoGarages[garageID][gLevel]);
				case 0: format(labelString, sizeof(labelString), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n%s\n{A4A4A4}Propietario: {FFFFFF}%s\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FAAC58}Para entrar con el vehículo, usa /entrar.", garageID, TipoGarage(garageID), InfoGarages[garageID][gName], InfoGarages[garageID][gOwner], InfoGarages[garageID][gLevel]);
			}
			InfoGarages[garageID][gLabelID] = CreateDynamic3DTextLabel(labelString, -1, InfoGarages[garageID][gExteriorPos][0], InfoGarages[garageID][gExteriorPos][1], InfoGarages[garageID][gExteriorPos][2], 100, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, -1, -1, -1, 10.0);
			InfoGarages[garageID][gPickupID] = CreateDynamicPickup(19133, 23, InfoGarages[garageID][gExteriorPos][0], InfoGarages[garageID][gExteriorPos][1], InfoGarages[garageID][gExteriorPos][2], 0, 0, -1, 250);
		}
		SendClientMessage(playerid, COLOR_WHITE, "El exterior del garage ha sido cambiado.");
	}
	else if (strcmp(subject, "interior", true) == 0)
	{
		GetPlayerFacingAngle(playerid, InfoGarages[garageID][gInteriorPos][3]);
		GetPlayerPos(playerid, InfoGarages[garageID][gInteriorPos][0], InfoGarages[garageID][gInteriorPos][1], InfoGarages[garageID][gInteriorPos][2]);
		InfoGarages[garageID][gInterior] = GetPlayerInterior(playerid);
		SendClientMessage(playerid, COLOR_WHITE, "El interior del garage ha sido cambiado.");
	}
	saveGarages(garageID);
	return 1;
}

CMD:nombregarage(playerid, params[])
{
	if(getPlayerGaragesID(playerid) >= 1)
	{
	    if(isnull(params)) return SendClientMessage(playerid, COLOR_GREY, "USA: /nombregarage [Nombre]");
	    if(strlen(params) >= 33 || strlen(params) < 1) return SendClientMessage(playerid, COLOR_GREY, "* Muchos carácteres sólo 1 - 32.");
	    new x = getPlayerGaragesID(playerid);
	    new strings[280];
	    format(strings, sizeof(strings), "Cambiaste el nombre de tu garage a '%s'.", params);
	    SendClientMessage(playerid, COLOR_WHITE, strings);
		format(InfoGarages[x][gName], 32, params);
	    switch(InfoGarages[x][gLocked])
		{
			case 1: format(strings, sizeof(strings), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n%s\n{A4A4A4}Propietario: {FFFFFF}%s\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FF0000}[Garaje Cerrado]",
			x, TipoGarage(x), InfoGarages[x][gName], InfoGarages[x][gOwner], InfoGarages[x][gLevel]);
			case 0: format(strings, sizeof(strings), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n%s\n{A4A4A4}Propietario: {FFFFFF}%s\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FAAC58}Para entrar con el vehículo, usa /entrar.",
			x, TipoGarage(x), InfoGarages[x][gName], InfoGarages[x][gOwner], InfoGarages[x][gLevel]);
		}
		UpdateDynamic3DTextLabelText(InfoGarages[x][gLabelID], -1, strings);
		saveGarages(x);
	}
	else SendClientMessage(playerid, COLOR_GREY, "* No tienes un negocio para hacer esto.");
	return 1;
}
CMD:vendergarage(playerid, params[])
{
    #pragma unused params
	if(IsPlayerConnected(playerid))
	{
	    new garageID = getPlayerGaragesID(playerid);
	    if(garageID < 1) return 1;
	    new labelString[256];
		GivePlayerCash(playerid, InfoGarages[garageID][gPrice]/2, "vender de garage");
		Tax -= InfoGarages[garageID][gPrice]/2;
        format(InfoGarages[garageID][gOwner], MAX_PLAYER_NAME, "Sin Dueño");
        format(labelString, sizeof(labelString), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n{A4A4A4}Precio: {FFFFFF}$%d\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FAAC58}Para comprarlo, usa /comprargarage.", garageID, TipoGarage(garageID), InfoGarages[garageID][gPrice], InfoGarages[garageID][gLevel]);
        DestroyDynamicPickup(InfoGarages[garageID][gPickupID]);
        DestroyDynamic3DTextLabel(InfoGarages[garageID][gLabelID]);
		InfoGarages[garageID][gLabelID] = CreateDynamic3DTextLabel(labelString, -1, InfoGarages[garageID][gExteriorPos][0], InfoGarages[garageID][gExteriorPos][1], InfoGarages[garageID][gExteriorPos][2], 100, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, -1, -1, -1, 10.0);
		InfoGarages[garageID][gPickupID] = CreateDynamicPickup(19133, 23, InfoGarages[garageID][gExteriorPos][0], InfoGarages[garageID][gExteriorPos][1], InfoGarages[garageID][gExteriorPos][2], 0, 0, -1, 250);
		InfoGarages[garageID][gLocked] = 1;
		format(labelString, sizeof(labelString), "Garage Vendido! El estado te pagó %d por tu garage.", InfoGarages[garageID][gPrice]/2);
		SendClientMessage(playerid, COLOR_WHITE, labelString);
		saveGarages(garageID);
	}
	else SendClientMessage(playerid, COLOR_GREY, "No conectado");
	return 1;
}

CMD:avegarage(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	new garageID, labelString[280];
	if (sscanf(params, "d", garageID)) return SendClientMessage(playerid, COLOR_GREY, "USA: /avegarage [garageid]");
	if (garageID < 1 || garageID > garageID) return SendClientMessage(playerid, COLOR_GREY, "* ID de garage inválido.");
	if (InfoGarages[garageID][gExteriorPos][0] == 0.0) return SendClientMessage(playerid, COLOR_GREY, "* ID de garage inválido.");
	format(InfoGarages[garageID][gOwner], MAX_PLAYER_NAME, "Sin Dueño");
	DestroyDynamicPickup(InfoGarages[garageID][gPickupID]);
	DestroyDynamic3DTextLabel(InfoGarages[garageID][gLabelID]);
	format(labelString, sizeof(labelString), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n{A4A4A4}Precio: {FFFFFF}$%d\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FAAC58}Para comprarlo, usa /comprargarage.", garageID, TipoGarage(garageID), InfoGarages[garageID][gPrice], InfoGarages[garageID][gLevel]);
	InfoGarages[garageID][gLabelID] = CreateDynamic3DTextLabel(labelString, -1, InfoGarages[garageID][gExteriorPos][0], InfoGarages[garageID][gExteriorPos][1], InfoGarages[garageID][gExteriorPos][2], 100, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, -1, -1, -1, 10.0);
	InfoGarages[garageID][gPickupID] = CreateDynamicPickup(19133, 23, InfoGarages[garageID][gExteriorPos][0], InfoGarages[garageID][gExteriorPos][1], InfoGarages[garageID][gExteriorPos][2], 0, 0, -1, 250);
	InfoGarages[garageID][gLocked] = 1;
	format(labelString, sizeof(labelString), "* Vendiste con comando administrativo el garage ID %d.", garageID);
	SendClientMessage(playerid, COLOR_WHITE, labelString);
	saveGarages(garageID);
	return 1;
}

CMD:casagarage(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	new casa;
	if (sscanf(params, "d", casa)) return SendClientMessage(playerid, COLOR_GREY, "USA: /casagarage (ID Casa) (ID Garage)");
	return 1;
}


CMD:creargarage(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	/*new casa, tipo;
	if (sscanf(params, "dd", casa, tipo)) return SendClientMessage(playerid, COLOR_GREY, "USA: /creargarage (ID Casa) (Tipo Garage)");

	

	Loop(garage, MAX_GARAGES, 1) if()
	{

	}
*/
	new Float: floatPos[3];
	if (!strcmp(params, "exterior", true))
	{
		GetPlayerPos(playerid, floatPos[0], floatPos[1], floatPos[2]);
		SetPVarFloat(playerid, "pBeX", floatPos[0]);
		SetPVarFloat(playerid, "pBeY", floatPos[1]);
		SetPVarFloat(playerid, "pBeZ", floatPos[2]);
		SetPVarInt(playerid, "gExt", 1);
		SendClientMessage(playerid, COLOR_WHITE, "* Exterior de garage configurado.");
		return 1;
	}
	else if (!strcmp(params, "interior", true))
	{
		GetPlayerPos(playerid, floatPos[0], floatPos[1], floatPos[2]);
		SetPVarFloat(playerid, "pBiX", floatPos[0]);
		SetPVarFloat(playerid, "pBiY", floatPos[1]);
		SetPVarFloat(playerid, "pBiZ", floatPos[2]);
		SetPVarInt(playerid, "pBiID", GetPlayerInterior(playerid));
		SetPVarInt(playerid, "gInt", 1);
		SendClientMessage(playerid, COLOR_WHITE, "* Interior de garage configurado.");
		return 1;
	}
	else if (!strcmp(params, "completar", true))
	{
		if (GetPVarInt(playerid, "gExt") != 1 || GetPVarInt(playerid, "gInt") != 1) return SendClientMessage(playerid, COLOR_GREY, "* Todavia no has configurado el interior/exterior del garage.");
		new i,labelString[256];
		for (new x = 1; x < MAX_GARAGES; x++)
		{
			if(InfoGarages[x][gType] == 0)
			{
				i = x;
				printf("ID LIBRE %d",x);
				break;
			}
		}
		if (InfoGarages[i][gType] == 0)
		{
			InfoGarages[i][gExteriorPos][0] = GetPVarFloat(playerid, "pBeX");
			InfoGarages[i][gExteriorPos][1] = GetPVarFloat(playerid, "pBeY");
			InfoGarages[i][gExteriorPos][2] = GetPVarFloat(playerid, "pBeZ");
			InfoGarages[i][gInteriorPos][0] = GetPVarFloat(playerid, "pBiX");
			InfoGarages[i][gInteriorPos][1] = GetPVarFloat(playerid, "pBiY");
			InfoGarages[i][gInteriorPos][2] = GetPVarFloat(playerid, "pBiZ");
			InfoGarages[i][gInterior] = GetPVarInt(playerid, "pBiID");
			alm(InfoGarages[i][gOwner], "Sin Dueño");
			alm(InfoGarages[i][gName], "Nombre del Garage");
			InfoGarages[i][gLocked] = 1;
			InfoGarages[i][gPrice] = 50000;
			InfoGarages[i][gLevel] = 5;
			format(labelString, sizeof(labelString), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n{A4A4A4}Precio: {FFFFFF}$%d\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FAAC58}Para comprarlo, usa /comprargarage.", i, TipoGarage(i), InfoGarages[i][gPrice], InfoGarages[i][gLevel]);
			InfoGarages[i][gLabelID] = CreateDynamic3DTextLabel(labelString, -1, InfoGarages[i][gExteriorPos][0], InfoGarages[i][gExteriorPos][1], InfoGarages[i][gExteriorPos][2], 100, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, -1, -1, -1, 10.0);
			InfoGarages[i][gPickupID] = CreateDynamicPickup(19133, 23, InfoGarages[i][gExteriorPos][0], InfoGarages[i][gExteriorPos][1], InfoGarages[i][gExteriorPos][2], 0, 0, -1, 250);
			saveGarages(i);
			DeletePVar(playerid, "pBeX");
			DeletePVar(playerid, "pBeY");
			DeletePVar(playerid, "pBeZ");
			DeletePVar(playerid, "pBiX");
			DeletePVar(playerid, "pBeY");
			DeletePVar(playerid, "pBeZ");
			DeletePVar(playerid, "pBiID");
			SetPlayerInterior(playerid, 0);
			SetPlayerVirtualWorld(playerid, 0);
			SetPlayerPos(playerid, InfoGarages[i][gExteriorPos][0], InfoGarages[i][gExteriorPos][1], InfoGarages[i][gExteriorPos][2]);
			SendClientMessage(playerid, COLOR_WHITE, "* Garage creado!");
			return 1;
		}
		SendClientMessage(playerid, COLOR_GREY, "* Ya no hay slots disponibles para crear garages.");
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "USA: /creargarage [interior/exterior/completar]");
	return 1;
}

CMD:comprargarage(playerid, params[])
{
    //#pragma unused params
    if(IsPlayerConnected(playerid))
	{
        for(new x = 0; x < MAX_GARAGES; x++)
		{
			if(IsPlayerInRangeOfPoint(playerid, 5, InfoGarages[x][gExteriorPos][0], InfoGarages[x][gExteriorPos][1], InfoGarages[x][gExteriorPos][2]))
			{
				if(!strcmp(InfoGarages[x][gOwner], "Sin Dueño", true))
				{
				    if(InfoGarages[x][gPrice] <= 0) return SendClientMessage(playerid, COLOR_GREY, "[Error] Este negocio ha sido bloqueado por un administrador.");
					if(getPlayerGaragesID(playerid) >= 1) return SendClientMessage(playerid, COLOR_GREY, "[Error] Ya eres dueño de un negocio.");
					if(GetPlayerCash(playerid) >= InfoGarages[x][gPrice])
					{
						GivePlayerCash(playerid,-InfoGarages[x][gPrice], "comprar garage");
						Tax += InfoGarages[x][gPrice];
						new labelString[256];
						new Nombre[MAX_PLAYER_NAME];
		   				GetPlayerName(playerid, Nombre, sizeof(Nombre));
						strcpy(InfoGarages[x][gOwner], Nombre, MAX_PLAYER_NAME);
						DestroyDynamicPickup(InfoGarages[x][gPickupID]);
						switch(InfoGarages[x][gLocked])
						{
						    case 1: format(labelString, sizeof(labelString), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n%s\n{A4A4A4}Propietario: {FFFFFF}%s\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FF0000}[Garaje Cerrado]", x, TipoGarage(x), InfoGarages[x][gName], InfoGarages[x][gOwner], InfoGarages[x][gLevel]);
							case 0: format(labelString, sizeof(labelString), "[ID: %d]\n{A4A4A4}Garaje tipo: {FFFFFF}%s\n%s\n{A4A4A4}Propietario: {FFFFFF}%s\n{A4A4A4}Nivel: {FFFFFF}%d\n\n{FAAC58}Para entrar con el vehículo, usa /entrar.", x, TipoGarage(x), InfoGarages[x][gName], InfoGarages[x][gOwner], InfoGarages[x][gLevel]);
						}
						UpdateDynamic3DTextLabelText(InfoGarages[x][gLabelID], -1, labelString);
						InfoGarages[x][gPickupID] = CreateDynamicPickup(19133, 23, InfoGarages[x][gExteriorPos][0], InfoGarages[x][gExteriorPos][1], InfoGarages[x][gExteriorPos][2], 0, 0, -1, 250);
						SendClientMessage(playerid, COLOR_GREY, "* Felicitaciones por tu compra!");
						saveGarages(x);
					}
					else return SendClientMessage(playerid, COLOR_GREY, "* No tienes suficiente dinero para comprar este garage.");
				}
				else return SendClientMessage(playerid, COLOR_GREY, "* No puedes comprar un garage con dueño.");
			}
		}
    }
	return 1;
	}

//comandos toys renovado by EdinsonWalker (18/01/2020)
CMD:ayudatoy(playerid)
{
	SendClientMessage(playerid, COLOR_GENERAL, "Ayuda - Accesorios (Toys)");
	SendClientMessage(playerid, COLOR_WHITE, "Para comprar un toy en la tienda usa: {00AE57}/ctoys");
	SendClientMessage(playerid, COLOR_WHITE, "Para abrir el menú de toys: {00AE57}/toys");
	SendClientMessage(playerid, COLOR_WHITE, "Para colocarte todos tus toys usa: {00AE57}/ptoys");
	SendClientMessage(playerid, COLOR_WHITE, "Para retirarte todos tus toys usa: {00AE57}/qtoys");
	SendClientMessage(playerid, COLOR_WHITE, "Para colocar o retirar un determinado toy usa: {00AE57}/toy (0-6 slot)");
	return 1;
}

CMD:toys(playerid)
{
	new dialog[1024], dialog2[256], count = 0;
	strcat(dialog, "Objeto\tParte\tColocado\n");
	Loop(x, 7, 0)
	{
		if (InfoPersonaje[playerid][ptModelo][x] != 0) format(dialog2, sizeof dialog2, "{FFFFFF}%s\t{9A9A9A}%s\t%s\n", GetNameToy(playerid, x), GetParteToy(playerid, x), GetStatusToy(playerid, x)), count++;
		else alm(dialog2, "{CCCCCC}—\n");
		strcat(dialog, dialog2);
	}
	if (count == 0) return Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "{00AE57}Toys", "{EBEBEB}No tienes ningún {00AE57}toy{EBEBEB} en tu cuenta.", "Cerrar", "");
	Dialog_Show(playerid, ShowToys, DIALOG_STYLE_TABLIST_HEADERS, "{00AE57}Toys", dialog, "Continuar", "Salir");
	return 1;
}

Dialog:ShowToys(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new id = listitem;
	if (InfoPersonaje[playerid][ptModelo][id] == 0) return SendClientMessage(playerid, COLOR_WHITE, "No tienes ningún toy en ese slot.");
 	slotselection[playerid] = id;
	indice_toy(playerid, id);
	return 1;
}

indice_toy(playerid, id)
{
	new gtitulo[128], gformat[250], dialog[1028];
	format(gtitulo, sizeof gtitulo, "Toy: {00AE57}%s", GetNameToy(playerid, id));
	if (InfoCuenta[playerid][jVIP] == 3 || InfoCuenta[playerid][jVIP] == 4)
	{
		format(gformat, sizeof gformat, "{FFFFFF}Edición personalizada\nEditar parte: {00AE57}%s{FFFFFF}\n%s\nEliminar toy\n", GetParteToy(playerid, id), (InfoPersonaje[playerid][ptColocado][id]) ? ("{ED3F3F}Retirar toy{FFFFFF}") : ("{64CA46}Colocar toy{FFFFFF}"));
		strcat(dialog, gformat);
		format(gformat, sizeof gformat, "{FFFFFF}Editar color: %s", GetColorToy(playerid, id));
		strcat(dialog, gformat);
	}
	else
	{
		format(gformat, sizeof gformat, "{FFFFFF}Edición personalizada\nEditar parte: {00AE57}%s{FFFFFF}\n%s\nEliminar toy", GetParteToy(playerid, id), (InfoPersonaje[playerid][ptColocado][id]) ? ("{ED3F3F}Retirar toy{FFFFFF}") : ("{64CA46}Colocar toy{FFFFFF}"));
		strcat(dialog, gformat);
	}
	Dialog_Show(playerid, Show2Toys, DIALOG_STYLE_LIST, gtitulo, dialog, "Continuar", "Volver");
	return 1;
}

Dialog:Show2Toys(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_toys(playerid);
	new x = slotselection[playerid];
	if (x == -1) return 1;
	switch (listitem)
	{
		case 0: //edición personalizada
		{
			SetPlayerAttachedObject(playerid, x, InfoPersonaje[playerid][ptModelo][x], InfoPersonaje[playerid][ptHueso][x], InfoPersonaje[playerid][ptPosX][x], InfoPersonaje[playerid][ptPosY][x], InfoPersonaje[playerid][ptPosZ][x],
			InfoPersonaje[playerid][ptRotX][x], InfoPersonaje[playerid][ptRotY][x], InfoPersonaje[playerid][ptRotZ][x], InfoPersonaje[playerid][ptScaleX][x], InfoPersonaje[playerid][ptScaleY][x], InfoPersonaje[playerid][ptScaleZ][x],
			SetColorToy(InfoPersonaje[playerid][ptColor][x]));
			EditAttachedObject(playerid, x);
			Editing[playerid] = 1;
			SendClientMessage(playerid, 0xFFFFFFFF, "* Mantén presionado {00AE57}~k~~PED_SPRINT~{FFFFFF} para cambiar la posición de la cámara.");
		}
		case 1: //editar parte
		{
			new gtitulo[128], gformat[340];
			format(gtitulo, sizeof gtitulo, "Parte actual: {00AE57}%s", GetParteToy(playerid, x));
			format(gformat, sizeof gformat, "Columna vertebral\nCabeza\nBrazo izquierdo\nBrazo derecho\nMano izquierda\nMano derecha\nMuslo izquierdo\nMuslo derecho\n\
			Pie izquierdo\nPie derecho\nPantorrilla derecha\nPantorrilla izquierda\nAntebrazo izquierdo\nAntebrazo derecho\nClavicula izquierda\nClavicula derecha\nCuello\nQuijada");
			Dialog_Show(playerid, EditarParteToy, DIALOG_STYLE_LIST, gtitulo, gformat, "Continuar", "Volver");
		}
		case 2: //colocar/remover
		{
			new string[243];
			if (InfoPersonaje[playerid][ptColocado][x])
			{
				RemovePlayerAttachedObject(playerid, x);
				InfoPersonaje[playerid][ptColocado][x] = 0;
				format(string, sizeof string, "Te has retirado %s. ({FFFFFF}Parte: %s{ED3F3F})", GetNameToy(playerid, x), GetParteToy(playerid, x));
				SendClientMessage(playerid, 0xED3F3FFF, string);
			}
			else
			{
				SetPlayerAttachedObject(playerid, x, InfoPersonaje[playerid][ptModelo][x], InfoPersonaje[playerid][ptHueso][x], InfoPersonaje[playerid][ptPosX][x], InfoPersonaje[playerid][ptPosY][x], InfoPersonaje[playerid][ptPosZ][x],
				InfoPersonaje[playerid][ptRotX][x], InfoPersonaje[playerid][ptRotY][x], InfoPersonaje[playerid][ptRotZ][x], InfoPersonaje[playerid][ptScaleX][x], InfoPersonaje[playerid][ptScaleY][x], InfoPersonaje[playerid][ptScaleZ][x],
				SetColorToy(InfoPersonaje[playerid][ptColor][x]));
				InfoPersonaje[playerid][ptColocado][x] = 1;
				format(string, sizeof string, "Te has colocado %s. ({FFFFFF}Parte: %s{64CA46})", GetNameToy(playerid, x), GetParteToy(playerid, x));
				SendClientMessage(playerid, 0x64CA46FF, string);
			}
			ActualizarToy(playerid, x);
		}
		case 3: //eliminar toy
		{
			new gtitulo[128];
			format(gtitulo, sizeof gtitulo, "Toy: {00AE57}%s", GetNameToy(playerid, x));
			Dialog_Show(playerid, EliminarToy, DIALOG_STYLE_MSGBOX, gtitulo, "{FFFFFF}¿Estás seguro de eliminar este toy?", "Continuar", "Volver");
		}
		case 4: //personalizar color 1
		{
			new gtitulo[128], str[1024];
			format(gtitulo, sizeof gtitulo, "Color actual: %s", GetColorToy(playerid, x));
			format(str, sizeof str, "Color predeterminado\n");
			Loop(e, sizeof InfoColorToy, 0)
			{
	 			format(str, sizeof str, "%s{%.6s}%s\n", str, InfoColorToy[e][ctColor][2], InfoColorToy[e][ctNombre]);
			}
			Dialog_Show(playerid, ChangeToyColor, DIALOG_STYLE_LIST, gtitulo, str, "Continuar", "Volver");
		}
	}
	return 1;
}

Dialog:EditarParteToy(playerid, response, listitem, inputtext[])
{
	new x = slotselection[playerid], string[232];
	if (x == -1) return 1;
	if (!response) return indice_toy(playerid, x);
	InfoPersonaje[playerid][ptHueso][x] = listitem+1;
	if (InfoPersonaje[playerid][ptColocado][x] != 0)
	{
	    RemovePlayerAttachedObject(playerid, x);
		SetPlayerAttachedObject(playerid, x, InfoPersonaje[playerid][ptModelo][x], InfoPersonaje[playerid][ptHueso][x], InfoPersonaje[playerid][ptPosX][x], InfoPersonaje[playerid][ptPosY][x], InfoPersonaje[playerid][ptPosZ][x],
		InfoPersonaje[playerid][ptRotX][x], InfoPersonaje[playerid][ptRotY][x], InfoPersonaje[playerid][ptRotZ][x], InfoPersonaje[playerid][ptScaleX][x], InfoPersonaje[playerid][ptScaleY][x], InfoPersonaje[playerid][ptScaleZ][x],
		SetColorToy(InfoPersonaje[playerid][ptColor][x]));
	}
	ActualizarToy(playerid, x);
	format(string, sizeof string, "Editaste la parte del toy %s. ({FFFFFF}Parte: %s{00AE57})", GetNameToy(playerid, x), GetParteToy(playerid, x));
	SendClientMessage(playerid, 0x00AE57FF, string);
	cmd_toys(playerid);
	return 1;
}

Dialog:EliminarToy(playerid, response, listitem, inputtext[])
{
	new x = slotselection[playerid], string[232];
	if (x == -1) return 1;
	if (!response) return indice_toy(playerid, x);
	format(string, sizeof string, "Eliminaste el toy %s. ({FFFFFF}Parte: %s{8000FF})", GetNameToy(playerid, x), GetParteToy(playerid, x));
	SendClientMessage(playerid, 0x8000FFFF, string);
	if (IsPlayerAttachedObjectSlotUsed(playerid, x)) RemovePlayerAttachedObject(playerid, x);
	InfoPersonaje[playerid][ptModelo][x] = 0;
	InfoPersonaje[playerid][ptHueso][x] = 0;
	InfoPersonaje[playerid][ptPosX][x] = 0.0;
	InfoPersonaje[playerid][ptPosY][x] = 0.0;
	InfoPersonaje[playerid][ptPosZ][x] = 0.0;
	InfoPersonaje[playerid][ptPosX][x] = 0.0;
	InfoPersonaje[playerid][ptPosY][x] = 0.0;
	InfoPersonaje[playerid][ptPosZ][x] = 0.0;
	InfoPersonaje[playerid][ptScaleZ][x] = 0.0;
	InfoPersonaje[playerid][ptScaleY][x] = 0.0;
	InfoPersonaje[playerid][ptScaleX][x] = 0.0;
	InfoPersonaje[playerid][ptColocado][x] = 0;
	InfoPersonaje[playerid][ptColor][x] = -1;
	ActualizarToy(playerid, x);
	return 1;
}

Dialog:ChangeToyColor(playerid, response, listitem, inputtext[])
{
	new x = slotselection[playerid], string[195];
	if (x == -1) return 1;
	if (!response) return indice_toy(playerid, x);
	new color = listitem-1;
	InfoPersonaje[playerid][ptColor][x] = color;
	format(string, sizeof string, "Cambiaste el color de tu %s (%d) al %s", GetNameToy(playerid, x), x+1, GetColorToy(playerid, x));
	SendClientMessage(playerid, 0xEBEBEBFF, string);
	if (InfoPersonaje[playerid][ptColocado][x] != 0)
	{
		RemovePlayerAttachedObject(playerid, x);
		SetPlayerAttachedObject(playerid, x, InfoPersonaje[playerid][ptModelo][x], InfoPersonaje[playerid][ptHueso][x], InfoPersonaje[playerid][ptPosX][x], InfoPersonaje[playerid][ptPosY][x], InfoPersonaje[playerid][ptPosZ][x],
		InfoPersonaje[playerid][ptRotX][x], InfoPersonaje[playerid][ptRotY][x], InfoPersonaje[playerid][ptRotZ][x], InfoPersonaje[playerid][ptScaleX][x], InfoPersonaje[playerid][ptScaleY][x], InfoPersonaje[playerid][ptScaleZ][x],
		SetColorToy(InfoPersonaje[playerid][ptColor][x]));
	}
	ActualizarToy(playerid, x);
	return 1;
}

CMD:toy(playerid, params[])
{
	if (GetPVarInt(playerid, "EstaCrack") == 1) return SendClientMessage(playerid, COLOR_WHITE, "No puedes usar este comando en este momento.");
	new toyslot, string[128];
	if (sscanf(params, "d", toyslot)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /toy [slot (0-6)]");
	if (toyslot < 0 || toyslot > 6) return SendClientMessage(playerid, COLOR_GRAD1, "{FFFF00}[ERROR]:{FFFFFF} Los Slots de los toys son del número 0 al 6.");
	if (InfoPersonaje[playerid][ptModelo][toyslot] == 0) return SendClientMessage(playerid, COLOR_WHITE, "No tienes ningún toy en ese slot.");
	if (InfoPersonaje[playerid][ptColocado][toyslot])
	{
		format(string, sizeof string, "Te has retirado %s. ({FFFFFF}Parte: %s{ED3F3F})", GetNameToy(playerid, toyslot), GetParteToy(playerid, toyslot));
		SendClientMessage(playerid, 0xED3F3FFF, string);
		RemovePlayerAttachedObject(playerid, toyslot);
		InfoPersonaje[playerid][ptColocado][toyslot] = 0;
	}
	else
	{
		SetPlayerAttachedObject(playerid, toyslot, InfoPersonaje[playerid][ptModelo][toyslot], InfoPersonaje[playerid][ptHueso][toyslot], InfoPersonaje[playerid][ptPosX][toyslot], InfoPersonaje[playerid][ptPosY][toyslot], InfoPersonaje[playerid][ptPosZ][toyslot],
		InfoPersonaje[playerid][ptRotX][toyslot], InfoPersonaje[playerid][ptRotY][toyslot], InfoPersonaje[playerid][ptRotZ][toyslot], InfoPersonaje[playerid][ptScaleX][toyslot], InfoPersonaje[playerid][ptScaleY][toyslot], InfoPersonaje[playerid][ptScaleZ][toyslot],
		SetColorToy(InfoPersonaje[playerid][ptColor][toyslot]));
		InfoPersonaje[playerid][ptColocado][toyslot] = 1;
		format(string, sizeof string, "Te has colocado %s. ({FFFFFF}Parte: %s{64CA46})", GetNameToy(playerid, toyslot), GetParteToy(playerid, toyslot));
		SendClientMessage(playerid, 0x64CA46FF, string);
	}
	ActualizarToy(playerid, toyslot);
	return 1;
}

CMD:ptoys(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") == 1) return SendClientMessage(playerid, COLOR_WHITE, "No puedes usar este comando en este momento.");
	new count = 0, gformat[130];
	Loop(listitem, 7, 0) if (InfoPersonaje[playerid][ptModelo][listitem] != 0)
	{
		SetPlayerAttachedObject(playerid, listitem, InfoPersonaje[playerid][ptModelo][listitem], InfoPersonaje[playerid][ptHueso][listitem], InfoPersonaje[playerid][ptPosX][listitem], InfoPersonaje[playerid][ptPosY][listitem], InfoPersonaje[playerid][ptPosZ][listitem],
		InfoPersonaje[playerid][ptRotX][listitem], InfoPersonaje[playerid][ptRotY][listitem], InfoPersonaje[playerid][ptRotZ][listitem], InfoPersonaje[playerid][ptScaleX][listitem], InfoPersonaje[playerid][ptScaleY][listitem], InfoPersonaje[playerid][ptScaleZ][listitem],
		SetColorToy(InfoPersonaje[playerid][ptColor][listitem]));
		count++;
		InfoPersonaje[playerid][ptColocado][listitem] = 1;
		ActualizarToy(playerid, listitem);
	}
	if (count == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes toys.");
	if (count == 1) format(gformat, sizeof gformat, "Te has colocado 1 toy.");
	else format(gformat, sizeof gformat, "Te has colocado %d toys.", count);
	SendClientMessage(playerid, COLOR_GREEN, gformat);
	return 1;
}

CMD:qtoys(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") == 1) return SendClientMessage(playerid, COLOR_WHITE, "No puedes usar este comando en este momento.");
	new count = 0, gformat[130];
	Loop(listitem, 7, 0) if (InfoPersonaje[playerid][ptModelo][listitem] != 0)
	{
		RemovePlayerAttachedObject(playerid, listitem);
		count++;
		InfoPersonaje[playerid][ptColocado][listitem] = 0;
		ActualizarToy(playerid, listitem);
	}
	if (count == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes toys.");
	if (count == 1) format(gformat, sizeof gformat, "Te has removido 1 toy.", count);
	else format(gformat, sizeof gformat, "Te has removido %d toys.", count);
	SendClientMessage(playerid, COLOR_GREEN, gformat);
	return 1;
}

//nombre temporal admin
CMD:adminnombre(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	new string[256];
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /adminnombre (Nombre_Apellido)");
	if (!isnull(InfoPersonaje[playerid][pNombre_PD])) return SendClientMessage(playerid, COLOR_GREY, "Tienes activado el /identidad, sacátelo primero.");
	if (!isnull(InfoPersonaje[playerid][pNombre_Temporal])) //quitar
	{
	    //función
		alm(InfoPersonaje[playerid][pNombre_Temporal], "");
		SetPlayerName(playerid, InfoPersonaje[playerid][pNombre_Apellido]);
		//mensaje
		format(string, sizeof string, "Administración{FFFFFF} %s(%d) volvió a usar su nombre anterior (%s).", InfoCuenta[playerid][jApodo], playerid, InfoPersonaje[playerid][pNombre_Apellido]);
		SendAdminMessage(0xFF6347FF, string);
		format(string, sizeof string, "Tu nombre a sido cambiado al anterior: {5ABAFF}%s{FFFFFF}.", InfoPersonaje[playerid][pNombre_Apellido]);
		SendClientMessage(playerid, COLOR_WHITE, string);
	}
	else //poner
	{
		if (VerificarPersonaje(params) != 0) return SendClientMessage(playerid, COLOR_WHITE, "Ese nombre ya está registrado.");
	    //función
		alm(InfoPersonaje[playerid][pNombre_Temporal], params);
		SetPlayerName(playerid, InfoPersonaje[playerid][pNombre_Temporal]);
		//mensaje
		format(string, sizeof string, "Administración{FFFFFF} %s(%d) está temporalmente con el nombre {0097DF}%s{FFFFFF}.", InfoCuenta[playerid][jApodo], playerid, params);
		SendAdminMessage(0xFF6347FF, string);
		format(string, sizeof string, "Estás temporalmente con el nombre de {5ABAFF}%s{FFFFFF}.", params);
		SendClientMessage(playerid, COLOR_WHITE, string);
		format(string, sizeof string, "%s está usando temporalmente el nombre %s", InfoCuenta[playerid][jApodo], params);
		Log("LOGS/AdminNombre.log", string);
	}
	return 1;
}
CMD:nombreadmin(playerid, params[]) return cmd_adminnombre(playerid, params);

CMD:sentadilla(playerid)
{
	if (GetPlayerState(playerid) == PLAYER_STATE_ONFOOT) ApplyAnimation(playerid,"SUNBATHE", "Lay_Bac_in", 4.0, 0, 0, 0, 1, 0);
	return 1;
}

CMD:removegps(playerid) return DisablePlayerCheckpoint(playerid);

CMD:jetpack(playerid)
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_USEJETPACK);
	JetPack[playerid] = 1;
	SendClientMessage(playerid, COLOR_PURPLE, "Te colocaste jetpack.");
	return 1;
}

CMD:eject(playerid, params[])
{
	if (!IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GRAD2, "No estás en ningún vehículo!");
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GRAD2, "No eres conductor.");
	new string[180], playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /eject (PlayerID)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Jugador desconectado.");
	if (playerid2 == playerid) return SendClientMessage(playerid, COLOR_GRAD2, "{FFFF00}[ERROR]:{FFFFFF} No te puedes echar ati mismo.");
	if (GetPlayerVehicleID(playerid) != GetPlayerVehicleID(playerid2)) return SendClientMessage(playerid, COLOR_GRAD2, "El jugador no está en tu vehículo.");
	format(string, sizeof string, "hace caer a %s de su vehículo.", NombreJugador(playerid2));
	meuwu(playerid, string);
	RemovePlayerFromVehicle(playerid2);
	return 1;
}
CMD:expulsarveh(playerid, params[]) return cmd_eject(playerid, params);

CMD:entrar(playerid)
{
	if (InfoPersonaje[playerid][pSancionado] != 0) return 1;
	if (GetPVarInt(playerid, "EstaCrack") != 0) return 1;
	new gformat[240];
	//puertas dinámicas
	Loop(id, totalpuertas, 1) if (InfoPuerta[id][pdExteriorX] != 0.0)
	{
		new Float: radius = 1.5;
		if (InfoPuerta[id][pdStatusVehiculo] != 0) radius = 6.0; //new 23/01/2020
		if (IsPlayerInRangeOfPoint(playerid, radius, InfoPuerta[id][pdExteriorX], InfoPuerta[id][pdExteriorY], InfoPuerta[id][pdExteriorZ]) && InfoPersonaje[playerid][pInterior] == InfoPuerta[id][pdExteriorInt] && InfoPersonaje[playerid][pVirtualWorld] == InfoPuerta[id][pdExteriorVW])
		{
		    //nivel vip
			if (InfoCuenta[playerid][jVIP] < InfoPuerta[id][pdVIP])
			{
				format(gformat, sizeof gformat, "Acceso denegado, debes ser mínimo VIP %s.", GetNameVIP(InfoPuerta[id][pdVIP]));
				SendClientMessage(playerid, COLOR_GREY, gformat);
				return 1;
			}
			//nivel facción
 			if (InfoPuerta[id][pdFaccion] != 0)
			{
			    if (InfoPersonaje[playerid][pMiembro] != InfoPuerta[id][pdFaccion])
			    {
					format(gformat, sizeof gformat, "Acceso denegado, debes ser miembro de %s.", InfoFaccion[InfoPuerta[id][pdFaccion]][fLogo]);
					SendClientMessage(playerid, COLOR_GREY, gformat);
					return 1;
				}
			}
			//nivel admin
			if (GetPlayerAdmin(playerid, InfoPuerta[id][pdAdmin]) == 0)
			{
				format(gformat, sizeof gformat, "Acceso denegado, debes ser mínimo rango %d admin.", InfoPuerta[id][pdAdmin]);
				SendClientMessage(playerid, COLOR_GREY, gformat);
				return 1;
			}
			//busqueda captura
			if (InfoPuerta[id][pdEstrellas] != 0 && InfoPersonaje[playerid][pEstrellas] != 0)
			{
				SendClientMessage(playerid, COLOR_GREY, "Esta puerta esta restringida a personas con nivel de búsqueda.");
				return 1;
			}
			//load objects
			if (InfoPuerta[id][pdInteriorInt] != 0 || InfoPuerta[id][pdInteriorVW] != 0) LoadObjects(playerid);
			//vehicle
			if (InfoPuerta[id][pdStatusVehiculo] != 0 && GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
			{
			    new vehicleid = GetPlayerVehicleID(playerid);
				// Posición.
	         	SetVehiclePos(vehicleid, InfoPuerta[id][pdInteriorX], InfoPuerta[id][pdInteriorY], InfoPuerta[id][pdInteriorZ]);
	         	SetVehicleZAngle(vehicleid, InfoPuerta[id][pdInteriorR]);
	          	// Vehículo.
	         	LinkVehicleToInterior(vehicleid, InfoPuerta[id][pdInteriorInt]);
	          	SetVehicleExVirtualWorld(vehicleid, InfoPuerta[id][pdInteriorVW]);
	          	// Player.
	        	SetPlayerVirtualWorld(playerid, InfoPuerta[id][pdInteriorVW]);
	        	SetPlayerInterior(playerid, InfoPuerta[id][pdInteriorInt]);
	        	// new by EdinsonWalker (16-01-2020)
				foreach(new p: Player) if (IsPlayerInVehicle(p, vehicleid))
				{
					SetPlayerInterior(p, InfoPuerta[id][pdInteriorInt]);
					SetPlayerVirtualWorld(p, InfoPuerta[id][pdInteriorVW]);
				}
			}
			else
			{
				SetPosEx(playerid, InfoPuerta[id][pdInteriorX], InfoPuerta[id][pdInteriorY], InfoPuerta[id][pdInteriorZ], InfoPuerta[id][pdInteriorR], InfoPuerta[id][pdInteriorInt], InfoPuerta[id][pdInteriorVW], 1);
				SetCameraBehindPlayer(playerid);
			}
			return 1;
		}
	}
	//casas dinámicas
	Loop(p, totalcasas, 1) if (InfoCasa[p][cTipo] != 0)
	{
		if (IsPlayerInRangeOfPoint(playerid, 1.5, InfoCasa[p][cExteriorX], InfoCasa[p][cExteriorY], InfoCasa[p][cExteriorZ]) && InfoPersonaje[playerid][pInterior] == InfoCasa[p][cExteriorInt] && InfoPersonaje[playerid][pVirtualWorld] == InfoCasa[p][cExteriorVW])
		{
			if (InfoPersonaje[playerid][pCasa1] == p || InfoPersonaje[playerid][pCasa2] == p || InfoCasa[p][cSeguro] == 0)
			{
				LoadObjects(playerid);
				LoadObjects(playerid);
            	SetPosEx(playerid, InfoCasa[p][cInteriorX], InfoCasa[p][cInteriorY], InfoCasa[p][cInteriorZ], InfoCasa[p][cInteriorR], InfoCasa[p][cInteriorInt], InfoCasa[p][cInteriorVW], 1);
            	SetCameraBehindPlayer(playerid);
            	GameTextForPlayer(playerid, "~w~Bienvenido a casa", 5000, 1);
        	}
        	else GameTextForPlayer(playerid, "~w~Puerta ~r~cerrada", 5000, 1);
        	return 1;
       	}
	}
	//negocios dinámicos
	if (GetExtNegocio(playerid) != -1)
	{
		new id = GetExtNegocio(playerid);
		switch (InfoNegocio[id][nTipo])
		{
			case 9: //mecánico
			{
				if (InfoNegocio[id][nSeguro] == 1) return SendClientMessage(playerid, COLOR_GREY, "* Este negocio está cerrado.");
				if (GetPlayerState(playerid) == PLAYER_STATE_ONFOOT)
				{
					SetPosEx(playerid, InfoNegocio[id][nInteriorX], InfoNegocio[id][nInteriorY], InfoNegocio[id][nInteriorZ], InfoNegocio[id][nInteriorR], InfoNegocio[id][nInteriorInt], InfoNegocio[id][nInteriorVW], 1);
					LoadObjects(playerid);
					SetCameraBehindPlayer(playerid);
				}
				else if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
				{
					new countVeh = 0;
					Loop(veh, MAX_VEHICLES, 0) if (GetVehicleVirtualWorld(veh) == InfoNegocio[id][nInteriorVW] && VehicleToPoint(50.0, veh, 1512.2188,-1638.6256,1374.6003))
					{
						countVeh++;
					}
					if (countVeh >= 2) return SendClientMessage(playerid, COLOR_GREY, "Ya hay dos vehículos dentro del taller, espera que salga uno.");
					if (CountEmpleados(id) == 0) SendClientMessage(playerid, 0x5EAEFFFF, "* No hay mecánicos de este taller conectados, puedes usar /taller.");
					else SendClientMessageEx(playerid, 0x5EAEFFFF, "* Se encuentran %d mecánicos de este taller conectados, si no ves ninguno en el taller usa /mecanicos.", CountEmpleados(id));
					new vehicleid = GetPlayerVehicleID(playerid);
					SetPlayerInterior(playerid, InfoNegocio[id][nInteriorInt]);
					LinkVehicleToInterior(vehicleid, InfoNegocio[id][nInteriorInt]);
					SetPlayerVirtualWorld(playerid, InfoNegocio[id][nInteriorVW]);
					SetVehicleExVirtualWorld(vehicleid, InfoNegocio[id][nInteriorVW]);
					SetVehiclePos(vehicleid, 1512.2188,-1638.6256,1374.6003);
					SetVehicleZAngle(vehicleid, 180.0000);
					foreach(new p: Player) if (IsPlayerInVehicle(p, vehicleid))
					{
						SetPlayerInterior(p, InfoNegocio[id][nInteriorInt]);
						InfoPersonaje[p][pInterior] = InfoNegocio[id][nInteriorInt];
						SetPlayerVirtualWorld(p, InfoNegocio[id][nInteriorVW]);
						InfoPersonaje[p][pVirtualWorld] = InfoNegocio[id][nInteriorVW];
					}
					SetCameraBehindPlayer(playerid);
				}
			}
			case 6,12: //fábrica y repartos
			{
				if (PermisosContrato(playerid, id) != 0)
				{
					if (GetPlayerState(playerid) == PLAYER_STATE_ONFOOT)
					{
						if (EnViajeQuimicos[playerid] == 2) return SendClientMessage(playerid, COLOR_GREY, "Debes entregar los químicos por la puerta del garaje.");
						if (EnViajeDrogas[playerid] == 2) return SendClientMessage(playerid, COLOR_GREY, "Debes entregar la camioneta por la puerta del garaje.");
						SetPosEx(playerid, InfoNegocio[id][nInteriorX], InfoNegocio[id][nInteriorY], InfoNegocio[id][nInteriorZ], InfoNegocio[id][nInteriorR], InfoNegocio[id][nInteriorInt], InfoNegocio[id][nInteriorVW], 1);
						LoadObjects(playerid);
						SetCameraBehindPlayer(playerid);
						return 1;
					}
					else if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER && InfoNegocio[id][nTipo] == 12)
					{
						new vehicleid = GetPlayerVehicleID(playerid);
						SetPlayerInterior(playerid, InfoNegocio[id][nInteriorInt]);
						LinkVehicleToInterior(vehicleid, InfoNegocio[id][nInteriorInt]);
						SetPlayerVirtualWorld(playerid, InfoNegocio[id][nInteriorVW]);
						SetVehicleExVirtualWorld(vehicleid, InfoNegocio[id][nInteriorVW]);
						SetVehiclePos(vehicleid, -2144.1904, -247.4404, 544.8129);
						SetVehicleZAngle(vehicleid, 90.0000);
						foreach(new p: Player) if (IsPlayerInVehicle(p, vehicleid))
						{
							SetPlayerInterior(p, InfoNegocio[id][nInteriorInt]);
							InfoPersonaje[p][pInterior] = InfoNegocio[id][nInteriorInt];
							SetPlayerVirtualWorld(p, InfoNegocio[id][nInteriorVW]);
							InfoPersonaje[p][pVirtualWorld] = InfoNegocio[id][nInteriorVW];
						}
						SetCameraBehindPlayer(playerid);
						if (EnViajeDrogas[playerid] != 0) actualizar_barril(id, vehicleid);
						return 1;
					}
	        	}
				SendClientMessage(playerid, COLOR_GREY, "Sólo propietario o empleados de la empresa.");
			}
			default: //general
			{
				if (InfoNegocio[id][nSeguro] == 1) return SendClientMessage(playerid, COLOR_GREY, "* Este negocio está cerrado.");
				SetPosEx(playerid, InfoNegocio[id][nInteriorX], InfoNegocio[id][nInteriorY], InfoNegocio[id][nInteriorZ], InfoNegocio[id][nInteriorR], InfoNegocio[id][nInteriorInt], InfoNegocio[id][nInteriorVW], 1);
				LoadObjects(playerid);
				SetCameraBehindPlayer(playerid);
			}
		}
	}
	//garajes dinámicos
	Loop(x, MAX_GARAGES, 0)
	{
		if (IsPlayerInRangeOfPoint(playerid, 5.0, InfoGarages[x][gExteriorPos][0], InfoGarages[x][gExteriorPos][1], InfoGarages[x][gExteriorPos][2]))
		{
			if (InfoGarages[x][gLocked] == 1) return SendClientMessage(playerid, COLOR_GREY, "Este garage esta cerrado.");
      		if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER || GetPlayerState(playerid) == PLAYER_STATE_PASSENGER)
			{
          		SetVehiclePos(GetPlayerVehicleID(playerid),  InfoGarages[x][gInteriorPos][0], InfoGarages[x][gInteriorPos][1], InfoGarages[x][gInteriorPos][2]);
            	SetVehicleZAngle(GetPlayerVehicleID(playerid), InfoGarages[x][gInteriorPos][3]);
         		SetPlayerVirtualWorld(playerid, x);
            	LinkVehicleToInterior(GetPlayerVehicleID(playerid), InfoGarages[x][gInterior]);
            	SetVehicleExVirtualWorld(GetPlayerVehicleID(playerid), x);
            	SetPlayerVirtualWorld(playerid, x);
            	SetPlayerInterior(playerid, InfoGarages[x][gInterior]);
				Streamer_Update(playerid);
				LoadObjects(playerid);
          	}
          	else
			{
				SetPosEx(playerid, InfoGarages[x][gInteriorPos][0], InfoGarages[x][gInteriorPos][1], InfoGarages[x][gInteriorPos][2], InfoGarages[x][gInteriorPos][3], InfoGarages[x][gInterior], x, 1);
				LoadObjects(playerid);
			}
			return 1;
		}
	}
	//otros
	if (IsPlayerInRangeOfPoint(playerid,3,2281.1748,-1724.4528,13.2521)) //  GARAGE 1
	{
		if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		{
			SetVehiclePos(GetPlayerVehicleID(playerid),  2233.9280,-1758.3882,2031.3885);
			SetVehicleZAngle(GetPlayerVehicleID(playerid),  11.4);
		}
		else
		{
			SetPosEx(playerid, 2235.1851,-1763.5916,2032.9728, 14.9, 0, 0, 1);
			SetCameraBehindPlayer(playerid);
			LoadObjects(playerid);
		}
		return 1;
	}
	if (IsPlayerInRangeOfPoint(playerid,3,1242.2382,-1732.4800,13.2911)) //  GARAGE 2
	{
		if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		{
			SetVehiclePos(GetPlayerVehicleID(playerid),  1134.0381,-1591.4459,6602.5879);
			SetVehicleZAngle(GetPlayerVehicleID(playerid),  176.3030);
		}
		else
		{
			SetPosEx(playerid, 1134.0381,-1591.4459,6602.5879, 14.9, 0, 0, 1);
			SetCameraBehindPlayer(playerid);
			LoadObjects(playerid);
		}
		return 1;
	}
	if (IsPlayerInRangeOfPoint(playerid,3,853.3862,-1387.1884,13.7470)) //  GARAGE VIP
	{
		if (InfoCuenta[playerid][jVIP] == 0) return GameTextForPlayer(playerid, "~r~No eres VIP", 4000, 4);
		if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		{
			SetVehiclePos(GetPlayerVehicleID(playerid),  855.6053,-1412.6117,4202.1577);
			SetVehicleZAngle(GetPlayerVehicleID(playerid),  0);
		}
		else
		{
			SetPosEx(playerid, 855.6053,-1412.6117,4202.1577, 0, 0, 0, 1);
			SetCameraBehindPlayer(playerid);
			LoadObjects(playerid);
		}
		return 1;
	}
	return 1;
}
CMD:enter(playerid) return cmd_entrar(playerid);

CMD:salir(playerid)
{
	if (InfoPersonaje[playerid][pSancionado] != 0) return 1;
	if (GetPVarInt(playerid, "EstaCrack") != 0) return 1;
	//puertas dinámicas
	Loop(id, totalpuertas, 1) if (InfoPuerta[id][pdInteriorX] != 0.0)
	{
		new Float: radius = 1.5;
		if (InfoPuerta[id][pdStatusVehiculo] != 0) radius = 6.0; //new 23/01/2020
		if (IsPlayerInRangeOfPoint(playerid, radius, InfoPuerta[id][pdInteriorX], InfoPuerta[id][pdInteriorY], InfoPuerta[id][pdInteriorZ]) && InfoPersonaje[playerid][pVirtualWorld] == InfoPuerta[id][pdInteriorVW])
		{
			if (InfoPuerta[id][pdExteriorInt] != 0 || InfoPuerta[id][pdExteriorVW]) LoadObjects(playerid);
			if (InfoPuerta[id][pdStatusVehiculo] != 0 && GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
			{
				// Posición.
				SetVehiclePos(GetPlayerVehicleID(playerid), InfoPuerta[id][pdExteriorX],InfoPuerta[id][pdExteriorY],InfoPuerta[id][pdExteriorZ]);
				SetVehicleZAngle(GetPlayerVehicleID(playerid), InfoPuerta[id][pdExteriorR]);
				// Vehículo.
				LinkVehicleToInterior(GetPlayerVehicleID(playerid), InfoPuerta[id][pdExteriorInt]);
				SetVehicleExVirtualWorld(GetPlayerVehicleID(playerid), InfoPuerta[id][pdExteriorVW]);
				// Player.
				SetPlayerVirtualWorld(playerid, InfoPuerta[id][pdExteriorVW]);
				SetPlayerInterior(playerid,InfoPuerta[id][pdExteriorInt]);
				// new by EdinsonWalker (16-01-2020)
				foreach(new p: Player) if (IsPlayerInVehicle(p,GetPlayerVehicleID(playerid)))
				{
					SetPlayerInterior(p, InfoPuerta[id][pdExteriorInt]);
					SetPlayerVirtualWorld(p, InfoPuerta[id][pdExteriorVW]);
				}
			}
			else
			{
				SetPosEx(playerid, InfoPuerta[id][pdExteriorX], InfoPuerta[id][pdExteriorY], InfoPuerta[id][pdExteriorZ], InfoPuerta[id][pdExteriorR], InfoPuerta[id][pdExteriorInt], InfoPuerta[id][pdExteriorVW], 1);
				SetCameraBehindPlayer(playerid);
			}
			return 1;
		}
	}
	//casas dinámicas
	Loop(p, totalcasas, 1) if (InfoCasa[p][cTipo] != 0)
	{
		if (IsPlayerInRangeOfPoint(playerid, 1.5, InfoCasa[p][cInteriorX], InfoCasa[p][cInteriorY], InfoCasa[p][cInteriorZ]) && InfoPersonaje[playerid][pInterior] == InfoCasa[p][cInteriorInt] && InfoPersonaje[playerid][pVirtualWorld] == InfoCasa[p][cInteriorVW])
		{
			SetPosEx(playerid, InfoCasa[p][cExteriorX], InfoCasa[p][cExteriorY], InfoCasa[p][cExteriorZ], InfoCasa[p][cExteriorR], InfoCasa[p][cExteriorInt], InfoCasa[p][cExteriorVW], 1);
			SetCameraBehindPlayer(playerid);
			
			if(VisitandoCasa[playerid] != 0)
			{
				VisitandoCasa[playerid] = 0;
				CasaID[playerid] = -1;
			}
			return 1;
		}
	}
	//negocios dinámicos
	if (GetIntNegocio(playerid) != -1)
	{
		new id = GetIntNegocio(playerid);
		if (GetPlayerState(playerid) == PLAYER_STATE_ONFOOT)
		{
			SetPosEx(playerid, InfoNegocio[id][nExteriorX], InfoNegocio[id][nExteriorY], InfoNegocio[id][nExteriorZ], InfoNegocio[id][nExteriorR], InfoNegocio[id][nExteriorInt], InfoNegocio[id][nExteriorVW], 1);
			SetCameraBehindPlayer(playerid);
		}
		else if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		{
			Loop(veh, MAX_VEHICLES, 0) if (GetVehicleModel(veh) && GetVehicleVirtualWorld(veh) == InfoNegocio[id][nExteriorVW] && VehicleToPoint(5.0, veh, InfoNegocio[id][nExteriorX], InfoNegocio[id][nExteriorY], InfoNegocio[id][nExteriorZ]))
			{
				SendClientMessage(playerid, COLOR_GREY, "Hay un vehículo en la entrada del negocio, espera a que se mueva.");
				return 1;
			}
			new vehicleid = GetPlayerVehicleID(playerid);
			SetVehiclePos(vehicleid, InfoNegocio[id][nExteriorVehX_V], InfoNegocio[id][nExteriorVehY_V], InfoNegocio[id][nExteriorVehZ]);
			SetPlayerInterior(playerid, InfoNegocio[id][nExteriorInt]);
			SetPlayerVirtualWorld(playerid, InfoNegocio[id][nExteriorVW]);
			SetVehicleZAngle(vehicleid, InfoNegocio[id][nExteriorVehR]);
			LinkVehicleToInterior(vehicleid, InfoNegocio[id][nExteriorInt]);
			SetVehicleExVirtualWorld(vehicleid, InfoNegocio[id][nExteriorVW]);
			foreach(new p: Player) if (IsPlayerInVehicle(p, vehicleid))
			{
				SetPlayerInterior(p, InfoNegocio[id][nExteriorInt]);
				SetPlayerVirtualWorld(p, InfoNegocio[id][nExteriorVW]);
				InfoPersonaje[p][pInterior] = InfoNegocio[id][nExteriorInt];
				InfoPersonaje[p][pVirtualWorld] = InfoNegocio[id][nExteriorVW];
			}
			SetCameraBehindPlayer(playerid);
			if (EnViajeDrogas[playerid] != 0) actualizar_barril(id, vehicleid);
		}
		return 1;
	}
	//garajes dinámicos
	Loop(x, MAX_GARAGES, 0)
	{
		if (IsPlayerInRangeOfPoint(playerid, 10.0, InfoGarages[x][gInteriorPos][0], InfoGarages[x][gInteriorPos][1], InfoGarages[x][gInteriorPos][2]) && GetPlayerVirtualWorld(playerid) == x)
		{
			if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER || GetPlayerState(playerid) == PLAYER_STATE_PASSENGER)
			{
				SetVehiclePos(GetPlayerVehicleID(playerid), InfoGarages[x][gExteriorPos][0], InfoGarages[x][gExteriorPos][1], InfoGarages[x][gExteriorPos][2]);
				SetVehicleZAngle(GetPlayerVehicleID(playerid), InfoGarages[x][gExteriorPos][3]);
				SetPlayerInterior(playerid, 0);
				LinkVehicleToInterior(GetPlayerVehicleID(playerid), 0);
				SetPlayerVirtualWorld(playerid, 0);
				SetVehicleExVirtualWorld(GetPlayerVehicleID(playerid), 0);
				LoadObjects(playerid);
			}
			else
			{
				SetPosEx(playerid, InfoGarages[x][gExteriorPos][0], InfoGarages[x][gExteriorPos][1], InfoGarages[x][gExteriorPos][2], InfoGarages[x][gExteriorPos][3], 0, 0, 1);
				SetCameraBehindPlayer(playerid);
			}
			return 1;
		}
	}
	//otros
	if (IsPlayerInRangeOfPoint(playerid,8,2233.9280,-1758.3882,2031.3885)) //  GARAGE 1
	{
		if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		{
			SetVehiclePos(GetPlayerVehicleID(playerid),  2281.1748,-1724.4528,13.2521);
			SetVehicleZAngle(GetPlayerVehicleID(playerid),  179.93);
		}
		else
		{
			SetPosEx(playerid, 2280.5620,-1722.8878,13.5469, 181, 0, 0, 1);
			SetCameraBehindPlayer(playerid);
		}
		return 1;
	}
	if (IsPlayerInRangeOfPoint(playerid,8,1140.7430,-1592.1893,6602.4922)) //  GARAGE 1
	{
		if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		{
			SetVehiclePos(GetPlayerVehicleID(playerid),  1242.2382,-1732.4800,13.2911);
			SetVehicleZAngle(GetPlayerVehicleID(playerid),  359.47);
		}
		else
		{
			SetPosEx(playerid, 1241.9020,-1734.0985,13.5899, 354.9746, 0, 0, 1);
			SetCameraBehindPlayer(playerid);
		}
		return 1;
	}
	if (IsPlayerInRangeOfPoint(playerid,8,855.6053,-1412.6117,4202.1577)) //  GARAGE VIP
	{
		if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		{
			SetVehiclePos(GetPlayerVehicleID(playerid),  853.3862,-1387.1884,13.7470);
			SetVehicleZAngle(GetPlayerVehicleID(playerid),  182.4513);
		}
		else
		{
			SetPosEx(playerid, 853.3862,-1387.1884,13.7470, 182.4513, 0, 0, 1);
			SetCameraBehindPlayer(playerid);
		}
		return 1;
	}
	return 1;
}
CMD:exit(playerid) return cmd_salir(playerid);

CMD:ip(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /ip (ip)");
	new string[170], IP[32];
	foreach(Player, i)
	{
		GetPlayerIp(i, IP, sizeof IP);
		if (strfind(IP, params, true) != -1)
		{
			format(string, sizeof string, "Jugador: %s (ID: %d) | IP: %s", NombreOriginal(i), i, IP);
			SendClientMessage(playerid, COLOR_WHITE, string);
		}
	}
	return 1;
}

CMD:frecuencia(playerid, params[])
{
	if (no_tiene_manos(playerid, 50) == 0) return 1;
	new string[128], frequency;
	if (sscanf(params, "d", frequency))
	{
		SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /frecuencia [frecuencia]");
		SendClientMessage(playerid, COLOR_WHITE, "* Ajusta la frecuencia de tu radio - 0 Si no quieres oir nada.");
		return 1;
	}
	if (frequency > 9999999 || frequency < -9999999) { SendClientMessage(playerid, COLOR_GREY, "Frecuencia no debe ser menor a -9999999 y mayor 9999999."); return 1; }

	InfoPersonaje[playerid][pFrecuencia_radio] = frequency;
    guardar_int_mysql("personajes", "Frecuencia_radio", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pFrecuencia_radio]);
	format(string, sizeof string, "Ajustaste la frecuencia de tu radio portable a %d khz.",frequency);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:pr(playerid, params[])
{
	if (no_tiene_manos(playerid, 50) == 0) return 1;
	if (InfoPersonaje[playerid][pFrecuencia_radio] >= 1 || InfoPersonaje[playerid][pFrecuencia_radio] <= -1)
	{
		if (isnull(params)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /pr - /wa - /wt (Chat Radio Portátil)");
		if (GetPVarInt(playerid, "EstaCrack") != 0) return SendClientMessage (playerid, COLOR_GRAD2, "{FFFF00}[ERROR]:{FFFFFF} No puedes usar esto ahora.");
		RadioBroadCast(playerid, COLOR_GREY, params);
		return 1;
	}
	SendClientMessage(playerid, COLOR_WHITE, "* Primero ajusta la frecuencia. /frecuencia'");
	return 1;
}
CMD:wa(playerid, params[]) return cmd_pr(playerid, params);
CMD:wt(playerid, params[]) return cmd_pr(playerid, params);

CMD:prooc(playerid, params[])
{
	if (no_tiene_manos(playerid, 50) == 0) return 1;
	if (InfoPersonaje[playerid][pFrecuencia_radio] >= 1 || InfoPersonaje[playerid][pFrecuencia_radio] <= -1)
	{
		if (isnull(params)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /prooc");
		RadioBroadCastOOC(playerid, COLOR_GREY, params);
		return 1;
	}
	SendClientMessage(playerid, COLOR_WHITE, "* Primero ajusta la frecuencia. /frecuencia'");
	return 1;
}

CMD:moneda(playerid)
{
	new coin = random(2)+1, string[90], coinname[10];
	if (coin == 1) 	coinname = "cara";
	else 			coinname = "cruz";
	format(string, sizeof string, "*** %s lanza una moneda al aire y cae %s", NombreJugador(playerid), coinname);
	ProxDetector(10.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
	return 1;
}

CMD:ven(playerid)
{
	if (!IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "Usted necesita estar en el vehiculo para utilizar esta función.");
	new string[128];
	if (VehicleWindows[GetPlayerVehicleID(playerid)] == 0)
	{
		VehicleWindows[GetPlayerVehicleID(playerid)] = 1;
		format(string, sizeof string, "* %s baja la ventana.", NombreJugador(playerid));
		ProxDetector(20.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
	}
	else
	{
		VehicleWindows[GetPlayerVehicleID(playerid)] = 0;
		format(string, sizeof string, "* %s sube la ventanilla.", NombreJugador(playerid));
		ProxDetector(20.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
	}
	return 1;
}

CMD:misil(playerid, params[])
{
	if (!member_faccion(playerid, 3)) return SendClientMessage(playerid, COLOR_GREY, "No formas parte de SAEM.");
	new Float:M_X, Float:M_Y, Float:M_Z, Float: radius, string[178];
	if (Misile_Launcher < 3)
	{
		if (IsPlayerInRangeOfPoint(playerid,5.0,2740.2664,-2423.1470,43.7594)) // Torre SAEM.
		{
			if (sscanf(params, "fffiii",M_X,M_Y,M_Z,radius,params[1],params[2])) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /misil (coordenada X) (coordenada Y) (coordenada Z) (radio) (tipo) (tiempo)");
			if (InfoPersonaje[playerid][pRango] < 3) return SendClientMessage(playerid, COLOR_RED, "Necesitas ser mayor de rango 3.");
			if (radius > 100 || radius < 0) return SendClientMessage(playerid, COLOR_GRAD2, "Radio máximo 100");
			if (params[1] > 13  || params[1] < 0) return SendClientMessage(playerid, COLOR_GRAD2, "Tipo explosión 0-13");
			if (params[2] > 60  || params[1] < 0) return SendClientMessage(playerid, COLOR_GRAD2, "Tiempo máximo 60 segundos");
			SetTimerEx("MissileLaunchEx", params[2]*1000, false, "fffii", M_X,M_Y,M_Z,radius,params[1]);
			Misile_Launcher++;
			SendRadioMessage(3, COLOR_RADIO, "[CENTRAL] ALERTA DE LANZAMIENTO DE MISIL");
			format(string, sizeof string, "%s ejecutará el misil en %d segundos, destino: %0.2f - %0.2f - %0.2f, radio: %d", NombreJugador(playerid), params[2], M_X, M_Y, M_Z, radius, params[1]);
			SendRadioMessage(3, COLOR_RADIO, string);
		}
		else if (IsPlayerInRangeOfPoint(playerid,1.0,275.4055,2044.6295,46.5048)) // Torre LV.
		{
			if (sscanf(params, "id",params[0], params[1])) return SendClientMessage(playerid, COLOR_GRAD2, "Utiliza: /misil (vehículo) (tiempo)");
			if (InfoPersonaje[playerid][pRango] < 3) return SendClientMessage(playerid, COLOR_RED, "Necesitas ser mayor de rango 3.");
			if (!GetVehicleModel(params[0])) return SendClientMessage(playerid, COLOR_GRAD2, "Vehículo incorrecto.");
			SetTimerEx("MissileLaunch", params[1]*1000, false, "i", params[0]);
			Misile_Launcher++;
			SendRadioMessage(3, COLOR_RADIO, "[CENTRAL] ALERTA DE LANZAMIENTO DE MISIL");
			format(string, sizeof string, "%s ejecutará el misil en %d segundos, objetivo vehicular: %d.", NombreJugador(playerid), params[1], params[0]);
			SendRadioMessage(3, COLOR_RADIO, string);
		}
		else SendClientMessage(playerid, COLOR_WHITE, "No estás en ningún lanzamisiles.");
	}
	else SendClientMessage(playerid, COLOR_WHITE, "Aún no han detonado los otros misiles.");
	return 1;
}

CMD:encontrar(playerid, params[])
{
	if (!member_faccion(playerid, 2)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de FBI.");
	if (OnDuty[playerid] == 0) return  SendClientMessage(playerid, COLOR_GREY, "No estas en servicio.");
	if (UsedFind[playerid] > 1) return SendClientMessage(playerid, 0xF2D068FF, "El sistema se está reiniciando, espere unos segundos para volver a usarlo.");
	new item[32], idspe, string[185];
	if (sscanf(params, "s[32]d",item, idspe)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /encontrar (Vehiculo o Persona) (ID)");
	if (strcmp(item,"vehiculo",true) == 0)
	{
		if (!GetVehicleModel(idspe)) return SendClientMessage(playerid, 0x006C00FF, "Vehículo no spawneado.");
		if (GetVehicleVirtualWorld(idspe) != 0) return SendClientMessage(playerid, 0x006C00FF, "Vehículo oculto. (VW)");
		new sat = random(10), luck = random(5), reuse_time = (sat+luck)*2;
		SendClientMessage(playerid, 0xF2D068FF, "[CPU] Estableciendo conexión ...");
		format(string, sizeof string, "Conectado con satélite #%d cobertura(%d)", sat*10,luck*20);
		SendClientMessage(playerid, COLOR_WHITE,string);
		format(string, sizeof string, "ID Vehículo: %d", idspe);
		SendClientMessage(playerid, COLOR_WHITE,string);
		if (luck > 2)
		{
			format(string, sizeof string, "Modelo Vehículo: %s", GetVehicleName(idspe));
			SendClientMessage(playerid, COLOR_WHITE,string);
		}
		SendClientMessage(playerid, 0xF2D068FF, "_____________________________________");
		UsedFind[playerid] = reuse_time;
		WhoFind[playerid] = idspe;
		format(string, sizeof string, "La información se marcara en el mapa en: %d segundos.", sat+luck);
		SendClientMessage(playerid, COLOR_GRAD1,string);
		format(string, sizeof string, "El satélite volverá a estar disponible en: %d segundos.", UsedFind[playerid]);
		SendClientMessage(playerid, COLOR_GRAD1,string);
		SetTimerEx("Detective_FindCar", sat+luck*1000, false, "i", playerid);
		return 1;
	}
	if (strcmp(item,"persona", true) == 0)
	{
		if (!IsPlayerConnectedEx(idspe)) return SendClientMessage(playerid, COLOR_GREY, "Jugador no conectado.");
		if (GetPlayerVirtualWorld(idspe) != 0) return SendClientMessage(playerid, 0x006C00FF, "Persona oculta. (VW)");
		if (GetPlayerInterior(idspe) != 0) return SendClientMessage(playerid, 0x006C00FF, "Persona oculta. (Int)");
		new Float:X[3], zone[MAX_ZONE_NAME];
		GetPlayerPos(idspe, X[0], X[1], X[2]);
		GetPlayer3DZone(idspe, zone, sizeof zone);
		new sat = random(10), luck = random(5), reuse_time = (sat+luck)*2;
		SendClientMessage(playerid, 0xF2D068FF, "[CPU] Estableciendo conexión ...");
		format(string, sizeof string, "** Conectado con satélite #%d cobertura(%d)", sat*10,luck*20);
		SendClientMessage(playerid, COLOR_WHITE,string);
		format(string, sizeof string, "** Persona a buscar: %s.", NombreJugador(idspe));
		SendClientMessage(playerid, COLOR_WHITE,string);
		format(string, sizeof string, "Localización apróximada: %s",zone);
		SendClientMessage(playerid, COLOR_WHITE,string);
		if (InfoPersonaje[playerid][pTogTelefono] == 0 && InfoPersonaje[idspe][pTelefono] != 0) // Teléfono apagado y lo tiene.
		{
			SendClientMessage(playerid, 0xF2D068FF, "No se han podido obtener más datos, teléfono desconectado. El sistema se ha ralentizado.");
			SendClientMessage(idspe, COLOR_LIGHTBLUE, "Su teléfono ha vibrado estando apagado, alguien está intentando localizar su número de teléfono.");
			UsedFind[playerid] = reuse_time+35;
			return 1;
		}
		if (luck > 1 && InfoPersonaje[idspe][pSexo] == 1) 			SendClientMessage(playerid, COLOR_WHITE,"Sexo: Masculino");
		if (luck > 1 && InfoPersonaje[idspe][pSexo] == 2) 			SendClientMessage(playerid, COLOR_WHITE,"Sexo: Femenino");
		if (luck > 2 && IsPlayerInAnyVehicle(idspe)) 	SendClientMessage(playerid, COLOR_WHITE,"Estado: En Automóvil");
		if (InfoPersonaje[idspe][pTelefono] != 0)
		{
			format(string, sizeof string, "Teléfono: %d", InfoPersonaje[idspe][pTelefono]);
			SendClientMessage(playerid, COLOR_WHITE,string); // Tiene número y no lo tiene en privado.
		}
		SendClientMessage(playerid, 0xF2D068FF, "_____________________________________");
		UsedFind[playerid] = reuse_time;
		WhoFind[playerid] = idspe;
		format(string, sizeof string, "La información se marcara en el mapa en: %d segundos.", sat+luck);
		SendClientMessage(playerid, COLOR_WHITE,string);
		format(string, sizeof string, "El satélite volverá a estar disponible en: %d segundos.", UsedFind[playerid]);
		SendClientMessage(playerid, COLOR_WHITE,string);
		SetTimerEx("Detective_FindPerson", sat+luck*1000, false, "i", playerid);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /encontrar (Vehiculo o Persona) (ID)");
	return 1;
}

funcion Detective_FindPerson(playerid)
{
	new Float:X,Float:Y,Float:Z;
	GetPlayerPos(WhoFind[playerid], X,Y,Z);
	SetPlayerCheckpoint(playerid, X,Y,Z, 6);
	SendClientMessage(playerid, 0xF2D068FF, "** Información: se estableció el destino de búsqueda en su radar.");
	WhoFind[playerid] = 0;
	return 1;
}

funcion Detective_FindCar(playerid)
{
	new Float:X,Float:Y,Float:Z;
	GetVehiclePos(WhoFind[playerid], X,Y,Z);
	SetPlayerCheckpoint(playerid, X,Y,Z, 10);
	SendClientMessage(playerid, 0xF2D068FF, "** Información: se estableció el destino de búsqueda en su radar.");
	WhoFind[playerid] = 0;
	return 1;
}

CMD:su(playerid, params[])
{
	if (!member_faccion(playerid, 1, 2, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	if (OnDuty[playerid] == 0) return  SendClientMessage(playerid, COLOR_WHITE, "No estas en servicio.");
	new string[256], playerid2;
	if (sscanf(params, "u", playerid2)) SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /su (PlayerID)");
	if (InfoPersonaje[playerid2][pEstrellas] == 6) return SendClientMessage(playerid, 0xb00000ff, "Ese jugador ya tiene el máximo de estrellas (6).");
	InfoPersonaje[playerid2][pEstrellas]++;
	switch (InfoPersonaje[playerid2][pEstrellas])
	{
		case 1:
		{
			format(string, sizeof string, "%s{FFFFFF} quiere hablar contigo, no intentes escapar del policía.", NombreJugador(playerid));
			SendClientMessage(playerid2, COLOR_RADIO, string);
			format(string, sizeof string, "[CENTRAL] %s dice: %s parece sospechoso, voy a interrogarlo.", NombreJugador(playerid), NombreJugador(playerid2));
			SendRadioMessage(InfoPersonaje[playerid][pMiembro], COLOR_RADIO, string);
			return 1;
		}
		case 2: format(string, sizeof string, "[CENTRAL] %s dice: %s se resistió al arresto, procedemos a su persecución.", NombreJugador(playerid), NombreJugador(playerid2));
		case 3: format(string, sizeof string, "[CENTRAL] %s dice: %s se encuentra armado, procedan con precaución.", NombreJugador(playerid), NombreJugador(playerid2));
		case 4: format(string, sizeof string, "[CENTRAL] %s dice: %s abrió fuego, necesito refuerzos.", NombreJugador(playerid), NombreJugador(playerid2));
		case 5: format(string, sizeof string, "[CENTRAL] %s dice: %s asesinó, detener vivo o muerto.", NombreJugador(playerid), NombreJugador(playerid2));
		case 6: format(string, sizeof string, "[CENTRAL] %s dice: %s es extremadamente peligroso, disparen a matar.", NombreJugador(playerid), NombreJugador(playerid2));
	}
	SendRadioMessage(InfoPersonaje[playerid][pMiembro], COLOR_RADIO, string);
	SetPlayerWantedLevel(playerid2, InfoPersonaje[playerid2][pEstrellas]);
	return 1;
}

CMD:sospechosos(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	new string[128], x;
	SendClientMessage(playerid, COLOR_LIGHTBLUE, "Sospechosos buscados:");
	foreach(Player, i)
	{
		if (InfoPersonaje[i][pEstrellas] >= 1)
		{
			format(string, sizeof string, "%s%s: %d", string,NombreJugador(i),InfoPersonaje[i][pEstrellas]);
			x++;
			if (x > 3)
			{
				SendClientMessage(playerid, COLOR_WHITE, string);
				x = 0;
				format(string, sizeof string, " ");
			}
			else format(string, sizeof string, "%s, ", string);
		}
	}
	if (x <= 3 && x > 0)
	{
		string[strlen(string)-2] = '.';
		SendClientMessage(playerid, COLOR_WHITE, string);
	}
	return 1;
}

CMD:bk(playerid, params[])
{
	if (!member_faccion(playerid, 1, 4)) return SendClientMessage(playerid, COLOR_GREY, "No eres miembro de la policía o sheriff.");
	if (refuerzos_pd[playerid] == 1 || refuerzos_sd[playerid] == 1) return SendClientMessage(playerid, COLOR_GREY, "Ya tienes un pedido de ayuda, usa /noref.");
	new string[256];
	format(string, sizeof string, "[CENTRAL] Todas las unidades, %s necesita ayuda (Información marcada).", NombreJugador(playerid));
	if (member_faccion(playerid, 1)) //pd
	{
		refuerzos_pd[playerid] = 1;
		SendRadioMessage(1, COLOR_RADIO, string);
		Loop(i, MAX_PLAYERS, 0) if (member_faccion(i, 1) && OnDuty[i] == 1)
		{
			SetPlayerMarkerForPlayer(i, playerid, 0x1229FAFF);
		}
	}
	else if (member_faccion(playerid, 4)) //pd
	{
		refuerzos_sd[playerid] = 1;
		SendRadioMessage(4, COLOR_RADIO, string);
		Loop(i, MAX_PLAYERS, 0) if (member_faccion(i, 4) && OnDuty[i] == 1)
		{
			SetPlayerMarkerForPlayer(i, playerid, 0x1229FAFF);
		}
	}
	SendClientMessage(playerid, COLOR_ORANGE, "/noref, para cancelar los refuerzos.");
	return 1;
}
CMD:refuerzos(playerid, params[]) return cmd_bk(playerid, params);
CMD:ref(playerid, params[]) return cmd_bk(playerid, params);

CMD:bkc(playerid)
{
	if (!member_faccion(playerid, 1, 4)) return SendClientMessage(playerid, COLOR_GREY, "No eres miembro de la policía o sheriff.");
	if (refuerzos_pd[playerid] == 0 && refuerzos_sd[playerid] == 0) return SendClientMessage(playerid, COLOR_GREY, "No estás solicitando refuerzos.");
	new string[256];
	refuerzos_pd[playerid] = 0;
	refuerzos_sd[playerid] = 0;
	format(string, sizeof string, "[CENTRAL] Todas las unidades que están de apoyo a %s, se ha cancelado el llamado.", NombreJugador(playerid));
	if (member_faccion(playerid, 1)) //pd
	{
		SendRadioMessage(1, COLOR_RADIO, string);
		Loop(i, MAX_PLAYERS, 0) if (member_faccion(i, 1) && OnDuty[i] == 1)
		{
			SetPlayerMarkerForPlayer(i, playerid, 0xFFFFFF00);
		}
	}
	else if (member_faccion(playerid, 4)) //pd
	{
		SendRadioMessage(4, COLOR_RADIO, string);
		Loop(i, MAX_PLAYERS, 0) if (member_faccion(i, 4) && OnDuty[i] == 1)
		{
			SetPlayerMarkerForPlayer(i, playerid, 0xFFFFFF00);
		}
	}
	return 1;
}
CMD:bpc(playerid) return cmd_bkc(playerid);
CMD:norefuerzos(playerid) return cmd_bkc(playerid);
CMD:noref(playerid) return cmd_bkc(playerid);

CMD:drivebug(playerid)
{
	if(!IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No se encuentra en ningún vehículo.");
	if(GetPlayerState(playerid) != PLAYER_STATE_PASSENGER) return SendClientMessage(playerid, COLOR_GREY, "No se encuentra como pasajero.");
	ApplyAnimation(playerid, "PED", "CAR_GETIN_RHS", 4.1, 0, 0, 0, 0, 1, 1);
	SetPlayerArmedWeapon(playerid, 0);
    SetTimerEx("desbugdrive", 500, false, "ii", playerid, GetPlayerWeapon(playerid));
    return 1;
}

funcion desbugdrive(playerid, arma)
	SetPlayerArmedWeapon(playerid, arma);

CMD:darlicencia(playerid, params[])
{
	if (!member_faccion(playerid, 1, 4)) return SendClientMessage(playerid, COLOR_GREY, "No formas parte de LSPD o LSCSD.");
	if (InfoPersonaje[playerid][pRango] < 5) return  SendClientMessage(playerid, COLOR_WHITE, "Debes ser mínimo rango 5 para hacer esto.");
	if (sscanf(params, "dd", params[0], params[1])) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /darlicencia (ID) (precio) ");
	if (!IsPlayerConnected(params[0])) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
	if (!CercaDelMarica(8.0, playerid, params[0])) return SendClientMessage(playerid, COLOR_WHITE, "Muy lejos de el jugador.");
	if (InfoPersonaje[params[0]][pLicencia][3] != 0) return SendClientMessage(playerid, COLOR_WHITE, "Este jugador ya tiene una licencia de armas trámitada.");
	if (params[1] < 0 || params[1] > 50000) return SendClientMessage(playerid, COLOR_WHITE, "El precio máximo para la licencia de armas es 50 mil dólares.");
	if (Facturing[params[0]] == 1) return SendClientMessage(playerid, COLOR_WHITE, "Este jugador ya tiene una petición pendiente.");
	if (InfoPersonaje[params[0]][pHorasOn] < 2 ) return SendClientMessage(playerid, COLOR_GRAD2, "[ERROR] Este usuario no tiene más de 2 horas de juego o dispone de restricción de armas.");
	new string[290];
	if (GetPlayerCash(params[0]) < params[1])
	{
		format(string, sizeof string, "* Esta persona no dispone de {FFFF00}%s${FFFFFF} para pagar la licencia de armas.", diner_coma(params[1]));
		SendClientMessage(playerid, COLOR_WHITE, string);
		return 1;
	}
	format(string, sizeof string, "* Oficial {3052DC}%s{EBEBEB} te ofrece una licencia de armas por {00CC00}$%s{EBEBEB}.", NombreJugador(playerid), diner_coma(params[1]));
	SendClientMessage(params[0], 0xEBEBEBFF, string);
	SendClientMessage(params[0], 0xEBEBEBFF, "Utiliza {00AE57}/aceptar licencia{EBEBEB} ó {00AE57}/cancelar licencia{EBEBEB}.");
	SendClientMessage(playerid, COLOR_WHITE, "Espera la respuesta del sujeto, espere un momento.");
	NombreLicencia[params[0]] = playerid;
	PrecioLicencia[params[0]] = params[1];
	Facturing[params[0]] = 1; // ID ocupado en la tarea.
	return 1;
}

CMD:multar(playerid, params[])
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	if (OnDuty[playerid] == 0) return  SendClientMessage(playerid, COLOR_GREY, "No estás en servicio.");
	if (sscanf(params, "dis[64]", params[0], params[1], params[2])) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /multar (ID) (precio) (razón)");
	if (!IsPlayerConnected(params[0])) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
	if (!CercaDelMarica(8.0,playerid,params[0])) return SendClientMessage(playerid, COLOR_WHITE, "Muy lejos de el jugador.");
	if (Facturing[playerid] == 1) return SendClientMessage(playerid, COLOR_WHITE, "Este jugador ya tiene una petición pendiente.");
	if (params[1] < 0 || params[1] > 50000) return SendClientMessage(playerid, COLOR_WHITE, "El máximo de multa son 50000$");
	new string[170];
	if (GetPlayerCash(params[0]) < params[1])
	{
		format(string, sizeof string, "* El infractor no tiene {FFFF00}%s${FFFFFF} para pagar la multa.", diner_coma(params[1]));
		SendClientMessage(playerid, COLOR_WHITE, string);
		return 1;
	}
	ClearChat(playerid);
	SendClientMessage(params[0], -1, "Estado de San Andreas");
	format(string, sizeof string, "Demandante: %s", NombreJugador(playerid));
	SendClientMessage(params[0], -1, string);
	format(string, sizeof string, "Infracción: %s", params[2]);
	SendClientMessage(params[0], -1, string);
	format(string, sizeof string, "Multa: %s$", diner_coma(params[1]));
	SendClientMessage(params[0], -1, string);
	SendClientMessage(playerid, COLOR_WHITE, "* Espera la respuesta del sujeto");
	SendClientMessage(params[0], COLOR_WHITE, "Te han multado. Utiliza /aceptar multa ó /cancelar multa, para pagar la multa.");
	TicketOffer[params[0]] = playerid;
	TicketMoney[params[0]] = params[1];
	Facturing[params[0]] = 1;
	return 1;
}

CMD:m(playerid, params[])
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley.");
	if (!IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "No estás en un vehículo.");
	if (sscanf(params, "s[256]", params)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /m (texto)");
	new string[320];
	format(string, sizeof string, "(Megáfono) %s: %s",NombreJugador(playerid), params[0]);
	ProxDetector(60.0, playerid, string, COLOR_MEGAPHONE, COLOR_MEGAPHONE, COLOR_MEGAPHONE, COLOR_MEGAPHONE, COLOR_MEGAPHONE);
	return 1;
}

CMD:pagar(playerid, params[])
{
	if (InfoPersonaje[playerid][pHorasOn] < 2) return SendClientMessage(playerid, COLOR_GRAD2, "Tienes que tener mínimo 2 Horas de juego para dar dinero.");
	if (InfoPersonaje[playerid][pSancionado] >= 1) return SendClientMessage(playerid, COLOR_GRAD2, "Información: No puedes usar este comando mientras estás en prisión.");
	new string[256];
	if (sscanf(params, "dd", params[0], params[1])) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /pagar (Jugador) (Cantidad)");
	if (!IsPlayerConnected(params[0])) return SendClientMessage(playerid, COLOR_WHITE, "Jugador desconectado.");
	if (params[1] > GetPlayerCash(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "No posees esa cantidad.");
	if (params[1] < 1 || params[1] > 50000) return SendClientMessage(playerid, COLOR_GRAD2, "{FFFF00}[ERROR]:{FFFFFF} Máximo: 50 Mil dólares.");
	if (!CercaDelMarica(3.0, playerid, params[0])) return SendClientMessage(playerid, COLOR_WHITE, "Jugador muy lejos.");
	GivePlayerCash(playerid, -params[1], "pagar");
	GivePlayerCash(params[0], params[1], "pagar");
	new Float:X, Float:Y, Float:Z;
	GetPlayerPos(playerid, X, Y, Z);
	if (InfoCuenta[playerid][jMulticuenta] == 0 && InfoCuenta[params[0]][jMulticuenta] == 0)
	{
		if (!strcmp(InfoCuenta[playerid][jIP], InfoCuenta[params[0]][jIP], false))
		{
			new ipc[32], stringlog[180]; GetPlayerIp(playerid, ipc, 32);
			format(stringlog, sizeof(stringlog), "[ATENCIÓN] Posibles multicuentas: %s(%d) ha pagado [$%d] a %s(%d). [IP: %s]", NombreOriginal(playerid), playerid, params[1],NombreOriginal(params[0]), params[0], ipc);
			SendAdminMessage(COLOR_ORANGE, stringlog); Log("LOGS/multicuentas.log", stringlog);
		}
	}
	PlayerPlaySound(playerid, 1052, X, Y, Z);
	PlayerPlaySound(params[0], 1052, X, Y, Z);
	format(string, sizeof string, "le da algo de dinero a %s.", NombreJugador(params[0]));
	meuwu(playerid, string);
	format(string, sizeof string, "Recibes $%d de %s.", params[1], NombreJugador(playerid));
	SendClientMessage(params[0], 0xb0b0b0ff, string);
	format(string, sizeof string, "* %s pagó %d$ a %s", NombreDeCuenta(playerid), params[1], NombreDeCuenta(params[0]));
	Log("LOGS/pagos.log", string);
	return 1;
}

CMD:vehid(playerid)
{
	if (!IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "No estás en un vehiculo");
	new string[32];
	format(string, sizeof string, "* Vehiculo ID: %d.", GetPlayerVehicleID(playerid));
	SendClientMessage(playerid, COLOR_GREY, string);
	return 1;
}

CMD:quitar(playerid, params[])
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	if (OnDuty[playerid] == 0) return  SendClientMessage(playerid, COLOR_GREY, "No estás en servicio.");
	new item[32], string[190], playerid2;
	if (sscanf(params, "ds[32]",playerid2,item))
	{
		SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /quitar (JugadorID) (Item)");
		SendClientMessage(playerid, COLOR_GRAD2, "Items: lconduccion, lvuelo, larma, materiales, ganzuas, armas");
		return 1;
	}
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Jugador no conectado.");
	if (!CercaDelMarica(5.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GRAD2, "Jugador muy lejos.");
	if (strcmp(item, "lconduccion", true) == 0)
	{
	    if (InfoPersonaje[playerid2][pLicencia][0] == 0) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador no tiene licencia de conducción.");
		InfoPersonaje[playerid2][pLicencia][0] = 0;
		guardar_int_mysql("personajes", "Licencia1", InfoPersonaje[playerid2][pID], 0);
		format(string, sizeof string, "le quita la licencia de conducción a %s.", NombreJugador(playerid2));
		meuwu(playerid, string);
	}
	else if (strcmp(item, "lvuelo", true) == 0)
	{
	    if (InfoPersonaje[playerid2][pLicencia][1] == 0) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador no tiene licencia de vuelo.");
		InfoPersonaje[playerid2][pLicencia][1] = 0;
		guardar_int_mysql("personajes", "Licencia2", InfoPersonaje[playerid2][pID], 0);
		format(string, sizeof string, "le quita la licencia de vuelo a %s.", NombreJugador(playerid2));
		meuwu(playerid, string);
	}
	else if (strcmp(item, "larma", true) == 0)
	{
	    if (InfoPersonaje[playerid2][pLicencia][3] == 0) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador no tiene licencia de armas.");
		InfoPersonaje[playerid2][pLicencia][3] = 0;
		guardar_int_mysql("personajes", "Licencia4", InfoPersonaje[playerid2][pID], 0);
		format(string, sizeof string, "le quita la licencia de armas a %s.", NombreJugador(playerid2));
		meuwu(playerid, string);
	}
	else if (strcmp(item, "materiales", true) == 0)
	{
	    if (InfoPersonaje[playerid2][pMateriales] == 0) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador no tiene materiales.");
		InfoPersonaje[playerid2][pMateriales] = 0;
		guardar_int_mysql("personajes", "Materiales", InfoPersonaje[playerid2][pID], 0);
		format(string, sizeof string, "le quita los materiales a %s.", NombreJugador(playerid2));
		meuwu(playerid, string);
	}
	else if (strcmp(item, "ganzuas", true) == 0)
	{
	    if (InfoPersonaje[playerid2][pGanzuas] == 0) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador no tiene ganzúas.");
		InfoPersonaje[playerid2][pGanzuas] = 0;
		guardar_int_mysql("personajes", "Ganzuas", InfoPersonaje[playerid2][pID], 0);
		format(string, sizeof string, "le quita las ganzúas a %s.", NombreJugador(playerid2));
		meuwu(playerid, string);
	}
	else if (strcmp(item, "armas", true) == 0)
	{
		new query[360];
		Loop(x, 10, 0) if (InfoInventario[InfoPersonaje[playerid2][pBolsillo][x]][IDArma] != 0)
		{
			InfoPersonaje[playerid2][pBolsillo][x] = 0;
			InfoPersonaje[playerid2][pBolsilloCant][x] = 0;
			mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Bolsillo_%d = 0, Cantidad_bolsillo_%d = 0 WHERE ID = '%d'", x+1, x+1, InfoPersonaje[playerid2][pID]);
			mysql_tquery(DBInsanity, query);
		}
		if (InfoInventario[InfoPersonaje[playerid2][pManoIzquierda]][IDArma] != 0)
		{
			InfoPersonaje[playerid2][pManoIzquierda] = 0;
			InfoPersonaje[playerid2][pManoIzquierdaCant] = 0;
			RemovePlayerAttachedObject(playerid2, 8);
			mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Mano_izquierda = 0, Cantidad_mano_izquierda = 0 WHERE ID = '%d'", InfoPersonaje[playerid2][pID]);
			mysql_tquery(DBInsanity, query);
		}
		if (InfoInventario[InfoPersonaje[playerid2][pManoDerecha]][IDArma] != 0)
		{
			InfoPersonaje[playerid2][pManoDerecha] = 0;
			InfoPersonaje[playerid2][pManoDerechaCant] = 0;
			RemovePlayerAttachedObject(playerid, 7);
			ResetPlayerWeapons(playerid2);
			mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Mano_derecha = 0, Cantidad_mano_derecha = 0 WHERE ID = '%d'", InfoPersonaje[playerid2][pID]);
			mysql_tquery(DBInsanity, query);
		}
		if (InfoInventario[InfoPersonaje[playerid2][pEspalda]][IDArma] != 0)
		{
			InfoPersonaje[playerid2][pEspalda] = 0;
			InfoPersonaje[playerid2][pEspaldaCant] = 0;
			RemovePlayerAttachedObject(playerid2, 9);
			mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Espalda = 0, Cantidad_espalda = 0 WHERE ID = '%d'", InfoPersonaje[playerid2][pID]);
			mysql_tquery(DBInsanity, query);
		}
		format(string, sizeof string, "le quita las armas a %s.", NombreJugador(playerid2));
		meuwu(playerid, string);
	}
	else SendClientMessage(playerid, COLOR_GRAD2, "Item incorrecto.");
	return 1;
}

CMD:obtenerip(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	if (sscanf(params, "d", params[0])) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /obtenerip (PlayerID)");
	if (!IsPlayerConnected(params[0])) return SendClientMessage(playerid, COLOR_GREY, "Esa ID es inválida.");
	new ip[20], string[170];
	GetPlayerIp(params[0],ip,sizeof(ip));
	format(string, sizeof string, "* La IP de %s es %s", NombreOriginal(params[0]), ip);
	SendClientMessage(playerid, COLOR_GRAD2, string);
	return 1;
}

CMD:desbanip(playerid, params[])
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (isnull(params)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /desbanip (ip)");
	if (IsValidIP(params)) return SendClientMessage(playerid, COLOR_WHITE, "Esa IP no es válida!");
	new string[128];
	RemoveBan(params);
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) desbaneó la IP %s", InfoCuenta[playerid][jApodo], playerid, params);
	SendAdminMessage(0xFF6347FF, string);
	format(string, sizeof string, "%s desbaneó la IP %s", InfoCuenta[playerid][jApodo], params);
	Log("LOGS/desbanip.log", string);
	return 1;
}
CMD:desbanearip(playerid, params[]) return cmd_desbanip(playerid, params);

CMD:desbanpj(playerid, params[])
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /desbanpj (Nombre_Apellido)");
	if (VerificarPersonaje(params))
	{
		new string[512], banex;
		reg_int(0, "OtakuN_N", banex);
		if (banex == 0) return SendClientMessage(playerid, COLOR_WHITE, "Ese personaje no está bloqueado.");
		mysql_format(DBInsanity, string, sizeof string, "UPDATE personajes SET OtakuN_N = 0 WHERE Nombre_Apellido = '%e'", params);
		mysql_tquery(DBInsanity, string);
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) desbloqueó el personaje %s.", InfoCuenta[playerid][jApodo], playerid, params);
		SendAdminMessage(0xFF6347FF, string);
		format(string, sizeof string, "%s desbaneo el personaje %s.", InfoCuenta[playerid][jApodo], params);
		Log("LOGS/desban.log", string);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Ese personaje no existe.");
	return 1;
}
CMD:desbanearpj(playerid, params[]) return cmd_desbanpj(playerid, params);

CMD:desbancuenta(playerid, params[])
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /desbancuenta (Nombre de usuario)");
	if (VerificarCuenta(params))
	{
		new string[512], banex;
		reg_int(0, "OtakuN_N", banex);
		if (banex == 0) return SendClientMessage(playerid, COLOR_WHITE, "Esa cuenta no está baneada.");
		mysql_format(DBInsanity, string, sizeof string, "UPDATE cuentas SET OtakuN_N = 0 WHERE Nombre = '%e'", params);
		mysql_tquery(DBInsanity, string);
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) desbaneó la cuenta %s.", InfoCuenta[playerid][jApodo], playerid, params);
		SendAdminMessage(0xFF6347FF, string);
		format(string, sizeof string, "%s desbaneo la cuenta %s.", InfoCuenta[playerid][jApodo], params);
		Log("LOGS/desban.log", string);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Esa cuenta no existe.");
	return 1;
}
CMD:desbanearcuenta(playerid, params[]) return cmd_desbancuenta(playerid, params);

CMD:expulsarstaff(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	new string[512];
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /expulsarstaff (Nombre de usuario)");
	if (VerificarCuenta(params))
	{
		new	banex, list[32];
		alm(list, "niub");
		reg_int(0, "JotoOtaku", banex);
		if (banex == 0) return SendClientMessage(playerid, COLOR_WHITE, "Esa cuenta no tiene variables admin.");
		mysql_format(DBInsanity, string, sizeof string, "UPDATE cuentas SET Apodo = '%e', JotoOtaku = 0, EncFac = 0 WHERE Nombre = '%e'", list, params);
		mysql_tquery(DBInsanity, string);
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) expulsó a %s de la administración. (OFFLINE)", InfoCuenta[playerid][jApodo], playerid, params);
		SendAdminMessage(0xFF6347FF, string);
		format(string, sizeof string, "%s expulsó a %s de la administración. (OFFLINE)", InfoCuenta[playerid][jApodo], params);
		Log("LOGS/admin.log", string);
		return 1;
	}
	SendClientMessage(playerid, COLOR_WHITE, "Está cuenta no existe.");
	return 1;
}

CMD:obanearpj(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	new string[1028], playername[MAX_PLAYER_NAME], reason[64];
	if (sscanf(params, "s[24]s[64]", playername, reason)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /obanearpj (Nombre_Apellido) (Razón)");
	if (VerificarPersonaje(playername))
	{
		new banex;
		reg_int(0, "OtakuN_N", banex);
		if (banex != 0) return SendClientMessage(playerid, COLOR_GREY, "Ese personaje ya está bloqueado.");
		mysql_format(DBInsanity, string, sizeof string, "UPDATE personajes SET OtakuN_N = 2, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE Nombre_Apellido = '%e'", NombreOriginal(playerid), reason, FechaHoy(), playername);
		mysql_tquery(DBInsanity, string);
		format(string, sizeof string, "%s bloqueó el personaje %s, razón: %s", NombreDeCuenta(playerid), playername, reason);
		Log("LOGS/offban.log", string);
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) bloqueó el personaje %s, razón: %s (OFFLINE)", InfoCuenta[playerid][jApodo], playerid, playername, reason);
		SendAdminMessage(0xFF6347FF, string);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Ese personaje no existe." );
	return 1;
}
CMD:obloquearpj(playerid, params[]) return cmd_obanearpj(playerid, params);

CMD:changepass(playerid)
{
	Dialog_Show(playerid, ConfirmarPass, DIALOG_STYLE_PASSWORD, "Cambio de contraseña", "{cccccc}Introduce tu contraseña actual:", "Continuar", "Salir");
	return 1;
}
CMD:cambiarclave(playerid) return cmd_changepass(playerid);

Dialog:ConfirmarPass(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new Salted_Key[65];
	SHA256_PassHash(inputtext, InfoCuenta[playerid][jSalt], Salted_Key, 65);
	if (strcmp(Salted_Key, InfoCuenta[playerid][jClave]) == 0)
	{
		Dialog_Show(playerid, NewPass, DIALOG_STYLE_PASSWORD, "Nueva contraseña", "{cccccc}Introduce la nueva contraseña:", "Cambiar", "Salir");
	}
	else
	{
		SendClientMessage(playerid, 0xccccccff, "Contraseña incorrecta, intenta de nuevo.");
		Dialog_Show(playerid, ConfirmarPass, DIALOG_STYLE_PASSWORD, "Cambio de contraseña", "{cccccc}Introduce tu contraseña actual:", "Continuar", "Salir");
	}
	return 1;
}

Dialog:NewPass(playerid, response, listitem, inputtext[])
{
	new string[256];
	if (!response) return 1;
	if (strlen(inputtext) < 5)
	{
		SendClientMessage(playerid, 0xccccccff, "No puedes tener una contraseña con menos de 4 carácteres.");
		Dialog_Show(playerid, NewPass, DIALOG_STYLE_PASSWORD, "Nueva contraseña", "{cccccc}Introduce la nueva contraseña:", "Cambiar", "Salir");
		return 1;
	}
	if (strlen(inputtext) > 23)
	{
		SendClientMessage(playerid, 0xccccccff, "No puedes tener una contraseña con más de 24 carácteres.");
		Dialog_Show(playerid, NewPass, DIALOG_STYLE_PASSWORD, "Nueva contraseña", "{cccccc}Introduce la nueva contraseña:", "Cambiar", "Salir");
		return 1;
	}
	//hash password + save
	Loop(e, 10, 0) { InfoCuenta[playerid][jSalt][e] = random(79) + 47; }
	InfoCuenta[playerid][jSalt][10] = 0;
	SHA256_PassHash(inputtext, InfoCuenta[playerid][jSalt], InfoCuenta[playerid][jClave], 65);
	mysql_format(DBInsanity, string, sizeof string, "UPDATE cuentas SET Clave = '%e', Salt = '%e' WHERE ID = '%d'", InfoCuenta[playerid][jClave], InfoCuenta[playerid][jSalt], InfoCuenta[playerid][jID]);
	mysql_tquery(DBInsanity, string);
	//log + message
	format(string, sizeof string, "%s ha cambiado su contraseña.", NombreDeCuenta(playerid));
	Log("LOGS/password.log", string);
	format(string, sizeof string, "Has cambiado tu contraseña a: '%s'", inputtext);
	SendClientMessage(playerid, COLOR_YELLOW, string);
	return 1;
}

CMD:cuenta(playerid)
{
	Show_cuenta(playerid, playerid);
	return 1;
}
CMD:stats(playerid) return cmd_cuenta(playerid);
CMD:est(playerid) return cmd_cuenta(playerid);
CMD:estadisticas(playerid) return cmd_cuenta(playerid);

CMD:gob(playerid, params[])
{
	if (!leader_faccion(playerid, 1, 2, 3, 4, 5)) return SendClientMessage(playerid, COLOR_GREY, "No tienes acceso a este comando.");
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GRAD2, "Utiliza: /gob (texto)");
	new string[256];
	if (leader_faccion(playerid, 1)) format(string, sizeof string, "{0066FF}ANUNCIO LSPD: %s", params[0]);
	else if (leader_faccion(playerid, 2)) format(string, sizeof string, "{0066FF}ANUNCIO FBI: %s", params[0]);
	else if (leader_faccion(playerid, 3)) format(string, sizeof string, "{0066FF}ANUNCIO USMC: %s", params[0]);
	else if (leader_faccion(playerid, 4)) format(string, sizeof string, "{0066FF}ANUNCIO LSCSD: %s", params[0]);
	else if (leader_faccion(playerid, 5)) format(string, sizeof string, "{0066FF}ANUNCIO GOB: %s", params[0]);
	else if (leader_faccion(playerid, 6)) format(string, sizeof string, "{0066FF}ANUNCIO LSFD: %s", params[0]);
	SendAllICMessage(0x0066FFFF, string);
	return 1;
}

CMD:impuesto(playerid, params[])
{
	if (!leader_faccion(playerid, 5)) return SendClientMessage(playerid, COLOR_GREY, "No eres líder del Gobierno.");
	if (sscanf(params, "i", params[0])) return SendClientMessage(playerid, COLOR_GRAD2, "* /impuesto <cantidad>");
	if (params[0] < 0 || params[0] > 1500) return SendClientMessage(playerid, COLOR_GRAD2, "{FFFF00}[ERROR]:{FFFFFF} Valor entre 1 - 1.500");

	new string[160];
	TaxValue = params[0];
	SaveStuff();
	format(string, sizeof string, "{00ACFF}[GOBIERNO] {FFFFFF}Nuevo pago por impuesto. ($%s)", diner_coma(TaxValue));
	SendAllICMessage(0xFFFFFFFF, string);
	return 1;
}

CMD:derechos(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	new string[180];
	format(string, sizeof string,"%s dice: Tienes derecho a guardar silencio, todo lo que diga puede usarse en su contra.",NombreJugador(playerid));
	ProxDetector(20.0, playerid, string, COLOR_FADE1,COLOR_FADE2,COLOR_FADE3,COLOR_FADE4,COLOR_FADE5);
	format(string, sizeof string,"%s dice: Tiene derecho a un abogado, si no puede pagar uno, se le asignará uno a costas del Estado.",NombreJugador(playerid));
	ProxDetector(20.0, playerid, string, COLOR_FADE1,COLOR_FADE2,COLOR_FADE3,COLOR_FADE4,COLOR_FADE5);
	format(string, sizeof string,"%s dice: Tiene derecho a una llamada por teléfono.",NombreJugador(playerid));
	ProxDetector(20.0, playerid, string, COLOR_FADE1,COLOR_FADE2,COLOR_FADE3,COLOR_FADE4,COLOR_FADE5);
	format(string, sizeof string,"%s dice: ¿De acuerdo señor?",NombreJugador(playerid));
	ProxDetector(20.0, playerid, string, COLOR_FADE1,COLOR_FADE2,COLOR_FADE3,COLOR_FADE4,COLOR_FADE5);
	return 1;
}

CMD:codigos(playerid)
{
	if (!member_faccion(playerid, 1, 2, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de LSPD y FBI.");
	SendClientMessage(playerid,COLOR_LIGHTBLUE, "[LSPD-FBI-SASD] Códigos de radio de uso IC. [Disponible más detallado en el foro (URL en /foro).]");
	SendClientMessage(playerid,COLOR_WHITE,"10-0 Despejado. || 10-1 Persecución en ... || 10-2 Sospechoso en... || 10-3 Detenido. || 10-4 Recibido, OK. || 10-5 Retransmitir mensaje.");
	SendClientMessage(playerid,COLOR_WHITE,"10-6 Ocupado. || 10-7 Precaución en... || 10-8 Procesar al detenido. || 10-9 Llamada atendida. || 10-10 Unidad libre de asignación.");
	SendClientMessage(playerid,COLOR_WHITE,"10-11 Robo en progreso. || 10-14 Requisa,Revisión,Revisar. || 10-15 Disturbio por problema civil en... || 10-16 Reten.");
	SendClientMessage(playerid,COLOR_WHITE,"10-17 Situación controlada. || 10-20 Lugar donde se encuentra. || 10-21 Teléfono || 10-22 Moto/vehículo || 10-23 Esperar un momento.");
	SendClientMessage(playerid,COLOR_WHITE,"10-24 Ponerse en contacto || 10-25 Terminar tarea. || 10-26 Cancelar la última información. || 10-30 No está de acuerdo a las reglas.");
	SendClientMessage(playerid,COLOR_WHITE,"10-31 Coche mal aparcado en... || 10-33 Mi vida corre peligro. || 10-34 Solicitud de ayuda. || 10-35 Información Clasificada.");
	SendClientMessage(playerid,COLOR_WHITE,"10-36 Candado policial. || 10-37 Solicitud de grúa en... || 10-38 Solicitud de Paramédicos en ... || 10-39 Solicitud de Bomberos.");
	SendClientMessage(playerid,COLOR_WHITE,"10-40 Situación actual... || 10-42 Accidente de tránsito en... || 10-44 Tengo un recado. || 10-48 Mal uso de la radio. || 10-53 Civil/Persona");
	SendClientMessage(playerid,COLOR_WHITE,"10-54 Civil/es fuertemente armado/s. || 10-57 Irse del lugar.. || 10-68 Enviar información. || 10-73 Patrullando en... || 10-74 Negativo...");
	SendClientMessage(playerid,COLOR_WHITE,"10-76 Voy a/me dirijo a... || 10-80 Nos vemos en... || 10-81 Solicitud de extracción (Que alguien me recoja) en... || 10-86 Agente disponible");
	return 1;
}

CMD:autorizar(playerid, params[])
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	if (!IsPlayerInRangeOfPoint(playerid, 2.5, 1559.655151,-1649.434326,4990.585937)) return SendClientMessage(playerid, COLOR_GRAD2, "¡No estás en el acceso a la prisión!");
	if (sscanf(params, "d", params[0])) return SendClientMessage(playerid, COLOR_GRAD2, "Utilize: /autorizar <ID> [Este comando sirve para permitir el acceso a un civil a la prisión]");
	if (params[0] == playerid) return SendClientMessage(playerid, COLOR_GRAD2, "¡No puedes autorizarte a ti mismo!");
	if (params[0] == INVALID_PLAYER_ID) return SendClientMessage(playerid, COLOR_GRAD2, "Jugador no conectado.");
	if (!CercaDelMarica(8.0, playerid, params[0])) return SendClientMessage(playerid, COLOR_GREY, "El jugador está muy lejos.");

	new string[160];
	format(string, sizeof string, "%s te autorizó para entrar a la prisión.", NombreJugador(playerid));
	SendClientMessage(params[0], COLOR_YELLOW, string);
	format(string, sizeof string, "Has autorizado a %s para que pueda acceder a la prisión.", NombreJugador(params[0]));
	SendClientMessage(playerid, COLOR_YELLOW, string);
	Autorizado[params[0]] = 1;
	return 1;
}

TiempoHabilidad(playerid)
{
	new tiempo = 30000;
	switch (InfoPersonaje[playerid][pHabilidad][3])
	{
		case 0..15: tiempo = Random(15000, 20000); 
		case 16..35: tiempo = Random(10000, 15000);
		case 36..75: tiempo = Random(8000, 10000);
		case 76..100: tiempo = Random(5000, 8000);
		default: tiempo = Random(1000, 5000);
	}
	return tiempo;
}

CMD:robarnegocio(playerid)
{
	if (IsPlayerJob(playerid, 3) == 0) return SendClientMessage(playerid, COLOR_GREY, "Necesitas ser delincuente para esto.");
	if (GetPVarInt(playerid, "EstaCrack") == 1) return SendClientMessage(playerid, COLOR_GRAD2, "{FFFF00}[ERROR]:{FFFFFF} No puedes usar este comando mientras estás herido.");
	if (InfoPersonaje[playerid][pLimiteRobos] >= 2) return SendClientMessage(playerid, COLOR_WHITE, "Ya robaste, espera al próximo PayDay.");
	new negocio = GetIntNegocio(playerid, 1), string[128];
	if (negocio == -1) return SendClientMessage(playerid, COLOR_GREY, "Tienes que estar en un negocio.");
	if (!IsPlayerInRangeOfPoint(playerid, 4.0, InfoNegocio[negocio][nLugarCompraX], InfoNegocio[negocio][nLugarCompraY], InfoNegocio[negocio][nLugarCompraZ])) return SendClientMessage(playerid, COLOR_GREY, "Tienes que estar en el mostrador.");
	if (InfoNegocio[negocio][nRobado] != 0) return SendClientMessage(playerid, COLOR_GREY, "El negocio ha sido robado recientemente.");

	SendClientMessage(playerid, 0xEBEBEBFF, "Estás {00AE57}robando{EBEBEB}. Mantente dentro del negocio un par de segundos (El tiempo varía según la habilidad).");
	foreach(Player, jugador) if (GetIntNegocio(jugador, 1) == negocio)
	{
		SendClientMessage(playerid, 0xEBEBEBFF, "¡Está sonando la {00AE57}alarma{EBEBEB} de robos, la policia fue alertada!");
	}

	InfoNegocio[negocio][nRobado] = 15;
	InfoPersonaje[playerid][pLimiteRobos]++;	
	guardar_int_mysql("personajes", "LimiteRobos", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pLimiteRobos]);
	new location[MAX_ZONE_NAME];
	Get2DZone(location, MAX_ZONE_NAME, InfoNegocio[negocio][nExteriorX], InfoNegocio[negocio][nExteriorY], InfoNegocio[negocio][nExteriorZ]);
	format(string, sizeof string, "CENTRAL: Robo del negocio %s en proceso. Dirección: %s #%d.", InfoNegocio[negocio][nNombre], location, negocio);
	SendRadioMessage(1, COLOR_RADIO, string);
	format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} %s(%d) está asaltando un negocio.", NombreOriginal(playerid), playerid);
	SendAdminMessage(0xFFFFFFFF, string);
	new tiempo = TiempoHabilidad(playerid);
	SetTimerEx("RobandoNegocio", tiempo, false, "ii", playerid, negocio);
	return 1;
}
CMD:robarlocal(playerid) return cmd_robarnegocio(playerid);

forward RobandoNegocio(playerid, negocio);
public RobandoNegocio(playerid, negocio)
{
	if (IsPlayerInRangeOfPoint(playerid, 30.0, InfoNegocio[negocio][nInteriorX], InfoNegocio[negocio][nInteriorY], InfoNegocio[negocio][nInteriorZ]))
	{
		new Cantidad = Random(0, (InfoNegocio[negocio][nDinero] - floatround( (InfoNegocio[negocio][nDinero]*75) / 100 ) )); // Máximo el 75% de las ganancias
		if (InfoCuenta[playerid][jVIP] != 0) InfoPersonaje[playerid][pHabilidad][3] += 2;
		else InfoPersonaje[playerid][pHabilidad][3]++;
		guardar_int_mysql("personajes", "Habilidad4", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pHabilidad][3]);

		GivePlayerCash(playerid, Cantidad, "robo negocio");
		SendClientMessageEx(playerid, 0xEBEBEBFF, "Robaste el {00AE57}negocio{EBEBEB} y conseguiste {00AE57}$%d{EBEBEB}. ¡Huye!", Cantidad);
	}
	else
	{
		SendClientMessage(playerid, 0xEBEBEBFF, "No conseguiste nada porque escapaste del negocio, cobarde.");	
	}
	return 1;
}

CMD:robarcaja(playerid)
{
	return 1;
}

CMD:ayudacoinsvip(playerid)
{
	SendClientMessage(playerid, COLOR_GREEN, "*** Información sobre: Coins VIP ***");
	SendClientMessage(playerid, COLOR_WHITE, "Coins VIP pueden ser canjeadas por armas en el VIP Locker.");
	SendClientMessage(playerid, COLOR_WHITE, "Coins VIP pueden ser ganadas en eventos o regalos.");
	SendClientMessage(playerid, COLOR_WHITE, "Las armas cuestan de 1 a 5 coins VIP cada una.");
	SendClientMessage(playerid, COLOR_WHITE, "Si tu deseas dar coins VIP usa /darcoinsvip");
	SendClientMessage(playerid, COLOR_WHITE, "Si tu deseas vender coins VIP usa /vendercoinsvip");
	return 1;
}

CMD:infoad(playerid, params[])
{
    #pragma unused params
	if(IsPlayerConnected(playerid))
	{
		SendClientMessage(playerid, COLOR_RED, "[IMPORTANTE] Requísitos al enviar un anuncio por /ad(s). [Leer con atención]");
		SendClientMessage(playerid, COLOR_WHITE, "1. No se permiten expresiones OOC, tipo: faccion, admin y similares.");
		SendClientMessage(playerid, COLOR_WHITE, "2. Todo término de rol está prohibido, sea MG, PG u otros.");
		SendClientMessage(playerid, COLOR_WHITE, "3. Prohibido anuncios que inciten al PG, publicidad de mafias o servicios ilegales.");
		SendClientMessage(playerid, COLOR_WHITE, "4. El Tag -EXTRA- es exclusivo para los miembros de SA News (Online), con su CMD propio.");
		SendClientMessage(playerid, COLOR_WHITE, "5. Los precios no pueden seguir el formaro 10K, 5KK. En su lugar usar 5 mil dólares por ejemplo.");
		SendClientMessage(playerid, COLOR_WHITE, "6. Queda totalmente prohibido la búsqueda de personas, para ello existe FBI, es su rol.");
		SendClientMessage(playerid, COLOR_WHITE, "7. Usar este canal para insultar llevará un jail directo por IOOC vía /ad.");
		SendClientMessage(playerid, COLOR_WHITE, "8. Cualquier información que no sea IC no será válido como AD, para dudas usen /duda [Texto].");
		SendClientMessage(playerid, COLOR_WHITE, " ");
	}
	return 1;
}

CMD:editargps(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[128], slot;
	if(sscanf(params, "ds", slot, params)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editargps (GPS Slot) (String)");
	if(isnull(params)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editargps (GPS Slot) (Mensaje)");
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) movió la ubicación %d del GPS.", InfoCuenta[playerid][jApodo], playerid, slot);
	SendAdminMessage(0xFF6347FF, string);
	new Float:x, Float:y, Float:z;
    GetPlayerPos(playerid, x, y, z);
	InfoGPS[slot][uPosicion][0] = x;
	InfoGPS[slot][uPosicion][1] = y;
	InfoGPS[slot][uPosicion][2] = z;
	alm(InfoGPS[slot][uNombre], params);
	saveUbicaciones(slot);
	return 1;

}

CMD:licencias(playerid, params[])
{
	if (InfoPersonaje[playerid][pSancionado] != 0) return SendClientMessage(playerid, COLOR_GREY, "No puedes usar este comando mientras estás en prisión.");
	new car[32], fly[32], boat[32], gun[32], playerid2, string[320];
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /licencias (JugadorID)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Jugador desconectado.");
	if (!CercaDelMarica(4.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Estás demasiado lejos del jugador.");
	if (InfoPersonaje[playerid][pLicencia][0] != 0) car = "{2CC705}Sí{EBEBEB}";
	else car = "{FC2710}No{EBEBEB}";
	if (InfoPersonaje[playerid][pLicencia][1] != 0) boat = "{2CC705}Sí{EBEBEB}";
	else boat = "{FC2710}No{EBEBEB}";
	if (InfoPersonaje[playerid][pLicencia][2] != 0) fly = "{2CC705}Sí{EBEBEB}";
	else fly = "{FC2710}No{EBEBEB}";
	if (InfoPersonaje[playerid][pLicencia][3] != 0) gun = "{2CC705}Sí{EBEBEB}";
	else gun = "{FC2710}No{EBEBEB}";
	format(string, sizeof string, "LICENCIAS LEGALES | %s (%d)", NombreJugador(playerid), InfoPersonaje[playerid][pDocumento]);
	SendClientMessage(playerid2, COLOR_LIGHTBLUE, string);
	format(string, sizeof string, "Conducir: %s - Vuelo: %s - Armas: %s - Navegación: %s", car, fly, gun, boat);
	SendClientMessage(playerid2, 0xEBEBEBFF, string);
	PlayerPlaySound(playerid, 1052, 0.0, 0.0, 0.0);
	PlayerPlaySound(playerid2, 1052, 0.0, 0.0, 0.0);
	format(string, sizeof string, "muestra sus licencias a %s.", NombreJugador(playerid2));
	if (playerid != playerid2) meuwu(playerid, string);
	return 1;
}
CMD:licencia(playerid, params[]) return cmd_licencias(playerid, params);
CMD:mostrarlicencias(playerid, params[]) return cmd_licencias(playerid, params);

CMD:dni(playerid, params[])
{
	if (InfoPersonaje[playerid][pSancionado] != 0) return SendClientMessage(playerid, COLOR_GREY, "No puedes usar este comando mientras estás en prisión.");
	new gformat[170], playerid2, sex[18], otext[36];
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /dni (JugadorID)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Jugador desconectado.");
	if (!CercaDelMarica(4.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Jugador muy lejos.");
	if (InfoPersonaje[playerid][pSexo] == 1) sex = "Masculino";
	else sex = "Femenino";
	if (InfoPersonaje[playerid][pCiudad] == 2) otext = "San Fierro";
	else if (InfoPersonaje[playerid][pCiudad] == 1) otext = "Los Santos";
	SendClientMessage(playerid2, COLOR_LIGHTBLUE, "PAPELES LEGALES | DOCUMENTO DE NACIONALIDAD");
	format(gformat, sizeof gformat, "Nombre completo: %s - Sexo: %s - Edad: %d", NombreJugador(playerid), sex, InfoPersonaje[playerid][pEdad]);
	SendClientMessage(playerid2, 0xEBEBEBFF, gformat);
	format(gformat, sizeof gformat, "Nacionalidad: %s - Documento: %d", otext, InfoPersonaje[playerid][pDocumento]);
	SendClientMessage(playerid2, 0xEBEBEBFF, gformat);
	PlayerPlaySound(playerid, 1052, 0.0, 0.0, 0.0);
	PlayerPlaySound(playerid2, 1052, 0.0, 0.0, 0.0);
	format(gformat, sizeof gformat, "le muestra su documento a %s.", NombreJugador(playerid2));
	if (playerid != playerid2) meuwu(playerid, gformat);
	return 1;
}
CMD:mostrardni(playerid, params[]) return cmd_dni(playerid, params);

CMD:dnifalso(playerid, params[])
{
	if (InfoPersonaje[playerid][pFalsoDocumento] == 0) return SendClientMessage(playerid, COLOR_GREY, "No posees un documento falso.");
	if (InfoPersonaje[playerid][pSancionado] != 0) return SendClientMessage(playerid, COLOR_GREY, "No puedes usar este comando mientras estás en prisión.");
	new gformat[170], playerid2, sex[18], otext[36];
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /dni (JugadorID)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Jugador desconectado.");
	if (!CercaDelMarica(4.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Jugador muy lejos.");
	if (InfoPersonaje[playerid][pSexo] == 1) sex = "Masculino";
	else sex = "Femenino";
	if (InfoPersonaje[playerid][pCiudad] == 2) otext = "San Fierro";
	else if (InfoPersonaje[playerid][pCiudad] == 1) otext = "Las Venturas";
	SendClientMessage(playerid2, COLOR_LIGHTBLUE, "PAPELES LEGALES | DOCUMENTO DE NACIONALIDAD");
	format(gformat, sizeof gformat, "Nombre completo: %s - Sexo: %s - Edad: %d", InfoPersonaje[playerid][pFalsoNombre], sex, InfoPersonaje[playerid][pEdad]);
	SendClientMessage(playerid2, 0xEBEBEBFF, gformat);
	format(gformat, sizeof gformat, "Nacionalidad: %s - Documento: %d", otext, InfoPersonaje[playerid][pFalsoDocumento]);
	SendClientMessage(playerid2, 0xEBEBEBFF, gformat);
	PlayerPlaySound(playerid, 1052, 0.0, 0.0, 0.0);
	PlayerPlaySound(playerid2, 1052, 0.0, 0.0, 0.0);
	format(gformat, sizeof gformat, "le muestra su documento a %s.", NombreJugador(playerid2));
	if (playerid != playerid2) meuwu(playerid, gformat);
	return 1;
}
CMD:mostrardnifalso(playerid, params[]) return cmd_dnifalso(playerid, params);

CMD:reportarbug(playerid)
{
	if (InfoPersonaje[playerid][pBlockBug] != 0) return SendClientMessage(playerid, COLOR_RED, "[ATENCION]:{FFFFFF} No puedes reportar bugs, estás bloqueado del comando.");
	new string[190];
	if (!CheckTimer(180, TimerReportarBug))
	{
		TimerReportarBug = gettime();
		Dialog_Show(playerid, REBUG, DIALOG_STYLE_INPUT, "{00AE57}Reportar Bug", "{EBEBEB}Escribe exactamente el bug que has encontrado, se quedará guardado en la base de datos\ncuando el equipo de desarrolladores lo revise, tratarán de solucionar el bug lo más rapido posible.\n\nGracias por reportar.", "Reportar", "Salir");
	}
	else
	{
		format(string, sizeof string, "Faltan %d segundos para que puedas usar este comando.", CheckTimer(180, TimerReportarBug));
		SendClientMessage(playerid, 0xb0b0b0ff, string);
	}
	return 1;
}

Dialog:REBUG(playerid, response, listitem, inputtext[])
{
	if (!response) return SendClientMessage(playerid, COLOR_WHITE, "No dudes en reportar un bug si lo encuentras.");
	SendClientMessage(playerid, COLOR_YELLOW, "Gracias por reportar el bug, intentaremos arreglarlo lo más pronto posible.");
	new string[190];
	format(string, sizeof string, "{FF2F2F}[BugReport]{FFFFFF} %s(%d) reportó: %s", NombreOriginal(playerid), playerid, inputtext);
	SendAdminMessage(0xFFFFFFFF, string);
	format(string, sizeof string, "%s reportó: %s", NombreDeCuenta(playerid), inputtext);
	Log("LOGS/reportbug.log", string);
	return 1;
}

CMD:retips(playerid)
{
	Dialog_Show(playerid, ShowInvalido,DIALOG_STYLE_MSGBOX,"{00AE57}Tips para Reportar","{FFFFFF}\n- Reporta lo que necesitas, no a quien necesitas.\n- Sé especifico y claro, reporta exactamente lo que necesitas.\n- No hacer falsos reportes [Advertencia].\n- No llames administradores.\n- Reporta sólo asuntos, In Game [IG].","Cerrar", "");
	return 1;
}

CMD:reply(playerid, params[])
{
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /reply (texto)");
	new string[128], reportid = -1;
	Loop(i, MAX_REPORTS, 0)
	{
		if (Reports[i][ReportFrom] == playerid && Reports[i][CheckingReport] != 999)
		{
			reportid = i;
		}
	}
	if (reportid == -1) return SendClientMessage(playerid, COLOR_WHITE, "No estás en un reporte ahora mismo.");
	if (!IsPlayerConnectedEx(Reports[reportid][CheckingReport])) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
	format(string, sizeof string, "{FF0000}[RID]{FFFFFF} %s(ID: %d): %s", NombreOriginal(playerid), playerid, params);
	SendClientMessage(Reports[reportid][CheckingReport], COLOR_YELLOW, string);
	format(string, sizeof string, "{00AE57}Respuesta enviada{FFFFFF} a %s: %s", NombreOriginal(Reports[reportid][CheckingReport]), params);
	SendClientMessage(playerid,  COLOR_YELLOW, string);
	return 1;
}

CMD:limpiarreportes(playerid)
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	new string[128];
	ClearReports();
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) ha limpiado todos los reportes activos.", InfoCuenta[playerid][jApodo], playerid);
	SendAdminMessage(0xFF6347FF, string);
	return 1;
}

CMD:re(playerid, params[])
{
	if (AdminOnlineCheck() == 0) return SendClientMessage(playerid, COLOR_WHITE, "No hay {FF0000}administradores online{FFFFFF} en este momento, intenta más tarde.");
	if (JustReported[playerid] > 0) return SendClientMessage(playerid, COLOR_WHITE, "{A2DC35}[INFO]:{FFFFFF} Espera 60 segundos para otro reporte.");
	if (isnull(params)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /re (REPORTE)");

	SendReportToQue(playerid, params);
	SendClientMessage(playerid, COLOR_WHITE, "Tu reporte fue enviado al equipo de{00AE57} administración{FFFFFF} en breve te ayudarán.");
	JustReported[playerid] = 60;
	//if(InfoPersonaje[playerid][pBanco] >= 50000) InfoPersonaje[playerid][pBanco] -= 1000; //removido by edinsonwalker
	return 1;
}

CMD:creporte(playerid)
{
	Loop(i, MAX_REPORTS, 0) if (Reports[i][ReportFrom] == playerid)
	{
		Reports[i][ReportFrom] = 999;
		Reports[i][BeingUsed] = 0;
		Reports[i][TimeToExpire] = 0;
		return SendClientMessage(playerid, COLOR_WHITE, "Cancelaste el reporte satisfactoriamente." );
	}
	SendClientMessage(playerid, COLOR_GRAD2, "Actualmente no tienes reportes pendientes.");
	return 1;
}

CMD:reportes(playerid)
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[320];
	SendClientMessage(playerid, COLOR_GREEN, "REPORTES:");
	Loop(id, MAX_REPORTS, 0) if (Reports[id][BeingUsed] == 1)
	{
		new playerid2 = Reports[id][ReportFrom];
		format(string, sizeof string, "[{FF9B6A}%s(ID: %d) | RID: %d{FFFFFF}] %s", NombreOriginal(playerid2), playerid2, id, Reports[id][Report]);
		SendSplitMessage(playerid, 0xFFFFFFFF, string);
	}
	return 1;
}

CMD:ar(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[180], reportid;
	if (sscanf(params, "d", reportid)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /ar (Reporte ID)");
	if (reportid < 0 || reportid > 50) { SendClientMessage(playerid, COLOR_GREY, "ID del reporte no debe ser menor de 0 ni mayor de 499!"); return 1; }
	if (Reports[reportid][BeingUsed] == 0) return SendClientMessage(playerid, COLOR_GREY, "Ese RID ya fue atendido.");
	if (!IsPlayerConnectedEx(Reports[reportid][ReportFrom]))
	{
		SendClientMessage(playerid, COLOR_GREY, "El que reportó se ha desconectado !");
		Reports[reportid][ReportFrom] = 999;
		Reports[reportid][BeingUsed] = 0;
		return 1;
	}
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) aceptó el reporte de %s (ID: %i, RID: %i).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(Reports[reportid][ReportFrom]),Reports[reportid][ReportFrom],reportid);
	SendAdminMessage(0xFF6347FF, string);
	format(string, sizeof string, "%s (%d) ha aceptado tu reporte. Él te informará como proseguir.", InfoCuenta[playerid][jApodo], playerid);
	SendClientMessage(Reports[reportid][ReportFrom], COLOR_WHITE, string);
	Reports[reportid][ReplyTimerr] = SetTimerEx("ReplyTimer", 60000, 0, "d", reportid);
	Reports[reportid][CheckingReport] = playerid;
	Reports[reportid][BeingUsed] = 0;
	Reports[reportid][TimeToExpire] = 0;
	alm(Reports[reportid][Report], "None");
	return 1;
}

CMD:rr(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[180], reportid;
	if (sscanf(params, "d", reportid)) return SendClientMessage(playerid, COLOR_WHITE,"USE: /rr [Report ID]");
	if (reportid < 0 || reportid > 499) { SendClientMessage(playerid, COLOR_WHITE, "ID del reporte no debe ser menor de 0 ni mayor de 499!"); return 1; }
	if (Reports[reportid][BeingUsed] == 0) return SendClientMessage(playerid, COLOR_GREY, "Ese RID ya fue atendido!");
	if (!IsPlayerConnectedEx(Reports[reportid][ReportFrom]))
	{
		SendClientMessage(playerid, COLOR_GREY, "El que reportó se ha desconectado !");
		Reports[reportid][ReportFrom] = 999;
		Reports[reportid][BeingUsed] = 0;
		return 1;
	}
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) rechazó el reporte de %s.", InfoCuenta[playerid][jApodo], NombreOriginal(Reports[reportid][ReportFrom]));
	SendAdminMessage(0xFF6347FF, string);
	format(string, sizeof string, "%s (%d) ha rechazado tu reporte. Posiblemente no te especificaste bien o no merece ser reportado.", InfoCuenta[playerid][jApodo], playerid);
	SendClientMessage(Reports[reportid][ReportFrom], COLOR_WHITE, string);
	Reports[reportid][ReportFrom] = 999;
	Reports[reportid][BeingUsed] = 0;
	Reports[reportid][TimeToExpire] = 0;
	alm(Reports[reportid][Report], "None");
	return 1;
}

CMD:mps(playerid)
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	if (See_MP[playerid] == 1)
	{
		See_MP[playerid] = 0;
		SendClientMessage(playerid, COLOR_GRAD2, "Ahora verás los privados.");
	}
	else
	{
		See_MP[playerid] = 1;
		SendClientMessage(playerid, COLOR_GRAD2, "Ahora ya no verás lo privados.");
	}
	return 1;
}
CMD:vermps(playerid) return cmd_mps(playerid);

CMD:verwalkie(playerid)
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (See_FRC[playerid] == 1)
	{
		See_FRC[playerid] = 0;
		SendClientMessage(playerid, COLOR_GRAD2, "Notificación del uso de la radio portátil entre usuarios desactivada.");
	}
	else
	{
		See_FRC[playerid] = 1;
		SendClientMessage(playerid, COLOR_GRAD2, "Notificación del uso de la radio portátil entre usuarios activada.");
	}
	return 1;
}

CMD:tipduda(playerid)
{
	if (GetPlayerAdmin(playerid, 1) != 0)
	{
		SendClientMessage(playerid, COLOR_WHITE, "{A2DC35}Tips para responder una duda.");
		SendClientMessage(playerid, COLOR_WHITE, "Sé claro y directo, simplemente una respuesta clara");
		SendClientMessage(playerid, COLOR_WHITE, "No es necesaria una conversación con el usuario, esto es sencillo, responde lo necesario.");
		SendClientMessage(playerid, COLOR_WHITE, "Termina una y atiende otra, no te apresures.");
	}
	else
	{
		SendClientMessage(playerid, COLOR_WHITE, "{A2DC35}Tips para enviar una duda.");
		SendClientMessage(playerid, COLOR_WHITE, "Sé claro y directo con el administrador, no necesitas conversar con él.");
		SendClientMessage(playerid, COLOR_WHITE, "Si no te dieron una respuesta clara tienes todo el derecho de mandar otra duda.");
		SendClientMessage(playerid, COLOR_WHITE, "Usa el CMD /soporte para buscar la respuesta de tu duda manualmente si lo deseas.");
	}
	return 1;
}

CMD:quitarefectos(playerid, params[])
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new playerid2, string[180];
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /quitarefectos (PlayerID)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid,  COLOR_GREY, "ID Inválida");
	if (InfoPersonaje[playerid2][pDrogaTipo] == 0) return SendClientMessage(playerid,  COLOR_GREY, "Ese jugador no tiene efectos de droga.");
	EndEffectDroug(playerid2, InfoPersonaje[playerid][pDrogaTipo]);
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) quító los efectos de droga a %s(%d).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, string);
	return 1;
}
CMD:quitarefectosdroga(playerid, params[]) return cmd_quitarefectos(playerid, params);

CMD:darvida(playerid, params[])
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new playerid2, hpset, string[180];
	if (sscanf(params, "dd", playerid2, hpset)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /darvida (PlayerID) (HP)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid,  COLOR_WHITE, "ID Inválida");
	dar_vida(playerid2, hpset);
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) estableció la salud de %s(%d) a %dHP.", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2, hpset);
	SendAdminMessage(0xFF6347FF, string);
	return 1;
}

CMD:darchaleco(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new playerid2, hpset, string[180];
	if (sscanf(params, "dd", playerid2, hpset)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /darchaleco (PlayerID) (Chaleco)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid,  COLOR_WHITE, "ID Inválida");
	dar_chaleco(playerid2, hpset);
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) estableció el chaleco de %s(%d) a %d.", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2, hpset);
	SendAdminMessage(0xFF6347FF, string);
	return 1;
}

CMD:darstat(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (sscanf(params, "ddd", params[0], params[1], params[2]))
	{
		SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /darstat (playerid/nombre) (Numero) (valor)");
		SendClientMessage(playerid, COLOR_GRAD1, "1 Nivel | 2 Banco$ | 3 Número teléfono | 4 Experiencia | 5 Casa1 | 6 Casa2 | 7 Drunk | 8 Estilo de pelea");
		SendClientMessage(playerid, COLOR_GRAD1, "9 Materiales | 10 Edad | 13 Horas jugando | 14 Jails ooc | 15 Negocio1");
		SendClientMessage(playerid, COLOR_GRAD1, "16 Habilidad armero | 17 Negocio2 | 18 Total AD Mutes | 19 DiaVIP | 20 MesVIP");
		return 1;
	}
	new string[170];
	if (!IsPlayerConnectedEx(params[0])) return SendClientMessage(playerid, COLOR_WHITE, "ID Inválida.");
	switch (params[1])
	{
		case 1:
		{
			//medida de seguridad 24/02/2020
			if (params[2] >= 100 && GetPlayerAdmin(playerid, 10) == 0)
			{
				format(string, sizeof string, "{FFBF00}[AdmWarnig]{FFFFFF} %s(%d) intentó dar nivel %d a %s(%d), por ello fue baneado con IP.", NombreOriginal(playerid), playerid, params[2], NombreOriginal(params[0]), params[0]);
				SendAdminMessage(0xFFFFFFFF, string);
				guardar_int_mysql("cuentas", "OtakuN_N", InfoCuenta[playerid][jID], 2);
				guardar_int_mysql("cuentas", "JotoOtaku", InfoCuenta[playerid][jID], 0);
				guardar_int_mysql("cuentas", "EncFac", InfoCuenta[playerid][jID], 0);
				SetTimerEx("TimerBANIP",1000,false,"d",playerid);
				return 1;
			}
			//
			InfoPersonaje[params[0]][pNivel] = params[2];
			SetPlayerScore(params[0], InfoPersonaje[params[0]][pNivel]);
			format(string, sizeof string, "Nivel: %d", params[2]);
			guardar_int_mysql("personajes", "Nivel", InfoPersonaje[params[0]][pID], InfoPersonaje[params[0]][pNivel]);
 		}
		case 2:
		{
			InfoPersonaje[params[0]][pBanco] = params[2];
			format(string, sizeof string, "Cuenta bancaria: $%d", params[2]);
			guardar_int_mysql("personajes", "BanescoOwO", InfoPersonaje[params[0]][pID], InfoPersonaje[params[0]][pBanco]);
 		}
		case 3:
		{
			InfoPersonaje[params[0]][pTelefono] = params[2];
			format(string, sizeof string, "Teléfono: #%d", params[2]);
			guardar_int_mysql("personajes", "Telefono", InfoPersonaje[params[0]][pID], InfoPersonaje[params[0]][pTelefono]);
		}
		case 4:
		{
			InfoPersonaje[params[0]][pExperiencia] = params[2];
			format(string, sizeof string, "Experiencia: %d", params[2]);
			guardar_int_mysql("personajes", "Experiencia", InfoPersonaje[params[0]][pID], InfoPersonaje[params[0]][pExperiencia]);
		}
		case 5:
		{
			InfoPersonaje[params[0]][pCasa1] = params[2];
			format(string, sizeof string, "Casa 1: %d", params[2]);
			guardar_int_mysql("personajes", "Casa", InfoPersonaje[params[0]][pID], InfoPersonaje[params[0]][pCasa1]);
		}
		case 6:
		{
			InfoPersonaje[params[0]][pCasa2] = params[2];
			format(string, sizeof string, "Casa 2: %d", params[2]);
			guardar_int_mysql("personajes", "Casa2", InfoPersonaje[params[0]][pID], InfoPersonaje[params[0]][pCasa2]);
		}
		case 7:
		{
			PlayerDrunk[params[0]] = params[2];
			format(string, sizeof string, "Drunk: %d", params[2]);
			SetPlayerDrunkLevel(playerid, params[2]);
		}
		case 8:
		{
			InfoPersonaje[params[0]][pEstiloPelea] = params[2];
			format(string, sizeof string, "Tipo Lucha: %d", params[2]);
			guardar_int_mysql("personajes", "EstiloPelea", InfoPersonaje[params[0]][pID], InfoPersonaje[params[0]][pEstiloPelea]);
		}
		case 9:
		{
			InfoPersonaje[params[0]][pMateriales] = params[2];
			format(string, sizeof string, "Materiales: %d", params[2]);
			guardar_int_mysql("personajes", "Materiales", InfoPersonaje[params[0]][pID], InfoPersonaje[params[0]][pMateriales]);
		}
		case 10:
		{
			InfoPersonaje[params[0]][pEdad] = params[2];
			format(string, sizeof string, "Edad: %d", params[2]);
			guardar_int_mysql("personajes", "Edad", InfoPersonaje[params[0]][pID], InfoPersonaje[params[0]][pEdad]);
		}
		case 13:
		{
			InfoPersonaje[params[0]][pHorasOn] = params[2];
			format(string, sizeof string, "Horas jugando: %d", params[2]);
			guardar_int_mysql("personajes", "HorasOn", InfoPersonaje[params[0]][pID], InfoPersonaje[params[0]][pHorasOn]);
		}
		case 14:
		{
			InfoPersonaje[params[0]][pJails] = params[2];
			format(string, sizeof string, "Jails: %d", params[2]);
			guardar_int_mysql("personajes", "Jails", InfoPersonaje[params[0]][pID], InfoPersonaje[params[0]][pJails]);
		}
		case 15:
		{
			InfoPersonaje[params[0]][pNegocio1] = params[2];
			format(string, sizeof string, "Negocio 1: %d.", params[2]);
			guardar_int_mysql("personajes", "Negocio", InfoPersonaje[params[0]][pID], InfoPersonaje[params[0]][pNegocio1]);
		}
		case 16:
		{
			InfoPersonaje[params[0]][pHabilidad][0] = params[2];
			format(string, sizeof string, "habilidad Guns: %d", params[2]);
			guardar_int_mysql("personajes", "Habilidad1", InfoPersonaje[params[0]][pID], InfoPersonaje[params[0]][pHabilidad][0]);
		}
		case 17:
		{
			InfoPersonaje[params[0]][pNegocio2] = params[2];
			format(string, sizeof string, "Negocio 2: %d.", params[2]);
			guardar_int_mysql("personajes", "Negocio2", InfoPersonaje[params[0]][pID], InfoPersonaje[params[0]][pNegocio2]);
		}
		case 18:
		{
			InfoPersonaje[params[0]][pAdvAD] = params[2];
			format(string, sizeof string, "Total Ad Mutes: %d.", params[2]);
			guardar_int_mysql("personajes", "AdvAD", InfoPersonaje[params[0]][pID], InfoPersonaje[params[0]][pAdvAD]);
		}
		case 19:
		{
			InfoCuenta[params[0]][jDiaVIP] = params[2];
			format(string, sizeof string, "Dia VIP: %d.", params[2]);
			guardar_int_mysql("cuentas", "DiaVIP", InfoCuenta[params[0]][jID], InfoCuenta[params[0]][jDiaVIP]);
		}
		case 20:
		{
			InfoCuenta[params[0]][jMesVIP] = params[2];
			format(string, sizeof string, "Mes VIP: %d.", params[2]);
			guardar_int_mysql("cuentas", "MesVIP", InfoCuenta[params[0]][jID], InfoCuenta[params[0]][jMesVIP]);
		}
		default: return SendClientMessage(playerid, COLOR_WHITE, "Código inválido!");
	}
	SendClientMessage(playerid, COLOR_GRAD2, string);
	return 1;
}

CMD:verstat(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GRAD2, "Utiliza: /vercuenta (JugadorID)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");

	Show_cuenta(playerid, playerid2);
	return 1;
}
CMD:vercuenta(playerid, params[]) return cmd_verstat(playerid, params);
CMD:check(playerid, params[]) return cmd_verstat(playerid, params);

CMD:cambiarint(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (sscanf(params, "dd", params[0],params[1])) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /cambiarint (PlayerID) (Interior)");
	if (!IsPlayerConnectedEx(params[0])) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
	new string[195];
	SetPlayerInterior(params[0], params[1]);
	format(string, sizeof string, "Cambiaste el interior (%d) de %s.", params[1], NombreOriginal(params[0]));
	SendClientMessage(playerid, COLOR_GRAD1, string);
	format(string, sizeof string, "%s te cambio el interior (%d).", NombreOriginal(playerid), params[1]);
	SendClientMessage(params[0], COLOR_GRAD1, string);
	return 1;
}
CMD:editarint(playerid, params[]) return cmd_cambiarint(playerid, params);
CMD:changeint(playerid, params[]) return cmd_cambiarint(playerid, params);

CMD:cambiarvw(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (sscanf(params, "dd", params[0],params[1])) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /cambiarvw (PlayerID) (VirtualWorld)");
	if (!IsPlayerConnectedEx(params[0])) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
	new string[195];
	SetPlayerVirtualWorld(params[0], params[1]);
	format(string, sizeof string, "Cambiaste el virtualworld (%d) de %s.", params[1], NombreOriginal(params[0]));
	SendClientMessage(playerid, COLOR_GRAD1, string);
	format(string, sizeof string, "%s te cambio el virtualworld (%d).", NombreOriginal(playerid), params[1]);
	SendClientMessage(params[0], COLOR_GRAD1, string);
	return 1;
}
CMD:editarvw(playerid, params[]) return cmd_cambiarvw(playerid, params);
CMD:changevw(playerid, params[]) return cmd_cambiarvw(playerid, params);

CMD:autovw(playerid, params[])
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[170];
	if (sscanf(params, "dd", params[0],params[1])) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /autovw (VehicleID) (VirtualWorld)");
	if (!GetVehicleModel(params[0])) return SendClientMessage(playerid, COLOR_GREY, "Vehículo inválido, intenta con otra ID.");
	SetVehicleExVirtualWorld(params[0], params[1]);
	format(string, sizeof string, "VirtualWorld del vehículo %d, ahora es %d.", params[0], params[1]);
	SendClientMessage(playerid, COLOR_GRAD1, string);
	return 1;
}

CMD:autoint(playerid, params[])
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[170];
	if (sscanf(params, "dd", params[0],params[1])) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /autoint (VehicleID) (Interior)");
	if (!GetVehicleModel(params[0])) return SendClientMessage(playerid, COLOR_GREY, "Vehículo inválido, intenta con otra ID.");
	LinkVehicleToInterior(params[0], params[1]);
	format(string, sizeof string, "Interior del vehículo %d, ahora es %d.", params[0], params[1]);
	SendClientMessage(playerid, COLOR_GRAD1, string);
	return 1;
}

CMD:staff(playerid) return cmd_admins(playerid);
CMD:admins(playerid)
{
	if (AdminOnlineCheck() == 0) return SendClientMessage(playerid, COLOR_WHITE, "No hay {FF0000}administradores online{FFFFFF} en este momento, intenta más tarde.");
	new string[128];
	SendClientMessage(playerid, 0x00CCCCFF, "Miembros de la administración conectados:");
	foreach(Player, playerid2) if (GetPlayerAdmin(playerid2, 1) != 0)
	{
		format(string, sizeof string, "({FFBF00}%s{FFFFFF}) %s - Rango: {00AE57}%s (%d)", InfoCuenta[playerid2][jApodo], NombreOriginal(playerid2), GetAdminName(playerid2), InfoCuenta[playerid2][jAdmin]);
		SendClientMessage(playerid, 0xFFFFFFFF, string);
	}
	return 1;
}

CMD:a(playerid, params[])
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /a (Texto)");
	new string[256];
	format(string, sizeof string, "{00AE57}** %s {FFFFFF}%s: %s", GetAdminName(playerid), InfoCuenta[playerid][jApodo], params);
	SendAdminMessage(0xFFFFFFFF, string);
	return 1;
}

CMD:ir(playerid, params[])
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new playerid2, gformat[160];
	if (sscanf(params, "u", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /ir (PlayerID)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
	new Float:p_x, Float:p_y, Float:p_z;
	GetPlayerPos(playerid2, p_x, p_y, p_z);
	new interior = GetPlayerInterior(playerid2);
	new vw = GetPlayerVirtualWorld(playerid2);
	SetPosEx(playerid, p_x, p_y, p_z, 0, interior, vw, 1);
	format(gformat, sizeof gformat, "Fuiste hasta la posición de %s.", NombreOriginal(playerid2));
	SendClientMessage(playerid, COLOR_WHITE, gformat);
	return 1;
}
CMD:gotoplayer(playerid, params[]) return cmd_ir(playerid, params);
CMD:irplayer(playerid, params[]) return cmd_ir(playerid, params);

CMD:traer(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new playerid2, gformat[160];
	if (sscanf(params, "u", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /traer (PlayerID)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
	if (InfoPersonaje[playerid2][pSancionado] != 0) return SendClientMessage(playerid, COLOR_GRAD2, "Información: No puedes sacar a gente de jail, usa el CMD /ir o /liberar.");
	if (GetPlayerAdmin(playerid2, 10) != 0) return SendClientMessage(playerid, COLOR_GRAD2, "No puedes hacer esto con propietarios o programadores.");
	new Float:p_x, Float:p_y, Float:p_z;
	GetPlayerPos(playerid, p_x, p_y, p_z);
	new interior = GetPlayerInterior(playerid);
	new vw = GetPlayerVirtualWorld(playerid);
	SetPosEx(playerid2, p_x, p_y, p_z, 0, interior, vw, 1);
	format(gformat, sizeof gformat, "Llevaste hasta tu posición a %s.", NombreOriginal(playerid2));
	SendClientMessage(playerid, COLOR_WHITE, gformat);
	return 1;
}

CMD:limpiarchat(playerid)
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	CleanScreen();
	new string[170];
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) limpió el chat completo.", InfoCuenta[playerid][jApodo], playerid);
	SendAdminMessage(0xFF6347FF, string);
	return 1;
}

CMD:leetodo(playerid)
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (!BigEar[playerid])
	{
		BigEar[playerid] = 1;
		SendClientMessage(playerid, COLOR_GRAD2, "Chat global activado.");
	}
	else
	{
		BigEar[playerid] = 0;
		SendClientMessage(playerid, COLOR_GRAD2, "Chat global desactivado.");
	}
	return 1;
}

CMD:slap(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new playerid2, altura,  Float:slx, Float:sly, Float:slz, string[128];
	if (sscanf(params, "dd", playerid2, altura)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /slap (PlayerID) (Altura)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
	GetPlayerPos(playerid2, slx, sly, slz);
	SetPlayerPos(playerid2, slx, sly, slz+altura);
	PlayerPlaySound(playerid2, 1130, slx, sly, slz+altura);
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) golpeó a %s(%d). Altura: %d", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2, altura);
	SendAdminMessage(0xFF6347FF, string);
	format(string, sizeof string, "%s(%d) te golpeó. Altura: %d", InfoCuenta[playerid][jApodo], playerid, altura);
	SendClientMessage(playerid2, COLOR_YELLOW, string);
	return 1;
}

CMD:darskin(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new playerid2, skin, string[128];
	if (sscanf(params, "dd", playerid2, skin)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /darskin (PlayerID) (SkinID)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
	if (IsValidSkin(skin) == 0) return SendClientMessage(playerid, COLOR_GREY, "Debes de escoger una id de skin entre 1 y 311.");
	GivePlayerSkin(playerid2, skin);
	format(string, sizeof string, "%s te cambió el skin, ID SKIN: %d.", NombreOriginal(playerid), skin);
	SendClientMessage(playerid2, COLOR_WHITE, string);
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) cambió el skin(%d) de %s(%d).", InfoCuenta[playerid][jApodo], playerid, skin, NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, string);
	return 1;
}

CMD:limpiarsuelo(playerid)
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new count = 0, string[180];
	Loop(id, sizeof InfoSuelo, 0) if (InfoInventario[InfoSuelo[id][DropID]][IDArma] != 0)
	{
		count++;
		SueloTime(id);
	}
	if (count == 0) return SendClientMessage(playerid, 0xebebebff, "No hay ningún objeto tirado en todo el servidor.");
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) limpió %d armas del suelo.", InfoCuenta[playerid][jApodo], playerid, count);
	SendAdminMessage(0xFF6347FF, string);
	return 1;
}

CMD:verarmas(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new playerid2, dialog[1024], dialog2[256], count = 0;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /verarmas (PlayerID)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "El jugador seleccionado no se encuentra conectado.");
	format(dialog2, sizeof dialog2, "Administración:{FFFFFF} %s(%d) usó /verarmas %s(%d).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, dialog2);
	//indice
	Loop(x, 10, 0)
	{
		if (InfoPersonaje[playerid2][pBolsillo][x] != 0)
		{
			format(dialog2, sizeof dialog2, "{FFFFFF}%s\n", slot_objeto(InfoPersonaje[playerid2][pBolsillo][x], InfoPersonaje[playerid2][pBolsilloCant][x])), count++;
			strcat(dialog, dialog2);
		}
	}
	//barra espacio
	if (count != 0) strcat(dialog, "{8000FF}--------------------\n");
	//mano derecha
	if (InfoPersonaje[playerid2][pManoDerecha] != 0)
	{
		format(dialog2, sizeof dialog2, "{FFFFFF}Mano derecha: %s\n", slot_objeto(InfoPersonaje[playerid2][pManoDerecha], InfoPersonaje[playerid2][pManoDerechaCant])), count++;
		strcat(dialog, dialog2);
	}
	//mano izquierda
	if (InfoPersonaje[playerid2][pManoIzquierda] != 0)
	{
		format(dialog2, sizeof dialog2, "{FFFFFF}Mano izquierda: %s\n", slot_objeto(InfoPersonaje[playerid2][pManoIzquierda], InfoPersonaje[playerid2][pManoIzquierdaCant])), count++;
		strcat(dialog, dialog2);
	}
	//espalda
	if (InfoPersonaje[playerid2][pEspalda] != 0)
	{
		format(dialog2, sizeof dialog2, "{00AE57}%s:{FFFFFF} %s\n", GetParteToy(playerid2, 7), slot_objeto(InfoPersonaje[playerid2][pEspalda], InfoPersonaje[playerid2][pEspaldaCant])), count++;
		strcat(dialog, dialog2);
	}
	//formato
	format(dialog2, sizeof dialog2, "{CCCCCC}Bolsillos de {00AE57}%s", NombreJugador(playerid2));
	//show_dialog
	if (count == 0) return Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, dialog2, "{CCCCCC}No tiene nada", "Cerrar", "");
	Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, dialog2, dialog, "Cerrar", "");
	return 1;
}

CMD:limpiararmas(playerid, params[])
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new playerid2, string[256], count = 0, query[465];
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /limpiararmas (PlayerID)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "El jugador seleccionado no se encuentra conectado.");
	Loop(x, 10, 0) if (InfoInventario[InfoPersonaje[playerid2][pBolsillo][x]][IDArma] != 0)
	{
		InfoPersonaje[playerid2][pBolsillo][x] = 0;
		InfoPersonaje[playerid2][pBolsilloCant][x] = 0;
		count++;
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Bolsillo_%d = 0, Cantidad_bolsillo_%d = 0 WHERE ID = '%d'", x+1, x+1, InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
	}
	if (InfoInventario[InfoPersonaje[playerid2][pManoIzquierda]][IDArma] != 0)
	{
		InfoPersonaje[playerid2][pManoIzquierda] = 0;
		InfoPersonaje[playerid2][pManoIzquierdaCant] = 0;
		RemovePlayerAttachedObject(playerid2, 8);
		count++;
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Mano_izquierda = 0, Cantidad_mano_izquierda = 0 WHERE ID = '%d'", InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
	}
	if (InfoInventario[InfoPersonaje[playerid2][pManoDerecha]][IDArma] != 0)
	{
		InfoPersonaje[playerid2][pManoDerecha] = 0;
		InfoPersonaje[playerid2][pManoDerechaCant] = 0;
		RemovePlayerAttachedObject(playerid, 7);
		ResetPlayerWeapons(playerid2);
		count++;
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Mano_derecha = 0, Cantidad_mano_derecha = 0 WHERE ID = '%d'", InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
	}
	if (InfoInventario[InfoPersonaje[playerid2][pEspalda]][IDArma] != 0)
	{
		InfoPersonaje[playerid2][pEspalda] = 0;
		InfoPersonaje[playerid2][pEspaldaCant] = 0;
		RemovePlayerAttachedObject(playerid2, 9);
		count++;
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Espalda = 0, Cantidad_espalda = 0 WHERE ID = '%d'", InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
	}
	if (count != 0)
	{
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) limpió %d armas a %s(%d).", InfoCuenta[playerid][jApodo], playerid, count, NombreOriginal(playerid2), playerid2);
		SendAdminMessage(0xFF6347FF, string);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Ese jugador no lleva armas encima.");
	return 1;
}

CMD:vehslap(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new alt, vehiculo, Float:slx, Float:sly, Float:slz, string[128];
	if (sscanf(params, "dd", vehiculo, alt)) SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /vehslap (vehicleID) (Altitud)");
	if (!GetVehicleModel(vehiculo)) return SendClientMessage(playerid, COLOR_GRAD2, "El vehículo introducido no existe, verifica en /dl.");
	GetVehiclePos(vehiculo, slx, sly, slz);
	SetVehiclePos(vehiculo, slx, sly, slz+alt);
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) golpeó el vehiculo id %d.", InfoCuenta[playerid][jApodo], playerid, vehiculo);
	SendAdminMessage(0xFF6347FF, string);
	return 1;
}

CMD:irpunto(playerid)
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (GetPlayerState(playerid) == 2) SetVehiclePos(GetPlayerVehicleID(playerid), TeleportDest[playerid][0],TeleportDest[playerid][1],TeleportDest[playerid][2]);
	else SetPosEx(playerid, TeleportDest[playerid][0],TeleportDest[playerid][1],TeleportDest[playerid][2], 0.0000, 0, 0, 1);
	SendClientMessage(playerid, COLOR_WHITE, "Teleportado.");
	return 1;
}

CMD:punto(playerid)
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	GetPlayerPos(playerid, TeleportDest[playerid][0],TeleportDest[playerid][1],TeleportDest[playerid][2]);
	SendClientMessage(playerid, COLOR_WHITE, "Posición guardada.");
	return 1;
}

CMD:traerauto(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new Float:plocx, Float:plocy, Float:plocz, vehicleid;
	if (sscanf(params, "i", vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /traerauto (Auto ID)");
	if (!GetVehicleModel(vehicleid)) return SendClientMessage(playerid, COLOR_GRAD2, "El vehículo introducido no existe, verifica en /dl.");
	GetPlayerPos(playerid, plocx, plocy, plocz);
	LinkVehicleToInterior(vehicleid, GetPlayerInterior(playerid));
	SetVehicleExVirtualWorld(vehicleid, GetPlayerVirtualWorld(playerid));
	SetVehiclePos(vehicleid, plocx, plocy+4, plocz);
	return 1;
}
CMD:traercar(playerid, params[]) return cmd_traerauto(playerid, params);
CMD:getcar(playerid, params[]) return cmd_traerauto(playerid, params);

CMD:irauto(playerid, params[])
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new Float:cwx2, Float:cwy2, Float:cwz2, vehicleid;
	if (sscanf(params, "i", vehicleid)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /irauto (Auto ID)");
	if (!GetVehicleModel(vehicleid)) return SendClientMessage(playerid, COLOR_GRAD2, "El vehículo introducido no existe, verifica en /dl.");
	GetVehiclePos(vehicleid, cwx2, cwy2, cwz2);
	SetPosEx(playerid, cwx2, cwy2, cwz2, 0.0, 0, 0, 1);
	return 1;
}
CMD:ircar(playerid, params[]) return cmd_irauto(playerid, params);
CMD:gotocar(playerid, params[]) return cmd_irauto(playerid, params);

CMD:repararveh(playerid)
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_WHITE, "No estás en un vehículo.");
	new vehicleid = GetPlayerVehicleID(playerid);
	RepairVehicle(vehicleid);
	if (GetVehicleModel(vehicleid) == 528 || GetVehicleModel(vehicleid) == 427) SetVehicleHealth(vehicleid, 5000.0);
	else SetVehicleHealth(vehicleid, 1000.0);
	SendClientMessage(playerid, COLOR_WHITE, "Vehículo reparado.");
	return 1;
}
CMD:fixveh(playerid) return cmd_repararveh(playerid);

CMD:mascara(playerid)
{
	new string[128];
	if (InfoPersonaje[playerid][pMascara] == 0) return SendClientMessage(playerid, COLOR_GRAD2, "{FFFF00}[ERROR]:{FFFFFF} No tienes máscara.");
	if (InfoPersonaje[playerid][pUsoMascara] == 0)
	{
		SetPlayerAttachedObject(playerid, 0, 19036, 2, 0.090156, 0.045901, -0.005574, 90.110733, 81.638343, 4.973568, 0.887882, 1.139873, 1.000000);
		format(string, sizeof string, "* %s se pone una máscara.", NombreJugador(playerid));
		ProxDetector(30.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
		InfoPersonaje[playerid][pUsoMascara] = 1;
		foreach(Player, i) ShowPlayerNameTagForPlayer(i, playerid, false);
	}
	else
	{
		InfoPersonaje[playerid][pUsoMascara] = 0;
		RemovePlayerAttachedObject(playerid, 0);
		format(string, sizeof string, "* %s se quita la máscara de su rostro.", NombreJugador(playerid));
		ProxDetector(30.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
		foreach(Player, i) ShowPlayerNameTagForPlayer(i, playerid, true);
	}
	guardar_int_mysql("personajes", "UsoMascara", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pUsoMascara]);
	return 1;
}

CMD:ah(playerid)
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	new dialog[4096];
	if (GetPlayerAdmin(playerid, 1) != 0)
	{
		strcat(dialog, "{FF2F2F}Ayudante\n");
		strcat(dialog, "{FFFFFF}/a - /irplayer - /ircar - /tipduda - /kick - /kickname - /darvida - /verjail - /encarcelados\n");
		strcat(dialog, "{FFFFFF}/enrenta - /afks - /vergraffitis - /dudas - /aduda - /rduda - /ls - /sf - /lv - /llevarls\n");
		strcat(dialog, "{FFFFFF}/quitarefectos - /vip - /revivir - /spec - /nuevos - /qfa - /togvip\n\n");
	}
	if (GetPlayerAdmin(playerid, 2) != 0)
	{
		strcat(dialog, "{FF2F2F}Moderador I\n");
		strcat(dialog, "{FFFFFF}/vercuenta - /reportes - /ar - /rr - /darchaleco - /irfaccion - /irnegocio - /irgaraje - /ircajero\n");
		strcat(dialog, "{FFFFFF}/ao - /verarmas - /cambiarint - /cambiarvw - /traerplayer - /slap - /vehslap - /traercar\n");
		strcat(dialog, "{FFFFFF}/congelar - /descongelar - /darrol - /irpuerta - /irpuertainterior - /liberar - /iractor\n");
		strcat(dialog, "{FFFFFF}/darskin - /enmascarados - /sancionar - /sancionaroff - /checkllaves - /respawnauto - /ircasa\n\n");
	}
	if (GetPlayerAdmin(playerid, 3) != 0)
	{
		strcat(dialog, "{FF2F2F}Moderador II\n");
		strcat(dialog, "{FFFFFF}/jetpack - /quitardni - /autoint - /autovw - /limpiarchat - /limpiarsuelo - /ircoordenada\n");
		strcat(dialog, "{FFFFFF}/borraranuncios - /desbanearpj - /desbanearcuenta - /desbanip - /limpiararmas - /repararveh\n");
		strcat(dialog, "{FFFFFF}/getpos - /enmascaradospd - /enmascaradosadmin - /vertoys - /entrarauto - /vercasaint - /verinterior - /verautos\n\n");
	}
	if (GetPlayerAdmin(playerid, 4) != 0)
	{
		strcat(dialog, "{FF2F2F}Moderador III\n");
		strcat(dialog, "{FFFFFF}/adminbaneo - /crearobjeto - /listaobjetos - /horaregalo\n");
		strcat(dialog, "{FFFFFF}/aseguro - /amotor - /punto - /irpunto - /respawncars - /respawntodo - /rcategoria\n");
		strcat(dialog, "{FFFFFF}/limpiarobjetov - /adminmap - /reparartodo - /clima - /llenargas - /limpiarreportes\n\n");
	}
	if (GetPlayerAdmin(playerid, 5) != 0)
	{
		strcat(dialog, "{FF2F2F}Administrador\n");
		strcat(dialog, "{FFFFFF}/setpayday - /regaloatodos - /forzarpayday - /multicuenta - /verwalkie - /nombreactor\n");
		strcat(dialog, "{FFFFFF}/bloqbug - /desbloqbug - /crearactor - /borraractor - /skinactor - /animactor\n");
		strcat(dialog, "{FFFFFF}/crearregalo - /anunciostaff - /givegun - /musica - /darestilopelea - /stuff\n");
		strcat(dialog, "{FFFFFF}/darapodo - /creargraffiti - /smstodos - /showsound\n\n");
	}
	if (GetPlayerAdmin(playerid, 6) != 0)
	{
		strcat(dialog, "{FF2F2F}Game Operator\n");
		strcat(dialog, "{FFFFFF}/darstat - /forzarpayday2 - /darcoinsvip - /quitarcoinsvip - /avenegocio - /negocioname - /avegarage\n");
		strcat(dialog, "{FFFFFF}/daradmin - /quitarstaff - /expulsarstaff - /daref - /daregame - /dareban - /leetodo - /quitardinero\n");
		strcat(dialog, "{FFFFFF}/dardinero - /darauto - /avecasa - /editarinterior - /expdoble - /darvest - /darvest2 - /venderlaser\n");
		strcat(dialog, "{FFFFFF}/quitarfaccionoff - /cambiarhora - /cambiarclima - /editarpuertanombre - /editargps\n");
		strcat(dialog, "{FFFFFF}/nombreadmin - /crearcajero - /borrarcajero\n\n");
	}
	if (GetPlayerAdmin(playerid, 10) != 0)
	{
		strcat(dialog, "{FF2F2F}Propietario\n");
		strcat(dialog, "{FFFFFF}/vermps - /darvip - /crearnegocio - /editarnegocio - /borrarnegocio - /crearcasa\n");
		strcat(dialog, "{FFFFFF}/creargarage - /movergarage - /gtipo - /agaragename - /gprecio - /gname - /gnivel - /editarh\n");
		strcat(dialog, "{FFFFFF}/ip - /obtenerip - /cambiarclaveusuario - /borrarcasa - /crearpuerta - /editarpuerta - /borrarpuerta\n\n");
	}
	if (InfoCuenta[playerid][jEncFac] != 0)
	{
		strcat(dialog, "{FFFF00}Encargado de facciones\n");
		strcat(dialog, "{FFFFFF}/facciones - /crearfaccion - /editarfnombre - /editarflogo - /editarflider - /editarfsublider\n");
		strcat(dialog, "{FFFFFF}/statusfacciones - /irfaccion - /editarfaccion - /editarfskin - /editarfequipo - /limpiarfaccion\n");
		strcat(dialog, "{FFFFFF}/supervisar - /facchat - /hacerlider - /hacersublider - /hacermiembro - /borrarfaccion\n");
	}
	Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "Comandos administrativos", dialog, "Cerrar", "");
	return 1;
}
CMD:adminayuda(playerid) return cmd_ah(playerid);
CMD:ahelp(playerid) return cmd_ah(playerid);

CMD:adminbaneo(playerid)
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	SendClientMessage(playerid, COLOR_YELLOW, "/banearpj - /obanearpj - /banearcuenta - /obanearcuenta - /banearip");
	SendClientMessage(playerid, COLOR_YELLOW, "/desbanearcuenta - /desbanearpj - /tbanpj - /tbancuenta - /otbanpj - /otbancuenta");
	return 1;
}

CMD:multicuenta(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[128], playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GRAD2, "USE: /multicuenta [playerid]");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GRAD2, "Jugador desconectado.");
	if (InfoCuenta[playerid2][jMulticuenta] == 0)
	{
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) autorizó la multicuenta a %s(%d).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
		SendAdminMessage(0xFF6347FF, string);
		format(string, sizeof string, "%s autorizó la multicuenta a %s.", InfoCuenta[playerid][jApodo], NombreDeCuenta(playerid2));
		Log("LOGS/multicuenta.log", string);
		InfoCuenta[playerid2][jMulticuenta] = 1; // Multicuenta Autorizada.
	}
	else
	{
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) rechazó la multicuenta a %s(%d). Sólo puede tener una cuenta.", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
		SendAdminMessage(0xFF6F347F, string);
		format(string, sizeof string, "%s rechazó la multicuenta a %s.", InfoCuenta[playerid][jApodo], NombreDeCuenta(playerid2));
		Log("LOGS/multicuenta.log", string);
		InfoCuenta[playerid2][jMulticuenta] = 0; // Mlticuenta No Autorizada.
	}
	guardar_int_mysql("cuentas", "Multicuenta", InfoCuenta[playerid2][jID], InfoCuenta[playerid2][jMulticuenta]);
	return 1;
}

CMD:bloqbug(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[190], playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /bloqbug (playerid)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_GRAD2, "Jugador desconectado.");
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) bloqueó del /reportarbug a %s(%d).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, string);
	format(string, sizeof string, "[AdmCmd] %s bloqueó a %s del /reportarbug.", InfoCuenta[playerid][jApodo], NombreDeCuenta(playerid2));
	Log("LOGS/reportbug.log", string);
	InfoPersonaje[playerid2][pBlockBug] = 1;
	guardar_int_mysql("personajes", "BlockBug", InfoPersonaje[playerid2][pID], InfoPersonaje[playerid2][pBlockBug]);
	Kick(playerid2);
	return 1;
}

CMD:desbloqbug(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[190], playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /desbloqbug (playerid)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_GRAD2, "Jugador desconectado.");
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) desbloqueó del /reportarbug a %s(%d).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, string);
	format(string, sizeof string, "[AdmCmd] %s desbloqueó a %s del /reportarbug.", InfoCuenta[playerid][jApodo], NombreDeCuenta(playerid2));
	Log("LOGS/reportbug.log", string);
	InfoPersonaje[playerid2][pBlockBug] = 0;
	guardar_int_mysql("personajes", "BlockBug", InfoPersonaje[playerid2][pID], InfoPersonaje[playerid2][pBlockBug]);
	return 1;
}

CMD:quitarstaff(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	new string[512], playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /quitarstaff (playerid)");
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) limpió variables administrativas a %s(%d).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, string);
	Log("LOGS/admin.log", string);
	SendClientMessage(playerid2, COLOR_WHITE, "Restearon tus variables de administrador a 0.");
	alm(InfoCuenta[playerid2][jApodo], "niub");
	InfoCuenta[playerid2][jAdmin] = 0;
	InfoCuenta[playerid2][jEncFac] = 0;
	mysql_format(DBInsanity, string, sizeof string, "UPDATE cuentas SET Apodo = '%e', JotoOtaku = 0, EncFac = 0 WHERE ID = '%d'", InfoCuenta[playerid2][jApodo], InfoCuenta[playerid2][jID]);
	mysql_tquery(DBInsanity, string);
	papilla[playerid2] = 0;
	SetPlayerColor(playerid2, 0xFFFFFF00);
	return 1;
}

CMD:nog(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[128], playerid2;
	if (sscanf(params, "u", playerid2)) return SendClientMessage(playerid, COLOR_GREY, "USA: /nog [playerid]");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Jugador no conectado.");
	if (InfoPersonaje[playerid2][pTogGraffiti] == 0)
	{
		InfoPersonaje[playerid2][pTogGraffiti] = 1;
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) le a bloqueado el uso del CMD /graffiti a %s(%d).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
		SendAdminMessage(0xFF6347FF, string);
		format(string, sizeof string, "%s le a bloqueado el uso del CMD /graffiti a %s.", InfoCuenta[playerid][jApodo], NombreDeCuenta(playerid2));
		Log("LOGS/admin.log", string);
		SendClientMessage(playerid2, COLOR_GREY, "[Aviso]: Fuiste bloqueado del comando /graffiti.");
	}
	else
	{
		InfoPersonaje[playerid2][pTogGraffiti] = 0;
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) ha desbloqueado el uso del CMD /graffiti a %s(%d).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
		SendAdminMessage(0xFF6347FF, string);
		format(string, sizeof string, "%s ha desbloqueado el uso del CMD /graffiti a %s.", InfoCuenta[playerid][jApodo], NombreDeCuenta(playerid2));
		Log("LOGS/admin.log", string);
		SendClientMessage(playerid2, COLOR_GREY, "[Aviso]: Fuiste desbloqueado del comando /graffiti.");
	}
	guardar_int_mysql("personajes", "BlockG", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTogGraffiti]);
	return 1;
}
CMD:bloqueargraffiti(playerid, params[]) return cmd_nog(playerid, params);

CMD:removergps(playerid)
{
	DisablePlayerCheckpoint(playerid);
	return 1;
}

CMD:stopanim(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") == 1) return SendClientMessage(playerid, COLOR_GRAD2, "{FFFF00}[ERROR]:{FFFFFF} No puedes usar este comando mientras estás herido.");
	if (GetPVarInt(playerid, "PlayerCuffed") != 0) return SendClientMessage(playerid, COLOR_WHITE, "No puedes usar esto ahora.");
	ClearAnimations(playerid);
	return 1;
}

CMD:daradmin(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	new playerid2, level, string[340];
	if (sscanf(params, "ud", playerid2, level)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /daradmin (PlayerID) (Nivel) [Niveles: 1 Orientador, 2 Mod I, 3 Mod II, 4 Mod III, 5 Admin, 6 Game Operator");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
	if (level < 0 || level > 6) return SendClientMessage(playerid, COLOR_GRAD2, "Sólo existen 6 rangos administrativos.");
	if (level == 0)
	{
		SetPlayerColor(playerid2, 0xFFFFFF00);
		papilla[playerid2] = 0;
		alm(InfoCuenta[playerid2][jApodo], "niub");
		InfoCuenta[playerid2][jEncFac] = 0;
		InfoCuenta[playerid2][jAdmin] = 0;
		mysql_format(DBInsanity, string, sizeof string, "UPDATE cuentas SET Apodo = '%e', JotoOtaku = 0, EncFac = 0 WHERE ID = '%d'", InfoCuenta[playerid2][jApodo], InfoCuenta[playerid2][jID]);
		mysql_tquery(DBInsanity, string);
		format(string, sizeof string, "%s(%d) te ha expulsado de la administración.", InfoCuenta[playerid][jApodo], playerid);
		SendClientMessage(playerid2, COLOR_LIGHTBLUE, string);
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) expulsó de la administración a %s(%d).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
		SendAdminMessage(0xFF6347FF, string);
		format(string, sizeof string, "%s expulsó a %s de la administración.", InfoCuenta[playerid][jApodo], NombreDeCuenta(playerid2));
		Log("LOGS/admins.log", string);
		return 1;
	}
	InfoCuenta[playerid2][jAdmin] = level;
	guardar_int_mysql("cuentas", "JotoOtaku", InfoCuenta[playerid2][jID], InfoCuenta[playerid2][jAdmin]);
	format(string, sizeof string, "%s(%d) lo ha asignado %s(%d).", InfoCuenta[playerid][jApodo], playerid, GetAdminName(playerid2), level);
	SendClientMessage(playerid2, COLOR_LIGHTBLUE, string);
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) ha asignado %s(%d) a %s(%d).", InfoCuenta[playerid][jApodo], playerid, GetAdminName(playerid2), level, InfoCuenta[playerid2][jApodo], playerid2);
	SendAdminMessage(0xFF6347FF, string);
	format(string, sizeof string, "%s asignó %s a %s.", InfoCuenta[playerid][jApodo], GetAdminName(playerid2), InfoCuenta[playerid2][jApodo]);
	Log("LOGS/admins.log", string);
	return 1;
}

CMD:daref(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	new string[178], playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /daref (ID)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
	if (InfoCuenta[playerid2][jEncFac] == 0)
	{
		InfoCuenta[playerid2][jEncFac] = 1;
		format(string, sizeof string, "%s(%d) lo ha asignado moderador de facciones.", InfoCuenta[playerid][jApodo], playerid);
		SendClientMessage(playerid2, COLOR_LIGHTBLUE, string);
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) ha asignado moderador de facciones a %s(%d).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
		SendAdminMessage(0xFF6347FF, string);
		format(string, sizeof string, "%s ha asignado moderador de facciones a %s.", InfoCuenta[playerid][jApodo], NombreDeCuenta(playerid2));
		Log("LOGS/security.log", string);
	}
	else
	{
		InfoCuenta[playerid2][jEncFac] = 0;
		format(string, sizeof string, "%s(%d) le ha retirado el moderador de facciones.", InfoCuenta[playerid][jApodo], playerid);
		SendClientMessage(playerid2, COLOR_LIGHTBLUE, string);
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) ha retirado el moderador de facciones a %s(%d).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
		SendAdminMessage(0xFF6347FF, string);
		format(string, sizeof string, "%s ha retirado el moderador de facciones a %s.", InfoCuenta[playerid][jApodo], NombreDeCuenta(playerid2));
		Log("LOGS/security.log", string);
	}
	guardar_int_mysql("cuentas", "EncFac", InfoCuenta[playerid2][jID], InfoCuenta[playerid2][jEncFac]);
	return 1;
}

CMD:qdinero(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new playerid2, money, reason[64], string[256];
	if (sscanf(params, "dds[64]", playerid2, money, reason)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /qdinero (PlayerID) (Dinero) (Razón)");
	if (money > 99999999 || money < 0) return SendClientMessage(playerid, COLOR_WHITE, "Sólo de 0 - 99999999 de dinero");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");

	GivePlayerCash(playerid2, -money, "qdinero (admin)");
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) quitó $%s a %s(%d), razón: %s.", InfoCuenta[playerid][jApodo], playerid, diner_coma(money), NombreOriginal(playerid2), playerid2,reason);
	SendAdminMessage(0xFF6347FF, string);
	format(string, sizeof string, "%s quitó $%s a %s, razón: %s.", InfoCuenta[playerid][jApodo], diner_coma(money), NombreDeCuenta(playerid2),reason);
	Log("LOGS/removemoney.log", string);
	return 1;
}
CMD:quitardinero(playerid, params[]) return cmd_qdinero(playerid, params);

CMD:jail(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[256], time, playerid2, reason[64], query3[1028];
	if (CommandSpamTimes[playerid] == 30)
	{
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) fue baneado automáticamente, razón: Flood Cmd´s", NombreOriginal(playerid), playerid);
		SendAdminMessage(0xFF6347FF, string);
		format(string, sizeof string, "%s fue baneado automáticamente, razón: Flood Cmd´s", NombreDeCuenta(playerid));
		Log("LOGS/hackeraction.log", string);
		mysql_format(DBInsanity, query3, sizeof query3, "UPDATE cuentas SET JotoOtaku = 0, EncFac = 0, OtakuN_N = 2, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE ID = '%d'", "Server", "Abuso cmds", FechaHoy(), InfoCuenta[playerid][jID]);
		mysql_tquery(DBInsanity, query3);
		Kick(playerid);
		return 1;
	}
	//cmd
	if (sscanf(params, "dds[64]", playerid2, time, reason)) return SendClientMessage(playerid, COLOR_GRAD2, "Utiliza: /jail (playerid) (minutos) (razón)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "ID inválida.");
	if (strlen(reason) >= sizeof(reason)-1) return SendClientMessage(playerid, COLOR_GREY, "El motivo del jail no puede ocupar más de 64 carácteres.");
	if (InfoPersonaje[playerid2][pJails] >= 14)
	{
		format(string, sizeof string, "AdmCmd: %s fue bloqueado, razón: +15 Jails", NombreOriginal(playerid2));
		Log("LOGS/ban.log", string);
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) fue bloqueado. Razón: +15 Jails", NombreOriginal(playerid2), playerid2);
		SendAllMessage(0xFF6347FF, string);
		mysql_format(DBInsanity, query3, sizeof query3, "UPDATE personajes SET OtakuN_N = 2, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE ID = '%d'", "Server", "+15 jails", FechaHoy(), InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query3);
		SetTimerEx("TimerKICK", 1500, false, "d", playerid2);
	    return 1;
	}
	alm(InfoPersonaje[playerid2][pBySancion], NombreDeCuenta(playerid));
	alm(InfoPersonaje[playerid2][pRazonSancion], reason);
	CommandSpamTimes[playerid]++;
	CommandSpamUnmute[playerid] = 60;
	InfoPersonaje[playerid2][pJails] += 1;
	InfoPersonaje[playerid2][pSancionado] = 1;
	InfoPersonaje[playerid2][pTogTelefono] = 0;
	InfoPersonaje[playerid2][pTiempoSancion] = time*60;
	new query[410];
	Loop(x, 10, 0) if (InfoInventario[InfoPersonaje[playerid2][pBolsillo][x]][IDArma] != 0)
	{
		InfoPersonaje[playerid2][pBolsillo][x] = 0;
		InfoPersonaje[playerid2][pBolsilloCant][x] = 0;
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Bolsillo_%d = 0, Cantidad_bolsillo_%d = 0 WHERE ID = '%d'", x+1, x+1, InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
	}
	if (InfoInventario[InfoPersonaje[playerid2][pManoIzquierda]][IDArma] != 0)
	{
		InfoPersonaje[playerid2][pManoIzquierda] = 0;
		InfoPersonaje[playerid2][pManoIzquierdaCant] = 0;
		RemovePlayerAttachedObject(playerid2, 8);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Mano_izquierda = 0, Cantidad_mano_izquierda = 0 WHERE ID = '%d'", InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
	}
	if (InfoInventario[InfoPersonaje[playerid2][pManoDerecha]][IDArma] != 0)
	{
		InfoPersonaje[playerid2][pManoDerecha] = 0;
		InfoPersonaje[playerid2][pManoDerechaCant] = 0;
		RemovePlayerAttachedObject(playerid, 7);
		ResetPlayerWeapons(playerid2);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Mano_derecha = 0, Cantidad_mano_derecha = 0 WHERE ID = '%d'", InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
	}
	if (InfoInventario[InfoPersonaje[playerid2][pEspalda]][IDArma] != 0)
	{
		InfoPersonaje[playerid2][pEspalda] = 0;
		InfoPersonaje[playerid2][pEspaldaCant] = 0;
		RemovePlayerAttachedObject(playerid2, 9);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Espalda = 0, Cantidad_espalda = 0 WHERE ID = '%d'", InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
	}
	SetPlayerPos(playerid2, 2687.3630, 2705.2537, 22.9472);
	SetPlayerInterior(playerid2, 0);
	SetPlayerVirtualWorld(playerid2, playerid2+1);
	TogglePlayerControllable(playerid2, false);
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Sancionado = 1, TiempoSancion = '%d', BySancion = '%e', RazonSancion = '%e', Jails = '%d' WHERE ID = '%d'", InfoPersonaje[playerid2][pTiempoSancion], InfoPersonaje[playerid2][pBySancion], InfoPersonaje[playerid2][pRazonSancion], InfoPersonaje[playerid2][pJails], InfoPersonaje[playerid2][pID]);
	mysql_tquery(DBInsanity, query);
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) sancionó a %s(%d). Razón: %s", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2, InfoPersonaje[playerid2][pRazonSancion]);
	SendAllMessage(0xFF6347FF, string);
	format(string, sizeof string, "[AdmCmd]: %s encarceló a %s, razón: %s, tiempo: %d minuto(s)", InfoCuenta[playerid][jApodo], NombreDeCuenta(playerid2), InfoPersonaje[playerid2][pRazonSancion], time);
	Log("LOGS/sancionar.log", string);
	format(string, sizeof string, "Tiempo: %d minuto(s)", time);
	SendClientMessage(playerid2, COLOR_GRAD2, string);
	StopAudioStreamForPlayer(playerid2);
	return 1;
}
CMD:sancionar(playerid, params[]) return cmd_jail(playerid, params);

CMD:jailoffline(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new gformat[512], pide, name[MAX_PLAYER_NAME], minutes, reason[64];
	if (sscanf(params, "uds[64]", pide, minutes, reason)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /jailoffline (Nombre_Apellido) (Minutos) (Razón)");
	if (IsPlayerConnected(pide)) return SendClientMessage(playerid, COLOR_GRAD2, "Ese jugador está conectado, usa /jail.");
	if (sscanf(params, "s[24]ds[64]", name, minutes, reason)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /jailoffline (Nombre_Apellido) (Minutos) (Razón)");
	if (VerificarPersonaje(name))
	{
		new total_jails;
		reg_int(0, "Jails", total_jails);
		mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE personajes SET Jails = '%d', Sancionado = 1, TiempoSancion = '%d', PosicionX = '%f', PosicionY = '%f', PosicionZ = '%f', Interior = 0, VirtualWorld = '%d', BySancion = '%e', RazonSancion = '%e' WHERE Nombre_Apellido = '%e'", total_jails, minutes*60, 2687.3630, 2705.2537, 22.9472, playerid+1, NombreDeCuenta(playerid), reason, name);
		mysql_tquery(DBInsanity, gformat);
		format(gformat, sizeof gformat, "AdmCmd: %s fue jaileado por %s, razon: %s. [CMD OFFLINE]", name, InfoCuenta[playerid][jApodo], reason);
		Log("LOGS/admin.log", gformat);
		format(gformat, sizeof gformat, "Administración:{FFFFFF} %s(%d) sancionó %d minutos a %s, razon: %s. (OFFLINE)", InfoCuenta[playerid][jApodo], playerid, minutes, name, reason);
		SendAdminMessage(0xFF6347FF, gformat);
		return 1;
	}
	SendClientMessage(playerid, COLOR_WHITE, "Esa cuenta no existe.");
	return 1;
}
CMD:jailcuenta(playerid, params[]) return cmd_jailoffline(playerid, params);
CMD:sancionaroff(playerid, params[]) return cmd_jailoffline(playerid, params);

CMD:checkjail(playerid, params[])
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[256], playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /checkjail (PlayerID)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_GRAD2, "Esa ID es inválida.");
	if (InfoPersonaje[playerid2][pSancionado] == 0) return SendClientMessage(playerid, COLOR_GRAD2, "Este usuario no ha sido jaileado (Ni IC, ni OOC). En caso de estar en jail, usar /mandarls.");
	new minutos = (InfoPersonaje[playerid2][pTiempoSancion]/60)+1;
	format(string, sizeof string, "%s - %d segundos restantes. {FFFFFF}(Menos de %d minuto/s).", NombreOriginal(playerid2), InfoPersonaje[playerid2][pTiempoSancion], minutos);
	SendClientMessage(playerid, COLOR_GRAD2, string);
	format(string, sizeof string, "(ID %d) ha sido jaileado por %s, motivo: %s", playerid2, InfoPersonaje[playerid2][pBySancion], InfoPersonaje[playerid2][pRazonSancion]);
	SendClientMessage(playerid, COLOR_GRAD2, string);
	return 1;
}
CMD:verjail(playerid, params[]) return cmd_checkjail(playerid, params);

CMD:encarcelados(playerid)
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	SendClientMessage(playerid, COLOR_GRAD1, "Encarcelados (Tanto IC como OOC)- Más información con /checkjail:");
	new string[180];
	for(new i = 0; i < MAX_PLAYERS; i++) if (IsPlayerConnected(i))
	{
		if (InfoPersonaje[i][pSancionado] != 0)
		{
			format(string, sizeof string, "(ID: %d) - %s, tiempo de jail: %d minutos. [Encarcelado por %s]", i, NombreOriginal(i), (InfoPersonaje[i][pTiempoSancion]/60)+1, InfoPersonaje[i][pBySancion]);
			SendClientMessage(playerid, COLOR_GRAD2, string);
		}
	}
	return 1;
}

CMD:ls(playerid)
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (GetPlayerState(playerid) == 2) SetVehiclePos(GetPlayerVehicleID(playerid), 1529.6, -1705.5, 13.4); //1529.6,-1691.2,13.3
	else SetPosEx(playerid, 1529.6, -1705.5, 13.4, 0, 0, 0, 1); //1529.6,-1691.2,13.3
	return 1;
}

CMD:sf(playerid)
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (GetPlayerState(playerid) == 2) SetVehiclePos(GetPlayerVehicleID(playerid), -2016.4399,-79.7714,35.3203);
	else SetPosEx(playerid, -2016.4399,-79.7714,35.3203, 0, 0, 0, 1);
	return 1;
}

CMD:lv(playerid)
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (GetPlayerState(playerid) == 2) SetVehiclePos(GetPlayerVehicleID(playerid), 1694.6566,1453.4523,10.7632);
	else SetPosEx(playerid, 1694.6566,1453.4523,10.7632, 0, 0, 0, 1);
	return 1;
}

CMD:entrarauto(playerid, params[])
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new vehicleid;
	if (sscanf(params, "i", vehicleid)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /entrarauto (VehicleID)");
	if (!GetVehicleModel(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "Vehículo no encontrado, intenta con otra ID.");

	PutPlayerInVehicle(playerid, vehicleid, 1);
	SendClientMessage(playerid, COLOR_WHITE, "Teleportado.");
	return 1;
}
CMD:entercar(playerid, params[]) return cmd_entrarauto(playerid, params);

CMD:llenargas(playerid)
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new gformat[170];
	format(gformat, sizeof gformat, "Administración:{FFFFFF} %s(%d) llenó la gasolina de todos los vehículos.", InfoCuenta[playerid][jApodo], playerid);
	SendAllMessage(0xFF6347FF, gformat);
	Loop(veh, MAX_VEHICLES, 0) if (GetVehicleModel(veh))
	{
		veh_gasolina[veh] = 200;
	}
	return 1;
}

CMD:anunciostaff(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new text[64], type;
	if (sscanf(params, "is[64]", type, text)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /anunciostaff (Tipo) (Texto)");
	if (type == 2) return SendClientMessage(playerid, COLOR_WHITE, "No puedes elegir el numero 2.");
	for(new i = 0; i < MAX_PLAYERS; i++){ if (IsPlayerConnectedEx(i)){ GameTextForPlayer(i, text, 5000, type); } }
	new string[170];
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) usó el comando /anunciostaff.", InfoCuenta[playerid][jApodo], playerid);
	SendAdminMessage(0xFF6347FF, string);
	return 1;
}

CMD:apgarage(playerid)
{
	if (IsPlayerInRangeOfPoint(playerid, 15.0, 1622.9014, -1852.7107, 13.5014))
	{
		if (!member_faccion(playerid, 1, 4)) return SendClientMessage(playerid, COLOR_GREY, "* No eres miembro de LSPD o LSCSD.");
		if (open_embargo == 1) return SendClientMessage(playerid, COLOR_GREY, "* El portón del depósito ya está abierto.");
        MoveDynamicObject(depositoembargo, 1612.0996,-1861.5996,15.3000, 2.5);
		SetTimer("ClosedDeposito", 7000, false);
		open_embargo = 1;
		meuwu(playerid, "abre el portón del depósito de embargos.");
	}
	//lspd
	if (IsPlayerInRangeOfPoint(playerid, 15.0, 1545.9229, -1627.4286, 13.5087))
	{
		if (!member_faccion(playerid, 1)) return SendClientMessage(playerid, COLOR_GREY, "* No eres miembro de LSPD.");
		MoveDynamicObject(porton_lspd, 1546.1990, -1627.5966, 9.5763, 3.0);
		SetTimer("ClosedPortonLSPD", 7000, false);
	}
	//saem
	if (IsPlayerInRangeOfPoint(playerid,30, 2457.80, -2254.76, 26.90))
	{
		if (!member_faccion(playerid, 3)) return SendClientMessage(playerid, COLOR_GREY, "* No eres miembro de SAEM.");
		MoveDynamicObject(saem1, 2457.7957, -2254.7603, 21.2877, 5.0);
		SetTimer("OpenDoorNG", 7000, 0);
	}
	if (IsPlayerInRangeOfPoint(playerid,30, 2338.10571, -2353.88281, 15.2))
	{
		if (!member_faccion(playerid, 3)) return SendClientMessage(playerid, COLOR_GREY, "* No eres miembro de SAEM.");
		MoveDynamicObject(saem2, 2338.10571, -2353.88281, 20.72, 5.0);
		SetTimer("OpenDoorNG2", 7000, 0);
	}
	if (IsPlayerInRangeOfPoint(playerid,30, 2273.59570, -2663.29053, 15.2))
	{
		if (!member_faccion(playerid, 3)) return SendClientMessage(playerid, COLOR_GREY, "* No eres miembro de SAEM.");
		MoveDynamicObject(saem3, 2273.59570, -2663.29053, 20.72, 5.0);
		SetTimer("OpenDoorNG3", 7000, 0);
	}
	if (IsPlayerInRangeOfPoint(playerid,30, -1529.0433, 482.4390, 9.0600))
	{
		if (!member_faccion(playerid, 3)) return SendClientMessage(playerid, COLOR_GREY, "* No eres miembro de SAEM.");
		MoveDynamicObject(saemSF, -1529.0433, 482.4390, 3.4648, 5.0);
		SetTimer("OpenDoorNGSF", 7000, 0);
	}
	if (IsPlayerInRangeOfPoint(playerid,30, 135.2415, 1941.0129, 26.1857))
	{
		if (!member_faccion(playerid, 3)) return SendClientMessage(playerid, COLOR_GREY, "* No eres miembro de SAEM.");
		MoveDynamicObject(saemLV, 135.2415, 1941.0129, 26.1857, 5.0);
		SetTimer("OpenDoorNGLV", 7000, 0);
	}
	if (IsPlayerInRangeOfPoint(playerid,30, 348.9841, 1801.1180, 25.4055))
	{
		if (!member_faccion(playerid, 3)) return SendClientMessage(playerid, COLOR_GREY, "* No eres miembro de SAEM.");
		MoveDynamicObject(saemLV2, 348.9841, 1801.1180, 25.4055, 5.0, 0.00000, 358.25000, 41.75000);
		SetTimer("OpenDoorNGLV2", 7000, 0);
	}
	return 1;
}
CMD:deposito(playerid) return cmd_apgarage(playerid);


forward ClosedPortonLSPD();
public ClosedPortonLSPD()
{
	MoveDynamicObject(porton_lspd, 1546.19897, -1627.59656, 15.28090, 3.0);
	return 1;
}

forward ClosedDeposito();
public ClosedDeposito()
{
	open_embargo = 0;
	MoveDynamicObject(depositoembargo, 1620.6500244,-1861.5996094,15.3000002,2.5);
	return 1;
}

CMD:ap(playerid)
{
	if (!member_faccion(playerid, 1, 4)) return SendClientMessage(playerid, COLOR_GREY, "No formas parte de LSPD o LSCSD.");
	new playAP = 0;
	if (IsPlayerInRangeOfPoint(playerid, 5, 1556.67175, -1698.34778, 4991.90405)) MoveDynamicObject(LSPD_NEW1, 1556.67175, -1694.8400, 4991.5, 1.0, 0.0000000, 0.0000000, 270.0000000), playAP=1;
	else if (IsPlayerInRangeOfPoint(playerid, 5, 1556.77905, -1636.08850, 4991.912)) MoveDynamicObject(LSPD_NEW2, 1556.77905, -1632.6560, 4991.5, 1.0, 0.0000000, 0.0000000, 270.0000000), playAP=1;
	else if (IsPlayerInRangeOfPoint(playerid, 2, 1562.7060, -1659.93030, 4989.41101)) MoveDynamicObject(LSPD_NEW3, 1562.7060, -1658.4360, 4989.4110, 1.0, 0.0000000, 0.0000000, -90.000000), playAP=1;
	else if (IsPlayerInRangeOfPoint(playerid, 2, 1570.5215, -1643.77222, 4989.41101)) MoveDynamicObject(LSPD_NEW4, 1570.5215, -1645.2640, 4989.4110, 1.0, 0.0000000, 0.0000000, 90.0000000), playAP=1;
	else if (IsPlayerInRangeOfPoint(playerid, 2, 1570.5500, -1649.62769, 4989.41101)) MoveDynamicObject(LSPD_NEW5, 1570.5500, -1651.1120, 4989.4110, 1.0, 0.0000000, 0.0000000, 90.0000000), playAP=1;
	else if (IsPlayerInRangeOfPoint(playerid, 2, 1570.51929, -1661.46106, 4989.41101)) MoveDynamicObject(LSPD_NEW6, 1570.51929, -1662.9520, 4989.4110, 1.0, 0.0000000, 0.0000000, 90.0000000), playAP=1;
	else if (IsPlayerInRangeOfPoint(playerid, 3.5, 1569.067016,-1698.031372,4990.585937))
	{
		MoveDynamicObject(LSPD_NEW7, 1569.6000, -1700.284, 4989.5800, 1.0, 0.0000000, 0.0000000, 90.0000000);
		MoveDynamicObject(LSPD_NEW8, 1569.6000, -1695.756, 4989.5800, 1.0, 0.0000000, 0.0000000, -90.000000);
		playAP=1;
	}
	else if (IsPlayerInRangeOfPoint(playerid,8.0, 1452.554199,-1506.351440,1604.029052)) MoveDynamicObject(PJCELDA3,1451.96338, -1507.66687, 1607.5, 2.0,  0.00000, 0.00000, 90.00000), playAP=1;
	else if (IsPlayerInRangeOfPoint(playerid,8.0, 1443.826171,-1524.709960,1604.029052)) MoveDynamicObject(PJCELDA4,1444.35950, -1523.42847, 1607.5,  2.0, 0.00000, 0.00000, 90.00000), playAP=1;
	if (playAP == 0) return SendClientMessage(playerid, COLOR_GREY, "No estás en ninguna puerta para abrir.");
	else SendClientMessage(playerid, COLOR_GREY, "Abriste una puerta, escribe '/cp' para cerrarla.");
	return 1;
}

CMD:cp(playerid)
{
	if (!member_faccion(playerid, 1, 4)) return SendClientMessage(playerid, COLOR_GREY, "No formas parte de LSPD o LSCSD.");
	new playAP = 0;
	if (IsPlayerInRangeOfPoint(playerid, 5, 1556.67175, -1698.34778, 4991.90405)) MoveDynamicObject(LSPD_NEW1, 1556.67175, -1698.34778, 4991.5, 1.0, 0.0000000, 0.0000000, 270.0000000), playAP=1;
	else if (IsPlayerInRangeOfPoint(playerid, 5, 1556.77905, -1636.08850, 4991.91199)) MoveDynamicObject(LSPD_NEW2, 1556.77905, -1636.08850, 4991.5, 1.0, 0.0000000, 0.0000000, 270.0000000), playAP=1;
	else if (IsPlayerInRangeOfPoint(playerid, 2, 1562.7060, -1659.93030, 4989.41101)) MoveDynamicObject(LSPD_NEW3, 1562.7060, -1659.93030, 4989.4110, 1.0, 0.0000000, 0.0000000, -90.000000), playAP=1;
	else if (IsPlayerInRangeOfPoint(playerid, 2, 1570.5215, -1643.77222, 4989.41101)) MoveDynamicObject(LSPD_NEW4, 1570.5215, -1643.77222, 4989.4110, 1.0, 0.0000000, 0.0000000, 90.0000000), playAP=1;
	else if (IsPlayerInRangeOfPoint(playerid, 2, 1570.5500, -1649.62769, 4989.41101)) MoveDynamicObject(LSPD_NEW5, 1570.5500, -1649.62769, 4989.4110, 1.0, 0.0000000, 0.0000000, 90.0000000), playAP=1;
	else if (IsPlayerInRangeOfPoint(playerid, 2, 1570.51929, -1661.46106, 4989.41101)) MoveDynamicObject(LSPD_NEW6, 1570.51929, -1661.46106, 4989.4110, 1.0, 0.0000000, 0.0000000, 90.0000000), playAP=1;
	else if (IsPlayerInRangeOfPoint(playerid, 3.5, 1569.067016,-1698.031372,4990.585937 ))
	{
		MoveDynamicObject(LSPD_NEW7, 1569.59998, -1699.50000, 4989.57996, 1.0, 0.0000000, 0.0000000, 90.0000000);
		MoveDynamicObject(LSPD_NEW8, 1569.59998, -1696.50000, 4989.57996, 1.0, 0.0000000, 0.0000000, -90.000000);
		playAP=1;
	}
	else if (IsPlayerInRangeOfPoint(playerid, 8.0, 1452.379394,-1506.422851,1604.029052)) MoveDynamicObject(PJCELDA3,1451.96338, -1507.66687, 1605.03467, 2.0,  0.00000, 0.00000, 90.00000), playAP=1;
	else if (IsPlayerInRangeOfPoint(playerid, 8.0, 1443.875610,-1524.978759,1604.029052)) MoveDynamicObject(PJCELDA4,1444.35950, -1523.42847, 1605.03467,  2.0, 0.00000, 0.00000, 90.00000), playAP=1;
	if (playAP == 0) return SendClientMessage(playerid, COLOR_GREY, "No estás en ninguna puerta para cerrar.");
	else SendClientMessage(playerid, COLOR_GREY, "Cerraste una puerta, escribe '/ap' para abrirla.");
	return 1;
}

CMD:atar(playerid, params[])
{
	if (InfoPersonaje[playerid][pNivel] < 2) return SendClientMessage(playerid, COLOR_WHITE, "Necesitas jugar 2 horas reales (Nivel).");
	if (GetPVarInt(playerid, "EstaCrack") != 0) return SendClientMessage(playerid, COLOR_WHITE, "{FFFF00}[ERROR]:{FFFFFF} No puedes usar este comando mientras estás herido.");
	if (Rope[playerid] == 0) return SendClientMessage(playerid, COLOR_WHITE, "No tienes una cuerda.");
	new playerid2, string[129];
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /atar (ID)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Jugador desconectado.");
	if (!CercaDelMarica(4.0,playerid,playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Jugador muy lejos.");
	if (Tied[playerid2] == 0)
	{
		Tied[playerid2] = 1;
		format(string, sizeof string, "* %s agarra una cuerda y ata a %s", NombreJugador(playerid), NombreJugador(playerid2));
		ProxDetector(20.0,playerid,string,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
		TogglePlayerControllable(playerid2, false);
	}
	else
	{
		Tied[playerid2] = 0;
		format(string, sizeof string, "* %s agarra una cuerda y desata a %s", NombreJugador(playerid), NombreJugador(playerid2));
		ProxDetector(20.0,playerid,string,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
		TogglePlayerControllable(playerid2, true);
	}
	return 1;
}

CMD:vendar(playerid, params[])
{
	if (InfoPersonaje[playerid][pNivel] < 2) return SendClientMessage(playerid, COLOR_WHITE, "Necesitas jugar 2 horas (Nivel).");
	if (GetPVarInt(playerid, "EstaCrack") != 0) return SendClientMessage(playerid, COLOR_WHITE, "{FFFF00}[ERROR]:{FFFFFF} No puedes usar este comando mientras estás herido.");
	if (Rope[playerid] == 0) return SendClientMessage(playerid, COLOR_WHITE, "No tienes venda.");
	new playerid2, string[129];
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /vendar (ID)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Jugador desconectado.");
	if (!CercaDelMarica(4.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Jugador muy lejos.");
	if (Blinded[playerid2] == 0)
	{
		Blinded[playerid2] = 1;
		format(string, sizeof string, "* %s venda los ojos de %s", NombreJugador(playerid), NombreJugador(playerid2));
		ProxDetector(20.0,playerid,string,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
		SetPlayerCameraPos(playerid2,0.0,0.0,1000);
		SetPlayerCameraLookAt(playerid2,0.0,0.0,5000);
	}
	else
	{
		Blinded[playerid2] = 0;
		format(string, sizeof string, "* %s desvenda los ojos de %s", NombreJugador(playerid), NombreJugador(playerid2));
		ProxDetector(20.0,playerid,string,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
		SetCameraBehindPlayer(playerid2);
	}
	return 1;
}

CMD:mccomprar(playerid)
{
	if (!IsPlayerInRangeOfPoint(playerid,10, 1266.4241,234.3856,25.0487)) return SendClientMessage(playerid, COLOR_GRAD2, "{FFFF00}[ERROR]:{FFFFFF} No estás en el mercado negro!");
	new dialg_products[1028];
	strcat(dialg_products, "Producto\tValor\n");
	strcat(dialg_products, "{EBEBEB}Puño americano\t{04B404}$20\n");
	strcat(dialg_products, "{EBEBEB}Máscara\t{04B404}$50\n");
	strcat(dialg_products, "{EBEBEB}Ganzúas (3 unidades)\t{04B404}$500\n");
	strcat(dialg_products, "{EBEBEB}Soga + Venda\t{04B404}$120\n");
	strcat(dialg_products, "{EBEBEB}Dinamita\t{04B404}$25,000\n");
	strcat(dialg_products, "{EBEBEB}Documento falso\t{04B404}$15,000");
	Dialog_Show(playerid, ShowMercadoNegro, DIALOG_STYLE_TABLIST_HEADERS, "{00AE57}Mercado negro", dialg_products, "Comprar", "Salir");
	return 1;
}

Dialog:ShowMercadoNegro(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new string[170];
	switch (listitem)
	{
		case 0:
		{
			if (InfoPersonaje[playerid][pHorasOn] < 2) return SendClientMessage(playerid, COLOR_GREY, "* Debes jugar al menos 2 horas el servidor.");
			new precio = 20;
			if (GetPlayerCash(playerid) < precio)
			{
				format(string, sizeof string, "Te hacen falta $%s para comprar '{00AE57}Puño americano{EBEBEB}' por $%s.", diner_coma(precio-GetPlayerCash(playerid)), diner_coma(precio));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
				return 1;
			}
			if (PlayerWeapon(playerid, 1) == 0) return 1;
			GivePlayerCash(playerid, -precio, "compra de puño americano");
			SendClientMessage(playerid, COLOR_LIGHTGREEN, "Compraste un puño americano por $20.");
		}
		case 1:
		{
			if (InfoPersonaje[playerid][pHorasOn] < 3) return SendClientMessage(playerid, COLOR_GREY, "* Debes jugar al menos 3 horas el servidor.");
			new precio = 50;
			if (GetPlayerCash(playerid) < precio)
			{
				format(string, sizeof string, "Te hacen falta $%s para comprar '{00AE57}Máscara{EBEBEB}' por $%s.", diner_coma(precio-GetPlayerCash(playerid)), diner_coma(precio));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
				return 1;
			}
			if (InfoPersonaje[playerid][pMascara] != 0) return SendClientMessage(playerid, COLOR_GREY, "* Ya tienes una máscara comprada.");
			GivePlayerCash(playerid, -precio, "compra de máscara");
			InfoPersonaje[playerid][pMascara] = 1;
			guardar_int_mysql("personajes", "Mascara", InfoPersonaje[playerid][pID], 1);
			SendClientMessage(playerid, COLOR_LIGHTGREEN, "Compraste una máscara por $50.");
		}
		case 2:
		{
			if (InfoPersonaje[playerid][pHorasOn] < 4) return SendClientMessage(playerid, COLOR_GREY, "* Debes jugar al menos 4 horas el servidor.");
			new precio = 500;
			if (GetPlayerCash(playerid) < precio)
			{
				format(string, sizeof string, "Te hacen falta $%s para comprar '{00AE57}Ganzúas{EBEBEB}' por $%s.", diner_coma(precio-GetPlayerCash(playerid)), diner_coma(precio));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
				return 1;
			}
			GivePlayerCash(playerid, -precio, "compra de ganzúas");
			InfoPersonaje[playerid][pGanzuas] += 3;
			guardar_int_mysql("personajes", "Ganzuas", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pGanzuas]);
			format(string, sizeof string, "Compraste tres ganzúas por $500, ahora tienes %d ganzúas.", InfoPersonaje[playerid][pGanzuas]);
			SendClientMessage(playerid, COLOR_LIGHTGREEN, string);
		}
		case 3:
		{
			if (InfoPersonaje[playerid][pHorasOn] < 3) return SendClientMessage(playerid, COLOR_GREY, "* Debes jugar al menos 3 horas el servidor.");
			new precio = 120;
			if (GetPlayerCash(playerid) < precio)
			{
				format(string, sizeof string, "Te hacen falta $%s para comprar '{00AE57}Venta + soga{EBEBEB}' por $%s.", diner_coma(precio-GetPlayerCash(playerid)), diner_coma(precio));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
				return 1;
			}
			Rope[playerid] = 1;
			GivePlayerCash(playerid, -precio, "compra de venda+soga");
			SendClientMessage(playerid, COLOR_LIGHTGREEN, "Compraste venda + soga por $120.");
		}
		case 4:
		{
			if (InfoPersonaje[playerid][pHorasOn] < 15) return SendClientMessage(playerid, COLOR_GREY, "* Debes jugar al menos 15 horas el servidor.");
			new precio = 25000;
			if (GetPlayerCash(playerid) < precio)
			{
				format(string, sizeof string, "Te hacen falta $%s para comprar '{00AE57}Dinamita{EBEBEB}' por $%s.", diner_coma(precio-GetPlayerCash(playerid)), diner_coma(precio));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
				return 1;
			}
			if (DarObjeto(playerid, 52, 10) == 2) return 1;
			SendClientMessage(playerid, COLOR_LIGHTGREEN, "Compraste dinamita por $25,000 dólares.");
			GivePlayerCash(playerid, -precio, "compra de dinamita");
		}
		case 5:
		{
			if (InfoPersonaje[playerid][pHorasOn] < 3) return SendClientMessage(playerid, COLOR_GREY, "* Debes jugar al menos 3 horas el servidor.");
			if (InfoPersonaje[playerid][pFalsoDocumento] != 0) return SendClientMessage(playerid, COLOR_GREY, "* Ya posees un documento falso.");
			new precio = 15000;
			if (GetPlayerCash(playerid) < precio)
			{
				format(string, sizeof string, "Te hacen falta $%s para comprar '{00AE57}Documento falso{EBEBEB}' por $%s.", diner_coma(precio-GetPlayerCash(playerid)), diner_coma(precio));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
				return 1;
			}
			Dialog_Show(playerid, ShowDNIFalso, DIALOG_STYLE_INPUT, "{00AE57}Documento falso", "{FFFFFF}Ingresa el nombre que quieres usar para el documento falso:", "Continuar", "Salir");
		}
	}
	return 1;
}

Dialog:ShowDNIFalso(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new string[512];
	if (strlen(inputtext) < 1 || strlen(inputtext) > 32 || strfind(inputtext, "_", true) != -1)
	{
		SendClientMessage(playerid, 0xccccccff, "Formato inválido sigue {ffffff}Nombre_Apellido");
		Dialog_Show(playerid, ShowDNIFalso, DIALOG_STYLE_INPUT, "{00AE57}Documento falso", "{FFFFFF}Ingresa el nombre que quieres usar para el Documento falso, precio: {00CC00}$15.000", "Continuar", "Salir");
	}
	else
	{
		alm(InfoPersonaje[playerid][pFalsoNombre], inputtext);
		format(string, sizeof string, "{FFFFFF}¿Estás seguro que quieres usar el nombre de\n\t{00AE57}%s{FFFFFF} en tu Documento falso? Precio: {00CC00}$40.000", InfoPersonaje[playerid][pFalsoNombre]);
		Dialog_Show(playerid, Show2DNIFalso, DIALOG_STYLE_MSGBOX, "{00AE57}Documento falso", string, "Continuar", "Volver");
	}
	return 1;
}

Dialog:Show2DNIFalso(playerid, response, listitem, inputtext[])
{
	if (!response) return Dialog_Show(playerid, ShowDNIFalso, DIALOG_STYLE_INPUT, "{00AE57}Documento falso", "{FFFFFF}Ingresa el nombre que quieres usar para el Documento falso, precio: {00CC00}$15.000", "Continuar", "Salir");
	new dni = 100000 + random(899999);
	InfoPersonaje[playerid][pFalsoDocumento] = dni;
	new query[256];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET FalsoDocumento = '%d', FalsoNombre = '%e' WHERE ID = '%d'", InfoPersonaje[playerid][pFalsoDocumento], InfoPersonaje[playerid][pFalsoNombre], InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, query);
	format(query, sizeof query, "* Compraste una identificación falsa (/dnifalso para mostrarlo) con el nombre de %s.", InfoPersonaje[playerid][pFalsoNombre]);
	SendClientMessage(playerid, COLOR_LIGHTGREEN, query);
	GivePlayerCash(playerid, -15000, "compra de dni falso");
	return 1;
}

CMD:ganzua(playerid)
{
	if (InfoPersonaje[playerid][pGanzuas] == 0) return SendClientMessage(playerid, COLOR_WHITE, "No tienes ganzúas.");
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_WHITE, "{FFFF00}[ERROR]:{FFFFFF} No eres el conductor.");
	if (InfoPersonaje[playerid][pNivel] < 5) return SendClientMessage(playerid, COLOR_WHITE, "Solo quienes tengan más de 5 horas pueden usarlo. (Nivel)");
	if (!IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "No estás en un vehículo.");

	new string[128], vehicleid;
	format(string, sizeof string, "* %s utiliza unas ganzúas y cruza los cables.", NombreJugador(playerid));
	ProxDetector(30.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
	SetTimerEx("SetVehicleEngine", 2500, 0, "dd",  vehicleid, playerid);
	GameTextForPlayer(playerid, "~p~haciendo puente.",2500,3);
	return 1;
}

new slot_agenda[MAX_PLAYERS];

CMD:agenda(playerid)
{
	if (InfoPersonaje[playerid][pTelefono] == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes un número telefónico.");
	if (no_tiene_manos(playerid, 50) == 0) return 1;
	new dialog[1024], gformat[512];
	Loop(x, 10, 0)
	{
		if (InfoPersonaje[playerid][pNumeroContacto][x] != 0) format(gformat, sizeof gformat, "{cccccc}%d\t{008000}%s{cccccc} (%d)\n", x+1, nombre_contacto[playerid][x], InfoPersonaje[playerid][pNumeroContacto][x]);
		else format(gformat, sizeof gformat, "{cccccc}%d\t{ffffff}vacío\n", x+1);
		strcat(dialog, gformat);
	}
	Dialog_Show(playerid, ShowAgenda, DIALOG_STYLE_LIST, "Agenda", dialog, "Continuar", "Volver");
	return 1;
}

Dialog:ShowAgenda(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_telefono(playerid);
	new x = listitem;
	slot_agenda[playerid] = x;
	if (InfoPersonaje[playerid][pNumeroContacto][x] == 0)
	{
		Dialog_Show(playerid, AgregarContacto, DIALOG_STYLE_INPUT, "Número telefónico", "{cccccc}Escribe el número de teléfono del contacto a agregar:", "Continuar", "Volver");
		return 1;
	}
	Dialog_Show(playerid, OpcionContacto, DIALOG_STYLE_LIST, "Opciones", "{90C3D4}Llamar contacto\n{00a2ff}Enviar mensaje\n{00c200}Eliminar contacto", "Continuar", "Volver");
	return 1;
}

Dialog:OpcionContacto(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_agenda(playerid);
	new id = slot_agenda[playerid];
	switch (listitem)
	{
		case 0: //llamar
		{
			new gformatenvie[128];
			format(gformatenvie, sizeof gformatenvie, "%d", InfoPersonaje[playerid][pNumeroContacto][id]);
			cmd_llamar(playerid, gformatenvie);
		}
		case 1: //enviar mensaje
		{
			Dialog_Show(playerid, ShowSMS, DIALOG_STYLE_INPUT, "Enviar mensaje", "{ffffff}Introduce el texto que vas a enviar:", "Enviar", "Volver");
		}
		case 2: //eliminar contacto
		{
			alm(nombre_contacto[playerid][id], "none");
			InfoPersonaje[playerid][pNumeroContacto][id] = 0;
			slot_agenda[playerid] = -1;
			cmd_agenda(playerid);
			new query[256];
			mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET NombreContacto%d = '%e', NumeroContacto%d = 0 WHERE ID = '%d'", id+1, nombre_contacto[playerid][id], id+1, InfoPersonaje[playerid][pID]);
			mysql_tquery(DBInsanity, query);
			SendClientMessage(playerid, 0xaaaa00ff, "Contacto eliminado de tu agenda telefónica.");
		}
	}
	return 1;
}

Dialog:ShowSMS(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_agenda(playerid);
	new id = slot_agenda[playerid], gformatenvie[320];
	format(gformatenvie, sizeof gformatenvie, "%d %s", InfoPersonaje[playerid][pNumeroContacto][id], inputtext);
	cmd_sms(playerid, gformatenvie);
	return 1;
}

Dialog:AgregarContacto(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_agenda(playerid);
	new amount = strval(inputtext);
	new id = slot_agenda[playerid];
	if (!isnumeric(inputtext)) return SendClientMessage(playerid, COLOR_GRAD2, "Sólo números porfavor, vuelve a intentarlo.");
	if (amount > 99999999 || amount < 1000) return SendClientMessage(playerid, COLOR_GRAD2, "El número no puede ser mayor a 999999 o menor a 1000.");

	InfoPersonaje[playerid][pNumeroContacto][id] = amount;
	Dialog_Show(playerid, Agregar2Contacto, DIALOG_STYLE_INPUT, "Nombre del contacto", "{cccccc}Escribe el nombre del contacto", "Continuar", "Volver");
	return 1;
}

Dialog:Agregar2Contacto(playerid, response, listitem, inputtext[])
{
	if (!response) return Dialog_Show(playerid, AgregarContacto, DIALOG_STYLE_INPUT, "Número telefónico", "{cccccc}Escribe el número de teléfono del contacto a agregar:", "Continuar", "Volver");
	if (!strlen(inputtext)) return Dialog_Show(playerid, Agregar2Contacto, DIALOG_STYLE_INPUT, "Nombre del contacto", "{cccccc}Escribe el nombre del contacto", "Continuar", "Volver");
	if (strlen(inputtext) > 20 || strlen(inputtext) < 0)
	{
		SendClientMessage(playerid, COLOR_GRAD2, "Sólo puedes escribir menos de 20 carácteres.");
		Dialog_Show(playerid, Agregar2Contacto, DIALOG_STYLE_INPUT, "Nombre del contacto", "{cccccc}Escribe el nombre del contacto", "Continuar", "Volver");
		return 1;
	}
	new id = slot_agenda[playerid];
	alm(nombre_contacto[playerid][id], inputtext);
	slot_agenda[playerid] = -1;
	cmd_agenda(playerid);
	new query[500];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET NombreContacto%d = '%e', NumeroContacto%d = '%d' WHERE ID = '%d'", id+1, nombre_contacto[playerid][id], id+1, InfoPersonaje[playerid][pNumeroContacto][id], InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, query);
	SendClientMessage(playerid, 0x00cc00ff, "Nuevo contacto agregado a tu agenda telefónica.");
	return 1;
}

CMD:estado(playerid, params[])
{
	if (InfoPersonaje[playerid][pHorasOn] < 3) return SendClientMessage(playerid, COLOR_GRAD2, "Debes mínimo 3 horas IG.");
	new result[32], string[256];
	if (sscanf(params, "s[32]", result)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /estado (Texto)");
	if (isnull(result) || strlen(result) > 32) return SendClientMessage(playerid, COLOR_GREY, "* El estado sólo puede contener 32 caracteres.");
	if (!isnull(InfoPersonaje[playerid][pEstadoYo])) //quitar
	{
		format(string, sizeof string, "** {E81700}Retiraste{EBEBEB} tu estado: {00A5AA}%s", InfoPersonaje[playerid][pEstadoYo]);
		SendClientMessage(playerid, 0xEBEBEBFF, string);
		DestroyDynamic3DTextLabel(InfoPersonaje[playerid][pNameTag]);
		alm(InfoPersonaje[playerid][pEstadoYo], "");
	}
	else //poner
	{
		format(string, sizeof string, "** {54C822}Colocaste{EBEBEB} un nuevo estado: {00A5AA}%s", result);
		SendClientMessage(playerid, 0xEBEBEBFF, string);
		SendClientMessage(playerid, COLOR_YELLOW, "El estado queda permanente (sin importar re-login), si deseas retirarlo usa '/estado' nuevamente.");
		alm(InfoPersonaje[playerid][pEstadoYo], result);
		DestroyDynamic3DTextLabelEx(InfoPersonaje[playerid][pNameTag]);
		InfoPersonaje[playerid][pNameTag] = CreateDynamic3DTextLabel(result, 0x00A5AAFF, 0, 0, 0.5, 20.0, playerid, INVALID_VEHICLE_ID, 1, -1, -1, -1, 100.0);
	}
	guardar_string_mysql("personajes", "EstadoYo", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pEstadoYo]);
	return 1;
}
CMD:yo(playerid, params[]) return cmd_estado(playerid, params);

CMD:ame(playerid, params[])
{
	if(isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /ame (Acción corta)");
	ameuwu(playerid, params);
	return 1;
}

ameuwu(playerid, texto[])
{
	new string[128];
	format(string, sizeof string, "> %s", texto);
	SendClientMessage(playerid, COLOR_PURPLE, string);
	SetPlayerChatBubble(playerid, texto, COLOR_PURPLE, 20.0, 10000);
	return 1;
}

meuwu(playerid, texto[])
{
	new string[128], Float:PosXD[3], VW = GetPlayerVirtualWorld(playerid), INT = GetPlayerInterior(playerid);
	GetPlayerPos(playerid, PosXD[0], PosXD[1], PosXD[2]);

	format(string, sizeof string, "%s %s", NombreJugador(playerid), texto);
	foreach(Player, i)
	{
		if(IsPlayerInRangeOfPoint(i, 30.0, PosXD[0], PosXD[1], PosXD[2]) && GetPlayerInterior(i) == INT && GetPlayerVirtualWorld(i) == VW)
		{
			SendSplitMessage(i, COLOR_PURPLE, string);
		}
	}
	return 1;
}

douwu(playerid, texto[])
{
	new string[128], Float:PosXD[3], VW = GetPlayerVirtualWorld(playerid), INT = GetPlayerInterior(playerid);

	GetPlayerPos(playerid, PosXD[0], PosXD[1], PosXD[2]);

	format(string, sizeof string, "[%s — ID: %d] %s", NombreJugador(playerid), playerid, texto);
	foreach(Player, i)
	{
		if(IsPlayerInRangeOfPoint(i, 30.0, PosXD[0], PosXD[1], PosXD[2]) && GetPlayerInterior(i) == INT && GetPlayerVirtualWorld(i) == VW)
		{
			SendSplitMessage(i, 0x9EC73DAA, string);
		}
	}
	return 1;
}

CMD:me(playerid, params[])
{
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /me (acción)");
	meuwu(playerid, params);
	return 1;
}

CMD:b(playerid, params[])
{
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /b (ooc chat)");
	new string[128];
	if (AdminDuty[playerid] != 0) format(string, sizeof string, "[OOC {FF2F2F}%s{C8C8C8} | %d] %s: %s", GetAdminName(playerid), playerid, InfoCuenta[playerid][jApodo], params);
	else format(string, sizeof string, "[OOC | %d] %s: %s", playerid, NombreJugador(playerid), params);
	ProxDetector(25.0, playerid, string, 0xC8C8C8FF, 0xC8C8C8FF, 0xC8C8C8FF, 0xC8C8C8FF, 0xC8C8C8FF);
	return 1;
}
/*
CMD:intentar(playerid, params[])
{
	if (Intentar[playerid] == 1) return SendClientMessage(playerid, COLOR_WHITE, "Espera 10 segundos para volver a utilizar este comando!");
	new randa = random(3);
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /intentar (acción)");
	new string[256];
	if (randa == 1)
	{
		format(string, sizeof string, "* %s intenta %s y lo logra.", NombreJugador(playerid), params);
		ProxDetector(20.0, playerid, string, COLOR_GREEN,COLOR_GREEN,COLOR_GREEN,COLOR_GREEN,COLOR_GREEN);
	}
	else
	{
		format(string, sizeof string, "* %s intenta %s pero falla.", NombreJugador(playerid), params);
		ProxDetector(30.0, playerid, string, 0xB90000FF,0xB90000FF,0xB90000FF,0xB90000FF,0xB90000FF);
	}
	Intentar[playerid] = 1;
	SetTimerEx("IntentarTimer", 10000, false, "i", playerid);
	return 1;
}
*/
CMD:c(playerid, params[])
{
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /c (ic chat)");
	new string[256];
	format(string, sizeof string, "%s: %s", NombreJugador(playerid), params);
	ProxDetector(20.0, playerid, string,COLOR_FADE1,COLOR_FADE2,COLOR_FADE3,COLOR_FADE4,COLOR_FADE5);
	return 1;
}

CMD:do(playerid, params[])
{
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /do (entorno o aclaración)");
	douwu(playerid, params);
	return 1;
}

CMD:s(playerid, params[])
{
	new string[256];
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /s (texto a susurrar)");
	format(string, sizeof string, "%s susurra: %s", NombreJugador(playerid), params);
	ProxDetector(3.0, playerid, string,COLOR_FADE1,COLOR_FADE2,COLOR_FADE3,COLOR_FADE4,COLOR_FADE5);
	return 1;
}

CMD:g(playerid, params[])
{
	new string[256];
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /g (texto a gritar)");
	format(string, sizeof string, "%s grita: ¡%s!", NombreJugador(playerid), params);
	ProxDetector(30.0, playerid, string,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_FADE1,COLOR_FADE2);
	return 1;
}

CMD:ao(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /ao (general chat)");
	new string[256];
	format(string, sizeof string, "{0095C6}[GENERAL] %s{FFFFFF} %s: %s", GetAdminName(playerid), InfoCuenta[playerid][jApodo], params);
	SendAllMessage(0xFFFFFFFF, string);
	return 1;
}

CMD:enmascarados(playerid)
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	SendClientMessage(playerid, COLOR_LIGHTBLUE, "Enmascarados:");
	Loop(playerid2, MAX_PLAYERS, 0) if (IsPlayerConnectedEx(playerid2) && InfoPersonaje[playerid2][pUsoMascara] == 1)
	{
		new string[190];
		format(string, sizeof string, "** %s (%d) - usando: {FF2F2F}%s", NombreOriginal(playerid2), playerid2, NombreJugador(playerid2));
		SendClientMessage(playerid, COLOR_GRAD2, string);
	}
	return 1;
}

CMD:enmascaradospd(playerid)
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	SendClientMessage(playerid, COLOR_LIGHTBLUE, "Enmascarados policiales:");
	Loop(playerid2, MAX_PLAYERS, 0) if (IsPlayerConnectedEx(playerid2) && !isnull(InfoPersonaje[playerid2][pNombre_PD]))
	{
		new string[190];
		format(string, sizeof string, "** %s (%d) - usando: {FF2F2F}%s", InfoPersonaje[playerid2][pNombre_Apellido], playerid2, InfoPersonaje[playerid2][pNombre_PD]);
		SendClientMessage(playerid, COLOR_GRAD2, string);
	}
	return 1;
}

CMD:enmascaradosadmin(playerid)
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	SendClientMessage(playerid, COLOR_LIGHTBLUE, "Enmascarados admins:");
	Loop(playerid2, MAX_PLAYERS, 0) if (IsPlayerConnectedEx(playerid2) && !isnull(InfoPersonaje[playerid2][pNombre_Temporal]))
	{
		new string[190];
		format(string, sizeof string, "** %s (%d) - usando: {FF2F2F}%s", InfoPersonaje[playerid2][pNombre_Apellido], playerid2, InfoPersonaje[playerid2][pNombre_Temporal]);
		SendClientMessage(playerid, COLOR_GRAD2, string);
	}
	return 1;
}

CMD:comprar(playerid)
{
	new id = EnNegocio(playerid);
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "No estás en el interior de ningún negocio.");
	if (InfoNegocio[id][nVenta] != 0)
	{
		if (InfoNegocio[id][nProductos] < 1) return SendClientMessage(playerid, COLOR_GREY, "Este negocio no tiene productos.");
	}
	if (!IsPlayerInRangeOfPoint(playerid, 4.0, InfoNegocio[id][nLugarCompraX], InfoNegocio[id][nLugarCompraY], InfoNegocio[id][nLugarCompraZ])) return SendClientMessage(playerid, COLOR_GREY, "No estás en el lugar de compra.");
	id_negocio[playerid] = id;
	new dialg_products[1028];
	switch (InfoNegocio[id][nTipo])
	{
		case 1: // 24-7
		{
			strcat(dialg_products, "Producto\tValor\tUnidades\n");
			strcat(dialg_products, "{EBEBEB}Número de teléfono\t{04B404}$50\t{00AE57}1\n");
			strcat(dialg_products, "{EBEBEB}Teléfono S10 color oro\t{04B404}$500\t{00AE57}1\n");
			strcat(dialg_products, "{EBEBEB}Paquete de cigarros\t{04B404}$10\t{00AE57}20\n");
			strcat(dialg_products, "{EBEBEB}Encendedor\t{04B404}$5\t{00AE57}20\n");
			strcat(dialg_products, "{EBEBEB}Cámara fotográfica\t{04B404}$500\t{00AE57}50\n");
			strcat(dialg_products, "{EBEBEB}Boombox\t{04B404}$1,000\t{00AE57}1");
			Dialog_Show(playerid, Show24siete, DIALOG_STYLE_TABLIST_HEADERS, "{00AE57}24/7", dialg_products, "Comprar", "Salir");
		}
		case 2: // ropa
		{
			if (InfoPersonaje[playerid][pSexo] == 1)
			{
				strcat(dialg_products, "Ropa de civil\n");
				strcat(dialg_products, "Ropa de pandillero\n");
				strcat(dialg_products, "Ropa de mafioso\n");
				strcat(dialg_products, "Ropa sexy\n");
				strcat(dialg_products, "Toys");
			}
			else
			{
				strcat(dialg_products, "Ropa de civil\n");
				strcat(dialg_products, "Ropa de pandillera\n");
				strcat(dialg_products, "Ropa de mafiosa\n");
				strcat(dialg_products, "Ropa sexy\n");
				strcat(dialg_products, "Toys");
			}
			Dialog_Show(playerid, ShowRopa, DIALOG_STYLE_LIST, "{00AE57}Tienda de ropa", dialg_products, "Continuar", "Salir");
		}
		case 3,8: // restaurantes y bar
		{
			strcat(dialg_products, "Producto\tValor\n");
			strcat(dialg_products, "{EBEBEB}Huevos con Chorizo\t{04B404}$20\n");
			strcat(dialg_products, "{EBEBEB}Jamón Ibérico\t{04B404}$30\n");
			strcat(dialg_products, "{EBEBEB}Sopa de Marisco\t{04B404}$25\n");
			strcat(dialg_products, "{EBEBEB}Macarrones a la Bolognesa\t{04B404}$15\n");
			strcat(dialg_products, "{EBEBEB}Ensalada\t{04B404}$10\n");
			strcat(dialg_products, "{EBEBEB}Cerveza\t{04B404}$3\n");
			strcat(dialg_products, "{EBEBEB}Vino tinto\t{04B404}$5\n");
			strcat(dialg_products, "{EBEBEB}Champagne\t{04B404}$6\n");
			strcat(dialg_products, "{EBEBEB}Coca-Cola\t{04B404}$2\n");
			strcat(dialg_products, "{EBEBEB}Agua\t{04B404}$1");
			Dialog_Show(playerid, ShowRestaurante, DIALOG_STYLE_TABLIST_HEADERS, "{00AE57}Menú de produtos", dialg_products, "Comprar", "Salir");
		}
		case 4: // gasolinera
		{
			strcat(dialg_products, "Producto\tValor\n");
			strcat(dialg_products, "{EBEBEB}Lata de gasolina\t{04B404}$200\n");
			strcat(dialg_products, "{EBEBEB}Bolsa de patatas\t{04B404}$5\n");
			strcat(dialg_products, "{EBEBEB}Refresco\t{04B404}$4\n");
			strcat(dialg_products, "{EBEBEB}Paquete de cigarros\t{04B404}$4\n");
			strcat(dialg_products, "{EBEBEB}Encendedor\t{04B404}$5");
			Dialog_Show(playerid, ShowGasolinera, DIALOG_STYLE_TABLIST_HEADERS, "{00AE57}Gasolinera", dialg_products, "Comprar", "Salir");
		}
		case 5: // ammunation
		{
			if (InfoPersonaje[playerid][pLicencia][3] == 0) return SendClientMessage(playerid, COLOR_GRAD2, "Vendedor dice: Es imposible venderte armas, no tienes licencia para portarlas.");
			if (InfoPersonaje[playerid][pHorasOn] < 2) return SendClientMessage(playerid, COLOR_GREY, "Debes tener al menos dos horas de juego para comprar armas.");
			strcat(dialg_products, "Producto\tValor\n");
			strcat(dialg_products, "{EBEBEB}Puño americano\t{04B404}$25\n");
			strcat(dialg_products, "{EBEBEB}Bate\t{04B404}$50\n");
			strcat(dialg_products, "{EBEBEB}Pistola 9mm\t{04B404}$5,500\n");
			strcat(dialg_products, "{EBEBEB}Escopeta\t{04B404}$15,000\n");
			strcat(dialg_products, "{EBEBEB}Rifle de caza\t{04B404}$25,000\n");
			strcat(dialg_products, "{EBEBEB}Comprar balas");
			Dialog_Show(playerid, ShowAmmunation, DIALOG_STYLE_TABLIST_HEADERS, "{00AE57}Ammunation", dialg_products, "Comprar", "Salir");
		}
		case 7: // sex shop
		{
			strcat(dialg_products, "Producto\tValor\n");
			strcat(dialg_products, "{EBEBEB}Dildo\t{04B404}$350\n");
			strcat(dialg_products, "{EBEBEB}Consolador\t{04B404}$200");
			Dialog_Show(playerid, ShowSexShop, DIALOG_STYLE_TABLIST_HEADERS, "{00AE57}Tienda erótica", dialg_products, "Comprar", "Salir");
		}
		case 10: // concesionario
		{
			if (DetectarMaxVehiculos(playerid) == 1) return 1;
			new showConcesionario[4056] = "Modelo\tValor\n", gformat[256], iCount = 0;
			Loop(xd, sizeof infovehicle, 0) if (infovehicle[xd][elPrecio] != 0)
			{
				format(gformat, sizeof gformat, "{EBEBEB}%s\t{04B404}$%s\n", infovehicle[xd][elNombre], diner_coma(infovehicle[xd][elPrecio]));
				strcat(showConcesionario, gformat);
				//conteo
				new gformat2[64];
				format(gformat2, sizeof gformat2, "vehConcesinx%d", iCount);
				SetPVarInt(playerid, gformat2, xd);
				iCount++;
			}
			Dialog_Show(playerid, ComprarVehiculo, DIALOG_STYLE_TABLIST_HEADERS, "{00AE57}Concesionaria", showConcesionario, "Continuar", "Salir");
		}
		case 11: // pescadería
		{
			Dialog_Show(playerid, ShowPescaderia, DIALOG_STYLE_LIST, "Tienda del Puerto", "Carnada\nLineas", "Continuar", "Salir");
		}
		/*
		case 13: // clínicas
		{
			new precio = 500, string[190];
			if (GetPlayerCash(playerid) < precio)
			{
				format(string, sizeof string, "Te hacen falta $%s para comprar '{00AE57}Botiquin{EBEBEB}' por $%s.", diner_coma(precio-GetPlayerCash(playerid)), diner_coma(precio));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
				return 1;
			}
			if (DarObjeto(playerid, 53, 1) == 2) return 1;
			SendClientMessage(playerid, COLOR_LIGHTGREEN, "Compraste un botiquin. (/hpsave)");
			GivePlayerCash(playerid, -500, "compra botiquin");
			CobroNegocio(id_negocio[playerid], precio);
		}*/
	}
	return 1;
}
CMD:tomarhp(playerid) return cmd_comprar(playerid);

Dialog:ComprarVehiculo(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	if (AutosSpawneados[playerid] > MAX_AUTOS_SPAWNEADOS) return SendClientMessageEx(playerid, 0xEBEBEBFF, "Solo puedes tener {00AE57}%d autos{EBEBEB} spawneados. ({00AE57}/llaves{EBEBEB})", MAX_AUTOS_SPAWNEADOS);
	new veh = listitem, gformat[40];
	format(gformat, sizeof gformat, "vehConcesinx%d", veh);
	new id = GetPVarInt(playerid, gformat), color1 = random(250), color2 = random(250);
	if (infovehicle[id][elPrecio] == 0) return SendClientMessage(playerid, 0xebebebff, "Ese vehículo es premium o de facción.");
	TextDrawShowForPlayer(playerid, CocheVS[0]);
	//modelo nombre
	format(gformat, sizeof gformat, "%s", infovehicle[id][elNombre]);
	PlayerTextDrawSetStringEx(playerid, pCocheVS[playerid][0], gformat);
	PlayerTextDrawShow(playerid, pCocheVS[playerid][0]);
	//angulo1
	PlayerTextDrawSetPreviewModel(playerid, pCocheVS[playerid][1], infovehicle[id][elModelo]);
	PlayerTextDrawSetPreviewVehCol(playerid, pCocheVS[playerid][1], color1, color2);
	PlayerTextDrawShow(playerid, pCocheVS[playerid][1]);
	//angulo2
	PlayerTextDrawSetPreviewModel(playerid, pCocheVS[playerid][2], infovehicle[id][elModelo]);
	PlayerTextDrawSetPreviewVehCol(playerid, pCocheVS[playerid][2], color1, color2);
	PlayerTextDrawShow(playerid, pCocheVS[playerid][2]);
	//angulo3
	PlayerTextDrawSetPreviewModel(playerid, pCocheVS[playerid][3], infovehicle[id][elModelo]);
	PlayerTextDrawSetPreviewVehCol(playerid, pCocheVS[playerid][3], color1, color2);
	PlayerTextDrawShow(playerid, pCocheVS[playerid][3]);
	//angulo4
	PlayerTextDrawSetPreviewModel(playerid, pCocheVS[playerid][4], infovehicle[id][elModelo]);
	PlayerTextDrawSetPreviewVehCol(playerid, pCocheVS[playerid][4], color1, color2);
	PlayerTextDrawShow(playerid, pCocheVS[playerid][4]);
	//precio
	format(gformat, sizeof gformat, "$%s", diner_coma(infovehicle[id][elPrecio]));
	PlayerTextDrawSetStringEx(playerid, pCocheVS[playerid][5], gformat);
	PlayerTextDrawShow(playerid, pCocheVS[playerid][5]);
	//espacios maletero
	if (infovehicle[id][elModelo] == 509 || infovehicle[id][elModelo] == 481 || infovehicle[id][elModelo] == 510) PlayerTextDrawSetStringEx(playerid, pCocheVS[playerid][6], "Maletero:_0_ranuras");
	else
	{
		format(gformat, sizeof gformat, "Maletero:_%d_ranuras", infovehicle[id][elMaxMaletero]);
		PlayerTextDrawSetStringEx(playerid, pCocheVS[playerid][6], "");
	}
	//regresar
	TextDrawShowForPlayer(playerid, CocheVS[1]);
	//comprar
	TextDrawShowForPlayer(playerid, CocheVS[2]);
	//selección
	SelectTextDraw(playerid, 0x00FF00FF);
	CompraVehiculo[playerid] = id;
	return 1;
}

Dialog:Show24siete(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new string[195];
	switch (listitem)
	{
		case 0:
		{
		    new precio = 50;
			if (GetPlayerCash(playerid) < precio)
			{
				format(string, sizeof string, "Te hacen falta $%s para comprar '{00AE57}Número de teléfono{EBEBEB}' por $%s.", diner_coma(precio-GetPlayerCash(playerid)), diner_coma(precio));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
				return 1;
			}
			InfoPersonaje[playerid][pTelefono] = 100000+random(899999);
			guardar_int_mysql("personajes", "Telefono", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTelefono]);
			format(string, sizeof string, "Compraste nuevo chip de teléfono. (Número: %d)", InfoPersonaje[playerid][pTelefono]);
			SendClientMessage(playerid, COLOR_LIGHTGREEN, string);
			GivePlayerCash(playerid, -precio, "compra de chip de telefono");
			CobroNegocio(id_negocio[playerid], precio);
		}
		case 1:
		{
		    new precio = 500;
			if (GetPlayerCash(playerid) < precio)
			{
				format(string, sizeof string, "Te hacen falta $%s para comprar '{00AE57}Teléfono S10 color oro{EBEBEB}' por $%s.", diner_coma(precio-GetPlayerCash(playerid)), diner_coma(precio));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
				return 1;
			}
			if (DarObjeto(playerid, 50, 1) == 2) return 1;
			SendClientMessage(playerid, COLOR_LIGHTGREEN, "Compraste teléfono S10 color oro.");
			GivePlayerCash(playerid, -precio, "compra de telefono");
			CobroNegocio(id_negocio[playerid], precio);
		}
		case 2:
		{
		    new precio = 10;
			if (GetPlayerCash(playerid) < precio)
			{
				format(string, sizeof string, "Te hacen falta $%s para comprar '{00AE57}Paquete de cigarros{EBEBEB}' por $%s.", diner_coma(precio-GetPlayerCash(playerid)), diner_coma(precio));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
				return 1;
			}
			if (DarObjeto(playerid, 42, 20) == 2) return 1;
			SendClientMessage(playerid, COLOR_LIGHTGREEN, "Compraste un paquete de 20 cigarros. (/fumar)");
			GivePlayerCash(playerid, -precio, "compra de 20 cigarros");
			CobroNegocio(id_negocio[playerid], precio);
		}
		case 3:
		{
		    new precio = 5;
			if (GetPlayerCash(playerid) < precio)
			{
				format(string, sizeof string, "Te hacen falta $%s para comprar '{00AE57}Encendedor{EBEBEB}' por $%s.", diner_coma(precio-GetPlayerCash(playerid)), diner_coma(precio));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
				return 1;
			}
			if (DarObjeto(playerid, 41, 20) == 2) return 1;
			SendClientMessage(playerid, COLOR_LIGHTGREEN, "Compraste un encendedor.");
			GivePlayerCash(playerid, -precio, "compra de encendedor");
			CobroNegocio(id_negocio[playerid], precio);
		}
		case 4:
		{
		    new precio = 500;
			if (GetPlayerCash(playerid) < precio)
			{
				format(string, sizeof string, "Te hacen falta $%s para comprar '{00AE57}Cámara fotográfica{EBEBEB}' por $%s.", diner_coma(precio-GetPlayerCash(playerid)), diner_coma(precio));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
				return 1;
			}
			if (PlayerWeapon(playerid, 43) == 0) return 1;
			SendClientMessage(playerid, COLOR_LIGHTGREEN, "Compraste una cámara fotográfica.");
			GivePlayerCash(playerid, -precio, "compra de cámara fotográfica");
			CobroNegocio(id_negocio[playerid], precio);
		}
		case 5:
		{
		    new precio = 1000;
			if (GetPlayerCash(playerid) < precio)
			{
				format(string, sizeof string, "Te hacen falta $%s para comprar '{00AE57}Boombox{EBEBEB}' por $%s.", diner_coma(precio-GetPlayerCash(playerid)), diner_coma(precio));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
				return 1;
			}
			if (DarObjeto(playerid, 51, 1) == 2) return 1;
			SendClientMessage(playerid, COLOR_LIGHTGREEN, "Compraste un boombox. (/equiposonido).");
			GivePlayerCash(playerid, -precio, "compra de boombox");
			CobroNegocio(id_negocio[playerid], precio);
		}
	}
	return 1;
}

Dialog:ShowRopa(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	if (listitem == 4)
	{
		new max_cToys = 4;
		if (InfoCuenta[playerid][jVIP] == 3) max_cToys = 7;
		Loop(id, max_cToys, 0) if (InfoPersonaje[playerid][ptModelo][id] == 0)
		{
			slotselection[playerid] = id;
			new ToyMuestra[180], count = 0;
			Loop(x, sizeof InfoToy, 0) if (InfoToy[x][accTipo] == 1)
			{
				ToyMuestra[count] = InfoToy[x][accModelo];
				count++;
			}
			ShowModelSelectionMenuEx(playerid, ToyMuestra, count, "Toys", Compra_Toy);
			return 1;
		}
		new gformat[128];
		format(gformat, sizeof gformat, "No puedes tener más de %d toys.", max_cToys);
		SendClientMessage(playerid, COLOR_GREY, gformat);
		return 1;
	}
	new SkinMuestra[150], name_tip[42], count = 0, id_tip = listitem+1;
	switch (id_tip)
	{
		case 1: alm(name_tip, "Ropa de civil");
		case 2:
		{
			if (InfoPersonaje[playerid][pSexo] == 1) alm(name_tip, "Ropa de pandillero");
			else alm(name_tip, "Ropa de pandillera");
		}
		case 3:
		{
			if (InfoPersonaje[playerid][pSexo] == 1) alm(name_tip, "Ropa de mafioso");
			else alm(name_tip, "Ropa de mafiosa");
		}
		case 4: alm(name_tip, "Ropa sexy");
	}
	Loop(x, sizeof InfoSkin, 0) if (InfoSkin[x][sSexo] == InfoPersonaje[playerid][pSexo] && InfoSkin[x][sTipo] == id_tip)
	{
		SkinMuestra[count] = x;
		count++;
	}
	ShowModelSelectionMenuEx(playerid, SkinMuestra, count, name_tip, Compra_Skin, -11.0, 0.0, -55.0, 1.0);
	return 1;
}

Dialog:ShowRestaurante(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new Float:Health = InfoPersonaje[playerid][pVida];
	switch (listitem)
	{
		case 0:
		{
			if (Health < 101) dar_vida(playerid, Health+20);
			ameuwu(playerid, "come un plato de huevos con chorizo.");
			GivePlayerCash(playerid, -20, "compra de plato huevos");
			CobroNegocio(id_negocio[playerid], 20);
			PlayerDrunk[playerid] += 2;
			if (PlayerDrunk[playerid] > 10)
			{
				quitar_vida(playerid, -20);
				ameuwu(playerid, "vomita lo que ha comido.");
				ApplyAnimation(playerid, "FOOD", "EAT_Vomit_P", 3.0, 0, 0, 0, 0, 0);
			}
			else ApplyAnimation(playerid,"FOOD","EAT_Burger",4.1,0,1,1,0,0);
		}
		case 1:
		{
			if (Health < 101) dar_vida(playerid, Health+30);
			ameuwu(playerid, "come un plato de jamón ibérico.");
			GivePlayerCash(playerid, -30, "compra de jamón.");
			CobroNegocio(id_negocio[playerid], 30);
			PlayerDrunk[playerid] += 2;
			if (PlayerDrunk[playerid] > 10)
			{
				quitar_vida(playerid, -20);
				ameuwu(playerid, "vomita lo que ha comido");
				ApplyAnimation(playerid, "FOOD", "EAT_Vomit_P", 3.0, 0, 0, 0, 0, 0);
			}
			else ApplyAnimation(playerid,"FOOD","EAT_Burger",4.1,0,1,1,0,0);
		}
		case 2:
		{
			if (Health < 101) dar_vida(playerid, Health+25);
			ameuwu(playerid, "come una tasa de sopa de marisco.");
			GivePlayerCash(playerid, -25, "compra de tasa sopa");
			CobroNegocio(id_negocio[playerid], 25);
			PlayerDrunk[playerid] += 2;
			if (PlayerDrunk[playerid] > 10)
			{
				quitar_vida(playerid, -20);
				ameuwu(playerid, "vomita lo que ha comido");
				ApplyAnimation(playerid, "FOOD", "EAT_Vomit_P", 3.0, 0, 0, 0, 0, 0);
			}
			else ApplyAnimation(playerid,"FOOD","EAT_Burger",4.1,0,1,1,0,0);
		}
		case 3:
		{
			if (Health < 101) dar_vida(playerid, Health+15);
			meuwu(playerid, "come un plato de macarrones a la bolognesa");
			GivePlayerCash(playerid, -15, "compra de plato macarrones");
			CobroNegocio(id_negocio[playerid], 15);
			PlayerDrunk[playerid] += 2;
			if (PlayerDrunk[playerid] > 10)
			{
				quitar_vida(playerid, -20);
				meuwu(playerid, "vomita lo que ha comido");
				ApplyAnimation(playerid, "FOOD", "EAT_Vomit_P", 3.0, 0, 0, 0, 0, 0);
			}
			else ApplyAnimation(playerid,"FOOD","EAT_Burger",4.1,0,1,1,0,0);
		}
		case 4:
		{
			if (Health < 101) dar_vida(playerid, Health+10);
			ameuwu(playerid, "come un plato de ensalada");
			GivePlayerCash(playerid, -10, "compra de ensalada");
			CobroNegocio(id_negocio[playerid], 10);
			PlayerDrunk[playerid] += 2;
			if (PlayerDrunk[playerid] > 10)
			{
				quitar_vida(playerid, -20);
				ameuwu(playerid, "vomita lo que ha comido");
				ApplyAnimation(playerid, "FOOD", "EAT_Vomit_P", 3.0, 0, 0, 0, 0, 0);
			}
			else ApplyAnimation(playerid,"FOOD","EAT_Burger",4.1,0,1,1,0,0);
		}
		case 5:
		{
			if (Health < 101) dar_vida(playerid, Health+3);
			ameuwu(playerid, "bebe una cerveza");
			GivePlayerCash(playerid, -3, "compra de cerveza");
			CobroNegocio(id_negocio[playerid], 3);
			PlayerDrunk[playerid] += 2;
			if (PlayerDrunk[playerid] > 10)
			{
				quitar_vida(playerid, -20);
				ameuwu(playerid, "vomita lo que ha bebido");
				PlayerDrunk[playerid]  += 1;
				SetPlayerSpecialAction(playerid,SPECIAL_ACTION_NONE);
				ApplyAnimation(playerid, "FOOD", "EAT_Vomit_P", 3.0, 0, 0, 0, 0, 0);
			}
			else SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DRINK_BEER);
		}
		case 6:
		{
			if (Health < 101) dar_vida(playerid, Health+5);
			ameuwu(playerid, "bebe una copa de vino");
			GivePlayerCash(playerid, -5, "compra de copa de vino");
			CobroNegocio(id_negocio[playerid], 5);
			PlayerDrunk[playerid] += 2;
			if (PlayerDrunk[playerid] > 10)
			{
				quitar_vida(playerid, -20);
				ameuwu(playerid, "vomita lo que ha bebido");
				PlayerDrunk[playerid]  += 1;
				SetPlayerSpecialAction(playerid,SPECIAL_ACTION_NONE);
				ApplyAnimation(playerid, "FOOD", "EAT_Vomit_P", 3.0, 0, 0, 0, 0, 0);
			}
			else SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DRINK_BEER);
		}
		case 7:
		{
			if (Health < 101) dar_vida(playerid, Health+6);
			ameuwu(playerid, "bebe una copa de champagne");
			GivePlayerCash(playerid, -6, "compra de copa champagne");
			CobroNegocio(id_negocio[playerid], 6);
			PlayerDrunk[playerid] += 2;
			if (PlayerDrunk[playerid] > 10)
			{
				quitar_vida(playerid, -20);
				ameuwu(playerid, "vomita lo que ha bebido");
				PlayerDrunk[playerid]  += 1;
				SetPlayerSpecialAction(playerid,SPECIAL_ACTION_NONE);
				ApplyAnimation(playerid, "FOOD", "EAT_Vomit_P", 3.0, 0, 0, 0, 0, 0);
			}
			else SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DRINK_BEER);
		}
		case 8:
		{
			if (Health < 101) dar_vida(playerid, Health+2);
			ameuwu(playerid, "bebe una coca cola");
			GivePlayerCash(playerid, -2, "compra de cocacola");
			CobroNegocio(id_negocio[playerid], 2);
			PlayerDrunk[playerid] += 2;
			if (PlayerDrunk[playerid] > 10)
			{
				quitar_vida(playerid, -20);
				ameuwu(playerid, "vomita lo que ha bebido");
				PlayerDrunk[playerid]  += 1;
				SetPlayerSpecialAction(playerid,SPECIAL_ACTION_NONE);
				ApplyAnimation(playerid, "FOOD", "EAT_Vomit_P", 3.0, 0, 0, 0, 0, 0);
			}
			else SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DRINK_BEER);
		}
		case 9:
		{
			if (Health < 101) dar_vida(playerid, Health+1);
			ameuwu(playerid, "bebe una coca cola");
			GivePlayerCash(playerid, -1, "compra de cocacola");
			CobroNegocio(id_negocio[playerid], 1);
			SetPlayerSpecialAction(playerid,SPECIAL_ACTION_DRINK_SPRUNK);
			if (PlayerDrunk[playerid] > 0) { PlayerDrunk[playerid]--; }
		}
	}
	return 1;
}

Dialog:ShowGasolinera(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0:
		{
			if (CheckMoney(playerid, 200) == 0) return 1;
			autorepara[playerid] = 1;
			SendClientMessage(playerid, 0xA2DC35FF, "[Gas]:{FFFFFF} Compraste una lata de gasolina. Comandos: /rellenarauto");
			GivePlayerCash(playerid, -200, "compra de lata de gasolina");
			CobroNegocio(id_negocio[playerid], 200);
		}
		case 1:
		{
			if (CheckMoney(playerid, 5) == 0) return 1;
			new Float:Health = InfoPersonaje[playerid][pVida];
			if (Health < 101)	{	dar_vida(playerid, Health+20); 	}
			ameuwu(playerid, "come una bolsa de patatas");
			ApplyAnimation(playerid, "GRAFFITI", "graffiti_Chkout", 4.0, 0, 0, 0, 0, 0, 1);
			GivePlayerCash(playerid, -5, "compra de bolsa de patatas");
			CobroNegocio(id_negocio[playerid], 30);
		}
		case 2:
		{
			if (CheckMoney(playerid, 5) == 0) return 1;
			new Float:Health = InfoPersonaje[playerid][pVida];
			if (Health < 101)	{	dar_vida(playerid, Health+2); 	}
			ameuwu(playerid, "bebe un refresco");
			GivePlayerCash(playerid, -5, "compra de refresco");
			CobroNegocio(id_negocio[playerid], 20);
			SetPlayerSpecialAction(playerid,SPECIAL_ACTION_DRINK_SPRUNK);
		}
		case 3:
		{
			if (CheckMoney(playerid, 4) == 0) return 1;
			if (DarObjeto(playerid, 42, 8) == 2) return 1;
			PlayerPlaySound(playerid, 1052, 0.0, 0.0, 0.0);
			SendClientMessage(playerid, 0xA2DC35FF, "[Gas]:{FFFFFF} Compraste una caja de cigarros (8 unidades). Comandos: /fumar");
			GivePlayerCash(playerid, -4, "compra de 8 cigarros");
			CobroNegocio(id_negocio[playerid], 40);
		}
		case 4:
		{
			if (CheckMoney(playerid, 5) == 0) return 1;
			if (DarObjeto(playerid, 41, 8) == 2) return 1;
			PlayerPlaySound(playerid, 1052, 0.0, 0.0, 0.0);
			SendClientMessage(playerid, 0xA2DC35FF, "[Gas]:{FFFFFF} Compraste un encendedor (8 usos).");
			GivePlayerCash(playerid, -5, "compra de encendedor 8u");
			CobroNegocio(id_negocio[playerid], 20);
		}
	}
	return 1;
}

Dialog:ShowAmmunation(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0: //puño americano
		{
			if (CheckMoney(playerid, 25) == 0) return 1;
			if (PlayerWeapon(playerid, 1) == 0) return 1;
			GivePlayerCash(playerid, -25, "compra de puño americano");
			CobroNegocio(id_negocio[playerid], 25);
		}
		case 1: //bate
		{
			if (CheckMoney(playerid, 50) == 0) return 1;
			if (PlayerWeapon(playerid, 5) == 0) return 1;
			GivePlayerCash(playerid, -50, "compra de bate");
			CobroNegocio(id_negocio[playerid], 50);
		}
		case 2: //9mm
		{
			if (CheckMoney(playerid, 5500) == 0) return 1;
			if (PlayerWeapon(playerid, 22) == 0) return 1;
			GivePlayerCash(playerid, -5500, "compra de 9mm");
			CobroNegocio(id_negocio[playerid], 5500);
		}
		case 3: //escopeta
		{
			if (CheckMoney(playerid, 15000) == 0) return 1;
			if (PlayerWeapon(playerid, 25) == 0) return 1;
			GivePlayerCash(playerid, -15000, "compra de escopeta");
			CobroNegocio(id_negocio[playerid], 15000);
		}
		case 4: //rifle de caza
		{
			if (CheckMoney(playerid, 25000) == 0) return 1;
			if (PlayerWeapon(playerid, 33) == 0) return 1;
			GivePlayerCash(playerid, -25000, "compra de rifle de caza");
			CobroNegocio(id_negocio[playerid], 25000);
		}
		case 5: //comprar balas
		{
			Dialog_Show(playerid, BuyBalas, DIALOG_STYLE_TABLIST_HEADERS, "{00AE57}Compra de balas", "Cargador 9mm\t$2500\nCargador Desert Eagle\t$6500\tCargador Rifle\t$10000", "Comprar", "Volver");
		}
	}
	return 1;
}

Dialog:BuyBalas(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_comprar(playerid);
	new gformat[128];
	switch (listitem)
	{
		case 0:
		{
			new costo = 2500;
			if (CheckMoney(playerid, costo) == 0) return 1;

			if (DarObjeto(playerid, 57, 24) == 2) return 1;
			//quita dinero
			GivePlayerCash(playerid, -costo, "compra de balas");
			CobroNegocio(id_negocio[playerid], costo);

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Compraste {00AE57cargador de 9mm{FFFFFF} por {00CC00}$%d{FFFFFF}.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
		case 1:
		{
			new costo = 6500;
			if (CheckMoney(playerid, costo) == 0) return 1;	

			if (DarObjeto(playerid, 58, 14) == 2) return 1;
			//quita dinero
			GivePlayerCash(playerid, -costo, "compra de balas");
			CobroNegocio(id_negocio[playerid], costo);

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Compraste {00AE57cargador de desert eagle{FFFFFF} por {00CC00}$%d{FFFFFF}.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
		case 2:
		{
			new costo = 10000;
			if (CheckMoney(playerid, costo) == 0) return 1;

			if (DarObjeto(playerid, 65, 5) == 2) return 1;
			//quita dinero
			GivePlayerCash(playerid, -costo, "compra de balas");
			CobroNegocio(id_negocio[playerid], costo);

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Compraste {00AE57cargador de rifle{FFFFFF} por {00CC00}$%d{FFFFFF}.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
	}
	//guarda variables
	ActualizarManos(playerid);
	return 1;
}

Dialog:ShowSexShop(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0:
		{
			if (CheckMoney(playerid, 350) == 0) return 1;
			if (PlayerWeapon(playerid, 10) == 0) return 1;
			PlayerPlaySound(playerid, 1052, 0.0, 0.0, 0.0);
			ameuwu(playerid, "compra un dildo morado");
			GivePlayerCash(playerid, -350, "compra de dildo morado");
			CobroNegocio(id_negocio[playerid], 350);
		}
		case 1:
		{
			if (CheckMoney(playerid, 200) == 0) return 1;
			if (PlayerWeapon(playerid, 12) == 0) return 1;
			PlayerPlaySound(playerid, 1052, 0.0, 0.0, 0.0);
			ameuwu(playerid, "compra un consolador");
			GivePlayerCash(playerid, -200, "compra de consolador");
			CobroNegocio(id_negocio[playerid], 200);
		}
	}
	return 1;
}

hide_comprarvehiculo(playerid)
{
	Loop(x, 3, 0)
		TextDrawHideForPlayer(playerid, CocheVS[x]);
	Loop(x, 7, 0)
		PlayerTextDrawHide(playerid, pCocheVS[playerid][x]);
}

Dialog:ShowPescaderia(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0:
		{
			if (Carnada[playerid] > 20) return SendClientMessage(playerid, COLOR_GREY, "{A2DC35}PESCA:{FFFFFF} Ya has comprado 20 carnadas para pescar, gastalas.");
			if (CheckMoney(playerid, 15) == 0) return 1;
			GivePlayerCash(playerid, -15, "compra de lata de carnadas");
			CobroNegocio(id_negocio[playerid], 15);
			SendClientMessage(playerid, COLOR_WHITE, "{A2DC35}[PESCA]:{FFFFFF} Compraste una lata de carnadas. (20)");
			PlayerPlaySound(playerid, 1052, 0.0, 0.0, 0.0);
			Carnada[playerid] += 20;
		}
		case 1:
		{
			if (Lineas[playerid] > 20 ) return SendClientMessage(playerid, COLOR_GREY, "{A2DC35}[PESCA]:{FFFFFF} Ya has comprado 20 lineas para pescar, gastalas.");
			if (CheckMoney(playerid, 30) == 0) return 1;
			GivePlayerCash(playerid, -30, "compra de caña de pesca");
			CobroNegocio(id_negocio[playerid], 30);
			SendClientMessage(playerid, COLOR_WHITE, "{A2DC35}[PESCA]:{FFFFFF} Compraste 10 lineas para la caña de pesca.");
			PlayerPlaySound(playerid, 1052, 0.0, 0.0, 0.0);
			Lineas[playerid] += 10;
		}
	}
	return 1;
}

CMD:crearregalo(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_RED, "No puedes usar este comando mientras estás en un vehículo.");
	new string[170], Float:Position[4];
	if(dynamicgift == 0)
	{
		GetPlayerPos(playerid, Position[0], Position[1], Position[2]);
		GetPlayerFacingAngle(playerid, Position[3]);
		dynamicgift = CreateDynamicObject(19054, Position[0], Position[1], Position[2]-0.4, 0.0, 0.0, Position[3], -1, -1, -1, 200.0);
		dynamicgift3DText = CreateDynamic3DTextLabel("Para recibir tu premio\n{FFFFFF}/regalo",COLOR_YELLOW,Position[0], Position[1], Position[2]+0.25,8.0);
		SetPlayerPos(playerid, Position[0], Position[1], Position[2]+3);
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) pusó un regalo temporal.", InfoCuenta[playerid][jApodo], playerid);
		SendAdminMessage(0xFF6347FF, string);
	}
	else
	{
		if (IsValidDynamicObject(dynamicgift)) DestroyDynamicObject(dynamicgift);
		dynamicgift = 0;
		DestroyDynamic3DTextLabel( Text3D:dynamicgift3DText );
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) eliminó un regalo temporal.", InfoCuenta[playerid][jApodo], playerid);
		SendAdminMessage(0xFF6347FF, string);
	}
	return 1;
}

CMD:regalo(playerid, params[])
{
	new string[128];
	if(IsPlayerInRangeOfPoint(playerid, 3.0,799.3140,-1419.6476,1016.4688) || (playerid, 3.0,2376.4890, 1115.3467, 34.9547))
	{
		if(InfoCuenta[playerid][jVIP] >= 1)
		{
			if(InfoCuenta[playerid][jVIP] < 2) return SendClientMessage(playerid, COLOR_WHITE, "La caja está bloqueada.");
	        if(InfoCuenta[playerid][jRegalo] != 0){
				format(string, sizeof string, "* Necesitas esperar %i hora(s) para abrir de nuevo el regalo.", InfoCuenta[playerid][jRegalo] / 3600);
				return SendClientMessage(playerid, COLOR_WHITE, string);
	        }
			meuwu(playerid, "abre el regalo con los ojos cerrados.");
            InfoCuenta[playerid][jRegalo] = 18000;
			guardar_int_mysql("cuentas", "Regalo", InfoCuenta[playerid][jID], 18000);
			GiftPlayer(playerid);
		}
	}
	else if(dynamicgift != 0)
	{
		new Float:Position[3];
		GetDynamicObjectPos(dynamicgift, Position[0], Position[1], Position[2]);
		if(IsPlayerInRangeOfPoint(playerid, 5.0, Position[0], Position[1], Position[2]))
		{
			if(InfoPersonaje[playerid][pNivel] >= 1)
			{
	        	if(InfoCuenta[playerid][jRegalo] != 0){
					format(string, sizeof string, "* Necesitas esperar %i hora(s) para abrir de nuevo el regalo.", InfoCuenta[playerid][jRegalo] / 3600);
					return SendClientMessage(playerid, COLOR_WHITE, string);
	       	 	}
				meuwu(playerid, "mira el interior del regalo.");
                InfoCuenta[playerid][jRegalo] = 18000;
				guardar_int_mysql("cuentas", "Regalo", InfoCuenta[playerid][jID], 18000);
				return GiftPlayer(playerid);
			}
			else SendClientMessage(playerid, COLOR_WHITE, "{FFFF00}[ERROR]:{FFFFFF} No tienes autorización a usar este comando.");
		}
	}
	return 1;
}

CMD:callsign(playerid, params[])
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo miembros de la ley.");
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "* Debes ser el conductor de un vehículo.");

	new result[32], vehicleid = GetPlayerVehicleID(playerid), string[256];
	new id = verificar_id_vehiculo(vehicleid);

	if (vehiculos_legales(vehicleid) == 0) return SendClientMessage(playerid, COLOR_GREY, "* Sólo se puede usar CallSign en vehículos legales.");
	if (llaves_faccion(playerid, vehicleid) == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes las llaves de este vehículo de facción.");

	if (sscanf(params, "s[32]", result)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /callsign (Texto)");
	if (isnull(result) || strlen(result) > 32) return SendClientMessage(playerid, COLOR_GREY, "El callsign sólo puede contener 32 caracteres.");

	if (!isnull(InfoVehiculo[id][vCallSign])) //quitar
	{
		DestroyDynamic3DTextLabel(InfoVehiculo[id][vOnCallSign]);
		alm(InfoVehiculo[id][vCallSign], "");
		format(string, sizeof string, "** %s %s removió el callsign [%d].", fac_rango[InfoPersonaje[playerid][pMiembro]][InfoPersonaje[playerid][pRango]-1], NombreJugador(playerid), vehicleid);
	}
	else //poner
	{
		alm(InfoVehiculo[id][vCallSign], result);
		DestroyDynamic3DTextLabel(InfoVehiculo[id][vOnCallSign]);
		InfoVehiculo[id][vOnCallSign] = CreateDynamic3DTextLabel(result, 0xEBEBEBFF, -1.0, -2.8, 0.0, 30.0, INVALID_PLAYER_ID, vehicleid);
		format(string, sizeof string, "** %s %s fijó el callsign [%d]: %s", fac_rango[InfoPersonaje[playerid][pMiembro]][InfoPersonaje[playerid][pRango]-1], NombreJugador(playerid), vehicleid, result);
	}
	SendFaccionMessage(InfoPersonaje[playerid][pMiembro], 0x989898FF, string);
	guardar_string_mysql("vehiculos", "CallSign", InfoVehiculo[id][vID_sql], InfoVehiculo[id][vCallSign]);
	return 1;
}

CMD:regalararma(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new sstring[256], playa, gun;
	if (sscanf(params, "dd", playa, gun))
	{
		SendClientMessage(playerid, COLOR_WHITE, "Usa: /regalararma (ID) (ID Arma)");
		SendClientMessage(playerid, COLOR_GREEN, "_____________________________________________________________________________________________________________________________");
		SendClientMessage(playerid, COLOR_WHITE, "1: Brass Knuckles 2: Golf Club 3: Nite Stick 4: Knife 5: Baseball Bat 6: Shovel 7: Pool Cue 8: Katana 9: Chainsaw");
		SendClientMessage(playerid, COLOR_WHITE, "10: Purple Dildo 11: Small White Vibrator 12: Large White Vibrator 13: Silver Vibrator 14: Flores 15: Cane 16: Frag Grenade");
		SendClientMessage(playerid, COLOR_WHITE, "17: Tear Gas 18: Molotov Cocktail 19: Vehicle Missile 20: Hydra Flare 21: Jetpack 22: 9mm 23: Silenced 9mm 24: Desert Eagle");
		SendClientMessage(playerid, COLOR_WHITE, "26: Sawnoff Shotgun 27: Combat Shotgun 28: Micro SMG (Mac 10) 29: SMG (MP5) 30: AK-47 31: M4 32: Tec9 33: Rifle");
		SendClientMessage(playerid, COLOR_WHITE, "25: Shotgun 34: Sniper Rifle 35: Rocket Launcher 36: HS Rocket Launcher 37: Flamethrower 38: Minigun 39: Satchel Charge");
		SendClientMessage(playerid, COLOR_WHITE, "40: Detonator 41: Spraycan 42: Fire Extinguisher 43: Camera 44: Nightvision Goggles 45: Infared Goggles 46: Parachute");
		SendClientMessage(playerid, COLOR_GREEN, "_____________________________________________________________________________________________________________________________");
		return 1;
	}
	if (!IsPlayerConnected(playa)) return SendClientMessage(playerid, -1, "Jugador no conectado.");
	if ((InfoPersonaje[playa][pHorasOn] < 2 ) && gun != 46 && gun != 43) return SendClientMessage(playerid, COLOR_GRAD2, "Ese jugador tiene restricción de armas de momento.");
	if (gun == 21)
	{
		JetPack[playa] = 1;
		SetPlayerSpecialAction(playa, SPECIAL_ACTION_USEJETPACK);
		return 1;
	}
	if (gun < 1||gun > 47) { SendClientMessage(playerid, COLOR_GRAD1, "{FFFF00}[ADM]:{FFFFFF} ID de Arma invalido."); return 1; }
	if (PlayerWeapon(playa, gun) == 0) return 1;
	format(sstring, sizeof sstring, "Administración:{FFFFFF} %s(%d) le dió a %s(%d) [ID Arma: %d]", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playa), playa, gun);
	SendAdminMessage(0xFF6347FF, sstring);
	format(sstring, sizeof sstring, "Has dado a %s [ID Arma: %d]", NombreOriginal(playa), gun);
	SendClientMessage(playerid, COLOR_GRAD1, sstring);
	return 1;
}
CMD:givegun(playerid, params[]) return cmd_regalararma(playerid, params);

CMD:aprender(playerid)
{
    if(!IsPlayerInRangeOfPoint(playerid, 2.0, 1401.1886, 174.4594, 1002.5007)) return SendClientMessage(playerid, COLOR_GENERAL, "[!] {ffffff}No estás en el lugar adecuado para aprender.");
	switch (InfoPersonaje[playerid][pHabilidad][0])
	{
	    case 0:
		{
	    	Dialog_Show(playerid, Show1Aprender, DIALOG_STYLE_TABLIST_HEADERS, "{00AE57} Compra tus conocimientos", "Nivel\tPrecio\n\
			Nivel 1, Lo básico\t10.000$\n\
			Nivel 2, Armas de fuego\t+20.000$\n\
			Nivel 3, Armas Avanzadas\t+30.000$",
			"Comprar", "Cancelar");
		}
	    case 1:
		{
	 		Dialog_Show(playerid, Show2Aprender, DIALOG_STYLE_TABLIST_HEADERS, "{00AE57} Compra tus conocimientos", "Nivel\tPrecio\n\
			Nivel 1, Lo básico\t10.000$\n\
			Nivel 2, Armas de fuego\t+20.000$\n\
			Nivel 3, Armas Avanzadas\t+30.000$",
			"Comprar", "Cancelar");
		}
	    case 2:
		{
	 		Dialog_Show(playerid, Show3Aprender, DIALOG_STYLE_TABLIST_HEADERS, "{00AE57} Compra tus conocimientos", "Nivel\tPrecio\n\
			Nivel 1, Lo básico\t10.000$\n\
			Nivel 2, Armas de fuego\t+20.000$\n\
			Nivel 3, Armas Avanzadas\t+30.000$",
			"Comprar", "Cancelar");
		}
		default:
		{
			SendClientMessage(playerid, COLOR_GENERAL, "[!] {ffffff}¡Felicitaciones! Ya lo sabes todo sobre armas, no puedes aprender más.");
		}
	}
	return 1;
}

Dialog:Show1Aprender(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0:
		{
			if (GetPlayerCash(playerid) >= 10000)
			{
				GivePlayerCash(playerid, -10000, "habilidad de armas (1)");
				SendClientMessage(playerid, COLOR_GENERAL, "[!] {ffffff}¡Felicidades! Has aprendido algo sobre la creación de armas, ahora podrás crear algunas.");
				InfoPersonaje[playerid][pHabilidad][0]++;
				guardar_int_mysql("personajes", "Habilidad1", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pHabilidad][0]);
				return 1;
			}
			SendClientMessage(playerid, COLOR_GENERAL, "[!] {ffffff}Lo sentimos, no tienes el dinero suficiente para pagar el curso (10000$).");
		}
		case 1: SendClientMessage(playerid, COLOR_GENERAL, "[!] {ffffff}Para adquirir los conocimientos de esta clase primero deberás pasar por el primer nivel.");
	   	case 2: SendClientMessage(playerid, COLOR_GENERAL, "[!] {ffffff}Para adquirir los conocimientos de esta clase primero deberás pasar por el segundo nivel.");
	}
	return 1;
}

Dialog:Show2Aprender(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0: SendClientMessage(playerid, COLOR_GENERAL, "[!] {ffffff}Ya aprendiste este nivel, es innecesario gastar dinero en la misma clase.");
		case 1:
		{
			if (GetPlayerCash(playerid) >= 20000)
			{
				GivePlayerCash(playerid, -20000, "habilidad de armas (2)");
				SendClientMessage(playerid, COLOR_GENERAL, "[!] {ffffff}¡Felicidades! Has adquirido más conocimiento y ahora podrás crear más armas.");
				InfoPersonaje[playerid][pHabilidad][0]++;
				guardar_int_mysql("personajes", "Habilidad1", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pHabilidad][0]);
				return 1;
			}
			SendClientMessage(playerid, COLOR_GENERAL, "[!] {ffffff}Lo sentimos, no tienes el dinero suficiente para pagar el curso (20,000$).");
		}
		case 2: SendClientMessage(playerid, COLOR_GENERAL, "[!] {ffffff}Para adquirir los conocimientos de esta clase primero deberás pasar por el segundo nivel.");
	}
	return 1;
}

Dialog:Show3Aprender(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0: SendClientMessage(playerid, COLOR_GENERAL, "[!] {ffffff}Ya aprendiste este nivel, es innecesario gastar dinero en la misma clase.");
		case 1: SendClientMessage(playerid, COLOR_GENERAL, "[!] {ffffff}Ya aprendiste este nivel, es innecesario gastar dinero en la misma clase.");
		case 2:
		{
			if (GetPlayerCash(playerid) >= 30000)
			{
				GivePlayerCash(playerid, -30000, "habilidad de armas (3)");
				SendClientMessage(playerid, COLOR_GENERAL, "[!] {ffffff}¡Felicidades! Has adquirido los máximos conocimientos posibles para crear armamento.");
				InfoPersonaje[playerid][pHabilidad][0]++;
				guardar_int_mysql("personajes", "Habilidad1", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pHabilidad][0]);
				return 1;
			}
			SendClientMessage(playerid, COLOR_GENERAL, "[!] {ffffff}Lo sentimos, no tienes el dinero suficiente para pagar el curso (30,000$).");
		}
	}
	return 1;
}

CMD:creararma(playerid)
{
	if (!IsPlayerInRangeOfPoint(playerid, 3.0,1403.3466,169.7050,1002.5013)) return SendClientMessage(playerid, COLOR_GENERAL, "[!] {ffffff}No estás en el lugar adecuado para crear armas.");
	if (!CheckTimer(60, TimerWeaponCreate[playerid]))
	{
		switch (InfoPersonaje[playerid][pHabilidad][0])
		{
			case 0: SendClientMessage(playerid, COLOR_GENERAL, "[!] {ffffff}No tienes ningún conocimiento para poder crear un arma.");
			case 1: Dialog_Show(playerid, ShowCreateWeapon, DIALOG_STYLE_TABLIST_HEADERS, "{00AE57}Crear un arma", "Arma\tMateriales\n\
				{00AE57}Balas\n\
				{DA81F5}Katana\t150m\n\
				{DA81F5}Bastón\t90m\n\
				{DA81F5}Palo billar\t90m\n\
				{DA81F5}Bate baseball\t90m\n\
				{DA81F5}Pala\t90m\n\
				{F7819F}Pistola 9mm\t700m",
				"Crear", "Cancelar");
			case 2: Dialog_Show(playerid, ShowCreateWeapon, DIALOG_STYLE_TABLIST_HEADERS, "{00AE57}Crear un arma", "Arma\tMateriales\n\
				{00AE57}Balas\n\
				{DA81F5}Katana\t150m\n\
				{DA81F5}Bastón\t90m\n\
				{DA81F5}Palo billar\t90m\n\
				{DA81F5}Bate baseball\t90m\n\
				{DA81F5}Pala\t90m\n\
				{F7819F}Pistola 9mm\t700m\n\
				{F7819F}Pistola silenciada\t780m\n\
				{F7819F}Escopeta\t1740m\n\
				{FE2E64}Desert Eagle\t1300m",
				"Crear", "Cancelar");
			case 3: Dialog_Show(playerid, ShowCreateWeapon, DIALOG_STYLE_TABLIST_HEADERS, "{00AE57}Crear un arma", "Arma\tMateriales\n\
		 		{00AE57}Balas\n\
				{DA81F5}Katana\t150m\n\
				{DA81F5}Bastón\t90m\n\
				{DA81F5}Palo billar\t90m\n\
				{DA81F5}Bate baseball\t90m\n\
				{DA81F5}Pala\t90m\n\
				{F7819F}Pistola 9mm\t700m\n\
				{F7819F}Pistola silenciada\t780m\n\
				{F7819F}Escopeta\t1740m\n\
				{FE2E64}Desert Eagle\t1300m\n\
				{FE2E64}MP5\t1310m\n\
				{FF0040}AK-47\t3980m\n\
				{FF0040}M4A1\t4950m\n\
				{FF0040}Sniper\t6500m\n\
				{FF0040}Tec-9\t1200m",
				"Crear", "Cancelar");
		}
	}
	else
	{
	    new string[190];
		format(string, sizeof string, "Faltan %d segundos para que puedas usar este comando.", CheckTimer(60, TimerWeaponCreate[playerid]));
		SendClientMessage(playerid, 0xb0b0b0ff, string);
	}
	return 1;
}

Dialog:ShowCreateWeapon(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0:
		{			
			Dialog_Show(playerid, CreateMunition, DIALOG_STYLE_TABLIST, "{00AE57}Creación de balas", "Cargador 9mm\t250 materiales\nCargador Desert eagle\t500 materiales\nCargador MP5\t600 materiales\nCargador M4\t800 materiales\nCargador AK47\t800 materiales\nCargador Uzi\t300 materiales\nCargador Tec9\t290 materiales\nCargador Rifle\t750 materiales", "Crear", "Volver");
			return 1;
		}
		case 1:
		{
			if (InfoPersonaje[playerid][pMateriales] < 150) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (PlayerWeapon(playerid, 8) == 0) return 1;
			InfoPersonaje[playerid][pMateriales] -= 150;
			meuwu(playerid, "crea una katana con sus materiales.");
			TimerWeaponCreate[playerid] = gettime();
		}
		case 2:
		{
			if (InfoPersonaje[playerid][pMateriales] < 90) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (PlayerWeapon(playerid, 15) == 0) return 1;
			InfoPersonaje[playerid][pMateriales] -= 90;
			meuwu(playerid, "crea un bastón con sus materiales.");
			TimerWeaponCreate[playerid] = gettime();
		}
		case 3:
		{
			if (InfoPersonaje[playerid][pMateriales] < 90) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (PlayerWeapon(playerid, 7) == 0) return 1;
			InfoPersonaje[playerid][pMateriales] -= 90;
			meuwu(playerid, "crea un palo de billar con sus materiales.");
			TimerWeaponCreate[playerid] = gettime();
		}
		case 4:
		{
			if (InfoPersonaje[playerid][pMateriales] < 90) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (PlayerWeapon(playerid, 5) == 0) return 1;
			InfoPersonaje[playerid][pMateriales] -= 90;
			meuwu(playerid, "crea un bate con sus materiales.");
			TimerWeaponCreate[playerid] = gettime();
		}
		case 5:
		{
			if (InfoPersonaje[playerid][pMateriales] < 90) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (PlayerWeapon(playerid, 6) == 0) return 1;
			InfoPersonaje[playerid][pMateriales] -= 90;
			meuwu(playerid, "crea una Pala con sus materiales.");
			TimerWeaponCreate[playerid] = gettime();
		}
		case 6:
		{
			if (InfoPersonaje[playerid][pMateriales] < 700) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (PlayerWeapon(playerid, 22) == 0) return 1;
			InfoPersonaje[playerid][pMateriales] -= 700;
			meuwu(playerid, "crea una pistola 9mm con sus materiales.");
			TimerWeaponCreate[playerid] = gettime();
		}
		case 7:
		{
			if (InfoPersonaje[playerid][pMateriales] < 780) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (PlayerWeapon(playerid, 23) == 0) return 1;
			InfoPersonaje[playerid][pMateriales] -= 780;
			meuwu(playerid, "crea una pistola con silenciador con sus materiales.");
			TimerWeaponCreate[playerid] = gettime();
		}
		case 8:
		{
			if (InfoPersonaje[playerid][pMateriales] < 1740) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (PlayerWeapon(playerid, 25) == 0) return 1;
			InfoPersonaje[playerid][pMateriales] -= 1740;
			meuwu(playerid, "crea una shotgun con sus materiales.");
			TimerWeaponCreate[playerid] = gettime();
		}
		case 9:
		{
			if (InfoPersonaje[playerid][pMateriales] < 1300) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (PlayerWeapon(playerid, 24) == 0) return 1;
			InfoPersonaje[playerid][pMateriales] -= 1300;
			meuwu(playerid, "crea una Desert Eagle con sus materiales.");
			TimerWeaponCreate[playerid] = gettime();
		}
		case 10:
		{
			if (InfoPersonaje[playerid][pMateriales] < 1310) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (PlayerWeapon(playerid, 29) == 0) return 1;
			InfoPersonaje[playerid][pMateriales] -= 1310;
			meuwu(playerid, "crea una MP5 con sus materiales.");
			TimerWeaponCreate[playerid] = gettime();
		}
		case 11:
		{
			if (InfoPersonaje[playerid][pMateriales] < 3980) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (PlayerWeapon(playerid, 30) == 0) return 1;
			InfoPersonaje[playerid][pMateriales] -= 3980;
			meuwu(playerid, "crea una AK-47 con sus materiales.");
			TimerWeaponCreate[playerid] = gettime();
		}
		case 12:
		{
			if (InfoPersonaje[playerid][pMateriales] < 4950) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (PlayerWeapon(playerid, 31) == 0) return 1;
			InfoPersonaje[playerid][pMateriales] -= 4950;
			meuwu(playerid, "crea una M4A1 con sus materiales.");
			TimerWeaponCreate[playerid] = gettime();
		}
		case 13:
		{
			if (InfoPersonaje[playerid][pMateriales] < 6500) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (PlayerWeapon(playerid, 34) == 0) return 1;
			InfoPersonaje[playerid][pMateriales] -= 6500;
			meuwu(playerid, "crea un sniper rifle con sus materiales.");
			TimerWeaponCreate[playerid] = gettime();
		}
		case 14:
		{
			if (InfoPersonaje[playerid][pMateriales] < 1200) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (PlayerWeapon(playerid, 32) == 0) return 1;
			InfoPersonaje[playerid][pMateriales] -= 1200;
			meuwu(playerid, "crea una tec-nine con sus materiales.");
			TimerWeaponCreate[playerid] = gettime();
		}
	}
	guardar_int_mysql("personajes", "Materiales", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pMateriales]);
	return 1;
}

Dialog:CreateMunition(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_creararma(playerid);
	new costo, gformat[128];
	switch (listitem)
	{
		case 0:
		{
			costo = 250;
			if (InfoPersonaje[playerid][pMateriales] < costo) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (DarObjeto(playerid, 57, 24) == 2) return 1;

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Creaste {00AE57cargador de 9mm{FFFFFF} por {00CC00}%d{FFFFFF} materiales.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
		case 1:
		{
			costo = 500;
			if (InfoPersonaje[playerid][pMateriales] < costo) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (DarObjeto(playerid, 58, 14) == 2) return 1;

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Creaste {00AE57cargador de deagle{FFFFFF} por {00CC00}%d{FFFFFF} materiales.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
		case 2:
		{
			costo = 600;
			if (InfoPersonaje[playerid][pMateriales] < costo) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (DarObjeto(playerid, 61, 50) == 2) return 1;

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Creaste {00AE57cargador de MP5{FFFFFF} por {00CC00}%d{FFFFFF} materiales.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
		case 3:
		{
			costo = 800;
			if (InfoPersonaje[playerid][pMateriales] < costo) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (DarObjeto(playerid, 63, 50) == 2) return 1;

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Creaste {00AE57cargador de M4{FFFFFF} por {00CC00}%d{FFFFFF} materiales.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
		case 4:
		{
			costo = 800;
			if (InfoPersonaje[playerid][pMateriales] < costo) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (DarObjeto(playerid, 62, 50) == 2) return 1;

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Creaste {00AE57cargador de AK47{FFFFFF} por {00CC00}%d{FFFFFF} materiales.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
		case 5:
		{
			costo = 300;
			if (InfoPersonaje[playerid][pMateriales] < costo) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (DarObjeto(playerid, 60, 50) == 2) return 1;

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Creaste {00AE57cargador de Uzi{FFFFFF} por {00CC00}%d{FFFFFF} materiales.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
		case 6:
		{
			costo = 290;
			if (InfoPersonaje[playerid][pMateriales] < costo) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (DarObjeto(playerid, 64, 50) == 2) return 1;

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Creaste {00AE57cargador de Tec9{FFFFFF} por {00CC00}%d{FFFFFF} materiales.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
		case 7:
		{
			costo = 750;
			if (InfoPersonaje[playerid][pMateriales] < costo) return SendClientMessage(playerid, COLOR_GREY, "No tienes suficientes materiales.");
			if (DarObjeto(playerid, 65, 5) == 2) return 1;

			//mensaje de compra uwu
			format(gformat, sizeof gformat, "Creaste {00AE57cargador de rifle{FFFFFF} por {00CC00}%d{FFFFFF} materiales.", costo);
			SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		}
	}
	//saca esto uwu
	InfoPersonaje[playerid][pMateriales] -= costo;
	//guarda variables
	ActualizarManos(playerid);
	//mensaje de creación uwu
	meuwu(playerid, "crea un cargador sus materiales.");
	TimerWeaponCreate[playerid] = gettime();
	guardar_int_mysql("personajes", "Materiales", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pMateriales]);
	return 1;
}

CMD:cancelar(playerid, params[])
{
	new string[128], choice[32];
	if(sscanf(params, "s[32]", choice))
	{
		SendClientMessage(playerid, COLOR_GREEN, "|__________________ Cancelar __________________|");
		SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /cancelar (Nombre)");
		SendClientMessage(playerid, COLOR_GREY, "materiales - arma - divorcio - testigo - vip");
		SendClientMessage(playerid, COLOR_GREY, "multa - coche - mecanico - droga - casa - coinsvip");
		return 1;
	}
 	else if(strcmp(choice,"materiales",true) == 0) { MatsOffer[playerid] = 999; MatsPrice[playerid] = 0; MatsAmount[playerid] = 0; }
	else if(strcmp(choice,"arma",true) == 0)
	{
	    if (GunCliente[playerid] == -1) return SendClientMessage(playerid, -1, "Nadie te ha ofrecido un arma.");
		if (IsPlayerConnected(GunCliente[playerid]))
		{
			GunVendedor[GunCliente[playerid]] = -1;
			SendClientMessage(GunCliente[playerid], -1, "Cancelaron la compra.");
		}
		GunCliente[playerid] = -1;
		GunObjeto[playerid] = 0;
		GunCantidad[playerid] = 0;
		GunPrecio[playerid] = 0;
		SendClientMessage(playerid, -1, "Cancelaste la compra.");
	}
	else if(strcmp(choice,"coche",true) == 0) { Pla_vehicle[playerid] = 999; Price_vehicle[playerid] = 0; Osql_vehicle[playerid] = 0; }
	else if(strcmp(choice,"casa",true) == 0) { HouseOffer[playerid] = 999; HousePrice[playerid] = 0; House[playerid] = 0; }
	else if(strcmp(choice,"coinsvip",true) == 0) { FOffer[playerid] = 999; FPrice[playerid] = 0; FAmount[playerid] = 0; }
    else if(strcmp(choice,"vip",true) == 0){ VIPOffer[playerid] = 999; VIPPrice[playerid] = 0; }
	else if(strcmp(choice,"multa",true) == 0)
	{
	    if(TicketOffer[playerid] == 999) return SendClientMessage(playerid, COLOR_WHITE, "Nadie te multado.");
	    format(string, sizeof string, " %s se niega a pagar una multa", NombreJugador(playerid));
	    ProxDetector(30.0,playerid, string, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE);
	    format(string, sizeof string, "* %s canceló el pago de una multa de %d$.", NombreJugador(playerid), TicketMoney[playerid]);
	    SendClientMessage(TicketOffer[playerid], -1, string);
	    TicketOffer[playerid] = 999;
	    TicketMoney[playerid] = 0;
	    Facturing[playerid] = 0;
	}
	else if(strcmp(choice,"licencia",true) == 0)
	{
	    if(NombreLicencia[playerid] == 999) return SendClientMessage(playerid, COLOR_WHITE, "Nadie te ha ofrecido una licencia de armas.");
	    format(string, sizeof string, " %s se niega a pagar la licencia de armas.", NombreJugador(playerid));
	    ProxDetector(30.0,playerid, string, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE);
	    format(string, sizeof string, "* %s canceló el pago de la licencia por %d dólares.", NombreJugador(playerid), PrecioLicencia[playerid]);
	    SendClientMessage(NombreLicencia[playerid], -1, string);  // Mensaje al policia.
	    NombreLicencia[playerid] = 999;
	    PrecioLicencia[playerid] = 0;
	    Facturing[playerid] = 0;
	}
	else { return 1; }
	format(string, sizeof string, "* Cancelaste: %s.", choice);
	SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	return 1;
}

CMD:habilidad(playerid)
{
	new habilidad[248], habilidad2[2056];
	strcat(habilidad2, "Habilidad\tNivel\tProgreso\n");
	//vendedor de armas
	format(habilidad, sizeof habilidad, "{FB2828}Armas\t{EBEBEB}%s\t{74D805}%s\n", GetHabilidadArmas(playerid, 0), GetHabilidadArmas(playerid, 1));
	strcat(habilidad2, habilidad);
	//pescador
	format(habilidad, sizeof habilidad, "{0093D9}Pesca\t{EBEBEB}%s\t{74D805}%s\n", GetHabilidadPesca(playerid, 0), GetHabilidadPesca(playerid, 1));
	strcat(habilidad2, habilidad);
	//repartidor
	format(habilidad, sizeof habilidad, "{DE9203}Repartos\t{EBEBEB}%s\t{74D805}%s\n", GetHabilidadReparto(playerid, 0), GetHabilidadReparto(playerid, 1));
	strcat(habilidad2, habilidad);
	//leñador
	format(habilidad, sizeof habilidad, "{DE9203}Leñador\t{EBEBEB}%s\t{74D805}%s\n", GetHabilidadLena(playerid, 0), GetHabilidadLena(playerid, 1));
	strcat(habilidad2, habilidad);
	//delincuente
	format(habilidad, sizeof habilidad, "{DE9203}Delincuente\t{EBEBEB}%s\t{74D805}%s\n", GetHabilidadDelincuente(playerid, 0), GetHabilidadDelincuente(playerid, 1));
	strcat(habilidad2, habilidad);
	//
	Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_TABLIST_HEADERS, "Habilidades", habilidad2, "Cerrar", "");
	return 1;
}
CMD:skills(playerid) return cmd_habilidad(playerid);
CMD:habilidades(playerid) return cmd_habilidad(playerid);

/*
[2] //disponible
[3] //disponible
*/

NivelHabilidad(playerid, type)
{
	new nivel_actual = 0;
	switch (type)
	{
		case 0: //armas
		{
		    nivel_actual = InfoPersonaje[playerid][pHabilidad][0];
		}
		case 1: //repartos
		{
			switch (InfoPersonaje[playerid][pHabilidad][1])
			{
				case 0..50: nivel_actual = 1;
				case 51..100: nivel_actual = 2;
				case 101..150: nivel_actual = 3;
				case 151..250: nivel_actual = 4;
				default: nivel_actual = 5;
			}
		}
		case 2: //leñador
		{
			switch (InfoPersonaje[playerid][pHabilidad][2])
			{
				case 0..50: nivel_actual = 1;
				case 51..100: nivel_actual = 2;
				case 101..200: nivel_actual = 3;
				case 201..400: nivel_actual = 4;
				default: nivel_actual = 5;
			}
		}
		case 3: //delincuente
		{
			switch (InfoPersonaje[playerid][pHabilidad][3])
			{
				case 0..50: nivel_actual = 1;
				case 51..100: nivel_actual = 2;
				case 101..200: nivel_actual = 3;
				case 201..400: nivel_actual = 4;
				default: nivel_actual = 5;
			}
		}
		case 4: //pesca
		{
			switch (InfoPersonaje[playerid][pHabilidad][4])
			{
				case 0..50: nivel_actual = 1;
				case 51..100: nivel_actual = 2;
				case 101..200: nivel_actual = 3;
				case 201..400: nivel_actual = 4;
				default: nivel_actual = 5;
			}
		}
	}
	return nivel_actual;
}

GetHabilidadArmas(playerid, type)
{
	new status[32];
	if (type == 0)
	{
		switch (InfoPersonaje[playerid][pHabilidad][0])
		{
			case 0: alm(status, "ninguno");
			case 1: alm(status, "básico");
			case 2: alm(status, "armas de fuego");
			case 3: alm(status, "armas avanzadas");
		}
	}
	else
	{
		if (InfoPersonaje[playerid][pHabilidad][0] == 3) alm(status, "máximo");
		else format(status, sizeof status, "%d/3", InfoPersonaje[playerid][pHabilidad][0]);
	}
	return status;
}

GetHabilidadPesca(playerid, type)
{
	new status[32];
	if (type == 0)
	{
		switch (InfoPersonaje[playerid][pHabilidad][4])
		{
			case 0..50: alm(status, "básico");
			case 51..100: alm(status, "miembro");
			case 101..200: alm(status, "avanzado");
			case 201..400: alm(status, "competidor");
			default: alm(status, "maestro");
		}
	}
	else
	{
		if (InfoPersonaje[playerid][pHabilidad][4] >= 400) alm(status, "máximo");
		else format(status, sizeof status, "%d/400", InfoPersonaje[playerid][pHabilidad][4]);
	}
	return status;
}

GetHabilidadLena(playerid, type)
{
	new status[32];
	if (type == 0)
	{
		switch (InfoPersonaje[playerid][pHabilidad][2])
		{
			case 0..50: alm(status, "básico");
			case 51..100: alm(status, "miembro");
			case 101..200: alm(status, "avanzado");
			case 201..400: alm(status, "competidor");
			default: alm(status, "maestro");
		}
	}
	else
	{
		if (InfoPersonaje[playerid][pHabilidad][2] >= 400) alm(status, "máximo");
		else format(status, sizeof status, "%d/400", InfoPersonaje[playerid][pHabilidad][2]);
	}
	return status;
}

GetHabilidadDelincuente(playerid, type)
{
	new status[32];
	if (type == 0)
	{
		switch (InfoPersonaje[playerid][pHabilidad][3])
		{
			case 0..15: alm(status, "básico");
			case 16..35: alm(status, "miembro");
			case 36..75: alm(status, "avanzado");
			case 76..100: alm(status, "competidor");
			default: alm(status, "maestro");
		}
	}
	else
	{
		if (InfoPersonaje[playerid][pHabilidad][3] >= 100) alm(status, "máximo");
		else format(status, sizeof status, "%d/100", InfoPersonaje[playerid][pHabilidad][3]);
	}
	return status;
}

GetHabilidadReparto(playerid, type)
{
	new status[32];
	if (type == 0)
	{
		switch (InfoPersonaje[playerid][pHabilidad][1])
		{
			case 0..50: alm(status, "básico");
			case 51..100: alm(status, "miembro");
			case 101..150: alm(status, "avanzado");
			case 151..250: alm(status, "competidor");
			default: alm(status, "maestro");
		}
	}
	else
	{
		if (InfoPersonaje[playerid][pHabilidad][1] >= 300) alm(status, "máximo");
		else format(status, sizeof status, "%d/300", InfoPersonaje[playerid][pHabilidad][1]);
	}
	return status;
}


CMD:teamspeak(playerid, params[])
{
	return cmd_ts3(playerid, params);
}
CMD:informacion(playerid, params[])
{
	SendClientMessage(playerid, COLOR_WHITE, "El Sistema de Información no está habilitado todavía." );
}
CMD:teamspeak3(playerid, params[])
{
	return cmd_ts3(playerid, params);
}

CMD:ts(playerid, params[])
{
	return cmd_ts3(playerid, params);
}
CMD:ts3(playerid, params[])
{
    SendClientMessage(playerid, COLOR_WHITE, "{A2DC35}[TS3]:{FFFFFF}IP: ts3.Insanityroleplay.eu:27115" );
    return 1;
}

CMD:pesca(playerid)
{
	SendClientMessage(playerid, COLOR_GREY, "[Sistema de pesca]: /liberarpez - /venderpez - /pescar.");
	return 1;
}

CMD:discord(playerid)
{
	SendClientMessage(playerid, COLOR_GENERAL, "FORO:{FFFFFF} discord.gg/4zWvyxnYMJ");
	return 1;
}

CMD:foro(playerid)
{
	SendClientMessage(playerid, COLOR_GENERAL, "FORO:{FFFFFF} www.insanityrp.ga");
	return 1;	
}

CMD:pendejo(playerid)
{
	SendClientMessage(playerid, COLOR_WHITE, "Usted quiso decir {00AE57}Pablo Prieto{FFFFFF}.");
	return 1;
}

CMD:homosexual(playerid)
{
	SendClientMessage(playerid, COLOR_WHITE, "Usted quiso decir {00AE57}Andres Kozlov{FFFFFF}.");
	return 1;
}
CMD:gay(playerid) return cmd_homosexual(playerid);

CMD:artic(playerid)
{
	if (yalorecibieron == 1) return SendClientMessage(playerid, COLOR_WHITE, "llegaste tarde campeón");
	SendClientMessage(playerid, COLOR_WHITE, "Wacho la hiciste, tqm. Toma un regalo uwu");
	GivePlayerCash(playerid, 5000, "artic");
	yalorecibieron = 1;
	return 1;
}

CMD:puente(playerid)
{
	if (InfoPersonaje[playerid][pHorasOn] < 2) return SendClientMessage(playerid, COLOR_GRAD2, "{FFFF00}[ERROR]:{FFFFFF} No tienes la experiencia necesaria para hacer esto. Necesitas más tiempo de juego.");
	if (member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GRAD2, "¡Los policias no pueden realizar puentes a los vehículos!");
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GRAD2, "¡Tienes que ser el conductor de un vehículo!");
	if (InfoPersonaje[playerid][pGanzuas] == 0) return SendClientMessage(playerid, COLOR_WHITE, "¡Primero necesitas una ganzúa para hacer el puente!");
	if (IntentarPuente[playerid] == 1) return SendClientMessage(playerid, COLOR_GRAD2, "¡Espera 30 segundos para volver a utilizar este comando!");
	if (PlazaAyuntamiento(playerid))  return SendClientMessage(playerid, COLOR_GREY, "¡No puedes robar vehículos aquí, estás en una zona muy transitada!");
	new engine, lights, alarm, doors, bonnet, boot, objective, vehicleid = GetPlayerVehicleID(playerid), string[245];
	if (vehiculos_legales(vehicleid) != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes usar /puente en vehículos de facciones legales o de trabajos.");
	GetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);
	if ((engine == VEHICLE_PARAMS_OFF || engine == VEHICLE_PARAMS_UNSET))
	{
		format(string, sizeof string, "cruza los cables e intenta encender el motor del %s con unas ganzúas.", GetVehicleName(vehicleid));
		meuwu(playerid, string);
		new arranque = random(3)+1;
		if (arranque == 1 || arranque == 3)
		{
			format(string, sizeof string, "* %s intentó arrancar el vehículo y lo logró.", NombreJugador(playerid));
			ProxDetector(15.0, playerid, string, COLOR_GREEN,COLOR_GREEN,COLOR_GREEN,COLOR_GREEN,COLOR_GREEN);
			SetTimerEx("SetVehicleEngine", 2000, 0, "dd",  vehicleid, playerid); // Se ejecuta el arranque del coche.
			GameTextForPlayer(playerid, "~w~Realizando puente...",2500,3);
			SetVehicleParamsEx(vehicleid, 0, lights, alarm, doors, bonnet, boot, objective );
			InfoPersonaje[playerid][pGanzuas] -= 1;
			guardar_int_mysql("personajes", "Ganzuas", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pGanzuas]);
			IntentarPuente[playerid] = 1;
			new Float:cx,Float:cy,Float:cz;
			GetPlayerPos(playerid, cx, cy, cz);
			new zone[MAX_ZONE_NAME];
			GetPlayer3DZone(playerid, zone, sizeof zone);
			Loop(playerid2, MAX_PLAYERS, 0) if (IsPlayerConnectedEx(playerid2) && member_faccion(playerid2, 1, 2, 4))
			{
				format(string, sizeof string, "CENTRAL: Se ha encendido la alarma de un %s en %s.", GetVehicleName(vehicleid), zone);
				SendSplitMessage(playerid2, COLOR_RADIO, string);
			}
			SetTimerEx("IntentarPuenteTimer", 30000, false, "i", playerid);
		}
		else
		{
			format(string, sizeof string, "* %s intentó arrancar el vehículo, pero falló.", NombreJugador(playerid));
			ProxDetector(3.0, playerid, string, 0xB90000FF,0xB90000FF,0xB90000FF,0xB90000FF,0xB90000FF);
			GameTextForPlayer(playerid, "~w~Realizando puente...",2500,3);
			InfoPersonaje[playerid][pGanzuas] -= 1;
			guardar_int_mysql("personajes", "Ganzuas", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pGanzuas]);
			IntentarPuente[playerid] = 1;
			format(string, sizeof string, "[INFO]: {FFFFFF}No has podido puntear el vehículo, te quedan %d ganzúas.", InfoPersonaje[playerid][pGanzuas]);
			SendClientMessage(playerid, COLOR_GREEN, string);
			SetTimerEx("IntentarPuenteTimer", 30000, false, "i", playerid);
		}
		return 1;
	}
	SendClientMessage(playerid, COLOR_GRAD2, "[ERROR] No puedes usar el comando con el motor encendido.");
	return 1;
}

CMD:motor(playerid) // 19-02-2020
{
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return 1;
	new engine, lights, alarm, doors, bonnet, boot, objective, vehicleid = GetPlayerVehicleID(playerid), string[180];
	GetVehicleParamsEx(vehicleid,engine,lights,alarm,doors,bonnet,boot,objective);
	if (EstaEnBicis(vehicleid))
	{
		if ((engine == VEHICLE_PARAMS_OFF || engine == VEHICLE_PARAMS_UNSET)) { SetVehicleParamsEx(vehicleid, VEHICLE_PARAMS_ON, lights, alarm, doors, bonnet, boot, objective); }
		SendClientMessage(playerid, COLOR_WHITE, "Las bicicletas no tienen motor tonto XDXD1!!1");
		return 1;
	}
	if (engine == VEHICLE_PARAMS_ON)
	{
		format(string, sizeof string, "apaga el motor de su %s.", GetVehicleName(vehicleid));
		meuwu(playerid, string);
		SetVehicleParamsEx(vehicleid,VEHICLE_PARAMS_OFF, lights, alarm, doors, bonnet, boot, objective);
		arr_Engine{vehicleid} = 0;
	}
	else if ((engine == VEHICLE_PARAMS_OFF || engine == VEHICLE_PARAMS_UNSET))
	{
		//dinámicos
		Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] == vehicleid)
		{
		    if (InfoVehiculo[id][vNegocio] != 0)
		    {
				if (llaves_negocio(playerid, vehicleid) == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes las llaves de este vehículo de negocio o empresa.");
				GameTextForPlayer(playerid,"~g~encendiendo...",2500,3);
				SetTimerEx("SetVehicleEngine", 1000, 0, "dd",  vehicleid, playerid);
		    }
		    else
			{
				switch (InfoVehiculo[id][vTipo])
				{
					case 1..50: //facciones
					{
						if (llaves_faccion(playerid, vehicleid) == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes las llaves de este vehículo de facción.");
						GameTextForPlayer(playerid,"~g~encendiendo...",2500,3);
						SetTimerEx("SetVehicleEngine", 1000, 0, "dd",  vehicleid, playerid);
					}
					case 200: //vip
					{
						if (llaves_vip(playerid, vehicleid) == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes las llaves de este vehículo VIP.");
						GameTextForPlayer(playerid,"~g~encendiendo...",2500,3);
						SetTimerEx("SetVehicleEngine", 1000, 0, "dd",  vehicleid, playerid);
					}
					case 600: //rentable
					{
						if (llaves_renta(playerid, vehicleid) == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes las llaves de este vehículo rentable.");
						GameTextForPlayer(playerid,"~g~encendiendo...",2500,3);
						SetTimerEx("SetVehicleEngine", 1000, 0, "dd",  vehicleid, playerid);
					}
					default: //usuarios
					{
						if (InfoVehiculo[id][vEmbargo] != 0) return SendClientMessage(playerid, COLOR_GREY, "Este vehículo se encuentra embargado.");
						if (InfoVehiculo[id][vLlavePrestada] == playerid)
						{
							GameTextForPlayer(playerid,"~g~encendiendo...",2500,3);
							SetTimerEx("SetVehicleEngine", 1500, 0, "dd",  vehicleid, playerid);
							return 1;
						}
						if (llaves_vehiculo(playerid, vehicleid) == -1) return SendClientMessage(playerid, COLOR_GREY, "No tienes las llaves de este vehículo.");
						GameTextForPlayer(playerid,"~g~encendiendo...",2500,3);
						SetTimerEx("SetVehicleEngine", 1500, 0, "dd",  vehicleid, playerid);
					}
				}
			}
		}
		//fábrica
		if (EsVehFabrica(vehicleid))
		{
			new id = EsVehFabrica(vehicleid);
			if (PermisosContrato(playerid, id) != 0)
			{
				GameTextForPlayer(playerid,"~g~encendiendo...",2500,3);
				SetTimerEx("SetVehicleEngine", 1500, 0, "dd",  vehicleid, playerid);
			}
			else
			{
				SendClientMessage(playerid, COLOR_GREY, "No tienes las llaves de este vehículo de fábrica.");
			}
		}
	}
	return 1;
}

CMD:luces(playerid)
{
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return 1;
	new vehicleid = GetPlayerVehicleID(playerid);
	if (EstaEnBicis(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "Este vehículo no tiene luces.");
	SetVehicleLights(vehicleid, playerid);
	PlayerPlaySound(playerid, 1145, 0.0, 0.0, 0.0);
	return 1;
}

CMD:capo(playerid)
{
	if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
	{
		new vehicleid = GetPlayerVehicleID(playerid);
		if (EstaEnBicis(vehicleid) || IsAPlane(vehicleid) || IsABike(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "Este vehículo no tiene capo.");
 		SetVehicleHood(vehicleid, playerid);
	}
	else
	{
		new vehicleid = GetClosestCar(playerid);
		if (IsPlayerInRangeOfVehicle(playerid, vehicleid, 5.0))
		{
			if (EstaEnBicis(vehicleid) || IsAPlane(vehicleid) || IsABike(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "Este vehículo no tiene capo.");
			SetVehicleHood(vehicleid, playerid);
		}
	}
	return 1;
}

CMD:maletero(playerid)
{
	new vehicleid = -1;
	if (IsPlayerInAnyVehicle(playerid) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
	{
		vehicleid = GetPlayerVehicleID(playerid);
	}
	else if (!IsPlayerInAnyVehicle(playerid))
	{
		new closestcar = GetClosestCar(playerid);
		if (IsPlayerInRangeOfVehicle(playerid, closestcar, 5.0))
		{
			vehicleid = closestcar;
		}
	}
	if (vehicleid == -1) return SendClientMessage(playerid, COLOR_GREY, "* No se ha detectado ningún vehículo cerca.");
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] == vehicleid)
	{
		if (EstaEnBicis(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "Este vehículo no tiene maletero.");
		new access = 0;
		if (InfoVehiculo[id][vNegocio] != 0)
		{
			if (llaves_negocio(playerid, vehicleid) != 0) access = 1;
		}
		else
		{
			switch (InfoVehiculo[id][vTipo])
			{
				case 1..50: //facciones
				{
					if (llaves_faccion(playerid, vehicleid) != 0) access = 1;
				}
				case 200: //vip
				{
					if (llaves_vip(playerid, vehicleid) != 0) access = 1;
				}
				case 600: //rentable
				{
					if (llaves_renta(playerid, vehicleid) != 0) access = 1;
				}
				default: //usuarios
				{
					if (InfoVehiculo[id][vLlavePrestada] == playerid) access = 1;
					if (llaves_vehiculo(playerid, vehicleid) != -1) access = 1;
				}
			}
		}
		if (access == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes las llaves de este vehículo o no hay permisos para abrirlo.");
		new engine, lights, alarm, doors, bonnet, boot, objective;
		GetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);
		if (InfoVehiculo[id][vMaleteroOn] != 0)
		{
			InfoVehiculo[id][vMaleteroOn] = 0;
			SetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, VEHICLE_PARAMS_OFF, objective);
			SendClientMessage(playerid, COLOR_LIGHTRED, "Maletero del vehiculo fue cerrado.");
		}
		else
		{
			InfoVehiculo[id][vMaleteroOn] = 1;
			SetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, VEHICLE_PARAMS_ON, objective);
			SendClientMessage(playerid, COLOR_LIGHTGREEN, "Maletero del vehiculo fue abierto.");
		}
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Debes estar cerca del maletero de un vehículo dinámico.");
	return 1;
}

CMD:vestado(playerid)
{
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return 1;
	new vehicleid = GetPlayerVehicleID(playerid);
	new engine, lights, alarm, doors, bonnet, boot, objective, enginestatus[15], lightstatus[15], string[128];
	GetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);
	if (EstaEnBicis(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "Este vehiculo no necesita gasolina.");
	if (engine != VEHICLE_PARAMS_ON) format(enginestatus, sizeof(enginestatus), "Apagado");
	else format(enginestatus, sizeof(enginestatus), "Prendido");
	if (lights != VEHICLE_PARAMS_ON) format(lightstatus, sizeof(lightstatus), "Apagadas");
	else format(lightstatus, sizeof(lightstatus), "Prendidas");
	format(string, sizeof string, "Motor: %s | Luces: %s | Gasolina: %d",enginestatus,lightstatus,veh_gasolina[vehicleid]);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:v(playerid, params[])
{
	if (isnull(params))
	{
		SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /v (opción)");
		SendClientMessage(playerid, COLOR_WHITE, "Opciones: estado, luces, maletero, capo");
		return 1;
	}
	if (strcmp(params, "luces", true) == 0) cmd_luces(playerid);
	else if (strcmp(params, "capo", true) == 0) cmd_capo(playerid);
	else if (strcmp(params, "maletero", true) == 0) cmd_maletero(playerid);
	else if (strcmp(params, "estado", true) == 0) cmd_vestado(playerid);
	return 1;
}

CMD:llenar(playerid, params[])
{
    if(IsPlayerInAnyVehicle(playerid) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
	{
	    new vehicleid = GetPlayerVehicleID(playerid);
	    new engine,lights,alarm,doors,bonnet,boot,objective;
    	GetVehicleParamsEx(vehicleid,engine,lights,alarm,doors,bonnet,boot,objective);
	    if(engine == VEHICLE_PARAMS_ON) return SendClientMessage(playerid, COLOR_WHITE, "Es necesario apagar el motor antes de llenar el tanque ({5ABAFF}pulsa [N]{FFFFFF}).");
	    if(!IsAtGasStation(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "{FFFF00}[ERROR]:{FFFFFF} No estás en la gasolineria.");
	    if(GetVehicleModel(vehicleid) == 481 || GetVehicleModel(vehicleid) == 509 || GetVehicleModel(vehicleid) == 510) return SendClientMessage(playerid,COLOR_RED,"Este vehiculo no necesita gasolina.");
	    if(veh_gasolina[vehicleid] >= 200) return SendClientMessage(playerid, COLOR_RED, "El tanque de gasolina de este vehiculo está lleno.");
	    if(RefuelingVehicle[playerid] == 1) return SendClientMessage(playerid, COLOR_RED, "Se está recargando el tanque de tu vehículo.");
       	SendClientMessage(playerid, COLOR_WHITE, "Recargando tanque de tu vehiculo, no bajes del vehiculo y por favor espera.");
       	RefuelingVehicle[playerid] = 1;
       	RefuelingVehicleTimer[playerid] = SetTimerEx("ReFill", 1000, true, "i", playerid);
	}
	return 1;
}

CMD:amotor(playerid)
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "Debes estar dentro de un vehículo como conductor.");
	new engine,lights, alarm, doors, bonnet, boot, objective, vehicleid = GetPlayerVehicleID(playerid);
	if (GetVehicleModel(vehicleid) == 481 || GetVehicleModel(vehicleid) == 509 || GetVehicleModel(vehicleid) == 510) return SendClientMessage(playerid,COLOR_WHITE,"{FFFF00}[ERROR]:{FFFFFF} No puedes usar este comando si estás en este tipo de vehiculos.");
	GetVehicleParamsEx(vehicleid,engine,lights,alarm,doors,bonnet,boot,objective);
	if (engine == VEHICLE_PARAMS_ON)
	{
		SendClientMessage(playerid, COLOR_RED, "[ADM] El motor del vehículo ha sido apagado correctamente.");
		SetVehicleEngine(vehicleid, playerid);
	}
	else if ((engine == VEHICLE_PARAMS_OFF || engine == VEHICLE_PARAMS_UNSET))
	{
		SendClientMessage(playerid, COLOR_RED, "[ADM] El motor del vehículo ha sido encendido correctamente.");
		SetVehicleEngine(vehicleid, playerid);
	}
	return 1;
}

CMD:darauto(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
 	new string[170], playerid2, modelid, color1, color2;
	if (sscanf(params, "dddd", playerid2, modelid, color1, color2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /darauto (PlayerID) (ModeloID) (Color1) (Color2)");
	if (color1 < 0 || color1 > 250) { SendClientMessage(playerid, COLOR_GREY, "El color 1 no puede super el ID 250."); return 1; }
	if (color2 < 0 || color2 > 250) { SendClientMessage(playerid, COLOR_GREY, "El color 2 no puede super el ID 250."); return 1; }
	if (modelid < 400 || modelid > 611) { SendClientMessage(playerid, COLOR_GREY, "Modelo inválido, intenta entre 400 y 611."); return 1; }
 	new carsamount = VehicleCount(playerid);
	if (carsamount >= 12) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador no puede tener más de 12 vehículos.");
	new Float: X, Float: Y, Float: Z, Float: Angle;
    GetPlayerPos(playerid2,X,Y,Z);
    GetPlayerFacingAngle(playerid2,Angle);
  	crear_vehiculo(playerid2, modelid, X, Y, Z, Angle, GetPlayerInterior(playerid2), GetPlayerVirtualWorld(playerid2), color1, color2, 0, 5, 0, -1);
	format(string, sizeof string, "%s creó [M-%d C1-%d C2-%d] a %s", NombreDeCuenta(playerid), modelid, color1, color2, NombreDeCuenta(playerid2));
	SendClientMessage(playerid, 0xA2DC35FF, string);
	Log("LOGS/shoplog.log", string);
	return 1;
}
CMD:shopveh(playerid, params[]) return cmd_darauto(playerid, params);
CMD:crearauto(playerid, params[]) return cmd_darauto(playerid, params);

new actual_vehModel[MAX_PLAYERS];
new actual_vehColor1[MAX_PLAYERS];
new actual_vehColor2[MAX_PLAYERS];

CMD:borrarvehiculo(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new vehicleid, string[160];
	if (sscanf(params, "d", vehicleid)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /borrarfvehiculo (VehiculoID) [para saber ID exacta acercate al vehículo con /dl]");
	Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] == vehicleid)
	{
		if (InfoVehiculo[v][vTipo] == 0 && InfoVehiculo[v][vNegocio] == 0) return SendClientMessage(playerid, COLOR_GREY, "No puedes borrar vehículos de usuarios.");
		format(string, sizeof string, "Borraste %s de %s.", GetNameVehicle(InfoVehiculo[v][vModelo]), InfoVehiculo[v][vPropietario]);
		SendClientMessage(playerid, COLOR_YELLOW, string);
		borrar_vehiculo(v);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Ese vehículo no está spawneado o no existe.");
	return 1;
}

CMD:crearvehiculo(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new modelid, color1, color2;
	if (sscanf(params, "ddd", modelid, color1, color2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /crearvehiculo (ModeloID) (Color1) (Color2)");
	if (color1 < 0 || color1 > 250) { SendClientMessage(playerid, COLOR_GREY, "El color 1 no puede super el ID 250."); return 1; }
	if (color2 < 0 || color2 > 250) { SendClientMessage(playerid, COLOR_GREY, "El color 2 no puede super el ID 250."); return 1; }
	if (modelid < 400 || modelid > 611) { SendClientMessage(playerid, COLOR_GREY, "Modelo inválido, intenta entre 400 y 611."); return 1; }
	Dialog_Show(playerid, ShowCreateVehicle, DIALOG_STYLE_LIST, "Elige donde crear el vehículo", "Facción\nVIP\nRenta\nNegocio/Empresa", "Continuar", "Salir");
	actual_vehModel[playerid] = modelid;
	actual_vehColor1[playerid] = color1;
	actual_vehColor2[playerid] = color2;
	return 1;
}

Dialog:ShowCreateVehicle(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new gformat[250], modelid = actual_vehModel[playerid], color1 = actual_vehColor1[playerid], color2 = actual_vehColor2[playerid];
	switch (listitem)
	{
		case 0: //facciones
		{
			new gformat3[320], dialog[2048] = "#ID\tNombre\n", count = 0;
			Loop(id, totalfacciones, 1) if (InfoFaccion[id][fTipo] != 0)
			{
				format(gformat3, sizeof gformat3, "{EBEBEB}%d\t%s\n", id, InfoFaccion[id][fNombre]);
				strcat(dialog, gformat3);
				//conteo
				new gformat2[64];
				format(gformat2, sizeof gformat2, "VehIDcreate%d", count);
				SetPVarInt(playerid, gformat2, id);
				count++;
			}
			Dialog_Show(playerid, ShowCreateFacVehicle, DIALOG_STYLE_TABLIST_HEADERS, "Facciones", dialog, "Continuar", "Salir");
		}
		case 1: //vip
		{
			new Float: X, Float: Y, Float: Z, Float: Angle;
			GetPlayerPos(playerid, X, Y, Z);
			GetPlayerFacingAngle(playerid, Angle);
			crear_vehiculo(-1, modelid, X, Y, Z, Angle, GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid), color1, color2, 0, 10, 200, -1);
			format(gformat, sizeof gformat, "Creaste un %s (%d) (Color1: %d) (Color2: %d) para los usuarios VIP, recuerda /estacionar.", GetNameVehicle(modelid), modelid, color1, color2);
			SendClientMessage(playerid, 0xA2DC35FF, gformat);
			format(gformat, sizeof gformat, "[VIP] %d creó un %s (%d) (Color1: %d) (Color2: %d)", NombreDeCuenta(playerid), GetNameVehicle(modelid), modelid, color1, color2);
			Log("LOGS/CrearVehiculo.log", gformat);
		}
		case 2: //renta
		{
			new Float: X, Float: Y, Float: Z, Float: Angle;
			GetPlayerPos(playerid, X, Y, Z);
			GetPlayerFacingAngle(playerid, Angle);
			crear_vehiculo(-1, modelid, X, Y, Z, Angle, GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid), color1, color2, 0, 6, 600, -1);
			format(gformat, sizeof gformat, "Creaste un %s (%d) (Color1: %d) (Color2: %d) para rentar, recuerda /estacionar.", GetNameVehicle(modelid), modelid, color1, color2);
			SendClientMessage(playerid, 0xA2DC35FF, gformat);
			format(gformat, sizeof gformat, "[RENTA] %d creó un %s (%d) (Color1: %d) (Color2: %d)", NombreDeCuenta(playerid), GetNameVehicle(modelid), modelid, color1, color2);
			Log("LOGS/CrearVehiculo.log", gformat);
		}
		case 3: //negocio/empresa
		{
			Dialog_Show(playerid, ShowCreateNegVehicle, DIALOG_STYLE_INPUT, "Negocio:", "{EBEBEB}Introduce el {00CC00}ID{EBEBEB} del negocio:", "Continuar", "Salir");
		}
	}
	return 1;
}

Dialog:ShowCreateNegVehicle(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	if (!isnumeric(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo números porfavor, vuelve a intentarlo.");
	new negocio = strval(inputtext);
	if (negocio < 1 || negocio >= totalnegocios) return SendClientMessage(playerid, COLOR_GREY, "* ID de negocio inválida.");
	if (InfoNegocio[negocio][nTipo] == 0) return SendClientMessage(playerid, COLOR_GREY, "* Esa ID está vacía.");

	new gformat[250], modelid = actual_vehModel[playerid], color1 = actual_vehColor1[playerid], color2 = actual_vehColor2[playerid];
	new Float: X, Float: Y, Float: Z, Float: Angle;
	GetPlayerPos(playerid, X, Y, Z);
	GetPlayerFacingAngle(playerid, Angle);
	crear_vehiculo(-1, modelid, X, Y, Z, Angle, GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid), color1, color2, 0, 10, 0, negocio);
	format(gformat, sizeof gformat, "Creaste un %s (%d) (Color1: %d) (Color2: %d) para el negocio %s, recuerda /estacionar.", GetNameVehicle(modelid), modelid, color1, color2, InfoNegocio[negocio][nNombre]);
	SendClientMessage(playerid, 0xA2DC35FF, gformat);
	format(gformat, sizeof gformat, "[NEGOCIO: %d] %d creó un %s (%d) (Color1: %d) (Color2: %d)", negocio, NombreDeCuenta(playerid), GetNameVehicle(modelid), modelid, color1, color2);
	Log("LOGS/CrearVehiculo.log", gformat);
	return 1;
}

Dialog:ShowCreateFacVehicle(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new ID = listitem, gformat2[64];
	format(gformat2, sizeof gformat2, "VehIDcreate%d", ID);
	new faccion = GetPVarInt(playerid, gformat2);
	if (CountVehs(faccion) >= 80) return SendClientMessage(playerid, COLOR_GREY, "* No puedes crear más de 80 vehículos para esta facción.");
	new gformat[250], modelid = actual_vehModel[playerid], color1 = actual_vehColor1[playerid], color2 = actual_vehColor2[playerid];
	new Float: X, Float: Y, Float: Z, Float: Angle;
	GetPlayerPos(playerid, X, Y, Z);
	GetPlayerFacingAngle(playerid, Angle);
	crear_vehiculo(-1, modelid, X, Y, Z, Angle, GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid), color1, color2, 0, 10, faccion, -1);
	format(gformat, sizeof gformat, "Creaste un %s (%d) (Color1: %d) (Color2: %d) para %s, recuerda /estacionar.", GetNameVehicle(modelid), modelid, color1, color2, InfoFaccion[faccion][fLogo]);
	SendClientMessage(playerid, 0xA2DC35FF, gformat);
	format(gformat, sizeof gformat, "[FACCIÓN: %s] %d creó un %s (%d) (Color1: %d) (Color2: %d)", InfoFaccion[faccion][fLogo], NombreDeCuenta(playerid), GetNameVehicle(modelid), modelid, color1, color2);
	Log("LOGS/CrearVehiculo.log", gformat);
	return 1;
}

CMD:ponerneon(playerid)
{
	if (InfoCuenta[playerid][jVIP] != 3) return SendClientMessage(playerid, COLOR_WHITE, "Debes ser mínimo VIP gold.");
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return 1;
	new vehicleid = GetPlayerVehicleID(playerid), id = verificar_id_vehiculo(vehicleid);
	if (id == -1) return SendClientMessage(playerid, 0xebebebff, "Este vehículo no admite componente neon.");
	if (llaves_vehiculo(playerid, vehicleid) == -1) return SendClientMessage(playerid, COLOR_GREY, "No tienes las llaves de este vehículo.");
	if (Valid_Vehicle_Neon(InfoVehiculo[id][vModelo]) == 0) return SendClientMessage(playerid, 0xebebebff, "Este vehículo no admite componente neon.");
	Dialog_Show(playerid, ShowNeon, DIALOG_STYLE_LIST, "¿Qué neon pondrás?", "{FF0000}Rojo\n{2641FE}Azul\n{1EB032}Verde\n{FFFF00}Amarillo\n{FFC0CB}Rosado\n{FFFFFF}Blanco\n{00AE57}Remover neon", "Instalar", "Salir");
	return 1;
}

Dialog:ShowNeon(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return 1;
	new vehicleid = GetPlayerVehicleID(playerid), id = verificar_id_vehiculo(vehicleid), gformat[270];
	if (listitem == 6)
	{
	    if (InfoVehiculo[id][vModeloNeon] == 0) return SendClientMessage(playerid, 0xebebebff, "Este vehículo no tiene neon instalado.");
		if (InfoVehiculo[id][vOnNeon] != 0)
		{
			if (IsValidDynamicObject(InfoVehiculo[id][vObjetoNeonL])) DestroyDynamicObject(InfoVehiculo[id][vObjetoNeonL]);
			if (IsValidDynamicObject(InfoVehiculo[id][vObjetoNeonR])) DestroyDynamicObject(InfoVehiculo[id][vObjetoNeonR]);
		}
		InfoVehiculo[id][vModeloNeon] = 0;
		InfoVehiculo[id][vOnNeon] = 0;
		mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE vehiculos SET OnNeon = 0, ModeloNeon = 0 WHERE ID = '%d'", InfoVehiculo[id][vID_sql]);
		mysql_tquery(DBInsanity, gformat);
		format(gformat, sizeof gformat, "Has removido el neon de tu %s.", GetVehicleName(vehicleid));
		SendClientMessage(playerid, 0xccccffff, gformat);
		Streamer_Update(playerid);
		return 1;
	}
	new modelo_neon = 18647+listitem;
	if (InfoVehiculo[id][vModeloNeon] == modelo_neon) return SendClientMessage(playerid, 0xebebebff, "Ese color de neon ya está instalado.");
	InfoVehiculo[id][vOnNeon] = 1;
	InfoVehiculo[id][vModeloNeon] = modelo_neon;
	Colocar_Neon(id, vehicleid);
	format(gformat, sizeof gformat, "Instalaste neon %s en tu %s, ahora puedes usar /neon.", Es_Neon(modelo_neon), GetVehicleName(vehicleid));
	SendClientMessage(playerid, 0xccccffff, gformat);
	Streamer_Update(playerid);
	PlayerPlaySound(playerid, 1133, 0, 0, 0);
	mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE vehiculos SET OnNeon = 1, ModeloNeon = '%d' WHERE ID = '%d'", InfoVehiculo[id][vModeloNeon], InfoVehiculo[id][vID_sql]);
	mysql_tquery(DBInsanity, gformat);
	return 1;
}

CMD:neon(playerid)
{
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return 1;
	new vehicleid = GetPlayerVehicleID(playerid), id = verificar_id_vehiculo(vehicleid);
	if (id == -1) return SendClientMessage(playerid, 0xebebebff, "Este vehículo no admite componente neon.");
	if (llaves_vehiculo(playerid, vehicleid) == -1) return SendClientMessage(playerid, COLOR_GREY, "No tienes las llaves de este vehículo.");
	if (InfoVehiculo[id][vModeloNeon] == 0) return SendClientMessage(playerid, 0xebebebff, "Este vehículo no tiene neon instalado.");
	if (InfoVehiculo[id][vOnNeon] != 0)
	{
		InfoVehiculo[id][vOnNeon] = 0;
		if (IsValidDynamicObject(InfoVehiculo[id][vObjetoNeonL])) DestroyDynamicObject(InfoVehiculo[id][vObjetoNeonL]);
		if (IsValidDynamicObject(InfoVehiculo[id][vObjetoNeonR])) DestroyDynamicObject(InfoVehiculo[id][vObjetoNeonR]);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, "Has desactivado el neon de tu vehículo.");
	}
	else
	{
		InfoVehiculo[id][vOnNeon] = 1;
		Colocar_Neon(id, vehicleid);
		SendClientMessage(playerid, COLOR_GENERAL, "Has activado el neon de tu vehículo.");
	}
	Streamer_Update(playerid);
    guardar_int_mysql("vehiculos", "OnNeon", InfoVehiculo[id][vID_sql], InfoVehiculo[id][vOnNeon]);
	return 1;
}

CMD:rentarveh(playerid)
{
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "Debes ser el conductor de un vehículo.");
	new vehicleid = GetPlayerVehicleID(playerid);
	if (Vehiculo_Renta(vehicleid) == 0) return SendClientMessage(playerid, COLOR_GREY, "No estás dentro de un vehículo rentable.");
	new id = verificar_id_vehiculo(vehicleid), string[170];
	if (InfoVehiculo[id][vRentaTiempo] != 0) return SendClientMessage(playerid, COLOR_GREY, "Este vehículo ya está rentado.");
	Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vRentaTiempo] != 0)
	{
		if (strcmp(NombreDeCuenta(playerid), InfoVehiculo[v][vRentaDueno], true) == 0)
		{
			format(string, sizeof string, "Ya posees un vehículo con renta, ID %d.", InfoVehiculo[v][vIG_id]);
			SendClientMessage(playerid, 0xFF6347AA, string);
			return 1;
		}
	}
	if (GetPlayerCash(playerid) < 200) return SendClientMessage(playerid, COLOR_GREY, "No tienes 200$ dólares.");
	GivePlayerCash(playerid, -200, "rentarveh");
	alm(InfoVehiculo[id][vRentaDueno], NombreDeCuenta(playerid));
	InfoVehiculo[id][vRentaTiempo] = 20;
	SendClientMessage(playerid, 0x90C3D4FF, "Rentaste este vehículo por 20 minutos en $200 dólares.");
	return 1;
}

CMD:enrenta(playerid)
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	new string[185];
	SendClientMessage(playerid, 0x90C3D4FF, "Vehículos rentados:");
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vRentaTiempo] != 0)
	{
		format(string, sizeof string, "[ID: %d] %s - tiempo: {90C3D4}%d minutos", InfoVehiculo[id][vIG_id], InfoVehiculo[id][vRentaDueno], InfoVehiculo[id][vRentaTiempo]);
		SendClientMessage(playerid, 0xEBEBEBFF, string);
	}
	return 1;
}

CMD:estacionar(playerid)
{
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "Debes ser el conductor de un vehículo.");
	new vehicleid = GetPlayerVehicleID(playerid);
	Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] == vehicleid)
	{
		if (InfoVehiculo[v][vEmbargo] != 0) return SendClientMessage(playerid, COLOR_GREY, "Este vehículo se encuentra embargado.");
		new access = 0, string[160];
		if (InfoVehiculo[v][vNegocio] != 0)
		{
			if (CheckAdminCMD(playerid, 6)) return 1;
			access = 5;
		}
		else
		{
			switch (InfoVehiculo[v][vTipo])
			{
				case 1..50: //facciones
				{
					if (llaves_lider(playerid, vehicleid) != 0) access = 3;
				}
			    case 200:
			    {
					if (CheckAdminCMD(playerid, 6)) return 1;
					access = 4;
				}
			    case 600:
			    {
					if (CheckAdminCMD(playerid, 6)) return 1;
					access = 6;
				}
				default: //usuarios
				{
					if (llaves_vehiculo(playerid, vehicleid) != -1) access = 1;
					else
					{
						if (InfoVehiculo[v][vLlavePrestada] == playerid) access = 2;
					}
				}
			}
		}
		if (access == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes las llaves de este vehículo.");
		//mensaje de estacionar
		switch (access)
		{
			case 1: format(string, sizeof string, "estaciona su %s", GetVehicleName(vehicleid));
			case 2: format(string, sizeof string, "estaciona el %s de %s", GetVehicleName(vehicleid), InfoVehiculo[v][vPropietario]);
			case 3: format(string, sizeof string, "estaciona el %s de facción", GetVehicleName(vehicleid));
			case 4: format(string, sizeof string, "estaciona el %s VIP", GetVehicleName(vehicleid));
			case 5: format(string, sizeof string, "estaciona el %s de negocio/empresa", GetVehicleName(vehicleid));
			case 6: format(string, sizeof string, "estaciona el %s de renta", GetVehicleName(vehicleid));
		}
		ameuwu(playerid, string);
		//apaga motor
		if (!EstaEnBicis(vehicleid))
		{
			new engine, lights, alarm, doors, bonnet, boot, objective;
			GetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);
			SetVehicleParamsEx(vehicleid, VEHICLE_PARAMS_OFF, lights, alarm, doors, bonnet, boot, objective);
		}
		//save
		GetVehicleHealth(vehicleid, InfoVehiculo[v][vVida]);
		GetVehicleDamageStatus(vehicleid, InfoVehiculo[v][vDanioSuperficie], InfoVehiculo[v][vDanioPuertas], InfoVehiculo[v][vDanioLuces], InfoVehiculo[v][vDanioRuedas]);
		GetVehiclePos(vehicleid, InfoVehiculo[v][vPosicionX], InfoVehiculo[v][vPosicionY], InfoVehiculo[v][vPosicionZ]);
		GetVehicleZAngle(vehicleid, InfoVehiculo[v][vPosicionR]);
		InfoVehiculo[v][vVirtualWorld] = GetPlayerVirtualWorld(playerid);
		InfoVehiculo[v][vInterior] = GetPlayerInterior(playerid);
		InfoVehiculo[v][vGasolina] = veh_gasolina[vehicleid];
		new query[1200];
		mysql_format(DBInsanity, query, sizeof query, "UPDATE vehiculos SET Posicion_X = '%f', Posicion_Y = '%f', Posicion_Z = '%f', Posicion_R = '%f', Interior = '%d', VirtualWorld = '%d', Vida = '%f', \
		DanioSuperficie = '%d', DanioPuertas = '%d', DanioLuces = '%d', DanioRuedas = '%d', Gasolina = '%d' WHERE ID = '%d'",
		InfoVehiculo[v][vPosicionX],
		InfoVehiculo[v][vPosicionY],
		InfoVehiculo[v][vPosicionZ],
		InfoVehiculo[v][vPosicionR],
		InfoVehiculo[v][vInterior],
		InfoVehiculo[v][vVirtualWorld],
		InfoVehiculo[v][vVida],
		InfoVehiculo[v][vDanioSuperficie],
		InfoVehiculo[v][vDanioPuertas],
		InfoVehiculo[v][vDanioLuces],
		InfoVehiculo[v][vDanioRuedas],
		InfoVehiculo[v][vGasolina],
		InfoVehiculo[v][vID_sql]);
		mysql_tquery(DBInsanity, query);
		return 1;
	}
	SendClientMessage(playerid, COLOR_WHITE, "Debes estar dentro de un vehículo propio o con llaves.");
	return 1;
}

CMD:verllaves(playerid, params[])
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	new playerid2, string[256];
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /verllaves (jugador)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, -1, "Jugador desconectado.");
	SendClientMessage(playerid, COLOR_GREEN, "_______________________________________");
	format(string, sizeof string, "*** Vehículos de %s  ***", NombreJugador(playerid2));
	SendClientMessage(playerid, COLOR_GRAD2, string);
	Loop(veh, totalvehiculos, 1) if (InfoVehiculo[veh][vTipo] == 0 && strcmp(InfoPersonaje[playerid2][pNombre_Apellido], InfoVehiculo[veh][vPropietario], true) == 0)
	{
		if (InfoVehiculo[veh][vEmbargo] != 0) format(string, sizeof string, "Registro vehicular: EMBARGADO | Modelo:{A2DC35} %s{FFFFFF} | Multa: {A2DC35}$%d{FFFFFF}.", VehicleName[InfoVehiculo[veh][vModelo] - 400], InfoVehiculo[veh][vMulta]);
		else format(string, sizeof string, "Registro vehicular: {A2DC35}%d{FFFFFF} | Modelo: {A2DC35}%s{FFFFFF} | Multa: {A2DC35}$%d{FFFFFF}.", InfoVehiculo[veh][vIG_id], GetVehicleName(InfoVehiculo[veh][vIG_id]), InfoVehiculo[veh][vMulta]);
		SendClientMessage(playerid, COLOR_WHITE, string);
	}
	SendClientMessage(playerid, COLOR_GREEN, "_______________________________________");
	return 1;
}

CMD:vcoche(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	new carid = GetPlayerVehicleID(playerid), closestcar = GetClosestCar(playerid, carid), string[256];
	if (IsTrailerAttachedToVehicle(carid))
	{
		new carbeingtowed = GetVehicleTrailer(carid);
		Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] == carbeingtowed)
		{
			format(string, sizeof string, "Registro Vehicular: {A2DC35}%d{FFFFFF} | Modelo: {A2DC35}%s{FFFFFF} | Dueño: {A2DC35}%s{FFFFFF} | Multa: {A2DC35}$%d{FFFFFF}.",carbeingtowed,GetVehicleName(InfoVehiculo[v][vIG_id]),InfoVehiculo[v][vPropietario],InfoVehiculo[v][vMulta]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		SendClientMessage(playerid, COLOR_WHITE, "Este vehículo no pertenece a nadie.");
	}
	else if (IsPlayerInRangeOfVehicle(playerid, closestcar, 9.0) && !IsTrailerAttachedToVehicle(carid))
	{
		Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] == closestcar)
		{
			format(string, sizeof string, "Registro Vehicular: {A2DC35}%d{FFFFFF} | Modelo: {A2DC35}%s{FFFFFF} | Dueño: {A2DC35}%s{FFFFFF} | Multa: {A2DC35}$%d{FFFFFF}.",closestcar,GetVehicleName(InfoVehiculo[v][vIG_id]),InfoVehiculo[v][vPropietario],InfoVehiculo[v][vMulta]);
			SendClientMessage(playerid, COLOR_WHITE, string);
			return 1;
		}
		SendClientMessage(playerid, COLOR_WHITE, "Este vehículo no pertenece a nadie.");
	}
	else SendClientMessage(playerid, COLOR_WHITE, "{FFFF00}[ERROR]:{FFFFFF} No estás cerca de un vehículo.");
	return 1;
}

CMD:embargar(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	if (!IsPlayerInRangeOfPoint(playerid, 5.0,1636.041259,-1811.950317,13.524469)) return SendClientMessage(playerid, COLOR_GREY, "No estás cerca del punto de incautación, no puedes confiscar!");
	new vehicleid = GetPlayerVehicleID(playerid);
	if (!IsTrailerAttachedToVehicle(vehicleid)) return SendClientMessage(playerid, -1, "No estás en una grua.");
	new vehicleid2 = GetVehicleTrailer(vehicleid), veh = 0, gformat[256];
	if (!GetVehicleModel(vehicleid2)) return SendClientMessage(playerid, COLOR_WHITE, "El vehículo en el remolque se ha desenganchado y por lo tanto no puede ser confiscado.");
	//usuarios
	Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] == vehicleid2)
	{
		veh = v;
		break;
	}
	if (veh == 0)
	{
		SendClientMessage(playerid, COLOR_WHITE, "No se pudo encontrar ningún tipo de registro en el vehículo y se ha soltado.");
		DetachTrailerFromVehicle(vehicleid);
		return 1;
	}
	if (InfoVehiculo[veh][vMulta] <= 1000) return SendClientMessage(playerid, COLOR_WHITE, "Para embargar un vehiculo es necesario que este mismo tenga mínimo 2 multas.");
	format(gformat, sizeof gformat,"* Has confiscado el vehiculo de %s - Modelo %s.", InfoVehiculo[veh][vPropietario], VehicleName[InfoVehiculo[veh][vModelo] - 400]);
	SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat);
	foreach(Player, playerid2) if (llaves_vehiculo(playerid2, vehicleid2) != -1)
	{
		format(gformat, sizeof gformat, "Su %s ha sido confiscado. Es posible que lo pueda sacar pagando la multa en LSPD.", VehicleName[InfoVehiculo[veh][vModelo] - 400]);
		SendClientMessage(playerid2, COLOR_LIGHTBLUE, gformat);
	}
	format(gformat, sizeof gformat, "[CENTRAL] %s ha confiscado el vehiculo de %s - Modelo %s (No pagó $%s de multa).", NombreJugador(playerid), InfoVehiculo[veh][vPropietario], VehicleName[InfoVehiculo[veh][vModelo] - 400], diner_coma(InfoVehiculo[veh][vMulta]));
	SendRadioMessage(InfoPersonaje[playerid][pMiembro], COLOR_RADIO, gformat);
	InfoVehiculo[veh][vEmbargo] = 1;
	DetachTrailerFromVehicle(vehicleid);
	DestroyVehicle(vehicleid2);
	InfoVehiculo[veh][vMaleteroOn] = 0;
	if (InfoVehiculo[veh][vModeloNeon] != 0 && InfoVehiculo[veh][vOnNeon] != 0)
	{
		if (IsValidDynamicObject(InfoVehiculo[veh][vObjetoNeonL])) DestroyDynamicObject(InfoVehiculo[veh][vObjetoNeonL]);
		if (IsValidDynamicObject(InfoVehiculo[veh][vObjetoNeonR])) DestroyDynamicObject(InfoVehiculo[veh][vObjetoNeonR]);
	}
	Loop(x, 5, 0) if (InfoVehiculo[veh][vObjModelo][x] != 0) { if (IsValidDynamicObject(InfoVehiculo[veh][vTuneo][x])) DestroyDynamicObject(InfoVehiculo[veh][vTuneo][x]); }
	if (!isnull(InfoVehiculo[veh][vCallSign])) DestroyDynamic3DTextLabel(InfoVehiculo[veh][vOnCallSign]);
	InfoVehiculo[veh][vIG_id] = 0;
	return 1;
}

CMD:pagarm(playerid)
{
	if (IsPlayerInRangeOfPoint(playerid, 3.0, 240.4770,112.7777,1003.2188) || IsPlayerInRangeOfPoint(playerid, 3.0, 358.236083,182.073394,1008.382812)) // Map de LSPD y DGT respectivamente.
	{
		if (InfoPersonaje[playerid][pLicencia][0] == 0) return SendClientMessage(playerid, 0xA2DC35FF, "[MULTA]:{FFFFFF} Una licencia de conducir válida es necesaria para liberar su vehículo del depósito municipal.");
		new dialog[2048], gformat[256], iCount = 0, iMultas = 0;
		Loop(veh, totalvehiculos, 1) if (InfoVehiculo[veh][vTipo] == 0 && strcmp(InfoPersonaje[playerid][pNombre_Apellido], InfoVehiculo[veh][vPropietario], true) == 0)
		{
			if (InfoVehiculo[veh][vPrecio] < 1)
			{
				InfoVehiculo[veh][vPrecio] = 10000;
				//guardar_int_mysql("vehiculos", "Precio", InfoVehiculo[veh][vID_sql], InfoVehiculo[veh][vPrecio]);
			}
			//vehículo embargado
			if (InfoVehiculo[veh][vEmbargo] != 0)
			{
				format(gformat, sizeof gformat, "%s (Multa - $%s) (Embargado - $%s Liberación)\n", VehicleName[InfoVehiculo[veh][vModelo] - 400], diner_coma(InfoVehiculo[veh][vMulta]), diner_coma((InfoVehiculo[veh][vPrecio] / 10) + InfoVehiculo[veh][vMulta] + (1000))), iMultas++;
			}
			else //vehículo status normal o con multa
			{
				if (InfoVehiculo[veh][vMulta] != 0) format(gformat, sizeof gformat, "%s (Multa - $%s)\n", VehicleName[InfoVehiculo[veh][vModelo] - 400], diner_coma(InfoVehiculo[veh][vMulta])), iMultas++;
				else format(gformat, sizeof gformat, "%s\n", VehicleName[InfoVehiculo[veh][vModelo] - 400]);
			}
			strcat(dialog, gformat);
			//conteo
			new gformat2[64];
			format(gformat2, sizeof gformat2, "multevehuwu%d", iCount);
			SetPVarInt(playerid, gformat2, veh);
			iCount++;
		}
		if (iMultas == 0) return SendClientMessage(playerid, COLOR_WHITE, "No tienes multas para pagar o vehículos para ser liberados.");
		if (iCount == 0) return SendClientMessage(playerid, COLOR_WHITE, "No tienes vehículos a tu nombre.");
		Dialog_Show(playerid, ShowMultas, DIALOG_STYLE_LIST, "{00AE57}Vehiculos", dialog, "Liberar", "Salir");
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Las multas pueden ser pagadas en la DGT, Dirección General de Tráfico.");
	return 1;
}
CMD:pagarmulta(playerid) return cmd_pagarm(playerid);

Dialog:ShowMultas(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new ID = listitem, gformat2[40], gformat[256];
	format(gformat2, sizeof gformat2, "multevehuwu%d", ID);
	new veh = GetPVarInt(playerid, gformat2);
	if (InfoVehiculo[veh][vModelo] == 0) return SendClientMessage(playerid, 0xEBEBEBFF, "Vehículo inválido (model 0). Si el error continua contacta con el programador.");

	if (InfoPersonaje[playerid][pEstrellas] != 0)
	{
		format(gformat, sizeof gformat, "[CENTRAL] %s intentó pagar sus multas, está en busqueda y captura. Estrellas: %d", NombreJugador(playerid), InfoPersonaje[playerid][pEstrellas]);
		SendRadioMessage(1, COLOR_RADIO, gformat);
		SendRadioMessage(2, COLOR_RADIO, gformat);
		SendClientMessage(playerid, COLOR_YELLOW, "La policía viene en camino, hemos alertado a ellos dado que estás en ByC.");
		return 1;
	}
	if (InfoVehiculo[veh][vEmbargo])
	{
		new iCost = ((InfoVehiculo[veh][vPrecio] / 10) + InfoVehiculo[veh][vMulta] + (1000));
		new xspawn = random(sizeof point_embargo);
		if (GetPlayerCash(playerid) < iCost)
		{
			format(gformat, sizeof gformat, "Te faltan $%s para pagar la liberación de tu vehículo.", diner_coma(iCost-GetPlayerCash(playerid)));
			SendClientMessage(playerid, COLOR_GRAD2, gformat);
			return 1;
		}
		format(gformat, sizeof gformat, "Liberaste tu %s por $%s.", VehicleName[InfoVehiculo[veh][vModelo] - 400], diner_coma(iCost));
		SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat);
		SendClientMessage(playerid, 0xA2DC35FF, "[INFO]:{FFFFFF} Tu auto se encuentra en el depósito municipal, contácta con un policia para que lo saque.");
		GivePlayerCash(playerid, -iCost, "pago embargo");
		Tax += iCost;
		InfoVehiculo[veh][vEmbargo] = 0; // Depósito.
		InfoVehiculo[veh][vPosicionX] = point_embargo[xspawn][0];
		InfoVehiculo[veh][vPosicionY] = point_embargo[xspawn][1];
		InfoVehiculo[veh][vPosicionZ] = point_embargo[xspawn][2];
		InfoVehiculo[veh][vPosicionR] = point_embargo[xspawn][3];
		InfoVehiculo[veh][vMulta] = 0;
		InfoVehiculo[veh][vInterior] = 0;
		InfoVehiculo[veh][vVirtualWorld] = 0;
		new Coche = CreateVehicle(InfoVehiculo[veh][vModelo], InfoVehiculo[veh][vPosicionX], InfoVehiculo[veh][vPosicionY], InfoVehiculo[veh][vPosicionZ], InfoVehiculo[veh][vPosicionR], InfoVehiculo[veh][vColor_1], InfoVehiculo[veh][vColor_2], -1, InfoVehiculo[veh][vSirena]);
        InfoVehiculo[veh][vIG_id] = Coche;
		LinkVehicleToInterior(Coche, InfoVehiculo[veh][vInterior]);
		SetVehicleExVirtualWorld(Coche, InfoVehiculo[veh][vVirtualWorld]);
		if (InfoVehiculo[veh][vModelo] == 528 || InfoVehiculo[veh][vModelo] == 427) SetVehicleHealth(Coche, 5000.0);
		else SetVehicleHealth(Coche, InfoVehiculo[veh][vVida]);
		UpdateVehicleDamageStatus(Coche, InfoVehiculo[veh][vDanioSuperficie], InfoVehiculo[veh][vDanioPuertas], InfoVehiculo[veh][vDanioLuces], InfoVehiculo[veh][vDanioRuedas]);
		veh_gasolina[Coche] = InfoVehiculo[veh][vGasolina];
		if (InfoVehiculo[veh][vSeguro] != 0) LockPlayerVehicle(Coche);
		Load_Mods(veh);
		if (!isnull(InfoVehiculo[veh][vCallSign]))
		{
			DestroyDynamic3DTextLabel(InfoVehiculo[veh][vOnCallSign]);
			InfoVehiculo[veh][vOnCallSign] = CreateDynamic3DTextLabel(InfoVehiculo[veh][vCallSign], 0xEBEBEBFF, -1.0, -2.8, 0.0, 30.0, INVALID_PLAYER_ID, Coche);
		}
		new query[512];
		mysql_format(DBInsanity, query, sizeof query, "UPDATE vehiculos SET Posicion_X = '%f', Posicion_Y = '%f', Posicion_Z = '%f', Posicion_R = '%f', Interior = 0, VirtualWorld = 0, Multa = 0, Embargo = 0 WHERE ID = '%d'", InfoVehiculo[veh][vPosicionX], InfoVehiculo[veh][vPosicionY], InfoVehiculo[veh][vPosicionZ], InfoVehiculo[veh][vPosicionR], InfoVehiculo[veh][vID_sql]);
		mysql_tquery(DBInsanity, query);
		return 1;
	}
	if (InfoVehiculo[veh][vMulta])
	{
		new iCost = InfoVehiculo[veh][vMulta];
		if (GetPlayerCash(playerid) < iCost)
		{
			format(gformat, sizeof gformat, "Te faltan $%s para pagar la multa de tu vehículo.", diner_coma(iCost-GetPlayerCash(playerid)));
			SendClientMessage(playerid, COLOR_GRAD2, gformat);
			return 1;
		}
		Tax += iCost;
		format(gformat, sizeof gformat, "Pagaste la multa de $%s de tu %s.", diner_coma(iCost), VehicleName[InfoVehiculo[veh][vModelo] - 400]);
		SendClientMessage(playerid, COLOR_GRAD2, gformat);
		InfoVehiculo[veh][vMulta] = 0;
		guardar_int_mysql("vehiculos", "Multa", InfoVehiculo[veh][vID_sql], 0);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GRAD2, "Ese vehículo no necesita ser liberado o tiene multas a pagar.");
	return 1;
}

CMD:enganchar(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	if (!IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GRAD2, "{FFFF00}[ERROR]:{FFFFFF} Tienes que estar en un vehículo.");
	new carid = GetPlayerVehicleID(playerid);
	if (!IsATowTruck(carid)) return SendClientMessage(playerid, COLOR_GRAD2, "{FFFF00}[ERROR]:{FFFFFF} No puedes remolcar en este tipo de vehículo.");
	new closestcar = GetClosestCar(playerid, carid);
	if (GetDistancePlayerVeh(playerid,closestcar) <= 8 && !IsTrailerAttachedToVehicle(carid))
	{
		foreach(Player, i) if (llaves_vehiculo(i, carid) != -1)
		{
			if (CercaDelMarica(30.0, playerid, i))
				SendClientMessage(i, COLOR_LIGHTBLUE, "Alguien está tratando de remolcar tu vehículo!");
		}
		SendClientMessage(playerid, COLOR_WHITE, "Este vehiculo no tiene ningún registro, está disponible para embargar");
		AttachTrailerToVehicle(closestcar,carid);
		arr_Towing[playerid] = closestcar;
	}
	return 1;
}

CMD:desenganchar(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	new vehicleid = GetPlayerVehicleID(playerid);
	if (!IsTrailerAttachedToVehicle(vehicleid)) return SendClientMessage(playerid, COLOR_WHITE,"Aún no has enganchado nada.");
	SendClientMessage(playerid, COLOR_WHITE,"Has desenganchado el vehículo que traías.");
	arr_Towing[playerid] = INVALID_VEHICLE_ID;
	DetachTrailerFromVehicle(vehicleid);
	return 1;
}

CMD:dejarmulta(playerid, params[])
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	if (sscanf(params, "dd", params[0], params[1])) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /dejarmulta (VehicleID) (Precio)");
	if (InfoPersonaje[playerid][pRango] < 2) return SendClientMessage(playerid, COLOR_WHITE, "Sólo rangos 2 y superiores pueden dejar multas!");
	new Float: x, Float: y, Float: z, vehicleid = params[0], gformat[190];
	GetVehiclePos(vehicleid, x, y, z);
	if (!GetVehicleModel(vehicleid)) return SendClientMessage(playerid, -1, "El vehículo seleccionado no se encuentra spawneado.");
	new veh = -1;
	Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] == vehicleid)
	{
		veh = v;
		break;
	}
	if (veh == -1) return SendClientMessage(playerid, COLOR_WHITE, "Ese vehículo no tiene ningún registro o no tiene propietario, llevalo al depósito.");
	if (InfoVehiculo[veh][vMulta] >= 3000) return SendClientMessage(playerid, COLOR_WHITE, "Este vehiculo ya excedio el máximo de multas, se debe embargar.");
	InfoVehiculo[veh][vMulta] += params[1];
	format(gformat, sizeof gformat, "Dejaste una multa de $%d en el vehículo de %s, modelo %s.", params[1], InfoVehiculo[veh][vPropietario], GetVehicleName(vehicleid));
	SendClientMessage(playerid, COLOR_WHITE, gformat);
    guardar_int_mysql("vehiculos", "Multa", InfoVehiculo[veh][vID_sql], InfoVehiculo[veh][vMulta]);
	return 1;
}

CMD:aseguro(playerid)
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new Float: x, Float: y, Float: z;
	Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] != 0)
	{
		new vehicleid = InfoVehiculo[v][vIG_id];
		GetVehiclePos(vehicleid, x, y, z);
		if (IsPlayerInRangeOfPoint(playerid, 3.0, x, y, z))
		{
			switch (InfoVehiculo[v][vTipo])
			{
				case 0: //usuarios
				{
					if (!IsPlayerInAnyVehicle(playerid))
						if (IsVehicleBusy(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "El vehículo posee jugadores dentro de el, no puedes colocar seguro.");
					if (InfoVehiculo[v][vSeguro] == 0)
					{
						GameTextForPlayer(playerid,"~r~Vehiculo bloqueado!",5000,6);
						PlayerPlaySoundEx(1145, x, y, z);
						InfoVehiculo[v][vSeguro] = 1;
						LockPlayerVehicle(vehicleid);
					}
					else
					{
						GameTextForPlayer(playerid,"~g~Vehiculo desbloqueado!",5000,6);
						PlayerPlaySoundEx(1145, x, y, z);
						InfoVehiculo[v][vSeguro] = 0;
						UnLockPlayerVehicle(vehicleid);
					}
					guardar_int_mysql("vehiculos", "ConSeguro", InfoVehiculo[v][vID_sql], InfoVehiculo[v][vSeguro]);
					return 1;
				}
				case 1..50: //facciones
				{
					if (!IsPlayerInAnyVehicle(playerid))
						if (IsVehicleBusy(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "El vehículo posee jugadores dentro de el, no puedes colocar seguro.");
					if (InfoVehiculo[v][vSeguro] == 0)
					{
						GameTextForPlayer(playerid,"~r~Vehiculo bloqueado!",5000,6);
						PlayerPlaySoundEx(1145, x, y, z);
						InfoVehiculo[v][vSeguro] = 1;
						LockPlayerVehicle(vehicleid);
					}
					else
					{
						GameTextForPlayer(playerid,"~g~Vehiculo desbloqueado!",5000,6);
						PlayerPlaySoundEx(1145, x, y, z);
						InfoVehiculo[v][vSeguro] = 0;
						UnLockPlayerVehicle(vehicleid);
					}
					guardar_int_mysql("vehiculos", "ConSeguro", InfoVehiculo[v][vID_sql], InfoVehiculo[v][vSeguro]);
					return 1;
				}
			}
		}
	}
    SendClientMessage(playerid, COLOR_GREY, "Debes estar cerca de un vehículo dinámico.");
    return 1;
}

CMD:seguro(playerid)
{
	new Float: x, Float: y, Float: z;
	Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] != 0)
	{
		new vehicleid = InfoVehiculo[v][vIG_id];
		GetVehiclePos(vehicleid, x, y, z);
		if (IsPlayerInRangeOfPoint(playerid, 3.0, x, y, z))
		{
			switch (InfoVehiculo[v][vTipo])
			{
				case 0: //usuarios
				{
					new access = 0;
					if (InfoVehiculo[v][vLlavePrestada] == playerid) access = 1;
					if (llaves_vehiculo(playerid, vehicleid) != -1) access = 1;
					if (access == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes las llaves de este vehículo.");
					if (!IsPlayerInAnyVehicle(playerid))
						if (IsVehicleBusy(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "El vehículo posee jugadores dentro de el, no puedes colocar seguro.");
					if (InfoVehiculo[v][vSeguro] == 0)
					{
						GameTextForPlayer(playerid,"~r~Vehiculo bloqueado!",5000,6);
						PlayerPlaySoundEx(1145, x, y, z);
						InfoVehiculo[v][vSeguro] = 1;
						LockPlayerVehicle(vehicleid);
					}
					else
					{
						GameTextForPlayer(playerid,"~g~Vehiculo desbloqueado!",5000,6);
						PlayerPlaySoundEx(1145, x, y, z);
						InfoVehiculo[v][vSeguro] = 0;
						UnLockPlayerVehicle(vehicleid);
					}
					guardar_int_mysql("vehiculos", "ConSeguro", InfoVehiculo[v][vID_sql], InfoVehiculo[v][vSeguro]);
					return 1;
				}
				case 1..50: //facciones
				{
					if (llaves_faccion(playerid, vehicleid) == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes las llaves de este vehículo de facción.");
					if (!IsPlayerInAnyVehicle(playerid))
						if (IsVehicleBusy(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "El vehículo posee jugadores dentro de el, no puedes colocar seguro.");
					if (InfoVehiculo[v][vSeguro] == 0)
					{
						GameTextForPlayer(playerid,"~r~Vehiculo bloqueado!",5000,6);
						PlayerPlaySoundEx(1145, x, y, z);
						InfoVehiculo[v][vSeguro] = 1;
						LockPlayerVehicle(vehicleid);
					}
					else
					{
						GameTextForPlayer(playerid,"~g~Vehiculo desbloqueado!",5000,6);
						PlayerPlaySoundEx(1145, x, y, z);
						InfoVehiculo[v][vSeguro] = 0;
						UnLockPlayerVehicle(vehicleid);
					}
					guardar_int_mysql("vehiculos", "ConSeguro", InfoVehiculo[v][vID_sql], InfoVehiculo[v][vSeguro]);
					return 1;
				}
			}
		}
	}
    SendClientMessage(playerid, COLOR_GREY, "Debes estar cerca de un vehículo dinámico.");
    return 1;
}
CMD:lock(playerid) return cmd_seguro(playerid);

new id_veh_actual[MAX_PLAYERS];

CMD:llaves(playerid)
{
	new dialog[3084], gformat[370], iCount = 0;
	strcat(dialog, "Modelo - (ID)\tMatricula\tLocalización\n");
	Loop(veh, totalvehiculos, 1) if (InfoVehiculo[veh][vTipo] == 0 && strcmp(InfoPersonaje[playerid][pNombre_Apellido], InfoVehiculo[veh][vPropietario], true) == 0)
	{
		if (InfoVehiculo[veh][vEmbargo] != 0) format(gformat, sizeof gformat, "{00AE57}%s\t{0073E6}LS%03d-CRP\t{00CC00}Embargado{FFFFFF}\n", VehicleName[InfoVehiculo[veh][vModelo] - 400], InfoVehiculo[veh][vID_sql]);
		else
		{
			if (InfoVehiculo[veh][vSpawned] != 0)
			{
				new Float: carPos[3], zone[MAX_ZONE_NAME];
				GetVehiclePos(InfoVehiculo[veh][vIG_id], carPos[0], carPos[1], carPos[2]);
				GetCar3DZone(InfoVehiculo[veh][vIG_id], zone, sizeof zone);
				format(gformat, sizeof gformat, "{00AE57}%s {FFFFFF}- ({C0C0C0}ID: %d{FFFFFF})\t{0073E6}LS%03d-CRP\t{00D500}%s\n", VehicleName[InfoVehiculo[veh][vModelo] - 400], InfoVehiculo[veh][vIG_id], InfoVehiculo[veh][vID_sql], zone);
			}
			else
			{
				format(gformat, sizeof gformat, "{00AE57}%s {FFFFFF}- ({C0C0C0}Guardado{FFFFFF})\t{0073E6}LS%03d-CRP\t{00D500}-\n", VehicleName[InfoVehiculo[veh][vModelo] - 400], InfoVehiculo[veh][vID_sql]);
			}
		}
		strcat(dialog, gformat);
		//conteo
		new gformat2[64];
		format(gformat2, sizeof gformat2, "keyvehowo%d", iCount);
		SetPVarInt(playerid, gformat2, veh);
		iCount++;
	}
	if (iCount == 0) return SendClientMessage(playerid, COLOR_WHITE, "No tienes ningún vehículo a tu nombre.");
	Dialog_Show(playerid, MenuVehiculos, DIALOG_STYLE_TABLIST_HEADERS, "Tus Vehículos", dialog, "Continuar", "Salir");
	return 1;
}
CMD:localizar(playerid) return cmd_llaves(playerid);
CMD:coches(playerid) return cmd_llaves(playerid);
CMD:vehiculos(playerid) return cmd_llaves(playerid);

Dialog:MenuVehiculos(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new ID = listitem, gformat[40], gtitulo[170];
	format(gformat, sizeof gformat, "keyvehowo%d", ID);
	new veh = GetPVarInt(playerid, gformat);
	if (InfoVehiculo[veh][vModelo] == 0) return SendClientMessage(playerid, 0xEBEBEBFF, "Vehículo inválido (model 0). Si el error continua contacta con el programador.");
 	if (InfoVehiculo[veh][vEmbargo]) return SendClientMessage(playerid, COLOR_WHITE, "No puedes realizar operaciones con un vehículo confiscado.");
	id_veh_actual[playerid] = veh;
	format(gtitulo, sizeof gtitulo, "Opciones para tu {00AE57}%s", VehicleName[InfoVehiculo[veh][vModelo] - 400]);
	if(InfoVehiculo[veh][vSpawned] != 0)
		Dialog_Show(playerid, Menu2Vehiculos, DIALOG_STYLE_LIST, gtitulo, "{0073E6}-{FFFFFF} Guardar vehículo\n{0073E6}-{FFFFFF} Localizar\n{0073E6}-{FFFFFF} Información\n{0073E6}-{FFFFFF} Maletero\n{0073E6}-{FFFFFF} Eliminar", "Continuar", "Volver");
	else
		Dialog_Show(playerid, Menu2Vehiculos, DIALOG_STYLE_LIST, gtitulo, "{0073E6}-{FFFFFF} Spawnear vehículo\n{0073E6}-{FFFFFF} Localizar\n{0073E6}-{FFFFFF} Información\n{0073E6}-{FFFFFF} Maletero\n{0073E6}-{FFFFFF} Eliminar", "Continuar", "Volver");
	return 1;
}

Dialog:Menu2Vehiculos(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_llaves(playerid);
	new id = id_veh_actual[playerid], string[235], dialog[1428];
	if (InfoVehiculo[id][vModelo] == 0) return SendClientMessage(playerid, 0xEBEBEBFF, "Vehículo inválido (model 0). Si el error continua contacta con el programador.");
 	if (InfoVehiculo[id][vEmbargo]) return SendClientMessage(playerid, COLOR_WHITE, "No puedes realizar operaciones con un vehículo confiscado.");
	switch (listitem)
	{
		case 0:
		{
			switch(InfoVehiculo[id][vSpawned])
			{
				case 0: // Guardado
				{
					if (AutosSpawneados[playerid] > MAX_AUTOS_SPAWNEADOS) return SendClientMessageEx(playerid, 0xEBEBEBFF, "Solo puedes tener {00AE57}%d autos{EBEBEB} spawneados.", MAX_AUTOS_SPAWNEADOS);
					if (InfoVehiculo[id][vModelo] != 0 && InfoVehiculo[id][vEmbargo] == 0 && InfoVehiculo[id][vIG_id] == 0)
					{
						new Coche;
						Coche = CreateVehicle(InfoVehiculo[id][vModelo], InfoVehiculo[id][vPosicionX], InfoVehiculo[id][vPosicionY], InfoVehiculo[id][vPosicionZ], InfoVehiculo[id][vPosicionR], InfoVehiculo[id][vColor_1], InfoVehiculo[id][vColor_2], -1, InfoVehiculo[id][vSirena]);
						InfoVehiculo[id][vIG_id] = Coche;
						InfoVehiculo[id][vSpawned] = 1;
						veh_gasolina[Coche] = InfoVehiculo[id][vGasolina];
						if (InfoVehiculo[id][vModelo] == 528 || InfoVehiculo[id][vModelo] == 427) SetVehicleHealth(Coche, 5000.0);
						else SetVehicleHealth(Coche, InfoVehiculo[id][vVida]);
						LinkVehicleToInterior(Coche, InfoVehiculo[id][vInterior]);
						SetVehicleExVirtualWorld(Coche, InfoVehiculo[id][vVirtualWorld]);
						UpdateVehicleDamageStatus(Coche, InfoVehiculo[id][vDanioSuperficie], InfoVehiculo[id][vDanioPuertas], InfoVehiculo[id][vDanioLuces], InfoVehiculo[id][vDanioRuedas]);
						if (InfoVehiculo[id][vSeguro] != 0) LockPlayerVehicle(Coche);
						Load_Mods(id);
						if (!isnull(InfoVehiculo[id][vCallSign]))
						{
							DestroyDynamic3DTextLabel(InfoVehiculo[id][vOnCallSign]);
							InfoVehiculo[id][vOnCallSign] = CreateDynamic3DTextLabel(InfoVehiculo[id][vCallSign], 0xEBEBEBFF, -1.0, -2.8, 0.0, 30.0, INVALID_PLAYER_ID, Coche);
						}
						format(string, sizeof string, "Has spawneado tu {00AE57}%s{EBEBEB} en su última posición. ({00AE57}/estacionar{EBEBEB})", GetVehicleName(InfoVehiculo[id][vIG_id]));
						SendClientMessage(playerid, 0xEBEBEBFF, string);
						AutosSpawneados[playerid]++;
					}
				}
				case 1: // Spawneado
				{
					if (InfoVehiculo[id][vModelo] != 0 && InfoVehiculo[id][vEmbargo] == 0 && InfoVehiculo[id][vIG_id] != 0 && InfoVehiculo[id][vSpawned] != 0)
					{
						if (GetDistancePlayerVeh(playerid, InfoVehiculo[id][vIG_id]) >= 6.0) return SendClientMessage(playerid, 0xEBEBEBFF, "El auto necesita estar máximo 6 metros de tu posición.");
						if (IsVehicleBusy(InfoVehiculo[id][vIG_id])) return SendClientMessage(playerid, 0xEBEBEBFF, "No puedes guardar autos ocupados.");
						format(string, sizeof string, "Has guardado tu {00AE57}%s{EBEBEB}, reaparecerá en la última posición de {00AE57}/estacionar{EBEBEB}", GetVehicleName(InfoVehiculo[id][vIG_id]));
						SendClientMessage(playerid, 0xEBEBEBFF, string);

						new vehicleid = InfoVehiculo[id][vIG_id], oldfuel, query[412];
						if (LockStatus[vehicleid] != 0) LockStatus[vehicleid] = 0;
						oldfuel = veh_gasolina[vehicleid];
						InfoVehiculo[id][vGasolina] = oldfuel;
			 			GetVehicleHealth(vehicleid, InfoVehiculo[id][vVida]);
						GetVehicleDamageStatus(vehicleid, InfoVehiculo[id][vDanioSuperficie], InfoVehiculo[id][vDanioPuertas], InfoVehiculo[id][vDanioLuces], InfoVehiculo[id][vDanioRuedas]);
			 			if (InfoVehiculo[id][vLlavePrestada] != -1)
						{
							InfoPersonaje[InfoVehiculo[id][vLlavePrestada]][pLlaveVehicle] = 0;
							InfoVehiculo[id][vLlavePrestada] = -1;
						}
						ActualizarMods(id);
						mysql_format(DBInsanity, query, sizeof query, "UPDATE vehiculos SET Vida = '%f', DanioSuperficie = '%d', DanioPuertas = '%d', DanioLuces = '%d', DanioRuedas = '%d', Gasolina = '%d' WHERE ID = '%d'",
						InfoVehiculo[id][vVida],
						InfoVehiculo[id][vDanioSuperficie],
						InfoVehiculo[id][vDanioPuertas],
						InfoVehiculo[id][vDanioLuces],
						InfoVehiculo[id][vDanioRuedas],
						InfoVehiculo[id][vGasolina],
						InfoVehiculo[id][vID_sql]);
						mysql_tquery(DBInsanity, query);
						DestroyVehicle(vehicleid);
						if (InfoVehiculo[id][vModeloNeon] != 0 && InfoVehiculo[id][vOnNeon] != 0)
						{
							if (IsValidDynamicObject(InfoVehiculo[id][vObjetoNeonL])) DestroyDynamicObject(InfoVehiculo[id][vObjetoNeonL]);
							if (IsValidDynamicObject(InfoVehiculo[id][vObjetoNeonR])) DestroyDynamicObject(InfoVehiculo[id][vObjetoNeonR]);
						}
						Loop(x, 5, 0) if (InfoVehiculo[id][vObjModelo][x] != 0) { if (IsValidDynamicObject(InfoVehiculo[id][vTuneo][x])) DestroyDynamicObject(InfoVehiculo[id][vTuneo][x]); }
						if (!isnull(InfoVehiculo[id][vCallSign])) DestroyDynamic3DTextLabel(InfoVehiculo[id][vOnCallSign]);
						InfoVehiculo[id][vIG_id] = 0;
						InfoVehiculo[id][vSpawned] = 0;
						InfoVehiculo[id][vMaleteroOn] = 0;
						AutosSpawneados[playerid]--;
			        }
				}
			}
		}
		case 1: //localizar
		{
			if (InfoVehiculo[id][vSpawned] == 0) return SendClientMessage(playerid, -1, "El auto que intentas localizar no está spawneado.");
			new Float: carPos[3], zone[MAX_ZONE_NAME];
			GetVehiclePos(InfoVehiculo[id][vIG_id], carPos[0], carPos[1], carPos[2]);
			GetCar3DZone(InfoVehiculo[id][vIG_id], zone, sizeof(zone));
			format(string, sizeof string, "Tu {00AE57}%s{FFFFFF} fue localizado en {00D500}%s{FFFFFF}. (Vé al checkpoint)", GetVehicleName(InfoVehiculo[id][vIG_id]), zone);
			SendClientMessage(playerid, COLOR_WHITE, string);
			SetPlayerCheckpoint(playerid, carPos[0], carPos[1], carPos[2], 15.0);
			PlayerPlaySound(playerid, 1138, 0, 0, 0);
			SetPVarInt(playerid, "TrackCar", 1);
		}
		case 2: //información
		{
			if (InfoVehiculo[id][vSpawned] == 0) return SendClientMessage(playerid, -1, "El auto que intentas identificar no está spawneado.");
			format(string, sizeof string, "{FFFFFF}Modelo: {00AE57}%s {FFFFFF}({0073E6}%d{FFFFFF})\n", GetVehicleName(InfoVehiculo[id][vIG_id]), InfoVehiculo[id][vModelo]); strcat(dialog, string);
			format(string, sizeof string, "{FFFFFF}Propietario: {00AE57}%s\n", InfoVehiculo[id][vPropietario]); strcat(dialog, string);
			format(string, sizeof string, "{FFFFFF}Gasolina: {00AE57}%d\n", veh_gasolina[InfoVehiculo[id][vIG_id]]); strcat(dialog, string);
			format(string, sizeof string, "{FFFFFF}Valor: {00B000}$%s\n", diner_coma(InfoVehiculo[id][vPrecio])); strcat(dialog, string);
			if (InfoVehiculo[id][vModeloNeon] != 0) { format(string, sizeof string, "{FFFFFF}Neon: {C0C0C0}%s\n", Es_Neon(InfoVehiculo[id][vModeloNeon])); strcat(dialog, string); }
			if (InfoVehiculo[id][vMulta] != 0) { format(string, sizeof string, "{FFFFFF}Multas: {D70000}$%s\n", diner_coma(InfoVehiculo[id][vMulta])); strcat(dialog, string); }
			format(string, sizeof string, "{FFFFFF}Slots maletero: {00AE57}%d\n", InfoVehiculo[id][vMaxMaletero]); strcat(dialog, string);
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "Opción: {00AE57}Información", dialog, "Cerrar", "");
		}
		case 3: //maletero
		{
			if (InfoVehiculo[id][vSpawned] == 0) return SendClientMessage(playerid, -1, "No puedes ver la información de un auto guardado.");
			new count = 0;
			Loop(x, 10, 0) if (InfoVehiculo[id][vMaletero][x] != 0)
			{
				count++;
				format(string, sizeof string, "#%d %s", x+1, slot_objeto(InfoVehiculo[id][vMaletero][x], InfoVehiculo[id][vMaleteroCant][x]));
				SendClientMessage(playerid, COLOR_WHITE, string);
			}
			if (count == 0) return SendClientMessage(playerid, COLOR_GREY, "No hay nada en el maletero.");
			SendClientMessage(playerid, -1, "Recuerda que los comandos de maletero son: {00AE57}/gmaletero {FFFFFF}-{00AE57} /smaletero");
		}
		case 4: //eliminar
		{
			format(dialog, sizeof dialog, "{EBEBEB}El uso de esta opción {9c2828}eliminará completamente{EBEBEB} tú {00AE57}%s{EBEBEB} y no habrá reembolso.\n\
			Si estás seguro de que quieres eliminar el vehículo, por favor presiona {9c2828}continuar{EBEBEB}.\n", VehicleName[InfoVehiculo[id][vModelo] - 400]);
			Dialog_Show(playerid, EliminarVehiculo, DIALOG_STYLE_MSGBOX, "Opción: {00AE57}Eliminar", dialog, "Continuar", "Volver");
		}
	}
	return 1;
}

Dialog:EliminarVehiculo(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_llaves(playerid);
	new id = id_veh_actual[playerid];
	if (InfoVehiculo[id][vSpawned] == 0) return SendClientMessage(playerid, -1, "El auto que intentas eliminar no está spawneado.");
	if (InfoVehiculo[id][vModelo] == 0) return SendClientMessage(playerid, 0xEBEBEBFF, "Vehículo inválido (model 0). Si el error continua contacta con el programador.");
 	if (InfoVehiculo[id][vEmbargo]) return SendClientMessage(playerid, COLOR_WHITE, "No puedes realizar operaciones con un vehículo confiscado.");
	borrar_vehiculo(id);
	SendClientMessage(playerid, COLOR_WHITE, "Su vehículo fue desmantelado con éxito.");
	return 1;
}

CMD:gps(playerid)
{
	Dialog_Show(playerid, ShowGPS, DIALOG_STYLE_LIST, "{EBEBEB}GPS - {088A4B}Menú", "Tus Vehículos\nCasas & Negocios\nLugares de la ciudad", "Continuar", "Salir");
	return 1;
}

CMD:vermapa(playerid) return cmd_gps(playerid);

Dialog:ShowGPS(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0: //vehículos
		{
		    cmd_localizar(playerid);
		}
		case 1:
		{
			new pstring[170], totalstring[640];
			if (InfoPersonaje[playerid][pNegocio1] != -1) format(pstring, sizeof(pstring), "{EBEBEB}Negocio (1): {088A4B}%s\n", InfoNegocio[InfoPersonaje[playerid][pNegocio1]][nNombre]);
			else format(pstring, sizeof(pstring), "{EBEBEB}Negocio (1) vacío\n", playerid);
			strcat(totalstring,pstring);
			if (InfoPersonaje[playerid][pNegocio2] != -1) format(pstring, sizeof(pstring), "{EBEBEB}Negocio (2): {088A4B}%s\n", InfoNegocio[InfoPersonaje[playerid][pNegocio2]][nNombre]);
			else format(pstring, sizeof(pstring), "{EBEBEB}Negocio (2) vacío\n", playerid);
			strcat(totalstring,pstring);
			if (InfoPersonaje[playerid][pCasa1] != -1) format(pstring, sizeof(pstring), "{EBEBEB}Casa (1): {088A4B}%d\n", InfoPersonaje[playerid][pCasa1]);
			else format(pstring, sizeof(pstring), "{EBEBEB}Casa (1) vacía\n", playerid);
			strcat(totalstring,pstring);
			if (InfoPersonaje[playerid][pCasa2] != -1) format(pstring, sizeof(pstring), "{EBEBEB}Casa (2): {088A4B}%d\n", InfoPersonaje[playerid][pCasa2]);
			else format(pstring, sizeof(pstring), "{EBEBEB}Casa (2) vacía\n", playerid);
			strcat(totalstring,pstring);
			Dialog_Show(playerid, UbicarPropiedad, DIALOG_STYLE_LIST, "{EBEBEB}GPS - {088A4B}Propiedades", totalstring, "Localizar", "Atrás");
		}
		case 2:
		{
			new stringo[256], totalstring[2048], iCount = 0;
			Loop(id, sizeof InfoGPS, 0) if (InfoGPS[id][uPosicion][0] != 0.0)
			{
				format(stringo, sizeof stringo, "%s\n", InfoGPS[id][uNombre]);
				strcat(totalstring, stringo);
				//conteo
				new gformat2[64];
				format(gformat2, sizeof gformat2, "ubicgps%d", iCount);
				SetPVarInt(playerid, gformat2, id);
				iCount++;
			}
			Dialog_Show(playerid, ShowUbicaciones, DIALOG_STYLE_LIST, "{EBEBEB}GPS - {088A4B}Ubicaciones", totalstring, "Localizar", "Atrás");
		}
	}
	return 1;
}

Dialog:UbicarPropiedad(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_gps(playerid);
	switch (listitem)
	{
		case 0: // Negocio.
		{
			if (InfoPersonaje[playerid][pNegocio1] == -1) return SendClientMessage(playerid, COLOR_GREY, "No tienes un negocio en el slot 1.");
			new id = InfoPersonaje[playerid][pNegocio1];
			DisablePlayerCheckpoint(playerid);
			SendClientMessage(playerid, 0xEBEBEBFF, "Se marcó en el mapa la ubicación de tu {088A4B}negocio 1");
			SetPlayerCheckpoint(playerid, InfoNegocio[id][nExteriorX], InfoNegocio[id][nExteriorY], InfoNegocio[id][nExteriorZ], 5.0);
		}
		case 1: // Negocio 2.
		{
			if (InfoPersonaje[playerid][pNegocio2] == -1) return SendClientMessage(playerid, COLOR_GREY, "No tienes un negocio en el slot 2.");
			new id = InfoPersonaje[playerid][pNegocio2];
			DisablePlayerCheckpoint(playerid);
			SendClientMessage(playerid, 0xEBEBEBFF, "Se marcó en el mapa la ubicación de tu {088A4B}negocio 2");
			SetPlayerCheckpoint(playerid, InfoNegocio[id][nExteriorX], InfoNegocio[id][nExteriorY], InfoNegocio[id][nExteriorZ], 5.0);
		}
		case 2: // Casa.
		{
			if (InfoPersonaje[playerid][pCasa1] == -1) return SendClientMessage(playerid, COLOR_GREY, "No tienes una casa en el slot 1.");
			new id = InfoPersonaje[playerid][pCasa1];
			DisablePlayerCheckpoint(playerid);
			SendClientMessage(playerid, 0xEBEBEBFF, "Se marcó en el mapa la ubicación de tu {088A4B}casa 1");
			SetPlayerCheckpoint(playerid, InfoCasa[id][cExteriorX], InfoCasa[id][cExteriorY], InfoCasa[id][cExteriorZ], 5.0);
		}
		case 3: // Casa 2.
		{
			if (InfoPersonaje[playerid][pCasa2] == -1) return SendClientMessage(playerid, COLOR_GREY, "No tienes una casa en el slot 2.");
			new id = InfoPersonaje[playerid][pCasa2];
			DisablePlayerCheckpoint(playerid);
			SendClientMessage(playerid, 0xEBEBEBFF, "Se marcó en el mapa la ubicación de tu {088A4B}casa 2");
			SetPlayerCheckpoint(playerid, InfoCasa[id][cExteriorX], InfoCasa[id][cExteriorY], InfoCasa[id][cExteriorZ], 5.0);
		}
	}
	return 1;
}

Dialog:ShowUbicaciones(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_gps(playerid);
	new xdxd = listitem, gformat[40], gstring[250];
	format(gformat, sizeof gformat, "ubicgps%d", xdxd);
	new id = GetPVarInt(playerid, gformat);
	SetPlayerCheckpoint(playerid, InfoGPS[id][uPosicion][0], InfoGPS[id][uPosicion][1], InfoGPS[id][uPosicion][2], 5.0);
	PlayerPlaySound(playerid, 1138, 0, 0, 0);
	format(gstring, sizeof gstring, "Se marcó en el mapa la ubicación del {088A4B}%s", InfoGPS[id][uNombre]);
	SendClientMessage(playerid, 0xEBEBEBFF, gstring);
	return 1;
}

CMD:darllave(playerid, params[])
{
	new playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /darllave (id)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_RED, "Jugador desconectado.");
	if (playerid == playerid2) return SendClientMessage(playerid, COLOR_RED, "No puedes darte las llaves de vehículo a ti mismo.");
	if (!CercaDelMarica(8.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_RED, "No estás cerca de ese jugador.");
	if (InfoPersonaje[playerid2][pLlaveVehicle] != 0) return SendClientMessage(playerid, COLOR_RED, "Ese jugador ya tiene llaves prestadas.");
	new dialog[2048], gformat[256], iCount = 0;
	Loop(veh, totalvehiculos, 1) if (InfoVehiculo[veh][vTipo] == 0 && strcmp(InfoPersonaje[playerid][pNombre_Apellido], InfoVehiculo[veh][vPropietario], true) == 0)
	{
		if (InfoVehiculo[veh][vEmbargo] != 0) format(gformat, sizeof gformat, "%s (Embargado)\n", VehicleName[InfoVehiculo[veh][vModelo] - 400]);
		else format(gformat, sizeof gformat, "%s\n", VehicleName[InfoVehiculo[veh][vModelo] - 400]);
		strcat(dialog, gformat);
		//conteo
		new gformat2[64];
		format(gformat2, sizeof gformat2, "sedvehkey%d", iCount);
		SetPVarInt(playerid, gformat2, veh);
		iCount++;
	}
	if (iCount == 0) return SendClientMessage(playerid, COLOR_WHITE, "No tienes ningún vehículo que puedas dar llaves.");
	Dialog_Show(playerid, DarVehLlaves, DIALOG_STYLE_LIST, "{00AE57}Vehiculos", dialog, "Continuar", "Salir");
	GiveKeysTo[playerid] = playerid2;
	return 1;
}

Dialog:DarVehLlaves(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new ID = listitem, gformat[40], string[170];
	format(gformat, sizeof gformat, "sedvehkey%d", ID);
	new veh = GetPVarInt(playerid, gformat);
	if (InfoVehiculo[veh][vModelo] == 0)
	{
		GiveKeysTo[playerid] = INVALID_PLAYER_ID;
		SendClientMessage(playerid, 0xEBEBEBFF, "Vehículo inválido (model 0). Si el error continua contacta con el programador.");
		return 1;
	}
 	if (InfoVehiculo[veh][vEmbargo]) return SendClientMessage(playerid, COLOR_WHITE, "No puedes realizar operaciones con un vehículo confiscado.");
 	new playerid2 = GiveKeysTo[playerid];
	if (!IsPlayerConnected(playerid2))
	{
		GiveKeysTo[playerid] = INVALID_PLAYER_ID;
		SendClientMessage(playerid, COLOR_RED, "Jugador desconectado.");
		return 1;
	}
	if (InfoVehiculo[veh][vLlavePrestada] != -1)
	{
		SendClientMessage(playerid, 0xA2DC35FF, "Ya diste las llaves de este vehículo.");
		GiveKeysTo[playerid] = INVALID_PLAYER_ID;
		return 1;
	}
	InfoVehiculo[veh][vLlavePrestada] = playerid2;
	InfoPersonaje[playerid2][pLlaveVehicle] = veh;
	format(string, sizeof string, "%s{FFFFFF} te ha dado las llaves de su %s.", NombreJugador(playerid), GetVehicleName(InfoVehiculo[veh][vIG_id]));
	SendClientMessage(playerid2, 0x5ABAFFFF, string);
	format(string, sizeof string, "Has dado a {5ABAFF}%s{FFFFFF} las llaves de tu %s.", NombreJugador(playerid2), GetVehicleName(InfoVehiculo[veh][vIG_id]));
	SendClientMessage(playerid, COLOR_WHITE, string);
	GiveKeysTo[playerid] = INVALID_PLAYER_ID;
	return 1;
}

CMD:quitarllave(playerid)
{
	new dialog[2048], gformat[256], iCount = 0, QuitCount = 0;
	Loop(veh, totalvehiculos, 1) if (InfoVehiculo[veh][vTipo] == 0 && strcmp(InfoPersonaje[playerid][pNombre_Apellido], InfoVehiculo[veh][vPropietario], true) == 0)
	{
		if (InfoVehiculo[veh][vLlavePrestada] != -1)
		{
			if (!IsPlayerConnected(InfoVehiculo[veh][vLlavePrestada]))
			{
				InfoVehiculo[veh][vLlavePrestada] = -1;
				cmd_quitarllave(playerid);
				return 1;
			}
			if (InfoVehiculo[veh][vEmbargo] != 0) format(gformat, sizeof gformat, "%s (Llaves: %s) (Embargado)\n", VehicleName[InfoVehiculo[veh][vModelo] - 400], NombreJugador(InfoVehiculo[veh][vLlavePrestada]));
			else format(gformat, sizeof gformat, "%s (Llaves: %s)\n", VehicleName[InfoVehiculo[veh][vModelo] - 400], NombreJugador(InfoVehiculo[veh][vLlavePrestada]));
            QuitCount++;
		}
		else
		{
			if (InfoVehiculo[veh][vEmbargo] != 0) format(gformat, sizeof gformat, "%s (Embargado)\n", VehicleName[InfoVehiculo[veh][vModelo] - 400]);
			else format(gformat, sizeof gformat, "%s\n", VehicleName[InfoVehiculo[veh][vModelo] - 400]);
		}
		strcat(dialog, gformat);
		//conteo
		new gformat2[64];
		format(gformat2, sizeof gformat2, "keyvehquit%d", iCount);
		SetPVarInt(playerid, gformat2, veh);
		iCount++;
	}
	if (iCount == 0) return SendClientMessage(playerid, COLOR_WHITE, "No tienes ningún vehículo a tu nombre.");
	if (QuitCount == 0) return SendClientMessage(playerid, COLOR_WHITE, "No tienes ningún vehículo con llaves prestadas.");
	Dialog_Show(playerid, QuitarVehLlaves, DIALOG_STYLE_LIST, "{00AE57}Vehiculos", dialog, "Continuar", "Salir");
	return 1;
}

Dialog:QuitarVehLlaves(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new ID = listitem, gformat[40], string[170];
	format(gformat, sizeof gformat, "keyvehquit%d", ID);
	new veh = GetPVarInt(playerid, gformat);
	if (InfoVehiculo[veh][vModelo] == 0) return SendClientMessage(playerid, 0xEBEBEBFF, "Vehículo inválido (model 0). Si el error continua contacta con el programador.");
	if (InfoVehiculo[veh][vLlavePrestada] == -1) return SendClientMessage(playerid, 0xA2DC35FF, "No has dado las llaves de este vehículo.");
	new playerid2 = InfoVehiculo[veh][vLlavePrestada];
	if (!IsPlayerConnected(playerid2))
	{
		InfoVehiculo[veh][vLlavePrestada] = INVALID_PLAYER_ID;
		SendClientMessage(playerid, COLOR_RED, "Jugador desconectado, de igual manera se retiraron las llaves.");
		return 1;
	}
	InfoPersonaje[playerid2][pLlaveVehicle] = 0;
	format(string, sizeof string, "%s{FFFFFF} te retiró las llaves de su {5ABAFF}%s{FFFFFF}.", NombreJugador(playerid), GetVehicleName(InfoVehiculo[veh][vIG_id]));
	SendClientMessage(playerid2, 0x5ABAFFFF, string);
	format(string, sizeof string, "Le quitaste las llaves a {5ABAFF}%s{FFFFFF} de tu {5ABAFF}%s{FFFFFF}.", NombreJugador(playerid2), GetVehicleName(InfoVehiculo[veh][vIG_id]));
	SendClientMessage(playerid, COLOR_WHITE, string);
	InfoVehiculo[veh][vLlavePrestada] = INVALID_PLAYER_ID;
	return 1;
}

CMD:vendermicoche(playerid, params[])
{
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_GREY, "Debes estar dentro de tu vehículo como conductor.");
	new string[256], playerid2, price;
	new Float: health, vehicleid = GetPlayerVehicleID(playerid);
	Loop(d, totalvehiculos, 1) if (InfoVehiculo[d][vIG_id] == vehicleid)
	{
		if (llaves_vehiculo(playerid, vehicleid) == -1) return SendClientMessage(playerid, COLOR_GREY, "No tienes las llaves de este vehículo.");
		GetVehicleHealth(vehicleid, health);
		if (sscanf(params, "dd", playerid2, price)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /vendermicoche (id) (precio)");
		if (price < 1) return SendClientMessage(playerid, COLOR_GREY, "Precio debe ser mayor a 0.");
		if (playerid == playerid2) return SendClientMessage(playerid, COLOR_GREY, "No puedes venderte el vehículo a ti mismo.");
		if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "El jugador seleccionado no se encuentra conectado.");
		if (!CercaDelWeon(8.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Estás lejos del jugador.");
		if (InfoPersonaje[playerid2][pNivel] == 1) return SendClientMessage(playerid, COLOR_WHITE, "El jugador tiene que ser nivel 2 o más para que puedas venderle vehiculos.");
		if (health < 500) return SendClientMessage(playerid, COLOR_WHITE, "El vehiculo está muy dañado como para ser vendido.");
		if (CountObjVeh(d) != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes vender un vehículo con objetos VIP.");

		Pla_vehicle[playerid2] = playerid;
		Osql_vehicle[playerid2] = d;
		Price_vehicle[playerid2] = price;

		format(string, sizeof string, "* Ofreciste a %s para comprar este %s por $%d.", NombreJugador(playerid2), GetVehicleName(vehicleid), price);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
		format(string, sizeof string, "* %s te ha ofrecidor su %s por $%d, (usa /aceptar coche).", NombreJugador(playerid), GetVehicleName(vehicleid), price);
		SendClientMessage(playerid2, COLOR_LIGHTBLUE, string);
		return 1;
	}
    SendClientMessage(playerid, COLOR_GREY, " Tu necesitas estar dentro de un vehiculo que te pertenece.");
    return 1;
}

CMD:checkllaves(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /checkllaves (Jugador)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "ID no válida.");
	new dialog[2048], gformat[256], iCount = 0;
	Loop(veh, totalvehiculos, 1) if (InfoVehiculo[veh][vTipo] == 0 && strcmp(InfoPersonaje[playerid2][pNombre_Apellido], InfoVehiculo[veh][vPropietario], true) == 0)
	{
		if (InfoVehiculo[veh][vEmbargo] != 0) format(gformat, sizeof gformat, "%s (Embargado)\n", VehicleName[InfoVehiculo[veh][vModelo] - 400]);
		else format(gformat, sizeof gformat, "%s (ID: %d)\n", VehicleName[InfoVehiculo[veh][vModelo] - 400], InfoVehiculo[veh][vIG_id]);
		strcat(dialog, gformat);
		//conteo
		new gformat2[64];
		format(gformat2, sizeof gformat2, "cehvehkey%d", iCount);
		SetPVarInt(playerid, gformat2, veh);
		iCount++;
	}
	if (iCount == 0) return SendClientMessage(playerid, COLOR_WHITE, "Ese jugador no tiene ningún vehículo a su nombre.");
	format(gformat, sizeof gformat, "{00AE57}Vehículos de %s.", NombreDeCuenta(playerid2));
	Dialog_Show(playerid, GotoVehU, DIALOG_STYLE_LIST, gformat, dialog, "Ir", "Salir");
	return 1;
}

Dialog:GotoVehU(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new ID = listitem, gformat[40];
	format(gformat, sizeof gformat, "cehvehkey%d", ID);
	new veh = GetPVarInt(playerid, gformat);
	if (InfoVehiculo[veh][vModelo] == 0) return SendClientMessage(playerid, COLOR_GRAD2, "Seleccionaste un slot vacío.");
	if (InfoVehiculo[veh][vEmbargo]) return SendClientMessage(playerid, COLOR_WHITE, "No se puede tpear a un vehículo confiscado.");
	new Float: carPos[3], vehicleid = InfoVehiculo[veh][vIG_id];
	GetVehiclePos(vehicleid, carPos[0], carPos[1], carPos[2]);
	SetPosEx(playerid, carPos[0], carPos[1], carPos[2], 0.0000, 0, GetVehicleVirtualWorld(vehicleid), 1);
	return 1;
}

CMD:respawncars(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[170], radius;
	if (sscanf(params, "d", radius)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /respawncars (Radio)");
	if (radius < 1 || radius > 50) return SendClientMessage(playerid, COLOR_WHITE, "El radio debe ser de 1 a 50.");
	RespawnNearbyVehicles(playerid, radius);
	format(string, sizeof string, "Usted ha respawneado los vehículos dentro del radio de %d.", radius);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}

CMD:respawnauto(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[170], carid;
	if (sscanf(params, "d", carid)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /respawnauto (carid)");
	if (EsVehFabrica(carid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes respawnear un vehículo de fábrica, que el dueño lo haga.");
	SetVehicleToRespawn(carid);
	format(string, sizeof string, "Vehículo ID %d - Respawneado.", carid);
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}
CMD:respawncar(playerid, params[]) return cmd_respawnauto(playerid, params);
CMD:rtcar(playerid, params[]) return cmd_respawnauto(playerid, params);

CMD:remolcar(playerid, params[])
{
	if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
	{
	    new Float:vX,Float:vY,Float:vZ,Found=0,vid=0,idcar = GetPlayerVehicleID(playerid);
		if(GetVehicleModel(idcar) == 525)
		{
			new Float:pX,Float:pY,Float:pR;
				GetPlayerPos(playerid,pX,pY,pR);

			while((vid<MAX_VEHICLES)&&(!Found))
			{
				vid++;
				GetVehiclePos(vid,vX,vY,vZ);
				if ((floatabs(pX-vX)<7.0)&&(floatabs(pY-vY)<7.0)&&(floatabs(pR-vZ)<7.0)&&(vid!=GetPlayerVehicleID(playerid)))
				{
					Found=1;
					if(IsTrailerAttachedToVehicle(GetPlayerVehicleID(playerid)))
					{
		   				DetachTrailerFromVehicle(GetPlayerVehicleID(playerid));
					}
			   		else
			   		{
		   				AttachTrailerToVehicle(vid,GetPlayerVehicleID(playerid));
					}
				}
			}
			if(!Found)
			{
				SendClientMessage(playerid,COLOR_WHITE,"No hay ningún vehículo cerca.");
			}
		}
		else return SendClientMessage(playerid, COLOR_WHITE, "No puedes remolcar con este vehículo.");
	}
	return 1;
}

new SQLIDVEH[MAX_PLAYERS];

CMD:qmod(playerid)
{
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_WHITE, "Debes ser el conductor de un vehículo.");
	new vehicleid = GetPlayerVehicleID(playerid);
	Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] == vehicleid)
	{
		if (InfoVehiculo[v][vEmbargo] != 0) return SendClientMessage(playerid, COLOR_GREY, "Este vehículo se encuentra embargado.");
		new access = 0, string[160], modList[512], count = 0;
		if (InfoVehiculo[v][vLlavePrestada] == playerid) access = 1;
		if (llaves_vehiculo(playerid, vehicleid) != -1) access = 1;
		if (access == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes las llaves de este vehículo.");
		Loop(f, MAX_MODIFICACIONES, 0) if (GetVehicleComponentInSlot(vehicleid, f) != 0)
		{
			if (f != 9 && f != 7 && f != 8)
			{
				format(modList, sizeof modList, "%s\n%s - %s", modList, partType(f), partName(GetVehicleComponentInSlot(vehicleid, f)));
			}
			else format(modList, sizeof(modList), "%s\n%s", modList, partType(f));
			format(string, sizeof string, "partList%d", count);
			SetPVarInt(playerid, string, GetVehicleComponentInSlot(vehicleid, f));
			count++;
		}
		if (count == 0) return SendClientMessage(playerid, COLOR_GREY, "Este vehiculo no tiene ninguna modificación.");
		format(modList, sizeof modList, "%s\nTodo", modList);
		format(string, sizeof string, "partList%d", count);
		SetPVarInt(playerid, string, 999);
		count++;
		SetPVarInt(playerid, "modCount", count);
		Dialog_Show(playerid, QuitMods, DIALOG_STYLE_LIST, "{00AE57}Partes", modList, "Continuar", "Salir");
		SQLIDVEH[playerid] = v;
		return 1;
	}
	SendClientMessage(playerid, COLOR_WHITE, "Debes estar dentro de un vehículo propio o con llaves.");
 	return 1;
}
CMD:quitarmodificaciones(playerid) return cmd_qmod(playerid);

Dialog:QuitMods(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new veh = SQLIDVEH[playerid], count = GetPVarInt(playerid, "modCount"), string[64];
	Loop(i, count, 0) if (listitem == i)
	{
		format(string, sizeof string, "partList%i", i);
		new partID = GetPVarInt(playerid, string), vehicleid = InfoVehiculo[veh][vIG_id];
		if (partID == 999)
		{
			Loop(f, MAX_MODIFICACIONES, 0)
			{
				RemoveVehicleComponent(vehicleid, GetVehicleComponentInSlot(vehicleid, f));
				InfoVehiculo[veh][vModificacion][f] = 0;
				format(string, sizeof string, "Modificacion%d", f+1);
				guardar_int_mysql("vehiculos", string, InfoVehiculo[veh][vID_sql], 0);
			}
			SendClientMessage(playerid, 0xA2DC35FF, "[INFO]:{FFFFFF} Todas las modificaciones se han eliminado de tu vehículo.");
			return 1;
		}
		RemoveVehicleComponent(vehicleid, partID);
		InfoVehiculo[veh][vModificacion][GetVehicleComponentType(partID)] = 0;
		format(string, sizeof string, "Modificacion%d", GetVehicleComponentType(partID)+1);
		guardar_int_mysql("vehiculos", string, InfoVehiculo[veh][vID_sql], 0);
		SendClientMessage(playerid, 0xA2DC35FF, "[INFO]:{FFFFFF} La modificación que has seleccionado ha sido eliminado.");
	}
	return 1;
}

CMD:oldcar(playerid)
{
	if (gLastCar[playerid] == 0) return SendClientMessage(playerid, -1, "No te has subido a ningún vehículo.");
	new string[170];
	format(string, sizeof string, "Tu último vehiculo manejado fue el ID %d.", gLastCar[playerid]);
	SendClientMessage(playerid, COLOR_GREY, string);
	return 1;
}

CMD:mandarls(playerid, params[])
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[170], playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /mandarls (ID/Jugador)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Usuario desconectado.");
	if (InfoPersonaje[playerid2][pSancionado] != 0) return SendClientMessage(playerid, COLOR_GRAD2, "Información: No puedes sacar a gente de jail, usa el CMD /ir o /liberar.");
	if (GetPlayerAdmin(playerid2, 10) != 0) return SendClientMessage(playerid, COLOR_GRAD2, "No puedes hacer esto con propietarios o programadores.");

	SendClientMessage(playerid2, COLOR_WHITE, "Fuiste llevado a Los Santos por un miembro de la administración.");
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) ha mandado %s(%d) a Los Santos.", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, string);
	SetPosEx(playerid2, 1529.6, -1705.5, 13.4, 0.0, 0, 0, 1);
	return 1;
}
CMD:llevarls(playerid, params[]) return cmd_mandarls(playerid, params);

CMD:musica(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /musica (URL.mp3)");
	Loop(playerid2, MAX_PLAYERS, 0) if (IsPlayerConnectedEx(playerid2) && InfoPersonaje[playerid2][pTogMusic] == 1)
	{
		PlayAudioStreamForPlayer(playerid2, params);
	}
	return 1;
}

//renovación de sistema de casas by EdinsonWalker
LlavesCasa(playerid, id)
{
	if (InfoPersonaje[playerid][pCasa1] == id) return 1;
	if (InfoPersonaje[playerid][pCasa2] == id) return 2;
	return 0;
}

CMD:comprarcasa(playerid)
{
    new string[256], p = -1;
	Loop(x, sizeof InfoCasa, 0) if (IsPlayerInRangeOfPoint(playerid, 2.0, InfoCasa[x][cExteriorX], InfoCasa[x][cExteriorY], InfoCasa[x][cExteriorZ]) && InfoPersonaje[playerid][pInterior] == InfoCasa[x][cExteriorInt] && InfoPersonaje[playerid][pVirtualWorld] == InfoCasa[x][cExteriorVW])
	{
		p = x;
		break;
	}
	if (p == -1) return SendClientMessage(playerid, COLOR_GREY, "No estás en la entrada de ninguna casa.");
	if (InfoCasa[p][cVenta] != 0) return SendClientMessage( playerid, COLOR_GREY, "* Esta casa ya tiene dueño.");
	if (GetPlayerCash(playerid) < InfoCasa[p][cPrecio])
	{
		format(string, sizeof string, "* Te hacen falta $%s para comprar esta casa.", diner_coma(InfoCasa[p][cPrecio]-GetPlayerCash(playerid)));
		SendClientMessage(playerid, COLOR_GREY, string);
		return 1;
	}
	if (InfoCuenta[playerid][jVIP] == 0 || InfoCuenta[playerid][jVIP] == 1)
	{
		if (InfoPersonaje[playerid][pCasa1] != -1) return SendClientMessage(playerid, COLOR_GREY, "Las cuentas comunes o VIP bronce, sólo pueden comprar una casa.");
		InfoPersonaje[playerid][pCasa1] = p;
		guardar_int_mysql("personajes", "Casa", InfoPersonaje[playerid][pID], p);
	}
	else
	{
		if (InfoPersonaje[playerid][pCasa1] == -1)
		{
			InfoPersonaje[playerid][pCasa1] = p;
			guardar_int_mysql("personajes", "Casa", InfoPersonaje[playerid][pID], p);
		}
		else if (InfoPersonaje[playerid][pCasa2] == -1)
		{
			InfoPersonaje[playerid][pCasa2] = p;
			guardar_int_mysql("personajes", "Casa2", InfoPersonaje[playerid][pID], p);
		}
		else { SendClientMessage(playerid, COLOR_GREY, "Ya tienes el máximo de casas."); return 1; }
	}
	InfoCasa[p][cVenta] = 1;
	alm(InfoCasa[p][cPropietario], NombreDeCuenta(playerid));
	GivePlayerCash(playerid, -InfoCasa[p][cPrecio], "comprar casa");
	Tax += (InfoCasa[p][cPrecio] * 40 ) / ( 100 );
	SetPlayerPos(playerid, InfoCasa[p][cExteriorX], InfoCasa[p][cExteriorY], InfoCasa[p][cExteriorZ]);
	SendClientMessage(playerid, COLOR_WHITE, "Felicitaciones por tu nueva compra!");
	SendClientMessage(playerid, COLOR_WHITE, "Escribe {00AE57}/ayuda casa{FFFFFF} para ver los comandos disponibles!");

	mysql_format(DBInsanity, string, sizeof string, "UPDATE casas SET Venta = 1, Propietario = '%e' WHERE ID = '%d'", InfoCasa[p][cPropietario], InfoCasa[p][cID_sql]);
	mysql_tquery(DBInsanity, string);

	format(string, sizeof string, "%s compró la casa ID %d por $%s.", NombreDeCuenta(playerid), p, diner_coma(InfoCasa[p][cPrecio]));
	Log("LOGS/house.log", string);

	LabelPickup_casa(p);
	return 1;
}

CMD:timbre(playerid)
{
    new string[256], h = -1;
	Loop(x, sizeof InfoCasa, 0) if (IsPlayerInRangeOfPoint(playerid, 2.0, InfoCasa[x][cExteriorX], InfoCasa[x][cExteriorY], InfoCasa[x][cExteriorZ]) && InfoPersonaje[playerid][pInterior] == InfoCasa[x][cExteriorInt] && InfoPersonaje[playerid][pVirtualWorld] == InfoCasa[x][cExteriorVW])
	{
		h = x;
		break;
	}
	if (h == -1) return SendClientMessage(playerid, COLOR_GREY, "No estás en la entrada de ninguna casa.");
	foreach(Player, i) if (InfoPersonaje[i][pInterior] == InfoCasa[h][cInteriorInt] && InfoPersonaje[i][pVirtualWorld] == InfoCasa[h][cInteriorVW])
	{
		format(string,sizeof string, "Timbre de %s suena.", InfoCasa[h][cPropietario]);
		SendClientMessage(i, COLOR_PURPLE, string);
		GameTextForPlayer(i, "~n~~n~~n~~n~~n~~n~~n~~n~~p~Timbre...", 4000, 3);
	}
	if (InfoCasa[h][cVenta] != 0) format(string, sizeof string, "presiona el timbre de la casa de %s", InfoCasa[h][cPropietario]);
	else format(string, sizeof string, "presiona el timbre de la casa %d", h);
	ameuwu(playerid, string);
	return 1;
}

CMD:detalles(playerid)
{
	new casa = -1, negocio = GetExtNegocio(playerid);
	Loop(x, totalcasas, 0) if (IsPlayerInRangeOfPoint(playerid, 2.0, InfoCasa[x][cExteriorX], InfoCasa[x][cExteriorY], InfoCasa[x][cExteriorZ]) && InfoPersonaje[playerid][pInterior] == InfoCasa[x][cExteriorInt] && InfoPersonaje[playerid][pVirtualWorld] == InfoCasa[x][cExteriorVW])
	{
		casa = x;
		break;
	}
	new string[200];
	if(casa != -1)
	{
		new location[MAX_ZONE_NAME];
		Get2DZone(location, MAX_ZONE_NAME, InfoCasa[casa][cExteriorX], InfoCasa[casa][cExteriorY], InfoCasa[casa][cExteriorZ]);
		if (InfoCasa[casa][cVenta] == 0)
		{
			format(string, sizeof string, "Propiedad en Venta\n\n— Precio: $%d\n— Clase: %s\n\nPuedes comprarla usando '/comprarcasa'\nPuedes ver su interior usando '/vercasa'", InfoCasa[casa][cPrecio], GetClaseCasa(InfoCasa[casa][cTipo]));
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "Detalles", string, "Continuar", "Salir");
			return 1;
		}
		format(string, sizeof string, "Propiedad Comprada\n\n— Dirección: %s #%d\n— Clase: %s\n\nNo puedes comprar esta casa", location, casa, InfoCasa[casa][cPrecio], GetClaseCasa(InfoCasa[casa][cTipo]));
		Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "Detalles", string, "Continuar", "Salir");
		return 1;
	}
	if (negocio != -1)
	{
		new location[MAX_ZONE_NAME];
		Get2DZone(location, MAX_ZONE_NAME, InfoNegocio[negocio][nExteriorX], InfoNegocio[negocio][nExteriorY], InfoNegocio[negocio][nExteriorZ]);
		if (InfoNegocio[negocio][nVenta] == 0)
		{
			format(string, sizeof string, "Propiedad en Venta\n\n— Nombre: %s\n— Dirección: %s #%d\n— Precio: $%d\n— Tipo: %s\n\nPuedes comprarla usando '/comprarnegocio'", InfoNegocio[negocio][nNombre], location, negocio, InfoNegocio[negocio][nPrecio], GetTipoNegocio(InfoNegocio[negocio][nTipo]));
			Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "Detalles", string, "Continuar", "Salir");
			return 1;
		}
		format(string, sizeof string, "Propiedad Comprada\n— Nombre: %s\n— Dirección: %s #%d\nNo puedes comprar esta propiedad", InfoNegocio[negocio][nNombre], location, negocio);
		Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "Detalles", string, "Continuar", "Salir");
		return 1;	
	}
	SendClientMessage(playerid, COLOR_GREY, "* No estás en la puerta de un negocio o una casa.");
	return 1;
}

CMD:visitar(playerid)
{
	new casa = -1;
	Loop(x, sizeof InfoCasa, 0) if (IsPlayerInRangeOfPoint(playerid, 2.0, InfoCasa[x][cExteriorX], InfoCasa[x][cExteriorY], InfoCasa[x][cExteriorZ]) && InfoPersonaje[playerid][pInterior] == InfoCasa[x][cExteriorInt] && InfoPersonaje[playerid][pVirtualWorld] == InfoCasa[x][cExteriorVW])
	{
		casa = x;
		break;
	}
	if (casa == -1) return SendClientMessage(playerid, COLOR_GREY, "No estás en la entrada de ninguna casa.");
	if (InfoCasa[casa][cVenta] != 0) return SendClientMessage( playerid, COLOR_GREY, "* Esta casa ya tiene dueño.");
	if (DelayVisita[playerid] != 0) return SendClientMessage(playerid, COLOR_GREY, "Debes esperar 5 minutos luego de visitar.");

	VisitandoCasa[playerid] = 30;
	CasaID[playerid] = casa;
	DelayVisita[playerid] = 5;

	SetPosEx(playerid, InfoCasa[casa][cInteriorX], InfoCasa[casa][cInteriorY], InfoCasa[casa][cInteriorZ], InfoCasa[casa][cInteriorR], InfoCasa[casa][cInteriorInt], InfoCasa[casa][cInteriorVW], 1);
	SetCameraBehindPlayer(playerid);
	SendClientMessage(playerid, COLOR_GREEN, "Estás visitando la casa por 30 segundos.");
	return 1;
}
CMD:vercasa(playerid) return cmd_visitar(playerid);

CMD:vendercasa(playerid)
{
    new string[256], casa = -1;
	Loop(x, sizeof InfoCasa, 0) if (IsPlayerInRangeOfPoint(playerid, 2.0, InfoCasa[x][cExteriorX], InfoCasa[x][cExteriorY], InfoCasa[x][cExteriorZ]) && InfoPersonaje[playerid][pInterior] == InfoCasa[x][cExteriorInt] && InfoPersonaje[playerid][pVirtualWorld] == InfoCasa[x][cExteriorVW])
	{
		casa = x;
		break;
	}
	if (casa == -1) return SendClientMessage(playerid, COLOR_GREY, "No estás en la entrada de ninguna casa.");
	if (LlavesCasa(playerid, casa) == 0) return SendClientMessage(playerid, COLOR_GREY, "No eres dueño de esta casa.");
	ClearPropiedad(casa);
	GivePlayerCash(playerid, InfoCasa[casa][cPrecio], "vender casa");
	PlayerPlaySound(playerid, 1052, 0.0, 0.0, 0.0);
	if (LlavesCasa(playerid, casa) == 1)
	{
		InfoPersonaje[playerid][pCasa1] = -1;
		guardar_int_mysql("personajes", "Casa", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pCasa1]);
	}
	else if (LlavesCasa(playerid, casa) == 2)
	{
		InfoPersonaje[playerid][pCasa2] = -1;
		guardar_int_mysql("personajes", "Casa2", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pCasa2]);
	}
	if (InfoPersonaje[playerid][pVirtualWorld] == InfoCasa[casa][cInteriorVW]) SetPosEx(playerid,InfoCasa[casa][cExteriorX], InfoCasa[casa][cExteriorY], InfoCasa[casa][cExteriorZ], InfoCasa[casa][cExteriorR], InfoCasa[casa][cExteriorInt], InfoCasa[casa][cExteriorVW], 1);
	format(string, sizeof string, "~w~Vendiste tu casa por ~n~~g~$%s", diner_coma(InfoCasa[casa][cPrecio]));
	GameTextForPlayer(playerid, string, 4000, 3);
	format(string,sizeof string, "%s vendió su casa (ID %d) for $%s.", NombreDeCuenta(playerid), casa, diner_coma(InfoCasa[casa][cPrecio]));
	Log("LOGS/house.log", string);
	return 1;
}

CMD:cacadeositowuwuwuwu(playerid)
{
	Loop(casa, totalcasas, 0)
	{
		if(InfoCasa[casa][cTipo] == 0) continue;
		foreach(Player, p)
		{
			if (InfoPersonaje[p][pCasa1] == casa)
			{
				InfoPersonaje[p][pCasa1] = -1;
			}
			if (InfoPersonaje[p][pCasa2] == casa)
			{
				InfoPersonaje[p][pCasa2] = -1;
			}
		}
		ClearPropiedad(casa);	
		PreciosCasas(casa);
	}
	SendClientMessage(playerid, -1, "listo broda");
	return 1;
}

CMD:cacadeositowuwuwuwu22(playerid)
{
	new gformat[512];
	Loop(id, totalnegocios, 0)
	{
		if (InfoNegocio[id][nTipo] == 0) continue;
		LimpiarEmpleados(id);
		foreach(Player, p)
		{
			if (InfoPersonaje[p][pNegocio1] == id)
			{
				InfoPersonaje[p][pNegocio1] = -1;
			}
			if (InfoPersonaje[p][pNegocio2] == id)
			{
				InfoPersonaje[p][pNegocio2] = -1;
			}
		}
		alm(InfoNegocio[id][nPropietario], "gobielno");
		InfoNegocio[id][nSeguro] = 0;
		InfoNegocio[id][nVenta] = 0;
		InfoNegocio[id][nEmpleo] = 0;
		InfoNegocio[id][nPrecio] = Random(80000, 500000);
		LabelPickup_negocio(id, 1, 0, 0, 0);
		mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE negocios SET Propietario = '%e', Precio = '%d', Empleo = 0, Seguro = 0, Venta = 0 WHERE ID = '%d'", InfoNegocio[id][nPropietario], InfoNegocio[id][nPrecio], InfoNegocio[id][nID_sql]);
		mysql_tquery(DBInsanity, gformat);
	}
	SendClientMessage(playerid, -1, "listo broda");
	return 1;
}

CMD:avecasa(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[256], house;
	if (sscanf(params, "d", house)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /avecasa (CasaID)");
    if (house < 1 || house > totalcasas) return SendClientMessage(playerid, COLOR_WHITE, "Casa no encontrada.");
	if (InfoCasa[house][cTipo] == 0) return SendClientMessage(playerid, COLOR_GREY, "Esa casa no existe.");
	if (InfoCasa[house][cVenta] == 0) return SendClientMessage(playerid, COLOR_GREY, "Esa casa ya está en venta.");

	foreach(Player, p)
	{
		if (InfoPersonaje[p][pCasa1] == house)
		{
			format(string, sizeof string, "Admin %s vendió tu casa (1) %d.", NombreOriginal(playerid), house);
			SendClientMessage(playerid, COLOR_ORANGE, string);
			InfoPersonaje[p][pCasa1] = -1;
		}
		if (InfoPersonaje[p][pCasa2] == house)
		{
			format(string, sizeof string, "Admin %s vendió tu casa (2) %d.", NombreOriginal(playerid), house);
			SendClientMessage(playerid, COLOR_ORANGE, string);
			InfoPersonaje[p][pCasa2] = -1;
		}
	}
	//limpiar casa
	if (VerificarPersonaje(InfoCasa[house][cPropietario]))
	{
		new casita1, casita2;
		reg_int(0, "Casa", casita1);
		reg_int(0, "Casa2", casita2);
		if (casita1 == house)
		{
			mysql_format(DBInsanity, string, sizeof string, "UPDATE personajes SET Casa = -1 WHERE Nombre_Apellido = '%e'", InfoCasa[house][cPropietario]);
			mysql_tquery(DBInsanity, string);
		}
		if (casita2 == house)
		{
			mysql_format(DBInsanity, string, sizeof string, "UPDATE personajes SET Casa2 = -1 WHERE Nombre_Apellido = '%e'", InfoCasa[house][cPropietario]);
			mysql_tquery(DBInsanity, string);
		}
	}
	//mensaje
	format(string, sizeof string, "Admin %s vendió la casa %d (propietario %s).", NombreDeCuenta(playerid), house, InfoCasa[house][cPropietario]);
	Log("LOGS/house.log", string);
	ClearPropiedad(house);
	PlayerPlaySound(playerid, 1052, 0.0, 0.0, 0.0);
	format(string, sizeof string, "~w~Vendiste la casa %d.", house);
	GameTextForPlayer(playerid, string, 6000, 3);
	return 1;
}

CMD:ircasa(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new house;
	if (sscanf(params, "d", house)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /ircasa (CasaID)");
    if (house < 1 || house > totalcasas) return SendClientMessage(playerid, COLOR_WHITE, "Casa no encontrada.");
	if (InfoCasa[house][cTipo] == 0) return SendClientMessage(playerid, COLOR_GREY, "Esa casa no existe.");
	SetPosEx(playerid, InfoCasa[house][cExteriorX], InfoCasa[house][cExteriorY], InfoCasa[house][cExteriorZ], InfoCasa[house][cExteriorR], InfoCasa[house][cExteriorInt], InfoCasa[house][cExteriorVW], 1);
	GameTextForPlayer(playerid, "~w~Teletransportado", 5000, 1);
	return 1;
}

CMD:cseguro(playerid)
{
	new casa = -1;
	Loop(x, totalcasas, 1)
	{
		if ((IsPlayerInRangeOfPoint(playerid, 2.0, InfoCasa[x][cExteriorX], InfoCasa[x][cExteriorY], InfoCasa[x][cExteriorZ]) && InfoCasa[x][cExteriorInt] == InfoPersonaje[playerid][pInterior] && InfoCasa[x][cExteriorVW] == InfoPersonaje[playerid][pVirtualWorld]) ||
		(IsPlayerInRangeOfPoint(playerid, 5.0, InfoCasa[x][cInteriorX], InfoCasa[x][cInteriorY], InfoCasa[x][cInteriorZ]) && InfoCasa[x][cInteriorInt] == InfoPersonaje[playerid][pInterior] && InfoCasa[x][cInteriorVW] == InfoPersonaje[playerid][pVirtualWorld]) )
		{
			casa = x;
		}
	}
	if (casa == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en la entrada o salida de alguna casa.");
	if (LlavesCasa(playerid, casa) == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes las llaves de esta casa.");
	if (!InfoCasa[casa][cSeguro])
	{
		InfoCasa[casa][cSeguro] = 1;
		ameuwu(playerid, "saca sus llaves de casa y la cierra");
	}
	else if (InfoCasa[casa][cSeguro])
	{
		InfoCasa[casa][cSeguro] = 0;
		ameuwu(playerid, "saca sus llaves de casa y la abre");
	}
	guardar_int_mysql("casas", "Seguro", InfoCasa[casa][cID_sql], InfoCasa[casa][cSeguro]);
	return 1;
}
CMD:casaseguro(playerid) return cmd_cseguro(playerid);

CMD:casamenu(playerid)
{
	new casa = EnCasa(playerid);
	if (casa == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ninguna casa.");
	if (LlavesCasa(playerid, casa) == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes las llaves de esta casa.");
	Dialog_Show(playerid, CasaOpciones, DIALOG_STYLE_LIST, "Menú de casa", "{00AE57}»{EBEBEB} Dinero\n{00AE57}»{EBEBEB} Armario\n{00AE57}»{EBEBEB} Materiales", "Continuar", "Salir");
	return 1;
}
CMD:casa(playerid) return cmd_casamenu(playerid);
CMD:menucasa(playerid) return cmd_casamenu(playerid);

Dialog:CasaOpciones(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new idcasa = EnCasa(playerid), gformat[370];
	if (idcasa == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ninguna casa.");
	switch (listitem)
	{
		case 0:
		{
		    format(gformat, sizeof gformat, "Dinero: {00CC00}$%s", diner_coma(InfoCasa[idcasa][cDinero]));
			Dialog_Show(playerid, DineroCasa, DIALOG_STYLE_LIST, gformat, "{00AE57}»{EBEBEB} Retirar dinero\n{00AE57}»{EBEBEB} Depositar dinero", "Continuar", "Volver");
		}
		case 1:
		{
			SendClientMessage(playerid, 0xEBEBEBFF, "Para guardar objetos/armas en el armario, usa: {00AE57}/guardararmario{EBEBEB} o {00AE57}/garmario");
			SendClientMessage(playerid, 0xEBEBEBFF, "Para sacar objetos/armas del armario, usa: {00AE57}/sacararmario (slot){EBEBEB} o {00AE57}/garmario (slot)");
		}
		case 2:
		{
			format(gformat, sizeof gformat, "Materiales: {8080FF}%d", InfoCasa[idcasa][cMateriales]);
			Dialog_Show(playerid, CasaMateriales, DIALOG_STYLE_LIST, gformat, "{00AE57}»{EBEBEB} Retirar materiales\n{00AE57}»{EBEBEB} Depositar materiales", "Continuar", "Volver");
		}
	}
	return 1;
}

Dialog:DineroCasa(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_casamenu(playerid);
	new idcasa = EnCasa(playerid), gformat[370];
	if (idcasa == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ninguna casa.");
	switch (listitem)
	{
		case 0:
		{
			format(gformat, sizeof gformat, "{EBEBEB}Ingresa el monto que quieres retirar del baúl de tu casa.\n\nTienes {00CC00}$%s{EBEBEB} dólares.\n", diner_coma(InfoCasa[idcasa][cDinero]));
			Dialog_Show(playerid, DineroRCasa, DIALOG_STYLE_INPUT, "Sacar dinero", gformat, "Continuar", "Volver");
		}
		case 1:
		{
			format(gformat, sizeof gformat, "{EBEBEB}Ingresa el monto que quieres depositar en el baúl de tu casa.\n\nTienes {00CC00}$%s{EBEBEB} dólares.\n", diner_coma(InfoCasa[idcasa][cDinero]));
			Dialog_Show(playerid, DineroDCasa, DIALOG_STYLE_INPUT, "Guardar dinero", gformat, "Continuar", "Volver");
		}
	}
	return 1;
}

Dialog:DineroRCasa(playerid, response, listitem, inputtext[])
{
	new idcasa = EnCasa(playerid), gformat[370];
	if (idcasa == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ninguna casa.");
	if (!response)
	{
		format(gformat, sizeof gformat, "Dinero: {00CC00}$%s", diner_coma(InfoCasa[idcasa][cDinero]));
		Dialog_Show(playerid, DineroCasa, DIALOG_STYLE_LIST, gformat, "{00AE57}»{EBEBEB} Retirar dinero\n{00AE57}»{EBEBEB} Depositar dinero", "Continuar", "Volver");
		return 1;
	}
	new amount = strval(inputtext);
	if (!isnumeric(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo números porfavor, vuelve a intentarlo.");
	if (amount < 1) return SendClientMessage(playerid, COLOR_GREY, "* No puedes retirar menos de un dolar.");
	if (InfoCasa[idcasa][cDinero] >= amount)
	{
		InfoCasa[idcasa][cDinero] -= amount;
		GivePlayerCash(playerid, amount, "retiro baul casa");
		format(gformat, sizeof gformat, "Retiraste $%s de tu casa dejaste en el baúl $%s, ahora tienes en bolsillos $%s.", diner_coma(amount), diner_coma(InfoCasa[idcasa][cDinero]), diner_coma(GetPlayerCash(playerid)));
		SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat);
		guardar_int_mysql("casas", "BolosUwU", InfoCasa[idcasa][cID_sql], InfoCasa[idcasa][cDinero]);
		return 1;
	}
	format(gformat, sizeof gformat, "* No puedes retirar $%s, si sólo tienes en el bául $%s.", diner_coma(amount), diner_coma(InfoCasa[idcasa][cDinero]));
	SendClientMessage(playerid, COLOR_GREY, gformat);
	return 1;
}

Dialog:DineroDCasa(playerid, response, listitem, inputtext[])
{
	new idcasa = EnCasa(playerid), gformat[370];
	if (idcasa == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ninguna casa.");
	if (!response)
	{
		format(gformat, sizeof gformat, "Dinero: {00CC00}$%s", diner_coma(InfoCasa[idcasa][cDinero]));
		Dialog_Show(playerid, DineroCasa, DIALOG_STYLE_LIST, gformat, "{00AE57}»{EBEBEB} Retirar dinero\n{00AE57}»{EBEBEB} Depositar dinero", "Continuar", "Volver");
		return 1;
	}
	new amount = strval(inputtext);
	if (!isnumeric(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo números porfavor, vuelve a intentarlo.");
	if (amount < 1) return SendClientMessage(playerid, COLOR_GREY, "* No puedes depositar menos de un dolar.");
	if (GetPlayerCash(playerid) >= amount)
	{
		InfoCasa[idcasa][cDinero] += amount;
		GivePlayerCash(playerid, -amount, "deposito baul casa");
		format(gformat, sizeof gformat, "Depositaste $%s en tu casa (total: $%s), ahora tienes en bolsillos $%s.", diner_coma(amount), diner_coma(InfoCasa[idcasa][cDinero]), diner_coma(GetPlayerCash(playerid)));
		SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat);
		guardar_int_mysql("casas", "BolosUwU", InfoCasa[idcasa][cID_sql], InfoCasa[idcasa][cDinero]);
		return 1;
	}
	format(gformat, sizeof gformat, "* No puedes depositar $%s, si sólo tienes en bolsillos $%s.", diner_coma(amount), diner_coma(GetPlayerCash(playerid)));
	SendClientMessage(playerid, COLOR_GREY, gformat);
	return 1;
}

Dialog:CasaMateriales(playerid, response, listitem, inputtext[])
{
	new idcasa = EnCasa(playerid), gformat[370];
	if (idcasa == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ninguna casa.");
	if (!response) return cmd_casamenu(playerid);
	format(gformat, sizeof gformat, "Materiales: {8080FF}%d", InfoCasa[idcasa][cMateriales]);
	switch (listitem)
	{
		case 0: Dialog_Show(playerid, CasaRMateriales, DIALOG_STYLE_INPUT, gformat, "{EBEBEB}Ingresa el monto de materiales que retirarás del baúl de tu casa.", "Continuar", "Volver");
		case 1: Dialog_Show(playerid, CasaDMateriales, DIALOG_STYLE_INPUT, gformat, "{EBEBEB}Ingresa el monto de materiales que depositarás en el baúl de tu casa.", "Continuar", "Volver");
	}
	return 1;
}

Dialog:CasaRMateriales(playerid, response, listitem, inputtext[])
{
	new idcasa = EnCasa(playerid), gformat[370];
	if (idcasa == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ninguna casa.");
	if (!response)
	{
		format(gformat, sizeof gformat, "Materiales: {8080FF}%d", InfoCasa[idcasa][cMateriales]);
		Dialog_Show(playerid, CasaMateriales, DIALOG_STYLE_LIST, gformat, "{00AE57}»{EBEBEB} Retirar materiales\n{00AE57}»{EBEBEB} Depositar materiales", "Continuar", "Volver");
		return 1;
	}
	new amount = strval(inputtext);
	if (amount < 1) SendClientMessage(playerid, COLOR_GREY, "* No puedes retirar menos de un material.");
	if (!isnumeric(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo números porfavor, vuelve a intentarlo.");
	if (InfoCasa[idcasa][cMateriales] >= amount)
	{
		InfoCasa[idcasa][cMateriales] -= amount;
		InfoPersonaje[playerid][pMateriales] += amount;
		format(gformat, sizeof gformat, "Retiraste %d materiales de tu casa (total: %d), ahora tienes en inventario %d materiales.", amount, InfoPersonaje[playerid][pMateriales]);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat);
		guardar_int_mysql("personajes", "Materiales", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pMateriales]);
		guardar_int_mysql("casas", "Materiales", InfoCasa[idcasa][cID_sql], InfoCasa[idcasa][cMateriales]);
		return 1;
	}
	format(gformat, sizeof gformat, "* No puedes retirar %d materiales, si sólo tienes en casa %d.", amount, InfoCasa[idcasa][cMateriales]);
	SendClientMessage(playerid, COLOR_GREY, gformat);
	return 1;
}

Dialog:CasaDMateriales(playerid, response, listitem, inputtext[])
{
	new idcasa = EnCasa(playerid), gformat[370];
	if (idcasa == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ninguna casa.");
	if (!response)
	{
		format(gformat, sizeof gformat, "Materiales: {8080FF}%d", InfoCasa[idcasa][cMateriales]);
		Dialog_Show(playerid, CasaMateriales, DIALOG_STYLE_LIST, gformat, "{00AE57}»{EBEBEB} Retirar materiales\n{00AE57}»{EBEBEB} Depositar materiales", "Continuar", "Volver");
		return 1;
	}
	new amount = strval(inputtext);
	if (amount < 1) return SendClientMessage(playerid, COLOR_GREY, "* No puedes depositar menos de un material.");
	if (!isnumeric(inputtext)) return SendClientMessage(playerid, COLOR_GREY, "* Sólo números porfavor, vuelve a intentarlo.");
	if (InfoPersonaje[playerid][pMateriales] >= amount)
	{
		InfoCasa[idcasa][cMateriales] += amount;
		InfoPersonaje[playerid][pMateriales] -= amount;
		format(gformat, sizeof gformat, "Depositaste %d materiales en tu casa (total: %d), ahora tienes en inventario %d materiales.", amount, InfoCasa[idcasa][cMateriales], InfoPersonaje[playerid][pMateriales]);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat);
		guardar_int_mysql("personajes", "Materiales", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pMateriales]);
		guardar_int_mysql("casas", "Materiales", InfoCasa[idcasa][cID_sql], InfoCasa[idcasa][cMateriales]);
		return 1;
	}
	format(gformat, sizeof gformat, "* No puedes depositar %d materiales, si sólo tienes en inventario %d.", amount, InfoPersonaje[playerid][pMateriales]);
	SendClientMessage(playerid, COLOR_GREY, gformat);
	return 1;
}

CMD:garmario(playerid)
{
	new id = EnCasa(playerid), gformat[370];
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ninguna casa.");
	if (LlavesCasa(playerid, id) == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes las llaves de esta casa.");
	if (InfoPersonaje[playerid][pManoDerecha] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes un objeto en tu mano derecha.");
	new objeto = InfoPersonaje[playerid][pManoDerecha], objetocant = InfoPersonaje[playerid][pManoDerechaCant];
	new rSlot = -1;
	Loop(xs, 10, 0) if (InfoCasa[id][cArmario][xs] == 0)
	{
		rSlot = xs;
		break;
	}
	if (rSlot == -1) return SendClientMessage(playerid, COLOR_RED, "No puedes guardar más cosas en tu armario, máximo 10 slots.");
	InfoCasa[id][cArmario][rSlot] = objeto;
	InfoCasa[id][cArmarioCant][rSlot] = objetocant;
	mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE casas SET Armario%d = '%d', ArmarioCant%d = '%d' WHERE ID = '%d'", rSlot+1, objeto, rSlot+1, objetocant, InfoCasa[id][cID_sql]);
	mysql_tquery(DBInsanity, gformat);
	ResetPlayerWeapons(playerid);
	RemovePlayerAttachedObject(playerid, 7);
	InfoPersonaje[playerid][pManoDerecha] = 0;
	InfoPersonaje[playerid][pManoDerechaCant] = 0;
	mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE personajes SET Mano_derecha = 0, Cantidad_mano_derecha = 0 WHERE ID = '%d'", InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, gformat);
	if (objetocant == 0 || objetocant == 1) format(gformat, sizeof gformat, "Guardaste en el armario tu %s.", InfoInventario[objeto][NombreObjeto]);
	else
	{
		if (InfoInventario[objeto][IDArma] != 0) format(gformat, sizeof gformat, "Guardaste en el armario tu %s con %d balas.", InfoInventario[objeto][NombreObjeto], objetocant);
		else format(gformat, sizeof gformat, "Guardaste en el armario tu %s con %d de cantidad.", InfoInventario[objeto][NombreObjeto], objetocant);
	}
	SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat);
	format(gformat, sizeof gformat, "guarda en el armario su %s", InfoInventario[objeto][NombreObjeto]);
	ameuwu(playerid, gformat);
	return 1;
}
CMD:guardararmario(playerid) return cmd_garmario(playerid);

CMD:sarmario(playerid, params[])
{
	new id = EnCasa(playerid), gformat[370];
	if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ninguna casa.");
	if (LlavesCasa(playerid, id) == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes las llaves de esta casa.");
	if (InfoPersonaje[playerid][pManoDerecha] != 0) return SendClientMessage(playerid, COLOR_GREY, "Ya tienes un objeto en tu mano derecha.");
	if (InfoPersonaje[playerid][pHorasOn] < 2) return SendClientMessage(playerid, COLOR_WHITE, "Tienes restricción de armas.");
	new rSlot;
	if (sscanf(params, "i", rSlot))
	{
		new count = 0;
		Loop(xs, 10, 0) if (InfoCasa[id][cArmario][xs] != 0) count++;
		if (count == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes nada en tu armario.");
		SendClientMessage(playerid, COLOR_GREY, "Utiliza: /sarmario (Slot)");
		Loop(xs, 10, 0) if (InfoCasa[id][cArmario][xs] != 0)
		{
			format(gformat, sizeof gformat, "Tienes en {00AE57}slot %d{EBEBEB}: %s", xs+1, slot_objeto(InfoCasa[id][cArmario][xs], InfoCasa[id][cArmarioCant][xs]));
			SendClientMessage(playerid, 0xEBEBEBFF, gformat);
		}
		return 1;
	}
	if (rSlot < 1 || rSlot > 10) { SendClientMessage(playerid, COLOR_GREY, "El número de slot debe estar entre 1 y 10."); return 1; }
	rSlot--;
	if (InfoCasa[id][cArmario][rSlot] == 0) return SendClientMessage(playerid, COLOR_RED, "No tienes nada en ese slot.");
	new objeto = InfoCasa[id][cArmario][rSlot], objetocant = InfoCasa[id][cArmarioCant][rSlot];
	InfoCasa[id][cArmario][rSlot] = 0;
	InfoCasa[id][cArmarioCant][rSlot] = 0;
	mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE casas SET Armario%d = 0, ArmarioCant%d = 0 WHERE ID = '%d'", rSlot+1, rSlot+1, InfoCasa[id][cID_sql]);
	mysql_tquery(DBInsanity, gformat);
	InfoPersonaje[playerid][pManoDerecha] = objeto;
	InfoPersonaje[playerid][pManoDerechaCant] = objetocant;
	mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE personajes SET Mano_derecha = '%d', Cantidad_mano_derecha = '%d' WHERE ID = '%d'", objeto, objetocant, InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, gformat);
	if (objetocant == 1 || objetocant == 0) format(gformat, sizeof gformat, "Sacaste tu %s del armario.", InfoInventario[objeto][NombreObjeto]);
	else
	{
		if (InfoInventario[objeto][IDArma] != 0) format(gformat, sizeof gformat, "Sacaste tu %s con %d balas del armario.", InfoInventario[objeto][NombreObjeto], objetocant);
		else format(gformat, sizeof gformat, "Sacaste tu %s con %d de cantidad del armario.", InfoInventario[objeto][NombreObjeto], objetocant);
	}
	SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat);
	format(gformat, sizeof gformat, "saca su %s del armario", InfoInventario[objeto][NombreObjeto]);
	ameuwu(playerid, gformat);
	ResetPlayerWeapons(playerid);
	if (InfoInventario[objeto][IDArma] > 0)
	{
		GivePlayerWeapon(playerid, InfoInventario[objeto][IDArma], objetocant);
	}
	PonerObjeto(playerid, 1, objeto);
	return 1;
}
CMD:sacararmario(playerid, params[]) return cmd_sarmario(playerid, params);

CMD:editarh(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	new string[512], id, valor;
	if (sscanf(params, "s[32]", params))
	{
		SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarcasa (Opción) (CasaID) (Monto)");
		SendClientMessage(playerid, COLOR_GREY, "Opciones: exterior, interior, clase (1-4), nivel, precio");
		return 1;
	}
	if (!strcmp(params, "clase", true, 5))
	{
		if (sscanf(params, "s[32]ii", params, id, valor)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarcasa clase (CasaID) (Clase)");
		if (id < 1 || id > totalcasas) return SendClientMessage(playerid, COLOR_WHITE, "Casa no encontrada.");
		if (InfoCasa[id][cTipo] == 0) return SendClientMessage(playerid, COLOR_GREY, "Esa casa no existe.");
		if (valor < 1 || valor > 5) return SendClientMessage(playerid, COLOR_WHITE, "Sólo hay 4 clases (1 baja, 2 media-baja, 3 media, 4 media-alta, 5 alta)");
		InfoCasa[id][cTipo] = valor;
		format(string, sizeof string, "Cambiaste la clase de la casa %d a clase: %s.", id, GetClaseCasa(InfoCasa[id][cTipo]));
		SendClientMessage(playerid, COLOR_WHITE, string);
		guardar_int_mysql("casas", "Tipo", InfoCasa[id][cID_sql], InfoCasa[id][cTipo]);
	}
	else if (!strcmp(params, "interior", true, 8))
	{
		if (sscanf(params, "s[32]i", params, id)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarcasa interior (CasaID)");
		if (id < 1 || id > totalcasas) return SendClientMessage(playerid, COLOR_WHITE, "Casa no encontrada.");
		if (InfoCasa[id][cTipo] == 0) return SendClientMessage(playerid, COLOR_GREY, "Esa casa no existe.");
		GetPlayerPos(playerid, InfoCasa[id][cInteriorX], InfoCasa[id][cInteriorY], InfoCasa[id][cInteriorZ]);
		GetPlayerFacingAngle(playerid, InfoCasa[id][cInteriorR]);
		InfoCasa[id][cInteriorInt] = GetPlayerInterior(playerid);
		InfoCasa[id][cInteriorVW] = 400+id;
		format(string, sizeof string, "Cambiaste el interior de la casa %d.", id);
		SendClientMessage(playerid, COLOR_WHITE, string);
		new query[1048];
		mysql_format(DBInsanity, query, sizeof query, "UPDATE casas SET Interior_X = '%f', Interior_Y = '%f', Interior_Z = '%f', Interior_R = '%f', Interior_Int = '%d', Interior_VW = '%d' WHERE ID = '%d'", InfoCasa[id][cInteriorX], InfoCasa[id][cInteriorY], InfoCasa[id][cInteriorZ], InfoCasa[id][cInteriorR], InfoCasa[id][cInteriorInt], InfoCasa[id][cInteriorVW], InfoCasa[id][cID_sql]);
		mysql_tquery(DBInsanity, query);
		LabelPickup_casa(id);
	}
	else if (!strcmp(params, "exterior", true, 8))
	{
		if (sscanf(params, "s[32]i", params, id)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarcasa exterior (CasaID)");
		if (id < 1 || id > totalcasas) return SendClientMessage(playerid, COLOR_WHITE, "Casa no encontrada.");
		if (InfoCasa[id][cTipo] == 0) return SendClientMessage(playerid, COLOR_GREY, "Esa casa no existe.");
		GetPlayerPos(playerid, InfoCasa[id][cExteriorX], InfoCasa[id][cExteriorY], InfoCasa[id][cExteriorZ]);
		GetPlayerFacingAngle(playerid, InfoCasa[id][cExteriorR]);
		InfoCasa[id][cExteriorInt] = GetPlayerInterior(playerid);
		InfoCasa[id][cExteriorVW] = GetPlayerVirtualWorld(playerid);
		format(string, sizeof string, "Cambiaste el exterior de la casa %d.", id);
		SendClientMessage(playerid, COLOR_WHITE, string);
		new query[1048];
		mysql_format(DBInsanity, query, sizeof query, "UPDATE casas SET Exterior_X = '%f', Exterior_Y = '%f', Exterior_Z = '%f', Exterior_R = '%f', Exterior_Int = '%d', Exterior_VW = '%d' WHERE ID = '%d'", InfoCasa[id][cExteriorX], InfoCasa[id][cExteriorY], InfoCasa[id][cExteriorZ], InfoCasa[id][cExteriorR], InfoCasa[id][cExteriorInt], InfoCasa[id][cExteriorVW], InfoCasa[id][cID_sql]);
		mysql_tquery(DBInsanity, query);
		LabelPickup_casa(id);
	}
	else if (!strcmp(params, "nivel", true, 5))
	{
		if (sscanf(params, "s[32]ii", params, id, valor)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarcasa exterior (CasaID)");
		if (id < 1 || id > totalcasas) return SendClientMessage(playerid, COLOR_WHITE, "Casa no encontrada.");
		if (InfoCasa[id][cTipo] == 0) return SendClientMessage(playerid, COLOR_GREY, "Esa casa no existe.");
		if (valor < 1 || valor > 99) return SendClientMessage(playerid, COLOR_WHITE, "Sólo hasta el nivel 99.");
		InfoCasa[id][cNivel] = valor;
		format(string, sizeof string, "Cambiaste el nivel %d de la casa %d.", valor, id);
		SendClientMessage(playerid, COLOR_WHITE, string);
		guardar_int_mysql("casas", "Nivel", InfoCasa[id][cID_sql], InfoCasa[id][cNivel]);
		LabelPickup_casa(id);
	}
	else if (!strcmp(params, "precio", true, 6))
	{
		if (sscanf(params, "s[32]ii", params, id, valor)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarcasa exterior (CasaID)");
		if (id < 1 || id > totalcasas) return SendClientMessage(playerid, COLOR_WHITE, "Casa no encontrada.");
		if (InfoCasa[id][cTipo] == 0) return SendClientMessage(playerid, COLOR_GREY, "Esa casa no existe.");
		InfoCasa[id][cPrecio] = valor;
		format(string, sizeof string, "Cambiaste el precio a $%s de la casa %d.", diner_coma(valor), id);
		SendClientMessage(playerid, COLOR_WHITE, string);
		guardar_int_mysql("casas", "Precio", InfoCasa[id][cID_sql], InfoCasa[id][cPrecio]);
		LabelPickup_casa(id);
	}
	return 1;
}
CMD:editarc(playerid, params[]) return cmd_editarh(playerid, params);
CMD:editarcasa(playerid, params[]) return cmd_editarh(playerid, params);

CMD:borrarcasa(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	new id, gformat[235], query[1028];
	if (sscanf(params, "d", id)) return SendClientMessage(playerid, COLOR_GREY, "USA: /borrarcasa [Casa ID]");
	if (id < 1 || id > totalcasas) return SendClientMessage(playerid, COLOR_WHITE, "Casa no encontrada.");
	if (InfoCasa[id][cTipo] == 0) return SendClientMessage(playerid, COLOR_GREY, "Esa casa no existe.");
	//por si tenia dueño
	if (InfoCasa[id][cVenta] != 0)
	{
		foreach(Player, p)
		{
			if (InfoPersonaje[p][pCasa1] == id)
			{
				format(gformat, sizeof gformat, "Admin %s borró tu casa (1) %d.", NombreOriginal(playerid), id);
				SendClientMessage(playerid, COLOR_ORANGE, gformat);
				InfoPersonaje[p][pCasa1] = -1;
			}
			if (InfoPersonaje[p][pCasa2] == id)
			{
				format(gformat, sizeof gformat, "Admin %s borró tu casa (2) %d.", NombreOriginal(playerid), id);
				SendClientMessage(playerid, COLOR_ORANGE, gformat);
				InfoPersonaje[p][pCasa2] = -1;
			}
		}
		//limpiar casa
		if (VerificarPersonaje(InfoCasa[id][cPropietario]))
		{
			new casita1, casita2;
			reg_int(0, "Casa", casita1);
			reg_int(0, "Casa2", casita2);
			if (casita1 == id)
			{
				mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE personajes SET Casa = -1 WHERE Nombre_Apellido = '%e'", InfoCasa[id][cPropietario]);
				mysql_tquery(DBInsanity, gformat);
			}
			if (casita2 == id)
			{
				mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE personajes SET Casa2 = -1 WHERE Nombre_Apellido = '%e'", InfoCasa[id][cPropietario]);
				mysql_tquery(DBInsanity, gformat);
			}
		}
	}
	//destroy pickup+label
	noexitcasa(id);
	//clear sell
	InfoCasa[id][cSeguro] = 1;
	alm(InfoCasa[id][cPropietario], "gobielno");
	InfoCasa[id][cVenta] = 0; // Casa en venta.
	InfoCasa[id][cDinero] = 0;
	InfoCasa[id][cMateriales] = 0;
	Loop(x, 10, 0)
	{
		InfoCasa[id][cArmario][x] = 0;
		InfoCasa[id][cArmarioCant][x] = 0;
		mysql_format(DBInsanity, query, sizeof query, "UPDATE casas SET Armario%d = 0 , ArmarioCant%d = 0 WHERE ID = '%d'", x+1, x+1, InfoCasa[id][cID_sql]);
		mysql_tquery(DBInsanity, query);
	}
	mysql_format(DBInsanity, query, sizeof query, "UPDATE casas SET Propietario = '%e', Seguro = 1, Venta = 0, BolosUwU = 0, Materiales = 0 WHERE ID = '%d'", InfoCasa[id][cPropietario], InfoCasa[id][cID_sql]);
	mysql_tquery(DBInsanity, query);
	//coordenadas
	InfoCasa[id][cExteriorX] = 0.0;
	InfoCasa[id][cExteriorY] = 0.0;
	InfoCasa[id][cExteriorZ] = 0.0;
	InfoCasa[id][cExteriorR] = 0.0;
	InfoCasa[id][cExteriorInt] = 0;
	InfoCasa[id][cExteriorVW] = 0;
	InfoCasa[id][cInteriorX] = 0.0;
	InfoCasa[id][cInteriorY] = 0.0;
	InfoCasa[id][cInteriorZ] = 0.0;
	InfoCasa[id][cInteriorR] = 0.0;
	InfoCasa[id][cInteriorInt] = 0;
	InfoCasa[id][cInteriorVW] = 0;
	//otros
	InfoCasa[id][cPrecio] = 0;
	InfoCasa[id][cNivel] = 0;
	InfoCasa[id][cTipo] = 0;
	mysql_format(DBInsanity, query, sizeof query, "UPDATE casas SET Exterior_X = 0.0, Exterior_Y = 0.0, Exterior_Z = 0.0, Exterior_R = 0.0, Exterior_Int = 0, Exterior_VW = 0, Interior_X = 0.0, Interior_Y = 0.0, \
	Interior_Z = 0.0, Interior_R = 0.0, Interior_Int = 0, Interior_VW = 0, Precio = 0, Nivel = 0, Tipo = 0 WHERE ID = '%d'", InfoCasa[id][cID_sql]);
	mysql_tquery(DBInsanity, query);
	//mensaje
	format(gformat, sizeof gformat, "Borraste la casa ID %d, SQL vacía: %d", id, InfoCasa[id][cID_sql]);
	SendClientMessage(playerid, -1, gformat);
	return 1;
}

CMD:vercasaint(playerid, params[])
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new house;
	if (sscanf(params, "d", house)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /vercasaint (CasaID)");
    if (house < 1 || house > totalcasas) return SendClientMessage(playerid, COLOR_WHITE, "Casa no encontrada.");
	if (InfoCasa[house][cTipo] == 0) return SendClientMessage(playerid, COLOR_GREY, "Esa casa no existe.");
	SetPosEx(playerid, InfoCasa[house][cInteriorX], InfoCasa[house][cInteriorY], InfoCasa[house][cInteriorZ], InfoCasa[house][cInteriorR], InfoCasa[house][cInteriorInt], InfoCasa[house][cInteriorVW], 1);
	GameTextForPlayer(playerid, "~w~Teletransportado", 5000, 1);
	return 1;
}

CMD:verinterior(playerid, params[])
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new interior;
	if (sscanf(params, "d", interior)) return SendClientMessage(playerid, COLOR_GREY, "Utiliza: /verinterior (InteriorID)");
	if (interior < 1 || interior > 14) return SendClientMessage(playerid, 0xFF6347AA, "Sólo hay interiores ID desde 1 hasta el 14.");
	SetInteriorCasa(playerid, -1, interior);
	return 1;
}

CMD:editarinterior(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new casa, interior, gformat[195];
	if (sscanf(params, "dd", casa, interior)) return SendClientMessage(playerid, COLOR_GREY, "Utiliza: /editarinterior (CasaID) (InteriorID)");
    if (casa < 1 || casa > totalcasas) return SendClientMessage(playerid, COLOR_WHITE, "Casa no encontrada.");
	if (InfoCasa[casa][cTipo] == 0) return SendClientMessage(playerid, COLOR_GREY, "Esa casa no existe.");
	if (interior < 1 || interior > 14) return SendClientMessage(playerid, 0xFF6347AA, "Sólo hay interiores ID desde 1 hasta el 14.");
	SetInteriorCasa(-1, casa, interior);
	LabelPickup_casa(casa);
	format(gformat, sizeof gformat, "Ahora la casa ID: %d, tiene le interior ID: %d - Clase: %s.", casa, interior, GetClaseCasa(InfoCasa[casa][cTipo]));
	SendClientMessage(playerid, 0x00cc00ff, gformat);
	return 1;
}

CMD:crearcasa(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	new interior, precio, nivel, gformat[210];
	if (sscanf(params, "ddd", interior, precio, nivel)) return SendClientMessage(playerid, COLOR_GREY, "Utiliza: /crearcasa (InteriorID) (Precio) (Nivel)");
	if (interior < 1 || interior > 14) return SendClientMessage(playerid, 0xFF6347AA, "Sólo hay interiores ID desde 1 hasta el 14. Si quieres saber las ID usa: /VerInterior");
	if (nivel < 1 || nivel > 99) return SendClientMessage(playerid, 0xFF6347AA, "Sólo niveles desde 1 hasta el 99.");
	Loop(cid, MAX_CASAS, 1) if (!InfoCasa[cid][cTipo])
	{
		GetPlayerPos(playerid, InfoCasa[cid][cExteriorX], InfoCasa[cid][cExteriorY], InfoCasa[cid][cExteriorZ]);
		GetPlayerFacingAngle(playerid, InfoCasa[cid][cExteriorR]);
		InfoCasa[cid][cExteriorVW] = GetPlayerVirtualWorld(playerid);
		InfoCasa[cid][cExteriorInt] = GetPlayerInterior(playerid);
		InfoCasa[cid][cSeguro] = 1;
		InfoCasa[cid][cVenta] = 0;
		InfoCasa[cid][cGarage] = -1;
		alm(InfoCasa[cid][cPropietario], "gobielno");
		InfoCasa[cid][cPrecio] = precio;
		new Float: x, Float: y, Float: z, Float: r, int, clase;
		switch (interior)
		{
			//baja
			case 1: x = 266.5080, y = 304.9096, z = 999.1484, r = 271.8487, int = 2, clase = 1;
			case 2: x = 2218.4019, y = -1076.2317, z = 1050.4844, r = 94.0354, int = 1, clase = 1;
			case 3: x = 2233.7324, y = -1115.2200, z = 1050.8828, r = 4.4446, int = 5, clase = 1;
			//media-baja
			case 4: x = 2468.8379, y = -1698.2688, z = 1013.5078, r = 90.6120, int = 2, clase = 2;
			case 5: x = 217.2689, y = 1275.1978, z = 1059.0253, r = 1.2881, int = 4, clase = 2;
			case 6: x = 295.1263, y = 1472.2615, z = 1080.2578, r = 358.1545, int = 15, clase = 2;
			case 7: x = 226.7467, y = 1239.9583, z = 1082.1406, r = 87.4319, int = 2, clase = 2;
			//media
			case 8: x = 2270.4004, y = -1210.5198, z = 1047.5625, r = 91.5055, int = 10, clase = 3;
			case 9: x = 2196.8484, y = -1204.3329, z = 1049.0234, r = 94.3722, int = 6, clase = 3;
			//media-alta
			case 10: x = 83.0492, y = 1322.2887, z = 1083.8662, r = 0.9745, int = 9, clase = 4;
			case 11: x = 2317.7004, y = -1026.5896, z = 1050.2178, r = 7.2412, int = 9, clase = 4;
			case 12: x = 2324.4644, y = -1149.5463, z = 1050.7101, r = 2.8840, int = 12, clase = 4;
			//alta
			case 13: x = 140.2607, y = 1365.9283, z = 1083.8594, r = 3.7945, int = 5, clase = 5;
			case 14: x = 1260.6597, y = -785.3624, z = 1091.9063, r = 272.6137, int = 5, clase = 5;
		}
		InfoCasa[cid][cTipo] = clase;
		InfoCasa[cid][cNivel] = nivel;
		InfoCasa[cid][cInteriorX] = x;
		InfoCasa[cid][cInteriorY] = y;
		InfoCasa[cid][cInteriorZ] = z;
		InfoCasa[cid][cInteriorR] = r;
		InfoCasa[cid][cInteriorInt] = int;
		InfoCasa[cid][cInteriorVW] = 400+cid;
		format(gformat, sizeof gformat, "Casa nueva ID: %d - Precio: $%s - Clase: %s.", cid, diner_coma(precio), GetClaseCasa(clase));
		SendClientMessage(playerid, 0x90C3D4FF, gformat);
		LabelPickup_casa(cid);
		new que2ry[1000], query[1500];
		//opción idsql ya creada.
		if (InfoCasa[cid][cID_sql] != 0)
		{
			format(que2ry, sizeof que2ry, "UPDATE casas SET Propietario = '%s', Tipo = '%d', Seguro = '%d', Venta = '%d', Exterior_X = '%f', Exterior_Y = '%f', Exterior_Z = '%f', Exterior_R = '%f', Exterior_Int = '%d', Exterior_VW = '%d',",
			InfoCasa[cid][cPropietario],
			InfoCasa[cid][cTipo],
			InfoCasa[cid][cSeguro],
			InfoCasa[cid][cVenta],
			InfoCasa[cid][cExteriorX],
			InfoCasa[cid][cExteriorY],
			InfoCasa[cid][cExteriorZ],
			InfoCasa[cid][cExteriorR],
			InfoCasa[cid][cExteriorInt],
			InfoCasa[cid][cExteriorVW]);
			mysql_format(DBInsanity, query, sizeof query, "%s Interior_X = '%f', Interior_Y = '%f', Interior_Z = '%f', Interior_R = '%f', Interior_Int = '%d', Interior_VW = '%d', Precio = '%d', Nivel = '%d' WHERE ID = '%d'",
			que2ry,
			InfoCasa[cid][cInteriorX],
			InfoCasa[cid][cInteriorY],
			InfoCasa[cid][cInteriorZ],
			InfoCasa[cid][cInteriorR],
			InfoCasa[cid][cInteriorInt],
			InfoCasa[cid][cInteriorVW],
			InfoCasa[cid][cPrecio],
			InfoCasa[cid][cNivel],
			InfoCasa[cid][cID_sql]);
			mysql_tquery(DBInsanity, query);
			cid = MAX_CASAS;
			return 1;
		}
		format(que2ry, sizeof que2ry, "INSERT INTO casas (Propietario, Tipo, Seguro, Venta, Exterior_X, Exterior_Y, Exterior_Z, Exterior_R, Exterior_Int, Exterior_VW, Interior_X, Interior_Y, Interior_Z, Interior_R, Interior_Int, Interior_VW, Precio, Nivel)");
		mysql_format(DBInsanity, query, sizeof query, "%s VALUES ('%e', '%d', '%d',  '%d', '%f', '%f', '%f', '%f', '%d', '%d', '%f', '%f', '%f', '%f', '%d', '%d', '%d', '%d')",
		que2ry,
		InfoCasa[cid][cPropietario],
		InfoCasa[cid][cTipo],
		InfoCasa[cid][cSeguro],
		InfoCasa[cid][cVenta],
		InfoCasa[cid][cExteriorX],
		InfoCasa[cid][cExteriorY],
		InfoCasa[cid][cExteriorZ],
		InfoCasa[cid][cExteriorR],
		InfoCasa[cid][cExteriorInt],
		InfoCasa[cid][cExteriorVW],
		InfoCasa[cid][cInteriorX],
		InfoCasa[cid][cInteriorY],
		InfoCasa[cid][cInteriorZ],
		InfoCasa[cid][cInteriorR],
		InfoCasa[cid][cInteriorInt],
		InfoCasa[cid][cInteriorVW],
		InfoCasa[cid][cPrecio],
		InfoCasa[cid][cNivel]);
		mysql_tquery(DBInsanity, query, "OnCasaCreate", "i", cid);
		cid = MAX_CASAS;
		return 1;
	}
	SendClientMessage(playerid, COLOR_RED, "Se alcanzó el máximo de casas (500)");
	return 1;
}

forward OnCasaCreate(cid);
public OnCasaCreate(cid)
{
	InfoCasa[cid][cID_sql] = cache_insert_id();
	cache_unset_active();
	totalcasas++;
    return 1;
}

CMD:rcategoria(playerid)
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	Dialog_Show(playerid, RespawnCategoria, DIALOG_STYLE_LIST, "Elige cuales respawnear", "Facciones\nVIPs\nNegocios\nRentables\nUsuarios", "Continuar", "Salir");
	return 1;
}

Dialog:RespawnCategoria(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	if (listitem == 0)
	{
		new gformat[320], dialog[3048], iCount = 0;
		Loop(id, totalfacciones, 1) if (InfoFaccion[id][fTipo] != 0)
		{
			format(gformat, sizeof gformat, "{EBEBEB}%s ({589DA0}%d{EBEBEB})\n", InfoFaccion[id][fNombre], id);
			strcat(dialog, gformat);
			//conteo
			new gformat2[64];
			format(gformat2, sizeof gformat2, "countfacr%d", iCount);
			SetPVarInt(playerid, gformat2, id);
			iCount++;
		}
		Dialog_Show(playerid, RespawnFacciones, DIALOG_STYLE_LIST, "Facciones", dialog, "Continuar", "Volver");
		return 1;
	}
	new tipo = listitem+1, bool:unwanted[MAX_VEHICLES], string[170], count = 0;
	Loop(playerid2, MAX_PLAYERS, 0) if (IsPlayerInAnyVehicle(playerid2))
	{
		unwanted[GetPlayerVehicleID(playerid2)] = true;
	}
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] != 0)
	{
		new vehicleid = InfoVehiculo[id][vIG_id];
		if (InfoVehiculo[id][vNegocio] != 0)
		{
			if (!unwanted[vehicleid] && tipo == 3)
			{
				SetVehicleToRespawn(vehicleid);
				SetVehicleParamsEx(vehicleid,0,0,0,0,0,0,0);
				arr_Engine{vehicleid} = 0;
				count++;
			}
		}
		else
		{
			if (!unwanted[vehicleid] && InfoVehiculo[id][vTipo] == 200 && tipo == 2)
			{
				SetVehicleToRespawn(vehicleid);
				SetVehicleParamsEx(vehicleid,0,0,0,0,0,0,0);
				arr_Engine{vehicleid} = 0;
				count++;
			}
			if (!unwanted[vehicleid] && InfoVehiculo[id][vTipo] == 600 && tipo == 4)
			{
				SetVehicleToRespawn(vehicleid);
				SetVehicleParamsEx(vehicleid,0,0,0,0,0,0,0);
				arr_Engine{vehicleid} = 0;
				count++;
			}
			if (!unwanted[vehicleid] && InfoVehiculo[id][vTipo] == 0 && tipo == 5 && InfoVehiculo[id][vNegocio] == 0)
			{
				SetVehicleToRespawn(vehicleid);
				SetVehicleParamsEx(vehicleid,0,0,0,0,0,0,0);
				arr_Engine{vehicleid} = 0;
				count++;
			}
		}
	}
	new namecato[19];
	switch (listitem)
	{
		case 1: alm(namecato, "vips");
		case 2: alm(namecato, "negocios");
		case 3: alm(namecato, "rentables");
		case 4: alm(namecato, "usuarios");
	}
	format(string, sizeof string, "Se respawnearon %d vehículos de la categoria '%s'.", count, namecato);
	SendClientMessage(playerid, 0x00AE57FF, string);
	return 1;
}

Dialog:RespawnFacciones(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new ID = listitem, gformat[40];
	format(gformat, sizeof gformat, "countfacr%d", ID);
	new faccion = GetPVarInt(playerid, gformat);
	new bool:unwanted[MAX_VEHICLES], string[170], count = 0;
	Loop(playerid2, MAX_PLAYERS, 0) if (IsPlayerInAnyVehicle(playerid2))
	{
		unwanted[GetPlayerVehicleID(playerid2)] = true;
	}
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] != 0)
	{
		new vehicleid = InfoVehiculo[id][vIG_id];
		if (InfoVehiculo[id][vTipo] == faccion)
		{
			if (!unwanted[vehicleid])
			{
				SetVehicleToRespawn(vehicleid);
				SetVehicleParamsEx(vehicleid,0,0,0,0,0,0,0);
				arr_Engine{vehicleid} = 0;
				count++;
			}
		}
	}
	format(string, sizeof string, "Se respawnearon %d vehículos de la facción %d '%s'.", count, faccion, InfoFaccion[faccion][fNombre]);
	SendClientMessage(playerid, 0x00AE57FF, string);
	return 1;
}

CMD:respawntodo(playerid)
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	SendClientMessage(playerid, 0x00CCCCFF, "* Por el momento dejamos habilitado /rcategoria.");
/*	new bool:unwanted[MAX_VEHICLES], string[170], count = 0;
	Loop(playerid2, MAX_PLAYERS, 0) if (IsPlayerInAnyVehicle(playerid2))
	{
		unwanted[GetPlayerVehicleID(playerid2)] = true;
	}
	Loop(car, MAX_VEHICLES, 0) if (GetVehicleModel(car))
	{
		if (!unwanted[car] && !EsVehFabrica(car))
		{
			SetVehicleToRespawn(car);
			SetVehicleParamsEx(car,0,0,0,0,0,0,0);
			arr_Engine{car} = 0;
			count++;
		}
	}
	format(string, sizeof string, "{FF6347}Administración:{FFFFFF} %d vehículos fueron respawneados por %s(%d).", count, InfoCuenta[playerid][jApodo], playerid);
	SendAdminMessage(0xFFFFFFFF, string);*/
	return 1;
}
CMD:racall(playerid) return cmd_respawntodo(playerid);

CMD:reparartodo(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[170], count = 0;
	Loop(car, MAX_VEHICLES, 0) if (GetVehicleModel(car))
	{
		RepairVehicle(car);
		if (GetVehicleModel(car) == 528 || GetVehicleModel(car) == 427) SetVehicleHealth(car, 5000.0);
		else SetVehicleHealth(car, 1000.0);
		count++;
	}
	format(string, sizeof string, "Administración:{FFFFFF} %d vehículos fueron reparados por %s(%d).", count, InfoCuenta[playerid][jApodo], playerid);
	SendAdminMessage(0xFF6347FF, string);
    return 1;
}

CMD:eliminarcheckpoint(playerid, params[])
{
    DeletePVar(playerid, "TrackCar");
    DisablePlayerCheckpoint(playerid);
    SendClientMessage(playerid,COLOR_WHITE,"{A2DC35}[INFO]:{FFFFFF} Todos los checkpoints fueron eliminados.");
	return 1;
}

CMD:revisarmaletero(playerid)
{
	new string[256];
	if (!member_faccion(playerid, 1, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	new veh = check_vehicles(playerid, 9.0);
	if (veh == -1) return SendClientMessage(playerid, COLOR_GREY, "No estás cerca de ningún vehiculo de usuario.");
	new count = 0;
	Loop(x, 10, 0) if (InfoVehiculo[veh][vMaletero][x] != 0)
	{
		count++;
		format(string, sizeof string, "#%d %s", x+1, slot_objeto(InfoVehiculo[veh][vMaletero][x], InfoVehiculo[veh][vMaleteroCant][x]));
		SendClientMessage(playerid, COLOR_WHITE, string);
	}
	if (count == 0) return SendClientMessage(playerid, COLOR_GREY, "No hay nada en el maletero.");
	return 1;
}

CMD:limpiarmaletero(playerid)
{
	if (!member_faccion(playerid, 1, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	new veh = check_vehicles(playerid, 9.0);
	if (veh == -1) return SendClientMessage(playerid, COLOR_GREY, "No estás cerca de ningún vehiculo de usuario.");
	if (InfoVehiculo[veh][vMaleteroOn] == 0) return SendClientMessage(playerid, COLOR_GRAD3, "El maletero está cerrado.");
	new dex_query[170];
	Loop(x, 10, 0)
	{
		InfoVehiculo[veh][vMaletero][x] = 0;
		InfoVehiculo[veh][vMaleteroCant][x] = 0;
		mysql_format(DBInsanity, dex_query, sizeof dex_query, "UPDATE vehiculos SET Maletero%d = 0, MaleteroCant%d = 0 WHERE ID = '%d'", x+1, x+1, InfoVehiculo[veh][vID_sql]);
		mysql_tquery(DBInsanity, dex_query);
	}
	SendClientMessage(playerid, COLOR_WHITE,  "Removiste todos los objetos del maletero.");
	return 1;
}

CMD:revivir(playerid, params[])
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[170], playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /revivir (playerid)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Usuario desconectado.");
	if (GetPVarInt(playerid2, "EstaCrack") == 0) return SendClientMessage(playerid, COLOR_GREY, "Usuario no herido.");

	DestroyDynamic3DTextLabelEx(InfoPersonaje[playerid2][pNameTag]);
	SendClientMessage(playerid2, COLOR_WHITE, "Un miembro de la administración te revivió.");
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) ha revivido a %s(%d).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, string);
	KillEMSQueue(playerid2);
	ClearAnimations(playerid2);
	ResetPlayerDamages(playerid2);
	dar_vida(playerid2, 100);
	timer_herido[playerid2] = 0;
	AvisoPD[playerid2] = 0;
	guardar_int_mysql("personajes", "Hospital", InfoPersonaje[playerid2][pID], 0);
	ActualizarEstado(playerid2);
	return 1;
}

CMD:reanimar(playerid, params[])
{
	new string[170], playerid2;
	if (!member_faccion(playerid, 1, 2, 3, 4, 6)) return SendClientMessage(playerid, COLOR_GREY, "Sólo para LSPD, FBI, USMC, LSCSD y LSFD.");
	if (IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes reanimar a alguien desde un vehículo.");
	if (GetPVarInt(playerid, "EstaCrack") == 1) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto, tu también estás herido.");
    if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /reanimar (PlayerID)");
    if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Jugador desconectado.");
	if (playerid == playerid2) return SendClientMessage(playerid, COLOR_GREY, "No te puedes reanimar a tí mismo, abusadol de mielda :v");
	if (!CercaDelMarica(3.5, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "El jugador no está cerca tuyo.");
	if (GetPVarInt(playerid2, "mueltito") == 1) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador está en estado muerto.");
	if (GetPVarInt(playerid2, "EstaCrack") == 0) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador no está en estado herido.");
	if (InfoPersonaje[playerid2][pMiembro] == InfoPersonaje[playerid][pMiembro]) return SendClientMessage(playerid, COLOR_GREY, "No puedes reanimar a los de tu facción.");
	timer_herido[playerid2] = 0;
	KillEMSQueue(playerid2);
	ResetPlayerDamages(playerid2);
	DestroyDynamic3DTextLabelEx(InfoPersonaje[playerid2][pNameTag]);
	TogglePlayerControllable(playerid, 0);
	TogglePlayerControllable(playerid2, 0);
	SetTimerEx("Descongelar", 8000, false, "i", playerid);
	SetTimerEx("Descongelar", 8000, false, "i", playerid2);
	ApplyAnimation(playerid, "MEDIC", "CPR", 4.1, 0, 1, 1, 0, 0, 1);
	ApplyAnimation(playerid2, "CRACK", "crckidle2", 4.1, 1, 1, 1, 0, 0, 1);
	SetCameraBehindPlayer(playerid2);
	SetPlayerHealth(playerid2, 70);
	InfoPersonaje[playerid2][pVida] = 70;
	AvisoPD[playerid2] = 0;
	format(string, sizeof string, "* %s reanima a %s mediante primeros auxilios.", NombreJugador(playerid), NombreJugador(playerid2));
	ProxDetector(20.0, playerid, string, 0x1EB032FF, 0x1EB032FF, 0x1EB032FF, 0x1EB032FF, 0x1EB032FF);
	guardar_int_mysql("personajes", "Hospital", InfoPersonaje[playerid2][pID], 0);
	ActualizarEstado(playerid2);
	return 1;
}

funcion Descongelar(playerid) return TogglePlayerControllable(playerid, true);

CMD:comprarlicencia(playerid)
{
	if (IsPlayerInRangeOfPoint(playerid,5.0,1407.6,-1921.669311,1227.8) || IsPlayerInRangeOfPoint(playerid,3.0,1564.0000, -1676.8358, 4989.5386))
	{
		if (InfoPersonaje[playerid][pEstrellas] != 0) return SendClientMessage(playerid, COLOR_GREY, "Tienes órden de arresto, te prohibieron la adquisición de licencias.");
		SendClientMessage(playerid, COLOR_YELLOW, "INFO: {FBFBFB}Las licencias de armas son otorgadas por el jefe de policias de LSPD, disculpe las molestias.");
		Dialog_Show(playerid, ShowBuyLicencias, DIALOG_STYLE_LIST, "{A2DC35}Selecciona el tipo de licencia que deseas.", "Licencia de conducir ($2,000)\r\nLicencia de Navegación ($3,000)\r\nLicencia de Vuelo ($5,000)", "Comprar", "Salir");
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "[ERROR]:{FFFFFF} Las licencias sólo pueden ser obtenidas en la Universidad, el edificio delante de Unity o en el mostrador de LSPD.");
	return 1;
}

Dialog:ShowBuyLicencias(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0:
		{
			if (InfoPersonaje[playerid][pLicencia][0] != 0) return SendClientMessage(playerid, COLOR_GREY, "Ya tienes la licencia de conducción.");
			if (GetPlayerCash(playerid) < 2000) return SendClientMessage(playerid, COLOR_RED, "No puedes pagar esta licencia de conducir.");
			GivePlayerCash(playerid,-2000, "licencia de conducción");
			Tax += 2000;
			InfoPersonaje[playerid][pLicencia][0] = 1;
			guardar_int_mysql("personajes", "Licencia1", InfoPersonaje[playerid][pID], 1);
			SendClientMessage(playerid, COLOR_GREY, "{A2DC35}[INFO]:{FFFFFF} Has adquirido con éxito una licencia de conducción.");
		}
		case 1:
		{
			if (InfoPersonaje[playerid][pLicencia][2] != 0) return SendClientMessage(playerid, COLOR_GREY, "Ya tienes la licencia de navegación.");
			if (GetPlayerCash(playerid) < 3000) return SendClientMessage(playerid, COLOR_GREY, "No puedes pagar esta licencia de navegación.");
			GivePlayerCash(playerid,-3000, "licencia de navegación");
			Tax += 3000;
			InfoPersonaje[playerid][pLicencia][2] = 1;
			guardar_int_mysql("personajes", "Licencia3", InfoPersonaje[playerid][pID], 1);
			SendClientMessage(playerid, COLOR_GREY, "{A2DC35}[INFO]:{FFFFFF} Has adquirido con éxito una licencia de navegación.");
		}
		case 2:
		{
			if (InfoPersonaje[playerid][pNivel] < 3) return SendClientMessage(playerid, COLOR_WHITE, "Necesitas ser nivel 3 para comprar la licencia de piloto.");
			if (InfoPersonaje[playerid][pLicencia][1] != 0) return SendClientMessage(playerid, COLOR_GREY, "Ya tienes la licencia de piloto.");
			if (GetPlayerCash(playerid) < 5000) return SendClientMessage(playerid, COLOR_GREY, "No puedes pagar esta licencia de piloto.");
			GivePlayerCash(playerid,-5000, "licencia de aviación");
			Tax += 5000;
			InfoPersonaje[playerid][pLicencia][1] = 1;
			guardar_int_mysql("personajes", "Licencia2", InfoPersonaje[playerid][pID], 1);
			SendClientMessage(playerid, COLOR_GREY, "{A2DC35}[INFO]:{FFFFFF} Has adquirido con éxito una licencia de piloto; ahora será capaz de manejar aeronaves.");
		}
	}
	return 1;
}
		
CMD:spec(playerid, params[])
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new tmp[32];
	if(sscanf(params, "s[32]", tmp)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /spec (playerid/off)");
	if(strcmp("off", tmp, true, strlen(tmp)) == 0)
	{
		if(Spectating[playerid] > 0)
		{
			GettingSpectated[Spectate[playerid]] = 999;
			Spectating[playerid] = 0;
			Spectate[playerid] = 999;
			SetPVarInt(playerid, "SpecState", -1);
			SetPVarInt(playerid, "SpecOff", 1 );
			TogglePlayerSpectating( playerid, false );
			SetCameraBehindPlayer(playerid);
			return 1;
		}
	}
	new playerid2 = ReturnUser(tmp);
	if(IsPlayerConnected(playerid2))
	{
		if(playerid2 != INVALID_PLAYER_ID)
		{
			if(Spectating[playerid] == 0)
			{
				new Float: pPositions[ 3 ];
				GetPlayerPos(playerid, pPositions[ 0 ], pPositions[ 1 ], pPositions[ 2 ]);
				SetPVarFloat(playerid, "SpecPosX", pPositions[ 0 ]);
				SetPVarFloat(playerid, "SpecPosY", pPositions[ 1 ]);
				SetPVarFloat(playerid, "SpecPosZ", pPositions[ 2 ]);
				SetPVarInt(playerid, "SpecInt", GetPlayerInterior(playerid));
				SetPVarInt(playerid, "SpecVW", GetPlayerVirtualWorld(playerid));

				if(IsPlayerInAnyVehicle(playerid2))
				{
					TogglePlayerSpectating(playerid, true);
					new carid = GetPlayerVehicleID( playerid2 );
					PlayerSpectateVehicle( playerid, carid );
					SetPlayerInterior( playerid, GetPlayerInterior( playerid2 ) );
					SetPlayerVirtualWorld( playerid, GetPlayerVirtualWorld( playerid2 ) );
					SetPVarInt(playerid, "SpecState", GetPlayerState(playerid2));
				}
				else
				{
					TogglePlayerSpectating(playerid, true);
					PlayerSpectatePlayer( playerid, playerid2 );
					SetPlayerInterior( playerid, GetPlayerInterior( playerid2 ) );
					SetPlayerVirtualWorld( playerid, GetPlayerVirtualWorld( playerid2 ) );
					SetPVarInt(playerid, "SpecState", GetPlayerState(playerid2));
				}
				GettingSpectated[playerid2] = playerid;
				Spectate[playerid] = playerid2;
				Spectating[playerid] = 1;
			}
			else
			{
				if(IsPlayerInAnyVehicle(playerid2))
				{
					TogglePlayerSpectating(playerid, true);
					new carid = GetPlayerVehicleID( playerid2 );
					PlayerSpectateVehicle( playerid, carid );
					SetPlayerInterior( playerid, GetPlayerInterior( playerid2 ) );
					SetPlayerVirtualWorld( playerid, GetPlayerVirtualWorld( playerid2 ) );
					SetPVarInt(playerid, "SpecState", GetPlayerState(playerid2));
				}
				else
				{
					TogglePlayerSpectating(playerid, true);
					PlayerSpectatePlayer( playerid, playerid2 );
					SetPlayerInterior( playerid, GetPlayerInterior( playerid2 ) );
					SetPlayerVirtualWorld( playerid, GetPlayerVirtualWorld( playerid2 ) );
					SetPVarInt(playerid, "SpecState", GetPlayerState(playerid2));
				}
				GettingSpectated[Spectate[playerid]] = 999;
				GettingSpectated[playerid2] = playerid;
				Spectate[playerid] = playerid2;
				Spectating[playerid] = 1;
			}
		}
	}
	else SendClientMessage(playerid, COLOR_WHITE, "Ese jugador está desconectado.");
	return 1;
}

CMD:liberar(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[256], playerid2, query[410];
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /liberar (JugadorID)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Jugador no conectado.");
	if (InfoPersonaje[playerid2][pSancionado] == 0) return SendClientMessage(playerid, COLOR_GREY, "Ese jgador no está sancionado o en prisión.");
	format(string, sizeof string, "[AdmCmd]: %s fue liberado de prisión por %s.", NombreDeCuenta(playerid2), InfoCuenta[playerid][jApodo]);
	Log("LOGS/admin.log", string);
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) sacó de prisión a %s(%d).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
	SendAllMessage(0xFF6347FF, string);
	if (InfoPersonaje[playerid2][pSancionado] == 1) InfoPersonaje[playerid2][pJails]--;
	InfoPersonaje[playerid2][pSancionado] = 0;
	InfoPersonaje[playerid2][pEstrellas] = 0;
	SetPlayerWantedLevel(playerid2, 0);
	InfoPersonaje[playerid2][pTiempoSancion] = 0;
	SetPosEx(playerid2, 1529.6, -1705.5, 13.4, 0.0, 0, 0, 1);
	alm(InfoPersonaje[playerid2][pBySancion], "none");
	alm(InfoPersonaje[playerid2][pRazonSancion], "none");
	TogglePlayerControllable(playerid2, true);
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Sancionado = 0, Estrellas = 0, TiempoSancion = 0, Jails = '%d', BySancion = '%e', RazonSancion = '%e' WHERE ID = '%d'", InfoPersonaje[playerid2][pJails], InfoPersonaje[playerid2][pBySancion], InfoPersonaje[playerid2][pRazonSancion], InfoPersonaje[playerid2][pID]);
	mysql_tquery(DBInsanity, query);
	return 1;
}

CMD:dardinero(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new playerid2, dinero, string[170];
	if (sscanf(params, "dd", playerid2, dinero)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /dardinero (PlayerID) ($)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Jugador desconectado.");
	if (dinero > 99999999 || dinero < 0) return SendClientMessage(playerid, COLOR_WHITE, "Sólo de 0 - 99,999,999 de dinero");
	//medida de seguridad 24/02/2020
	if (dinero >= 9999999 && GetPlayerAdmin(playerid, 10) == 0)
	{
		format(string, sizeof string, "{FFBF00}[AdmWarnig]{FFFFFF} %s(%d) intentó dar $%s a %s(%d), por ello fue baneado con IP.", NombreOriginal(playerid), playerid, diner_coma(dinero), NombreOriginal(playerid2), playerid2);
		SendAdminMessage(0xFFFFFFFF, string);
		guardar_int_mysql("cuentas", "OtakuN_N", InfoCuenta[playerid][jID], 2);
		guardar_int_mysql("cuentas", "JotoOtaku", InfoCuenta[playerid][jID], 0);
		guardar_int_mysql("cuentas", "EncFac", InfoCuenta[playerid][jID], 0);
		SetTimerEx("TimerBANIP",1000,false,"d",playerid);
		return 1;
	}
	//
	GivePlayerCash(playerid2, dinero, "dardinero (admin)");
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) ha dado $%s dólares a %s(%d).", InfoCuenta[playerid][jApodo], playerid, diner_coma(dinero), NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, string);
	format(string, sizeof string, "%s ha dado $%s dólares a %s.", InfoCuenta[playerid][jApodo], diner_coma(dinero), NombreDeCuenta(playerid2));
	Log("LOGS/dardinero.log", string);
	return 1;
}

CMD:darestilopelea(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[160], playerid2, fightstyle;
	if (sscanf(params, "dd", playerid2, fightstyle))
	{
		SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /darestilopelea (playerid) (estilo)");
		SendClientMessage(playerid, COLOR_GRAD2, "Estilo pelea: 4, 5, 6, 7, 15, 26.");
		return 1;
	}
	if (IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Jugador desconectado.");
	if (fightstyle > 3 && fightstyle < 8 || fightstyle == 15 || fightstyle == 26)
	{
		format(string, sizeof string, " Tu estilo de pelea ha sido cambiado al ID %d.", fightstyle);
		SendClientMessage(playerid2,COLOR_YELLOW,string);
		format(string, sizeof string, " Cambiaste el estilo de pelea de %s a %d.", NombreOriginal(playerid2), fightstyle);
		SendClientMessage(playerid,COLOR_YELLOW,string);
		SetPlayerFightingStyle(playerid2, fightstyle);
		InfoPersonaje[playerid2][pEstiloPelea] = fightstyle;
		guardar_int_mysql("personajes", "EstiloPelea", InfoPersonaje[playerid2][pID], InfoPersonaje[playerid2][pEstiloPelea]);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Estilo de pelea inválido, prueba con las id: 4, 5, 6, 7, 15, 26.");
	return 1;
}

CMD:id(playerid, params[])
{
	new id, string[232], colorping[19];

	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /id (Nombre o ID)");

	if (isnumeric(params))
	{
		sscanf(params, "d", id);

		if (!IsPlayerConnected(id)) return SendClientMessage(playerid, COLOR_GREY, "Jugador desconectado.");
		if (InfoPersonaje[id][pNivel] == 0) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador está logeando.");

		switch (GetPlayerPing(id))
		{
			case 0..150: alm(colorping, "{46e800}");
			case 151..200: alm(colorping, "{E0F600}");
			case 201..250: alm(colorping, "{FED32C}");
			case 251..300: alm(colorping, "{f7e300}");
			default: alm(colorping, "{f74000}");
		}

		format(string, sizeof string, "[ID: %d] {00AE57}%s{C4C4FF} (Horas: %d) (Ping: %s%d{C4C4FF}) (Cuenta: {FFBF00}%s{C4C4FF})", id, Nombre2Original(id),  InfoPersonaje[id][pNivel], colorping, GetPlayerPing(id), InfoCuenta[id][jNombre]);
		SendClientMessage(playerid, 0xC4C4FFFF, string);
	}
	else
	{
		if (strlen(params) < 3 || strlen(params) > MAX_PLAYER_NAME) return SendClientMessage(playerid, COLOR_GREY, "El nombre del jugador debe estar entre 3 a 24 caracteres.");

		new count;

		foreach (new playerid2: Player) if (strfind(ReturnName(playerid2), params, true) != -1)
		{
			if (InfoPersonaje[playerid2][pNivel] != 0)
			{
				switch (GetPlayerPing(playerid2))
				{
					case 0..150: alm(colorping, "{46e800}");
					case 151..200: alm(colorping, "{E0F600}");
					case 201..250: alm(colorping, "{FED32C}");
					case 251..300: alm(colorping, "{f7e300}");
					default: alm(colorping, "{f74000}");
				}
				format(string, sizeof string, "[ID: %d] {00AE57}%s{C4C4FF} (Horas: %d) (Ping: %s%d{C4C4FF}) (Cuenta: {FFBF00}%s{C4C4FF})", playerid2, Nombre2Original(playerid2),  InfoPersonaje[playerid2][pNivel], colorping, GetPlayerPing(playerid2), InfoCuenta[playerid2][jNombre]);
				SendClientMessage(playerid, 0xC4C4FFFF, string);
				count++;
			}
		}

		if (!count) return SendClientMessage(playerid, COLOR_GREY, "No hay ningún jugador con ese nombre conectado.");
	}
	return 1;
}

ReturnName(playerid)
{
    new name[MAX_PLAYER_NAME];

    if(playerid == -1) name = "Vuoto";
    else GetPlayerName(playerid, name, MAX_PLAYER_NAME);

    return name;
}

CMD:venderlaser(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[170], playerid2, slot, color[32], invoice[64];
	if (sscanf(params, "ddss[64]", playerid2, slot, color, invoice)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /venderlaser (playerid) (slot(0-9)) (red/green/orange/yellow/pink/blue) (precio)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
	if (slot < 0 || slot > 6) return SendClientMessage(playerid, COLOR_GRAD1, "{FFFF00}[ERROR]:{FFFFFF} Los Slots de los toys son del número 0 al 6.");
	if (strcmp(color,"red",true) == 0)
	{
		InfoPersonaje[playerid2][ptModelo][slot] = 18643;
		InfoPersonaje[playerid2][ptHueso][slot] = 6;
		InfoPersonaje[playerid2][ptPosX][slot] = 0.0;
		InfoPersonaje[playerid2][ptPosY][slot] = 0.0;
		InfoPersonaje[playerid2][ptPosZ][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotX][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotY][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotZ][slot] = 0.0;
	}
	else if(strcmp(color,"green",true) == 0)
	{
		InfoPersonaje[playerid2][ptModelo][slot] = 19083;
		InfoPersonaje[playerid2][ptHueso][slot] = 6;
		InfoPersonaje[playerid2][ptPosX][slot] = 0.0;
		InfoPersonaje[playerid2][ptPosY][slot] = 0.0;
		InfoPersonaje[playerid2][ptPosZ][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotX][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotY][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotZ][slot] = 0.0;
	}
	else if(strcmp(color,"orange",true) == 0)
	{
		InfoPersonaje[playerid2][ptModelo][slot] = 19082;
		InfoPersonaje[playerid2][ptHueso][slot] = 6;
		InfoPersonaje[playerid2][ptPosX][slot] = 0.0;
		InfoPersonaje[playerid2][ptPosY][slot] = 0.0;
		InfoPersonaje[playerid2][ptPosZ][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotX][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotY][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotZ][slot] = 0.0;
	}
	else if(strcmp(color,"yellow",true) == 0)
	{
		InfoPersonaje[playerid2][ptModelo][slot] = 19084;
		InfoPersonaje[playerid2][ptHueso][slot] = 6;
		InfoPersonaje[playerid2][ptPosX][slot] = 0.0;
		InfoPersonaje[playerid2][ptPosY][slot] = 0.0;
		InfoPersonaje[playerid2][ptPosZ][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotX][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotY][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotZ][slot] = 0.0;
	}
	else if(strcmp(color,"pink",true) == 0)
	{
		InfoPersonaje[playerid2][ptModelo][slot] = 19081;
		InfoPersonaje[playerid2][ptHueso][slot] = 6;
		InfoPersonaje[playerid2][ptPosX][slot] = 0.0;
		InfoPersonaje[playerid2][ptPosY][slot] = 0.0;
		InfoPersonaje[playerid2][ptPosZ][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotX][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotY][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotZ][slot] = 0.0;
	}
	else if(strcmp(color,"blue",true) == 0)
	{
		InfoPersonaje[playerid2][ptModelo][slot] = 19080;
		InfoPersonaje[playerid2][ptHueso][slot] = 6;
		InfoPersonaje[playerid2][ptPosX][slot] = 0.0;
		InfoPersonaje[playerid2][ptPosY][slot] = 0.0;
		InfoPersonaje[playerid2][ptPosZ][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotX][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotY][slot] = 0.0;
		InfoPersonaje[playerid2][ptRotZ][slot] = 0.0;
	}
	ActualizarToy(playerid2, slot);
	format(string, sizeof string, "Recibiste un laser de color %s en el slot %d, usa /toys para verlo.", color, slot);
	SendClientMessage(playerid2, COLOR_LIGHTGREEN, string);
	format(string, sizeof string, "Le diste a %s laser de color %s en el slot %d", NombreJugador(playerid2), color, slot);
	SendClientMessage(playerid, COLOR_LIGHTGREEN, string);
	format(string, sizeof string, "[SHOPLASER] %s dió %s un laser toy - Pagó fue de %s", NombreJugador(playerid), NombreJugador(playerid2), invoice);
	Log("LOGS/shoplog.log", string);
	return 1;
}

CMD:congelar(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[170], playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /congelar (playerid)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Usuario desconectado.");
	if (InfoCuenta[playerid2][jAdmin] > InfoCuenta[playerid][jAdmin]) return SendClientMessage(playerid, COLOR_GRAD2, "No puedes congelar a un administrador de mayor nivel.");
	SetPVarInt(playerid2, "IsFrozen", 1);
	TogglePlayerControllable(playerid2, 0);
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) congeló a %s(%d).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, string);
	return 1;
}

CMD:descongelar(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[170], playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /descongelar (playerid)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Usuario desconectado.");
	DeletePVar(playerid2, "IsFrozen");
	TogglePlayerControllable(playerid2, 1);
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) descongeló a %s(%d).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, string);
	return 1;
}

CMD:cambiarhora(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[160], time;
	if(sscanf(params, "d", time)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /cambiarhora [hora] (0-23)");
	SetWorldTime(time);
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) cambió la hora a %d.", InfoCuenta[playerid][jApodo], playerid, time);
	SendAdminMessage(0xFF6347FF, string);
	return 1;
}

CMD:clima(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new weather;
	if (sscanf(params, "d", weather)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /clima [clima id]");
	if (weather < 0||weather > 45) { SendClientMessage(playerid, COLOR_GREY, "Climas: 0 a 45."); return 1; }
	SetPlayerWeather(playerid, weather);
	return 1;
}

CMD:climatodos(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new weather, string[170];
	if (sscanf(params, "d", weather)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /climatodos (clima id)");
	if (weather < 0||weather > 45) { SendClientMessage(playerid, COLOR_GREY, "Climas: 0 a 45."); return 1; }
	Loop(playerid2, MAX_PLAYERS, 0) if (IsPlayerConnectedEx(playerid2))
	{
		if (InfoPersonaje[playerid2][pDrogaTipo] == 0)
			SetPlayerWeather(playerid2, weather);
	}
	ClimaGeneral = weather;
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) cambió el clima al ID %d", InfoCuenta[playerid][jApodo], playerid, ClimaGeneral);
	SendAdminMessage(0xFF6347FF, string);
	return 1;
}
CMD:cambiarclima(playerid, params[]) return cmd_climatodos(playerid, params);

CMD:gotoco(playerid, params[])
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new Float: pos[3], int, vw;
	if(sscanf(params, "fffdd", pos[0], pos[1], pos[2], int, vw)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /gotoco (coordenada x) (coordenada y) (coordenada z) (interior) (virtualworld)");
	SendClientMessage(playerid, COLOR_GRAD2, "Fuiste a las coordenadas.");
	SetPosEx(playerid, pos[0], pos[1], pos[2], 0.0000, int, vw, 1);
	return 1;
}
CMD:ircor(playerid, params[]) return cmd_gotoco(playerid, params);
CMD:ircordenada(playerid, params[]) return cmd_gotoco(playerid, params);
CMD:ircoordenada(playerid, params[]) return cmd_gotoco(playerid, params);

CMD:getpos(playerid, params[])
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[170], Float:X, Float:Y, Float:Z;
	GetPlayerPos(playerid, X, Y, Z);
	format(string,sizeof string, "X: %f | Y: %f | Z: %f | Int: %d | VW: %d", X,Y,Z, GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid));
	SendClientMessage(playerid, 0xF5DEB3AA, string);
	return 1;
}

CMD:bar(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley.");
	if (IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "Tienes que estar en el piso para usar este comando.");
	if (InfoPersonaje[playerid][pRango] < 3) return SendClientMessage(playerid, COLOR_WHITE, "Necesitas ser mayor de rango 3.");

	ShowModelSelectionMenu(playerid, bars, "Seleccione la barrera a colocar.");
	return 1;
}

CMD:bar2(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley.");
	if (IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "Tienes que estar en el piso para usar este comando.");
	if (InfoPersonaje[playerid][pRango] < 3) return SendClientMessage(playerid, COLOR_WHITE, "Necesitas ser mayor de rango 3.");
	new string[170], Float:Position[4];
	Loop(i, MAX_BARRICADES, 0) if (Barricade[i] == 0)
	{
		GetPlayerPos(playerid, Position[0], Position[1], Position[2]);
		GetPlayerFacingAngle(playerid, Position[3]);
		Barricade[i] = CreateDynamicObject(3091, Position[0], Position[1], Position[2], 0.0, 0.0, Position[3]+180.0, -1, -1, -1, 200.0);
		SetPlayerPos(playerid, Position[0], Position[1], Position[2]+5);
		new zone[MAX_ZONE_NAME];
		GetPlayer3DZone(playerid, zone, sizeof(zone));
		format(string, sizeof string, "HQ: Una barricada ha sido puesta en %s.", zone);
		SendClientMessage(playerid, COLOR_RADIO, string);
		SendClientMessage(playerid, COLOR_YELLOW, "Puedes eliminar una barricada escribiendo /qb.");
		return 1;
	}
	SendClientMessage(playerid, COLOR_WHITE, "Todas las barreras disponibles se han desplegado.");
	return 1;
}

CMD:bar3(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley.");
	if (IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "Tienes que estar en el piso para usar este comando.");
	if (InfoPersonaje[playerid][pRango] < 3) return SendClientMessage(playerid, COLOR_WHITE, "Necesitas ser mayor de rango 3.");
	new string[170], Float:Position[4];
	Loop(i, MAX_BARRICADES, 0) if (Barricade[i] == 0)
	{
		GetPlayerPos(playerid, Position[0], Position[1], Position[2]);
		GetPlayerFacingAngle(playerid, Position[3]);
		Barricade[i] = CreateDynamicObject(978, Position[0], Position[1], Position[2]+0.6, 0.0, 0.0, Position[3]+180.0, -1, -1, -1, 200.0);
		SetPlayerPos(playerid, Position[0], Position[1], Position[2]+5);
		new zone[MAX_ZONE_NAME];
		GetPlayer3DZone(playerid, zone, sizeof(zone));
		format(string, sizeof string, "HQ: Una barricada ha sido puesta en %s.", zone);
		SendClientMessage(playerid, COLOR_RADIO, string);
		SendClientMessage(playerid, COLOR_YELLOW, "Puedes eliminar una barricada escribiendo /qb.");
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Todas las barreras disponibles se han desplegado.");
	return 1;
}

CMD:bengala(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley.");
	if (IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "Tienes que estar en el piso para usar este comando.");
	if (InfoPersonaje[playerid][pRango] < 3) return SendClientMessage(playerid, COLOR_WHITE, "Necesitas ser mayor de rango 3.");
	new string[170], Float:Position[4];
	Loop(i, MAX_BARRICADES, 0) if (Barricade[i] == 0)
	{
		GetPlayerPos(playerid, Position[0], Position[1], Position[2]);
		GetPlayerFacingAngle(playerid, Position[3]);
		Barricade[i] = CreateDynamicObject(18728, Position[0], Position[1], Position[2]-2.8, 0.0, 0.0, Position[3]+180.0, -1, -1, -1, 200.0);
		new zone[MAX_ZONE_NAME];
		GetPlayer3DZone(playerid, zone, sizeof(zone));
		format(string, sizeof string, "HQ: Una bengala ha sido puesta en %s.", zone);
		SendClientMessage(playerid, COLOR_RADIO, string);
		SendClientMessage(playerid, COLOR_YELLOW, "Puedes eliminar una bengala escribiendo /qb.");
		return 1;
	}
	SendClientMessage(playerid, COLOR_WHITE, "Todas las barreras disponibles se han desplegado.");
	return 1;
}

CMD:cono(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley.");
	if (IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "Tienes que estar en el piso para usar este comando.");
	if (InfoPersonaje[playerid][pRango] < 3) return SendClientMessage(playerid, COLOR_WHITE, "Necesitas ser mayor de rango 3.");
	new string[170], Float:Position[4];
	Loop(i, MAX_BARRICADES, 0) if (Barricade[i] == 0)
	{
		GetPlayerPos(playerid, Position[0], Position[1], Position[2]);
		GetPlayerFacingAngle(playerid, Position[3]);
		Barricade[i] = CreateDynamicObject(1238, Position[0], Position[1], Position[2]-0.7, 0.0, 0.0, Position[3]+180.0, -1, -1, -1, 200.0);
		new zone[MAX_ZONE_NAME];
		GetPlayer3DZone(playerid, zone, sizeof(zone));
		format(string, sizeof string, "HQ: Un cono ha sido puesto en %s.", zone);
		SendClientMessage(playerid, COLOR_RADIO, string);
		SendClientMessage(playerid, COLOR_YELLOW, "Puedes eliminar el cono escribiendo /qb.");
		return 1;
	}
	SendClientMessage(playerid, COLOR_WHITE, "Todas las barreras disponibles se han desplegado.");
	return 1;
}

CMD:qb(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley.");
	if (IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "Tienes que estar en el piso para usar este comando.");
	if (InfoPersonaje[playerid][pRango] < 3) return SendClientMessage(playerid, COLOR_WHITE, "Necesitas ser mayor de rango 3.");
	new string[170], Float:Position[3];
	Loop(i, MAX_BARRICADES, 0)
	{
		GetDynamicObjectPos(Barricade[i], Position[0], Position[1], Position[2]);
		if (IsPlayerInRangeOfPoint(playerid, 5.0, Position[0], Position[1], Position[2]))
		{
			if (IsValidDynamicObject(Barricade[i])) DestroyDynamicObject(Barricade[i]);
			Barricade[i] = 0;
			new zone[MAX_ZONE_NAME];
			GetPlayer3DZone(playerid, zone, sizeof(zone));
			format(string, sizeof string, "HQ: Un bloqueo a sido destruido en %s.", zone);
			SendClientMessage(playerid, COLOR_RADIO, string);
			return 1;
		}
	}
	SendClientMessage(playerid, COLOR_WHITE, "No estás cerca de ninguna barricada.");
	return 1;
}

CMD:spikes(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	if (IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "Tienes que estar en el piso para usar este comando.");
	if (InfoPersonaje[playerid][pRango] < 3) return SendClientMessage(playerid, COLOR_WHITE, "Necesitas ser mayor de rango 3.");
	SendClientMessage(playerid, COLOR_GREEN, "Spikes actuales:");
	new string[180], count = 0;
	Loop(i, sizeof SpikeStrips, 0) if (SpikeStrips[i][sX] != 0)
	{
		format(string, sizeof string, "HQ: Spike ID: %d | Localización: %s | Puesto por: %s", i, SpikeStrips[i][sDeployedAt], SpikeStrips[i][sDeployedBy]);
		SendClientMessage(playerid, COLOR_GRAD2, string);
		count++;
	}
	if (count == 0) SendClientMessage(playerid, -1, "No hay ningún spike creado.");
	return 1;
}

CMD:pspikes(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	if (IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "Tienes que estar en el piso para usar este comando.");
	if (InfoPersonaje[playerid][pRango] < 3) return SendClientMessage(playerid, COLOR_WHITE, "Necesitas ser mayor de rango 3.");
	Loop(i, sizeof SpikeStrips, 0) if (SpikeStrips[i][sX] == 0)
	{
		new Float: f_TempAngle, string[128];
		GetPlayerPos(playerid, SpikeStrips[i][sX], SpikeStrips[i][sY], SpikeStrips[i][sZ]);
		GetPlayerFacingAngle(playerid, f_TempAngle);
		SpikeStrips[i][sObjectID] = CreateDynamicObject(2899, SpikeStrips[i][sX], SpikeStrips[i][sY], SpikeStrips[i][sZ]-0.8, 0.0, 0.0, f_TempAngle);
		GetPlayer3DZone(playerid, SpikeStrips[i][sDeployedAt], MAX_ZONE_NAME);
		alm(SpikeStrips[i][sDeployedBy], NombreDeCuenta(playerid));
		format(string,sizeof string,"Spike ID: %d fue creado exitosamente.", i);
		SendClientMessage(playerid, COLOR_WHITE, string);
		format(string, sizeof string, "HQ: Un spike fue puesto en %s.", SpikeStrips[i][sDeployedAt]);
		SendClientMessage(playerid, COLOR_RADIO, string);
		SendClientMessage(playerid, COLOR_YELLOW, "Puedes remover el spike usando /qspikes.");
		return 1;
	}
	SendClientMessage(playerid, COLOR_WHITE, "No es posible generar más spikes, límite es de 5." );
	return 1;
}

CMD:qspikes(playerid, params[])
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	if (IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "Tienes que estar en el piso para usar este comando.");
	if (InfoPersonaje[playerid][pRango] < 3) return SendClientMessage(playerid, COLOR_WHITE, "Necesitas ser mayor de rango 3.");
	if (isnull(params)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /qspike (spikeid)");
	new id = strval(params);
	if (!(0 <= id <= sizeof(SpikeStrips)) || SpikeStrips[id][sX] == 0)
	{
		return SendClientMessage(playerid, COLOR_WHITE, "Spike ID Inválido.");
	}
	new string[170];
	if (IsValidDynamicObject(SpikeStrips[id][sObjectID])) DestroyDynamicObject(SpikeStrips[id][sObjectID]);
	SpikeStrips[id][sX] = 0; SpikeStrips[id][sY] = 0; SpikeStrips[id][sZ] = 0;
	SpikeStrips[id][sObjectID] = INVALID_OBJECT_ID;
	format(string,sizeof string,"Spike ID: %d borrado.", id);
	SendClientMessage(playerid, COLOR_WHITE, string);
	new zone[MAX_ZONE_NAME];
	GetPlayer3DZone(playerid, zone, sizeof(zone));
	format(string, sizeof string, "HQ: Un spike a sido borrado en %s.", zone);
	SendClientMessage(playerid, COLOR_RADIO, string);
	return 1;
}

CMD:nuevos(playerid)
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	SendClientMessage(playerid, COLOR_GREEN, "Lista de todos los jugadores con menos de 10 horas.");
	new szNoobs[120];
	foreach(Player, i) if (InfoPersonaje[i][pNivel] <= 10)
	{
		format(szNoobs, sizeof szNoobs, "* %s (%d) | Horas conectado: %d | Horas reales: %d", NombreOriginal(i), i, InfoPersonaje[i][pHorasOn], InfoPersonaje[i][pNivel]);
		SendClientMessage(playerid, 0xEBEBEBFF, szNoobs);
	}
	return 1;
}

CMD:dar(playerid, params[])
{
	new string[256], playerid2, choice[32], amount;
	if(sscanf(params, "ds[32]d", playerid2, choice, amount))
	{
		SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /dar (playerid) (nombre) (monto)");
		SendClientMessage(playerid, COLOR_GREY,  "* Materiales, Chaleco, Ganzuas");
		return 1;
	}

	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, -1, "Jugador desconectado.");
	if (!CercaDelMarica(5.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "El jugador no está cerca tuyo.");
	if (playerid2 == playerid) return SendClientMessage(playerid, COLOR_WHITE, "No puedes usar este comando contigo mismo, acaso sos marica.");
	if (strcmp(choice, "materiales", true) == 0)
	{
		if (amount < 1 || amount > 10000) return SendClientMessage(playerid, COLOR_GRAD2, "El máximo de materiales a dar es de 10,000.");
		if (InfoPersonaje[playerid][pMateriales] >= amount)
		{
			format(string, sizeof string, "Recibiste %d materiales de %s.", amount, NombreJugador(playerid));
			SendClientMessage(playerid2, COLOR_GRAD2, string);
			InfoPersonaje[playerid2][pMateriales] += amount;
			InfoPersonaje[playerid][pMateriales] -= amount;
			guardar_int_mysql("personajes", "Materiales", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pMateriales]);
			guardar_int_mysql("personajes", "Materiales", InfoPersonaje[playerid2][pID], InfoPersonaje[playerid2][pMateriales]);
			new ip[32], ipex[32];
			GetPlayerIp(playerid, ip, sizeof(ip));
			GetPlayerIp(playerid2, ipex, sizeof(ipex));
			format(string, sizeof string, "%s(IP:%s) has given %s(IP:%s) %d materials.", NombreDeCuenta(playerid), ip, NombreDeCuenta(playerid2), ipex, amount);
			Log("LOGS/pay.log", string);
			format(string, sizeof string, "Le diste a %s, %d materiales.", NombreJugador(playerid2), amount);
			SendClientMessage(playerid, COLOR_GRAD2, string);
			format(string, sizeof string, "* %s le da a %s algo de materiales.", NombreJugador(playerid), NombreJugador(playerid2));
			ProxDetector(30.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
			return 1;
		}
		SendClientMessage(playerid, COLOR_WHITE, "No tienes tantos materiales.");
	}
	else if (strcmp(choice, "ganzuas", true) == 0)
	{
		if (InfoPersonaje[playerid][pGanzuas] >= amount)
		{
			if (InfoPersonaje[playerid2][pGanzuas] > 10) return SendClientMessage(playerid, COLOR_WHITE, "{A2DC35}[INFO]:{FFFFFF} Esta persona no tiene más espacio para guardar ganzúas.");
			format(string, sizeof string, "Recibiste %d ganzúas de %s.", amount, NombreJugador(playerid));
			SendClientMessage(playerid2, COLOR_GRAD2, string);
			InfoPersonaje[playerid2][pGanzuas] += amount;
			InfoPersonaje[playerid][pGanzuas] -= amount;
			guardar_int_mysql("personajes", "Ganzuas", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pGanzuas]);
			guardar_int_mysql("personajes", "Ganzuas", InfoPersonaje[playerid2][pID], InfoPersonaje[playerid2][pGanzuas]);
			new ip[32], ipex[32];
			GetPlayerIp(playerid, ip, sizeof(ip));
			GetPlayerIp(playerid2, ipex, sizeof(ipex));
			format(string, sizeof string, "%s(IP:%s) has given %s(IP:%s) %d ganzuas.", NombreDeCuenta(playerid), ip, NombreDeCuenta(playerid2), ipex, amount);
			Log("LOGS/ganzuas.log", string);
			format(string, sizeof string, "Le diste a %s, %d ganzúas.", NombreJugador(playerid2), amount);
			SendClientMessage(playerid, COLOR_GRAD2, string);
			format(string, sizeof string, "* %s le da a %s unas ganzúas recién compradas.", NombreJugador(playerid), NombreJugador(playerid2));
			ProxDetector(30.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
			return 1;
		}
		SendClientMessage(playerid, COLOR_WHITE, "No tienes tantas ganzúas.");
	}
	return 1;
}

CMD:ram(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	if (GetPVarInt(playerid, "EstaCrack") != 0) return SendClientMessage(playerid, COLOR_WHITE, "No puedes hacer esto ahora.");
	Loop(id, totalcasas, 1) if (IsPlayerInRangeOfPoint(playerid, 3, InfoCasa[id][cExteriorX], InfoCasa[id][cExteriorY], InfoCasa[id][cExteriorZ]) && InfoCasa[id][cExteriorInt] == InfoPersonaje[playerid][pInterior] && InfoCasa[id][cExteriorVW] == InfoPersonaje[playerid][pVirtualWorld])
	{
		InfoCasa[id][cSeguro] = 0;
		guardar_int_mysql("casas", "Seguro", InfoCasa[id][cID_sql], InfoCasa[id][cSeguro]);

		meuwu(playerid, "abre la puerta a la fuerza.");
		LoadObjects(playerid);
		SetPlayerInterior(playerid, InfoCasa[id][cInteriorInt]);
		SetPlayerVirtualWorld(playerid, InfoCasa[id][cInteriorVW]);
		SetPlayerPos(playerid, InfoCasa[id][cInteriorX], InfoCasa[id][cInteriorY], InfoCasa[id][cInteriorZ]);
		GameTextForPlayer(playerid, "~r~Rompiste la puerta", 5000, 1);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "No estás en la entrada de ninguna casa.");
	return 1;
}

CMD:esposar(playerid, params[])
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	if (GetPVarInt(playerid, "EstaCrack") == 1) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto ahora.");
	new string[170], Float:Pos[3], playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Utiliza: /esposar (playerid)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Jugador especificado inválido.");
	if (!CercaDelMarica(8.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador no está cerca tuyo.");
	if (playerid2 == playerid) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto contigo mismo.");
	if (GetPVarInt(playerid2, "PlayerCuffed") == 1) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador ya está esposado.");
	format(string, sizeof string, "[CENTRAL] %s dice: hemos esposado a %s, se decidirá su arresto.", NombreJugador(playerid), NombreJugador(playerid2));
	SendRadioMessage(InfoPersonaje[playerid][pMiembro], COLOR_RADIO, string);
	format(string, sizeof string, "Fuiste esposado por %s.", NombreJugador(playerid));
	SendClientMessage(playerid2, COLOR_LIGHTBLUE, string);
	SetPlayerSpecialAction(playerid2, SPECIAL_ACTION_CUFFED); //animacion
	SetPlayerAttachedObject(playerid2, 0, 19418, 6, -0.011000, 0.028000, -0.022000, -15.600012, -33.699977, -81.700035, 0.891999, 1.000000, 1.168000);
	format(string, sizeof string, "Esposaste a %s.", NombreJugador(playerid2));
	SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	format(string, sizeof string, "le pone las esposas a %s", NombreJugador(playerid2));
	meuwu(playerid, string);
	GameTextForPlayer(playerid2, "Esposado", 2500, 3);
	GetPlayerPos(playerid, Pos[0], Pos[1], Pos[2]);
	ClearAnimations(playerid2);
	TogglePlayerControllable(playerid2, 0);
	SetPVarInt(playerid2, "PlayerCuffed", 1);
	SetPVarInt(playerid2, "IsFrozen", 1);
	PlayerPlaySoundEx(1145, Pos[0], Pos[1], Pos[2]);
	return 1;
}

CMD:desesposar(playerid, params[])
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	new string[170], playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /desesposar (playerid)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Jugador especificado inválido.");
	if (!CercaDelMarica(8.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Ese jugador no está cerca tuyo.");
	if (playerid2 == playerid) return SendClientMessage(playerid, COLOR_GREY, "No puedes quitarte las esposas tu mismo.");
	if (GetPVarInt(playerid2, "PlayerCuffed") != 1) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador no está esposado.");
	DeletePVar(playerid2, "IsFrozen");
	format(string, sizeof string, "* %s te quito las esposas.", NombreJugador(playerid));
	SendClientMessage(playerid2, COLOR_LIGHTBLUE, string);
	format(string, sizeof string, "* Le quitaste las esposas %s.", NombreJugador(playerid2));
	SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	format(string, sizeof string, "le quita las esposas a %s.", NombreJugador(playerid2));
	meuwu(playerid, string);
	GameTextForPlayer(playerid2, "~g~Te quitaron ~n~las esposas", 2500, 3);
	TogglePlayerControllable(playerid2, 1);
	ClearAnimations(playerid2);
	RemovePlayerAttachedObject(playerid2, 0);
	SetPlayerSpecialAction(playerid2,SPECIAL_ACTION_NONE);
	DeletePVar(playerid2, "PlayerCuffed");
	return 1;
}

puede_detener(playerid)
{
	if (GetPVarInt(playerid, "PlayerCuffed") == 1) return 1;
	if (Tied[playerid] != 0) return 1;
	return 0;
}

CMD:detener(playerid, params[])
{
	if (gLastCar[playerid] == 0) return SendClientMessage(playerid, -1, "No te has subido a ningún vehículo.");
	new string[170], playerid2, seat;
	if (sscanf(params, "dd", playerid2, seat)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /detener (PlayerID) (Asiento 1-3)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Jugador desconectado.");
	if (playerid2 == playerid) return SendClientMessage(playerid, COLOR_GREY, "* No puedes hacer esto contigo pendejo jsadjasjds.");
	if (!CercaDelMarica(8.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* No estás cerca del jugador seleccionado.");
	if (puede_detener(playerid2) == 0) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador no está esposado o amarrado con /atar.");
	if (IsPlayerInAnyVehicle(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "* Esa persona está en un vehiculo.");
	if (seat < 1 || seat > 3) return SendClientMessage(playerid, COLOR_GREY, "Asientos: 1 al 3.");
	new carid = gLastCar[playerid];
	if (IsSeatAvailable(carid, seat))
	{
		new Float:pos[6];
		GetPlayerPos(playerid, pos[0], pos[1], pos[2]);
		GetPlayerPos(playerid2, pos[3], pos[4], pos[5]);
		GetVehiclePos(carid, pos[0], pos[1], pos[2]);
		if (floatcmp(floatabs(floatsub(pos[0], pos[3])), 10.0) != -1 &&
		floatcmp(floatabs(floatsub(pos[1], pos[4])), 10.0) != -1 &&
		floatcmp(floatabs(floatsub(pos[2], pos[5])), 10.0) != -1) return false;
		if (member_faccion(playerid, 1, 2, 3, 4))
		{
			format(string, sizeof string, "[CENTRAL] %s dice: hemos capturado a %s, lo trasladamos a la comisaría.", NombreJugador(playerid), NombreJugador(playerid2));
			SendRadioMessage(InfoPersonaje[playerid][pMiembro], COLOR_RADIO, string);
		}
		RemovePlayerAttachedObject(playerid2, playerid);
		SetPlayerSpecialAction(playerid2, SPECIAL_ACTION_NONE);
		format(string, sizeof string, "sube a %s al vehiculo", NombreJugador(playerid), NombreJugador(playerid2));
		meuwu(playerid, string);
		GameTextForPlayer(playerid2, "~r~Detenido", 2500, 3);
		ClearAnimations(playerid2);
		TogglePlayerControllable(playerid2, false);
		PutPlayerInVehicle(playerid2, carid, seat);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Ese asiento no está disponible.");
	return 1;
}

CMD:darrol(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new playerid2, string[128];
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /darrol (playerid)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Usuario desconectado.");
	if (InfoCuenta[playerid2][jAdmin] > InfoCuenta[playerid][jAdmin]) return SendClientMessage(playerid, COLOR_WHITE, "No puedes hacer eso con administradores de mayor rango.");
	if (ShowRules[playerid2] == 1) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador ya está leyendo las reglas de rol.");
	new Float:roldX, Float:roldY, Float:roldZ;
	GetPlayerPos(playerid2, roldX, roldY, roldZ);
	SetPVarFloat(playerid2, "rOldX", roldX);
	SetPVarFloat(playerid2, "rOldY", roldY);
	SetPVarFloat(playerid2, "rOldZ", roldZ);
	SetPVarInt(playerid2, "rOldInt", GetPlayerInterior(playerid2));
	SetPVarInt(playerid2, "rOldVW", GetPlayerVirtualWorld(playerid2));
	ShowRules[playerid2] = 1;
	RulesTime[playerid2] = 1;
	ShowRol(playerid2);
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) envió a %s(%d) a leer las reglas del roleplay.", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, string);
	return 1;
}

CMD:sfondos(playerid, params[])
{
	if (!leader_faccion(playerid, 5)) return SendClientMessage(playerid, COLOR_GREY, "No eres líder del Gobierno.");
	new string[180], amount, reason[64];
	if (sscanf(params, "ds[64]", amount, reason))
	{
		SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /sfondos (monto) (razón)");
		format(string, sizeof string, "* BALANCE: $%s.", diner_coma(Tax));
		SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
		return 1;
	}
	if (amount < 0) return SendClientMessage(playerid, COLOR_WHITE, "El monto es inválido.");
	if (Tax < amount) return SendClientMessage(playerid, COLOR_WHITE, "No hay fondos suficientes.");
	Tax -= amount;
	SaveStuff();
	GivePlayerCash(playerid, amount, "sfondos");
	format(string, sizeof string, "Retiraste $%s de los fondos del gobierno.", diner_coma(amount));
	SendClientMessage(playerid, COLOR_WHITE, string);
	format(string, sizeof string, "{FF2F2F}[AdmWarning]{FFFFFF} Presidente %s(%d) retiro $%s de los fondos del gobierno, razón: %s.", NombreJugador(playerid), playerid, diner_coma(amount), reason);
	SendAdminMessage(0xFFFFFFFF, string);
	Log("LOGS/especial.log", string);
	return 1;
}
CMD:sacarfondos(playerid, params[]) return cmd_sfondos(playerid, params);

CMD:dfondos(playerid, params[])
{
	if (!leader_faccion(playerid, 5)) return SendClientMessage(playerid, COLOR_GREY, "No eres líder del Gobierno.");
	new string[180], amount;
	if (sscanf(params, "d", amount))
	{
		SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /dejarfondos (monto)");
		format(string, sizeof string, "* BALANCE: $%s.", diner_coma(Tax));
		SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
		return 1;
	}
	if (amount < 0) return SendClientMessage(playerid, COLOR_WHITE, "El monto es inválido.");
	if (GetPlayerCash(playerid) < amount) return SendClientMessage(playerid, COLOR_WHITE, "No dispones de ese dinero.");
	Tax += amount;
	SaveStuff();
	GivePlayerCash(playerid, -amount, "dfondos");
	format(string, sizeof string, "Depositaste $%s en los fondos del Gobierno.", diner_coma(amount));
	SendClientMessage(playerid, COLOR_WHITE, string);
	return 1;
}
CMD:dejarfondos(playerid, params[]) return cmd_dfondos(playerid, params);

CMD:arrestar(playerid, params[])
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	if (!IsAtArrestPoint(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "No estás en el punto de entrega."); // LSPD x2, FBI, Dillmore.
	new string[180], playerid2, time;
	if (sscanf(params, "dd", playerid2, time)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /arrestar [ID] (Minutos)");
	if (time < 1 || time > 60) { SendClientMessage(playerid, COLOR_WHITE, "Tiempo: 1 a 60 minutos."); return 1; }
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_RED, "Ese jugador no está conectado.");
	if (playerid == playerid2) return SendClientMessage(playerid, COLOR_GREY, "No puedes arrestarte tu mismo, pendejo..");
	if (!CercaDelMarica(5.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_RED, "Ese jugador no está cerca tuyo.");
	if (InfoPersonaje[playerid2][pEstrellas] < 1) return SendClientMessage(playerid, COLOR_WHITE, "El sospechoso debe tener un nivel de búsqueda de al menos una estrella.");
	format(string, sizeof string, "%s fue arrestado.", NombreJugador(playerid2));
	SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	SetPlayerSpecialAction(playerid,SPECIAL_ACTION_NONE);
	format(string, sizeof string, "[CENTRAL] %s fue arrestado por %s, %d minutos.", NombreJugador(playerid2), NombreJugador(playerid), time);
	SendRadioMessage(InfoPersonaje[playerid][pMiembro], COLOR_RADIO, string);
	new query[410];
	Loop(x, 10, 0) if (InfoInventario[InfoPersonaje[playerid2][pBolsillo][x]][IDArma] != 0)
	{
		InfoPersonaje[playerid2][pBolsillo][x] = 0;
		InfoPersonaje[playerid2][pBolsilloCant][x] = 0;
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Bolsillo_%d = 0, Cantidad_bolsillo_%d = 0 WHERE ID = '%d'", x+1, x+1, InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
	}
	if (InfoInventario[InfoPersonaje[playerid2][pManoIzquierda]][IDArma] != 0)
	{
		InfoPersonaje[playerid2][pManoIzquierda] = 0;
		InfoPersonaje[playerid2][pManoIzquierdaCant] = 0;
		RemovePlayerAttachedObject(playerid2, 8);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Mano_izquierda = 0, Cantidad_mano_izquierda = 0 WHERE ID = '%d'", InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
	}
	if (InfoInventario[InfoPersonaje[playerid2][pManoDerecha]][IDArma] != 0)
	{
		InfoPersonaje[playerid2][pManoDerecha] = 0;
		InfoPersonaje[playerid2][pManoDerechaCant] = 0;
		RemovePlayerAttachedObject(playerid, 7);
		ResetPlayerWeapons(playerid2);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Mano_derecha = 0, Cantidad_mano_derecha = 0 WHERE ID = '%d'", InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
	}
	if (InfoInventario[InfoPersonaje[playerid2][pEspalda]][IDArma] != 0)
	{
		InfoPersonaje[playerid2][pEspalda] = 0;
		InfoPersonaje[playerid2][pEspaldaCant] = 0;
		RemovePlayerAttachedObject(playerid2, 9);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Espalda = 0, Cantidad_espalda = 0 WHERE ID = '%d'", InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
	}
	GameTextForPlayer(playerid2, "Fuiste arrestado", 5000, 5);
	if (IsPlayerInRangeOfPoint(playerid, 5.0, 1559.32,-1693.75,5.9) || IsPlayerInRangeOfPoint(playerid, 5.0, 1559.65,-1649.43,4990.6)) // LSPD.
	{
		SetPlayerFacingAngle(playerid2, 0);
		LoadObjects(playerid2);
		if (InfoCuenta[playerid2][jVIP] >= 2) InfoPersonaje[playerid2][pTiempoSancion] = ((time*60)*75)/100;
		else InfoPersonaje[playerid2][pTiempoSancion] = time * 60;
		DeletePVar(playerid2, "IsFrozen");
		new rand = random(sizeof(LSPDPrisonSpawns));
		SetPosEx(playerid2, LSPDPrisonSpawns[rand][0], LSPDPrisonSpawns[rand][1], LSPDPrisonSpawns[rand][2], 0.0000, 1, 1, 1);
		LoadObjects(playerid2);
		InfoPersonaje[playerid2][pSancionado] = 2;
		InfoPersonaje[playerid2][pTogTelefono] = 0;
		InfoPersonaje[playerid2][pArrestos] += 1;
		InfoPersonaje[playerid2][pEstrellas] = 0;
		SetPlayerWantedLevel(playerid2, 0);
		ClearAnimations(playerid2);
		DeletePVar(playerid2, "PlayerCuffed");
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Estrellas = 0, Sancionado = 2, TiempoSancion = '%d', Arrestos = '%d' WHERE ID = '%d'",InfoPersonaje[playerid2][pTiempoSancion], InfoPersonaje[playerid2][pArrestos], InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
	}
	if (IsPlayerInRangeOfPoint(playerid, 5.0, 299.9566,-1529.9164,24.9219)) // FBI.
	{
		SetPlayerFacingAngle(playerid2, 0);
		LoadObjects(playerid2);
		if (InfoCuenta[playerid2][jVIP] >= 2) InfoPersonaje[playerid2][pTiempoSancion] = ((time*60)*75)/100;
		else InfoPersonaje[playerid2][pTiempoSancion] = time * 60;
		DeletePVar(playerid2, "IsFrozen");
		new rand = random(sizeof(FBIPrisonSpawns));
		SetPosEx(playerid2, FBIPrisonSpawns[rand][0], FBIPrisonSpawns[rand][1], FBIPrisonSpawns[rand][2], 0.0000, 0, 0, 1);
		InfoPersonaje[playerid2][pSancionado] = 3;
		InfoPersonaje[playerid2][pTogTelefono] = 0;
		InfoPersonaje[playerid2][pArrestos] += 1;
		InfoPersonaje[playerid2][pEstrellas] = 0;
		SetPlayerWantedLevel(playerid2, 0);
		ClearAnimations(playerid2);
		DeletePVar(playerid2, "PlayerCuffed");
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Estrellas = 0, Sancionado = 3, TiempoSancion = '%d', Arrestos = '%d' WHERE ID = '%d'",InfoPersonaje[playerid2][pTiempoSancion], InfoPersonaje[playerid2][pArrestos], InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
	}
	if (IsPlayerInRangeOfPoint(playerid, 4.0, 613.3228,-589.1623,17.2266)) // Dillimore (LSPD y FBI)
	{
		SetPlayerFacingAngle(playerid2, 0);
		if (InfoCuenta[playerid2][jVIP] >= 2) InfoPersonaje[playerid2][pTiempoSancion] = ((time*60)*75)/100;
		else InfoPersonaje[playerid2][pTiempoSancion] = time * 60;
		DeletePVar(playerid2, "IsFrozen");
		new rand = random(sizeof(PrisonDillmore));
		SetPosEx(playerid2, PrisonDillmore[rand][0], PrisonDillmore[rand][1], PrisonDillmore[rand][2], 0.0000, 5, 5, 1);
		InfoPersonaje[playerid2][pSancionado] = 6;
		InfoPersonaje[playerid2][pTogTelefono] = 0;
		InfoPersonaje[playerid2][pArrestos] += 1;
		InfoPersonaje[playerid2][pEstrellas] = 0;
		SetPlayerWantedLevel(playerid2, 0);
		ClearAnimations(playerid2);
		DeletePVar(playerid2, "PlayerCuffed");
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Estrellas = 0, Sancionado = 6, TiempoSancion = '%d', Arrestos = '%d' WHERE ID = '%d'",InfoPersonaje[playerid2][pTiempoSancion], InfoPersonaje[playerid2][pArrestos], InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
	}
	else
	{
		TogglePlayerControllable(playerid2, 0);
		LoadObjects(playerid2);
		if (InfoCuenta[playerid2][jVIP] >= 2) InfoPersonaje[playerid2][pTiempoSancion] = ((time*60)*75)/100;
		else InfoPersonaje[playerid2][pTiempoSancion] = time * 60;
		InfoPersonaje[playerid2][pSancionado] = 3;
		InfoPersonaje[playerid2][pTogTelefono] = 0;
		DeletePVar(playerid2, "IsFrozen");
		new rand = random(sizeof(FBIPrisonSpawns));
		SetPosEx(playerid2, FBIPrisonSpawns[rand][0], FBIPrisonSpawns[rand][1], FBIPrisonSpawns[rand][2], 0.0000, 0, 0, 1);
		InfoPersonaje[playerid2][pArrestos] += 1;
		InfoPersonaje[playerid2][pEstrellas] = 0;
		SetPlayerWantedLevel(playerid2, 0);
		ClearAnimations(playerid2);
		DeletePVar(playerid2, "PlayerCuffed");
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Estrellas = 0, Sancionado = 3, TiempoSancion = '%d', Arrestos = '%d' WHERE ID = '%d'",InfoPersonaje[playerid2][pTiempoSancion], InfoPersonaje[playerid2][pArrestos], InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query);
	}
	JailPrice[playerid2] = 0;
	format(string, sizeof string, "Fuiste encarcelado %d segundos.   Fianza: No Disponible.", InfoPersonaje[playerid2][pTiempoSancion]);
	SendClientMessage(playerid2, COLOR_LIGHTBLUE, string);
	return 1;
}

CMD:vendermateriales(playerid, params[])
{
	new string[128], playerid2, amount, price;
	if (sscanf(params, "ddd", playerid2, amount, price)) return SendClientMessage(playerid, COLOR_GRAD2, "Utiliza: /vendermateriales (playerid) (Monto) (Precio)");
	if (amount < 1 || amount > 99999999) { SendClientMessage(playerid, COLOR_WHITE, " Los valores no pueden ser mayores a 99999999 gramos ni menores a 1."); return 1; }
	if (price < 1) { SendClientMessage(playerid, COLOR_WHITE, " El precio no puede ser menor que 1,"); return 1; }
	if (playerid2 == playerid) return SendClientMessage(playerid, COLOR_WHITE, "No puedes venderte a ti mismo.");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "ID Inválido.");
	if (!CercaDelMarica(8.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Ese jugador no está cerca tuyo.");
	format(string, sizeof string, "* Has ofrecido a %s, %d materiales por $%d.", NombreJugador(playerid2), amount, price);
	SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	format(string, sizeof string, "* %s quiere venderte %d materiales por $%d, (Utiliza: /aceptar materiales para comprar).", NombreJugador(playerid), amount, price);
	SendClientMessage(playerid2, COLOR_LIGHTBLUE, string);
	MatsOffer[playerid2] = playerid;
	MatsPrice[playerid2] = price;
	MatsAmount[playerid2] = amount;
	return 1;
}

CMD:stuff(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
    new string[128];
	format(string, sizeof string, "[TASAS - FONDOS]: Gobierno (Fondos: %d$ - Impuesto %d$) | Precio /ad: %d$ - Fondos: %d$.",Tax,TaxValue,TaxAnuncios,FondosAnuncios);
	SendClientMessage(playerid, COLOR_GREY, string);
	format(string, sizeof string, "[OTROS DATOS] Jackpoint: %d | Sangre %d | GasolinaL %d | TXT Costs: %d",Jackpot,Blood,Fuel,txtcost);
	SendClientMessage(playerid, COLOR_GREY, string);
	return 1;
}

CMD:mostrar(playerid, params[])
{
	new string[128], playerid2, choice[32];
	if(sscanf(params, "ds[32]", playerid2, choice))
	{
		SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /mostrar (playerid) (Nombre)");
		SendClientMessage(playerid, COLOR_GREY, "Nombres: Materiales");
		return 1;
	}
	if(playerid2 == playerid)
	{
	    SendClientMessage(playerid, COLOR_WHITE, "No puedes enseñarte a ti mismo.");
		return 1;
	}
	if(IsPlayerConnected(playerid2))
	{
		if(playerid2 != INVALID_PLAYER_ID)
		{
			if (!CercaDelMarica(5.0, playerid, playerid2))
			{
				SendClientMessage(playerid, COLOR_WHITE, "Ese jugador no está cerca tuyo.");
				return 1;
			}
			if (strcmp(choice, "materiales", true) == 0)
			{
			    new amount = InfoPersonaje[playerid][pMateriales];
			    if(amount < 1)
			    {
			        SendClientMessage(playerid, COLOR_WHITE, "No tienes materiales!");
					return 1;
			    }
				format(string, sizeof string, "%s te ha mostrado sus %d Materiales.",  NombreJugador(playerid), amount);
				SendClientMessage(playerid2, COLOR_WHITE, string);

				format(string, sizeof string, "Enseñaste a %s tus %d Materiales.", NombreJugador(playerid2), amount);
				SendClientMessage(playerid, COLOR_WHITE, string);

				format(string, sizeof string, "* %s enseña algo a %s.", NombreJugador(playerid), NombreJugador(playerid2));
				ProxDetector(10.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
				return 1;
			}
		}
	}
	return 1;
}

CMD:saludar(playerid, params[])
{
	new string[128], playerid2, style;
	if(sscanf(params, "dd", playerid2, style)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /saludar (playerid) (estilo (1-8))");

	if(IsPlayerConnected(playerid2))
	{
		if(playerid2 == playerid)
		{
			SendClientMessage(playerid, COLOR_WHITE, "No puedes hacer eso tu mismo.");
			return 1;
		}
		if(style >= 1 && style < 9)
		{
			new Float: ppFloats[3];
			GetPlayerPos(playerid2, ppFloats[0], ppFloats[1], ppFloats[2]);
			if(!IsPlayerInRangeOfPoint(playerid, 5, ppFloats[0], ppFloats[1], ppFloats[2]))
			{
				SendClientMessage(playerid, COLOR_WHITE, "Estás demasiado lejos de la persona.");
				return 1;
			}
			SetPVarInt(playerid, "shrequest", playerid2);
			SetPVarInt(playerid, "shstyle", style);

			format(string, sizeof string, "Saludaste a %s, espera que el responda.", NombreJugador(playerid2));
			SendClientMessage(playerid, COLOR_LIGHTBLUE, string);

			format(string, sizeof string, "%s te ha saludado, porfavor usa '/aceptar saludo' para darle la mano.", NombreJugador(playerid));
			SendClientMessage(playerid2, COLOR_LIGHTBLUE, string);
		}
		else return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /saludar (playerid) (estilo (1-8))");
	}
	else SendClientMessage(playerid, COLOR_WHITE, "Jugador desconectado.");
	return 1;
}

CMD:vendercoche(playerid)
{
	if (!IsPlayerInRangeOfPoint(playerid, 5, 358.3934,186.1840,1008.3828)) return SendClientMessage(playerid, COLOR_GREY, "[ERROR]:{FFFFFF} Tienes que estar en el mostrador de la DGT, Dirección General de Tráfico para hacer esto.");
	new dialog[2048], gformat[256], iCount = 0;
	Loop(veh, totalvehiculos, 1) if (InfoVehiculo[veh][vTipo] == 0 && strcmp(InfoPersonaje[playerid][pNombre_Apellido], InfoVehiculo[veh][vPropietario], true) == 0)
	{
		if (InfoVehiculo[veh][vEmbargo] != 0) format(gformat, sizeof gformat, "%s (Embargado)\n", VehicleName[InfoVehiculo[veh][vModelo] - 400]);
		else format(gformat, sizeof gformat, "%s (ID: %d)\n", VehicleName[InfoVehiculo[veh][vModelo] - 400], InfoVehiculo[veh][vIG_id]);
		strcat(dialog, gformat);
		//conteo
		new gformat2[64];
		format(gformat2, sizeof gformat2, "sellvehkey%d", iCount);
		SetPVarInt(playerid, gformat2, veh);
		iCount++;
	}
	if (iCount == 0) return SendClientMessage(playerid, COLOR_WHITE, "No tienes ningún vehículo a tu nombre.");
	Dialog_Show(playerid, SellVehicle, DIALOG_STYLE_LIST, "{00AE57}Vender - Vehículo", dialog, "Continuar", "Salir");
	SendClientMessage(playerid, COLOR_LIGHTBLUE, "Si vendes el vehículo te pagarán la cuarta parte del precio de lo que te habia costado o menos.");
	return 1;
}

Dialog:SellVehicle(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new ID = listitem, gformat[40];
	format(gformat, sizeof gformat, "sellvehkey%d", ID);
	new veh = GetPVarInt(playerid, gformat);
	if (InfoVehiculo[veh][vModelo] == 0) return SendClientMessage(playerid, COLOR_GRAD2, "Seleccionaste un slot vacío.");
	if (InfoVehiculo[veh][vEmbargo]) return SendClientMessage(playerid, COLOR_WHITE, "No se puede vender un vehículo confiscado.");
	if (InfoVehiculo[veh][vPrecio] < 1) return SendClientMessage(playerid, COLOR_GREY, "No puedes vender vehículos VIP o cedidos por la administración.");
	new string[245], valor = InfoVehiculo[veh][vPrecio]/2;

	borrar_vehiculo(veh);
	format(string, sizeof string, "Gracias por la venta, el gobierno te ha pagado la mitad del vehículo por el vehículo. ($%s)", diner_coma(valor));
	SendClientMessage(playerid, COLOR_YELLOW, string);
	GivePlayerCash(playerid, valor, "sellvehicle");
	return 1;
}

CMD:limpiar(playerid, params[])
{
	new string[128], playerid2;
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /limpiar (playerid)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
	format(string, sizeof string, "* Limpiaste el nivel de búsqueda %s.", NombreJugador(playerid2));
	SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	format(string, sizeof string, "* Agente %s a limpiado tu nivel de búsqueda.", NombreJugador(playerid));
	SendClientMessage(playerid2, COLOR_LIGHTBLUE, string);
	format(string, sizeof string, "[CENTRAL] %s a limpiado el nivel de búsqueda de %s.", NombreJugador(playerid), NombreJugador(playerid2));
	SendRadioMessage(InfoPersonaje[playerid][pMiembro], COLOR_RADIO, string);
	InfoPersonaje[playerid2][pEstrellas] = 0;
	guardar_int_mysql("personajes", "LimiteRobos", InfoPersonaje[playerid2][pID], InfoPersonaje[playerid2][pEstrellas]);
	SetPlayerWantedLevel(playerid2, 0);
	return 1;
}

CMD:gunlocker(playerid)
{
	if (GetPlayerCash(playerid) < 1000) { SendClientMessage(playerid, COLOR_WHITE, "No tienes 1000$ para mejorar el máximo de slots de tu maletero."); return 1; }
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_WHITE, "Debes ser el conductor de un vehículo.");
	new vehicleid = GetPlayerVehicleID(playerid);
	Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] == vehicleid)
	{
		if (InfoVehiculo[v][vEmbargo] != 0) return SendClientMessage(playerid, COLOR_GREY, "Este vehículo se encuentra embargado.");
		if (llaves_vehiculo(playerid, vehicleid) == -1) return SendClientMessage(playerid, COLOR_GREY, "No tienes las llaves de este vehículo.");
		if (InfoVehiculo[v][vMaxMaletero] == 10) return SendClientMessage(playerid, COLOR_GREY, "Llegaste al máximo de 10 slots en el maletero de este vehículo.");
		new string[256];
		GameTextForPlayer(playerid,"~g~Gunlocker mejorado!",5000,6);
		PlayerPlaySound(playerid, 1145, 0.0, 0.0, 0.0);
		InfoVehiculo[v][vMaxMaletero]++;
		GivePlayerCash(playerid, -1000, "gunlocker");
		format(string, sizeof string, "Ahora tu %s dispone de {FFFF00}%d slots{FFFFFF} en el maletero. (Mejoras: {FFFF00}/smaletero /gmaletero{FFFFFF})", InfoVehiculo[v][vMaxMaletero]);
		SendClientMessage(playerid, 0xFFFFFFFF, string);
		guardar_int_mysql("vehiculos", "MaxMaletero", InfoVehiculo[v][vID_sql], InfoVehiculo[v][vMaxMaletero]);
		return 1;
	}
	SendClientMessage(playerid, COLOR_WHITE, "Debes estar dentro de un vehículo propio.");
	return 1;
}

CMD:gmaletero(playerid)
{
	if (GetPVarInt(playerid, "EstaCrack") != 0) return SendClientMessage(playerid, COLOR_GREY, "No puedes usar este comando mientras estás herido o muerto.");
 	if (InfoPersonaje[playerid][pManoDerecha] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes un objeto en tu mano derecha.");
	new gformat[270], Float: x, Float: y, Float: z;
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] != 0)
	{
		new vehicleid = InfoVehiculo[id][vIG_id], objeto = InfoPersonaje[playerid][pManoDerecha], objetocant = InfoPersonaje[playerid][pManoDerechaCant];
		GetVehiclePos(vehicleid, x, y, z);
		if (IsPlayerInRangeOfPoint(playerid, 4.0, x, y, z))
		{
			if (!Vehiculo_LSPD(vehicleid) && !Vehiculo_SASD(vehicleid) && !Vehiculo_FBI(vehicleid) && !Vehiculo_SAEM(vehicleid))
			{
				if (IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto mientras estar en el interior del vehículo!");
			}
			if (InfoVehiculo[id][vMaleteroOn] == 0) return SendClientMessage(playerid, COLOR_GREY, "El maletero de este vehículo está cerrado, utilzia (/v maletero) para abrirlo.");
			if (InfoVehiculo[id][vMaxMaletero] >= 10)
			{
				InfoVehiculo[id][vMaxMaletero] = 10;
				guardar_int_mysql("vehiculos", "MaxMaletero", InfoVehiculo[id][vID_sql], InfoVehiculo[id][vMaxMaletero]);
			}
			if (EstaEnBicis(vehicleid)) return SendClientMessage(playerid, COLOR_GREY,"Este vehículo no tiene maletero.");
			new rSlot = -1;
			Loop(xs, InfoVehiculo[id][vMaxMaletero], 0) if (InfoVehiculo[id][vMaletero][xs] == 0)
			{
			    rSlot = xs;
			    break;
			}
			if (rSlot == -1)
			{
				if (InfoVehiculo[id][vMaxMaletero] == 10) format(gformat, sizeof gformat, "No puedes guardar más cosas en tu maletero, máximo %d slots.", InfoVehiculo[id][vMaxMaletero]);
				else format(gformat, sizeof gformat, "No puedes guardar más cosas en tu maletero, máximo %d slots. (Usa /gunlocker)", InfoVehiculo[id][vMaxMaletero]);
				SendClientMessage(playerid, COLOR_RED, gformat);
				return 1;
			}
			InfoVehiculo[id][vMaletero][rSlot] = objeto;
			InfoVehiculo[id][vMaleteroCant][rSlot] = objetocant;
			mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE vehiculos SET Maletero%d = '%d', MaleteroCant%d = '%d' WHERE ID = '%d'", rSlot+1, objeto, rSlot+1, objetocant, InfoVehiculo[id][vID_sql]);
			mysql_tquery(DBInsanity, gformat);
			ResetPlayerWeapons(playerid);
			RemovePlayerAttachedObject(playerid, 7);
			InfoPersonaje[playerid][pManoDerecha] = 0;
			InfoPersonaje[playerid][pManoDerechaCant] = 0;
			mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE personajes SET Mano_derecha = 0, Cantidad_mano_derecha = 0 WHERE ID = '%d'", InfoPersonaje[playerid][pID]);
			mysql_tquery(DBInsanity, gformat);
			if (objetocant == 0 || objetocant == 1) format(gformat, sizeof gformat, "Guardaste en el maletero tu %s.", InfoInventario[objeto][NombreObjeto]);
			else
			{
				if (InfoInventario[objeto][IDArma] != 0) format(gformat, sizeof gformat, "Guardaste en el maletero tu %s con %d balas.", InfoInventario[objeto][NombreObjeto], objetocant);
				else format(gformat, sizeof gformat, "Guardaste en el maletero tu %s con %d de cantidad.", InfoInventario[objeto][NombreObjeto], objetocant);
			}
			SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat);
			format(gformat, sizeof gformat, "guarda en el maletero su %s", InfoInventario[objeto][NombreObjeto]);
			ameuwu(playerid, gformat);
			return 1;
		}
	}
    SendClientMessage(playerid, COLOR_GREY, "Debes estar cerca del maletero de un vehículo dinámico.");
	return 1;
}
CMD:guardarmaletero(playerid) return cmd_gmaletero(playerid);

CMD:smaletero(playerid, params[])
{
	if (GetPVarInt(playerid, "EstaCrack") != 0) return SendClientMessage(playerid, COLOR_GREY, "No puedes usar este comando mientras estás herido o muerto.");
	if (InfoPersonaje[playerid][pManoDerecha] != 0) return SendClientMessage(playerid, COLOR_GREY, "Ya tienes un objeto en tu mano derecha.");
	if (InfoPersonaje[playerid][pHorasOn] < 2) return SendClientMessage(playerid, COLOR_GREY, "Tienes restricción de armas.");
	new gformat[270], Float: x, Float: y, Float: z;
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] != 0)
	{
		new vehicleid = InfoVehiculo[id][vIG_id];
		GetVehiclePos(vehicleid, x, y, z);
		if (IsPlayerInRangeOfPoint(playerid, 4.0, x, y, z))
		{
			if (!Vehiculo_LSPD(vehicleid) && !Vehiculo_SASD(vehicleid) && !Vehiculo_FBI(vehicleid) && !Vehiculo_SAEM(vehicleid))
			{
				if (IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_GREY, "No puedes hacer esto mientras estar en el interior del vehículo!");
			}
			if (InfoVehiculo[id][vMaleteroOn] == 0) return SendClientMessage(playerid, COLOR_GREY, "El maletero de este vehículo está cerrado, utilzia (/v maletero) para abrirlo.");
			if (InfoVehiculo[id][vMaxMaletero] >= 10)
			{
				InfoVehiculo[id][vMaxMaletero] = 10;
				guardar_int_mysql("vehiculos", "MaxMaletero", InfoVehiculo[id][vID_sql], InfoVehiculo[id][vMaxMaletero]);
			}
			if (EstaEnBicis(vehicleid)) return SendClientMessage(playerid, COLOR_GREY, "Este vehículo no tiene maletero.");
			new rSlot, maxmaletero = InfoVehiculo[id][vMaxMaletero];
			if (sscanf(params, "i", rSlot))
			{
			    new count = 0;
				Loop(xs, maxmaletero, 0) if (InfoVehiculo[id][vMaletero][xs] != 0) count++;
				if (count == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes nada en tu maletero.");
				SendClientMessage(playerid, COLOR_GREY, "Utiliza: /smaletero (Slot)");
				Loop(xs, maxmaletero, 0) if (InfoVehiculo[id][vMaletero][xs] != 0)
				{
					format(gformat, sizeof gformat, "Tienes en {00AE57}slot %d{EBEBEB}: %s", xs+1, slot_objeto(InfoVehiculo[id][vMaletero][xs], InfoVehiculo[id][vMaleteroCant][xs]));
					SendClientMessage(playerid, 0xEBEBEBFF, gformat);
				}
				return 1;
			}
			if (rSlot < 1 || rSlot > maxmaletero)
			{
				format(gformat, sizeof gformat, "El número de slot debe estar entre 1 y %d.", maxmaletero);
				SendClientMessage(playerid, COLOR_GREY, gformat);
				return 1;
			}
			rSlot--;
			if (InfoVehiculo[id][vMaletero][rSlot] == 0) return SendClientMessage(playerid, COLOR_RED, "No tienes nada en ese slot.");
			new objeto = InfoVehiculo[id][vMaletero][rSlot], objetocant = InfoVehiculo[id][vMaleteroCant][rSlot];
			InfoVehiculo[id][vMaletero][rSlot] = 0;
			InfoVehiculo[id][vMaleteroCant][rSlot] = 0;
			mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE vehiculos SET Maletero%d = 0, MaleteroCant%d = 0 WHERE ID = '%d'", rSlot+1, rSlot+1, InfoVehiculo[id][vID_sql]);
			mysql_tquery(DBInsanity, gformat);
			InfoPersonaje[playerid][pManoDerecha] = objeto;
			InfoPersonaje[playerid][pManoDerechaCant] = objetocant;
			mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE personajes SET Mano_derecha = '%d', Cantidad_mano_derecha = '%d' WHERE ID = '%d'", objeto, objetocant, InfoPersonaje[playerid][pID]);
			mysql_tquery(DBInsanity, gformat);
			if (objetocant == 1 || objetocant == 0) format(gformat, sizeof gformat, "Sacaste tu %s del maletero.", InfoInventario[objeto][NombreObjeto]);
			else
			{
				if (InfoInventario[objeto][IDArma] != 0) format(gformat, sizeof gformat, "Sacaste tu %s con %d balas del maletero.", InfoInventario[objeto][NombreObjeto], objetocant);
				else format(gformat, sizeof gformat, "Sacaste tu %s con %d de cantidad del maletero.", InfoInventario[objeto][NombreObjeto], objetocant);
			}
			SendClientMessage(playerid, COLOR_LIGHTBLUE, gformat);
			format(gformat, sizeof gformat, "saca su %s del maletero", InfoInventario[objeto][NombreObjeto]);
			ameuwu(playerid, gformat);
			ResetPlayerWeapons(playerid);
			if (InfoInventario[objeto][IDArma] > 0)
			{
				GivePlayerWeapon(playerid, InfoInventario[objeto][IDArma], objetocant);
			}
			PonerObjeto(playerid, 1, objeto);
			return 1;
		}
	}
    SendClientMessage(playerid, COLOR_GREY, "Debes estar cerca del maletero de un vehículo dinámico.");
	return 1;
}
CMD:sacarmaletero(playerid, params[]) return cmd_smaletero(playerid, params);

CMD:darvest(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[128], playerid2, slot, invoice[64];
	if (sscanf(params, "dds[64]", playerid2, slot, invoice)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /darvest (playerid) (slot(0-6)) (invoice #)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
	if (slot < 0 || slot > 6) return SendClientMessage(playerid, 0xFF6347AA, "Slot 0 al 6.");

	InfoPersonaje[playerid2][ptModelo][slot] = 19142;
	InfoPersonaje[playerid2][ptHueso][slot] = 1;
	InfoPersonaje[playerid2][ptPosX][slot] = 0.07998;
	InfoPersonaje[playerid2][ptPosY][slot] = 0.03999;
	InfoPersonaje[playerid2][ptPosZ][slot] = 0.0;
	InfoPersonaje[playerid2][ptRotX][slot] = 0.0;
	InfoPersonaje[playerid2][ptRotY][slot] = 0.0;
	InfoPersonaje[playerid2][ptRotZ][slot] = 0.0;
	ActualizarToy(playerid2, slot);
	format(string, sizeof string, "Police Vest en el slot %d, usa /toys para editar la posición.", slot);
	SendClientMessage(playerid2, COLOR_LIGHTGREEN, string);
	format(string, sizeof string, "Diste a %s un police vest en el slot %d", NombreJugador(playerid2), slot);
	SendClientMessage(playerid, COLOR_LIGHTGREEN, string);
	format(string, sizeof string, "[SHOPVEST] %s has given %s a police vest toy - Invoice %s", NombreDeCuenta(playerid), NombreDeCuenta(playerid2), invoice);
	Log("LOGS/shoplog.log", string);
	return 1;
}

CMD:darvest2(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[128], playerid2, slot, invoice[64];
	if (sscanf(params, "dds[64]", playerid2, slot, invoice)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /darvest (playerid) (slot(0-6)) (invoice #)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
	if (slot < 0 || slot > 6) return SendClientMessage(playerid, 0xFF6347AA, "Slot 0 al 6.");

	InfoPersonaje[playerid2][ptModelo][slot] = 19515;
	InfoPersonaje[playerid2][ptHueso][slot] = 1;
	InfoPersonaje[playerid2][ptPosX][slot] = 0.07998;
	InfoPersonaje[playerid2][ptPosY][slot] = 0.03999;
	InfoPersonaje[playerid2][ptPosZ][slot] = 0.0;
	InfoPersonaje[playerid2][ptRotX][slot] = 0.0;
	InfoPersonaje[playerid2][ptRotY][slot] = 0.0;
	InfoPersonaje[playerid2][ptRotZ][slot] = 0.0;
	ActualizarToy(playerid2, slot);
	format(string, sizeof string, "Police Vest en el slot %d, usa /toys para editar la posición.", slot);
	SendClientMessage(playerid2, COLOR_LIGHTGREEN, string);
	format(string, sizeof string, "Diste a %s un police vest en el slot %d", NombreJugador(playerid2), slot);
	SendClientMessage(playerid, COLOR_LIGHTGREEN, string);
	format(string, sizeof string, "[SHOPVEST] %s has given %s a police vest toy - Invoice %s", NombreDeCuenta(playerid), NombreDeCuenta(playerid2), invoice);
	Log("LOGS/shoplog.log", string);
	return 1;
}

CMD:vertoys(playerid, params[])
{
	if (CheckAdminCMD(playerid, 3)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new iTargetID;
	if (sscanf(params, "d", iTargetID)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /vertoys (playerid)");
	if (!IsPlayerConnectedEx(iTargetID)) return SendClientMessage(playerid, COLOR_WHITE, "Jugador Invalido.");
	new szMessages[170], count = 0;
	Loop(iToyIter, 7, 0)
	{
		Loop(LoopRapist, sizeof InfoToy, 0) if (InfoToy[LoopRapist][accModelo] == InfoPersonaje[iTargetID][ptModelo][iToyIter])
		{
			format(szMessages, sizeof szMessages, "%s (slot %i, parte: %s)", InfoToy[LoopRapist][accNombre], iToyIter, GetParteToy(iTargetID, iToyIter));
			SendClientMessage(playerid, COLOR_WHITE, szMessages);
			count++;
		}
	}
	if (count == 0) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador no tiene toys.");
	return 1;
}

CMD:servicio(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4, 5)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley.");
	if (OnDuty[playerid] == 0)
	{
		OnDuty[playerid] = 1;
		SendClientMessage(playerid, COLOR_WHITE, "Ahora estas en servicio.");
	}
	else
	{
		OnDuty[playerid] = 0;
		SendClientMessage(playerid, COLOR_WHITE, "Ahora ya no estas en servicio.");
	}
	return 1;
}
CMD:duty(playerid) return cmd_servicio(playerid);
CMD:enservicio(playerid) return cmd_servicio(playerid);

CMD:invitar(playerid, params[])
{
	new acceso = 0, id = InfoPersonaje[playerid][pMiembro], playerid2, dialog[550];
	if (id == 0) return SendClientMessage(playerid, COLOR_GREY, "No eres miembro de facción.");
	if (InfoPersonaje[playerid][pRango] == InfoFaccion[id][fMaxRangos]) { acceso = 1; }
	else { if (InfoPersonaje[playerid][pLider] == id) acceso = 1; }
	if (acceso == 0) return SendClientMessage(playerid, COLOR_GREY, "No eres lider de facción o rango máximo.");
	if (GetMiembrosFaccion(id) >= 70) return SendClientMessage(playerid, COLOR_GREY, "No puedes tener más de 70 miembros.");
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /invitar (PlayerID)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "El jugador seleccionado no se encuentra conectado.");
	if (TomandoTrabajo[playerid2] != -1) return SendClientMessage(playerid, COLOR_GREY, "Este jugador está en otra tarea, espera.");
	if (InfoPersonaje[playerid2][pLider]) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador es lider de una facción.");
	if (InfoPersonaje[playerid2][pMiembro]) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador ya es miembro de una facción.");

	TomandoTrabajo[playerid2] = playerid;
	format(dialog, sizeof dialog, "{FFFFFF}%s te ha ofrecido unirte a {00AE57}%s\n\
	{FFFFFF}Si quieres ser parte presiona 'si', de lo contrario presiona 'no'.\n", NombreJugador(playerid), InfoFaccion[id][fNombre]);
	Dialog_Show(playerid2, InviteFaccion, DIALOG_STYLE_MSGBOX, "Unirse facción", dialog, "Si", "No");
	format(dialog, sizeof(dialog), "Has ofrecido a %s, formar parte de tu facción.", NombreJugador(playerid2));
	SendClientMessage(playerid, COLOR_GREEN, dialog);
	return 1;
}
CMD:contratar(playerid, params[]) return cmd_invitar(playerid, params);

Dialog:InviteFaccion(playerid, response, listitem, inputtext[])
{
	new string[256], playerid2 = TomandoTrabajo[playerid], query[512];
	if (!IsPlayerConnectedEx(playerid2))
	{
		TomandoTrabajo[playerid] = -1;
		SendClientMessage(playerid, COLOR_GREY, "El lider se ha desconectado, perdiste la oferta.");
		return 1;
	}
	new id = InfoPersonaje[playerid2][pMiembro];
	if (!response) //rechazo
	{
		format(string, sizeof string, "Rechaste la invitación a %s.", InfoFaccion[id][fNombre]);
		SendClientMessage(playerid, 0xEFEFEFFF, string);
		format(string, sizeof string, "%s rechazó la invitación", NombreJugador(playerid));
		SendClientMessage(playerid2, 0xEFEFEFFF, string);
		TomandoTrabajo[playerid] = -1;
		return 1;
	}
	//acepto
	InfoPersonaje[playerid][pMiembro] = id;
	InfoPersonaje[playerid][pRango] = 1;
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET MiembroFaccion = '%d', Rango = '%d' WHERE ID = '%d'", InfoPersonaje[playerid][pMiembro], InfoPersonaje[playerid][pRango], InfoPersonaje[playerid][pID]);
	mysql_tquery(DBInsanity, query);

	format(string, sizeof string, "Ahora formas parte de %s.", InfoFaccion[id][fNombre]);
	SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
	format(string, sizeof string, "%s aceptó la invitación.", NombreJugador(playerid));
	SendClientMessage(playerid2, COLOR_LIGHTBLUE, string);
	format(string, sizeof string, "Registros: %s ahora es %s por %s.", NombreDeCuenta(playerid), InfoFaccion[id][fNombre], NombreDeCuenta(playerid2));
	Log("LOGS/UnirseFaccion.log", string);

	TomandoTrabajo[playerid] = -1;
	return 1;
}

CMD:fnombre(playerid, params[])
{
	new acceso = 0, id = InfoPersonaje[playerid][pMiembro];
	if (id == 0) return SendClientMessage(playerid, COLOR_GREY, "No eres miembro de facción.");
	if (InfoPersonaje[playerid][pRango] == InfoFaccion[id][fMaxRangos]) { acceso = 1; }
	else { if (InfoPersonaje[playerid][pLider] == id) acceso = 1; }
	if (acceso == 0) return SendClientMessage(playerid, COLOR_GREY, "No eres lider de facción o rango máximo.");
	new fnombre[128], query[256];
	if (sscanf(params, "s[128]", fnombre)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /fnombre (Nombre)");
	if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "Tu facción no tiene un tipo asignado.");
	if (!strcmp(InfoCuenta[playerid][jNombre], "Andres", true) || !strcmp(InfoCuenta[playerid][jNombre], "Artic", true))
	{
		alm(InfoFaccion[id][fNombre], fnombre);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE facciones SET Nombre = '%e' WHERE ID = '%d'", InfoFaccion[id][fNombre], InfoFaccion[id][fID_sql]);
		mysql_tquery(DBInsanity, query);
		format(query, sizeof query, "Nuevo nombre: %s", fnombre);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, query);
	}
	else
	{
		if (NoFacEdit(id)) return SendClientMessage(playerid, COLOR_GREY, "No puedes editar facciones oficiales del servidor.");
		alm(InfoFaccion[id][fNombre], fnombre);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE facciones SET Nombre = '%e' WHERE ID = '%d'", InfoFaccion[id][fNombre], InfoFaccion[id][fID_sql]);
		mysql_tquery(DBInsanity, query);
		format(query, sizeof query, "Nuevo nombre: %s", fnombre);
		SendClientMessage(playerid, COLOR_LIGHTBLUE, query);
	}
	return 1;
}

CMD:frango(playerid, params[])
{
	new acceso = 0, id = InfoPersonaje[playerid][pMiembro];
	if (id == 0) return SendClientMessage(playerid, COLOR_GREY, "No eres miembro de facción.");
	if (InfoPersonaje[playerid][pRango] == InfoFaccion[id][fMaxRangos]) { acceso = 1; }
	else { if (InfoPersonaje[playerid][pLider] == id) acceso = 1; }
	if (acceso == 0) return SendClientMessage(playerid, COLOR_GREY, "No eres lider de facción o rango máximo.");
	new fnamerango[32], query[256], rango;
	if (sscanf(params, "ds[32]", rango, fnamerango)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /frango (Rango) (Nombre)");
	if (!InfoFaccion[id][fTipo]) return SendClientMessage(playerid, COLOR_GREY, "Tu facción no tiene un tipo asignado.");
	if (rango > InfoFaccion[id][fMaxRangos] || rango < 1)
	{
		format(query, sizeof query, "El máximo de rangos de %s es %d.", InfoFaccion[id][fLogo], InfoFaccion[id][fMaxRangos]);
		SendClientMessage(playerid, COLOR_GREY, query);
		return 1;
	}
	alm(fac_rango[id][rango-1], fnamerango);
	mysql_format(DBInsanity, query, sizeof query, "UPDATE facciones SET Rango%d = '%e' WHERE ID = '%d'", rango, fnamerango, InfoFaccion[id][fID_sql]);
	mysql_tquery(DBInsanity, query);
	format(query, sizeof query, "Rango %d: %s", rango, fnamerango);
	SendClientMessage(playerid, COLOR_LIGHTBLUE, query);
	return 1;
}

LimpiarEmpleados(id)
{
	new query[160];
	mysql_format(DBInsanity, query, sizeof query, "SELECT * FROM personajes WHERE Contrato = '%d'", id);
	return mysql_tquery(DBInsanity, query, "OnEmpleadosNeg", "d", id);
}

forward OnEmpleadosNeg(id);
public OnEmpleadosNeg(id)
{
	new query[170];
	Loop(player, cache_num_rows(), 0)
	{
		new nombreapellido[32], newid = -1;
		reg_string(player, "Nombre_Apellido", nombreapellido, 32);
		//fix 22/04/2020
		foreach(Player, juegador) if (IsPlayerConnectedEx(juegador) && !strcmp(InfoPersonaje[juegador][pNombre_Apellido], nombreapellido, true)) { newid = juegador; }
 		//fix 22/04/2020
		if (IsPlayerConnectedEx(newid))
		{
			InfoPersonaje[newid][pContrato] = -1;
			SendClientMessage(newid, -1, "Se hizo limpieza de empleados en el negocio/empresa donde trabajabas.");
		}
		mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Contrato = -1 WHERE Nombre_Apellido = '%e'", nombreapellido);
		mysql_tquery(DBInsanity, query);
	}
	return 1;
}

CMD:fllaves(playerid)
{
	new faccion = InfoPersonaje[playerid][pMiembro];
	if (faccion == 0) return SendClientMessage(playerid, COLOR_GREY, "No eres miembros de facción.");
	new dialog[3684], gformat[370], vcount = 0;
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vTipo] == faccion)
	{
		format(gformat, sizeof gformat, "[%d] %s (%d)\n", vcount+1, VehicleName[InfoVehiculo[id][vModelo] - 400], InfoVehiculo[id][vIG_id]);
		strcat(dialog, gformat);
		//conteo
		new gformat2[64];
		format(gformat2, sizeof gformat2, "RanuraVeh%d", vcount);
		SetPVarInt(playerid, gformat2, id);
		vcount++;
	}
	if (vcount == 0) return SendClientMessage(playerid, COLOR_WHITE, "No tienes ningún vehículo en tu facción.");
	Dialog_Show(playerid, MenuFacVehiculos, DIALOG_STYLE_LIST, InfoFaccion[faccion][fNombre], dialog, "Continuar", "Salir");
	return 1;
}

Dialog:MenuFacVehiculos(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new xd = listitem, gformat[40], gtitulo[170];
	format(gformat, sizeof gformat, "RanuraVeh%d", xd);
	new id = GetPVarInt(playerid, gformat);
	if (InfoVehiculo[id][vModelo] == 0) return SendClientMessage(playerid, COLOR_GRAD2, "Seleccionaste un slot vacío.");
	id_veh_actual[playerid] = id;
	format(gtitulo, sizeof gtitulo, "Opciones para {00AE57}%s", VehicleName[InfoVehiculo[id][vModelo] - 400]);
	Dialog_Show(playerid, Menu2FacVehiculos, DIALOG_STYLE_LIST, gtitulo, "{0073E6}-{FFFFFF} Localizar\n{0073E6}-{FFFFFF} Maletero", "Continuar", "Volver");
	return 1;
}

Dialog:Menu2FacVehiculos(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_fllaves(playerid);
	new id = id_veh_actual[playerid], string[235];
	if (InfoVehiculo[id][vModelo] == 0) return SendClientMessage(playerid, COLOR_GRAD2, "Seleccionaste un slot vacío.");
	switch (listitem)
	{
		case 0: //localizar
		{
			new Float: carPos[3], zone[MAX_ZONE_NAME];
			GetVehiclePos(InfoVehiculo[id][vIG_id], carPos[0], carPos[1], carPos[2]);
			GetCar3DZone(InfoVehiculo[id][vIG_id], zone, sizeof(zone));
			format(string, sizeof string, "El vehículo {00AE57}%s{FFFFFF} fue localizado en {00D500}%s{FFFFFF}. (Vé al checkpoint)", GetVehicleName(InfoVehiculo[id][vIG_id]), zone);
			SendClientMessage(playerid, COLOR_WHITE, string);
			SetPlayerCheckpoint(playerid, carPos[0], carPos[1], carPos[2], 15.0);
			PlayerPlaySound(playerid, 1138, 0, 0, 0);
			SetPVarInt(playerid, "TrackCar", 1);
		}
		case 1: //maletero
		{
			new count = 0;
			Loop(x, 10, 0) if (InfoVehiculo[id][vMaletero][x] != 0)
			{
				count++;
				format(string, sizeof string, "#%d %s", x+1, slot_objeto(InfoVehiculo[id][vMaletero][x], InfoVehiculo[id][vMaleteroCant][x]));
				SendClientMessage(playerid, COLOR_WHITE, string);
			}
			if (count == 0) return SendClientMessage(playerid, COLOR_GREY, "No hay nada en el maletero.");
			SendClientMessage(playerid, -1, "Recuerda que los comandos de maletero son: {00AE57}/gmaletero {FFFFFF}-{00AE57} /smaletero");
		}
	}
	return 1;
}


CMD:miembros(playerid) return cmd_listamiembros(playerid);
CMD:listamiembros(playerid)
{
	new faccion = InfoPersonaje[playerid][pMiembro];
	if (faccion == 0) return SendClientMessage(playerid, COLOR_GREY, "No eres miembros de facción.");
	new query[256];
	mysql_format(DBInsanity, query, sizeof query, "SELECT * FROM personajes WHERE MiembroFaccion = '%d'", faccion);
	mysql_tquery(DBInsanity, query, "OnMembersFaction", "dd", playerid, faccion);
	return 1;
}

forward OnMembersFaction(playerid, id);
public OnMembersFaction(playerid, id)
{
	new members = 0, gformat[256], dialog[4700] = "Nombre\tRango\tEstado\n";
	Loop(player, cache_num_rows(), 0)
	{
		new nombreapellido[32], rango, newid = -1;
		reg_string(player, "Nombre_Apellido", nombreapellido, 32);
		reg_int(player, "Rango", rango);
		//fix 22/04/2020
		foreach(Player, juegador) if (IsPlayerConnectedEx(juegador) && !strcmp(InfoPersonaje[juegador][pNombre_Apellido], nombreapellido, true)) { newid = juegador; }
 		//fix 22/04/2020
		if (IsPlayerConnectedEx(newid)) format(gformat, sizeof gformat, "%s\t%s (%d)\t{29B311}Conectado\n", nombreapellido, fac_rango[id][rango-1], rango);
		else format(gformat, sizeof gformat, "%s\t%s (%d)\t{E24D32}Desconectado\n", nombreapellido, fac_rango[id][rango-1], rango);
		strcat(dialog, gformat);
		format(gformat, sizeof gformat, "Miembro_List%d", members);
		SetPVarString(playerid, gformat, nombreapellido);
		members++;
	}
	if (members == 0) return Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_LIST, InfoFaccion[id][fNombre], "{FFFFFF}No se encontraron miembros.", "Cerrar", "");
	new acceso = 0;
	if (InfoPersonaje[playerid][pRango] == InfoFaccion[id][fMaxRangos]) { acceso = 1; }
	else { if (InfoPersonaje[playerid][pLider] == id) acceso = 1; }
	if (acceso != 0) Dialog_Show(playerid, MenuMiembros, DIALOG_STYLE_TABLIST_HEADERS, InfoFaccion[id][fNombre], dialog, "Continuar", "Salir");
	else Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_TABLIST_HEADERS, InfoFaccion[id][fNombre], dialog, "Cerrar", "");
	return 1;
}

Dialog:MenuMiembros(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new ID = listitem, gformat[128], nombre_miembro[32];
	format(gformat, sizeof gformat, "Miembro_List%d", ID);
	GetPVarString(playerid, gformat, nombre_miembro, sizeof nombre_miembro);
	SetPVarString(playerid, "Miembro_Actual", nombre_miembro);
	format(gformat, sizeof gformat, "Miembro: {00AE57}%s", nombre_miembro);
	Dialog_Show(playerid, OpcionMiembros, DIALOG_STYLE_LIST, gformat, "Dar rango\nÚltima conexión\n{B00000}Expulsar de la facción", "Continuar", "Volver");
	return 1;
}

Dialog:OpcionMiembros(playerid, response, listitem, inputtext[])
{
	if (!response) return cmd_listamiembros(playerid);
	new nombre_miembro[32], newid = -1, string[256], ultimaconexion[256], faccion = InfoPersonaje[playerid][pMiembro], query[512];
	GetPVarString(playerid, "Miembro_Actual", nombre_miembro, sizeof nombre_miembro);
	//fix 22/04/2020
	foreach(Player, juegador) if (IsPlayerConnectedEx(juegador) && !strcmp(InfoPersonaje[juegador][pNombre_Apellido], nombre_miembro, true)) { newid = juegador; }
	//fix 22/04/2020
	new eslider;
	if (VerificarPersonaje(nombre_miembro))
	{
		reg_int(0, "LiderFaccion", eslider);
		reg_string(0, "UltimaConexion", ultimaconexion, 256);
	}
	else return SendClientMessage(playerid, COLOR_GREY, "Esa cuenta no existe.");
	switch (listitem)
	{
		case 0: //darrango
		{
			new maxrangos = InfoFaccion[faccion][fMaxRangos];
			new dialog[1024], gformat[128];
			Loop(rango, maxrangos, 0)
			{
				format(gformat, sizeof gformat, "(%d) %s\n", rango+1, fac_rango[faccion][rango]);
				strcat(dialog, gformat);
			}
			format(gformat, sizeof gformat, "Miembro: {00AE57}%s", nombre_miembro);
			Dialog_Show(playerid, DarRango, DIALOG_STYLE_LIST, gformat, dialog, "Continuar", "Salir");
		}
		case 1: //última conexión
		{
			if (IsPlayerConnectedEx(newid))
			{
				format(string, sizeof string, "%s está conectado ID: %d", nombre_miembro, newid);
				SendClientMessage(playerid, COLOR_GREEN, string);
				return 1;
			}
			format(string, sizeof string, "%s: %s", nombre_miembro, ultimaconexion);
			SendClientMessage(playerid, COLOR_PURPLE, string);
		}
		case 2: //expulsar de la facción
		{
			if (eslider != 0) return SendClientMessage(playerid, COLOR_GREY, "* No puedes expulsar lideres de la facción, habla con un admin.");
			if (IsPlayerConnectedEx(newid))
			{
			    if (playerid == newid) return SendClientMessage(playerid, COLOR_GREY, "No te puedes expulsar de la facción.");
				InfoPersonaje[newid][pLider] = 0;
				InfoPersonaje[newid][pMiembro] = 0;
				InfoPersonaje[newid][pRango] = 0;
				if (faccion == 1 || faccion == 2 || faccion == 3) GivePlayerSkin(newid, 155);
				if (OnDuty[newid] != 0) OnDuty[newid] = 0;
			}
			format(string, sizeof string, "Líder %s expulsó de la facción a %s.", NombreOriginal(playerid), nombre_miembro);
			SendFaccionMessage(InfoPersonaje[playerid][pMiembro], 0x33CCFFFF, string);
			mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET LiderFaccion = 0, MiembroFaccion = 0, Rango = 0 WHERE Nombre_Apellido = '%e'", nombre_miembro);
			mysql_tquery(DBInsanity, query);
		}
	}
	return 1;
}

Dialog:DarRango(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new nombre_miembro[32], newid = -1, string[256], rango = listitem;
	new faccion = InfoPersonaje[playerid][pMiembro], query[512];
	GetPVarString(playerid, "Miembro_Actual", nombre_miembro, sizeof nombre_miembro);
	//fix 22/04/2020
	foreach(Player, juegador) if (IsPlayerConnectedEx(juegador) && !strcmp(InfoPersonaje[juegador][pNombre_Apellido], nombre_miembro, true)) { newid = juegador; }
	//fix 22/04/2020
	if (IsPlayerConnectedEx(newid)) InfoPersonaje[newid][pRango] = rango+1;
	format(string, sizeof string, "Líder %s asignó rango %s(%d) al miembro %s.", NombreOriginal(playerid), fac_rango[faccion][rango], rango+1, nombre_miembro);
	SendFaccionMessage(faccion, 0x33CCFFFF, string);
	mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Rango = '%d' WHERE Nombre_Apellido = '%e'", rango+1, nombre_miembro);
	mysql_tquery(DBInsanity, query);
	return 1;
}

CMD:placa(playerid, params[])
{
	if (!member_faccion(playerid, 1, 2, 3, 4, 5)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley.");
	new id = InfoPersonaje[playerid][pMiembro];
	new string[180], playerid2, rango = InfoPersonaje[playerid][pRango]-1;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /placa (playerid)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_GRAD2, "Jugador no conectado.");
	if (!CercaDelMarica(5.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Muy lejos de el jugador.");
	SendClientMessage(playerid2, COLOR_GRAD2, "----------------------------------------------------------------------------------------------------");
	format(string, sizeof string, "%s miembro de {00AE57}%s", NombreJugador(playerid), InfoFaccion[id][fLogo]);
	SendClientMessage(playerid2, COLOR_WHITE, string);
	format(string, sizeof string, "Asignación actual: {00AE57}%s", fac_rango[id][rango]);
	SendClientMessage(playerid2, COLOR_WHITE, string);
	if (member_faccion(playerid, 1, 2, 3, 4)) SendClientMessage(playerid2, COLOR_RED, "Tiene autoridad para arrestar.");
	SendClientMessage(playerid2, COLOR_GRAD2, "----------------------------------------------------------------------------------------------------");
	format(string, sizeof string, "muesta su placa a %s", NombreJugador(playerid2));
	ameuwu(playerid, string);
	return 1;
}

CMD:revisar(playerid, params[])
{
	if (InfoPersonaje[playerid][pHorasOn] < 2) return SendClientMessage(playerid, COLOR_GREY, "* Debes jugar al menos dos horas el servidor para revisar a otros.");
	new string[190], playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /revisar (playerid)");
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Jugador especificado no válido.");
	if (!CercaDelMarica(8.0, playerid, playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Ese jugador no está cerca tuyo.");
	if (!member_faccion(playerid, 1, 2, 3, 4))
	{
		if (EstaParaArrastrar(playerid2) == 0) return SendClientMessage(playerid, COLOR_GREY, "* Ese jugador debe estar en estado de herido/muerto/rendido/esposado.");
	}
	if (playerid2 == playerid) return SendClientMessage(playerid, COLOR_GREY, "* No puedes revisar a ti mismo.");
	SendClientMessage(playerid, COLOR_GREEN, "_______________________________________");
	format(string, sizeof string, "*** Objetos de %s ...  ***", NombreJugador(playerid2));
	SendClientMessage(playerid, COLOR_WHITE, string);
	if (InfoPersonaje[playerid2][pMateriales] != 0)
	{
		format(string, sizeof string, "%d materiales.", InfoPersonaje[playerid2][pMateriales]);
		SendClientMessage(playerid, COLOR_GREY, string);
	}
	if (InfoPersonaje[playerid2][pGanzuas] != 0)
	{
		format(string, sizeof string, "%d ganzúas.", InfoPersonaje[playerid2][pGanzuas]);
		SendClientMessage(playerid, COLOR_GREY, string);
	}
	if (InfoPersonaje[playerid2][pPescados] != 0)
	{
		format(string, sizeof string, "%d peces.", InfoPersonaje[playerid2][pPescados]);
		SendClientMessage(playerid, COLOR_GREY, string);
	}
	format(string, sizeof string, "*** Dinero: %s  ***", diner_coma(GetPlayerCash(playerid2)));
	SendClientMessage(playerid, COLOR_GRAD1, string);
	SendClientMessage(playerid, COLOR_GREEN, "_______________________________________");
	format(string, sizeof string, "revisa a %s", NombreJugador(playerid2));
	meuwu(playerid, string);
	return 1;
}

CMD:hurtar(playerid)
{
	if (IsPlayerJob(playerid, 3) == 0) return SendClientMessage(playerid, COLOR_GREY, "No eres delincuente.");
	new negocio = GetIntNegocio(playerid, 1), kek = GetIntNegocio(playerid);
	if (negocio == -1) return SendClientMessage(playerid, COLOR_GREY, "¡Tienes que estar dentro de un negocio!");
	if (InfoNegocio[negocio][nTipo] != 1 && InfoNegocio[negocio][nTipo] != 4) return SendClientMessage(playerid, COLOR_GREY, "Por ahora, solo puedes hurtar en 24/7 y gasolineras.");
	if (kek != -1) return SendClientMessage(playerid, COLOR_GREY, "¡Aléjate y toma otra posición!");
	if (IsPlayerInRangeOfPoint(playerid, 7.0, InfoNegocio[negocio][nLugarCompraX], InfoNegocio[negocio][nLugarCompraY], InfoNegocio[negocio][nLugarCompraZ])) return SendClientMessage(playerid, COLOR_GREY, "¡Aléjate y toma otra posición!");	
	if (HaRobado[playerid] == 1) return SendClientMessage(playerid, COLOR_GREY, "No puedes usar esto ahora. ¡Escóndete!");

	new minimo = Random(3000, 7000);
	new suerteowo = Random(0, 100);
	if (!CheckTimer(300, TiempoRobo[playerid]))
	{	
		new suerte = Random(minimo, 20000);
		new tipo = InfoNegocio[negocio][nTipo];
		HaRobado[playerid] = 1;
		SendClientMessage(playerid, 0xEBEBEBFF, "Estás {00AE57}hurtando{EBEBEB}, mantente acá por un par de segundos.");
		GetPlayerPos(playerid, PosicionRobo[0], PosicionRobo[1], PosicionRobo[2]);
		SetTimerEx("Hurto", suerte, false, "ii", playerid, tipo);
		ApplyAnimation(playerid, "DEALER", "DEALER_DEAL", 4.0, 0, 0, 1, 0, 0, 1);
	}
	else
	{
		SendClientMessage(playerid, COLOR_GREY, "Aún no puedes hacer esto.");
	}
	SetTimerEx("UnAweonaoTeVio", minimo, false, "iii", playerid, suerteowo, negocio);
	return 1;
}

forward UnAweonaoTeVio(playerid, suerte, negocio);
public UnAweonaoTeVio(playerid, suerte, negocio)
{
	if (PosibilidadHurto(playerid, suerte) == 1)
	{
		new location[MAX_ZONE_NAME], string[128];
		SendClientMessage(playerid, 0xEBEBEBFF, "* Un cliente te ha visto, decide si hurtar o escapar. ¡La policia fue informada!");
		Get2DZone(location, MAX_ZONE_NAME, InfoNegocio[negocio][nExteriorX], InfoNegocio[negocio][nExteriorY], InfoNegocio[negocio][nExteriorZ]);
		format(string, sizeof string, "CENTRAL: Se ha reportado un hurto en una tienda, localización: %s #%d", location, negocio);
		SendRadioMessage(1, COLOR_RADIO, string);
	}
	return 1;
}

PosibilidadHurto(playerid, suerte)
{
	new posibilidad = 0;
	switch (InfoPersonaje[playerid][pHabilidad][3])
	{
		case 0..15: if (suerte <= 30) posibilidad = 1; 
		case 16..35: if (suerte <= 25) posibilidad = 1;
		case 36..75: if (suerte <= 15) posibilidad = 1;
		case 76..100: if (suerte <= 10) posibilidad = 1;
		default: if (suerte == 1) posibilidad = 1;
	}
	return posibilidad;
}

forward Hurto(playerid, neg);
public Hurto(playerid, neg)
{
	HaRobado[playerid] = 0;
	if(!IsPlayerInRangeOfPoint(playerid, 5.0, PosicionRobo[0], PosicionRobo[1], PosicionRobo[2])) return SendClientMessage(playerid, COLOR_GREY, "No estas en la posición que estabas.");
	switch (neg)
	{
		case 1: // 24-7
		{
			new PremioDelGay = Random(1, 4);
			switch (PremioDelGay)
			{
				case 1: 
				{
					if (DarObjeto(playerid, 50, 1) == 2) return 1;
					SendClientMessage(playerid, 0xEBEBEBFF, "Conseguiste robar un {00AE57}Teléfono S10 color oro{EBEBEB}. ¡Huye!");
				}
				case 2:
				{
					if (DarObjeto(playerid, 42, 20) == 2) return 1;
					SendClientMessage(playerid, 0xEBEBEBFF, "Conseguiste robar un {00AE57}paquete de 20 cigarros{EBEBEB}. ¡Huye!");
				}
				case 3:
				{
					if (DarObjeto(playerid, 41, 20) == 2) return 1;
					SendClientMessage(playerid, 0xEBEBEBFF, "Conseguiste robar un {00AE57}encendedor{EBEBEB}. ¡Huye!");
				}
				case 4:
				{
					SendClientMessage(playerid, 0xEBEBEBFF, "No conseguiste robar nada... ¡Huye!");
				}
			}
		}
	}	
	TiempoRobo[playerid] = gettime();
	//habilidad
	if (InfoCuenta[playerid][jVIP] != 0) InfoPersonaje[playerid][pHabilidad][3] += 2;
	else InfoPersonaje[playerid][pHabilidad][3]++;
	guardar_int_mysql("personajes", "Habilidad4", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pHabilidad][3]);
	return 1;
}

CMD:calcular(playerid, params[])
{
	new string[128], method[20], value1, value2;
	if(sscanf(params, "ds[20]d", value1, method, value2))
	{
		SendClientMessage(playerid, COLOR_GREEN, "USA: /calcular (valor) (operación) (valor).");
		SendClientMessage(playerid, COLOR_GRAD1, "Operaciones: sumar [+], restar [-], Multiplicar[*], Dividir.[/]");
		return 1;
	}
	if(strcmp(method,"multiplicar",true) == 0 || strcmp(method,"*",true) == 0)
	{
		if (value2 == 1)
		{
			SendClientMessage(playerid,COLOR_WHITE,"nunca tesplicaron q cualquier numero * 1 es el mismo número?????????");
			return 1;
		}
		new sum = value1*value2;
		format(string,sizeof string,"* %d multiplicado por %d: %i.",value1,value2,sum);
		SendClientMessage(playerid,COLOR_WHITE,string);
	}
	if(strcmp(method,"dividir",true) == 0 || strcmp(method,"/",true) == 0)
	{
		if(value2 == 0)
		{
			SendClientMessage(playerid,COLOR_WHITE,"LOL! El mundo caerá en 10 segundos... No se puede dividir por cero idiota!");
			return 1;
		}
		new sum = value1/value2;
		format(string,sizeof string,"* %d dividido por %d: %i.",value1,value2,sum);
		SendClientMessage(playerid,COLOR_WHITE,string);
	}
	if(strcmp(method,"sumar",true) == 0 || strcmp(method,"+",true) == 0)
	{
		new sum = value1+value2;
		format(string,sizeof string,"* %d + %d = %i.",value1,value2,sum);
		SendClientMessage(playerid,COLOR_WHITE,string);
	}
	if(strcmp(method,"restar",true) == 0 || strcmp(method,"-",true) == 0)
	{
		new sum = value1-value2;
		format(string,sizeof string,"* %d - %d = %i.",value1,value2,sum);
		SendClientMessage(playerid,COLOR_WHITE,string);
	}
	return 1;
}

CMD:pescar(playerid, params[])
{
	if(Carnada[playerid] == 0) return SendClientMessage(playerid, COLOR_GREY, "No has comprado carnadas para pescar.");
	if(Lineas[playerid] == 0) return SendClientMessage(playerid, COLOR_GREY, "No tienes lineas para la caña de pesca.");
	if(InfoPersonaje[playerid][pPescados] > 15)
	{
		SendClientMessage(playerid, COLOR_GREY, "* Has pescado bastante por ahora, toma un descanso.");
		return 1;
	}
	if(Fishes[playerid][pWeight1] > 0 && Fishes[playerid][pWeight2] > 0 && Fishes[playerid][pWeight3] > 0 && Fishes[playerid][pWeight4] > 0 && Fishes[playerid][pWeight5] > 0)
	{
		SendClientMessage(playerid, COLOR_GREY, "* No puedes llevar más de cinco peces en un momento - vender o ponerlos en libertad en primer lugar.");
		return 1;
	}

	new string[256];
	new Veh = GetPlayerVehicleID(playerid);
	if((IsAtFishPlace(playerid)) || IsABoat(Veh))
	{
		new Caught;
		new rand;
		new fstring[MAX_PLAYER_NAME];
		new Level = InfoPersonaje[playerid][pHabilidad][4];
		if(Level >= 0 && Level <= 50) { Caught = random(20)-7; }
		else if(Level >= 51 && Level <= 100) { Caught = random(50)-20; }
		else if(Level >= 101 && Level <= 200) { Caught = random(100)-50; }
		else if(Level >= 201 && Level <= 400) { Caught = random(160)-60; }
		else if(Level >= 401) { Caught = random(180)-70; }
		rand = random(FishNamesNumber);
		if(Caught <= 0)
		{
			SendClientMessage(playerid, COLOR_GREY, "La línea se rompió.");
			Lineas[playerid]--;
			return 1;
		}
		else if(rand == 0)
		{
			SendClientMessage(playerid, COLOR_GREY, "Atrapaste una camisa rota y la botaste a la basura.");
			Carnada[playerid]--;
			return 1;
		}
		else if(rand == 4)
		{
			SendClientMessage(playerid, COLOR_GREY, "Atrapaste un pantalon y lo tiraste lejos.");
			return 1;
		}
		else if(rand == 7)
		{
			SendClientMessage(playerid, COLOR_GREY, "Atrapaste un lata de comida vacía y la tiraste a la basura.");
			Carnada[playerid]--;
			return 1;
		}
		else if(rand == 10)
		{
			SendClientMessage(playerid, COLOR_GREY, "Atrapaste... Zapatos viejos y los botaste.");
			return 1;
		}
		else if(rand == 13)
		{
			SendClientMessage(playerid, COLOR_GREY, "Atrapaste una bolsa con basura y lo botaste.");
			return 1;
		}
		else if(rand == 20)
		{
			new mrand = random(2500);
			format(string, sizeof string, "* Atrapaste una billetera con dinero. ($%d).", mrand);
			SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
			GivePlayerCash(playerid, mrand, "atrapar billetera (pesca)");
			Carnada[playerid]--;
			return 1;
		}
		if(Fishes[playerid][pWeight1] == 0)
		{
			InfoPersonaje[playerid][pPescados] += 1;
	        if (InfoCuenta[playerid][jDobleExp] == 0) InfoPersonaje[playerid][pHabilidad][4]++;
			else
			{
				InfoPersonaje[playerid][pHabilidad][4] += 2;
				SendClientMessage(playerid, COLOR_YELLOW, "* Ganaste 2 puntos de skill por tener horas de doble experiencia.");
			}
			format(fstring, sizeof(fstring), "%s", FishNames[rand]);
			strmid(Fishes[playerid][pFish1], fstring, 0, strlen(fstring), 255);
			Fishes[playerid][pWeight1] = Caught;
			format(string, sizeof string, "* Cogiste un %s y pesa %d libras.", Fishes[playerid][pFish1], Caught);
			SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
			Fishes[playerid][pLastWeight] = Caught;
			Fishes[playerid][pLastFish] = 1;
			Fishes[playerid][pFid1] = rand;
			Fishes[playerid][pFishID] = rand;
			Carnada[playerid]-= 2;
			if(Caught > InfoPersonaje[playerid][pRecordPesoPes])
			{
				format(string, sizeof string, "* Tu antiguo record en peso de tu pesca era de %d libras, ahora tu nuevo record es de %d libras.", InfoPersonaje[playerid][pRecordPesoPes], Caught);
				SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
				InfoPersonaje[playerid][pRecordPesoPes] = Caught;
			}
			mysql_format(DBInsanity, string, sizeof string, "UPDATE personajes SET Pescados = '%d', Habilidad5 = '%d', RecordPesoPes = '%d' WHERE ID = '%d'", InfoPersonaje[playerid][pPescados], InfoPersonaje[playerid][pHabilidad][4], InfoPersonaje[playerid][pRecordPesoPes], InfoPersonaje[playerid][pID]);
			mysql_tquery(DBInsanity, string);
		}
		else if(Fishes[playerid][pWeight2] == 0)
		{
			InfoPersonaje[playerid][pPescados] += 1;
	        if (InfoCuenta[playerid][jDobleExp] == 0) InfoPersonaje[playerid][pHabilidad][4]++;
			else
			{
				InfoPersonaje[playerid][pHabilidad][4] += 2;
				SendClientMessage(playerid, COLOR_YELLOW, "* Ganaste 2 puntos de skill por tener horas de doble experiencia.");
			}
			format(fstring, sizeof(fstring), "%s", FishNames[rand]);
			strmid(Fishes[playerid][pFish2], fstring, 0, strlen(fstring), 255);
			Fishes[playerid][pWeight2] = Caught;
			format(string, sizeof string, "* Cogiste un %s y pesa %d libras.", Fishes[playerid][pFish2], Caught);
			SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
			Fishes[playerid][pLastWeight] = Caught;
			Fishes[playerid][pLastFish] = 2;
			Fishes[playerid][pFid2] = rand;
			Fishes[playerid][pFishID] = rand;
			Carnada[playerid]-= 2;
			if(Caught > InfoPersonaje[playerid][pRecordPesoPes])
			{
				format(string, sizeof string, "* Tu antiguo record en peso de tu pesca era de %d libras, ahora tu nuevo record es de %d libras.", InfoPersonaje[playerid][pRecordPesoPes], Caught);
				SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
				InfoPersonaje[playerid][pRecordPesoPes] = Caught;
			}
			mysql_format(DBInsanity, string, sizeof string, "UPDATE personajes SET Pescados = '%d', Habilidad5 = '%d', RecordPesoPes = '%d' WHERE ID = '%d'", InfoPersonaje[playerid][pPescados], InfoPersonaje[playerid][pHabilidad][4], InfoPersonaje[playerid][pRecordPesoPes], InfoPersonaje[playerid][pID]);
			mysql_tquery(DBInsanity, string);
		}
		else if(Fishes[playerid][pWeight3] == 0)
		{
			InfoPersonaje[playerid][pPescados] += 1;
	        if (InfoCuenta[playerid][jDobleExp] == 0) InfoPersonaje[playerid][pHabilidad][4]++;
			else
			{
				InfoPersonaje[playerid][pHabilidad][4] += 2;
				SendClientMessage(playerid, COLOR_YELLOW, "* Ganaste 2 puntos de skill por tener horas de doble experiencia.");
			}
			format(fstring, sizeof(fstring), "%s", FishNames[rand]);
			strmid(Fishes[playerid][pFish3], fstring, 0, strlen(fstring), 255);
			Fishes[playerid][pWeight3] = Caught;
			format(string, sizeof string, "* Cogiste un %s y pesa %d libras.", Fishes[playerid][pFish3], Caught);
			SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
			Fishes[playerid][pLastWeight] = Caught;
			Fishes[playerid][pLastFish] = 3;
			Fishes[playerid][pFid3] = rand;
			Fishes[playerid][pFishID] = rand;
			Carnada[playerid]-= 2;
			if(Caught > InfoPersonaje[playerid][pRecordPesoPes])
			{
				format(string, sizeof string, "* Tu antiguo record en peso de tu pesca era de %d libras, ahora tu nuevo record es de %d libras.", InfoPersonaje[playerid][pRecordPesoPes], Caught);
				SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
				InfoPersonaje[playerid][pRecordPesoPes] = Caught;
			}
			mysql_format(DBInsanity, string, sizeof string, "UPDATE personajes SET Pescados = '%d', Habilidad5 = '%d', RecordPesoPes = '%d' WHERE ID = '%d'", InfoPersonaje[playerid][pPescados], InfoPersonaje[playerid][pHabilidad][4], InfoPersonaje[playerid][pRecordPesoPes], InfoPersonaje[playerid][pID]);
			mysql_tquery(DBInsanity, string);
		}
		else if(Fishes[playerid][pWeight4] == 0)
		{
			InfoPersonaje[playerid][pPescados] += 1;
	        if (InfoCuenta[playerid][jDobleExp] == 0) InfoPersonaje[playerid][pHabilidad][4]++;
			else
			{
				InfoPersonaje[playerid][pHabilidad][4] += 2;
				SendClientMessage(playerid, COLOR_YELLOW, "* Ganaste 2 puntos de skill por tener horas de doble experiencia.");
			}
			format(fstring, sizeof(fstring), "%s", FishNames[rand]);
			strmid(Fishes[playerid][pFish4], fstring, 0, strlen(fstring), 255);
			Fishes[playerid][pWeight4] = Caught;
			format(string, sizeof string, "* Cogiste un %s y pesa %d libras.", Fishes[playerid][pFish4], Caught);
			SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
			Fishes[playerid][pLastWeight] = Caught;
			Fishes[playerid][pLastFish] = 4;
			Fishes[playerid][pFid4] = rand;
			Fishes[playerid][pFishID] = rand;
			Carnada[playerid]-= 4;
			if(Caught > InfoPersonaje[playerid][pRecordPesoPes])
			{
				format(string, sizeof string, "* Tu antiguo record en peso de tu pesca era de %d libras, ahora tu nuevo record es de %d libras.", InfoPersonaje[playerid][pRecordPesoPes], Caught);
				SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
				InfoPersonaje[playerid][pRecordPesoPes] = Caught;
			}
			mysql_format(DBInsanity, string, sizeof string, "UPDATE personajes SET Pescados = '%d', Habilidad5 = '%d', RecordPesoPes = '%d' WHERE ID = '%d'", InfoPersonaje[playerid][pPescados], InfoPersonaje[playerid][pHabilidad][4], InfoPersonaje[playerid][pRecordPesoPes], InfoPersonaje[playerid][pID]);
			mysql_tquery(DBInsanity, string);
		}
		else if(Fishes[playerid][pWeight5] == 0)
		{
			InfoPersonaje[playerid][pPescados] += 1;
	        if (InfoCuenta[playerid][jDobleExp] == 0) InfoPersonaje[playerid][pHabilidad][4]++;
			else
			{
				InfoPersonaje[playerid][pHabilidad][4] += 2;
				SendClientMessage(playerid, COLOR_YELLOW, "* Ganaste 2 puntos de skill por tener horas de doble experiencia.");
			}
			format(fstring, sizeof(fstring), "%s", FishNames[rand]);
			strmid(Fishes[playerid][pFish5], fstring, 0, strlen(fstring), 255);
			Fishes[playerid][pWeight5] = Caught;
			format(string, sizeof string, "* Cogiste un %s y pesa %d libras.", Fishes[playerid][pFish5], Caught);
			SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
			Fishes[playerid][pLastWeight] = Caught;
			Fishes[playerid][pLastFish] = 5;
			Fishes[playerid][pFid5] = rand;
			Fishes[playerid][pFishID] = rand;
			Carnada[playerid]-= 5;
			if(Caught > InfoPersonaje[playerid][pRecordPesoPes])
			{
				format(string, sizeof string, "* Tu antiguo record en peso de tu pesca era de %d libras, ahora tu nuevo record es de %d libras.", InfoPersonaje[playerid][pRecordPesoPes], Caught);
				SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
				InfoPersonaje[playerid][pRecordPesoPes] = Caught;
			}
			mysql_format(DBInsanity, string, sizeof string, "UPDATE personajes SET Pescados = '%d', Habilidad5 = '%d', RecordPesoPes = '%d' WHERE ID = '%d'", InfoPersonaje[playerid][pPescados], InfoPersonaje[playerid][pHabilidad][4], InfoPersonaje[playerid][pRecordPesoPes], InfoPersonaje[playerid][pID]);
			mysql_tquery(DBInsanity, string);
		}
		else
		{
			SendClientMessage(playerid, COLOR_GREY, "No tienes espacio para los peces.");
			return 1;
		}
		if(InfoPersonaje[playerid][pHabilidad][4] == 50)
		{ SendClientMessage(playerid, COLOR_YELLOW, "* Tu nivel de pesca ahora es 2, ya puedes atrapar peces más grandes."); }
		else if(InfoPersonaje[playerid][pHabilidad][4] == 100)
		{ SendClientMessage(playerid, COLOR_YELLOW, "* Tu nivel de pesca ahora es 3, ya puedes atrapar peces más grandes."); }
		else if(InfoPersonaje[playerid][pHabilidad][4] == 200)
		{ SendClientMessage(playerid, COLOR_YELLOW, "* Tu nivel de pesca ahora es 4, ya puedes atrapar peces más grandes."); }
		else if(InfoPersonaje[playerid][pHabilidad][4] == 400)
		{ SendClientMessage(playerid, COLOR_YELLOW, "* Tu nivel de pesca ahora es 5, ya puedes atrapar peces más grandes."); }
	}
	else
	{
		SendClientMessage(playerid, COLOR_GREY, "No estás en el muelle de Santa María, o en un barco de pesca.");
		return 1;
	}
	return 1;
}

CMD:venderpez(playerid, params[])
{
	if(IsPlayerInRangeOfPoint(playerid, 6, 991.2456,-1942.9379,2835.0078))
	{
		SendClientMessage(playerid, COLOR_GRAD2, "   No estás en la tienda del puerto!");
		return 1;
	}
	new string[128], fishid;
	if(sscanf(params, "d", fishid)) return SendClientMessage(playerid, COLOR_WHITE, "USA: /venderpez [fish]");

	new price;
	if(fishid < 1 || fishid > 5) { SendClientMessage(playerid, COLOR_GREY, "   ID: 1 al 5!"); return 1; }
	else if(fishid == 1 && Fishes[playerid][pWeight1] < 1) { SendClientMessage(playerid, COLOR_GREY, "   No has pescado nada. (1)!"); return 1; }
	else if(fishid == 2 && Fishes[playerid][pWeight2] < 1) { SendClientMessage(playerid, COLOR_GREY, "   No has pescado nada. (1)!"); return 1; }
	else if(fishid == 3 && Fishes[playerid][pWeight3] < 1) { SendClientMessage(playerid, COLOR_GREY, "   No has pescado nada. (1)!"); return 1; }
	else if(fishid == 4 && Fishes[playerid][pWeight4] < 1) { SendClientMessage(playerid, COLOR_GREY, "   No has pescado nada. (1)!"); return 1; }
	else if(fishid == 5 && Fishes[playerid][pWeight5] < 1) { SendClientMessage(playerid, COLOR_GREY, "   No has pescado nada. (1)!"); return 1; }

	switch (fishid)
	{
	case 1:
		{
			if(Fishes[playerid][pWeight1] < 5)
			{
				SendClientMessage(playerid, COLOR_WHITE, "Tienda: Sólo estamos interesados en comprar peces de 5 Libras para arriba.");
				return 1;
			}
			price = FishCost(playerid, Fishes[playerid][pFid1]);
			price = price * Fishes[playerid][pWeight1];
			new skill = price / 100;
			new payout = (skill)*(5);
			price += payout;
			GameTextForPlayer(playerid, "~g~Pez~n~~r~Vendido", 3000, 1);
			format(string, sizeof string, "* Vendiste un %s (%d Libras) por $%d.", Fishes[playerid][pFish1],Fishes[playerid][pWeight1],price);
			SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
			GivePlayerCash(playerid, price, "vender peces (1)");
			ClearFishID(playerid, 1);
		}
	case 2:
		{
			if(Fishes[playerid][pWeight2] < 5)
			{
				SendClientMessage(playerid, COLOR_WHITE, "Tienda: Sólo estamos interesados en comprar peces de 5 Libras para arriba.");
				return 1;
			}
			price = FishCost(playerid, Fishes[playerid][pFid2]);
			price = price * Fishes[playerid][pWeight2];
			if(InfoPersonaje[playerid][pNivel] > 3)
			{
				new skill = price / 100;
				new payout = (skill)*(5);
				price += payout;
			}
			GameTextForPlayer(playerid, "~g~Pez~n~~r~Vendido", 3000, 1);
			format(string, sizeof string, "* Vendiste un %s (%d Libras) por $%d.", Fishes[playerid][pFish2],Fishes[playerid][pWeight2],price);
			SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
			GivePlayerCash(playerid, price, "vender peces (2)");
			ClearFishID(playerid, 2);
		}
	case 3:
		{
			if(Fishes[playerid][pWeight3] < 5)
			{
				SendClientMessage(playerid, COLOR_WHITE, "Tienda: Sólo estamos interesados en comprar peces de 5 Libras para arriba.");
				return 1;
			}
			price = FishCost(playerid, Fishes[playerid][pFid3]);
			price = price * Fishes[playerid][pWeight3];
			if(InfoPersonaje[playerid][pNivel] > 5)
			{
				new skill = price / 100;
				new payout = (skill)*(5);
				price += payout;
			}
			GameTextForPlayer(playerid, "~g~Pez~n~~r~Vendido", 3000, 1);
			format(string, sizeof string, "* Vendiste un %s (%d Libras) por $%d.", Fishes[playerid][pFish3],Fishes[playerid][pWeight3],price);
			SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
			GivePlayerCash(playerid, price, "vender peces (3)");
			ClearFishID(playerid, 3);
		}
	case 4:
		{
			if(Fishes[playerid][pWeight4] < 5)
			{
				SendClientMessage(playerid, COLOR_WHITE, "Tienda: Sólo estamos interesados en comprar peces de 5 Libras para arriba.");
				return 1;
			}
			price = FishCost(playerid, Fishes[playerid][pFid4]);
			price = price * Fishes[playerid][pWeight4];
			if(InfoPersonaje[playerid][pNivel] > 10)
			{
				new skill = price / 100;
				new payout = (skill)*(5);
				price += payout;
			}
			GameTextForPlayer(playerid, "~g~Pez~n~~r~Vendido", 3000, 1);
			format(string, sizeof string, "* Vendiste un %s (%d Libras) por $%d.", Fishes[playerid][pFish4],Fishes[playerid][pWeight4],price);
			SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
			GivePlayerCash(playerid, price, "vender peces (4)");
			ClearFishID(playerid, 4);
		}
	case 5:
		{
			if(Fishes[playerid][pWeight5] < 5)
			{
				SendClientMessage(playerid, COLOR_WHITE, "Tienda: Sólo estamos interesados en comprar peces de 5 Libras para arriba.");
				return 1;
			}
			price = FishCost(playerid, Fishes[playerid][pFid5]);
			price = price * Fishes[playerid][pWeight5];
			if(InfoPersonaje[playerid][pNivel] > 20)
			{
				new skill = price / 100;
				new payout = (skill)*(5);
				price += payout;
			}
			GameTextForPlayer(playerid, "~g~Pez~n~~r~Vendido", 3000, 1);
			format(string, sizeof string, "* Vendiste un %s (%d Libras) por $%d.", Fishes[playerid][pFish5],Fishes[playerid][pWeight5],price);
			SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
			GivePlayerCash(playerid, price, "vender peces (5)");
			ClearFishID(playerid, 5);
		}
	}
	Fishes[playerid][pLastFish] = 0;
	Fishes[playerid][pFishID] = 0;
	return 1;
}

CMD:peces(playerid, params[])
{
	new string[128];
	SendClientMessage(playerid, COLOR_WHITE, "|__________________ Peces __________________|");
	format(string, sizeof string, "** (1) Pez: %s.   Peso: %d.", Fishes[playerid][pFish1], Fishes[playerid][pWeight1]);
	SendClientMessage(playerid, COLOR_GREY, string);
	format(string, sizeof string, "** (2) Pez: %s.   Peso: %d.", Fishes[playerid][pFish2], Fishes[playerid][pWeight2]);
	SendClientMessage(playerid, COLOR_GREY, string);
	format(string, sizeof string, "** (3) Pez: %s.   Peso: %d.", Fishes[playerid][pFish3], Fishes[playerid][pWeight3]);
	SendClientMessage(playerid, COLOR_GREY, string);
	format(string, sizeof string, "** (4) Pez: %s.   Peso: %d.", Fishes[playerid][pFish4], Fishes[playerid][pWeight4]);
	SendClientMessage(playerid, COLOR_GREY, string);
	format(string, sizeof string, "** (5) Pez: %s.   Peso: %d.", Fishes[playerid][pFish5], Fishes[playerid][pWeight5]);
	SendClientMessage(playerid, COLOR_GREY, string);
	return SendClientMessage(playerid, COLOR_WHITE, "|____________________________________________|");
}

CMD:liberarpez(playerid, params[])
{
	new fishid;
	if(sscanf(params, "d", fishid)) return SendClientMessage(playerid, COLOR_WHITE, "USA: /liberarpez [pez 1-5]");

	if(fishid < 1 || fishid > 5) { SendClientMessage(playerid, COLOR_WHITE, "USA: /liberarpez [fish 1-5]"); return 1; }
	else if(fishid == 1 && Fishes[playerid][pWeight1] < 1) { SendClientMessage(playerid, COLOR_GREY, "Ese slot está vacío."); return 1; }
	else if(fishid == 2 && Fishes[playerid][pWeight2] < 1) { SendClientMessage(playerid, COLOR_GREY, "Ese slot está vacío."); return 1; }
	else if(fishid == 3 && Fishes[playerid][pWeight3] < 1) { SendClientMessage(playerid, COLOR_GREY, "Ese slot está vacío."); return 1; }
	else if(fishid == 4 && Fishes[playerid][pWeight4] < 1) { SendClientMessage(playerid, COLOR_GREY, "Ese slot está vacío."); return 1; }
	else if(fishid == 5 && Fishes[playerid][pWeight5] < 1) { SendClientMessage(playerid, COLOR_GREY, "Ese slot está vacío."); return 1; }
	ClearFishID(playerid, fishid);
	Fishes[playerid][pLastFish] = 0;
	Fishes[playerid][pFishID] = 0;
	return SendClientMessage(playerid, COLOR_GREY, "Liberaste un pez.");
}

CMD:qfa(playerid, params[])
{
	new playerid2, string[73];
	if (!sscanf(params, "u", playerid2))
	{
		if (CheckAdminCMD(playerid, 1)) return 1;
		if (CheckAdminDuty(playerid)) return 1;
		if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid,COLOR_YELLOW,"El jugador no esta conectado.");
		format(string,sizeof string, "%s fue asesinado por %s.", NombreOriginal(playerid2), QFA[playerid2]);
		SendClientMessage(playerid, COLOR_YELLOW, string);
	}
	else
	{
		if (player_asesino[playerid] == -1) return SendClientMessage(playerid, COLOR_WHITE, "Nadie te ha asesinado, posible error.");
		format(string,sizeof string, "Fuiste asesinado por %s.", QFA[playerid]);
		SendClientMessage(playerid, COLOR_YELLOW, string);
		if (GetPlayerAdmin(playerid, 1) != 0) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /qfa (PlayerID)");
	}
	return 1;
}

//sistema de puertas dinámicas.
CMD:shopdoor(playerid)
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	new string[256], query[1028];
	Loop(id, MAX_PUERTAS, 1) if (InfoPuerta[id][pdExteriorX] == 0.0)
	{
		alm(InfoPuerta[id][pdNombre], "Usa /editarpuertanombre (PuertaID) (Nombre)");
		GetPlayerPos(playerid, InfoPuerta[id][pdExteriorX], InfoPuerta[id][pdExteriorY], InfoPuerta[id][pdExteriorZ]);
		GetPlayerFacingAngle(playerid, InfoPuerta[id][pdExteriorR]);
		InfoPuerta[id][pdExteriorVW] = GetPlayerVirtualWorld(playerid);
		InfoPuerta[id][pdExteriorInt] = GetPlayerInterior(playerid);
		GetPlayerPos(playerid, InfoPuerta[id][pdInteriorX], InfoPuerta[id][pdInteriorY], InfoPuerta[id][pdInteriorZ]);
		InfoPuerta[id][pdInteriorY] += 2.0;
		GetPlayerFacingAngle(playerid, InfoPuerta[id][pdInteriorR]);
		InfoPuerta[id][pdInteriorVW] = GetPlayerVirtualWorld(playerid);
		InfoPuerta[id][pdInteriorInt] = GetPlayerInterior(playerid);
		CreateDynamicDoor(id, 1);

		format(string, sizeof string, "%s ha creado la puerta id %d.", NombreDeCuenta(playerid), id);
		Log("LOGS/ddedit.log", string);
		format(string, sizeof string, "Creaste la puerta ID %d, configura la misma con /editarpuerta y /editarpuertanombre.", id);
		SendClientMessage(playerid, COLOR_GENERAL, string);

		//opción idsql ya creada.
		if (InfoPuerta[id][pdID_sql] != 0)
		{
			mysql_format(DBInsanity, query, sizeof query, "UPDATE puertas SET Nombre = '%e', ExteriorX = '%f', ExteriorY = '%f', ExteriorZ = '%f', ExteriorR = '%f', ExteriorInt = '%d', ExteriorVW = '%d', InteriorX = '%f', InteriorY = '%f', InteriorZ = '%f', InteriorR = '%f', InteriorInt = '%d', InteriorVW = '%d' WHERE ID = '%d'",
			InfoPuerta[id][pdNombre],
			InfoPuerta[id][pdExteriorX], InfoPuerta[id][pdExteriorY], InfoPuerta[id][pdExteriorZ], InfoPuerta[id][pdExteriorR], InfoPuerta[id][pdExteriorInt], InfoPuerta[id][pdExteriorVW],
			InfoPuerta[id][pdInteriorX], InfoPuerta[id][pdInteriorY], InfoPuerta[id][pdInteriorZ], InfoPuerta[id][pdInteriorR], InfoPuerta[id][pdInteriorInt], InfoPuerta[id][pdInteriorVW],
			InfoPuerta[id][pdID_sql]);
			mysql_tquery(DBInsanity, query);
			id = MAX_PUERTAS;
			return 1;
		}
		mysql_format(DBInsanity, query, sizeof query, "INSERT INTO puertas (Nombre, ExteriorX, ExteriorY, ExteriorZ, ExteriorR, ExteriorInt, ExteriorVW, InteriorX, InteriorY, InteriorZ, InteriorR, InteriorInt, InteriorVW) VALUES ('%e', '%f', '%f', '%f', '%f', '%d', '%d', '%f', '%f', '%f', '%f', '%d', '%d')",
		InfoPuerta[id][pdNombre],
		InfoPuerta[id][pdExteriorX], InfoPuerta[id][pdExteriorY], InfoPuerta[id][pdExteriorZ], InfoPuerta[id][pdExteriorR], InfoPuerta[id][pdExteriorInt], InfoPuerta[id][pdExteriorVW],
		InfoPuerta[id][pdInteriorX], InfoPuerta[id][pdInteriorY], InfoPuerta[id][pdInteriorZ], InfoPuerta[id][pdInteriorR], InfoPuerta[id][pdInteriorInt], InfoPuerta[id][pdInteriorVW]);
		mysql_tquery(DBInsanity, query, "OnPuertaCreate", "d", id);
		id = MAX_PUERTAS;
		return 1;
	}
	SendClientMessage(playerid, COLOR_RED, "Se alcanzó el máximo de puertas dinámicas (100)");
	return 1;
}
CMD:crearpuerta(playerid) return cmd_shopdoor(playerid);

forward OnPuertaCreate(id);
public OnPuertaCreate(id)
{
	InfoPuerta[id][pdID_sql] = cache_insert_id();
	cache_unset_active();
	totalpuertas++;
    return 1;
}

GetNameVIP(nivel)
{
	new name_vip[19];
	switch (nivel)
	{
		case 0: alm(name_vip, "Ninguno");
		case 1: alm(name_vip, "Bronce");
		case 2: alm(name_vip, "Plata");
		case 3: alm(name_vip, "Oro");
		case 4: alm(name_vip, "Platino");
		default: alm(name_vip, "desconocido");
	}
	return name_vip;
}

CMD:ddedit(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	new id, valor, query[315];
	if (sscanf(params, "s[32]", params))
	{
		SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarpuerta (Opción) (PuertaID)");
		SendClientMessage(playerid, COLOR_GREY, "Opciones: exterior, interior, vip, faccion, admin, vehicle, estrellas, pickup, mapicon, borrar");
		return 1;
	}
	if (!strcmp(params, "exterior", true, 8))
	{
		if (sscanf(params, "s[32]d", params, id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarpuerta exterior (PuertaID)");
		if (id < 1 || id >= totalpuertas) return SendClientMessage(playerid, -1, "ID de puerta inválida.");
		if (InfoPuerta[id][pdExteriorX] == 0.0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		GetPlayerPos(playerid, InfoPuerta[id][pdExteriorX], InfoPuerta[id][pdExteriorY], InfoPuerta[id][pdExteriorZ]);
		GetPlayerFacingAngle(playerid, InfoPuerta[id][pdExteriorR]);
		InfoPuerta[id][pdExteriorInt] = GetPlayerInterior(playerid);
		InfoPuerta[id][pdExteriorVW] = GetPlayerVirtualWorld(playerid);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE puertas SET ExteriorX = '%f', ExteriorY = '%f', ExteriorZ = '%f', ExteriorR = '%f', ExteriorInt = '%d', ExteriorVW = '%d' WHERE ID = '%d'", InfoPuerta[id][pdExteriorX], InfoPuerta[id][pdExteriorY], InfoPuerta[id][pdExteriorZ], InfoPuerta[id][pdExteriorR], InfoPuerta[id][pdExteriorInt], InfoPuerta[id][pdExteriorVW], InfoPuerta[id][pdID_sql]);
		mysql_tquery(DBInsanity, query);
		CreateDynamicDoor(id, 1);
		format(query, sizeof query, "Cambiaste el exterior de la puerta {00AE57}%s{FFFFFF} (ID: {00AE57}%d{FFFFFF}).", InfoPuerta[id][pdNombre], id);
		SendClientMessage(playerid, 0xFFFFFFFF, query);
		format(query, sizeof query, "%s ha editado el exterior de la puerta id %d.", NombreDeCuenta(playerid), id);
		Log("LOGS/ddedit.log", query);
	}
	else if (!strcmp(params, "interior", true, 8))
	{
		if (sscanf(params, "s[32]d", params, id)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarpuerta interior (PuertaID)");
		if (id < 1 || id >= totalpuertas) return SendClientMessage(playerid, -1, "ID de puerta inválida.");
		if (InfoPuerta[id][pdExteriorX] == 0.0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		GetPlayerPos(playerid, InfoPuerta[id][pdInteriorX], InfoPuerta[id][pdInteriorY], InfoPuerta[id][pdInteriorZ]);
		GetPlayerFacingAngle(playerid, InfoPuerta[id][pdInteriorR]);
		InfoPuerta[id][pdInteriorInt] = GetPlayerInterior(playerid);
		InfoPuerta[id][pdInteriorVW] = GetPlayerVirtualWorld(playerid);
		mysql_format(DBInsanity, query, sizeof query, "UPDATE puertas SET InteriorX = '%f', InteriorY = '%f', InteriorZ = '%f', InteriorR = '%f', InteriorInt = '%d', InteriorVW = '%d' WHERE ID = '%d'", InfoPuerta[id][pdInteriorX], InfoPuerta[id][pdInteriorY], InfoPuerta[id][pdInteriorZ], InfoPuerta[id][pdInteriorR], InfoPuerta[id][pdInteriorInt], InfoPuerta[id][pdInteriorVW], InfoPuerta[id][pdID_sql]);
		mysql_tquery(DBInsanity, query);
		CreateDynamicDoor(id, 0);
		format(query, sizeof query, "Cambiaste el interior de la puerta {00AE57}%s{FFFFFF} (ID: {00AE57}%d{FFFFFF}).", InfoPuerta[id][pdNombre], id);
		SendClientMessage(playerid, 0xFFFFFFFF, query);
		format(query, sizeof query, "%s ha editado el interior de la puerta id %d.", NombreDeCuenta(playerid), id);
		Log("LOGS/ddedit.log", query);
	}
	else if (!strcmp(params, "vip", true, 3))
	{
		if (sscanf(params, "s[32]dd", params, id, valor)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarpuerta vip (PuertaID) (Nivel)");
		if (id < 1 || id >= totalpuertas) return SendClientMessage(playerid, -1, "ID de puerta inválida.");
		if (InfoPuerta[id][pdExteriorX] == 0.0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		InfoPuerta[id][pdVIP] = valor;
		guardar_int_mysql("puertas", "VIP", InfoPuerta[id][pdID_sql], InfoPuerta[id][pdVIP]);
		format(query, sizeof query, "Cambiaste el VIP (%s) de la puerta {00AE57}%s{FFFFFF} (ID: {00AE57}%d{FFFFFF}).", GetNameVIP(valor), InfoPuerta[id][pdNombre], id);
		SendClientMessage(playerid, 0xFFFFFFFF, query);
		format(query, sizeof query, "%s ha editado el vip (%s) de la puerta id %d.", NombreDeCuenta(playerid), GetNameVIP(valor), id);
		Log("LOGS/ddedit.log", query);
	}
	else if (!strcmp(params, "faccion", true, 7))
	{
		if (sscanf(params, "s[32]dd", params, id, valor)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarpuerta faccion (PuertaID) (FacciónID)");
		if (id < 1 || id >= totalpuertas) return SendClientMessage(playerid, -1, "ID de puerta inválida.");
		if (InfoPuerta[id][pdExteriorX] == 0.0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		InfoPuerta[id][pdFaccion] = valor;
		guardar_int_mysql("puertas", "Faccion", InfoPuerta[id][pdID_sql], InfoPuerta[id][pdFaccion]);
		format(query, sizeof query, "Cambiaste la facción (%d) de la puerta {00AE57}%s{FFFFFF} (ID: {00AE57}%d{FFFFFF}).", valor, InfoPuerta[id][pdNombre], id);
		SendClientMessage(playerid, 0xFFFFFFFF, query);
		format(query, sizeof query, "%s ha editado la facción (%d) de la puerta id %d.", NombreDeCuenta(playerid), valor, id);
		Log("LOGS/ddedit.log", query);
	}
	else if (!strcmp(params, "admin", true, 5))
	{
		if (sscanf(params, "s[32]dd", params, id, valor)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarpuerta admin (PuertaID) (Rango)");
		if (id < 1 || id >= totalpuertas) return SendClientMessage(playerid, -1, "ID de puerta inválida.");
		if (InfoPuerta[id][pdExteriorX] == 0.0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		if (valor < 0 || valor > 6) return SendClientMessage(playerid, COLOR_GRAD2, "Sólo existen 6 rangos administrativos.");
		InfoPuerta[id][pdAdmin] = valor;
		guardar_int_mysql("puertas", "Admin", InfoPuerta[id][pdID_sql], InfoPuerta[id][pdAdmin]);
		format(query, sizeof query, "Cambiaste el admin (%d) de la puerta {00AE57}%s{FFFFFF} (ID: {00AE57}%d{FFFFFF}).", valor, InfoPuerta[id][pdNombre], id);
		SendClientMessage(playerid, 0xFFFFFFFF, query);
		format(query, sizeof query, "%s ha editado el admin (%d) de la puerta id %d.", NombreDeCuenta(playerid), valor, id);
		Log("LOGS/ddedit.log", query);
	}
	else if (!strcmp(params, "estrellas", true, 9))
	{
		if (sscanf(params, "s[32]dd", params, id, valor)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarpuerta estrellas (PuertaID) (Nivel de busqueda)");
		if (id < 1 || id >= totalpuertas) return SendClientMessage(playerid, -1, "ID de puerta inválida.");
		if (InfoPuerta[id][pdExteriorX] == 0.0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		InfoPuerta[id][pdEstrellas] = valor;
		guardar_int_mysql("puertas", "Estrellas", InfoPuerta[id][pdID_sql], InfoPuerta[id][pdEstrellas]);
		format(query, sizeof query, "Cambiaste el nivel de busqueda (%d) de la puerta {00AE57}%s{FFFFFF} (ID: {00AE57}%d{FFFFFF}).", valor, InfoPuerta[id][pdNombre], id);
		SendClientMessage(playerid, 0xFFFFFFFF, query);
		format(query, sizeof query, "%s ha editado el nivel de busqueda (%d) de la puerta id %d.", NombreDeCuenta(playerid), valor, id);
		Log("LOGS/ddedit.log", query);
	}
	else if (!strcmp(params, "vehicle", true, 7))
	{
		if (sscanf(params, "s[32]dd", params, id, valor)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarpuerta vehicle (PuertaID) (1 activado - 0 desactivado)");
		if (id < 1 || id >= totalpuertas) return SendClientMessage(playerid, -1, "ID de puerta inválida.");
		if (InfoPuerta[id][pdExteriorX] == 0.0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		InfoPuerta[id][pdStatusVehiculo] = valor;
		guardar_int_mysql("puertas", "StatusVehiculo", InfoPuerta[id][pdID_sql], InfoPuerta[id][pdStatusVehiculo]);
		format(query, sizeof query, "Cambiaste el status vehículo (%d) de la puerta {00AE57}%s{FFFFFF} (ID: {00AE57}%d{FFFFFF}).", valor, InfoPuerta[id][pdNombre], id);
		SendClientMessage(playerid, 0xFFFFFFFF, query);
		format(query, sizeof query, "%s ha editado el status vehículo (%d) de la puerta id %d.", NombreDeCuenta(playerid), valor, id);
		Log("LOGS/ddedit.log", query);
	}
	else if (!strcmp(params, "pickup", true, 6))
	{
		if (sscanf(params, "s[32]dd", params, id, valor)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarpuerta pickup (PuertaID) (Monto)");
		if (id < 1 || id >= totalpuertas) return SendClientMessage(playerid, -1, "ID de puerta inválida.");
		if (InfoPuerta[id][pdExteriorX] == 0.0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		InfoPuerta[id][pdModelo] = valor;
		guardar_int_mysql("puertas", "Modelo", InfoPuerta[id][pdID_sql], InfoPuerta[id][pdModelo]);
		format(query, sizeof query, "Cambiaste el modelo pickup (%d) de la puerta {00AE57}%s{FFFFFF} (ID: {00AE57}%d{FFFFFF}).", valor, InfoPuerta[id][pdNombre], id);
		SendClientMessage(playerid, 0xFFFFFFFF, query);
		format(query, sizeof query, "%s ha editado el modelo pickup (%d) de la puerta id %d.", NombreDeCuenta(playerid), valor, id);
		Log("LOGS/ddedit.log", query);
		CreateDynamicDoor(id, 0);
	}
	else if (!strcmp(params, "mapicon", true, 7))
	{
		if (sscanf(params, "s[32]dd", params, id, valor)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /editarpuerta mapicon (PuertaID) (ModelID)");
		if (id < 1 || id >= totalpuertas) return SendClientMessage(playerid, -1, "ID de puerta inválida.");
		if (InfoPuerta[id][pdExteriorX] == 0.0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
		InfoPuerta[id][pdMapIcon] = valor;
		guardar_int_mysql("puertas", "MapIcon", InfoPuerta[id][pdID_sql], InfoPuerta[id][pdMapIcon]);
		format(query, sizeof query, "Cambiaste el mapicon (%d) de la puerta {00AE57}%s{FFFFFF} (ID: {00AE57}%d{FFFFFF}).", valor, InfoPuerta[id][pdNombre], id);
		SendClientMessage(playerid, 0xFFFFFFFF, query);
		format(query, sizeof query, "%s ha editado el mapicon (%d) de la puerta id %d.", NombreDeCuenta(playerid), valor, id);
		Log("LOGS/ddedit.log", query);
		CreateDynamicDoor(id, 1);
	}
	else if (!strcmp(params, "borrar", true, 6))
	{
		SendClientMessage(playerid, -1, "Utiliza: /borrarpuerta (PuertaID)");
	}
	return 1;
}
CMD:editarpuerta(playerid, params[]) return cmd_ddedit(playerid, params);

CMD:ddborrar(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	new id, string[128], query[2056];
	if (sscanf(params, "d", id)) return SendClientMessage(playerid, -1, "/borrarpuerta [puerta id]");
	if (id < 1 || id >= totalpuertas) return SendClientMessage(playerid, -1, "ID de puerta inválida.");
	if (InfoPuerta[id][pdExteriorX] == 0.0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
	alm(InfoPuerta[id][pdNombre], "none");
	InfoPuerta[id][pdExteriorX] = 0.0;
	InfoPuerta[id][pdExteriorY] = 0.0;
	InfoPuerta[id][pdExteriorZ] = 0.0;
	InfoPuerta[id][pdExteriorR] = 0.0;
	InfoPuerta[id][pdExteriorInt] = 0;
	InfoPuerta[id][pdExteriorVW] = 0;
	InfoPuerta[id][pdInteriorX] = 0.0;
	InfoPuerta[id][pdInteriorY] = 0.0;
	InfoPuerta[id][pdInteriorZ] = 0.0;
	InfoPuerta[id][pdInteriorR] = 0.0;
	InfoPuerta[id][pdInteriorInt] = 0;
	InfoPuerta[id][pdInteriorVW] = 0;
	InfoPuerta[id][pdModelo] = 0;
	InfoPuerta[id][pdMapIcon] = 0;
	InfoPuerta[id][pdFaccion] = 0;
	InfoPuerta[id][pdAdmin] = 0;
	InfoPuerta[id][pdVIP] = 0;
	InfoPuerta[id][pdEstrellas] = 0;
	InfoPuerta[id][pdStatusVehiculo] = 0;
	mysql_format(DBInsanity, query, sizeof query, "UPDATE puertas SET Nombre = '%e', ExteriorX = 0.0, ExteriorY = 0.0, ExteriorZ = 0.0, ExteriorR = 0.0, ExteriorInt = 0, ExteriorVW = 0, InteriorX = 0.0,\
	InteriorY = 0.0, InteriorZ = 0.0, InteriorR = 0.0, InteriorInt = 0, InteriorVW = 0, Modelo = 0, MapIcon = 0, Faccion = 0, Admin = 0, VIP = 0, Estrellas = 0, StatusVehiculo = 0 WHERE ID = '%d'", InfoPuerta[id][pdNombre], InfoPuerta[id][pdID_sql]);
	mysql_tquery(DBInsanity, query);
	format(string, sizeof string, "Borraste la puerta ID %d, SQL vacía: %d", id, InfoPuerta[id][pdID_sql]);
	SendClientMessage(playerid, -1, string);
	noexitDoor(id);
	return 1;
}
CMD:borrarpuerta(playerid, params[]) return cmd_ddborrar(playerid, params);

CMD:goindoor(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new doornum;
	if (sscanf(params, "d", doornum)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /irpuertainterior (PuertaID)");
	if (doornum < 1 || doornum >= totalpuertas) return SendClientMessage(playerid, -1, "ID de puerta inválida.");
	if (InfoPuerta[doornum][pdExteriorX] == 0.0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
	if (InfoPuerta[doornum][pdInteriorInt] != 0 || InfoPuerta[doornum][pdInteriorVW] != 0) LoadObjects(playerid);
	SetPosEx(playerid, InfoPuerta[doornum][pdInteriorX], InfoPuerta[doornum][pdInteriorY], InfoPuerta[doornum][pdInteriorZ], InfoPuerta[doornum][pdInteriorR], InfoPuerta[doornum][pdInteriorInt], InfoPuerta[doornum][pdInteriorVW], 1);
	return 1;
}
CMD:irpuertainterior(playerid, params[]) return cmd_goindoor(playerid, params);

CMD:gotodoor(playerid, params[])
{
	if (CheckAdminCMD(playerid, 2)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new doornum;
	if (sscanf(params, "d", doornum)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /irpuerta (PuertaID)");
	if (doornum < 1 || doornum >= totalpuertas) return SendClientMessage(playerid, -1, "ID de puerta inválida.");
	if (InfoPuerta[doornum][pdExteriorX] == 0.0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
	if (InfoPuerta[doornum][pdExteriorInt] != 0 || InfoPuerta[doornum][pdExteriorVW] != 0) LoadObjects(playerid);
	SetPosEx(playerid, InfoPuerta[doornum][pdExteriorX], InfoPuerta[doornum][pdExteriorY], InfoPuerta[doornum][pdExteriorZ], InfoPuerta[doornum][pdExteriorR], InfoPuerta[doornum][pdExteriorInt], InfoPuerta[doornum][pdExteriorVW], 1);
	return 1;
}
CMD:irpuerta(playerid, params[]) return cmd_gotodoor(playerid, params);

CMD:ddname(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new query[256], doorid, doorname[128];
	if (sscanf(params, "ds[128]", doorid, doorname)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /editarpuertanombre (PuertaID) (Nombre)");
	if (doorid < 1 || doorid >= totalpuertas) return SendClientMessage(playerid, -1, "ID de puerta inválida.");
	if (InfoPuerta[doorid][pdExteriorX] == 0.0) return SendClientMessage(playerid, -1, "Esa ID está vacía.");
	alm(InfoPuerta[doorid][pdNombre], doorname);
	format(query, sizeof query, "Cambiaste el nombre (%s) de la puerta {00AE57}%d{FFFFFF}.", doorname, doorid);
	SendClientMessage(playerid, 0xFFFFFFFF, query);
	CreateDynamicDoor(doorid, 0);
	guardar_string_mysql("puertas", "Nombre", InfoPuerta[doorid][pdID_sql], InfoPuerta[doorid][pdNombre]);
	format(query, sizeof query, "%s ha editado el nombre (%s) de la puerta id %d.", NombreDeCuenta(playerid), doorname, doorid);
	Log("LOGS/ddedit.log", query);
	return 1;
}
CMD:editarpnombre(playerid, params[]) return cmd_ddname(playerid, params);
CMD:editarpuertanombre(playerid, params[]) return cmd_ddname(playerid, params);
CMD:editarnombrepuerta(playerid, params[]) return cmd_ddname(playerid, params);

CMD:cambiarclaveusuario(playerid)
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	Dialog_Show(playerid, CambiarClave, DIALOG_STYLE_INPUT, "Cambiar contraseña", "{EBEBEB}Ingresa el '{00AE57}Nombre de usuario{EBEBEB}' de la cuenta que deseas cambiarle la contraseña:", "Continuar", "Salir");
	return 1;
}

new IsChangeName[MAX_PLAYERS][32];
Dialog:CambiarClave(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	if (VerificarCuenta(inputtext) == 0) return SendClientMessage(playerid, -1, "Esa cuenta no existe.");
	alm(IsChangeName[playerid], inputtext);
	new gformat[256];
	format(gformat, sizeof gformat, "{FFFFFF}Ahora introduce la contraseña que tendrá %s.", inputtext);
	Dialog_Show(playerid, Cambiar2Clave, DIALOG_STYLE_INPUT, "Cambiar contraseña", gformat, "Continuar", "Salir");
	return 1;
}

Dialog:Cambiar2Clave(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	new gformat[256];
	if (strlen(inputtext) < 4)
	{
		SendClientMessage(playerid, -1, "Contraseña muy corta, debe contener más de 4 caracteres y menos de 25");
		format(gformat, sizeof gformat, "Ahora introduce la contraseña que tendrá la cuenta %s.", IsChangeName[playerid]);
		Dialog_Show(playerid, Cambiar2Clave, DIALOG_STYLE_INPUT, "Cambiar contraseña", gformat, "Continuar", "Cancelar");
		return 1;
	}
	if (strlen(inputtext) > 25)
	{
		SendClientMessage(playerid, -1, "Contraseña muy larga, debe contener más de 4 caracteres y menos de 25");
		format(gformat, sizeof gformat, "Ahora introduce la contraseña que tendrá la cuenta %s.", IsChangeName[playerid]);
		Dialog_Show(playerid, Cambiar2Clave, DIALOG_STYLE_INPUT, "Cambiar contraseña", gformat, "Continuar", "Cancelar");
		return 1;
	}
	new exSalt[11];
	new exClave[65];
	for (new i = 0; i < 10; i++)
	{
		exSalt[i] = random(79) + 47;
	}
	exSalt[10] = 0;
	SHA256_PassHash(inputtext, exSalt, exClave, 65);
	new query[512];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE cuentas SET Clave = '%e', Salt = '%e' WHERE Nombre = '%e'", exClave, exSalt, IsChangeName[playerid]);
	mysql_tquery(DBInsanity, query);
	format(query, sizeof query, "Le has cambiado la contraseña a %s, (clave: %s)", IsChangeName[playerid], inputtext);
	SendClientMessage(playerid, 0x008800FF, query);
	format(query, sizeof query, "AdmCmd: %s cambió la contraseña de %s.", NombreDeCuenta(playerid), IsChangeName[playerid]);
	Log("LOGS/password.log", query);
	alm(IsChangeName[playerid], "none");
	return 1;
}

CMD:soporte(playerid)
{
	new dialog[3000];
	strcat(dialog, "{58A4EF}COMANDOS FRECUENTES{EBEBEB}: /gps - /cuenta - /coches - /telefono - /panel - /pagar - /inventario - /ceder\n\n");
	strcat(dialog, "{58A4EF}TRABAJOS{EBEBEB}, existen diversos empleos en el servidor, tanto legales como ilegales,\n");
	strcat(dialog, "puedes conseguir uno en la aplicación de empleos de tu teléfono o con el dueño de dicha empresa.\n\n");
	strcat(dialog, "{58A4EF}FACCIONES{EBEBEB}, contamos con un sistema dinámico para la creación de familias o bandas,\n");
	strcat(dialog, "hay posibilidades que hayan facciones oficiales disponibles verifica {00AE57}/facciones{EBEBEB} y contacta al encargado.\n\n");
	strcat(dialog, "{58A4EF}ADMINISTRACIÓN{EBEBEB}, en estos momentos no estamos en busca de integrantes para la administración,\n");
	strcat(dialog, "cuando necesitemos lo haremos saber en nuestro foro o anuncio programado por el encargado.\n\n");
	strcat(dialog, "{58A4EF}DUDAS & ANTIROL{EBEBEB}, Si notas antirol en el servidor, reporta al individuo desde el comando {00AE57}/reportar{EBEBEB}.\n");
	strcat(dialog, "Si tienes preguntas sobre el servidor, puedes usar {00AE57}/duda{EBEBEB} para solicitar ayuda administrativa.\n");
	Dialog_Show(playerid, ShowInvalido, DIALOG_STYLE_MSGBOX, "Dudas frecuentes", dialog, "Cerrar", "");
	return 1;
}

CMD:duda(playerid, params[])
{
	new Texto[128];
	if (JustDuda[playerid] > 0) return SendClientMessage(playerid, COLOR_WHITE, "Espera 60 segundos para mandar otra duda.");
	if (AdminOnlineCheck() == 0) return SendClientMessage(playerid, COLOR_WHITE, "No hay {FF0000}administradores online{FFFFFF} en este momento, intenta más tarde.");
	if (sscanf(params, "s[128]", Texto)) return SendClientMessage(playerid, -1, "Utiliza: {00AE57}/duda{FFFFFF} (texto)");
	new string[322];
	format(string, sizeof string, "Duda de %s: %s. (/aduda %d)", NombreOriginal(playerid), Texto, playerid);
    SendAdminMessage(0x00D900FF, string);
	format(string, sizeof string, "Tu duda se ha enviado a %d miembros del equipo administrativo.", AdminOnlineCheck());
	SendClientMessage(playerid,COLOR_WHITE,string);
	JustDuda[playerid] = 60;
	PlayerDuda[playerid] = 1;
	alm(PlayerTextoDuda[playerid], Texto);
	return 1;
}

CMD:dudas(playerid)
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	new string[320];
	SendClientMessage(playerid, COLOR_GREEN, "DUDAS:");
	Loop(playerid2, MAX_PLAYERS, 0) if (IsPlayerConnectedEx(playerid2))
	{
		if (PlayerDuda[playerid2] != 0)
		{
			format(string, sizeof string, "{00A2FF}%s (ID: %d):{FFFFFF} %s", NombreOriginal(playerid2), playerid2, PlayerTextoDuda[playerid2]);
			if (strlen(string) > 0) SendSplitMessage(playerid, 0xFFFFFFFF, string);
		}
	}
	return 1;
}

CMD:aduda(playerid, params[])
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	new string[320], playerid2, respuesta[200];
	if (sscanf(params, "ds[200]", playerid2, respuesta)) return SendClientMessage(playerid, -1, "Utiliza: /aduda (PlayerID) (Respuesta)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, 0xFF0000FF, "Jugador no conectado.");
	if (PlayerDuda[playerid2] == 0) return SendClientMessage(playerid, 0xFF0000FF, "Este jugador no tiene una duda.");
	format(string, sizeof string, "{2F99B5}%s{EBEBEB} te responde: %s.", NombreOriginal(playerid), respuesta);
	SendSplitMessage(playerid2, 0xEBEBEBFF, string);

	format(string, sizeof string, "Respondes a %s (%d): %s", NombreOriginal(playerid2), playerid2, respuesta);
	SendSplitMessage(playerid,  0xE9BC0AFF, string);

	PlayerDuda[playerid2] = 0;
	alm(PlayerTextoDuda[playerid2], "nada");

	format(string, sizeof string, "{9EC73D}%s{FFFFFF} ha aceptado la duda de %s(%d).", NombreOriginal(playerid), NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFFFFFFFF, string);
	return 1;
}

CMD:rduda(playerid, params[])
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	new id, string[185];
	if (sscanf(params, "u", id)) return SendClientMessage(playerid, -1, "Utiliza: /rduda (PlayerID)");
	if (!IsPlayerConnectedEx(id)) return SendClientMessage(playerid, 0xFF0000FF, "Jugador no conectado.");
	if (PlayerDuda[id] == 0) return SendClientMessage(playerid, 0xFF0000FF, "Este jugador no tiene una duda.");

	format(string, sizeof string, "{2F99B5}%s{FFFFFF} ha {FF0000}rechazado{FFFFFF} su duda.",NombreOriginal(playerid));
	SendClientMessage(id, -1, string);
	format(string, sizeof string, "Le recomendamos que use el comando /soporte, posiblemente la respuesta de su pregunta esté ahí.");
	SendClientMessage(id, -1, string);

	format(string, sizeof string, "{2F99B5}%s{FFFFFF} ha rechazado la duda de %s(%d).", NombreOriginal(playerid), NombreOriginal(id), id);
	SendAdminMessage(0xFFFFFFFF, string);
	PlayerDuda[id] = 0;
	alm(PlayerTextoDuda[id], "nada");
	return 1;
}

CMD:smstodos(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[240];
	if(isnull(params)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /smstodos (texto)");
	format(string, sizeof string, "SMS: %s, Destinatario: desconocido.", params);
	foreach(Player, playerid2) if (IsPlayerConnectedEx(playerid2)) { SendSplitMessage(playerid2, COLOR_YELLOW, string); }
 	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) usó el comando /smstodos.", InfoCuenta[playerid][jApodo], playerid);
	SendAdminMessage(0xFF6347FF, string);
	return 1;
}

CMD:showsound(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new sound;
    if (sscanf(params, "d", sound)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /showsound (ID)");
    PlayerPlaySound(playerid, sound, 0,0,0);
    return 1;
}

CMD:expdoble(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[250], playerid2, hours, invoice[64];
	if (sscanf(params, "uds[64]", playerid2, hours, invoice)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /expdoble (playerid) (Horas) (Detalles)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
	format(string, sizeof string, " %s te dio %d horas de doble experiencia, cada payday recibirás doble EXP y en trabajos también.", NombreOriginal(playerid), hours);
	SendClientMessage(playerid2,COLOR_YELLOW,string);
	format(string, sizeof string, " Estableciste su experiencia doble a %d horas a %s.", hours,NombreOriginal(playerid2));
	SendClientMessage(playerid,COLOR_YELLOW,string);
	InfoCuenta[playerid2][jDobleExp] += hours;
	guardar_int_mysql("cuentas", "DobleExp", InfoCuenta[playerid2][jID], InfoCuenta[playerid2][jDobleExp]);
	format(string, sizeof string, "[SHOP ExpDoble] %s dió %d horas a %s - Pagó fue de %s", NombreDeCuenta(playerid), hours,NombreDeCuenta(playerid2), invoice);
	Log("LOGS/shoplog.log", string);
	return 1;
}

CMD:vendercoinsvip(playerid, params[]){
	new string[128], playerid2, amount, price;
	if(sscanf(params, "ddd", playerid2, amount, price)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /vendercoinsvip (playerid) (Monto) (Precio)");
	if(amount < 1 || amount > 99999999) { SendClientMessage(playerid, COLOR_WHITE, "* Los valores no pueden ser mayores a 99999999 gramos ni menores a 1."); return 1; }
	if(price < 1) { SendClientMessage(playerid, COLOR_WHITE, "El precio no puede ser menor que 1."); return 1; }
	if(IsPlayerConnected(playerid)){
		if(IsPlayerConnected(playerid2)){
			if(CercaDelMarica(8.0, playerid, playerid2)){
				if(playerid2 == playerid) return SendClientMessage(playerid, COLOR_GREY, "No puedes venderte a ti mismo.");
				format(string, sizeof string, "* Has ofrecido a %s, %d coins VIP por $%d.", NombreOriginal(playerid2), amount, price);
				SendClientMessage(playerid, COLOR_LIGHTBLUE, string);
				format(string, sizeof string, "* %s quiere venderte %d coins VIP por $%d, (Usa: /aceptar coinsvip para comprar).", NombreOriginal(playerid), amount, price);
				SendClientMessage(playerid2, COLOR_LIGHTBLUE, string);
				FOffer[playerid2] = playerid;
				FPrice[playerid2] = price;
				return FAmount[playerid2] = amount;
			}
			else return SendClientMessage(playerid, COLOR_WHITE, "Ese jugador no está cerca tuyo.");
		}
	}
	else SendClientMessage(playerid, COLOR_WHITE, "ID Inválida.");
	return 1;
}

CMD:viplocker(playerid, params[])
{
	if (!IsPlayerInRangeOfPoint(playerid, 4.0, 798.4911,-1416.1251,1016.4688)) return SendClientMessage(playerid, COLOR_GRAD2, "No estás cerca del {FFFF00}X{FFFFFF} locker!");
	switch (InfoCuenta[playerid][jVIP])
	{
		case 1: Dialog_Show(playerid, ShowLockerVIP, DIALOG_STYLE_LIST, "{00AE57}VIP Locker", "Botiquín HP\nArmadura ($9,000)", "Continuar", "Salir");
		case 2: Dialog_Show(playerid, ShowLockerVIP, DIALOG_STYLE_LIST, "{00AE57}VIP Locker", "Botiquín HP\nArmadura ($9,000)\nSkins exclusivos", "Continuar", "Salir");
		case 3,4: Dialog_Show(playerid, ShowLockerVIP, DIALOG_STYLE_LIST, "{00AE57}VIP Locker", "Botiquín HP\nArmadura\nSkins exclusivos\nArmas", "Continuar", "Salir");
		default: SendClientMessage(playerid, COLOR_WHITE, "Lo sentimos, no hay nada dentro del Locker. Alguien se lo habrá llevado todo.");
	}
	return 1;
}

Dialog:ShowLockerVIP(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0:
		{
			if (InfoPersonaje[playerid][pVida] >= 99.0) return SendClientMessage(playerid, COLOR_GREY, "Ya tienes la vida al tope.");
			dar_vida(playerid, 100);
			SendClientMessage(playerid, COLOR_YELLOW, "[VIP]:{FFFFFF} Usaste el Botiquín HP, ahora tienes 100 de vida.");
		}
		case 1:
		{
			if (InfoPersonaje[playerid][pChaleco] >= 90.0) return SendClientMessage(playerid, COLOR_GREY, "{A2DC35}[INFO]:{FFFFFF} Ya tienes la armadura al tope.");
			if (InfoCuenta[playerid][jVIP] == 1 || InfoCuenta[playerid][jVIP] == 1)
			{
				if (GetPlayerCash(playerid) < 500) return SendClientMessage(playerid, COLOR_GREY,"{FFFF00}[ERROR]:{FFFFFF} No puedes pagar $9,000!");
				GivePlayerCash(playerid, -500, "chaleco (vip)");
				dar_chaleco(playerid, 100);
				SendClientMessage(playerid, COLOR_YELLOW, "[VIP]:{FFFFFF} Pagaste $9,000 por 100 de chaleco.");
				return 1;
			}
			dar_chaleco(playerid, 100);
		}
		case 2:
		{
			new SkinMuestra[150], count = 0;
			Loop(x, sizeof InfoSkin, 0) if (InfoSkin[x][sTipo] == 6)
			{
				SkinMuestra[count] = x;
				count++;
			}
			ShowModelSelectionMenuEx(playerid, SkinMuestra, count, "Skins exclusivos", VIP_Skin, -11.0, 0.0, -55.0, 1.0);
		}
		case 3:
		{
			if (InfoPersonaje[playerid][pHorasOn] < 2) return SendClientMessage(playerid, COLOR_GRAD2, "Actualmente tienes restricción de armas!");
			Dialog_Show(playerid, VIPweapons, DIALOG_STYLE_LIST, "{00AE57}Armas VIP", "9 milimetros\nMicro Uzi", "Continuar", "Salir");
		}
	}
	return 1;
}

Dialog:VIPweapons(playerid, response, listitem, inputtext[])
{
	if (!response) return 1;
	switch (listitem)
	{
		case 0: { if (PlayerWeapon(playerid, 22) == 0) return 1; }
		case 1: { if (PlayerWeapon(playerid, 28) == 0) return 1; }
	}
	return 1;
}

CMD:cinturon(playerid, params[]){
    if(!IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, COLOR_WHITE, "No estás en un vehiculo.");
	new string[50 + MAX_PLAYER_NAME];
    if(IsPlayerInAnyVehicle(playerid) == 1 && Seatbelt[playerid] == 0){
        Seatbelt[playerid] = 1;
        if(IsABike(GetPlayerVehicleID(playerid))){format(string, sizeof string, "* %s agarra su casco, y se lo pone.", NombreJugador(playerid));}
        else { format(string, sizeof string, "* %s pone las manos en su cinturón y se lo pone.", NombreJugador(playerid)); }
    }
    else if(IsPlayerInAnyVehicle(playerid) == 1 && Seatbelt[playerid] == 1){
        Seatbelt[playerid] = 0;
        if(IsABike(GetPlayerVehicleID(playerid))){format(string, sizeof string, "* %s pone las manos en su casco, y se lo quita.", NombreJugador(playerid));}
        else { format(string, sizeof string, "* %s pone las manos en su cinturón y se lo quita.", NombreJugador(playerid)); }
    }
    ProxDetector(20.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
    return 1;
}

CMD:vercinturon(playerid, params[]){
	new playerid2;
	if(sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Utiliza: /vercinturon (Jugador)");
    if(GetPlayerState(playerid2) == PLAYER_STATE_ONFOOT) return SendClientMessage(playerid,COLOR_GREY,"Ese jugador no está en un vehiculo!");
    if (CercaDelMarica(9.0, playerid, playerid2)){
		new string[128];
        new stext[4];
        if(Seatbelt[playerid2] == 0) { stext = "sin"; }
        else { stext = "con"; }
        if(IsABike(GetPlayerVehicleID(playerid))){
            format(string, sizeof string, "%s está %s casco." , NombreJugador(playerid2) , stext);
            SendClientMessage(playerid,COLOR_WHITE,string);

            format(string, sizeof string, "* %s mira a %s, mirando si tiene puesto su casco.", NombreJugador(playerid),NombreJugador(playerid2));
            ProxDetector(30.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
        }
        else{
            format(string, sizeof string, "%s está %s cinturón." , NombreJugador(playerid2) , stext);
            SendClientMessage(playerid,COLOR_WHITE,string);

            format(string, sizeof string, "* %s observa a travez de la ventana de %s, mirando si usa el cinturón.", NombreJugador(playerid),NombreJugador(playerid2));
            ProxDetector(30.0, playerid, string, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
        }
    }
    else { SendClientMessage(playerid, COLOR_WHITE, "No estás cerca de ese jugador!"); }
    return 1;
}

CMD:darpremium(playerid, params[])
{
	if (CheckAdminCMD(playerid, 10)) return 1;
	new string[280], playerid2, level;
	if (sscanf(params, "dd", playerid2, level))
	{
		SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /darvip (PlayerID) (Nivel)");
		SendClientMessage(playerid, COLOR_GRAD3, "0= Ninguno, 1= Bronce, 2= Plata, 3= Oro.");
		return 1;
	}
	if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, -1, "Jugador no conectado.");
	if (level < 0 || level > 3) return SendClientMessage(playerid, COLOR_GENERAL, "[!]{ffffff}Del 1 al 3.");
	new year, month, day;
	getdate(year, month, day);
	InfoCuenta[playerid2][jVIP] = level;
	if (month == 12) InfoCuenta[playerid2][jMesVIP] = 1;
	else
	{
		new total;
		total = month + 1;
		InfoCuenta[playerid2][jMesVIP] = total;
	}
	InfoCuenta[playerid2][jDiaVIP] = day;
	if (level == 0)
	{
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) removido los beneficios VIP a %s(%d).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
		SendAdminMessage(0xFF6347FF, string);
		format(string, sizeof string, "%s(%d) ha removido tus beneficios VIP.", InfoCuenta[playerid][jApodo], playerid);
		SendClientMessage(playerid2, 0xEBEBEBFF, string);
		InfoCuenta[playerid2][jDiaVIP] = -1;
		InfoCuenta[playerid2][jMesVIP] = -1;
		format(string, sizeof string, "%s removió los beneficios VIP a %s.", InfoCuenta[playerid][jApodo], NombreDeCuenta(playerid2));
		Log("LOGS/setvip.log", string);
	}
	else
	{
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) ha otorgado benecicios VIP %s a %s(%d).", InfoCuenta[playerid][jApodo], playerid, GetNameVIP(level), NombreOriginal(playerid2), playerid2);
		SendAdminMessage(0xFF6347FF, string);
		format(string, sizeof string, "%s(%d) te ha otorgado beneficios VIP %s.", InfoCuenta[playerid][jApodo], playerid, GetNameVIP(level));
		SendClientMessage(playerid2, COLOR_WHITE, string);
		format(string, sizeof string, "%s otorgó beneficios VIP %s a %s.", InfoCuenta[playerid][jApodo], GetNameVIP(level), NombreDeCuenta(playerid2));
		Log("LOGS/setvip.log", string);
	}
	new query[512];
	mysql_format(DBInsanity, query, sizeof query, "UPDATE cuentas SET VIP = '%d', MesVIP = '%d', DiaVIP = '%d' WHERE ID = '%d'", InfoCuenta[playerid2][jVIP], InfoCuenta[playerid2][jMesVIP], InfoCuenta[playerid2][jDiaVIP], InfoCuenta[playerid2][jID]);
	mysql_tquery(DBInsanity, query);
	return 1;
}
CMD:setvip(playerid, params[]) return cmd_darpremium(playerid, params);
CMD:darvip(playerid, params[]) return cmd_darpremium(playerid, params);

CMD:vip(playerid, params[])
{
	if (InfoCuenta[playerid][jVIP] > 0 || GetPlayerAdmin(playerid, 1) != 0)
	{
		if (InfoPersonaje[playerid][pTogVIP] == 0) return SendClientMessage(playerid, COLOR_GREY, "Tienes el canal deshabilitado, /togvip para re-habilitarlo.");
		new string[320];
		if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /vip (Texto)");
		if (VIPTimer[playerid] > 0)
		{
			format(string, sizeof string, "Debes esperar %d segundos para hablar de nuevo por este canal.", VIPTimer[playerid]);
			SendClientMessage(playerid, COLOR_GREY, string);
			return 1;
		}
		if (GetPlayerAdmin(playerid, 1) != 0) format(string, sizeof string, "** [%s] %s: %s", GetAdminName(playerid), InfoCuenta[playerid][jApodo], params);
		switch (InfoCuenta[playerid][jVIP])
		{
		    case 1:
			{
				format(string, sizeof string, "** Bronce VIP %s: %s", InfoCuenta[playerid][jNombre], params);
				VIPTimer[playerid] = 12;
			}
			case 2:
			{
				format(string, sizeof string, "** Silver VIP %s: %s", InfoCuenta[playerid][jNombre], params);
				VIPTimer[playerid] = 7;
			}
			case 3:
			{
				format(string, sizeof string, "** Gold VIP %s: %s", InfoCuenta[playerid][jNombre], params);
				VIPTimer[playerid] = 4;
			}
		}
		SendVIPMessage(COLOR_VIP, string);
		Log("LOGS/vipchat.log", string);
	}
	return 1;
}

CMD:regaloatodos(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	if (GiftAllowed)
	{
		new string[210];
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) usó /regaloatodos.", InfoCuenta[playerid][jApodo], playerid);
		SendAdminMessage(0xFF6347FF, string);
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) ha enviado regalos a todos los usuarios!", InfoCuenta[playerid][jApodo], playerid);
		SendAllMessage(0xFF6347FF, string);
		GiftAllowed = 0;
		foreach(Player, i) if (IsPlayerConnectedEx(i))
		{
			GiftPlayer(i);
			InfoCuenta[i][jRegalo] = 3600;
			guardar_int_mysql("cuentas", "Regalo", InfoCuenta[i][jID], 3600);
		}
		return 1;
	}
	SendClientMessage(playerid, COLOR_WHITE, "Este comando ya fue usado, puedes usarlo en el próximo payday.");
	return 1;
}

CMD:horaregalo(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	new string[170], playerid2;
	if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /horaregalo (playerid)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Ese jugador no está conectado.");
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) reseteó el tiempo de regalo a %s(%d).", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, string);
	InfoCuenta[playerid2][jRegalo] = 0;
	guardar_int_mysql("cuentas", "Regalo", InfoCuenta[playerid2][jID], 0);
	return 1;
}

CMD:spawncasa(playerid)
{
	if (InfoCuenta[playerid][jVIP] < 2) return SendClientMessage( playerid, COLOR_WHITE, "No eres VIP oro o platino." );
	new casa = 0;
	if (InfoPersonaje[playerid][pCasa1] != -1) casa = 1;
	if (InfoPersonaje[playerid][pCasa2] != -1) casa = 1;
	if (casa == 0) return SendClientMessage( playerid, COLOR_WHITE, "No eres dueño de una casa." );
	if (InfoPersonaje[playerid][pTipoSpawn] == 0)
	{
		InfoPersonaje[playerid][pTipoSpawn] = 1;
		SendClientMessage( playerid, COLOR_YELLOW, "Ahora aparecerás en tu casa cuando mueras." );
	}
	else
	{
		InfoPersonaje[playerid][pTipoSpawn] = 0;
		SendClientMessage( playerid, COLOR_YELLOW, "Ahora aparecerás en el hospital cuando mueras." );
	}
	guardar_int_mysql("personajes", "TipoSpawn", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pTipoSpawn]);
    return 1;
}

CMD:automensaje(playerid, params[])
{
	if (InfoCuenta[playerid][jVIP] == 0) return SendClientMessage(playerid, COLOR_GREY, "No eres {FFFF00}VIP{FFFFFF}.");
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GRAD2, "Utiliza: /automensaje [texto]");
	new string[256];
	if (strlen(params) >= 1 && strlen(params) < 127)
	{
		alm(InfoPersonaje[playerid][pAutoRespuestaSMS], params);
		format(string, sizeof string, "Cambiaste el auto mensaje de respuesta: %s", params);
		SendClientMessage(playerid, COLOR_WHITE, string);
		guardar_string_mysql("personajes", "AutoRespuestaSMS", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pAutoRespuestaSMS]);
	}
	else SendClientMessage(playerid, COLOR_GREY, "Tu automensaje no puede tener más de 128 letras ni menos de 1.");
	return 1;
}

CMD:repararpremium(playerid)
{
	if (InfoCuenta[playerid][jVIP] == 0) return SendClientMessage(playerid, COLOR_WHITE, "{FFFF00}[ERROR]:{FFFFFF} Necesitas ser premium");
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessage(playerid, COLOR_WHITE, "Debes de ser el conductor de un vehículo.");
	new engine, string[185], vehicleid = GetPlayerVehicleID(playerid);
	if(engine == VEHICLE_PARAMS_ON) return SendClientMessage(playerid, COLOR_WHITE, "Debes de tener el motor apagado. ({5ABAFF}pulsa [N]{FFFFFF}).");
	RepairVehicle(vehicleid);
	if (GetVehicleModel(vehicleid) == 528 || GetVehicleModel(vehicleid) == 427) SetVehicleHealth(vehicleid, 5000.0);
	else SetVehicleHealth(vehicleid, 1000.0);
	format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} %s(%d) usuario VIP %s usó /repararpremium.", NombreOriginal(playerid), playerid, GetNameVIP(InfoCuenta[playerid][jVIP]));
	SendAdminMessage(0xFFFFFFFF, string);
	format(string, sizeof string, "[VIP] %s(%d) reparó el vehículo que maneja.", NombreOriginal(playerid), playerid);
	ProxDetector(20.0, playerid, string, 0xB6DB22FF, 0xB6DB22FF, 0xB6DB22FF,0xB6DB22FF, 0xB6DB22FF);
	return 1;
}

CMD:skinpremium(playerid, params[])
{
	if (InfoCuenta[playerid][jVIP] < 2) return SendClientMessage(playerid, COLOR_GENERAL, "[ERROR]:{FFFFFF} Necesitas al menos VIP Silver.");
	new skin, string[185];
	if (sscanf(params, "d", skin)) return SendClientMessage(playerid, COLOR_WHITE, "Utilize: /skinpremium <ID>");
	if (IsValidSkin(skin) == 0) return SendClientMessage(playerid, COLOR_GREY, "Debes de escoger una id de skin entre 1 y 311.");
	GivePlayerSkin(playerid, skin);
	format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} %s(%d) usuario VIP %s usó /skinpremium %d.", NombreOriginal(playerid), playerid, GetNameVIP(InfoCuenta[playerid][jVIP]), skin);
	SendAdminMessage(0xFFFFFFFF, string);
	format(string, sizeof string, "[VIP] %s(%d) se cambió de skin %d.", NombreOriginal(playerid), playerid, skin);
	ProxDetector(20.0, playerid, string, 0xB6DB22FF, 0xB6DB22FF, 0xB6DB22FF,0xB6DB22FF, 0xB6DB22FF);
	return 1;
}

CMD:banearpj(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	new string[250], playerid2, reason[64], query3[1028];
	if (!CheckTimer(60, TimerCban[playerid]))
	{
		if (sscanf(params, "ds[64]", playerid2, reason)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /banearpj (PlayerID) (Razón)");
		if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Esa ID es inválida.");
		if (GetPlayerAdmin(playerid2, 10) != 0)
		{
			format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} La cuenta de %s(%d) fue baneada automáticamente por intentar banear a %s(%d).", NombreOriginal(playerid), playerid, NombreOriginal(playerid2), playerid2);
			SendAdminMessage(0xFFFFFFFF, string);
			mysql_format(DBInsanity, query3, sizeof query3, "UPDATE cuentas SET JotoOtaku = 0, EncFac = 0, OtakuN_N = 2, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE ID = '%d'", "Server", "Abuso cmds", FechaHoy(), InfoCuenta[playerid][jID]);
			mysql_tquery(DBInsanity, query3);
			Kick(playerid);
			return 1;
		}
		if (GetPlayerAdmin(playerid, 10) == 0)
		{
			if (InfoCuenta[playerid2][jAdmin] > InfoCuenta[playerid][jAdmin])
			{
				format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} La cuenta de %s(%d) fue baneada automáticamente por intentar banear a %s(%d), superior a él.", NombreOriginal(playerid), playerid, NombreOriginal(playerid2), playerid2);
				SendAdminMessage(0xFFFFFFFF, string);
				mysql_format(DBInsanity, query3, sizeof query3, "UPDATE cuentas SET JotoOtaku = 0, EncFac = 0, OtakuN_N = 2, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE ID = '%d'", "Server", "Abuso cmds", FechaHoy(), InfoCuenta[playerid][jID]);
				mysql_tquery(DBInsanity, query3);
				Kick(playerid);
				return 1;
			}
		}
		format(string, sizeof string, "AdmCmd: %s bloqueó el personaje %s, razón: %s", NombreOriginal(playerid), NombreOriginal(playerid2), reason);
		Log("LOGS/ban.log", string);
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) bloqueó el personaje %s(%d). Razón: %s", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2, reason);
		SendAllMessage(0xFF6347FF, string);
		mysql_format(DBInsanity, query3, sizeof query3, "UPDATE personajes SET OtakuN_N = 2, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE ID = '%d'", NombreOriginal(playerid), reason, FechaHoy(), InfoPersonaje[playerid2][pID]);
		mysql_tquery(DBInsanity, query3);
		SetTimerEx("TimerKICK",500, false, "d", playerid2);
		//seguridad 24/02/2020
		CountBan[playerid]++;
		if (CountBan[playerid] == 5)
		{
			TimerCban[playerid] = gettime();
			CountBan[playerid] = 0;
		}
	}
	else
	{
		format(string, sizeof string, "Debes esperar %d segundos para usar este comando.", CheckTimer(60, TimerCban[playerid]));
		SendClientMessage(playerid, 0xEBEBEBFF, string);
	}
	return 1;
}
CMD:bloquearpj(playerid, params[]) return cmd_banearpj(playerid, params);

CMD:banip(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	if (!CheckTimer(60, TimerCban[playerid]))
	{
		new string[128], playerid2, reason[64], query3[1028];
		if (sscanf(params, "ds[64]", playerid2, reason)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /banip (PlayerID) (Razón)");
		if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Esa ID es inválida.");
		if (GetPlayerAdmin(playerid2, 10) != 0)
		{
			format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} La cuenta de %s(%d) fue baneada automáticamente por intentar banear de ip a %s(%d).", NombreOriginal(playerid), playerid, NombreOriginal(playerid2), playerid2);
			SendAdminMessage(0xFFFFFFFF, string);
			mysql_format(DBInsanity, query3, sizeof query3, "UPDATE cuentas SET JotoOtaku = 0, EncFac = 0, OtakuN_N = 2, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE ID = '%d'", "Server", "Abuso cmds", FechaHoy(), InfoCuenta[playerid][jID]);
			mysql_tquery(DBInsanity, query3);
			Kick(playerid);
			return 1;
		}
		if (GetPlayerAdmin(playerid, 10) == 0)
		{
			if (InfoCuenta[playerid2][jAdmin] > InfoCuenta[playerid][jAdmin])
			{
				format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} La cuenta de %s(%d) fue baneada automáticamente por intentar banear de ip a %s(%d), superior a él.", NombreOriginal(playerid), playerid, NombreOriginal(playerid2), playerid2);
				SendAdminMessage(0xFFFFFFFF, string);
				mysql_format(DBInsanity, query3, sizeof query3, "UPDATE cuentas SET JotoOtaku = 0, EncFac = 0, OtakuN_N = 2, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE ID = '%d'", "Server", "Abuso cmds", FechaHoy(), InfoCuenta[playerid][jID]);
				mysql_tquery(DBInsanity, query3);
				Kick(playerid);
				return 1;
			}
		}
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) baneó con IP a %s(%d). Razón: %s", NombreOriginal(playerid), playerid, NombreOriginal(playerid2), playerid2, reason);
		SendAllMessage(0xFF6347FF, string);
		SetTimerEx("TimerBANIP",1000,false,"d",playerid2);
		guardar_int_mysql("cuentas", "OtakuN_N", InfoCuenta[playerid2][jID], 2);
		//seguridad 24/02/2020
		CountBan[playerid]++;
		if (CountBan[playerid] == 5)
		{
			TimerCban[playerid] = gettime();
			CountBan[playerid] = 0;
		}
	}
	else
	{
		new string[240];
		format(string, sizeof string, "Debes esperar %d segundos para usar este comando.", CheckTimer(60, TimerCban[playerid]));
		SendClientMessage(playerid, 0xEBEBEBFF, string);
	}
	return 1;
}
CMD:banearip(playerid, params[]) return cmd_banip(playerid, params);

CMD:obanearcuenta(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	new string[1028], playername[MAX_PLAYER_NAME], reason[64];
	if (sscanf(params, "ss", playername, reason)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /obanearcuenta (Nombre de  usuario) (Razón)");
	if (VerificarCuenta(playername))
	{
		new banex;
		reg_int(0, "OtakuN_N", banex);
		if (banex != 0) return SendClientMessage(playerid, COLOR_GREY, "Esa cuenta ya está bloqueada.");
		mysql_format(DBInsanity, string, sizeof string, "UPDATE cuentas SET OtakuN_N = 2, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE Nombre = '%e'", NombreOriginal(playerid), reason, FechaHoy(), playername);
		mysql_tquery(DBInsanity, string);
		format(string, sizeof string, "%s bloqueó la cuenta %s, razón: %s", NombreDeCuenta(playerid), playername, reason);
		Log("LOGS/offban.log", string);
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) bloqueó la cuenta %s, razón: %s (OFFLINE)", InfoCuenta[playerid][jApodo], playerid, playername, reason);
		SendAdminMessage(0xFF6347FF, string);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Esa cuenta no existe.");
	return 1;
}
CMD:obloquearcuenta(playerid, params[]) return cmd_obanearcuenta(playerid, params);

CMD:banearcuenta(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	new string[250], playerid2, reason[64], query3[1028];
	if (!CheckTimer(60, TimerCban[playerid]))
	{
		if (sscanf(params, "ds[64]", playerid2, reason)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /banearcuenta (PlayerID) (Razón)");
		if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Esa ID es inválida.");
		if (GetPlayerAdmin(playerid2, 10) != 0)
		{
			format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} La cuenta de %s(%d) fue baneada automáticamente por intentar banear a %s(%d).", NombreOriginal(playerid), playerid, NombreOriginal(playerid2), playerid2);
			SendAdminMessage(0xFFFFFFFF, string);
			mysql_format(DBInsanity, query3, sizeof query3, "UPDATE cuentas SET JotoOtaku = 0, EncFac = 0, OtakuN_N = 2, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE ID = '%d'", "Server", "Abuso cmds", FechaHoy(), InfoCuenta[playerid][jID]);
			mysql_tquery(DBInsanity, query3);
			Kick(playerid);
			return 1;
		}
		if (GetPlayerAdmin(playerid, 10) == 0)
		{
			if (InfoCuenta[playerid2][jAdmin] > InfoCuenta[playerid][jAdmin])
			{
				format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} La cuenta de %s(%d) fue baneada automáticamente por intentar banear a %s(%d), superior a él.", NombreOriginal(playerid), playerid, NombreOriginal(playerid2), playerid2);
				SendAdminMessage(0xFFFFFFFF, string);
				mysql_format(DBInsanity, query3, sizeof query3, "UPDATE cuentas SET JotoOtaku = 0, EncFac = 0, OtakuN_N = 2, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE ID = '%d'", "Server", "Abuso cmds", FechaHoy(), InfoCuenta[playerid][jID]);
				mysql_tquery(DBInsanity, query3);
				Kick(playerid);
				return 1;
			}
		}
		format(string, sizeof string, "AdmCmd: %s bloqueó la cuenta %s, razón: %s", NombreOriginal(playerid), NombreOriginal(playerid2), reason);
		Log("LOGS/ban.log", string);
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) bloqueó la cuenta (%s) de %s(%d). Razón: %s", InfoCuenta[playerid][jApodo], playerid, InfoCuenta[playerid2][jNombre], NombreOriginal(playerid2), playerid2, reason);
		SendAllMessage(0xFF6347FF, string);
		mysql_format(DBInsanity, query3, sizeof query3, "UPDATE cuentas SET OtakuN_N = 2, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE ID = '%d'", NombreOriginal(playerid), reason, FechaHoy(), InfoCuenta[playerid2][jID]);
		mysql_tquery(DBInsanity, query3);
		SetTimerEx("TimerKICK",500, false, "d", playerid2);
		//seguridad 24/02/2020
		CountBan[playerid]++;
		if (CountBan[playerid] == 5)
		{
			TimerCban[playerid] = gettime();
			CountBan[playerid] = 0;
		}
	}
	else
	{
		format(string, sizeof string, "Debes esperar %d segundos para usar este comando.", CheckTimer(60, TimerCban[playerid]));
		SendClientMessage(playerid, 0xEBEBEBFF, string);
	}
	return 1;
}
CMD:bloquearcuenta(playerid, params[]) return cmd_banearcuenta(playerid, params);

CMD:tbanpj(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	new playerid2, razon[190], minutos, query3[1028], string[512];
	if (sscanf(params, "iis[128]", playerid2, minutos, razon)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /tbanpj (JugadorID) (Minutos) (Razón)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "El jugador seleccionado no se encuentra conectado.");
	if (minutos < 1 || minutos > 2880) { SendClientMessage(playerid, COLOR_GREY, "El tiempo mínimo es de 1 minuto y el máximo 2880 (48 hs)"); return 1; }
 	if (GetPlayerAdmin(playerid2, 10) != 0)
	{
		format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} La cuenta de %s(%d) fue baneada automáticamente por intentar banear a %s(%d).", NombreOriginal(playerid), playerid, NombreOriginal(playerid2), playerid2);
		SendAdminMessage(0xFFFFFFFF, string);
		mysql_format(DBInsanity, query3, sizeof query3, "UPDATE cuentas SET JotoOtaku = 0, EncFac = 0, OtakuN_N = 2, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE ID = '%d'", "Server", "Abuso cmds", FechaHoy(), InfoCuenta[playerid][jID]);
		mysql_tquery(DBInsanity, query3);
		Kick(playerid);
		return 1;
	}
	if (GetPlayerAdmin(playerid, 10) == 0)
	{
		if (InfoCuenta[playerid2][jAdmin] > InfoCuenta[playerid][jAdmin])
		{
			format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} La cuenta de %s(%d) fue baneada automáticamente por intentar banear a %s(%d), superior a él.", NombreOriginal(playerid), playerid, NombreOriginal(playerid2), playerid2);
			SendAdminMessage(0xFFFFFFFF, string);
			mysql_format(DBInsanity, query3, sizeof query3, "UPDATE cuentas SET JotoOtaku = 0, EncFac = 0, OtakuN_N = 2, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE ID = '%d'", "Server", "Abuso cmds", FechaHoy(), InfoCuenta[playerid][jID]);
			mysql_tquery(DBInsanity, query3);
			Kick(playerid);
			return 1;
		}
	}
	format(string, sizeof string, "AdmCmd: %s fue expulsado %d minutos por %s, razón: %s", NombreOriginal(playerid2), minutos, NombreOriginal(playerid), razon);
	Log("LOGS/ban.log", string);
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) fue expulsado %d minutos por %s(%d). Razón: %s", NombreOriginal(playerid2), playerid2, minutos, InfoCuenta[playerid][jApodo], playerid, razon);
	SendAllMessage(0xFF6347FF, string);
	new k = gettime(), elpru[30];
	alm(elpru, "0");
	minutos *= 60;
	k += minutos;
	format(elpru, sizeof(elpru), "%d", k);
	mysql_format(DBInsanity, query3, sizeof query3, "UPDATE personajes SET OtakuN_N = 1, TimeBanUwU = '%e', MomentBan = '%e', ReasonBanUwU = '%e', FueBan = '%e' WHERE ID = '%d'", elpru, FechaHoy(), razon, NombreOriginal(playerid), InfoPersonaje[playerid2][pID]);
	mysql_tquery(DBInsanity, query3);
	SetTimerEx("TimerKICK", 1500, false, "d", playerid2);
	return 1;
}

CMD:tbancuenta(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	new playerid2, razon[190], minutos, query3[1028], string[512];
	if (sscanf(params, "iis[128]", playerid2, minutos, razon)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /tbancuenta (JugadorID) (Minutos) (Razón)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "El jugador seleccionado no se encuentra conectado.");
	if (minutos < 1 || minutos > 2880) { SendClientMessage(playerid, COLOR_GREY, "El tiempo mínimo es de 1 minuto y el máximo 2880 (48 hs)"); return 1; }
	if (GetPlayerAdmin(playerid2, 10) != 0)
	{
		format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} La cuenta de %s(%d) fue baneada automáticamente por intentar banear a %s(%d).", NombreOriginal(playerid), playerid, NombreOriginal(playerid2), playerid2);
		SendAdminMessage(0xFFFFFFFF, string);
		mysql_format(DBInsanity, query3, sizeof query3, "UPDATE cuentas SET JotoOtaku = 0, EncFac = 0, OtakuN_N = 2, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE ID = '%d'", "Server", "Abuso cmds", FechaHoy(), InfoCuenta[playerid][jID]);
		mysql_tquery(DBInsanity, query3);
		Kick(playerid);
		return 1;
	}
	if (GetPlayerAdmin(playerid, 10) == 0)
	{
		if (InfoCuenta[playerid2][jAdmin] > InfoCuenta[playerid][jAdmin])
		{
			format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} La cuenta de %s(%d) fue baneada automáticamente por intentar banear a %s(%d), superior a él.", NombreOriginal(playerid), playerid, NombreOriginal(playerid2), playerid2);
			SendAdminMessage(0xFFFFFFFF, string);
			mysql_format(DBInsanity, query3, sizeof query3, "UPDATE cuentas SET JotoOtaku = 0, EncFac = 0, OtakuN_N = 2, FueBan = '%e', ReasonBanUwU = '%e', MomentBan = '%e' WHERE ID = '%d'", "Server", "Abuso cmds", FechaHoy(), InfoCuenta[playerid][jID]);
			mysql_tquery(DBInsanity, query3);
			Kick(playerid);
			return 1;
		}
	}
	format(string, sizeof string, "AdmCmd: %s (cuenta: %s) fue expulsado %d minutos por %s, razón: %s", NombreOriginal(playerid2), InfoCuenta[playerid2][jNombre], minutos, NombreOriginal(playerid), razon);
	Log("LOGS/ban.log", string);
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) (cuenta: %s) fue expulsado %d minutos por %s(%d). Razón: %s", NombreOriginal(playerid2), playerid2, InfoCuenta[playerid2][jNombre], minutos, InfoCuenta[playerid][jApodo], playerid, razon);
	SendAllMessage(0xFF6347FF, string);
	new k = gettime(), elpru[30];
	alm(elpru, "0");
	minutos *= 60;
	k += minutos;
	format(elpru, sizeof(elpru), "%d", k);
	mysql_format(DBInsanity, query3, sizeof query3, "UPDATE cuentas SET OtakuN_N = 1, TimeBanUwU = '%e', MomentBan = '%e', ReasonBanUwU = '%e', FueBan = '%e' WHERE ID = '%d'", elpru, FechaHoy(), razon, NombreOriginal(playerid), InfoCuenta[playerid2][jID]);
	mysql_tquery(DBInsanity, query3);
	SetTimerEx("TimerKICK", 1500, false, "d", playerid2);
	return 1;
}

CMD:otbanpj(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	new playerid2, tiempo, razon[128], nombrexdd[50], string[512];
	if (sscanf(params, "s[24]ds[128]", nombrexdd, tiempo, razon)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /otbanpj (Nombre_Apellido) (Minutos) (Razón)");
	if (sscanf(params, "uds[128]", playerid2, tiempo, razon)) return SendClientMessage(playerid, COLOR_GREY, "Hubo un problema, utiliza de nuevo el comando.");
	if (IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador está conectado, utiliza /otbanpj.");
	if (tiempo < 1 || tiempo > 2880) { SendClientMessage(playerid, COLOR_GREY, "El tiempo mínimo es de 1 minuto y el máximo 2880 (48 hs)"); return 1; }
	if (VerificarPersonaje(nombrexdd))
	{
	    new banex, query3[1028];
		reg_int(0, "OtakuN_N", banex);
		if (banex != 0) return SendClientMessage(playerid, COLOR_GREY, "Ese personaje ya está bloqueado.");
		format(string, sizeof string, "AdmCmd: %s fue expulsado %d minutos por %s, razón: %s (OFFLINE)", nombrexdd, tiempo, NombreOriginal(playerid), razon);
		Log("LOGS/ban.log", string);
		format(string, sizeof string, "Administración:{FFFFFF} %s fue expulsado %d minutos por %s(%d). Razón: %s (OFFLINE)", nombrexdd, tiempo, InfoCuenta[playerid][jApodo], playerid, razon);
		SendAllMessage(0xFF6347FF, string);
		new k = gettime(), elpru[30];
		tiempo *= 60;
		k += tiempo;
		format(elpru, sizeof(elpru), "%d", k);
		mysql_format(DBInsanity, query3, sizeof query3, "UPDATE personajes SET OtakuN_N = 1, TimeBanUwU = '%e', MomentBan = '%e', ReasonBanUwU = '%e', FueBan = '%e' WHERE Nombre_Apellido = '%e'", elpru, FechaHoy(), razon, NombreOriginal(playerid), nombrexdd);
		mysql_tquery(DBInsanity, query3);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Ese personaje no existe.");
	return 1;
}

CMD:otbancuenta(playerid, params[])
{
	if (CheckAdminCMD(playerid, 4)) return 1;
	new playerid2, tiempo, razon[128], nombrexdd[50], string[512];
	if (sscanf(params, "s[24]ds[128]", nombrexdd, tiempo, razon)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /otbancuenta (Nombre de usuario) (Minutos) (Razón)");
	if (sscanf(params, "uds[128]", playerid2, tiempo, razon)) return SendClientMessage(playerid, COLOR_GREY, "Hubo un problema, utiliza de nuevo el comando.");
	if (IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_GREY, "Ese jugador está conectado, utiliza /otbanpj.");
	if (tiempo < 1 || tiempo > 2880) { SendClientMessage(playerid, COLOR_GREY, "El tiempo mínimo es de 1 minuto y el máximo 2880 (48 hs)"); return 1; }
	if (VerificarCuenta(nombrexdd))
	{
	    new ex_ban, query3[1028];
		reg_int(0, "OtakuN_N", ex_ban);
		if (ex_ban != 0) return SendClientMessage(playerid, COLOR_GREY, "Esa cuenta ya está bloqueada.");
		format(string, sizeof string, "AdmCmd: La cuenta %s fue expulsada %d minutos por %s, razón: %s (OFFLINE)", nombrexdd, tiempo, NombreOriginal(playerid), razon);
		Log("LOGS/ban.log", string);
		format(string, sizeof string, "Administración:{FFFFFF} La cuenta %s fue expulsada %d minutos por %s(%d). Razón: %s (OFFLINE)", nombrexdd, tiempo, InfoCuenta[playerid][jApodo], playerid, razon);
		SendAllMessage(0xFF6347FF, string);
		new k = gettime(), elpru[30];
		tiempo *= 60;
		k += tiempo;
		format(elpru, sizeof(elpru), "%d", k);
		mysql_format(DBInsanity, query3, sizeof query3, "UPDATE cuentas SET OtakuN_N = 1, TimeBanUwU = '%e', MomentBan = '%e', ReasonBanUwU = '%e', FueBan = '%e' WHERE Nombre = '%e'", elpru, FechaHoy(), razon, NombreOriginal(playerid), nombrexdd);
		mysql_tquery(DBInsanity, query3);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GREY, "Esa cuenta no existe.");
	return 1;
}

CMD:kick(playerid, params[])
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (!CheckTimer(60, TimerCkick[playerid]))
	{
		new string[190], playerid2, reason[64];
		if (sscanf(params, "ds[64]", playerid2, reason)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /kick (PlayerID) (Razón)");
		if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
		if (GetPlayerAdmin(playerid2, 10) != 0)
		{
			format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} %s(%d) intentó kickear a %s(%d).", NombreOriginal(playerid), playerid, NombreOriginal(playerid2), playerid2);
			SendAdminMessage(0xFFFFFFFF, string);
			return 1;
		}
		if (GetPlayerAdmin(playerid, 10) == 0)
		{
			if (InfoCuenta[playerid2][jAdmin] > InfoCuenta[playerid][jAdmin])
			{
				format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} %s(%d) intentó kickear a %s(%d) superior a él.", NombreOriginal(playerid), playerid, NombreOriginal(playerid2), playerid2);
				SendAdminMessage(0xFFFFFFFF, string);
				return 1;
			}
		}
		format(string, sizeof string, "%s fue expulsado por %s. Razón: %s", NombreDeCuenta(playerid2), NombreDeCuenta(playerid), reason);
		Log("LOGS/kick.log", string);
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) expulsó del servidor a %s(%d). Razón: %s", InfoCuenta[playerid][jApodo], playerid, NombreOriginal(playerid2), playerid2, reason);
		SendAllMessage(0xFF6347FF, string);
		SetTimerEx("TimerKICK",500,false,"d",playerid2);
		//seguridad 24/02/2020
		CountKick[playerid]++;
		if (CountKick[playerid] == 5)
		{
			TimerCkick[playerid] = gettime();
			CountKick[playerid] = 0;
		}
	}
	else
	{
		new string[240];
		format(string, sizeof string, "Debes esperar %d segundos para usar este comando.", CheckTimer(60, TimerCkick[playerid]));
		SendClientMessage(playerid, 0xEBEBEBFF, string);
	}
	return 1;
}

CMD:kickname(playerid, params[])
{
	if (CheckAdminCMD(playerid, 1)) return 1;
	if (CheckAdminDuty(playerid)) return 1;
	if (!CheckTimer(60, TimerCkick[playerid]))
	{
		new string[180], playerid2;
		if (sscanf(params, "d", playerid2)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /kickname (PlayerID)");
		if (!IsPlayerConnected(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Esa ID es inválida.");
		if (GetPlayerAdmin(playerid2, 10) != 0)
		{
			format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} %s(%d) intentó kickear a %s(%d).", NombreOriginal(playerid), playerid, NombreOriginal(playerid2), playerid2);
			SendAdminMessage(0xFFFFFFFF, string);
			return 1;
		}
		if (GetPlayerAdmin(playerid, 10) == 0)
		{
			if (InfoCuenta[playerid2][jAdmin] > InfoCuenta[playerid][jAdmin])
			{
				format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} %s(%d) intentó kickear a %s(%d) superior a él.", NombreOriginal(playerid), playerid, NombreOriginal(playerid2), playerid2);
				SendAdminMessage(0xFFFFFFFF, string);
				return 1;
			}
		}
		format(string, sizeof string, "%s fue expulsado por %s. Razón: Nombre inapropiado", NombreDeCuenta(playerid2), NombreDeCuenta(playerid));
		Log("LOGS/kick.log", string);
		SendClientMessage(playerid2, COLOR_GREEN,"Has sido expulsado por el servidor ya que tu cuenta no cumple las normas de la comunidad.");
		SendClientMessage(playerid2, COLOR_WHITE,"No se permite nombre de famosos, nicks trolls, inadecuados, que no son Role Play o que falten el respeto.");
		SendClientMessage(playerid2, COLOR_WHITE,"Recuerda poner las iniciales en mayúscula usado un nombre real, formato Nombre_Apellido.");
		format(string, sizeof string, "{FF2F2F}[AdmWarnig]{FFFFFF} %s(%d) fue expulsado del servidor por %s(%d). Razón: Nombre inapropiado", NombreOriginal(playerid2), playerid2, NombreOriginal(playerid), playerid);
		SendAdminMessage(0xFFFFFFFF, string);
		SetTimerEx("TimerKICK",500,false,"d",playerid2);
		//seguridad 24/02/2020
		CountKick[playerid]++;
		if (CountKick[playerid] == 5)
		{
			TimerCkick[playerid] = gettime();
			CountKick[playerid] = 0;
		}
	}
	else
	{
		new string[240];
		format(string, sizeof string, "Debes esperar %d segundos para usar este comando.", CheckTimer(60, TimerCkick[playerid]));
		SendClientMessage(playerid, 0xEBEBEBFF, string);
	}
	return 1;
}

CMD:forzarpayday(playerid, params[])
{
	if (CheckAdminCMD(playerid, 5)) return 1;
	new string[180];
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) adelantó el PayDay.", InfoCuenta[playerid][jApodo], playerid);
	SendAdminMessage(0xFF6347FF, string);
	PayDay();
	return 1;
}

CMD:forzarpayday2(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	new string[180];
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) adelantó el PayDay de negocios.", InfoCuenta[playerid][jApodo], playerid);
	SendAdminMessage(0xFF6347FF, string);
	PayDay2();
	return 1;
}

CMD:peaje(playerid)
{
	if (IsPlayerInRangeOfPoint(playerid,15.0,66.34, -1537.61, 4.94))
	{
		if (GetPlayerCash(playerid) > 5)
		{
			MoveDynamicObject(peaje2,67.8501, -1545.8888, 0.7158, 2.0);
			SetTimer("GateClosepeaje2", 7000, 0);
			GivePlayerCash(playerid, -5, "peaje");
			GameTextForPlayer(playerid,"~w~Insanity Roleplay ~g~Te da la bienvenida a los Santos",3000,5);
			PlayerPlaySound(playerid, 1057, 0.0, 0.0, 0.0);
			return 1;
		}
		SendClientMessage(playerid,COLOR_WHITE,"No tienes suficiente dinero.");
	}
	else if (IsPlayerInRangeOfPoint(playerid,15.0,37.75, -1525.50, 4.94))
	{
		if (GetPlayerCash(playerid) > 5)
		{
			MoveDynamicObject(peaje1,35.2573, -1516.9640, 0.9605, 2.0);
			SetTimer("GateClosepeaje1", 7000, 0);
			GivePlayerCash(playerid, -5, "peaje");
			GameTextForPlayer(playerid,"~w~Insanity Roleplay ~g~Te da la bienvenida a San Fierro",3000,5);
			PlayerPlaySound(playerid, 1057, 0.0, 0.0, 0.0);
			return 1;
		}
		SendClientMessage(playerid,COLOR_WHITE,"No tienes suficiente dinero");
	}
	return 1;
}

CMD:dpr(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	new playerid2, pdr, string[128], razon[32];
	if (sscanf(params, "dds[32]", playerid2, pdr, razon)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /dpr (PlayerID) (Cantidad) (Razón)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Jugador no conectado.");
	InfoPersonaje[playerid2][pPDR] += pdr;
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) dió %d puntos de rol a %s(%d).", InfoCuenta[playerid][jApodo], playerid, pdr, NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, string);
	format(string, sizeof string, "%s(%d) te ha otorgado %d puntos de rol. Razón: %s.", InfoCuenta[playerid][jApodo], playerid, pdr, razon);
	SendClientMessage(playerid2, COLOR_WHITE, string);
	//guardar_int_mysql("personajes", "PDR", InfoPersonaje[playerid2][jID], InfoPersonaje[playerid2][jPDR]);
	return 1;
}
CMD:darpuntosderol(playerid, params[]) return cmd_dpr(playerid, params);
CMD:darpuntosrol(playerid, params[]) return cmd_dpr(playerid, params);
CMD:darpuntorol(playerid, params[]) return cmd_dpr(playerid, params);

CMD:qpr(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	new playerid2, pdr, string[128], razon[32];
	if (sscanf(params, "dds[32]", playerid2, pdr, razon)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /qpr (PlayerID) (Cantidad) (Razón)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Jugador no conectado.");
	if (InfoPersonaje[playerid2][pPDR] < pdr) return SendClientMessage(playerid, COLOR_WHITE, "El jugador no tiene tantos puntos de rol.");
	InfoPersonaje[playerid2][pPDR] -= pdr;
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) quitó %d puntos de rol a %s(%d).", InfoCuenta[playerid][jApodo], playerid, pdr, NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, string);
	format(string, sizeof string, "%s(%d) te ha quitado %d puntos de rol. Razón: %s.", InfoCuenta[playerid][jApodo], playerid, pdr, razon);
	SendClientMessage(playerid2, COLOR_WHITE, string);
	//guardar_int_mysql("personajes", "PDR", InfoPersonaje[playerid2][jID], InfoPersonaje[playerid2][jPDR]);
	return 1;
}
CMD:quitarpuntosderol(playerid, params[]) return cmd_qpr(playerid, params);
CMD:quitarpuntosrol(playerid, params[]) return cmd_qpr(playerid, params);
CMD:quitarpuntorol(playerid, params[]) return cmd_qpr(playerid, params);

CMD:darcoinsvip(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	new playerid2, coinsvip, string[256];
	if (sscanf(params, "dd", playerid2, coinsvip)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /darcoins (PlayerID) (Cantidad)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Jugador no conectado.");
	InfoCuenta[playerid2][jCoinsVIP] += coinsvip;
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) dió %d coinsVIP a %s(%d).", InfoCuenta[playerid][jApodo], playerid, coinsvip, NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, string);
	guardar_int_mysql("cuentas", "CoinsVIP", InfoCuenta[playerid2][jID], InfoCuenta[playerid2][jCoinsVIP]);
	return 1;
}

CMD:quitarcoinsvip(playerid, params[])
{
	if (CheckAdminCMD(playerid, 6)) return 1;
	new playerid2, coinsvip, string[256];
	if (sscanf(params, "dd", playerid2, coinsvip)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /quitarcoinsvip (PlayerID) (Cantidad)");
	if (!IsPlayerConnectedEx(playerid2)) return SendClientMessage(playerid, COLOR_WHITE, "Jugador no conectado.");
	InfoCuenta[playerid2][jCoinsVIP] -= coinsvip;
	format(string, sizeof string, "Administración:{FFFFFF} %s(%d) quitó %d coinsVIP a %s(%d).", InfoCuenta[playerid][jApodo], playerid, coinsvip, NombreOriginal(playerid2), playerid2);
	SendAdminMessage(0xFF6347FF, string);
	guardar_int_mysql("cuentas", "CoinsVIP", InfoCuenta[playerid2][jID], InfoCuenta[playerid2][jCoinsVIP]);
	return 1;
}

CMD:qfaccoff(playerid, params[])
{
	if (InfoCuenta[playerid][jEncFac] == 0) return SendClientMessage(playerid, COLOR_WHITE, "No autorizado");
	new string[256];
	if (isnull(params)) return SendClientMessage(playerid, COLOR_GREEN, "Utiliza: /qfaccoff (Nombre_Apellido)");
	if (VerificarPersonaje(params))
	{
		mysql_format(DBInsanity, string, sizeof string, "UPDATE personajes SET LiderFaccion = 0, MiembroFaccion = 0, Rango = 0 WHERE Nombre_Apellido = '%e'", params);
		mysql_tquery(DBInsanity, string);
		format(string, sizeof string, "Administración:{FFFFFF} %s(%d) sacó variables de facción %s. (OFFLINE)", InfoCuenta[playerid][jApodo], playerid, params);
		SendAdminMessage(0xFF6347FF, string);
		Log("LOGS/admin.log", string);
		return 1;
	}
	SendClientMessage(playerid, COLOR_GRAD1, "Esa cuenta no existe");
	return 1;
}
CMD:quitarfaccionoff(playerid, params[]) return cmd_qfaccoff(playerid, params);

CMD:creditos(playerid)
{
	SendClientMessage(playerid, 0x00DC00FF, "Créditos Gamemode Utilizada");
	SendClientMessage(playerid, 0x00AE57FF, "Pablo Prieto{EBEBEB} y {00AE57}Elias Moss");
	SendClientMessage(playerid, 0x00DC00FF, "Propietarios y Créditos Actuales");
	SendClientMessage(playerid, 0x00AE57FF, "Axys{EBEBEB}, {00AE57}Artic{EBEBEB}");
	SendClientMessage(playerid, 0x00AE57FF, "Thiscott — Loboking (Agradecimientos)");
	SendClientMessage(playerid, 0xEBEBEBFF, "Bases del gamemode: {00AE57}The GodFather Roleplay{EBEBEB},{00AE57} ZenonCity Roleplay{EBEBEB},{00AE57} NS:RP & AC:RP");
	return 1;
}

CMD:animaciones(playerid)
{
	SendClientMessage(playerid, COLOR_GREEN,"_________________________________________________________________________________");
	SendClientMessage(playerid,COLOR_WHITE,"Animaciones:");
	SendClientMessage(playerid,COLOR_WHITE,"/poli /rendirse /sentarse /sinaliento /asiento /bailar /rap /cruzar /ped /jiggy /rap /paja /depie");
	SendClientMessage(playerid,COLOR_WHITE,"/gesto /fumando /sexo /orinar /chora /relax /crabs /saludo[2] /stop /lavarse /llorar /apoyarse /dedo");
	SendClientMessage(playerid,COLOR_WHITE,"/sigueme /saludo /quieto /enganche /palmaputa /cpr /darregalo /palmada /borracho /correr");
	SendClientMessage(playerid,COLOR_WHITE,"/arobar /reir /lookout /amenazar /esconder /vomitar /comer /crack /jodete /taichi /beso /mecanico");
	SendClientMessage(playerid,COLOR_WHITE,"/agredido /herido /dormir /rodar /fokear /agonizar /hablando /animar /gritar /apuntar");
	SendClientMessage(playerid, COLOR_GREEN,"_________________________________________________________________________________");
	return 1;
}
CMD:acciones(playerid) return cmd_animaciones(playerid);

CMD:revisarcasa(playerid)
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	if (InfoPersonaje[playerid][pRango] < 2) return SendClientMessage(playerid, COLOR_GREY, "[AVISO] Sólo agentes con rango 2 o mayor podrán usar este comando.");
	new h = -1;
	Loop(casa, totalcasas, 1) if (IsPlayerInRangeOfPoint(playerid, 30.0, InfoCasa[casa][cInteriorX], InfoCasa[casa][cInteriorY], InfoCasa[casa][cInteriorZ]) && InfoPersonaje[playerid][pInterior] == InfoCasa[casa][cInteriorInt] && InfoPersonaje[playerid][pVirtualWorld] == InfoCasa[casa][cInteriorVW])
	{
		h = casa;
		break;
	}
	if (h == -1) return SendClientMessage(playerid, COLOR_GREY, "No estás en el interior de ninguna casa.");
	meuwu(playerid, "empieza a revisar la casa para obtener información.");
	new string[265], count = 0;
	format(string, sizeof string, "[Información conocida] Casa comprada por %s, valorada en %s dólares.", InfoCasa[h][cPropietario], diner_coma(InfoCasa[h][cPrecio]));
	SendClientMessage(playerid, COLOR_GREEN, string);
	SendClientMessage(playerid, COLOR_RED, "Usted ha revisado la casa, esto es lo que ha encontrado:");
	if (InfoCasa[h][cMateriales] >= 1) // Materiales.
	{
		format(string, sizeof string, "[MATERIALES]{FAAC58} Se han encontrado materiales en la casa, la cantidad total es de %d.", InfoCasa[h][cMateriales]);
		SendClientMessage(playerid, COLOR_ORANGE, string);
		count++;
	}
	Loop(s, 10, 0) if (InfoCasa[h][cArmario][s] != 0)
	{
		format(string, sizeof string, "Slot %d: %s", s+1, slot_objeto(InfoCasa[h][cArmario][s], InfoCasa[h][cArmarioCant][s]));
		SendClientMessage(playerid, COLOR_WHITE, string);
		count++;
	}
	if (count == 0) SendClientMessage(playerid, COLOR_WHITE, "No hay nada en la casa.");
	return 1;
}

CMD:incautar(playerid, params[])
{
	if (!member_faccion(playerid, 1, 2, 3, 4)) return SendClientMessage(playerid, COLOR_GREY, "Sólo miembros de la ley policial.");
	if (InfoPersonaje[playerid][pRango] < 4) return SendClientMessage(playerid, COLOR_GREY, "[AVISO] Sólo agentes con rango 4 o mayor podrán usar este comando.");
	new item[12], string[230];
	if (sscanf(params, "s[12]", item)) return SendClientMessage(playerid, COLOR_GRAD2, "Utiliza: /incautar [Opción: materiales, armario]. (Realizar cerca de la salida)");
	new h = -1;
	Loop(casa, totalcasas, 1) if (IsPlayerInRangeOfPoint(playerid, 30.0, InfoCasa[casa][cInteriorX], InfoCasa[casa][cInteriorY], InfoCasa[casa][cInteriorZ]) && InfoPersonaje[playerid][pInterior] == InfoCasa[casa][cInteriorInt] && InfoPersonaje[playerid][pVirtualWorld] == InfoCasa[casa][cInteriorVW])
	{
		h = casa;
		break;
	}
	if (h == -1) return SendClientMessage(playerid, COLOR_GREY, "No estás en el interior de ninguna casa.");
	if (strcmp(item, "materiales", true) == 0)
	{
		if (InfoCasa[h][cMateriales] == 0) return SendClientMessage(playerid, COLOR_GREY, "[ERROR] No hay materiales que incautar dentro de la casa.");
		format(string, sizeof string, "[CENTRAL] %s ha incautado un total de %d materiales.",NombreJugador(playerid), InfoCasa[h][cMateriales]);
		SendRadioMessage(InfoPersonaje[playerid][pMiembro], COLOR_RADIO, string);
		InfoCasa[h][cMateriales] = 0;
		guardar_int_mysql("casas", "Materiales", InfoCasa[h][cID_sql], InfoCasa[h][cMateriales]);
	}
	else if (strcmp(item, "armario", true) == 0)
	{
		format(string, sizeof string, "[CENTRAL] %s ha incautado el armario de %s.",NombreJugador(playerid), InfoCasa[h][cPropietario]);
		SendRadioMessage(InfoPersonaje[playerid][pMiembro], COLOR_RADIO, string);
		Loop(s, 10, 0)
		{
			InfoCasa[h][cArmario][s] = 0;
			InfoCasa[h][cArmarioCant][s] = 0;
			format(string, sizeof string, "Armario%d", s+1); guardar_int_mysql("casas", string, InfoCasa[h][cID_sql], 0);
			format(string, sizeof string, "ArmarioCant%d", s+1); guardar_int_mysql("casas", string, InfoCasa[h][cID_sql], 0);
		}
	}
	else
	{
		SendClientMessage(playerid, COLOR_GREY,"[ERROR] Opciones disponibles en uso: materiales, y armario.");
	}
	return 1;
}

//fin comandos

//Velocimetro system
new uwu_color_veh[MAX_VEHICLES];

hide_velocimetro(playerid)
{
	show_velocimetro[playerid] = 0;
	Loop(x, 3, 0) { TextDrawHideForPlayer(playerid, velocimetro_nice[x]); }
	Loop(x, 4, 0) { PlayerTextDrawHide(playerid, velocimetro_pice[playerid][x]); }
	Loop(x, 3, 0) { PlayerTextDrawHide(playerid, TD_Velocimetro[playerid][x]); }
	HidePlayerProgressBar(playerid, velocimetro_bar[playerid]);
	return 1;
}

new VehicleColoursTableRGBA[256] =
{
	// The existing colours from San Andreas
	0xc0c0c0FF, 0xF5F5F5FF, 0x2A77A1FF, 0x840410FF, 0x263739FF, 0x86446EFF, 0xD78E10FF, 0x4C75B7FF, 0xBDBEC6FF, 0x5E7072FF,
	0x46597AFF, 0x656A79FF, 0x5D7E8DFF, 0x58595AFF, 0xD6DAD6FF, 0x9CA1A3FF, 0x335F3FFF, 0x730E1AFF, 0x7B0A2AFF, 0x9F9D94FF,
	0x3B4E78FF, 0x732E3EFF, 0x691E3BFF, 0x96918CFF, 0x515459FF, 0x3F3E45FF, 0xA5A9A7FF, 0x635C5AFF, 0x3D4A68FF, 0x979592FF,
	0x421F21FF, 0x5F272BFF, 0x8494ABFF, 0x767B7CFF, 0x646464FF, 0x5A5752FF, 0x252527FF, 0x2D3A35FF, 0x93A396FF, 0x6D7A88FF,
	0x221918FF, 0x6F675FFF, 0x7C1C2AFF, 0x5F0A15FF, 0x193826FF, 0x5D1B20FF, 0x9D9872FF, 0x7A7560FF, 0x989586FF, 0xADB0B0FF,
	0x848988FF, 0x304F45FF, 0x4D6268FF, 0x162248FF, 0x272F4BFF, 0x7D6256FF, 0x9EA4ABFF, 0x9C8D71FF, 0x6D1822FF, 0x4E6881FF,
	0x9C9C98FF, 0x917347FF, 0x661C26FF, 0x949D9FFF, 0xA4A7A5FF, 0x8E8C46FF, 0x341A1EFF, 0x6A7A8CFF, 0xAAAD8EFF, 0xAB988FFF,
	0x851F2EFF, 0x6F8297FF, 0x585853FF, 0x9AA790FF, 0x601A23FF, 0x20202CFF, 0xA4A096FF, 0xAA9D84FF, 0x78222BFF, 0x0E316DFF,
	0x722A3FFF, 0x7B715EFF, 0x741D28FF, 0x1E2E32FF, 0x4D322FFF, 0x7C1B44FF, 0x2E5B20FF, 0x395A83FF, 0x6D2837FF, 0xA7A28FFF,
	0xAFB1B1FF, 0x364155FF, 0x6D6C6EFF, 0x0F6A89FF, 0x204B6BFF, 0x2B3E57FF, 0x9B9F9DFF, 0x6C8495FF, 0x4D8495FF, 0xAE9B7FFF,
	0x406C8FFF, 0x1F253BFF, 0xAB9276FF, 0x134573FF, 0x96816CFF, 0x64686AFF, 0x105082FF, 0xA19983FF, 0x385694FF, 0x525661FF,
	0x7F6956FF, 0x8C929AFF, 0x596E87FF, 0x473532FF, 0x44624FFF, 0x730A27FF, 0x223457FF, 0x640D1BFF, 0xA3ADC6FF, 0x695853FF,
	0x9B8B80FF, 0x620B1CFF, 0x5B5D5EFF, 0x624428FF, 0x731827FF, 0x1B376DFF, 0xEC6AAEFF, 0x000000FF,
	// SA-MP extended colours (0.3x)
	0x177517FF, 0x210606FF, 0x125478FF, 0x452A0DFF, 0x571E1EFF, 0x010701FF, 0x25225AFF, 0x2C89AAFF, 0x8A4DBDFF, 0x35963AFF,
	0xB7B7B7FF, 0x464C8DFF, 0x84888CFF, 0x817867FF, 0x817A26FF, 0x6A506FFF, 0x583E6FFF, 0x8CB972FF, 0x824F78FF, 0x6D276AFF,
	0x1E1D13FF, 0x1E1306FF, 0x1F2518FF, 0x2C4531FF, 0x1E4C99FF, 0x2E5F43FF, 0x1E9948FF, 0x1E9999FF, 0x999976FF, 0x7C8499FF,
	0x992E1EFF, 0x2C1E08FF, 0x142407FF, 0x993E4DFF, 0x1E4C99FF, 0x198181FF, 0x1A292AFF, 0x16616FFF, 0x1B6687FF, 0x6C3F99FF,
	0x481A0EFF, 0x7A7399FF, 0x746D99FF, 0x53387EFF, 0x222407FF, 0x3E190CFF, 0x46210EFF, 0x991E1EFF, 0x8D4C8DFF, 0x805B80FF,
	0x7B3E7EFF, 0x3C1737FF, 0x733517FF, 0x781818FF, 0x83341AFF, 0x8E2F1CFF, 0x7E3E53FF, 0x7C6D7CFF, 0x020C02FF, 0x072407FF,
	0x163012FF, 0x16301BFF, 0x642B4FFF, 0x368452FF, 0x999590FF, 0x818D96FF, 0x99991EFF, 0x7F994CFF, 0x839292FF, 0x788222FF,
	0x2B3C99FF, 0x3A3A0BFF, 0x8A794EFF, 0x0E1F49FF, 0x15371CFF, 0x15273AFF, 0x375775FF, 0x060820FF, 0x071326FF, 0x20394BFF,
	0x2C5089FF, 0x15426CFF, 0x103250FF, 0x241663FF, 0x692015FF, 0x8C8D94FF, 0x516013FF, 0x090F02FF, 0x8C573AFF, 0x52888EFF,
	0x995C52FF, 0x99581EFF, 0x993A63FF, 0x998F4EFF, 0x99311EFF, 0x0D1842FF, 0x521E1EFF, 0x42420DFF, 0x4C991EFF, 0x082A1DFF,
	0x96821DFF, 0x197F19FF, 0x3B141FFF, 0x745217FF, 0x893F8DFF, 0x7E1A6CFF, 0x0B370BFF, 0x27450DFF, 0x071F24FF, 0x784573FF,
	0x8A653AFF, 0x732617FF, 0x319490FF, 0x56941DFF, 0x59163DFF, 0x1B8A2FFF, 0x38160BFF, 0x041804FF, 0x355D8EFF, 0x2E3F5BFF,
	0x561A28FF, 0x4E0E27FF, 0x706C67FF, 0x3B3E42FF, 0x2E2D33FF, 0x7B7E7DFF, 0x4A4442FF, 0x28344EFF
};

mostrar_velocimetro(playerid, vehicleid)
{
	if (InfoPersonaje[playerid][pTogVelocimetro] == 0) return 1;
	if (vehicleid == 0) return 1;
	//actived
	show_velocimetro[playerid] = 1;
	//new's
	new colorsito = 1, id = verificar_id_vehiculo(vehicleid);
	if (id != -1) colorsito = InfoVehiculo[id][vColor_1];
	new vehcolor = VehicleColoursTableRGBA[colorsito];
	uwu_color_veh[vehicleid] = colorsito;
	new gvel[256], Float:vehvida;
	//box principal
	if (!EstaEnBicis(vehicleid)) TextDrawShowForPlayer(playerid, velocimetro_nice[0]);
	else TextDrawShowForPlayer(playerid, velocimetro_nice[1]);
	//km/h
	TextDrawShowForPlayer(playerid, velocimetro_nice[2]);
	format(gvel, sizeof gvel, "~w~~h~~h~%03d", floatround(GetVehicleSpeed(vehicleid)));
	PlayerTextDrawSetStringEx(playerid, velocimetro_pice[playerid][0], gvel);
	PlayerTextDrawShow(playerid, velocimetro_pice[playerid][0]);
	//modelo
	PlayerTextDrawColor(playerid, velocimetro_pice[playerid][1], vehcolor);
	PlayerTextDrawSetStringEx(playerid, velocimetro_pice[playerid][1], Veh_Textdraw(GetVehicleName(vehicleid)));
	PlayerTextDrawShow(playerid, velocimetro_pice[playerid][1]);
	if (!EstaEnBicis(vehicleid))
	{
		//gasolina
		PlayerTextDrawColor(playerid, velocimetro_pice[playerid][2], vehcolor);
		format(gvel, sizeof gvel, "Gas:_~w~~h~~h~%d", veh_gasolina[vehicleid]);
		PlayerTextDrawSetStringEx(playerid, velocimetro_pice[playerid][2], gvel);
		PlayerTextDrawShow(playerid, velocimetro_pice[playerid][2]);
		//vida-hp
		GetVehicleHealth(vehicleid, vehvida);
		//bar
		SetPlayerProgressBarColor(playerid, velocimetro_bar[playerid], vehcolor);
		SetPlayerProgressBarValue(playerid, velocimetro_bar[playerid], vehvida);
		ShowPlayerProgressBar(playerid, velocimetro_bar[playerid]);
		//text
		format(gvel, sizeof gvel, "~w~~h~~h~HP:_%d", floatround(vehvida));
		PlayerTextDrawSetStringEx(playerid, velocimetro_pice[playerid][3], gvel);
		PlayerTextDrawShow(playerid, velocimetro_pice[playerid][3]);
	}
	return 1;
}

update_velocimetro(playerid, vehicleid)
{
	if (vehicleid != 0)
	{
		//new's
		new colorsito = 1, id = verificar_id_vehiculo(vehicleid);
		if (id != -1) colorsito = InfoVehiculo[id][vColor_1];
		new vehcolor = VehicleColoursTableRGBA[colorsito];
		new gvel[256];
		new Float: vehvida;
		//km/h
		format(gvel, sizeof gvel, "~w~~h~~h~%03d", floatround(GetVehicleSpeed(vehicleid)));
		PlayerTextDrawSetStringEx(playerid, velocimetro_pice[playerid][0], gvel);
		//modelo
		if (uwu_color_veh[vehicleid] != colorsito)
		{
			PlayerTextDrawColor(playerid, velocimetro_pice[playerid][1], vehcolor);
			PlayerTextDrawHide(playerid, velocimetro_pice[playerid][1]);
			PlayerTextDrawShow(playerid, velocimetro_pice[playerid][1]);
		}
		if (!EstaEnBicis(vehicleid))
		{
			//gasolina
			if (uwu_color_veh[vehicleid] != colorsito)
			{
				PlayerTextDrawHide(playerid, velocimetro_pice[playerid][2]);
				PlayerTextDrawColor(playerid, velocimetro_pice[playerid][2], vehcolor);
				format(gvel, sizeof gvel, "Gas:_~w~~h~~h~%d", veh_gasolina[vehicleid]);
				PlayerTextDrawSetStringEx(playerid, velocimetro_pice[playerid][2], gvel);
				PlayerTextDrawShow(playerid, velocimetro_pice[playerid][2]);
			}
			else
			{
				format(gvel, sizeof gvel, "Gas:_~w~~h~~h~%d", veh_gasolina[vehicleid]);
				PlayerTextDrawSetStringEx(playerid, velocimetro_pice[playerid][2], gvel);
			}
			//vida-hp
			GetVehicleHealth(vehicleid, vehvida);
			//bar
			SetPlayerProgressBarColor(playerid, velocimetro_bar[playerid], vehcolor);
			SetPlayerProgressBarValue(playerid, velocimetro_bar[playerid], vehvida);
			UpdatePlayerProgressBar(playerid, velocimetro_bar[playerid]);
			//text
			format(gvel, sizeof gvel, "~w~~h~~h~HP:_%d", floatround(vehvida));
			PlayerTextDrawSetStringEx(playerid, velocimetro_pice[playerid][3], gvel);
		}
	}
}

Veh_Textdraw(gformat[])
{
	new N[128];
	strmid(N, gformat, 0, strlen(gformat), 128);
	Loop(x, 128, 0) { if (N[x] == ' ') N[x] = '_'; }
	return N;
}

public OnPlayerClickTextDraw(playerid, Text:clickedid)
{
	if (Text:INVALID_TEXT_DRAW==clickedid)
	{
		if (CompraVehiculo[playerid] != -1)
		{
			hide_comprarvehiculo(playerid);
			CancelSelectTextDraw(playerid);
			CompraVehiculo[playerid] = -1;
			return 1;
		}
	}
	if (clickedid == CocheVS[1]) //regresar
	{
		hide_comprarvehiculo(playerid);
		CancelSelectTextDraw(playerid);
		CompraVehiculo[playerid] = -1;
		cmd_comprar(playerid);
	}
	if (clickedid == CocheVS[2]) //comprar
	{
		hide_comprarvehiculo(playerid);
		if (CompraVehiculo[playerid] == -1)
		{
			CancelSelectTextDraw(playerid);
			CompraVehiculo[playerid] = -1;
			return SendClientMessage(playerid, -1, "No has ingresado ningún modelo.");
		}
		new id = CompraVehiculo[playerid];
		new modelo = infovehicle[id][elModelo];
		new precio = infovehicle[id][elPrecio];
		if (GetPlayerCash(playerid) < precio)
		{
			CancelSelectTextDraw(playerid);
			CompraVehiculo[playerid] = -1;
			return SendClientMessage(playerid, -1, "¡No tienes suficiente dinero!");
		}
		GivePlayerCash(playerid, -precio, "comprar vehiculo");
		CobroNegocio(id_negocio[playerid], precio/3);
		new Float:PX, Float:PY, Float:PZ, Float:Angulo;
		if (vehiculo_avion(modelo))
		{
			PX = 1948.0747;
			PY = -2492.8047;
			PZ = 24.6460;
			Angulo = 90.0000;
		}
		else if (vehiculo_bote(modelo))
		{
			PX = 2933.2100; PY = -1070.8807; PZ = 10.0364; Angulo = 180.0000;
		}
		else
		{
			PX = InfoNegocio[id_negocio[playerid]][nVehicleX];
			PY = InfoNegocio[id_negocio[playerid]][nVehicleY];
			PZ = InfoNegocio[id_negocio[playerid]][nVehicleZ];
			Angulo = InfoNegocio[id_negocio[playerid]][nVehicleR];
		}
		new color1 = random(250), color2 = random(250);
		SetPlayerInterior(playerid, 0);
		SetPlayerVirtualWorld(playerid, 0);
		crear_vehiculo(playerid, modelo, PX, PY, PZ, Angulo, 0, 0, color1, color2, precio, infovehicle[id][elMaxMaletero], 0, -1);
		CancelSelectTextDraw(playerid);
		CompraVehiculo[playerid] = -1;
		new gformat[256];
		format(gformat, sizeof gformat, "Compraste un nuevo vehículo por $%s.", diner_coma(precio));
		SendClientMessage(playerid, 0x00a2ffff, gformat);
	}
	return 1;
}

funcion FishCost(playerid, fish){
	if(IsPlayerConnected(playerid)){
		new cost = 0;
		switch (fish){
			case 1: cost = 3;
			case 2: cost = 4;
			case 3: cost = 6;
			case 5: cost = 7;
			case 6: cost = 4;
			case 8: cost = 10;
			case 9: cost = 14;
			case 11: cost = 12;
			case 12: cost = 9;
			case 14: cost = 14;
			case 15: cost = 10;
			case 16: cost = 9;
			case 17: cost = 8;
			case 18: cost = 11;
			case 19: cost = 5;
			case 21: cost = 4;
		}
		return cost;
	}
	return 0;
}

funcion ClearFishID(playerid, fish){
	if(IsPlayerConnected(playerid)){
		new string[MAX_PLAYER_NAME];
		format(string, sizeof string, "Nada");
		switch (fish){
			case 1:{
				strmid(Fishes[playerid][pFish1], string, 0, strlen(string), 255);
				Fishes[playerid][pWeight1] = 0;
				Fishes[playerid][pFid1] = 0;
			}
			case 2:{
				strmid(Fishes[playerid][pFish2], string, 0, strlen(string), 255);
				Fishes[playerid][pWeight2] = 0;
				Fishes[playerid][pFid2] = 0;
			}
			case 3:{
				strmid(Fishes[playerid][pFish3], string, 0, strlen(string), 255);
				Fishes[playerid][pWeight3] = 0;
				Fishes[playerid][pFid3] = 0;
			}
			case 4:{
				strmid(Fishes[playerid][pFish4], string, 0, strlen(string), 255);
				Fishes[playerid][pWeight4] = 0;
				Fishes[playerid][pFid4] = 0;
			}
			case 5:{
				strmid(Fishes[playerid][pFish5], string, 0, strlen(string), 255);
				Fishes[playerid][pWeight5] = 0;
				Fishes[playerid][pFid5] = 0;
			}
		}
	}
	return 1;
}

stock ConvertTime(cts, &ctm=-1,&cth=-1,&ctd=-1,&ctw=-1,&ctmo=-1,&cty=-1){

    #define PLUR(%0,%1,%2) (%0),((%0) == 1)?((#%1)):((#%2))
    #define CTM_cty 31536000 // 1 Year ._.
    #define CTM_ctmo 2628000 // 1 Mes, 2628000 segundos.
    #define CTM_ctw 604800 // 1 Semana, 604800 segundos.
    #define CTM_ctd 86400  // 1 DIA, 86400 segundos.
    #define CTM_cth 3600 // 1H, 3600 segundos.
    #define CTM_ctm 60 // 1 MIN, 60 segundos.
    #define CT(%0) %0 = cts / CTM_%0; cts %= CTM_%0


    new strii[128];

    if(cty != -1){
        CT(cty); CT(ctmo); CT(ctw); CT(ctd); CT(cth); CT(ctm);
        format(strii, sizeof(strii), "%d %s, %d %s, %d %s, %d %s, %d %s, %d %s, and %d %s",PLUR(cty,"year","years"),PLUR(ctmo,"month","months"),PLUR(ctw,"week","weeks"),PLUR(ctd,"day","days"),PLUR(cth,"hour","hours"),PLUR(ctm,"minute","minutes"),PLUR(cts,"second","seconds"));
        return strii;
    }
    if(ctmo != -1){
        CT(ctmo); CT(ctw); CT(ctd); CT(cth); CT(ctm);
        format(strii, sizeof(strii), "%d %s, %d %s, %d %s, %d %s, %d %s, and %d %s",PLUR(ctmo,"month","months"),PLUR(ctw,"week","weeks"),PLUR(ctd,"day","days"),PLUR(cth,"hour","hours"),PLUR(ctm,"minute","minutes"),PLUR(cts,"second","seconds"));
        return strii;
    }
    if(ctw != -1){
        CT(ctw); CT(ctd); CT(cth); CT(ctm);
        format(strii, sizeof(strii), "%d %s, %d %s, %d %s, %d %s, and %d %s",PLUR(ctw,"week","weeks"),PLUR(ctd,"day","days"),PLUR(cth,"hour","hours"),PLUR(ctm,"minute","minutes"),PLUR(cts,"second","seconds"));
        return strii;
    }
    if(ctd != -1){
        CT(ctd); CT(cth); CT(ctm);
        format(strii, sizeof(strii), "%d %s, %d %s, %d %s, and %d %s",PLUR(ctd,"day","days"),PLUR(cth,"hour","hours"),PLUR(ctm,"minute","minutes"),PLUR(cts,"second","seconds"));
        return strii;
    }
    if(cth != -1){
        CT(cth); CT(ctm);
        format(strii, sizeof(strii), "%d %s, %d %s, and %d %s",PLUR(cth,"hour","hours"),PLUR(ctm,"minute","minutes"),PLUR(cts,"second","seconds"));
        return strii;
    }
    if(ctm != -1){
        CT(ctm);
        format(strii, sizeof(strii), "%d %s, and %d %s",PLUR(ctm,"minute","minutes"),PLUR(cts,"second","seconds"));
        return strii;
    }
    format(strii, sizeof(strii), "%d %s", PLUR(cts,"second","seconds"));
    return strii;
}

stock GiftPlayer(playerid)
{
		new string[256];
		new gift = Random(1, 14);
		switch(gift)
		{
		    case 1:
		    {
    	 		if (InfoPersonaje[playerid][pHorasOn] < 2) return GiftPlayer(playerid);
				if (PlayerWeapon(playerid, 22) == 0) return GiftPlayer(playerid);

	        	SendClientMessage(playerid, -1, " Felicidades, ahora tienes una 9mm!");
	        	format(string, sizeof string, "* A %s le regalaron una 9mm cargada, que lo disfrute!", NombreOriginal(playerid));
				ProxDetector(30.0, playerid, string, COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW);
				Log("LOGS/regalos.log", string);
		    }
		    case 2:
		    {
    			GivePlayerCash(playerid, 1000, "regalo");
	        	SendClientMessage(playerid, -1, "  Felicidades, has ganado $1,000!");
	        	format(string, sizeof string, "* A %s le regalaron $1,000 que lo disfrute!", NombreOriginal(playerid));
				ProxDetector(30.0, playerid, string, COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW);
				Log("LOGS/regalos.log", string);
		    }
		    case 3:
		    {
	        	InfoPersonaje[playerid][pMateriales] += 500;
				guardar_int_mysql("personajes", "Materiales", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pMateriales]);
	        	SendClientMessage(playerid, -1, " Felicidades, ahora tienes 500 materiales!");
	        	format(string, sizeof string, "* A %s le regalaron 500 materiales, que lo disfrute!", NombreOriginal(playerid));
				ProxDetector(30.0, playerid, string, COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW);
				Log("LOGS/regalos.log", string);
		    }
		    case 4:
		    {
				return GiftPlayer(playerid);
		    }
      		case 5:
		    {
				format(string, sizeof string, "* A %s le regalaron una bolsita del doctor chapatín XDXDXDXDXDD.", NombreOriginal(playerid));
				ProxDetector(30.0, playerid, string, COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW);
				Log("LOGS/regalos.log", string);
		    }
		    case 6:
		    {
	        	GivePlayerCash(playerid, 2000, "regalo");
				SendClientMessage(playerid, -1, " Felicidades, ganaste $2,000!");
				format(string, sizeof string, "* A %s le regalaron $2,000 en efectivo, que lo disfrute!", NombreOriginal(playerid));
				ProxDetector(30.0, playerid, string, COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW);
				Log("LOGS/regalos.log", string);
		    }
		    case 7:
		    {
	        	GivePlayerCash(playerid, 2500, "regalo");
				SendClientMessage(playerid, -1, "  Felicidades, has ganado $2,500!");
				format(string, sizeof string, "* A %s le regalaron $2,500 en efectivo, que lo disfrute!", NombreOriginal(playerid));
				ProxDetector(30.0, playerid, string, COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW);
				Log("LOGS/regalos.log", string);
		    }
		    case 8:
		    {
	        	GivePlayerCash(playerid, 4000, "regalo");
				SendClientMessage(playerid, -1, "  Felicidades, has ganado $4,000!");
				format(string, sizeof string, "* A %s le regalaron $40,00 en efectivo, que lo disfrute!", NombreOriginal(playerid));
				ProxDetector(30.0, playerid, string, COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW);
				Log("LOGS/regalos.log", string);
		    }
		    case 9:
		    {
		    	GivePlayerCash(playerid, 500, "regalo");
				SendClientMessage(playerid, -1, " Felicidades - has ganado $500!");
				format(string, sizeof string, "* A %s le regalaron $500 en efectivo, que lo disfrute!", NombreOriginal(playerid));
				ProxDetector(30.0, playerid, string, COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW);
				Log("LOGS/regalos.log", string);
		    }
		    case 10:
		    {
		    	InfoPersonaje[playerid][pMateriales] += 1500;
				guardar_int_mysql("personajes", "Materiales", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pMateriales]);
				SendClientMessage(playerid, -1, " Felicidades - Has ganado 1500 materiales!");
				format(string, sizeof string, "* A %s le regalaron 1500 materiales, que lo disfrute!", NombreOriginal(playerid));
				ProxDetector(30.0, playerid, string, COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW);
				Log("LOGS/regalos.log", string);
		    }
		    case 11:
		    {
			    InfoPersonaje[playerid][pExperiencia] += 3;
				guardar_int_mysql("personajes", "Experiencia", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pExperiencia]);
				SendClientMessage(playerid, -1, " Felicidades - has ganado 3 puntos de experiencia!");
				format(string, sizeof string, "* A %s le regalaron 3 puntos de experiencia, que lo disfrute!", NombreOriginal(playerid));
				ProxDetector(30.0, playerid, string, COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW);
				Log("LOGS/regalos.log", string);
		    }
		    case 12:
		    {
			    InfoPersonaje[playerid][pExperiencia] += 2;
				guardar_int_mysql("personajes", "Experiencia", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pExperiencia]);
				SendClientMessage(playerid, -1, " Felicidades - has ganado 2 puntos de experiencia!");
				format(string, sizeof string, "* A %s le regalaron 2 puntos de experiencia, que lo disfrute!", NombreOriginal(playerid));
				ProxDetector(30.0, playerid, string, COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW);
				Log("LOGS/regalos.log", string);
		    }
		    case 13:
		    {
				InfoPersonaje[playerid][pExperiencia] += 5;
				guardar_int_mysql("personajes", "Experiencia", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pExperiencia]);
				SendClientMessage(playerid, -1, " Felicidades - has ganado 5 puntos de experiencia!");
				format(string, sizeof string, "* A %s le regalaron 5 puntos de experiencia, que lo disfrute!", NombreOriginal(playerid));
				ProxDetector(30.0, playerid, string, COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW);
				Log("LOGS/regalos.log", string);
		    }
		    case 14:
		    {
	        	GivePlayerCash(playerid, 3500, "regalo");
				SendClientMessage(playerid, -1, "  Felicidades, has ganado $3,500!");
				format(string, sizeof string, "* A %s le regalaron $3,500 en efectivo, que lo disfrute!", NombreOriginal(playerid));
				ProxDetector(30.0, playerid, string, COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW,COLOR_YELLOW);
				Log("LOGS/regalos.log", string);
		    }
		    default: return GiftPlayer(playerid);
		}
	    return 1;
}

public OnPlayerCommandReceived(playerid, cmdtext[])
{
    if (usuario_registro[playerid] != 2)
	{
	    if (mmaguebo_abusadol[playerid] == 3)
	    {
			SendClientMessage(playerid, COLOR_GENERAL, "Fuiste expulsado por alto mmaguebo, intentando introducir comandos sin logear.");
			SetTimerEx("TimerKICK", 2000, false, "d", playerid);
			return 0;
	    }
		mmaguebo_abusadol[playerid]++;
		SendClientMessage(playerid, COLOR_GRAD2, "* No puedes utilizar comandos si no estás logeado en el servidor.");
		return 0;
	}
	if (strfind(cmdtext, "|", true) != -1)
	{
	    SendClientMessage(playerid, COLOR_GRAD2, "No puedes usar el carácter '|' en un comando.");
		return 0;
	}
	if (GetPVarInt(playerid, "LoadingObjects") == 1)
	{
	    SendClientMessage(playerid, COLOR_GRAD2, "No puedes usar comandos en este momento.");
	    return 0;
	}
    if (GetPlayerAdmin(playerid, 0) == 0)
	{
		if (strfind(cmdtext, ":", true) != -1)
		{
			new i_numcount, i_period, i_pos;
			while (cmdtext[i_pos])
			{
				if('0' <= cmdtext[i_pos] <= '9') i_numcount++;
				else if(cmdtext[i_pos] == '.') i_period++;
				i_pos++;
			}
			if (i_numcount >= 8 && i_period >= 3)
			{
				new string[260];
				format(string,sizeof string, "[ATENCIÓN] %s(%d) puede estar haciendo SPAM: '%s'", NombreOriginal(playerid), playerid, cmdtext);
				SendAdminMessage(COLOR_YELLOW, string);
				return 0;
			}
		}
	}
    printf("[CMD] [%s]: %s", NombreOriginal(playerid), cmdtext);
    return 1;
}

public OnPlayerCommandPerformed(playerid, cmdtext[], success)
{
    if (!success) SendClientMessage(playerid, 0xEBEBEBFF, "El comando introducido no existe, le recomendamos que use {00AE57}/ayuda{EBEBEB}.");
	return 1;
}

//------------------------------------------------------------------------------------------------------
stock VehicleToPoint(Float:radi, vehicleid, Float:x, Float:y, Float:z)
{
	new Float:oldposx, Float:oldposy, Float:oldposz;
	new Float:tempposx, Float:tempposy, Float:tempposz;
	GetVehiclePos(vehicleid, oldposx, oldposy, oldposz);
	tempposx = (oldposx -x);
	tempposy = (oldposy -y);
	tempposz = (oldposz -z);
	if (((tempposx < radi) && (tempposx > -radi)) && ((tempposy < radi) && (tempposy > -radi)) && ((tempposz < radi) && (tempposz > -radi)))
	{
		return 1;
	}
	return 0;
}

encode_tires(tire1, tire2, tire3, tire4)
{
	return tire1 | (tire2 << 1) | (tire3 << 2) | (tire4 << 3);
}

funcion PlayerToPointStripped(Float:radi, playerid, Float:x, Float:y, Float:z, Float:curx, Float:cury, Float:curz)
{
    if(IsPlayerConnected(playerid))
	{
		new Float:tempposx, Float:tempposy, Float:tempposz;
		tempposx = (curx -x);
		tempposy = (cury -y);
		tempposz = (curz -z);
		if (((tempposx < radi) && (tempposx > -radi)) && ((tempposy < radi) && (tempposy > -radi)) && ((tempposz < radi) && (tempposz > -radi))) return 1;
	}
	return 0;
}

new sdisda_actual[MAX_PLAYERS][128];

public OnPlayerText(playerid, text[])
{
	if (usuario_registro[playerid] != 2) return 0;
	new string[320];
	//sistema de centralita
	if (EnLlamada[playerid] == 911) //inicio
	{
		if (strcmp("pd", text, true) == 0)
		{
			format(string, sizeof string, "%s por teléfono: %s", NombreJugador(playerid), text);
			ProxDetector(8.0, playerid, string, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
			SendClientMessage(playerid, 0xFFF000FF, "[Teléfono: 911]: De acuerdo, le redireccionaremos hacia la centralita policial.");
			SendClientMessage(playerid, 0xA7CE00FF, "Una voz de operadora te saluda. Enseguida te pondrá con alguien.");
			SendClientMessage(playerid, 0xFFF000FF, "[Teléfono: 911]: Policía, ¿dónde es su emergencia?");
			EnLlamada[playerid] = 920;
			Loop(id, 50, 1) if (InfoCentralita[id][c_id] == 0)
			{
				llamadaJugador[playerid] = id;
				break;
			}
			return 0;
		}
		else if (strcmp("sd", text, true) == 0)
		{
			format(string, sizeof string, "%s por teléfono: %s", NombreJugador(playerid), text);
			ProxDetector(8.0, playerid, string, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
			SendClientMessage(playerid, 0xFFF000FF, "[Teléfono: 911]: De acuerdo, le redireccionaremos hacia la centralita sheriff.");
			SendClientMessage(playerid, 0xA7CE00FF, "Una voz de operadora te saluda. Enseguida te pondrá con alguien.");
			SendClientMessage(playerid, 0xFFF000FF, "[Teléfono: 911]: Sheriff, ¿dónde es su emergencia?");
			EnLlamada[playerid] = 930;
			Loop(id, 50, 1) if (InfoCentralita[id][c_id] == 0)
			{
				llamadaJugador[playerid] = id;
				break;
			}
			return 0;
		}
		SendClientMessage(playerid, COLOR_GREY, "* Opción incorrecta, intenta con 'SD' ó 'PD'.");
		return 0;
	}
	else if(EnLlamada[playerid] == 920) //elige pd
	{
		new id = llamadaJugador[playerid];
		format(string, sizeof string, "%s por teléfono: %s", NombreJugador(playerid), text);
		ProxDetector(8.0, playerid, string, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
		if (GetPVarInt(playerid, "en_emergencias") == 0)
		{
			SendClientMessage(playerid, 0xFFF000FF, "[Teléfono: 911]: De acuerdo, ¿cuál es su emergencia? Sea lo más explícito posible, por favor.");
			if(id != -1) alm(InfoCentralita[id][c_lugar], text);
			else alm(sdisda_actual[playerid], text);
			SetPVarInt(playerid, "en_emergencias", 1);
			return 0;
		}
		else if (GetPVarInt(playerid, "en_emergencias") == 1)
		{
			SendClientMessage(playerid, 0xFFF000FF, "[Teléfono: 911]: Su llamada fue procesada, mantenga la calma mientras llega la ayuda.");
			new zona[128], info[128];
			GetPlayer3DZone(playerid, zona, MAX_ZONE_NAME);
			DeletePVar(playerid, "en_emergencias");
			Altavoz[playerid] = 0;
			EnLlamada[playerid] = 0; //Sistema teléfono
			ToqueLlamada[playerid] = 0;
			PersonaEnLlamada[playerid] = -1;
			new nego = GetIntNegocio(playerid, 1);
			if (nego != -1){
				Get2DZone(zona, MAX_ZONE_NAME, InfoNegocio[nego][nExteriorX], InfoNegocio[nego][nExteriorY], InfoNegocio[nego][nExteriorZ]);
				format(info, sizeof info, "%s #%d (Negocio)", zona, nego);
				alm(zona, info);
			}
			llamadaJugador[playerid] = -1;
			if(id != -1)
			{
				InfoCentralita[id][c_id] = id;
				alm(InfoCentralita[id][c_nombre], NombreJugador(playerid));
				alm(InfoCentralita[id][c_situacion], text);
				GetPlayerPos(playerid, InfoCentralita[id][c_pos][0], InfoCentralita[id][c_pos][1], InfoCentralita[id][c_pos][2]);
				alm(InfoCentralita[id][c_localizacion], zona);
				InfoCentralita[id][c_atendida] = 0;
				InfoCentralita[id][c_tipo] = 1; //pede
				InfoCentralita[id][c_negocio] = nego;
				InfoCentralita[id][c_timer] = 10;
				//mensaje a policia
				format(info, sizeof(info), "Se ha registrado una nueva llamada al 911, revisar sus ordenadores. (/centralita %d)", id); SendRadioMessage(1, COLOR_RADIO, info);
				SendRadioMessage(1, COLOR_RADIO, "|___________Llamada de emergencia___________|");
				format(info, sizeof(info), "{00a2ff}* Nombre del ciudadano:{DDCC72} %s", InfoCentralita[id][c_nombre]); SendRadioMessage(1, 0xDDCC72FF, info);
				format(info, sizeof(info), "{00a2ff}* Teléfono:{DDCC72} %d", InfoPersonaje[playerid][pTelefono]); SendRadioMessage(1, 0xDDCC72FF, info);
				format(info, sizeof(info), "{00a2ff}* Localización:{DDCC72} %s", InfoCentralita[id][c_lugar]); SendRadioMessage(1, 0xDDCC72FF, info);
				format(info, sizeof(info), "{00a2ff}* Situación:{DDCC72} %s", InfoCentralita[id][c_situacion]); SendRadioMessage(1, 0xDDCC72FF, info);
				format(info, sizeof(info), "{00a2ff}* Rastreo de llamada:{DDCC72} %s.", InfoCentralita[id][c_localizacion]); SendRadioMessage(1, 0xDDCC72FF, info);
				return 0;
			}
			//mensaje a policia x si se buguea lo de arriba
			SendRadioMessage(1, COLOR_RADIO, "|___________Llamada de emergencia___________|");
			format(info, sizeof(info), "{00a2ff}* Nombre del ciudadano:{DDCC72} %s", NombreJugador(playerid)); SendRadioMessage(1, 0xDDCC72FF, info);
			format(info, sizeof(info), "{00a2ff}* Teléfono:{DDCC72} %d", InfoPersonaje[playerid][pTelefono]); SendRadioMessage(1, 0xDDCC72FF, info);
			format(info, sizeof(info), "{00a2ff}* Localización:{DDCC72} %s", sdisda_actual[playerid]); SendRadioMessage(1, 0xDDCC72FF, info);
			format(info, sizeof(info), "{00a2ff}* Situación:{DDCC72} %s", text); SendRadioMessage(1, 0xDDCC72FF, info);
			format(info, sizeof(info), "{00a2ff}* Rastreo de llamada:{DDCC72} %s.", zona); SendRadioMessage(1, 0xDDCC72FF, info);
			return 0;
		}
	}
	else if(EnLlamada[playerid] == 930) //elige sd
	{
		new id = llamadaJugador[playerid];
		format(string, sizeof string, "%s por teléfono: %s", NombreJugador(playerid), text);
		ProxDetector(8.0, playerid, string, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
		if (GetPVarInt(playerid, "en_emergencias") == 0)
		{
			SendClientMessage(playerid, 0xFFF000FF, "[Teléfono: 911]: De acuerdo, ¿cuál es su emergencia? Sea lo más explícito posible, por favor.");
			if (id != -1) alm(InfoCentralita[id][c_lugar], text);
			else alm(sdisda_actual[playerid], text);
			SetPVarInt(playerid, "en_emergencias", 1);
			return 0;
		}
		else if (GetPVarInt(playerid, "en_emergencias") == 1)
		{
			SendClientMessage(playerid, 0xFFF000FF, "[Teléfono: 911]: Su llamada fue procesada, mantenga la calma mientras llega la ayuda.");
			new zona[128], info[128];
			GetPlayer3DZone(playerid, zona, MAX_ZONE_NAME);
			DeletePVar(playerid, "en_emergencias");
			Altavoz[playerid] = 0;
			EnLlamada[playerid] = 0; //Sistema teléfono
			ToqueLlamada[playerid] = 0;
			PersonaEnLlamada[playerid] = -1;
			new nego = GetIntNegocio(playerid, 1);
			if (nego != -1){
				Get2DZone(zona, MAX_ZONE_NAME, InfoNegocio[nego][nExteriorX], InfoNegocio[nego][nExteriorY], InfoNegocio[nego][nExteriorZ]);
				format(info, sizeof info, "%s #%d (Negocio)", zona, nego);
				alm(zona, info);
			}
			llamadaJugador[playerid] = -1;
			if(id != -1)
			{
				InfoCentralita[id][c_id] = id;
				alm(InfoCentralita[id][c_nombre], NombreJugador(playerid));
				alm(InfoCentralita[id][c_situacion], text);
				GetPlayerPos(playerid, InfoCentralita[id][c_pos][0], InfoCentralita[id][c_pos][1], InfoCentralita[id][c_pos][2]);
				alm(InfoCentralita[id][c_localizacion], zona);
				InfoCentralita[id][c_atendida] = 0;
				InfoCentralita[id][c_tipo] = 2; //pede
				InfoCentralita[id][c_timer] = 10;
				SendRadioMessage(4, COLOR_RADIO, "|___________Llamada de emergencia___________|");
				format(info, sizeof(info), "{00a2ff}* Nombre del ciudadano:{DDCC72} %s", NombreJugador(playerid)); SendRadioMessage(4, 0xDDCC72FF, info);
				format(info, sizeof(info), "{00a2ff}* Teléfono:{DDCC72} %d", InfoPersonaje[playerid][pTelefono]); SendRadioMessage(4, 0xDDCC72FF, info);
				format(info, sizeof(info), "{00a2ff}* Localización:{DDCC72} %s", InfoCentralita[id][c_lugar]); SendRadioMessage(4, 0xDDCC72FF, info);
				format(info, sizeof(info), "{00a2ff}* Situación:{DDCC72} %s", InfoCentralita[id][c_situacion]); SendRadioMessage(4, 0xDDCC72FF, info);
				format(info, sizeof(info), "{00a2ff}* Rastreo de llamada:{DDCC72} %s.", InfoCentralita[id][c_localizacion]); SendRadioMessage(4, 0xDDCC72FF, info);
				return 0;
			}
			//mensaje a md
			SendRadioMessage(4, COLOR_RADIO, "|___________Llamada de emergencia___________|");
			format(info, sizeof(info), "{00a2ff}* Nombre del ciudadano:{DDCC72} %s", NombreJugador(playerid)); SendRadioMessage(4, 0xDDCC72FF, info);
			format(info, sizeof(info), "{00a2ff}* Teléfono:{DDCC72} %d", InfoPersonaje[playerid][pTelefono]); SendRadioMessage(4, 0xDDCC72FF, info);
			format(info, sizeof(info), "{00a2ff}* Localización:{DDCC72} %s", text); SendRadioMessage(4, 0xDDCC72FF, info);
			format(info, sizeof(info), "{00a2ff}* Situación:{DDCC72} %s", sdisda_actual[playerid]); SendRadioMessage(4, 0xDDCC72FF, info);
			format(info, sizeof(info), "{00a2ff}* Rastreo de llamada:{DDCC72} %s.", zona); SendRadioMessage(4, 0xDDCC72FF, info);
			return 0;
		}
	}
	//teléfono
	if(PersonaEnLlamada[playerid] != -1)
	{
		if(EnLlamada[playerid] == 2 || EnLlamada[playerid] == 3 || EnLlamada[playerid] == 912)
		{
			if(Altavoz[PersonaEnLlamada[playerid]] == 0)
			{
				if(EnLlamada[PersonaEnLlamada[playerid]] == 912) format(string, sizeof string, "(Teléfono 911): %s", text);
				else format(string, sizeof string, "(Teléfono %d): %s", InfoPersonaje[playerid][pTelefono], text);
				SendClientMessage(PersonaEnLlamada[playerid], COLOR_YELLOW, string);
			}
			else
			{
				if(EnLlamada[PersonaEnLlamada[playerid]] == 912) format(string, sizeof string, "(T. Altavoz 911): %s", text);
				else format(string, sizeof string, "(T. Altavoz %d): %s", InfoPersonaje[playerid][pTelefono], text);
				ProxDetector(4.5, PersonaEnLlamada[playerid], string, 0xFFF000FF, 0xFFF000FF, 0xFFF000FF, 0xFFF000FF, 0xFFF000FF);
			}
			format(string, sizeof string, "%s por teléfono: %s", NombreJugador(playerid), text);
			ProxDetector(15.0, playerid, string, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
			return 0;
		}
		//chat normal
		format(string, sizeof string, "%s dice: %s", NombreJugador(playerid), text);
		ProxDetector(20.0, playerid, string, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
		if (!IsPlayerInAnyVehicle(playerid))
		{
			LoopingAnim(playerid,"PED","IDLE_CHAT",4.0,1,0,0,1,1);
			SetTimerEx("PararDeHablar", (230*strlen(text)), 0, "d", playerid);
		}
		return 0;
	}
	//chat normal
	if (InfoPersonaje[playerid][pAcento] == 0 || InfoPersonaje[playerid][pAcento] == 1) format(string, sizeof string, "%s dice: %s", NombreJugador(playerid), text);
	else format(string, sizeof string, "[Acento %s] %s dice: %s", GetNameAcento(InfoPersonaje[playerid][pAcento]), NombreJugador(playerid), text);
	ProxDetector(20.0, playerid, string, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5);
	if (!IsPlayerInAnyVehicle(playerid) && InfoPersonaje[playerid][pTogManos] == 1)
	{
		ApplyAnimation(playerid, "MISC", "IDLE_CHAT_02", 4.1, 1, 0, 0, 1, 1, 1);
		SetTimerEx("FinHablar", strlen(text) * 200, false, "d", playerid);
	}
	return 0;
}

funcion FinHablar(playerid)
{
	ApplyAnimation(playerid, "CARRY", "crry_prtial", 2.0, 0, 0, 0, 0, 0, 1);
	return 1;
}

funcion FixHour(hour)
{
	hour = timeshift+hour;
	if (hour < 0)
	{
		hour = hour+24;
	}
	else if (hour > 23)
	{
		hour = hour-24;
	}
	shifthour = hour;
	return 1;
}

stock IsPlayerInArea(playerid, Float:minx, Float:maxx, Float:miny, Float:maxy)
{
    new Float:x, Float:y, Float:z;
    GetPlayerPos(playerid, x, y, z);
    if (x > minx && x < maxx && y > miny && y < maxy) return 1;
    return 0;
}

funcion TeleportPlayer(playerid)
{
	new Float:cx, Float:cy, Float:cz;
	GetPlayerPos(playerid, cx, cy, cz);
	Loop(x, totalpuertas, 1)
	{
		if (IsPlayerInRangeOfPoint(playerid, 3.0, InfoPuerta[x][pdExteriorX], InfoPuerta[x][pdExteriorY], InfoPuerta[x][pdExteriorZ]))
		{
			SendClientMessage(playerid, COLOR_GRAD2, "Usa el comando /entrar o presiona la tecla [H] para entrar a un interior, para salir usa /salir, o pulsa [H]");
			return 1;
		}
	}
	//FBI
	if (PlayerToPointStripped(1, playerid,325.4713,-1514.8862,36.0325, cx,cy,cz))
	{
		LoadObjects(playerid);
		SetPosEx(playerid,278.0079,-1505.8489,-45.1302, 270, 0, 600, 1);
		SetCameraBehindPlayer(playerid);
	}
	if (PlayerToPointStripped(1, playerid,278.0079,-1505.8489,-45.1302, cx,cy,cz))
	{
		SetPosEx(playerid,325.4713,-1514.8862,36.0325, 90.0000, 0, 0, 1);
		SetCameraBehindPlayer(playerid);
	}
	// Ascensores LSPD. [ASCENSOR IDA]
	else if (PlayerToPointStripped(2, playerid,1554.822021,-1648.085815,4990.7, cx,cy,cz))
	{
		if (member_faccion(playerid, 1))
		{
			Dialog_Show(playerid,ShowElevador1LSPD,DIALOG_STYLE_LIST,
			"LSPD - Sector Sur","(A) Planta Superior\t - \t(Oficinas) \n(B) Planta Inferior\t - \t(Prisión)","Ir","Salir");
		}
		else if (Autorizado[playerid] == 1)
		{
			SetPosEx(playerid, 1555.0,-1648.085815,4985.34, -90.0, 1, 1, 1);
			SendClientMessage(playerid, COLOR_WHITE, "Usted se encuentra en la prisión de LSPD, su autorización es límitada.");
			Autorizado[playerid] = 0;
			return 1;
		}
		else SendClientMessage(playerid,COLOR_GREY,"Acceso Denegado.");
	}
	else if (PlayerToPointStripped(2, playerid,1554.630126,-1709.477050,4990.7, cx,cy,cz))
	{
		if (member_faccion(playerid, 1))
		{
			Dialog_Show(playerid,ShowElevador2LSPD,DIALOG_STYLE_LIST,
			"LSPD - Sector Norte","(A) Planta Superior\t - \t(Oficinas) \n(B) Planta Inferior\t - \t(Garage)","Ir","Salir");
		}
		else SendClientMessage(playerid,COLOR_GREY,"Acceso Denegado.");
	}
	// - Del Garage a la HQ sólo policías y esposados pueden pasar. / De la prisión a HQ sin jail y policias. [ASCENSOR RETORNO]

	// LSPD - TP de la Prisión al Interior de LSPD (Ascensor) - Sector Sur.
	else if (PlayerToPointStripped(2, playerid,1555.0,-1648.085815,4985.34, cx,cy,cz))
	{
		if (member_faccion(playerid, 1, 2, 3, 4) || InfoPersonaje[playerid][pSancionado] == 0) // Jugador sale de la HQ sin jail.
		{
			SetPosEx(playerid,1554.822021,-1648.085815,4990.7, -90.0, 1, 1, 1);
			GameTextForPlayer(playerid, "~w~Departamento De ~n~Policia de Los Santos", 2500, 1);
		}
		else GameTextForPlayer(playerid, "~r~!No puedes salir del lugar sin la condena a cumplir!", 2500, 3);
	}
	// LSPD - TP del Parking al Interior de LSPD (Ascensor) - Sector Norte.
	else if (PlayerToPointStripped(2, playerid,1525.365966,-1677.872680,5.890625, cx,cy,cz))
	{
		if (member_faccion(playerid, 1, 2, 3, 4)) // Jugador entra a la HQ esposado.
		{
			LoadObjects(playerid); // Se precisa cargado completo de la HQ al entrar por primera vez.
			SetPosEx(playerid,1554.630126,-1709.477050,4990.7, -90.0, 1, 1, 1);
			GameTextForPlayer(playerid, "~w~Departamento De ~n~Policia de Los Santos", 2500, 1);
		}
		else GameTextForPlayer(playerid, "~r~!Acceso restringido!", 2500, 3);
	}
	// LSPD - De la planta de arriba a la de abajo. (Ascensor)
	// Sector Sur
	else if (PlayerToPointStripped(2, playerid,1554.822021,-1648.085815,4995.55, cx,cy,cz))
	{
		if (member_faccion(playerid, 1, 4))
		{
			SetPosEx(playerid,1554.822021,-1648.085815,4990.7, -90.0, 1, 1, 1);
		}
		else GameTextForPlayer(playerid, "~r~!Solo Policias pueden usar el ascensor!", 5000, 3);
	}
	// Sector Norte
	else if (PlayerToPointStripped(2, playerid,1554.630126,-1709.477050,4995.55, cx,cy,cz))
	{
		if (member_faccion(playerid, 1, 4))
		{
			SetPosEx(playerid,1554.630126,-1709.477050,4990.7, -90.0, 1, 1, 1);
		}
		else GameTextForPlayer(playerid, "~r~!Solo Policias pueden usar el ascensor!", 5000, 3);
	}
	return 1;
}

stock ClearChat(playerid, lines = 20)
{
	Loop(x, lines, 0)
		SendClientMessage(playerid, 0xccccccff, "");
	return 1;
}

stock IsNumeric(const string[])
{
	for (new i = 0, j = strlen(string); i < j; i++)
	{
		if (string[i] > '9' || string[i] < '0') return 0;
	}
	return 1;
}

forward MapsRemoveForPlayer(playerid);
public MapsRemoveForPlayer(playerid)
{
	//basurero
	RemoveBuildingForPlayer(playerid, 3688, 2182.5547, -2042.5859, 17.9375, 0.25);

	//Store Row El Corona
	RemoveBuildingForPlayer(playerid, 3625, 1941.9844, -1970.7031, 14.9844, 0.25);

	// Removals per buildingun perball PDs
	RemoveBuildingForPlayer(playerid, 4054, 1402.5000, -1682.0234, 25.5469, 0.25);
	RemoveBuildingForPlayer(playerid, 4055, 1394.3594, -1620.6641, 32.1484, 0.25);
	RemoveBuildingForPlayer(playerid, 4220, 1370.6406, -1643.4453, 33.1797, 0.25);
	RemoveBuildingForPlayer(playerid, 4005, 1402.5000, -1682.0234, 25.5469, 0.25);
	RemoveBuildingForPlayer(playerid, 620, 1379.2422, -1622.4531, 12.8672, 0.25);
	RemoveBuildingForPlayer(playerid, 4006, 1394.3594, -1620.6641, 32.1484, 0.25);

	//All Spray Tag
	RemoveBuildingForPlayer(playerid, 1490, 2046.41, -1635.84, 13.5859, 0.25);
	RemoveBuildingForPlayer(playerid, 1490, 2066.43, -1652.48, 14.2812, 0.25);
	RemoveBuildingForPlayer(playerid, 1490, 2102.20, -1648.76, 13.5859, 0.25);
	RemoveBuildingForPlayer(playerid, 1490, 2399.41, -1552.03, 28.7500, 0.25);
	RemoveBuildingForPlayer(playerid, 1490, 2353.54, -1508.21, 24.7500, 0.25);
	RemoveBuildingForPlayer(playerid, 1490, 2394.10, -1468.37, 24.7812, 0.25);

	RemoveBuildingForPlayer(playerid, 1531, 1724.73, -1741.50, 14.1016, 0.25);
	RemoveBuildingForPlayer(playerid, 1531, 1767.21, -1617.54, 15.0391, 0.25);
	RemoveBuildingForPlayer(playerid, 1531, 1799.13, -1708.77, 14.1016, 0.25);
	RemoveBuildingForPlayer(playerid, 1531, 1746.75, -1359.77, 16.2109, 0.25);
	RemoveBuildingForPlayer(playerid, 1531, 1850.01, -1876.84, 14.3594, 0.25);
	RemoveBuildingForPlayer(playerid, 1531, 1889.24, -1982.51, 15.7578, 0.25);
	RemoveBuildingForPlayer(playerid, 1531, 1950.62, -2034.40, 14.0938, 0.25);
	RemoveBuildingForPlayer(playerid, 1531, 1936.88, -2134.91, 14.2188, 0.25);
	RemoveBuildingForPlayer(playerid, 1531, 1808.34, -2092.27, 14.2188, 0.25);
	RemoveBuildingForPlayer(playerid, 1531, 2273.90, -2265.80, 14.5625, 0.25);
	RemoveBuildingForPlayer(playerid, 1531, 2173.59, -2165.19, 15.3047, 0.25);

	RemoveBuildingForPlayer(playerid, 1530, 2281.46, -1118.96, 27.0078, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2239.78, -999.75, 59.7578, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2122.69, -1060.90, 25.3906, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2062.72, -996.46, 48.2656, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2076.73, -1071.13, 27.6094, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2841.37, -1312.96, 18.8203, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2820.34, -1190.98, 25.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2766.09, -1197.14, 69.0703, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2756.01, -1388.12, 39.4609, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2821.23, -1465.09, 16.5391, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2767.78, -1621.19, 11.2344, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2767.76, -1819.95, 12.2266, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2667.89, -1469.13, 31.6797, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2612.93, -1390.77, 35.4297, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2536.22, -1352.77, 31.0859, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2580.95, -1274.09, 46.5938, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2603.16, -1197.81, 60.9922, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2576.82, -1143.27, 48.2031, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2621.51, -1092.20, 69.7969, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2797.92, -1097.70, 31.0625, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 1332.13, -1722.30, 14.1875, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 1732.73, -963.08, 41.4375, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 1118.91, -2008.24, 75.0234, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2273.20, -2529.12, 8.5156, 0.25);
	RemoveBuildingForPlayer(playerid, 1530, 2704.23, -2144.30, 11.8203, 0.25);

	RemoveBuildingForPlayer(playerid, 1529, 2379.32, -2166.22, 24.9453, 0.25);
	RemoveBuildingForPlayer(playerid, 1529, 810.57, -1797.57, 13.6172, 0.25);
	RemoveBuildingForPlayer(playerid, 1529, 730.45, -1482.01, 2.2500, 0.25);
	RemoveBuildingForPlayer(playerid, 1529, 947.48, -1466.72, 17.2422, 0.25);
	RemoveBuildingForPlayer(playerid, 1529, 399.01, -2066.88, 11.2344, 0.25);
	RemoveBuildingForPlayer(playerid, 1529, 466.98, -1283.02, 16.3203, 0.25);
	RemoveBuildingForPlayer(playerid, 1529, 583.46, -1502.11, 16.0000, 0.25);
	RemoveBuildingForPlayer(playerid, 1529, 944.27, -985.82, 39.2969, 0.25);
	RemoveBuildingForPlayer(playerid, 1529, 1072.91, -1012.80, 35.5156, 0.25);
	RemoveBuildingForPlayer(playerid, 1529, 1206.25, -1162.00, 23.8750, 0.25);
	RemoveBuildingForPlayer(playerid, 1529, 1098.81, -1292.55, 17.1406, 0.25);

	RemoveBuildingForPlayer(playerid, 1528, 2763.00, -2012.11, 14.1328, 0.25);
	RemoveBuildingForPlayer(playerid, 1528, 2794.53, -1906.81, 14.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 1528, 2812.94, -1942.07, 11.0625, 0.25);
	RemoveBuildingForPlayer(playerid, 1528, 2874.50, -1909.38, 8.3906, 0.25);

	RemoveBuildingForPlayer(playerid, 1527, 2182.23, -1467.90, 25.5547, 0.25);
	RemoveBuildingForPlayer(playerid, 1527, 2132.23, -1258.09, 24.0547, 0.25);
	RemoveBuildingForPlayer(playerid, 1527, 2233.95, -1367.62, 24.5312, 0.25);
	RemoveBuildingForPlayer(playerid, 1527, 2224.77, -1193.06, 25.8359, 0.25);
	RemoveBuildingForPlayer(playerid, 1527, 2119.20, -1196.62, 24.6328, 0.25);
	RemoveBuildingForPlayer(playerid, 1527, 2522.46, -1478.74, 24.1641, 0.25);
	RemoveBuildingForPlayer(playerid, 1527, 2322.45, -1254.41, 22.9219, 0.25);
	RemoveBuildingForPlayer(playerid, 1527, 1448.23, -1755.90, 14.5234, 0.25);
	RemoveBuildingForPlayer(playerid, 1527, 1574.71, -2691.88, 13.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 1527, 1071.14, -1863.79, 14.0938, 0.25);
	RemoveBuildingForPlayer(playerid, 1527, 2392.36, -1914.57, 14.7422, 0.25);
	RemoveBuildingForPlayer(playerid, 1527, 2430.33, -1997.91, 14.7422, 0.25);
	RemoveBuildingForPlayer(playerid, 1527, 2587.32, -2063.52, 4.6094, 0.25);

	RemoveBuildingForPlayer(playerid, 1525, 1974.09, -1351.16, 24.5625, 0.25);
	RemoveBuildingForPlayer(playerid, 1525, 2093.76, -1413.45, 24.1172, 0.25);
	RemoveBuildingForPlayer(playerid, 1525, 1969.59, -1289.70, 24.5625, 0.25);
	RemoveBuildingForPlayer(playerid, 1525, 1966.95, -1174.73, 20.0391, 0.25);
	RemoveBuildingForPlayer(playerid, 1525, 1911.87, -1064.40, 25.1875, 0.25);
	RemoveBuildingForPlayer(playerid, 1525, 2462.27, -1541.41, 25.4219, 0.25);
	RemoveBuildingForPlayer(playerid, 1525, 2346.52, -1350.78, 24.2812, 0.25);
	RemoveBuildingForPlayer(playerid, 1525, 2273.02, -1687.43, 14.9688, 0.25);
	RemoveBuildingForPlayer(playerid, 1525, 2422.91, -1682.30, 13.9922, 0.25);
	RemoveBuildingForPlayer(playerid, 1525, 1549.89, -1714.52, 15.1016, 0.25);
	RemoveBuildingForPlayer(playerid, 1525, 1498.63, -1207.35, 24.6797, 0.25);
	RemoveBuildingForPlayer(playerid, 1525, 1519.42, -1010.95, 24.6094, 0.25);
	RemoveBuildingForPlayer(playerid, 1525, 1687.23, -1239.12, 15.8125, 0.25);
	RemoveBuildingForPlayer(playerid, 1525, 1783.97, -2156.54, 14.3125, 0.25);
	RemoveBuildingForPlayer(playerid, 1525, 1624.62, -2296.24, 14.3125, 0.25);
	RemoveBuildingForPlayer(playerid, 1525, 2065.44, -1897.23, 13.6094, 0.25);
	RemoveBuildingForPlayer(playerid, 1525, 2134.33, -2011.20, 10.5156, 0.25);
	RemoveBuildingForPlayer(playerid, 1525, 1271.48, -1662.32, 20.2500, 0.25);

	// Crenshaw Complex
	RemoveBuildingForPlayer(playerid, 3562, 2232.3984, -1464.7969, 25.6484, 0.25);
	RemoveBuildingForPlayer(playerid, 3562, 2247.5313, -1464.7969, 25.5469, 0.25);
	RemoveBuildingForPlayer(playerid, 3562, 2263.7188, -1464.7969, 25.4375, 0.25);
	RemoveBuildingForPlayer(playerid, 3562, 2243.7109, -1401.7813, 25.6406, 0.25);
	RemoveBuildingForPlayer(playerid, 3562, 2230.6094, -1401.7813, 25.6406, 0.25);
	RemoveBuildingForPlayer(playerid, 3562, 2256.6641, -1401.7813, 25.6406, 0.25);
	RemoveBuildingForPlayer(playerid, 3582, 2230.6094, -1401.7813, 25.6406, 0.25);
	RemoveBuildingForPlayer(playerid, 3582, 2243.7109, -1401.7813, 25.6406, 0.25);
	RemoveBuildingForPlayer(playerid, 3582, 2256.6641, -1401.7813, 25.6406, 0.25);
	RemoveBuildingForPlayer(playerid, 645, 2239.5703, -1468.8047, 22.6875, 0.25);
	RemoveBuildingForPlayer(playerid, 3582, 2232.3984, -1464.7969, 25.6484, 0.25);
	RemoveBuildingForPlayer(playerid, 673, 2241.8906, -1458.9297, 22.9609, 0.25);
	RemoveBuildingForPlayer(playerid, 3582, 2247.5313, -1464.7969, 25.5469, 0.25);
	RemoveBuildingForPlayer(playerid, 3582, 2263.7188, -1464.7969, 25.4375, 0.25);
	RemoveBuildingForPlayer(playerid, 3593, 2261.7734, -1441.1016, 23.5000, 0.25);
	RemoveBuildingForPlayer(playerid, 3593, 2265.0781, -1424.4766, 23.5000, 0.25);

	// Harbour
	RemoveBuildingForPlayer(playerid, 3687, 2135.7422, -2186.4453, 15.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 3687, 2162.8516, -2159.7500, 15.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 3687, 2150.1953, -2172.3594, 15.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 1531, 2173.5938, -2165.1875, 15.3047, 0.25);
	RemoveBuildingForPlayer(playerid, 3622, 2135.7422, -2186.4453, 15.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 3622, 2150.1953, -2172.3594, 15.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 3622, 2162.8516, -2159.7500, 15.6719, 0.25);	

	// VineWood Station
	RemoveBuildingForPlayer(playerid, 5842, 1292.070, -1122.023, 37.406, 0.250);
	RemoveBuildingForPlayer(playerid, 727, 1319.687, -1112.906, 22.257, 0.250);
	RemoveBuildingForPlayer(playerid, 727, 1327.976, -1124.343, 21.968, 0.250);
	RemoveBuildingForPlayer(playerid, 5738, 1292.070, -1122.023, 37.406, 0.250);

	// Gas Station i Ri
	RemoveBuildingForPlayer(playerid, 17535, 2364.054, -1391.531, 41.351, 0.250);
	RemoveBuildingForPlayer(playerid, 17965, 2322.281, -1355.195, 25.406, 0.250);
	RemoveBuildingForPlayer(playerid, 17966, 2347.921, -1364.289, 27.156, 0.250);
	RemoveBuildingForPlayer(playerid, 1266, 2317.585, -1355.828, 37.218, 0.250);
	RemoveBuildingForPlayer(playerid, 17970, 2364.054, -1391.531, 41.351, 0.250);
	RemoveBuildingForPlayer(playerid, 1308, 2331.445, -1373.531, 23.093, 0.250);
	RemoveBuildingForPlayer(playerid, 17543, 2322.281, -1355.195, 25.406, 0.250);
	RemoveBuildingForPlayer(playerid, 1260, 2317.593, -1355.820, 37.226, 0.250);
	RemoveBuildingForPlayer(playerid, 620, 2336.984, -1350.578, 22.726, 0.250);
	RemoveBuildingForPlayer(playerid, 17542, 2347.921, -1364.289, 27.156, 0.250);
	RemoveBuildingForPlayer(playerid, 955, 2352.179, -1357.156, 23.773, 0.250);

	//little mexico
	RemoveBuildingForPlayer(playerid, 4025, 1777.8359, -1773.9063, 12.5234, 0.25);
	RemoveBuildingForPlayer(playerid, 4215, 1777.5547, -1775.0391, 36.7500, 0.25);
	RemoveBuildingForPlayer(playerid, 4019, 1777.8359, -1773.9063, 12.5234, 0.25);
}

//sistema de fábricas
Dialog:FabricaAdministracion(playerid, response, listitem, inputtext[])
{
	if (!response) { FabricaID[playerid] = -1; return 1; }
	new id = FabricaID[playerid], dialog[360];
	if (id == -1) return 1;
	switch (listitem)
	{
		case 0: //contratar empleados
		{
			if (CountEmpleadosF(id) == 5) return SendClientMessage(playerid, COLOR_GREY, "Ya tienes cinco moledores de cristal.");
			strcat(dialog, "Sexo\tValor\n");
			strcat(dialog, "{EBEBEB}Mujer\t{00CC00}$180,000\n");
			strcat(dialog, "{EBEBEB}Hombre\t{00CC00}$145,000");
			Dialog_Show(playerid, FabricaEmpleados, DIALOG_STYLE_TABLIST_HEADERS, "Moledor de cristal", dialog, "Continuar", "Volver");
		}
		case 1: //regresar vehículo 1
		{
			SetVehicleToRespawn(InfoNegocio[id][nVehiculo][0]);
			InfoNegocio[id][nVeh1SinUso] = 0;
			SendClientMessage(playerid, COLOR_YELLOW, "Regresaste el vehículo 1 a la fábrica, puede que un empleado estaba procesando un pedido.");
		}
		case 2: //regresar vehículo 2
		{
			SetVehicleToRespawn(InfoNegocio[id][nVehiculo][1]);
			InfoNegocio[id][nVeh2SinUso] = 0;
			SendClientMessage(playerid, COLOR_YELLOW, "Regresaste el vehículo 2 a la fábrica, puede que un empleado estaba procesando un pedido.");
		}
	}
	return 1;
}

Dialog:FabricaEmpleados(playerid, response, listitem, inputtext[])
{
	if (!response)
	{
		Dialog_Show(playerid, FabricaAdministracion, DIALOG_STYLE_LIST, "Administración de fábrica", "Contratar empleados\nRegresar vehículo 1\nRegresar vehículo 2", "Continuar", "Salir");
		return 1;
	}
	new id = FabricaID[playerid], gformat[240];
	if (id == -1) return 1;
	if (CountEmpleadosF(id) == 5) return SendClientMessage(playerid, COLOR_GREY, "Ya tienes cinco moledores de cristal.");
	if (listitem == 0) //mujer
	{
		if (InfoNegocio[id][nDinero] < 180000)
		{
			format(gformat, sizeof gformat, "El costo de empleados de sexo femenino es de $180,000. Te faltan $%s.", diner_coma(180000-InfoNegocio[id][nDinero]));
			SendClientMessage(playerid, COLOR_GREY, gformat);
			return 1;
		}
		new SkinMuestra[150], count = 0;
		Loop(x, sizeof InfoSkin, 0) if (InfoSkin[x][sSexo] == 2 && InfoSkin[x][sTipo] == 4)
		{
			SkinMuestra[count] = x;
			count++;
		}
		SkinMuestra[count] = 145;
		count++;
		ShowModelSelectionMenuEx(playerid, SkinMuestra, count, "Femenino", Fabrica_Skin, -11.0, 0.0, -55.0, 1.0);
        FabricaSexo[playerid] = 2;
	}
	else //hombre
	{
		if (InfoNegocio[id][nDinero] < 145000)
		{
			format(gformat, sizeof gformat, "El costo de empleados de sexo masculino es de $145,000. Te faltan $%s.", diner_coma(145000-InfoNegocio[id][nDinero]));
			SendClientMessage(playerid, COLOR_GREY, gformat);
			return 1;
		}
		new SkinMuestra[150], count = 0;
		Loop(x, sizeof InfoSkin, 0) if (InfoSkin[x][sSexo] == 1 && InfoSkin[x][sTipo] == 4)
		{
			SkinMuestra[count] = x;
			count++;
		}
		SkinMuestra[count] = 146;
		count++;
		ShowModelSelectionMenuEx(playerid, SkinMuestra, count, "Masculino", Fabrica_Skin, -11.0, 0.0, -55.0, 1.0);
        FabricaSexo[playerid] = 1;
	}
	return 1;
}

CountEmpleadosF(id)
{
	new count = 0;
	Loop(x, 5, 0) if (InfoNegocio[id][nEmpleado][x] != 0)
	{
		count++;
	}
	return count;
}

//sistema de fábricas
Dialog:FabricaActividades(playerid, response, listitem, inputtext[])
{
	if (!response) { FabricaID[playerid] = -1; return 1; }
	new id = FabricaID[playerid], gformat[235];
	if (id == -1) return 1;
	switch (listitem)
	{
		case 0: //adquirir químicos
		{
			if (EnViajeQuimicos[playerid] != 0) return SendClientMessage(playerid, COLOR_GREY, "Ya estás haciendo el viaje de químicos.");
			if (EnViajeDrogas[playerid] != 0) return SendClientMessage(playerid, COLOR_GREY, "Ya estás haciendo el viaje de entregar drogas.");
			if (InfoNegocio[id][nTimeNecesitaQuimicos] != 0)
			{
				format(gformat, sizeof gformat, "Debes esperar %d minutos para volver a buscar químicos.", InfoNegocio[id][nTimeNecesitaQuimicos]);
				SendClientMessage(playerid, COLOR_GREY, gformat);
				return 1;
			}
			new vehicleid = -1;
			Loop(x, MAX_VEHICLES, 0) if (GetVehicleModel(x))
			{
				if (VehicleToPoint(50.0, x, -2162.0496, -248.4825, 544.7022) && GetVehicleVirtualWorld(x) == InfoNegocio[id][nInteriorVW])
				{
					if (x == InfoNegocio[id][nVehiculo][0] && InfoNegocio[id][nVeh1SinUso] == 0)
					{
						vehicleid = x;
						InfoNegocio[id][nVeh1SinUso] = 1;
						break;
					}
					if (x == InfoNegocio[id][nVehiculo][1] && InfoNegocio[id][nVeh2SinUso] == 0)
					{
						vehicleid = x;
						InfoNegocio[id][nVeh2SinUso] = 1;
						break;
					}
				}
			}
			if (vehicleid == -1) return SendClientMessage(playerid, COLOR_GREY, "* No hay vehículos disponibles de la fábrica para hacer entregas.");
			switch (random(4))
			{
				case 0: SetPlayerCheckpoint(playerid, -33.2935, 2340.0342, 24.2849, 10.0);
				case 1: SetPlayerCheckpoint(playerid, -1850.3842, 124.1603, 15.1508, 10.0);
				case 2: SetPlayerCheckpoint(playerid, -1037.8477, 1549.7322, 33.0265, 10.0);
				case 3: SetPlayerCheckpoint(playerid, 1091.5005, 2364.4463, 10.8606, 10.0);
			}
			EnViajeQuimicos[playerid] = 1;
			SendClientMessage(playerid, 0xFFFFFFFF, "Ve con el {00AE57}vehículo de la fábrica{FFFFFF} hasta el {3399FF}punto marcado{FFFFFF} en el radar.");
			FabricaID[playerid] = -1;
		}
		case 1: //vender metanfetamina
		{
			if (EnViajeQuimicos[playerid] != 0) return SendClientMessage(playerid, COLOR_GREY, "Ya estás haciendo el viaje de químicos.");
			if (EnViajeDrogas[playerid] != 0) return SendClientMessage(playerid, COLOR_GREY, "Ya estás haciendo el viaje de entregar drogas.");
			if (InfoNegocio[id][nEntregasListas] < 1) return SendClientMessage(playerid, COLOR_GREY, "* No hay entregas listas, fijate si hay al menos una caja en los estantes.");
			new vehicleid = -1;
			Loop(x, MAX_VEHICLES, 0) if (GetVehicleModel(x))
			{
				if (VehicleToPoint(50.0, x, -2162.0496, -248.4825, 544.7022) && GetVehicleVirtualWorld(x) == InfoNegocio[id][nInteriorVW])
				{
					if (x == InfoNegocio[id][nVehiculo][0] && InfoNegocio[id][nVeh1SinUso] == 0)
					{
						vehicleid = x;
						InfoNegocio[id][nVeh1SinUso] = 1;
						break;
					}
					if (x == InfoNegocio[id][nVehiculo][1] && InfoNegocio[id][nVeh2SinUso] == 0)
					{
						vehicleid = x;
						InfoNegocio[id][nVeh2SinUso] = 1;
						break;
					}
				}
			}
			if (vehicleid == -1) return SendClientMessage(playerid, COLOR_GREY, "* No hay vehículos disponibles de la fábrica para hacer entregas.");
			actualizar_barril(id, vehicleid);
			switch (random(4))
			{
				case 0: SetPlayerCheckpoint(playerid, 1092.6354, -1215.1941, 17.2890, 10.0);
				case 1: SetPlayerCheckpoint(playerid, 2102.6060, -2086.7402, 13.2103, 10.0);
				case 2: SetPlayerCheckpoint(playerid, 2683.9063, -1109.2195, 68.9253, 10.0);
				case 3: SetPlayerCheckpoint(playerid, 2202.7043, -2299.6982, 14.2621, 10.0);
			}
			EnViajeDrogas[playerid] = 1;
			UsandoVehFabrica[playerid] = vehicleid;
			SendClientMessage(playerid, 0xFFFFFFFF, "Ve con el vehículo con {00AE57}cajas de drogas{FFFFFF} hasta el {3399FF}punto marcado{FFFFFF} en el radar.");
			FabricaID[playerid] = -1;
			InfoNegocio[id][nEntregasListas]--;
			QuitarProduccion(id, InfoNegocio[id][nEntregasListas]);
			mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE negocios SET EntregasListas = '%d' WHERE ID = '%d'", InfoNegocio[id][nEntregasListas], InfoNegocio[id][nID_sql]);
			mysql_tquery(DBInsanity, gformat);
		}
	}
	return 1;
}

actualizar_barril(id, vehicleid)
{
	if (vehicleid == InfoNegocio[id][nVehiculo][0])
	{
		Loop(e, 5, 0) if (IsValidDynamicObject(InfoNegocio[id][nBarrilVeh1][e])) { DestroyDynamicObject(InfoNegocio[id][nBarrilVeh1][e]); }
		InfoNegocio[id][nBarrilVeh1][0] = CreateDynamicObject(1271, 0 , 0, -1000, 0, 0 , 0);
		InfoNegocio[id][nBarrilVeh1][1] = CreateDynamicObject(1271, 0 , 0, -1000, 0, 0 , 0);
		InfoNegocio[id][nBarrilVeh1][2] = CreateDynamicObject(1271, 0 , 0, -1000, 0, 0 , 0);
		InfoNegocio[id][nBarrilVeh1][3] = CreateDynamicObject(1271, 0 , 0, -1000, 0, 0 , 0);
		InfoNegocio[id][nBarrilVeh1][4] = CreateDynamicObject(1271, 0 , 0, -1000, 0, 0 , 0);
		AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh1][0], vehicleid, -0.011962,-1.074538,0.107927,-0.199999,0.000000,0.000000);
		AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh1][1], vehicleid, 0.000000,-1.999999,0.100000,0.349999,-1.149999,0.000000);
		AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh1][2], vehicleid, -0.007348,-1.509131,0.746309,0.000000,0.000000,0.000000);
		AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh1][3], vehicleid, 0.658764,-2.240282,0.650753,0.000000,34.049999,0.000000);
		AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh1][4], vehicleid, -0.714648,-2.216089,0.620124,0.000000,-29.000000,0.000000);
	}
	if (vehicleid == InfoNegocio[id][nVehiculo][1])
	{
		Loop(e, 5, 0) if (IsValidDynamicObject(InfoNegocio[id][nBarrilVeh2][e])) { DestroyDynamicObject(InfoNegocio[id][nBarrilVeh2][e]); }
		InfoNegocio[id][nBarrilVeh2][0] = CreateDynamicObject(1271, 0 , 0, -1000, 0, 0 , 0);
		InfoNegocio[id][nBarrilVeh2][1] = CreateDynamicObject(1271, 0 , 0, -1000, 0, 0 , 0);
		InfoNegocio[id][nBarrilVeh2][2] = CreateDynamicObject(1271, 0 , 0, -1000, 0, 0 , 0);
		InfoNegocio[id][nBarrilVeh2][3] = CreateDynamicObject(1271, 0 , 0, -1000, 0, 0 , 0);
		InfoNegocio[id][nBarrilVeh2][4] = CreateDynamicObject(1271, 0 , 0, -1000, 0, 0 , 0);
		AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh2][0], vehicleid, -0.011962,-1.074538,0.107927,-0.199999,0.000000,0.000000);
		AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh2][1], vehicleid, 0.000000,-1.999999,0.100000,0.349999,-1.149999,0.000000);
		AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh2][2], vehicleid, -0.007348,-1.509131,0.746309,0.000000,0.000000,0.000000);
		AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh2][3], vehicleid, 0.658764,-2.240282,0.650753,0.000000,34.049999,0.000000);
		AttachDynamicObjectToVehicle(InfoNegocio[id][nBarrilVeh2][4], vehicleid, -0.714648,-2.216089,0.620124,0.000000,-29.000000,0.000000);
	}
}

PermisosContrato(playerid, id)
{
	if (InfoPersonaje[playerid][pNegocio1] == id) return 1;
	if (InfoPersonaje[playerid][pNegocio2] == id) return 1;
	if (InfoPersonaje[playerid][pContrato] == id) return 1;
	return 0;
}

public OnPlayerKeyStateChange(playerid, newkeys, oldkeys)
{
	if (!IsPlayerConnectedEx(playerid)) return 1;
	if (IsPlayerNPC(playerid)) return 1;
	// H
	if (newkeys == KEY_CTRL_BACK)
	{
		if (!IsPlayerInAnyVehicle(playerid))
		{
			//administrar fábrica
			if (IsPlayerInRangeOfPoint(playerid, 2.0, -2182.9316, -208.9902, 544.7307) && InfoPersonaje[playerid][pInterior] == 9)
			{
				new id = EnNegocio(playerid);
				if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ninguna fábrica.");
				if (LlavesNegocio(playerid, id) == 0) return SendClientMessage(playerid, COLOR_GREY, "* No tienes las llaves de esta fábrica.");
				Dialog_Show(playerid, FabricaAdministracion, DIALOG_STYLE_LIST, "Administración de fábrica", "Contratar empleados\nRegresar vehículo 1\nRegresar vehículo 2", "Continuar", "Salir");
				FabricaID[playerid] = id;
				return 1;
			}
			//lista de actividades
			if (IsPlayerInRangeOfPoint(playerid, 2.0, -2181.2676, -211.3310, 544.4515) && InfoPersonaje[playerid][pInterior] == 9)
			{
				new id = EnNegocio(playerid);
				if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ninguna fábrica.");
				if (PermisosContrato(playerid, id) == 0) return SendClientMessage(playerid, COLOR_GREY, "Sólo empleados o dueño de la fábrica.");
				Dialog_Show(playerid, FabricaActividades, DIALOG_STYLE_LIST, "Actividades", "Adquirir químicos\nVender metanfetamina", "Realizar", "Cancelar");
				FabricaID[playerid] = id;
				return 1;
			}
			//tanques
			if (EnTanquesProduccion(playerid))
			{
				new id = EnNegocio(playerid);
				if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ninguna fábrica.");
				if (PermisosContrato(playerid, id) == 0) return SendClientMessage(playerid, COLOR_GREY, "Sólo empleados o dueño de la fábrica.");
				if (InfoNegocio[id][nQuimicos] < 20)
				{
					SendClientMessage(playerid, COLOR_GREY, "La fábrica necesita 20 químicos acumulados para hacer cristal.");
					return 1;
				}
				new emp = -1;
				Loop(x, 5, 0) if (InfoNegocio[id][nEmpleado][x] != 0 && InfoNegocio[id][nCocinando][x] == 0)
				{
					emp = x;
					break;
				}
				if (emp == -1) return SendClientMessage(playerid, COLOR_GREY, "* No hay mesas disponibles para producir o no hay empleados.");
				InfoNegocio[id][nQuimicos] -= 20;
				InfoNegocio[id][nCocinando][emp] = 1;
				InfoNegocio[id][nTimeCocinando][emp] = 150;
				new query[320], pago = Random(770, 2500);
				mysql_format(DBInsanity, query, sizeof query, "UPDATE negocios SET Quimicos = '%d', Cocinando%d = '%d', TimeCocinando%d = '%d' WHERE ID = '%d'",
				InfoNegocio[id][nQuimicos], emp+1, InfoNegocio[id][nCocinando][emp], emp+1, InfoNegocio[id][nTimeCocinando][emp], InfoNegocio[id][nID_sql]);
				mysql_tquery(DBInsanity, query);
				UpdateMesasProduccion(id);
				UpdateQuimicos(id);
				format(query, sizeof query, "Colocaste en producción la mesa %d, recibiste $%s por ello.", emp+1, diner_coma(pago));
				SendClientMessage(playerid, COLOR_LIGHTGREEN, query);
				GivePlayerCash(playerid, pago, "producir mesa (fabrica drogas)");
			}
			//mesas
			if (EnMesasProduccion(playerid) != -1)
			{
				new id = EnNegocio(playerid);
				if (id == -1) return SendClientMessage(playerid, COLOR_GREY, "* No estás en ninguna fábrica.");
				if (PermisosContrato(playerid, id) == 0) return SendClientMessage(playerid, COLOR_GREY, "Sólo empleados o dueño de la fábrica.");
				if (InfoNegocio[id][nEntregasListas] >= 20) return SendClientMessage(playerid, COLOR_GREY, "Ya hay más de 20 entregas de drogas por llevar.");
				new query[320], idM = EnMesasProduccion(playerid), pago = Random(600, 2500);
				if (InfoNegocio[id][nEmpleado][idM] == 0) return SendClientMessage(playerid, COLOR_GREY, "Esta mesa no tiene empleado.");
				if (InfoNegocio[id][nCocinando][idM] == 0) return SendClientMessage(playerid, COLOR_GREY, "Esta mesa no está en producción.");
				if (InfoNegocio[id][nTimeCocinando][idM] != 0) return SendClientMessage(playerid, COLOR_GREY, "Esta mesa aún está en producción.");
				InfoNegocio[id][nCocinando][idM] = 0;
				InfoNegocio[id][nTimeCocinando][idM] = 0;
				InfoNegocio[id][nEntregasListas]++;
				UpdateMesasProduccion(id);
				if (InfoNegocio[id][nEntregasListas] <= 20) { ColocarProduccion(id, InfoNegocio[id][nEntregasListas]); }
				mysql_format(DBInsanity, query, sizeof query, "UPDATE negocios SET Cocinando%d = '%d', TimeCocinando%d = '%d', EntregasListas = '%d' WHERE ID = '%d'", idM+1, InfoNegocio[id][nCocinando][idM], idM+1, InfoNegocio[id][nTimeCocinando][idM], InfoNegocio[id][nEntregasListas], InfoNegocio[id][nID_sql]);
				mysql_tquery(DBInsanity, query);
				format(query, sizeof query, "Recogiste la droga de la mesa %d, recibiste $%s por ello.", idM+1, diner_coma(pago));
				SendClientMessage(playerid, COLOR_LIGHTGREEN, query);
				GivePlayerCash(playerid, pago, "recoger droga (fabrica drogas)");
				Streamer_Update(playerid);
			}
		}
		//cmds
		cmd_entrar(playerid);
		cmd_salir(playerid);
	}
	// N
	if (newkeys == KEY_NO)
	{
		if (IsPlayerInAnyVehicle(playerid) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		{
			cmd_motor(playerid);
		}
	}
	// Y
	if (newkeys == KEY_YES)
	{
		if (InfoPersonaje[playerid][pManoDerecha] == 40 && InfoPersonaje[playerid][pManoDerechaCant] == 0)
		{
			if(TaserRecarga[playerid] != 0){SendClientMessage(playerid, COLOR_GREY, "Espera 5 segundos antes de recargar."); return 1;}
			ameuwu(playerid, "recarga su pistola táser con 400V");
			GivePlayerWeapon(playerid, 23, 2);
			InfoPersonaje[playerid][pManoDerechaCant] = 2;
			ApplyAnimation(playerid,"SILENCED","Silence_reload",4.1,0,1,1,0,0,1);
			ActualizarManos(playerid);
		}
		else cmd_bol(playerid);
	}
	// graffitear
	if (PRESSED(KEY_FIRE) && GetPlayerWeapon(playerid) == WEAPON_SPRAYCAN && GetPVarInt(playerid, "ModoSpray") == 0)
	{
		if (member_faccion(playerid, 7))
		{
			new bool: nearGraffiti;
			Loop(id, MAX_GRAFFITIS, 0) if (IsPlayerInRangeOfPoint(playerid, 2.0, InfoGraffiti[id][gr_PosX], InfoGraffiti[id][gr_PosY], InfoGraffiti[id][gr_PosZ]))
			{
				nearGraffiti = true;
				SetPVarInt(playerid, "ModoSpray", 1);
				SetPVarInt(playerid, "GraffitiID", id);
			}
			if (nearGraffiti)
				playerGraffitiTimer[playerid] = SetTimerEx("UsandoSpray", 1000, true, "i", playerid);
		}
	}
	if (RELEASED(KEY_FIRE) && GetPlayerWeapon(playerid) == WEAPON_SPRAYCAN && GetPVarInt(playerid, "ModoSpray") == 1)
	{
		KillTimer(playerGraffitiTimer[playerid]);
		DeletePVar(playerid, "ModoSpray");
		DeletePVar(playerid, "GraffitiID");
		GameTextForPlayer(playerid, "~n~~w~Pintura ~r~cancelada", 3000, 5);
	}
	//
	if(IsKeyJustDown(KEY_SPRINT,newkeys,oldkeys) && gPlayerUsingLoopingAnim[playerid] == 1)
	{
	    StopLoopingAnim(playerid);
        TextDrawHideForPlayer(playerid,txtAnimHelper);
		if (GetPVarInt(playerid, "PlayerCuffed") == 2) SetPVarInt(playerid, "PlayerCuffed", 0);
    }
	if(newkeys & KEY_SPRINT)
    {
    	if(IsPlayerConnected(playerid))
		{
		    if(ShowRules[playerid] == 0)
			{
				return 1;
			}
  			if(PlayerDrunk[playerid] > 9) { ApplyAnimation(playerid,"PED", "WALK_DRUNK",6.0,0,1,0,0,PlayerDrunk[playerid]*1000); }
  			if(PuedeD[playerid] == 1)
	    	{
				return GameTextForPlayer(playerid, "Espera. . .", 5000, 1);
			}
			else if(ShowRules[playerid] == 1)
			{
				switch(RulesTime[playerid])
				{
		    		case 1: RulesTime[playerid] = 2;
		    		case 2: RulesTime[playerid] = 3;
		    		case 3: RulesTime[playerid] = 4;
		    		case 4: RulesTime[playerid] = 5;
		    		case 5: RulesTime[playerid] = 6;
		    		case 6: RulesTime[playerid] = 7;
		    		case 7: RulesTime[playerid] = 8;
		    		case 8: RulesTime[playerid] = 9;
		    		case 9: RulesTime[playerid] = 10;
		    	}
		    	ShowRol(playerid);
		    }
		}
	}
	return 1;
}

CreateFlashObject(Float:x, Float:y, Float:z)
{
	new oid = CreateObject(18680, x, y, z, 0.0, 0.0, 0.0);
	SetTimerEx("DestroyFlashObject", 1000, false, "i", oid);
	return 1;
}

forward DestroyFlashObject(objectid);
public DestroyFlashObject(objectid)
{
	return DestroyObject(objectid);
}

stock TimeConvert(seconds)
{
	new tmp[16];
 	new minutes = floatround(seconds/60);
  	seconds -= minutes*60;
   	format(tmp, sizeof(tmp), "%d:%02d", minutes, seconds);
   	return tmp;
}

forward Float:frandom(Float:max, Float:min, dp);
stock Float:frandom(Float:max, Float:min, dp)
{
	new
		Float:mul = floatpower(10.0, dp),
		imin = floatround(min * mul),
		imax = floatround(max * mul);
	return float(random(imax - imin) + imin) / mul;
}

forward UsandoSpray(playerid);
public UsandoSpray(playerid)
{
	//check
	new sprayCounter = GetPVarInt(playerid, "LetraGraffiti"), id = GetPVarInt(playerid, "GraffitiID"), counter[60], graffitiText[128];
	GetPVarString(playerid, "TextoGraffiti", graffitiText, sizeof graffitiText);
	if (isnull(graffitiText)) return SendClientMessage(playerid, 0xEBEBEBFF, "No tienes nada asignado a rociar, usa /graffiti.");
	//spray
	if (IsPlayerInRangeOfPoint(playerid, 2.0, InfoGraffiti[id][gr_PosX], InfoGraffiti[id][gr_PosY], InfoGraffiti[id][gr_PosZ]))
	{
		sprayCounter--;
		SetPVarInt(playerid, "LetraGraffiti", sprayCounter);
		format(counter, sizeof counter, "~p~Pintando~n~~w~&~g~%d]", sprayCounter);
		GameTextForPlayer(playerid, counter, 3000, 3);
		if (sprayCounter <= 0)
		{
			alm(InfoGraffiti[id][gr_Mensaje], graffitiText);
			strreplace(graffitiText, "(n)", "\n");
			strreplace(graffitiText, "(a)", "{0000FF}"); //azul
			strreplace(graffitiText, "(b)", "{FFFFFF}"); //blanco
			strreplace(graffitiText, "(am)", "{FFFF00}"); //amarillo
			strreplace(graffitiText, "(v)", "{00C200}"); //verde
			strreplace(graffitiText, "(ne)", "{000000}"); //negro
			strreplace(graffitiText, "(na)", "{00AE57}"); //naranja
			strreplace(graffitiText, "(r)", "{FF0000}"); //rojo
			strreplace(graffitiText, "(ce)", "{00FFFF}"); //celeste
			SetDynamicObjectMaterialText(InfoGraffiti[id][gr_Objeto], 0, graffitiText, OBJECT_MATERIAL_SIZE_256x256, "Arial", 32, 1, 0xFFFFFFFF, 0, 1);
			GameTextForPlayer(playerid, "~g~Terminado", 3500, 3);
			alm(InfoGraffiti[id][gr_Creador], NombreDeCuenta(playerid));
			InfoGraffiti[id][gr_Fecha] = gettime();
			SetPVarInt(playerid, "LetraGraffiti", GetPVarInt(playerid, "SetraGraffiti"));
			DeletePVar(playerid, "GraffitiID");
			DeletePVar(playerid, "ModoSpray");
			KillTimer(playerGraffitiTimer[playerid]);
			new query[512];
			mysql_format(DBInsanity, query, sizeof query, "UPDATE graffitis SET Mensaje = '%e', Creador = '%e', Fecha = '%d' WHERE ID = '%d'", InfoGraffiti[id][gr_Mensaje], InfoGraffiti[id][gr_Creador], InfoGraffiti[id][gr_Fecha], InfoGraffiti[id][grID_sql]);
			mysql_tquery(DBInsanity, query);
		}
	}
	else
	{
		SetPVarInt(playerid, "LetraGraffiti", GetPVarInt(playerid, "SetraGraffiti"));
		DeletePVar(playerid, "GraffitiID");
		DeletePVar(playerid, "ModoSpray");
		KillTimer(playerGraffitiTimer[playerid]);
		GameTextForPlayer(playerid, "~n~~w~Pintura ~r~cancelada", 3000, 5);
	}
	return 1;
}

stock strreplace(string[], const search[], const replacement[], bool:ignorecase = false, pos = 0, limit = -1, maxlength = sizeof(string))
{
    // No need to do anything if the limit is 0.
    if (limit == 0)
        return 0;

    new
             sublen = strlen(search),
             replen = strlen(replacement),
        bool:packed = ispacked(string),
             maxlen = maxlength,
             len = strlen(string),
             count = 0
    ;


    // "maxlen" holds the max string length (not to be confused with "maxlength", which holds the max. array size).
    // Since packed strings hold 4 characters per array slot, we multiply "maxlen" by 4.
    if (packed)
        maxlen *= 4;

    // If the length of the substring is 0, we have nothing to look for..
    if (!sublen)
        return 0;

    // In this line we both assign the return value from "strfind" to "pos" then check if it's -1.
    while (-1 != (pos = strfind(string, search, ignorecase, pos))) {
        // Delete the string we found
        strdel(string, pos, pos + sublen);

        len -= sublen;

        // If there's anything to put as replacement, insert it. Make sure there's enough room first.
        if (replen && len + replen < maxlen) {
            strins(string, replacement, pos, maxlength);

            pos += replen;
            len += replen;
        }

        // Is there a limit of number of replacements, if so, did we break it?
        if (limit != -1 && ++count >= limit)
            break;
    }

    return count;
}

funcion FreezePlayer(playerid)
{
	TogglePlayerControllable(playerid, 0);
}

funcion UnfreezePlayer(playerid)
{
	TogglePlayerControllable(playerid, 1);
}

funcion ReleasePlayer(playerid)
{
	SetPVarInt(playerid, "IsFrozen", 0);
	TogglePlayerControllable(playerid,1);
}

LoopingAnim(playerid,animlib[],animname[], Float:Speed, looping, lockx, locky, lockz, lp)
{
    gPlayerUsingLoopingAnim[playerid] = 1;
    ApplyAnimation(playerid, animlib, animname, Speed, looping, lockx, locky, lockz, lp);
}

StopLoopingAnim(playerid)
{
	gPlayerUsingLoopingAnim[playerid] = 0;
 	ApplyAnimation(playerid, "CARRY", "crry_prtial", 4.0, 0, 0, 0, 0, 0);
}

//·| << Timers de Objetos >> ========================================================================================|·
funcion Puerta2Abierta()
{
    MoveObject(PuertaH2,250.67543029785, 130.39466552734, 1037.9182128906, 0.97);
    SetTimer("Puerta2Cerrada", 5000, 0);
}
funcion Puerta1Abierta()
{
    MoveObject(PuertaH1,250.56510925293, 130.34936218262, 1032.2158203125, 0.97);
    SetTimer("Puerta1Cerrada", 8000, 0);
}
funcion Puerta2Cerrada()
{
    MoveObject(PuertaH2,250.67543029785, 131.59466552734, 1037.9182128906, 0.97);
    if(HaciaAbajo == 1) {
    SetTimer("Eabajo", 2000, 0); }
    else { }
}
funcion Puerta1Cerrada()
{
    MoveObject(PuertaH1,250.56510925293, 131.54936218262, 1032.2158203125, 0.97);
    if(HaciaArriba == 1) {
    SetTimer("Earriba", 2000, 0); }
    else {
    }
}

//Buttons
funcion ClosedSDderecha()
{
	MoveDynamicObject(ObjSD_derecha, 253.22101, 108.32223, 1002.21582, 4);
	return 1;
}

funcion ClosedSDizquierda()
{
	MoveDynamicObject(ObjSD_izquierda, 239.62317, 116.85412, 1002.21582, 4);
	return 1;
}

funcion CloseFBILobbyRight()
{
	MoveDynamicObject(FBILobbyRight,302.39355469,-1521.62988281,-46.13965225,4);
	return 1;
}

stock PlayerFacePlayer(playerid, targetplayerid) { // Yeah, this'll fix the handshake headaches we had last time around (shaking air).
	new
		Float: Angle;

	GetPlayerFacingAngle(playerid, Angle);
	SetPlayerFacingAngle(targetplayerid, Angle+180);
	return 1;
}

funcion ReFill(playerid)
{
	if(!IsAtGasStation(playerid) || !IsPlayerInAnyVehicle(playerid) || veh_gasolina[GetPlayerVehicleID(playerid)] >= 200 || GetPlayerCash(playerid) < 1)
	{
		StopRefueling(playerid);
	}
	else
	{
	    new engine,lights,alarm,doors,bonnet,boot,objective;
    	GetVehicleParamsEx(GetPlayerVehicleID(playerid),engine,lights,alarm,doors,bonnet,boot,objective);
		if(engine == VEHICLE_PARAMS_ON) return StopRefueling(playerid);
		veh_gasolina[GetPlayerVehicleID(playerid)] += 125;
		PrecioGasolinaVeh[playerid] += 20;
		if(veh_gasolina[GetPlayerVehicleID(playerid)] >= 200) veh_gasolina[GetPlayerVehicleID(playerid)] = 200;
	}
	return true;
}

stock StopRefueling(playerid)
{
	new string[128];
	GivePlayerCash(playerid, -PrecioGasolinaVeh[playerid], "llenar gasolina");
	format(string, sizeof string, "Tu vehiculo a sido llenado por $%s.", diner_coma(PrecioGasolinaVeh[playerid]));
	SendClientMessage(playerid, COLOR_GRAD2, string);
    //TillEx(4, 200); // Gasolineras.
	RefuelingVehicle[playerid] = 0; PrecioGasolinaVeh[playerid] = 0; KillTimer(RefuelingVehicleTimer[playerid]);
	return true;
}

public OnVehicleSpawn(vehicleid)
{
	//uwu
	arr_Engine{vehicleid} = 0;
	veh_gasolina[vehicleid] = 200;
	if (EsVehFabrica(vehicleid))
	{
		new id = EsVehFabrica(vehicleid);
		SetVehicleVirtualWorld(vehicleid, InfoNegocio[id][nInteriorVW]);
		LinkVehicleToInterior(vehicleid, InfoNegocio[id][nInteriorInt]);
		SetVehicleHealth(vehicleid, 5000.0);
		if (vehicleid == InfoNegocio[id][nVehiculo][0])
		{
			Loop(e, 5, 0) if (IsValidDynamicObject(InfoNegocio[id][nBarrilVeh1][e])) { DestroyDynamicObject(InfoNegocio[id][nBarrilVeh1][e]); }
			InfoNegocio[id][nCountQVeh1] = 0;
			InfoNegocio[id][nVeh1SinUso] = 0;
		}
		if (vehicleid == InfoNegocio[id][nVehiculo][1])
		{
			Loop(e, 5, 0) if (IsValidDynamicObject(InfoNegocio[id][nBarrilVeh2][e])) { DestroyDynamicObject(InfoNegocio[id][nBarrilVeh2][e]); }
			InfoNegocio[id][nCountQVeh2] = 0;
			InfoNegocio[id][nVeh2SinUso] = 0;
		}
		return  1;
	}
	// vehiculos de usuarios uwu
	Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] == vehicleid)
	{
		InfoVehiculo[v][vMaleteroOn] = 0;
		DestroyVehicle(vehicleid);
		InfoVehiculo[v][vIG_id] = CreateVehicle(InfoVehiculo[v][vModelo], InfoVehiculo[v][vPosicionX], InfoVehiculo[v][vPosicionY], InfoVehiculo[v][vPosicionZ], InfoVehiculo[v][vPosicionR], InfoVehiculo[v][vColor_1], InfoVehiculo[v][vColor_2], -1, InfoVehiculo[v][vSirena]);
		new v_vehicleid = InfoVehiculo[v][vIG_id];
		if (InfoVehiculo[v][vSeguro] != 0) LockPlayerVehicle(v_vehicleid);
		if (InfoVehiculo[v][vPaintJob] != -1) ChangeVehiclePaintjob(v_vehicleid, InfoVehiculo[v][vPaintJob]);
		LinkVehicleToInterior(v_vehicleid, InfoVehiculo[v][vInterior]);
		SetVehicleExVirtualWorld(v_vehicleid, InfoVehiculo[v][vVirtualWorld]);
		if (InfoVehiculo[v][vModelo] == 528 || InfoVehiculo[v][vModelo] == 427) SetVehicleHealth(v_vehicleid, 5000.0);
		else SetVehicleHealth(v_vehicleid, InfoVehiculo[v][vVida]);
		UpdateVehicleDamageStatus(v_vehicleid, InfoVehiculo[v][vDanioSuperficie], InfoVehiculo[v][vDanioPuertas], InfoVehiculo[v][vDanioLuces], InfoVehiculo[v][vDanioRuedas]);
		Loop(m, MAX_MODIFICACIONES, 0) { AddVehicleComponent(v_vehicleid, InfoVehiculo[v][vModificacion][m]); }
		if (!isnull(InfoVehiculo[v][vCallSign]))
		{
			DestroyDynamic3DTextLabel(InfoVehiculo[v][vOnCallSign]);
			InfoVehiculo[v][vOnCallSign] = CreateDynamic3DTextLabel(InfoVehiculo[v][vCallSign], 0xEBEBEBFF, -1.0, -2.8, 0.0, 30.0, INVALID_PLAYER_ID, v_vehicleid);
		}
		foreach(new playerid: Player) if (IsPlayerConnectedEx(playerid))
		{
			if (llaves_vehiculo(playerid, v_vehicleid) != -1)
			{
				new string[195];
				format(string, sizeof string, "Tu {00AE57}%s{EBEBEB} ha sido enviado a la última posición donde lo aparcaste.", GetVehicleName(v_vehicleid));
				SendClientMessage(playerid, 0xEBEBEBFF, string);
			}
		}
		return 1;
	}
	return 1;
}

stock CleanScreen()
{
    for(new i=0; i<MAX_PLAYERS; i++)
    {
        ClearChat(i);
    }
    return 1;
}

funcion DisableVehicleAlarm(vehicleid)
{
    new engine, lights, alarm, doors, bonnet, boot, objective;
    GetVehicleParamsEx(vehicleid, engine, lights, alarm, doors, bonnet, boot, objective);
    SetVehicleParamsEx(vehicleid, engine, lights, false, doors, bonnet, boot, objective);
}

stock IsLocolowVehicle(veh)
{
	new model = GetVehicleModel(veh);
    switch(model)
    {
        case 412,534,535,536,566,567,576: return 1;
    }
    return 0;
}

stock SendReportToQue(reportfrom, report[])
{
    new bool:breakingloop = false, newid = -1;

        for(new i=0;i<MAX_REPORTS;i++)
        {
                if(!breakingloop)
                {
                        if(Reports[i][HasBeenUsed] == 0)
                        {
                                breakingloop = true;
                                newid = i;
                        }
                }
    }
    if(newid != -1)
    {
        alm(Reports[newid][Report], report);
        Reports[newid][ReportFrom] = reportfrom;
        Reports[newid][TimeToExpire] = 5;
        Reports[newid][HasBeenUsed] = 1;
        Reports[newid][BeingUsed] = 1;
        Reports[newid][ReportExpireTimer] = SetTimerEx("ReportTimer", 30000, 0, "d", newid);
        new string[250];
        format(string, sizeof string, "Reporte de %s(%d) {RID: %d]: %s", NombreOriginal(reportfrom), reportfrom, newid, (report));
        SendAdminMessage(0xFFFF91FF, string);
    }
    else
    {
        ClearReports();
		SendReportToQue(reportfrom, report);
	}
	return 1;
}

funcion ClearReports()
{
	for(new i=0;i<MAX_REPORTS;i++)
	{
		alm(Reports[i][Report], "None");
		Reports[i][CheckingReport] = 999;
        Reports[i][ReportFrom] = 999;
        Reports[i][TimeToExpire] = 5;
        Reports[i][HasBeenUsed] = 0;
        Reports[i][BeingUsed] = 0;
	}
	return 1;
}

funcion ReportTimer(reportid)
{
	if(Reports[reportid][BeingUsed] == 1)
	{
	    if(Reports[reportid][TimeToExpire] > 0)
	    {
	        Reports[reportid][TimeToExpire]--;
	        if(Reports[reportid][TimeToExpire] == 0)
	        {
	            SendClientMessage(Reports[reportid][ReportFrom], COLOR_GRAD2, "Tu reporte ha expirado. Tu puedes intentar mandando otro reporte.");
	            SendClientMessage(Reports[reportid][ReportFrom], COLOR_GRAD2, "También es recomendable que busques ayuda en nuestro foro discord.gg/4zWvyxnYMJ");
	            Reports[reportid][BeingUsed] = 0;
	            Reports[reportid][ReportFrom] = 999;
	            return 1;
	        }
  			Reports[reportid][ReportExpireTimer] = SetTimerEx("ReportTimer", 30000, 0, "d", reportid);
		}
	}
	return 1;
}

funcion ReplyTimer(reportid)
{
    Reports[reportid][BeingUsed] = 0;
	Reports[reportid][ReportFrom] = 999;
    Reports[reportid][CheckingReport] = 999;
}

// CHECK VIP EXPIRE
stock IsWAAVehicle(veh)
{
    new model = GetVehicleModel(veh);
    switch(model)
    {
        case 558,559,560,561,562,565: return 1;
    }
    return 0;
}

funcion RadioBroadCast(playerid, color, string[])
{
	new MiscString[128], Float: aaaPositions[3];
	foreach(Player, i)
	{
		if(InfoPersonaje[i][pFrecuencia_radio] == InfoPersonaje[playerid][pFrecuencia_radio] && InfoPersonaje[i][pTogPortatil] != 0 || See_FRC[i] == 1) // Frecuencia de todos, igual al del player, tener todos radio y tenerla todos encendida.
		{                                                                                   // Segunda opción: Tener /verwalkie activado y poder ver todos el canal.
		    if(See_FRC[playerid] == 0) // Espiar canal /wt - /wa - /pr.
		    {
				GetPlayerPos(i, aaaPositions[0], aaaPositions[1], aaaPositions[2]);
				format(MiscString, sizeof(MiscString), "** Radio (%d khz) ** %s: %s", InfoPersonaje[playerid][pFrecuencia_radio], NombreJugador(playerid), string);
				SendClientMessage(i, 0x6DFB6DFF, MiscString);
			}
			else
			{
				format(MiscString, sizeof(MiscString), "[ADM] WALKIE OOC: (( Administrador dice %s: %s))", NombreJugador(playerid), string);
				SendClientMessage(i, 0x6DFB6DFF, MiscString);
			}
		}
	}
}
funcion RadioBroadCastOOC(playerid, color, string[])
{
	new MiscString[128], Float: aaaPositions[3];
	foreach(Player, i)
	{
		if(InfoPersonaje[i][pFrecuencia_radio] == InfoPersonaje[playerid][pFrecuencia_radio] && InfoPersonaje[i][pTogPortatil] != 0 || See_FRC[i] == 1) // Frecuencia de todos, igual al del player, tener todos radio y tenerla todos encendida.
		{                                                                                   // Segunda opción: Tener /verwalkie activado y poder ver todos el canal.
		    if(See_FRC[playerid] == 0) // Espiar canal /wt - /wa - /pr.
		    {
				GetPlayerPos(i, aaaPositions[0], aaaPositions[1], aaaPositions[2]);
				format(MiscString, sizeof(MiscString), "*[OOC] WALKIE (%d khz) ** (( %s: %s ))", InfoPersonaje[playerid][pFrecuencia_radio], NombreJugador(playerid), string);
				SendClientMessage(i, 0x6DFB6DFF, MiscString);
			}
			else
			{
				format(MiscString, sizeof(MiscString), "[ADM] WALKIE OOC: (( Administrador dice %s: %s))", NombreJugador(playerid), string);
				SendClientMessage(i, 0x6DFB6DFF, MiscString);
			}
		}
	}
}  

funcion ShowRol(playerid)
{
	if(ShowRules[playerid] == 1)
	{
	    switch(RulesTime[playerid])
	    {
	        case 1:
	        {
	            ClearChat(playerid);
	        	PuedeD[playerid] = 1;
	        	SetTimerEx("TutRolTimer", 14000, 0, "d", playerid);
	        	SetPlayerVirtualWorld(playerid, playerid+1);
	        	TogglePlayerControllable(playerid, 0);
				Streamer_UpdateEx(playerid,370.0804,-2087.8767,7.8359);
				SetPlayerPos(playerid,370.0804,-2087.8767,-10.0);
				SetPlayerCameraPos(playerid,423.3802,-2067.7915,29.8605);
				SetPlayerCameraLookAt(playerid,370.0804,-2087.8767,7.8359);
	        	SendClientMessage(playerid, COLOR_WHITE, "Hola! Bienvenido al tutorial, esperamos que aprendas y te diviertas junto a todos.");
	        	SendClientMessage(playerid, COLOR_WHITE, "Un administrador te envió al tutorial con el fin de ayudarte a aprender y a disfrutar el roleplay.");
	        	SendClientMessage(playerid, COLOR_WHITE, "Pulsa la tecla ESPACIO para seguir.");

			}
	        case 2:
	        {
	            ClearChat(playerid);
	        	PuedeD[playerid] = 1;
	        	SetTimerEx("TutRolTimer", 15000, 0, "d", playerid);
	        	SendClientMessage(playerid, COLOR_GENERAL, "DeathMatch [DM]");
	        	SendClientMessage(playerid, COLOR_WHITE, "¿Qué es DeathMatch [DM]? Bueno esto se llama a matar o golpear a una persona sin tener una razon para hacerlo.");
	        	SendClientMessage(playerid, COLOR_WHITE, "Un ejemplo, si vas por la calle y empiezas a pegarle o a dispararle a alguien sin tener ninún motivo");
	        	SendClientMessage(playerid, COLOR_WHITE, "hasta matarlo, la persona te reportará y tu puedes ser encarcelado por 10 a 30 minutos.");
	        	SendClientMessage(playerid, COLOR_WHITE, "Haciendo esto estarias haciendo DeathMatch y va en contra las reglas del servidor.");
	        }
	        case 3:
	        {
	            ClearChat(playerid);
	        	PuedeD[playerid] = 1;
	        	SetTimerEx("TutRolTimer", 15000, 0, "d", playerid);
	        	SendClientMessage(playerid, COLOR_GENERAL, "Metagaming [MG]");
	        	SendClientMessage(playerid, COLOR_WHITE, "¿Qué es Metagaming [MG]? Es usar información OOC dentro de IC o viceversa ¿No te quedo muy claro no?");
	        	SendClientMessage(playerid, COLOR_WHITE, "bueno, como verás cada usuario tiene un nombre en su cabeza, es obvio que en la vida real no pasa lo mismo");
	        	SendClientMessage(playerid, COLOR_WHITE, "para saber su nombre tienes que preguntarle; Hola ¿Cual es tu nombre? y el te responderá, desde ese momento ya");
	        	SendClientMessage(playerid, COLOR_WHITE, "puedes llamarlo por su nombre. También es usar signos de caracteres en el chat IC (xD, :), xP, etc).");
	        }
	        case 4:
	        {
	            ClearChat(playerid);
	        	PuedeD[playerid] = 1;
	        	SetTimerEx("TutRolTimer", 13000, 0, "d", playerid);
	        	SendClientMessage(playerid, COLOR_GENERAL, "In Character - Out of Character (IC - OOC)");
	        	SendClientMessage(playerid, COLOR_WHITE, "IC : Es la información que tu personaje obtiene en su vida (In Game), y sólo tu personaje la sabe.");
	        	SendClientMessage(playerid, COLOR_WHITE, "OOC: Es la información que tu sabes como persona, la que está manejando el personaje desde tu computador.");
	        	SendClientMessage(playerid, COLOR_WHITE, "Por eso es que no puedes mezclar información IC con OOC o viceversa. Por que estarías haciendo Metagaming.");
	        }
	        case 5:
	        {
	            ClearChat(playerid);
	        	PuedeD[playerid] = 1;
	        	SetTimerEx("TutRolTimer", 15000, 0, "d", playerid);
	        	SendClientMessage(playerid, COLOR_GENERAL, "Powergaming [PG]");
	        	SendClientMessage(playerid, COLOR_WHITE, "¿Qué es Powergaming [PG]? Esto se llama a realizar actos (roles) ficticios y fuera de lo posible en la vida real.");
	        	SendClientMessage(playerid, COLOR_WHITE, "Por ejemplo, Usas el comando /me se tira del edificio y sige caminando. Es lógico que tu no vas a tirarte");
	        	SendClientMessage(playerid, COLOR_WHITE, "de un quinto piso y salir vivo no?. También es obligar/forzar a una persona hacer un ROL.");
	        	SendClientMessage(playerid, COLOR_WHITE, "Por ejemplo, usando el comando /me le roba su dinero y se va corriendo. Imposible, para rolear tienes que tener criterio.");
	        	SendClientMessage(playerid, COLOR_WHITE, "Recuerda eres un personaje REAL y tienes que portate como tal.");
	        }
	        case 6:
	        {
	            ClearChat(playerid);
	        	PuedeD[playerid] = 1;
	        	SetTimerEx("TutRolTimer", 14000, 0, "d", playerid);
	        	SendClientMessage(playerid, COLOR_GENERAL, "Revenge Kill (RK)");
	        	SendClientMessage(playerid, COLOR_WHITE, "¿Qué es Revenge Kill [RK]? Cuando `mueres´ en un ROL (Asalto a un banco, guerra de pandillas, etc)");
	        	SendClientMessage(playerid, COLOR_WHITE, "tu no puedes regresar al mismo lugar y vengarte a por quien te mató, ya que tu exactamente no mueres, resultas herido");
	        	SendClientMessage(playerid, COLOR_WHITE, "y cuando te recuperas no recuerdas nada, entonces no puedes volver al mismo lugar, ya que no recuerdas nada.");
	        }
	        case 7:
	        {
	            ClearChat(playerid);
	        	PuedeD[playerid] = 1;
	        	SetTimerEx("TutRolTimer", 15000, 0, "d", playerid);
	        	SendClientMessage(playerid, COLOR_GENERAL, "Bad Driving (BD) - Badly Parked Car (BPC)");
	        	SendClientMessage(playerid, COLOR_WHITE, "¿Qué es Bad Driving (BD) y Badly Parked Car (BPC)?");
	        	SendClientMessage(playerid, COLOR_WHITE, "Esto es muy sencillo y creo que su mismo nombre lo dice, se llama a manejar incorrectamente (por las veredas, atropellando gente, etc),");
	        	SendClientMessage(playerid, COLOR_WHITE, "y es en contra las reglas del servidor, recuerda que estás simulando la vida real.");
	        	SendClientMessage(playerid, COLOR_WHITE, "Badly Parked Car se define en estacionar tu vehiculo de una manera imposible, o No-RP, por ejemplo en medio del asfalto.");
	        }
	        case 8:
	        {
	            ClearChat(playerid);
	        	PuedeD[playerid] = 1;
	        	SetTimerEx("TutRolTimer", 15000, 0, "d", playerid);
	        	SendClientMessage(playerid, COLOR_GENERAL, "Car Kill - Car Jack");
	        	SendClientMessage(playerid, COLOR_WHITE, "¿Car Kill (CK) y Car Jack (CJ)?");
	        	SendClientMessage(playerid, COLOR_WHITE, " * Car Kill es matar a una persona atropellandolo en varias ocaciones hasta matarlo.");
	        	SendClientMessage(playerid, COLOR_WHITE, " * Car Jack es sacar a una persona de su auto sin ningún rol alguno.");
	        	SendClientMessage(playerid, COLOR_WHITE, " * Esos 2 Terminos son en contra del servidor y puedes ser castigado.");
	        }
	        case 9:
	        {
	            ClearChat(playerid);
	        	PuedeD[playerid] = 1;
	        	SetTimerEx("TutRolTimer", 14000, 0, "d", playerid);
	        	SendClientMessage(playerid, COLOR_GENERAL, "Fin - Reglas de Rol");
	        	SendClientMessage(playerid, COLOR_WHITE, "Bien, espero que hayas aprendido en este resumen de las reglas de nuestro servidor, puedes entrar a nuestro");
	        	SendClientMessage(playerid, COLOR_WHITE, "foro (discord.gg/4zWvyxnYMJ) y buscar más información, ahora volverás a tu posición anterior, no perderás nada.");
	        	SendClientMessage(playerid, COLOR_WHITE, "Recuerda siempre que más importante es el rol de un presonaje. Bienvenido y disfruta del servidor!");
	        }
	        case 10:
	        {
	            ClearChat(playerid);
				RulesTime[playerid] = 0; RulesTime[playerid] = 0;
				SetPlayerPos(playerid, GetPVarFloat(playerid, "rOldX"), GetPVarFloat(playerid, "rOldY"), GetPVarFloat(playerid, "rOldZ"));
				SetPlayerVirtualWorld(playerid, GetPVarInt(playerid, "rOldVW"));
				SetPlayerInterior(playerid, GetPVarInt(playerid, "rOldInt"));
				InfoPersonaje[playerid][pVirtualWorld] = GetPVarInt(playerid, "rOldVW");
				InfoPersonaje[playerid][pInterior] = GetPVarInt(playerid, "rOldInt");
				ShowRules[playerid] = 0;
		    	RulesTime[playerid] = 0;
		        TogglePlayerControllable(playerid, 1);
		        ClearAnimations(playerid);
		        SetCameraBehindPlayer(playerid);
		        SendClientMessage(playerid, COLOR_GENERAL, "Puedes seguir roleando, recuerda que su duda puede estar en /soporte, gracias.");
	        }
		}
	}
	return 1;
}

funcion TutRolTimer(playerid)
{
	PuedeD[playerid] = 0;
	GameTextForPlayer(playerid, "Pulsa ESPACIO", 2000, 3);
}

stock fcreate(filename[])
{
	if (fexist(filename)) return false;
	new File:fhnd;
	fhnd = fopen(filename,io_write);
	if (fhnd)
	{
		fclose(fhnd);
		return true;
	}
	return false;
}

funcion splits(const strsrc[], strdest[][], delimiter)
{
	new i, li;
	new aNum;
	new len;
	while(i <= strlen(strsrc)){
		if(strsrc[i]==delimiter || i==strlen(strsrc)){
			len = strmid(strdest[aNum], strsrc, li, i, 128);
			strdest[aNum][len] = 0;
			li = i+1;
			aNum++;
		}
		i++;
	}
	return 1;
}

IsKeyJustDown(key, newkeys, oldkeys)
{
	if((newkeys & key) && !(oldkeys & key)) return 1;
	return 0;
}

ClearPropiedad(id) //renovado by EdinsonWalker (16-01-2020)
{
	new query[370];
	InfoCasa[id][cSeguro] = 1;
	alm(InfoCasa[id][cPropietario], "gobielno");
	InfoCasa[id][cVenta] = 0; // Casa en venta.
	InfoCasa[id][cDinero] = 0;
	InfoCasa[id][cMateriales] = 0;
	Loop(x, 10, 0)
	{
		InfoCasa[id][cArmario][x] = 0;
		InfoCasa[id][cArmarioCant][x] = 0;
		mysql_format(DBInsanity, query, sizeof query, "UPDATE casas SET Armario%d = 0 , ArmarioCant%d = 0 WHERE ID = '%d'", x+1, x+1, InfoCasa[id][cID_sql]);
		mysql_tquery(DBInsanity, query);
	}
	mysql_format(DBInsanity, query, sizeof query, "UPDATE casas SET Propietario = '%e', Seguro = 1, Venta = 0, BolosUwU = 0, Materiales = 0 WHERE ID = '%d'", InfoCasa[id][cPropietario], InfoCasa[id][cID_sql]);
	mysql_tquery(DBInsanity, query);
    LabelPickup_casa(id);
}

forward Float: GetVehicleSpeed(vehicleid);
public Float: GetVehicleSpeed(vehicleid)
{
	new Float:x,Float:y,Float:z;
	GetVehicleVelocity(vehicleid,x,y,z);
	return floatmul(VectorSize(x,y,z),170.0);
}

IsValidIP(ip[])
{
    new a;
	for (new i = 0; i < strlen(ip); i++)
	{
		if (ip[i] == '.')
		{
		    a++;
		}
	}
	if (a != 3)
	{
	    return 1;
	}
	return 0;
}

CheckBan(ip[])
{
	new string[20];
    new File: file = fopen("Archivos_CFG/ban.cfg", io_read);
	while(fread(file, string))
	{
	    if (strcmp(ip, string, true, strlen(ip)) == 0)
	    {
	        fclose(file);
	        return 1;
	    }
	}
	fclose(file);
	return 0;
}

AddBan(ip[])
{
	if (CheckBan(ip) == 0)
	{
		new File: file = fopen("Archivos_CFG/ban.cfg", io_append);
		new string[20];
		format(string, sizeof string, "\n%s", ip);
	 	fwrite(file, string);
	 	fclose(file);
	 	foreach(Player, playerid)
		{
		    new playerIP[16];
			GetPlayerIp(playerid, playerIP, sizeof(playerIP));
			if (strcmp(playerIP, ip) == 0)
			{
	            SendClientMessage(playerid, COLOR_GENERAL, "Insanity Roleplay: {FFFFFF} Fuiste baneado del servidor.");
				Kick(playerid);
			}
		}
		return 1;
	}
	return 0;
}

RemoveBan(ip[])
{
    if (CheckBan(ip) == 1)
	{
	    new string[20];
		new File: file = fopen("Archivos_CFG/ban.cfg", io_read);
		fcreate("Archivos_CFG/tempBan.cfg");
		new File: file2 = fopen("Archivos_CFG/tempBan.cfg", io_append);
		while(fread(file, string))
		{
			if (strcmp(ip, string, true, strlen(ip)) != 0 && strcmp("\n", string) != 0)
		    {
				fwrite(file2, string);
			}
		}
		fclose(file);
		fclose(file2);
		file = fopen("Archivos_CFG/ban.cfg", io_write);
		file2 = fopen("Archivos_CFG/tempBan.cfg", io_read);
		while(fread(file2, string))
		{
			fwrite(file, string);
		}
		fclose(file);
		fclose(file2);
		fremove("Archivos_CFG/tempBan.cfg");
		return 1;
    }
	return 0;
}


PreloadAnimations(playerid)
{
	for (new i = 0; i < sizeof(g_aPreloadLibs); i ++)
	{
		ApplyAnimation(playerid, g_aPreloadLibs[i], "null", 0.0, 0, 0, 0, 0, 0);
	}
	return 1;
} // Credits to Emmet, South Central Roleplay

public OnPlayerUpdate(playerid)
{
	if (usuario_registro[playerid] != 0)
	{
		//actualiza vida & chaleco como pequeño anticheat
		SetPlayerArmour(playerid, InfoPersonaje[playerid][pChaleco]);
		if (GetPVarInt(playerid, "EstaCrack") == 0) SetPlayerHealth(playerid, InfoPersonaje[playerid][pVida]);
		else SetPlayerHealth(playerid, 15.0);
		//sistema de inventario
		if(InfoPersonaje[playerid][pManoDerecha] > 0)
		{
			if(GetPlayerWeapon(playerid) != InfoInventario[InfoPersonaje[playerid][pManoDerecha]][IDArma] && InfoPersonaje[playerid][pManoDerechaCant] > 0)
			{
			    if(InfoPersonaje[playerid][pManoDerechaCant] > 0 && GetPlayerWeaponAmmo(playerid, InfoInventario[InfoPersonaje[playerid][pManoDerecha]][IDArma]) == 0)
				{
			        ResetPlayerWeapons(playerid);
			        GivePlayerWeapon(playerid, InfoInventario[InfoPersonaje[playerid][pManoDerecha]][IDArma], InfoPersonaje[playerid][pManoDerechaCant]);
			    }
				SetPlayerArmedWeapon(playerid, InfoInventario[InfoPersonaje[playerid][pManoDerecha]][IDArma]);
			}
			else if(InfoPersonaje[playerid][pManoDerechaCant] == 0)
			{ //Si no le queda munición
				if(GetPlayerWeapon(playerid) != 0) SetPlayerArmedWeapon(playerid, 0);
			}
		}
		//otros
		if (GetPVarInt(playerid, "IsFrozen") == 1) TogglePlayerControllable(playerid, 0);
	} // } end
	return 1;
}

funcion SyncPlayerTime(playerid)
{
	new hour, minute, second;
	gettime(hour, minute, second);
	SetPlayerTime(playerid, hour, minute);
	return 1;
}

Random(min, max)
{
    new a = random(max - min) + min;
    return a;
}

LoadObjects(playerid)
{
	TogglePlayerControllable(playerid, false);
	TextDrawShowForPlayer(playerid, TD_Load[0]);
	TextDrawShowForPlayer(playerid, TD_Load[1]);
	SetPVarInt(playerid, "LoadingObjects", 1);
	return SetTimerEx("SafeLoadObjects", 4000, false, "d", playerid);
}

forward SafeLoadObjects(playerid);
public SafeLoadObjects(playerid)
{
	TextDrawHideForPlayer(playerid, TD_Load[0]);
	TextDrawHideForPlayer(playerid, TD_Load[1]);
	DeletePVar(playerid, "LoadingObjects");
	TogglePlayerControllable(playerid, true);
}

ReturnUser(text[])
{
	new strPos, returnID = 0, bool: isnum = true;
	while (text[strPos])
	{
		if (isnum)
		{
			if ('0' <= text[strPos] <= '9') returnID = (returnID * 10) + (text[strPos] - '0');
			else isnum = false;
		}
		strPos++;
	}
	if (isnum)
	{
		if (IsPlayerConnected(returnID)) return returnID;
	}
	else
	{
		new sz_playerName[MAX_PLAYER_NAME];
		foreach(Player, i)
		{
			GetPlayerName(i, sz_playerName, MAX_PLAYER_NAME);
			if (!strcmp(sz_playerName, text, true, strPos)) return i;
		}
	}
	return INVALID_PLAYER_ID;
}

//sistema de vehículos dinámicos renovado by EdinsonWalker (09/01/2020) - base: AlexDonuts
crear_vehiculo(playerid, modelid, Float: x, Float: y, Float: z, Float: angle, vehint, vehvw, color1, color2, price, maxeMaletero, type, negocio)
{
	Loop(vid, MAX_VEHICULOS, 1) if (!InfoVehiculo[vid][vModelo])
	{
	    if (negocio != -1)
	    {
			new golfm[129];
			format(golfm, sizeof golfm, "Negocio_%d", negocio);
			alm(InfoVehiculo[vid][vPropietario], golfm);
			InfoVehiculo[vid][vNegocio] = negocio;
	    }
	    else
	    {
			InfoVehiculo[vid][vNegocio] = 0;
			if (playerid != -1)
			{
				alm(InfoVehiculo[vid][vPropietario], InfoPersonaje[playerid][pNombre_Apellido]);
			}
			else
			{
				switch (type)
				{
					case 1..50:
					{
						if (InfoFaccion[type][fTipo] != 0)
						{
							alm(InfoVehiculo[vid][vPropietario], InfoFaccion[type][fLogo]);
						}
					}
					case 200: alm(InfoVehiculo[vid][vPropietario], "VIP");
					case 300: alm(InfoVehiculo[vid][vPropietario], "STAFF");
					case 600: alm(InfoVehiculo[vid][vPropietario], "RENTA");
					default: alm(InfoVehiculo[vid][vPropietario], "SERVER");
				}
			}
		}
		alm(InfoVehiculo[vid][vNombre], GetNameVehicle(modelid));
		InfoVehiculo[vid][vTipo] = type;
		InfoVehiculo[vid][vModelo] = modelid;
		InfoVehiculo[vid][vPosicionX] = x;
		InfoVehiculo[vid][vPosicionY] = y;
		InfoVehiculo[vid][vPosicionZ] = z;
		InfoVehiculo[vid][vPosicionR] = angle;
		InfoVehiculo[vid][vInterior] = vehint;
		InfoVehiculo[vid][vVirtualWorld] = vehvw;
		InfoVehiculo[vid][vVida] = 1000.0;
		InfoVehiculo[vid][vDanioSuperficie] = 0;
		InfoVehiculo[vid][vDanioPuertas] = 0;
		InfoVehiculo[vid][vDanioLuces] = 0;
		InfoVehiculo[vid][vDanioRuedas] = 0;
		InfoVehiculo[vid][vGasolina] = 200;
		InfoVehiculo[vid][vSpawned] = 1;
		InfoVehiculo[vid][vColor_1] = color1;
		InfoVehiculo[vid][vColor_2] = color2;
		InfoVehiculo[vid][vPaintJob] = -1;
		InfoVehiculo[vid][vSeguro] = 0;
		InfoVehiculo[vid][vPrecio] = price;
		InfoVehiculo[vid][vEmbargo] = 0;
		InfoVehiculo[vid][vMulta] = 0;
		InfoVehiculo[vid][vMaxMaletero] = maxeMaletero;
		Loop(m, MAX_MODIFICACIONES, 0) { InfoVehiculo[vid][vModificacion][m] = 0; }
		Loop(m, 10, 0) { InfoVehiculo[vid][vMaletero][m] = 0; InfoVehiculo[vid][vMaleteroCant][m] = 0; }
		// create vehicle
		new vehicleid = CreateVehicle(modelid, x, y, z, angle, color1, color2, -1);
		InfoVehiculo[vid][vIG_id] = vehicleid;
		veh_gasolina[vehicleid] = InfoVehiculo[vid][vGasolina];
		SetVehicleVirtualWorld(vehicleid, InfoVehiculo[vid][vVirtualWorld]);
		LinkVehicleToInterior(vehicleid, InfoVehiculo[vid][vInterior]);
		if (playerid != -1)
		{
			SetPlayerPos(playerid, x, y, z);
			PutPlayerInVehicle(playerid, vehicleid, 0);
		}
		new query[2050];
		//opción idsql ya creada.
		if (InfoVehiculo[vid][vID_sql] != 0)
		{
			mysql_format(DBInsanity, query, sizeof query, "UPDATE vehiculos SET Nombre = '%e', Propietario = '%e', Tipo = '%d', Negocio = '%d', Modelo = '%d', Posicion_X = '%f', Posicion_Y = '%f', Posicion_Z = '%f', Posicion_R = '%f', Interior = '%d', VirtualWorld = '%d', Vida = '%f', \
			Gasolina = '%d', Color_1 = '%d', Color_2 = '%d', Precio = '%d', MaxMaletero = '%d' WHERE ID = '%d'",
			InfoVehiculo[vid][vNombre],
			InfoVehiculo[vid][vPropietario],
			InfoVehiculo[vid][vTipo],
			InfoVehiculo[vid][vNegocio],
			InfoVehiculo[vid][vModelo],
			InfoVehiculo[vid][vPosicionX],
			InfoVehiculo[vid][vPosicionY],
			InfoVehiculo[vid][vPosicionZ],
			InfoVehiculo[vid][vPosicionR],
			InfoVehiculo[vid][vInterior],
			InfoVehiculo[vid][vVirtualWorld],
			InfoVehiculo[vid][vVida],
			InfoVehiculo[vid][vGasolina],
			InfoVehiculo[vid][vColor_1],
			InfoVehiculo[vid][vColor_2],
			InfoVehiculo[vid][vPrecio],
			InfoVehiculo[vid][vMaxMaletero],
			InfoVehiculo[vid][vID_sql]);
			mysql_tquery(DBInsanity, query);
			vid = MAX_VEHICULOS;
			return 1;
		}
		mysql_format(DBInsanity, query, sizeof query, "INSERT INTO vehiculos (Nombre, Propietario, Tipo, Negocio, Modelo, Posicion_X, Posicion_Y, Posicion_Z, Posicion_R, Interior, VirtualWorld, Vida, Gasolina, Color_1, \
		Color_2, Precio, MaxMaletero) VALUES ('%e', '%e', '%d', '%d', '%d', '%f', '%f', '%f', '%f', '%d', '%d', '%f', '%d', '%d', '%d', '%d', '%d')",
		InfoVehiculo[vid][vNombre],
		InfoVehiculo[vid][vPropietario],
		InfoVehiculo[vid][vTipo],
		InfoVehiculo[vid][vNegocio],
		InfoVehiculo[vid][vModelo],
		InfoVehiculo[vid][vPosicionX],
		InfoVehiculo[vid][vPosicionY],
		InfoVehiculo[vid][vPosicionZ],
		InfoVehiculo[vid][vPosicionR],
		InfoVehiculo[vid][vInterior],
		InfoVehiculo[vid][vVirtualWorld],
		InfoVehiculo[vid][vVida],
		InfoVehiculo[vid][vGasolina],
		InfoVehiculo[vid][vColor_1],
		InfoVehiculo[vid][vColor_2],
		InfoVehiculo[vid][vPrecio],
		InfoVehiculo[vid][vMaxMaletero]);
		mysql_tquery(DBInsanity, query, "CreateVehicleUser", "i", vid);
		vid = MAX_VEHICULOS;
	}
	return 1;
}

forward CreateVehicleUser(id);
public CreateVehicleUser(id)
{
	totalvehiculos++;
	InfoVehiculo[id][vID_sql] = cache_insert_id();
	cache_unset_active();
    return 1;
}

stock Load_Vehicles(playerid)
{
	Loop(vid, totalvehiculos, 1) if (InfoVehiculo[vid][vTipo] == 0 && strcmp(InfoPersonaje[playerid][pNombre_Apellido], InfoVehiculo[vid][vPropietario], true) == 0)
	{
		if (InfoVehiculo[vid][vModelo] != 0 && InfoVehiculo[vid][vEmbargo] == 0 && InfoVehiculo[vid][vIG_id] == 0)
		{
			new Coche;
			Coche = CreateVehicle(InfoVehiculo[vid][vModelo], InfoVehiculo[vid][vPosicionX], InfoVehiculo[vid][vPosicionY], InfoVehiculo[vid][vPosicionZ], InfoVehiculo[vid][vPosicionR], InfoVehiculo[vid][vColor_1], InfoVehiculo[vid][vColor_2], -1, InfoVehiculo[vid][vSirena]);
			InfoVehiculo[vid][vIG_id] = Coche;
			InfoVehiculo[vid][vSpawned] = 1;
			veh_gasolina[Coche] = InfoVehiculo[vid][vGasolina];
			if (InfoVehiculo[vid][vModelo] == 528 || InfoVehiculo[vid][vModelo] == 427) SetVehicleHealth(Coche, 5000.0);
			else SetVehicleHealth(Coche, InfoVehiculo[vid][vVida]);
			LinkVehicleToInterior(Coche, InfoVehiculo[vid][vInterior]);
			SetVehicleExVirtualWorld(Coche, InfoVehiculo[vid][vVirtualWorld]);
			UpdateVehicleDamageStatus(Coche, InfoVehiculo[vid][vDanioSuperficie], InfoVehiculo[vid][vDanioPuertas], InfoVehiculo[vid][vDanioLuces], InfoVehiculo[vid][vDanioRuedas]);
			if (InfoVehiculo[vid][vSeguro] != 0) LockPlayerVehicle(Coche);
			Load_Mods(vid);
			if (!isnull(InfoVehiculo[vid][vCallSign]))
			{
				DestroyDynamic3DTextLabel(InfoVehiculo[vid][vOnCallSign]);
				InfoVehiculo[vid][vOnCallSign] = CreateDynamic3DTextLabel(InfoVehiculo[vid][vCallSign], 0xEBEBEBFF, -1.0, -2.8, 0.0, 30.0, INVALID_PLAYER_ID, Coche);
			}
		}
	}
}

Load_Mods(veh)
{
	new vehicleid = InfoVehiculo[veh][vIG_id];
	if (InfoVehiculo[veh][vPaintJob] != -1) ChangeVehiclePaintjob(vehicleid, InfoVehiculo[veh][vPaintJob]);
	ChangeVehicleColor(vehicleid, InfoVehiculo[veh][vColor_1], InfoVehiculo[veh][vColor_2]);
	Loop(m, MAX_MODIFICACIONES, 0) { AddVehicleComponent(vehicleid, InfoVehiculo[veh][vModificacion][m]); }
}

Quit_Vehicles(playerid)
{
	Loop(vid, totalvehiculos, 1) if (InfoVehiculo[vid][vTipo] == 0 && strcmp(InfoPersonaje[playerid][pNombre_Apellido], InfoVehiculo[vid][vPropietario], true) == 0)
	{
		if (InfoVehiculo[vid][vModelo] != 0 && InfoVehiculo[vid][vEmbargo] == 0 && InfoVehiculo[vid][vIG_id] != 0 && InfoVehiculo[vid][vSpawned] != 0)
		{
			new vehicleid = InfoVehiculo[vid][vIG_id], oldfuel, query[412];
			if (LockStatus[vehicleid] != 0) LockStatus[vehicleid] = 0;
			oldfuel = veh_gasolina[vehicleid];
			InfoVehiculo[vid][vGasolina] = oldfuel;
 			GetVehicleHealth(vehicleid, InfoVehiculo[vid][vVida]);
			GetVehicleDamageStatus(vehicleid, InfoVehiculo[vid][vDanioSuperficie], InfoVehiculo[vid][vDanioPuertas], InfoVehiculo[vid][vDanioLuces], InfoVehiculo[vid][vDanioRuedas]);
 			if (InfoVehiculo[vid][vLlavePrestada] != -1)
			{
				InfoPersonaje[InfoVehiculo[vid][vLlavePrestada]][pLlaveVehicle] = 0;
				InfoVehiculo[vid][vLlavePrestada] = -1;
			}
			ActualizarMods(vid);
			mysql_format(DBInsanity, query, sizeof query, "UPDATE vehiculos SET Vida = '%f', DanioSuperficie = '%d', DanioPuertas = '%d', DanioLuces = '%d', DanioRuedas = '%d', Gasolina = '%d' WHERE ID = '%d'",
			InfoVehiculo[vid][vVida],
			InfoVehiculo[vid][vDanioSuperficie],
			InfoVehiculo[vid][vDanioPuertas],
			InfoVehiculo[vid][vDanioLuces],
			InfoVehiculo[vid][vDanioRuedas],
			InfoVehiculo[vid][vGasolina],
			InfoVehiculo[vid][vID_sql]);
			mysql_tquery(DBInsanity, query);
			DestroyVehicle(vehicleid);
			if (InfoVehiculo[vid][vModeloNeon] != 0 && InfoVehiculo[vid][vOnNeon] != 0)
			{
				if (IsValidDynamicObject(InfoVehiculo[vid][vObjetoNeonL])) DestroyDynamicObject(InfoVehiculo[vid][vObjetoNeonL]);
				if (IsValidDynamicObject(InfoVehiculo[vid][vObjetoNeonR])) DestroyDynamicObject(InfoVehiculo[vid][vObjetoNeonR]);
			}
			Loop(x, 5, 0) if (InfoVehiculo[vid][vObjModelo][x] != 0) { if (IsValidDynamicObject(InfoVehiculo[vid][vTuneo][x])) DestroyDynamicObject(InfoVehiculo[vid][vTuneo][x]); }
			if (!isnull(InfoVehiculo[vid][vCallSign])) DestroyDynamic3DTextLabel(InfoVehiculo[vid][vOnCallSign]);
			InfoVehiculo[vid][vIG_id] = 0;
			InfoVehiculo[vid][vSpawned] = 0;
			InfoVehiculo[vid][vMaleteroOn] = 0;
        }
    }
}

ActualizarMods(veh)
{
	if (InfoVehiculo[veh][vEmbargo] == 0)
	{
		new carid = InfoVehiculo[veh][vIG_id], dex_query[64];
		new exhaust, frontbumper, rearbumper, roof, spoilers, sideskirt1, sideskirt2, wheels, hydraulics, nitro, hood, lamps, stereo, ventright, ventleft;
		exhaust = GetVehicleComponentInSlot(carid, CARMODTYPE_EXHAUST);
		frontbumper = GetVehicleComponentInSlot(carid, CARMODTYPE_FRONT_BUMPER);
		rearbumper = GetVehicleComponentInSlot(carid, CARMODTYPE_REAR_BUMPER);
		roof = GetVehicleComponentInSlot(carid, CARMODTYPE_ROOF);
		spoilers = GetVehicleComponentInSlot(carid, CARMODTYPE_SPOILER);
		sideskirt1 = GetVehicleComponentInSlot(carid, CARMODTYPE_SIDESKIRT);
		sideskirt2 = GetVehicleComponentInSlot(carid, CARMODTYPE_SIDESKIRT);
		wheels = GetVehicleComponentInSlot(carid, CARMODTYPE_WHEELS);
		hydraulics = GetVehicleComponentInSlot(carid, CARMODTYPE_HYDRAULICS);
		nitro = GetVehicleComponentInSlot(carid, CARMODTYPE_NITRO);
		hood = GetVehicleComponentInSlot(carid, CARMODTYPE_HOOD);
		lamps = GetVehicleComponentInSlot(carid, CARMODTYPE_LAMPS);
		stereo = GetVehicleComponentInSlot(carid, CARMODTYPE_STEREO);
		ventright = GetVehicleComponentInSlot(carid, CARMODTYPE_VENT_RIGHT);
		ventleft = GetVehicleComponentInSlot(carid, CARMODTYPE_VENT_LEFT);
		if (spoilers >= 1000)    InfoVehiculo[veh][vModificacion][0] = spoilers;
		if (hood >= 1000)        InfoVehiculo[veh][vModificacion][1] = hood;
		if (roof >= 1000)        InfoVehiculo[veh][vModificacion][2] = roof;
		if (sideskirt1 >= 1000)  InfoVehiculo[veh][vModificacion][3] = sideskirt1;
		if (lamps >= 1000)       InfoVehiculo[veh][vModificacion][4] = lamps;
		if (nitro >= 1000)       InfoVehiculo[veh][vModificacion][5] = nitro;
		if (exhaust >= 1000)     InfoVehiculo[veh][vModificacion][6] = exhaust;
		if (wheels >= 1000)      InfoVehiculo[veh][vModificacion][7] = wheels;
		if (stereo >= 1000)      InfoVehiculo[veh][vModificacion][8] = stereo;
		if (hydraulics >= 1000)  InfoVehiculo[veh][vModificacion][9] = hydraulics;
		if (frontbumper >= 1000) InfoVehiculo[veh][vModificacion][10] = frontbumper;
		if (rearbumper >= 1000)  InfoVehiculo[veh][vModificacion][11] = rearbumper;
		if (ventright >= 1000)   InfoVehiculo[veh][vModificacion][12] = ventright;
		if (ventleft >= 1000)    InfoVehiculo[veh][vModificacion][13] = ventleft;
		if (sideskirt2 >= 1000)  InfoVehiculo[veh][vModificacion][14] = sideskirt2;
		Loop(x, MAX_MODIFICACIONES, 0)
		{
			format(dex_query, sizeof dex_query, "Modificacion%d", x+1);
			guardar_int_mysql("vehiculos", dex_query, InfoVehiculo[veh][vID_sql], InfoVehiculo[veh][vModificacion][x]);
		}
	}
}

VehicleCount(playerid)
{
	new cars = 0;
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vTipo] == 0 && strcmp(InfoPersonaje[playerid][pNombre_Apellido], InfoVehiculo[id][vPropietario], true) == 0)
	{ cars++; }
	return cars;
}

stock EsteVehEs(playerid, vehicleid)
{
	if (!IsPlayerConnected(playerid)) return -1;
	if (!GetVehicleModel(vehicleid)) return -1;
	Loop(v, totalvehiculos, 1) if (InfoVehiculo[v][vIG_id] == vehicleid)
	{
		return v;
	}
	return -1;
}

stock GetDistancePlayerVeh(playerid, veh)
{
	new Float:Floats[7];
	GetPlayerPos(playerid, Floats[0], Floats[1], Floats[2]);
	GetVehiclePos(veh, Floats[3], Floats[4], Floats[5]);
	Floats[6] = floatsqroot((Floats[3]-Floats[0])*(Floats[3]-Floats[0])+(Floats[4]-Floats[1])*(Floats[4]-Floats[1])+(Floats[5]-Floats[2])*(Floats[5]-Floats[2]));
	return floatround(Floats[6]);
}

IsValidSkin(skinid)
{
	switch (skinid)
	{
		case 1..73: return 1;
		case 74: return 0;
		case 75..311: return 1;
	}
	return 0;
}

stock GetClosestCar(playerid, exception = INVALID_VEHICLE_ID) {
    new
		Float:Distance,
		target = -1;
    for(new v; v < MAX_VEHICLES; v++) if(GetVehicleModel(v)) {
        if(v != exception && (target < 0 || Distance > GetDistancePlayerVeh(playerid, v))) {
            target = v;
            Distance = GetDistancePlayerVeh(playerid, v);
        }
    }
    return target;
}

LockPlayerVehicle(vehicle)
{
	LockStatus[vehicle] = 1;
	new vParamArr[7];
	GetVehicleParamsEx(vehicle, vParamArr[0], vParamArr[1], vParamArr[2], vParamArr[3], vParamArr[4], vParamArr[5], vParamArr[6]);
	return SetVehicleParamsEx(vehicle, vParamArr[0], vParamArr[1], vParamArr[2], VEHICLE_PARAMS_ON, vParamArr[4], vParamArr[5], vParamArr[6]);
 }

UnLockPlayerVehicle(vehicle)
{
	LockStatus[vehicle] = 0;
	new vParamArr[7];
	GetVehicleParamsEx(vehicle, vParamArr[0], vParamArr[1], vParamArr[2], vParamArr[3], vParamArr[4], vParamArr[5], vParamArr[6]);
	return SetVehicleParamsEx(vehicle, vParamArr[0], vParamArr[1], vParamArr[2], VEHICLE_PARAMS_OFF, vParamArr[4], vParamArr[5], vParamArr[6]);
}

funcion SetVehicleEngine(vehicleid, playerid)
{
	new engine, lights, alarm, doors, bonnet, boot, objective, string1[128];
    GetVehicleParamsEx(vehicleid,engine,lights,alarm,doors,bonnet,boot,objective);
    if (engine == VEHICLE_PARAMS_ON)
	{
		format(string1, sizeof(string1), "apaga el motor de su %s.", GetVehicleName(vehicleid));
		meuwu(playerid, string1);
		SetVehicleParamsEx(vehicleid,VEHICLE_PARAMS_OFF,lights,alarm,doors,bonnet,boot,objective);
		arr_Engine{vehicleid} = 0;
	}
    else if(engine == VEHICLE_PARAMS_OFF || engine == VEHICLE_PARAMS_UNSET)
	{
		new Float: f_vHealth;
		GetVehicleHealth(vehicleid, f_vHealth);
		if(f_vHealth < 350.0) return SendClientMessage(playerid, COLOR_RED, "El vehíuclo no prenderá, porque el motor se ha roto.");
	    if(veh_gasolina[vehicleid] <= 0) return SendClientMessage(playerid, COLOR_RED, "El vehíuclo no prenderá, no hay gasolina en el tanque.");
		SetVehicleParamsEx(vehicleid,VEHICLE_PARAMS_ON,lights,alarm,doors,bonnet,boot,objective);
		arr_Engine{vehicleid} = 1;
		format(string1, sizeof(string1), "gira la llave y arranca el motor de su %s.", GetVehicleName(vehicleid));
		meuwu(playerid, string1);
	}
	return 1;
}

SetVehicleLights(vehicleid, playerid)
{
	new engine,lights,alarm,doors,bonnet,boot,objective;
    GetVehicleParamsEx(vehicleid,engine,lights,alarm,doors,bonnet,boot,objective);
    if(lights == VEHICLE_PARAMS_ON)
	{
		SetVehicleParamsEx(vehicleid,engine,VEHICLE_PARAMS_OFF,alarm,doors,bonnet,boot,objective);
		SendClientMessage(playerid, COLOR_WHITE, "Luces apagadas.");
	}
    else if(lights == VEHICLE_PARAMS_OFF || lights == VEHICLE_PARAMS_UNSET)
	{
		SetVehicleParamsEx(vehicleid,engine,VEHICLE_PARAMS_ON,alarm,doors,bonnet,boot,objective);
		SendClientMessage(playerid, COLOR_WHITE, "Luces encendidas.");
	}
	return 1;
}

SetVehicleHood(vehicleid, playerid)
{
	new engine,lights,alarm,doors,bonnet,boot,objective;
    GetVehicleParamsEx(vehicleid,engine,lights,alarm,doors,bonnet,boot,objective);
    if(bonnet == VEHICLE_PARAMS_ON)
	{
		SetVehicleParamsEx(vehicleid,engine,lights,alarm,doors,VEHICLE_PARAMS_OFF,boot,objective);
		SendClientMessage(playerid, COLOR_WHITE, "Capó del vehiculo fue cerrado.");
	}
    else if(bonnet == VEHICLE_PARAMS_OFF || bonnet == VEHICLE_PARAMS_UNSET)
	{
		SetVehicleParamsEx(vehicleid,engine,lights,alarm,doors,VEHICLE_PARAMS_ON,boot,objective);
		SendClientMessage(playerid, COLOR_WHITE, "Capó del vehiculo fue abierto.");
	}
	return 1;
}

stock IsPlayerInRangeOfVehicle(playerid, vehicleid, Float: radius) {
	new
		Float:Floats[3];
	GetVehiclePos(vehicleid, Floats[0], Floats[1], Floats[2]);
	return IsPlayerInRangeOfPoint(playerid, radius, Floats[0], Floats[1], Floats[2]);
}

forward timer_segundo();
public timer_segundo()
{
	// textdraw hora.
    new gformat[256], year, month, day, hour, minute, second;
    getdate(year, month, day);
    gettime(hour, minute, second);
	if (hour >= 12) format(gformat, sizeof gformat, "%02d:%02d_PM_-_%02d_de_%s_del_%04d", (hour == 12) ? (12) : (hour - 12), minute, day, GetMonth(month), year);
	else if (hour < 12) format(gformat, sizeof gformat, "%02d:%02d_AM_-_%02d_de_%s_del_%04d", (hour == 0) ? (12) : (hour), minute, day, GetMonth(month), year);
	foreach(Player, i)
	{
	    if(IsPlayerConnected(i) && usuario_registro[i] == 2)
	    {
			SetPlayerTime(i, hour, minute);
	        //auto save cada 5seg by edinsonwalker
			countGameTime[i]++;
			if (countGameTime[i] == 5)
			{
				if (Spectate[i] == 999 && ShowRules[i] == 0)
				{
					GetPlayerPos(i, InfoPersonaje[i][pPosicionX], InfoPersonaje[i][pPosicionY], InfoPersonaje[i][pPosicionZ]);
					GetPlayerFacingAngle(i, InfoPersonaje[i][pPosicionR]);
					InfoPersonaje[i][pInterior] = GetPlayerInterior(i);
					InfoPersonaje[i][pVirtualWorld] = GetPlayerVirtualWorld(i);
				}
				new query[1500];
				mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET PosicionX = '%f', PosicionY = '%f', PosicionZ = '%f', PosicionR = '%f', Interior = '%d', VirtualWorld = '%d' WHERE ID = '%d'",
				InfoPersonaje[i][pPosicionX], InfoPersonaje[i][pPosicionY], InfoPersonaje[i][pPosicionZ], InfoPersonaje[i][pPosicionR], InfoPersonaje[i][pInterior], InfoPersonaje[i][pVirtualWorld], InfoPersonaje[i][pID]);
				mysql_tquery(DBInsanity, query);
				countGameTime[i] = 0;
			}
			SubirNivel(i);
			if (VisitandoCasa[i] != 0)
			{
				VisitandoCasa[i] --;
				if(VisitandoCasa[i] == 0 && CasaID[i] != -1) 
				{
					SetPosEx(i, InfoCasa[CasaID[i]][cExteriorX], InfoCasa[CasaID[i]][cExteriorY], InfoCasa[CasaID[i]][cExteriorZ], InfoCasa[CasaID[i]][cExteriorR], InfoCasa[CasaID[i]][cExteriorInt], InfoCasa[CasaID[i]][cExteriorVW], 1);
					SetCameraBehindPlayer(i);
					CasaID[i] = -1;
					SendClientMessage(i, COLOR_GREY, "El tiempo de visita terminó.");
				}
			}
			if (EnLlamadoMecanico[i] != 0) EnLlamadoMecanico[i]--;
			if(Tied[i] > 0) TogglePlayerControllable(i, 0);
			if(GetPlayerSpecialAction(i) == SPECIAL_ACTION_USEJETPACK && JetPack[i] == 0 && GetPlayerAdmin(i, 0) == 0)
			{
				format(gformat, sizeof gformat, "{FF2F2F}[AdmWarnig]{FFFFFF} %s(%d) ha sido auto-expulsado del servidor. Razón: cheat jetpack", NombreOriginal(i), i);
				SendAdminMessage(0xFFFFFFFF, gformat);
				SendClientMessage(i, COLOR_GENERAL, "Fuiste expulsado por usar cheat jetpack.");
				SetTimerEx("TimerKICK", 1000, false, "d", i);
			}
			if(IsPlayerInRangeOfPoint(i, 2.5, 1544.2, -1353.4, 329.4))
			{
			    if (InfoPersonaje[i][pManoDerecha] == 0)
					PlayerWeapon(i, 46);
			}
		}
	}
}

forward timer_2segundo();
public timer_2segundo()
{
	foreach(Player, i)
	{
	    if (IsPlayerConnected(i) && usuario_registro[i] == 2)
		{
		    new query[320];
			if (GetPlayerPing(i) > MAX_PING)
			{
				format(query, sizeof query, "{FF2F2F}[AdmWarnig]{FFFFFF} %s(%d) ha sido auto-expulsado del servidor. Razón: ping (%d)", NombreOriginal(i), i, GetPlayerPing(i));
				SendAdminMessage(0xFFFFFFFF, query);
				SendClientMessage(i, COLOR_GENERAL, "Fuiste expulsado por exceso de ping.");
				SetTimerEx("TimerKICK", 1000, false, "d", i);
		    }
 			if(CommandSpamUnmute[i] != 0)
	 		{
				CommandSpamUnmute[i]--;
   				if (CommandSpamUnmute[i] == 0) CommandSpamTimes[i] = 0;
			}
			if(InfoPersonaje[i][pServiceTime] != 0) { InfoPersonaje[i][pServiceTime]--; }
			if(NewbieTimer[i] > 0) { NewbieTimer[i]--; }
			if(VIPTimer[i] > 0){ VIPTimer[i]--; }
			if(GetPlayerCash(i) != GetPlayerMoney(i))
			{
				ResetPlayerMoney(i);
				GivePlayerMoney(i, InfoPersonaje[i][pDinero]);
			}
			if (timer_herido[i] != 0)
			{
				timer_herido[i]--;
				if (timer_herido[i] == 0) SendClientMessage(i, 0x59C52CFF, "Ya puedes usar /reaparecer.");
			}
			if (InfoPersonaje[i][pTriageTime] != 0)
			{
				InfoPersonaje[i][pTriageTime]--;
    		}
		    if (UsedFind[i] >= 1) 		{ 	UsedFind[i] -= 1; 	}
		    if(InfoPersonaje[i][pSancionado] > 0)
			{
				if(InfoPersonaje[i][pTiempoSancion] > 0)
				{
					InfoPersonaje[i][pTiempoSancion]--;
					new text[128];
		        	switch(InfoPersonaje[i][pSancionado])
					{
		            	case 1, 4: format(text, sizeof(text), "~n~~n~~n~~n~~n~~n~~n~ ~r~Jail OOC!~n~~w~%d segundos (%i minutos) restantes", InfoPersonaje[i][pTiempoSancion], InfoPersonaje[i][pTiempoSancion]/60);
					}
					GameTextForPlayer(i, text, 2000, 3);
					guardar_int_mysql("personajes", "TiempoSancion", InfoPersonaje[i][pID], InfoPersonaje[i][pTiempoSancion]);
				}
    			if(InfoPersonaje[i][pTiempoSancion] <= 0)
				{
				    InfoPersonaje[i][pTiempoSancion] = 0;
				    switch(InfoPersonaje[i][pSancionado])
				    {
				        case 2:
						{
							SetPosEx(i,1605.5861,-1646.6277,13.5469, 0.0000, 0, 0, 1);
							InfoPersonaje[i][pEstrellas] = 0;
							SetPlayerWantedLevel(i, InfoPersonaje[i][pEstrellas]);
				        }
				        case 3:
						{
				 			SetPosEx(i,343.1081,-1521.4404,33.2985, 0.0000, 0, 0, 1);
				        }
				        case 1,4:
						{
					    	SetPosEx(i,1552.8286,-1674.9845,16.1953, 0.0000, 0, 0, 1);
				        }
				        case 5:
						{
				 			SetPosEx(i,130.0132,1945.5618,19.3507, 0.0000, 0, 0, 1);
						}
				        case 6:
						{
				 			SetPosEx(i,725.8815,-1438.3231,13.5391, 0.0000, 0, 0, 1);
						}
						case 1000:
						{
					    	SetPosEx(i,1552.8286,-1674.9845,16.1953, 0.0000, 0, 0, 1);
				    	}
					}
					InfoPersonaje[i][pSancionado] = 0;
					InfoPersonaje[i][pTogTelefono] = 1;
					SendClientMessage(i, COLOR_GREEN,"Has pagado tu condena.");
					GameTextForPlayer(i, "~g~Eres Libre~n~~w~Se mejor persona.", 5000, 1);
					GivePlayerSkin(i, InfoPersonaje[i][pSkin]);
					alm(InfoPersonaje[i][pBySancion], "none");
					alm(InfoPersonaje[i][pRazonSancion], "none");
					mysql_format(DBInsanity, query, sizeof query, "UPDATE personajes SET Estrellas = 0, Sancionado = 0, TiempoSancion = 0, BySancion = '%e', RazonSancion = '%e' WHERE ID = '%d'", InfoPersonaje[i][pBySancion], InfoPersonaje[i][pRazonSancion], InfoPersonaje[i][pID]);
					mysql_tquery(DBInsanity, query);
					TogglePlayerControllable(i, true);
				}
			}
   			if (JustReported[i] > 0) 	{ 	JustReported[i]--; 	}
			if (JustDuda[i] > 0)		{ 	JustDuda[i]--; 		}
			if (JustAfk[i] > 0) 		{ 	JustAfk[i]--; 		}
		    if (InfoCuenta[i][jRegalo] != 0)
			{
				InfoCuenta[i][jRegalo]--;
				guardar_int_mysql("cuentas", "Regalo", InfoCuenta[i][jID], InfoCuenta[i][jRegalo]);
			}
			if(EMSCallTime[i] > 0)
			{
		    	if(EMSAccepted[i] < 999)
				{
		        	if(IsPlayerConnected(EMSAccepted[i]))
					{
		            	new Float:X,Float:Y,Float:Z;
		            	GetPlayerPos(EMSAccepted[i], X, Y, Z);
		            	SetPlayerCheckpoint(i, X, Y, Z, 5);
					}
				}
			}
			if(PlayerDrunk[i] > 9)
			{
		    	if(PlayerDrunkTime[i] > 20)
				{
		    		ApplyAnimation(i,"PED", "WALK_DRUNK",6.0,0,1,0,0,PlayerDrunk[i]*1000);
		    		SetPlayerDrunkLevel(i, PlayerDrunk[i]*1000);
		    		PlayerDrunk[i] -= 1;
		    		PlayerDrunkTime[i] = 0;
				}
				PlayerDrunkTime[i] += 1;
			}
			if(PlayerDrunk[i] < 10 && PlayerDrunk[i] > 0)
			{
		    	if(PlayerDrunkTime[i] > 30)
				{
		        	PlayerDrunk[i] -= 1;
                   	PlayerDrunkTime[i] = 0;
				}
				PlayerDrunkTime[i] += 1;
			}
		}
	}
}

forward timer_microbeat();
public timer_microbeat()
{
	foreach(Player, playerid)
	{
		new colorping[19], gformat[190];
		switch (GetPlayerPing(playerid))
		{
			case 0..150: alm(colorping, "~g~~h~~h~");
			case 151..200: alm(colorping, "~y~~h~");
			case 201..250: alm(colorping, "~r~~h~~h~");
			case 251..300: alm(colorping, "~r~~h~");
			default: alm(colorping, "~r~");
		}
		format(gformat, sizeof gformat, "~w~~h~~h~Ping: %s%d~w~~h~~h~ Fps: %d", colorping, GetPlayerPing(playerid), GetPlayerFPS(playerid));
		PlayerTextDrawSetStringEx(playerid, TDping_fps[playerid], gformat);
		if (IsPlayerConnectedEx(playerid))
		{
			new Float: HPveh, vehicleid = GetPlayerVehicleID(playerid), arrDamage[4], arrVehParams[7];
			if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
			{
				if (vehicleid != 0)
				{
					Loop(s, 10, 0) if (SpikeStrips[s][sX] != 0)
					{
						if (VehicleToPoint(2.0, vehicleid, SpikeStrips[s][sX], SpikeStrips[s][sY], SpikeStrips[s][sZ]))
						{
							GetVehicleDamageStatus(vehicleid, arrDamage[0], arrDamage[1], arrDamage[2], arrDamage[3]);
							arrDamage[3] = encode_tires(1, 1, 1, 1);
							UpdateVehicleDamageStatus(vehicleid, arrDamage[0], arrDamage[1], arrDamage[2], arrDamage[3]);
						}
					}
					GetVehicleHealth(vehicleid, HPveh);
					if (HPveh < 300.0 && !IsABike(vehicleid))
					{
						SetVehicleHealth(vehicleid, 299.0);
						SetVehicleParamsEx(vehicleid, arrVehParams[0], arrVehParams[1], arrVehParams[2], arrVehParams[3], arrVehParams[4], arrVehParams[5], arrVehParams[6]);
						if (arrVehParams[0] == VEHICLE_PARAMS_ON) SetVehicleParamsEx(vehicleid, VEHICLE_PARAMS_OFF, arrVehParams[1], arrVehParams[2], arrVehParams[3], arrVehParams[4], arrVehParams[5], arrVehParams[6]);
						GameTextForPlayer(playerid, "~w~Motor ~r~roto", 2500, 3);
						arr_Engine{vehicleid} = 0;
					}
					//info velocimetro
					if (show_velocimetro[playerid]) update_velocimetro(playerid, vehicleid);
				}
			}
		}
	}
}

forward timer_autoMensajes();
public timer_autoMensajes()
{
	foreach(Player, i)
	{
		if(GetPlayerCash(i) < 0){
			if(MoneyMessage[i]==0){
				new string[128];
				format(string, sizeof string, "Actualmente estás debiendo dinero; necesitas pagar $%d. Si no lo haces, serás arrestado...", GetPlayerCash(i));
				SendClientMessage(i, COLOR_LIGHTRED, string);
				MoneyMessage[i] = 1;
			}
		}
		else MoneyMessage[i] = 0;
	}
}

forward timer_spec();
public timer_spec()
{
	foreach(Player, i) if (GetPlayerAdmin(i, 1) != 0)
	{
		if (Spectating[i] >= 1)
		{
			if (Spectate[i] < 553)
			{
				new targetid = Spectate[i];
				if (!IsPlayerConnected(targetid))
				{
    				SendClientMessage( i, COLOR_WHITE, "El jugador que estabas specteando salio del servidor." );
			    	GettingSpectated[Spectate[i]] = 999;
			    	Spectating[i] = 0;
					Spectate[i] = 999;
					SetPVarInt(i, "SpecState", -1);
					SetPVarInt(i, "SpecOff", 1 );
					TogglePlayerSpectating( i, false );
					SetCameraBehindPlayer(i);
				}
			}
			if (Spectate[i] == 554)
			{
				TogglePlayerControllable(i, 1);
				SetPlayerInterior(i,Unspec[i][sPint]);
				InfoPersonaje[i][pInterior] = Unspec[i][sPint];
				SetPlayerPos(i, Unspec[i][Coords][0], Unspec[i][Coords][1], Unspec[i][Coords][2]);
				Spectate[i] = 999;
			}
			if (Spectate[i] == 556)
			{
				Spectate[i] = 999;
			}
			if (Spectate[i] == 557)
			{
				Spectate[i] = 554;
			}
		}
	}
}

public OnPlayerPickUpPickup(playerid, pickupid)
{
    return 1;
}

public OnPlayerEnterRaceCheckpoint(playerid)
{
	return 1;
}

public OnPlayerClickMap(playerid, Float:fX, Float:fY, Float:fZ)
{
	if (GetPlayerAdmin(playerid, 6) != 0)
	{
    	SetPlayerPosFindZ(playerid, fX, fY, fZ);
    }
    return 1;
}

forward TimerKICK(playerid);
public TimerKICK(playerid)
{
	Kick(playerid);
	return 1;
}

public TimerBANIP(playerid)
{
	new playerip[32];
	GetPlayerIp(playerid, playerip, sizeof playerip);
	Kick(playerid);
	AddBan(playerip);
	return 1;
}

stock RandomEx(min, max)
{
    new randval = random(max - min) + min;
    return randval;
}

stock IsWeaponWithAmmo(weaponid)
{
	switch(weaponid)
	{
		case 16..18, 22..39, 41..42: return 1;
		default: return 0;
	}
	return 0;

}

stock GetPlayerWeaponAmmo(playerid,weaponid)
{
	new wd[2][13];
	for(new i; i<13; i++) GetPlayerWeaponData(playerid,i,wd[0][i],wd[1][i]);
	for(new i; i<13; i++)
	{

		if(weaponid == wd[0][i]) return wd[1][i];
	}
	return 0;
}

public OnPlayerWeaponShot(playerid, weaponid, hittype, hitid, Float:fX, Float:fY, Float:fZ)
{
	new idobj = InfoPersonaje[playerid][pManoDerecha];/* balas = GetPlayerAmmo(playerid);*/
	if(IsPlayerConnected(playerid))
	{
		if(IsWeaponWithAmmo(weaponid))
		{
			if (InfoInventario[idobj][IDArma] != weaponid && InfoPersonaje[playerid][pHorasOn] <= 2) // "armas invisibles"
			{
				new string[190];
				format(string, sizeof string, "Administración:{FFFFFF} %s fue expulsado automáticamente. Razón: Arma no sincronizada (whitebug/cheat)", NombreOriginal(playerid));
				SendAllMessage(0xFF6347FF, string);
				QuitarManos(playerid);
				Kick(playerid);
				return 1;
			} // el viejo sistema lo borré a la mierda, este de abajo es el efectivo.
			if(InfoPersonaje[playerid][pManoDerechaCant])
			{
       			InfoPersonaje[playerid][pManoDerechaCant]--;
				//fix para que no se le cedan balas extras al jugador
			    if(GetPlayerWeaponAmmo(playerid, InfoInventario[idobj][IDArma]) != 0 && GetPlayerWeaponAmmo(playerid, InfoInventario[idobj][IDArma]) < InfoPersonaje[playerid][pManoDerechaCant])
			    {
			        InfoPersonaje[playerid][pManoDerechaCant] = GetPlayerWeaponAmmo(playerid, InfoInventario[idobj][IDArma]);
			    }
				if(InfoPersonaje[playerid][pManoDerechaCant] == 0) // remueve arma si no tienes balas, si continua disparando abajo está el check para dar kick <-
				{
				    ResetPlayerWeapons(playerid);
				}
			}
			else
			{
			    Anti[playerid][BalasW]++;
			    ResetPlayerWeapons(playerid);
			   	if(Anti[playerid][BalasW] == 3 && AntiG[Balas]) // 3 advertencias de tolerancia ^^
			    {
   					new string[256];
					format(string, sizeof string, "Administración:{FFFFFF} %s fue expulsado y limpiado. Razón: Cheat de munición", NombreOriginal(playerid));
					SendAllMessage(0xFF6347FF, string);
					QuitarManos(playerid);
					Kick(playerid);
					return 1;
				}
			}
		}
	}
	if(hittype==BULLET_HIT_TYPE_PLAYER)
	{
		if(!(-100.0<=fX<=100.0)||!(-1000.0<=fY<=100.0)||!(-100.0<=fZ<=100.0))
		{
           //kickorbanthecrasher
			return 0b0;
		}
	}
	if(InfoPersonaje[playerid][pManoDerecha] == 40 && weaponid == 23){TaserRecarga[playerid] = 1; SetTimerEx("RecargarTaser", 5000, false, "i", playerid);} //Sistema de recarga de taser
    return 1;
}

funcion RecargarTaser(playerid)
	TaserRecarga[playerid] = 0;


forward _FGomas(playerid); public _FGomas(playerid)
{
	ClearAnimations(playerid);
	TogglePlayerControllable(playerid, 1);
	ConBalasGoma[playerid] = 0;
	return 1;
}

public OnPlayerGiveDamage(playerid, damagedid, Float:amount, weaponid, bodypart)
{
	return 1;
}

public OnPlayerTakeDamage(playerid, issuerid, Float:amount, weaponid, bodypart)
{
	switch (weaponid)
	{
		case 49,50,53,54: //caidas y varios
		{
			if (papilla[playerid] == 1) return 1;
			player_weapon[playerid] = weaponid;
			player_asesino[playerid] = issuerid;
			quitar_vida(playerid, -amount);
			return 1;
		}
	}
	if (playerid != INVALID_PLAYER_ID)
	{
		if (!IsPlayerConnected(playerid)) { return 1; }
		if (GetPlayerTeam(issuerid) == GetPlayerTeam(playerid))
		{
			if (papilla[playerid] == 1) return 1;
			if (GetPlayerState(playerid) == PLAYER_STATE_WASTED) return 1;
            if (GetPVarInt(playerid, "mueltito") == 1) return 1;
			if (InfoInventario[InfoPersonaje[issuerid][pManoDerecha]][IDArma] != weaponid && weaponid != 0) return 1; // si es un arma invisible, evitar el daño
			if (IsPlayerInAnyVehicle(playerid))
			{
				new a = GetVehicleModel(GetPlayerVehicleID(playerid));
				if (a == 528 || a == 427)
				{
					//SendClientMessage(playerid, 0xFF0000FF, "El camión blindado redujo tu impacto de bala a la mitad");
					return 1;
				}
			}
			new drug_effect_damagedid = InfoPersonaje[playerid][pDrogaTipo], drug_power_damagedid = InfoPersonaje[playerid][pDrogaPower], Float: hacerdano;
		    //sistema de heridas.
		    new id, Float: pArm = InfoPersonaje[playerid][pChaleco];
		    Loop(x, MAX_DAMAGES, 0) if(!InfoDamage[playerid][x][dmgDamage])
			{
				id = x;
				break;
			}
			player_weapon[playerid] = weaponid;
			player_asesino[playerid] = issuerid;
			InfoDamage[playerid][id][dmgWeapon] = weaponid;
			InfoDamage[playerid][id][dmgBodypart] = bodypart;
			if (pArm > 0) InfoDamage[playerid][id][dmgKevlarhit] = 1;
			else if(pArm < 1) InfoDamage[playerid][id][dmgKevlarhit] = 0;
			InfoDamage[playerid][id][dmgSeconds] = gettime();
			// daño de armas
			switch (weaponid)
			{
				case 22, 28, 29, 32: //armas automáticas
				{
					switch (bodypart)
					{
						case 9: hacerdano = 88;
	  					case 8, 7: hacerdano = 10;
	  					case 6, 5: hacerdano = 10;
	  					case 4: hacerdano = 15;
				  		case 3: hacerdano = 18;
					}
				}
				case 23: //silenciada
				{
					if (InfoPersonaje[issuerid][pManoDerecha] == 40)//táser
					{
						if (!CercaDelWeon(10.0, issuerid, playerid)) return SendClientMessage(issuerid, COLOR_GREY, "No lograste tasear al jugador, está muy lejos.");
						if (IsPlayerInAnyVehicle(playerid) && EnMotos_Bicis(GetPlayerVehicleID(playerid))) { RemovePlayerFromVehicle(playerid); }
						new string[128];
						TogglePlayerControllable(playerid, 0);
						Taseado[playerid] = 1;
						PlayerAudio(playerid, 6003, 8.0);
						format(string, sizeof string, "%s te ha paralizado con cables de táser, 8 segundos para pasar efecto.", NombreJugador(issuerid));
						SendClientMessage(playerid, COLOR_GREEN, string);
						format(string, sizeof string, "Has paralizado con cables de táser a %s. (sólo 8 segundos)", NombreJugador(playerid));
						SendClientMessage(issuerid, COLOR_GREEN, string);
						SetTimerEx("_FGomas2", 8000, false, "i", playerid);
						return 1;
					}
	           		switch (bodypart)
					{
						case 9: hacerdano = 88;
					    case 8, 7: hacerdano = 8;
					    case 6, 5: hacerdano = 8;
					    case 4: hacerdano = 13;
					    case 3: hacerdano = 16;
					}
				}
				case 24: //dk
				{
		            switch(bodypart)
					{
						case 9:
						{
							quitar_vida(playerid, -90);
	 						InfoPersonaje[playerid][pBalaCabeza] = 1;
	 						InfoDamage[playerid][id][dmgDamage] = 90;
	 						return 1;
						}
					    case 8, 7: hacerdano = 30;
					    case 6, 5: hacerdano = 30;
					    case 4: hacerdano = 40;
					    case 3: hacerdano = 50;
					}
				}
				case 31: //5.56
				{
					switch (bodypart)
					{
						case 9:
						{
							quitar_vida(playerid, -90);
     						InfoPersonaje[playerid][pBalaCabeza] = 1;
     						InfoDamage[playerid][id][dmgDamage] = 90;
     						return 1;
						}
					    case 8, 7: hacerdano = 15;
					    case 6, 5: hacerdano = 15;
					    case 4: hacerdano = 22;
					    case 3: hacerdano = 30;
					}
				}
				case 30: //7.62
				{
					switch (bodypart)
					{
						case 9:
						{
							quitar_vida(playerid, -90);
     						InfoPersonaje[playerid][pBalaCabeza] = 1;
     						InfoDamage[playerid][id][dmgDamage] = 90;
     						return 1;
						}
					    case 8, 7: hacerdano = 17;
					    case 6, 5: hacerdano = 17;
					    case 4: hacerdano = 24;
					    case 3: hacerdano = 34;
					}
				}
				case 34: //francotirador (Calibre .50)
				{
				    switch (bodypart)
					{
						case 9:
						{
							quitar_vida(playerid, -90);
     						InfoPersonaje[playerid][pBalaCabeza] = 1;
     						InfoDamage[playerid][id][dmgDamage] = 90;
     						return 1;
						}
					    case 8, 7: hacerdano = 77;
					    case 6, 5: hacerdano = 68;
					    case 4: hacerdano = 70;
					    case 3: hacerdano = 70;
					}
				}
				case 25: //escopeta normal y escopetita
				{
					if (InfoPersonaje[issuerid][pManoDerecha] == 54)
					{
						if (IsPlayerInAnyVehicle(playerid))
						{
							if (EnMotos_Bicis(GetPlayerVehicleID(playerid)))
							{
								if (ConBalasGoma[playerid] == 1) return 1;
								new string[128];
								TogglePlayerControllable(playerid, 0);
								RemovePlayerFromVehicle(playerid);
								ConBalasGoma[playerid] = 1;
								format(string, sizeof string, "%s te ha paralizado con balas de goma, 15 segundos para pasar efecto.", NombreJugador(issuerid));
								SendClientMessage(playerid, 0x00CF00FF, string);
								format(string, sizeof string, "Has paralizado con balas de goma a %s.", NombreJugador(playerid));
								SendClientMessage(issuerid, 0x00CF00FF, string);
								TogglePlayerControllable(playerid, 0);
								SetTimerEx("_FGomas", 15000, false, "i", playerid);
							}
							else { return 1; }
						}
						else
						{
							if (ConBalasGoma[playerid] == 1) return 1;
							new string[128];
							TogglePlayerControllable(playerid, 0);
							ConBalasGoma[playerid] = 1;
							format(string, sizeof string, "%s te ha paralizado con balas de goma, 15 segundos para pasar efecto.", NombreJugador(issuerid));
							SendClientMessage(playerid, 0x00CF00FF, string);
							format(string, sizeof string, "Has paralizado con balas de goma a %s.", NombreJugador(playerid));
							SendClientMessage(issuerid, 0x00CF00FF, string);
							TogglePlayerControllable(playerid, 0);
							SetTimerEx("_FGomas", 15000, false, "i", playerid);
						}
					}
					else
					{
			  			if (CercaDelMarica(5.0, issuerid, playerid))
				    	{
					    	switch (bodypart)
							{
								case 9: hacerdano = 80;
							    case 8, 7: hacerdano = 20;
							    case 6, 5: hacerdano = 20;
							    case 4: hacerdano = 40;
							    case 3: hacerdano = 60;
							}
						}
						else
						{
							switch (bodypart)
							{
								case 9: hacerdano = 65;
							    case 8, 7: hacerdano = 15;
							    case 6, 5: hacerdano = 15;
							    case 4: hacerdano = 30;
							    case 3: hacerdano = 50;
							}
						}
					}
				}
				case 26,27: //escopetas
				{
			  		if (CercaDelMarica(5.0, issuerid, playerid))
			    	{
				    	switch (bodypart)
						{
							case 9: hacerdano = 80;
						    case 8, 7: hacerdano = 20;
						    case 6, 5: hacerdano = 20;
						    case 4: hacerdano = 40;
						    case 3: hacerdano = 60;
						}
					}
					else
					{
						switch (bodypart)
						{
							case 9: hacerdano = 65;
						    case 8, 7: hacerdano = 15;
						    case 6, 5: hacerdano = 15;
						    case 4: hacerdano = 30;
						    case 3: hacerdano = 50;
						}
					}
				}
				case 38: dar_vida(playerid, 100);
				case 8: // sistema katana
				{
					if (InfoPersonaje[issuerid][pTriageTime] != 0) return SendClientMessage(playerid, COLOR_WHITE, "Debes esperar al menos 2 minutos para rebanarlo de nuevo, máquina!");
					if (InfoPersonaje[playerid][pMuerto] == 1 || GetPVarInt(playerid, "EstaCrack") == 1)
					{
						new string[200], string1[200];
						format(string1, sizeof(string1), "* %s agarró su Katana con ambas manos, la alineó con el cuello de %s y lo seccionó.", NombreJugador(issuerid), NombreJugador(playerid));
						ProxDetector(30.0, playerid, string1, COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE,COLOR_PURPLE);
						format(string, sizeof string, "[News - Easter Egg] {ffffff}¡Último minuto! La policía encuentró el cuerpo de ""%s"" tirado. ¡Sin cabeza! ¡Qué locura!", NombreJugador(playerid));
						InfoPersonaje[issuerid][pTriageTime] = 120;
						SendAllICMessage(COLOR_GENERAL,string);
						quitar_vida(playerid, -90);
						LoopingAnim(issuerid,"PARK","Tai_Chi_Loop", 4.0, 1, 0, 0, 0, 0);
						return 1;
					}
				}
				default:
				{
					hacerdano = amount;
				}
			}
			//bajo efectos de droga
			switch (drug_effect_damagedid) // #fede#
			{
			    case 1:
				{
				    switch (drug_power_damagedid) // #fede#
			    	{
						case 1: hacerdano = hacerdano-(hacerdano*0.07);
						case 2: hacerdano = hacerdano-(hacerdano*0.085);
						case 3: hacerdano = hacerdano-(hacerdano*0.095);
					}
				}
			    case 2:
			    {
					switch (drug_power_damagedid) // #fede#
					{
						case 1: hacerdano = hacerdano-(hacerdano*0.08);
						case 2: hacerdano = hacerdano-(hacerdano*0.09);
						case 3: hacerdano = hacerdano-(hacerdano*0.1);
					}
	   			}
				case 3:
				{
					switch (drug_power_damagedid) // #fede#
					{
						case 1: hacerdano = hacerdano-(hacerdano*0.04);
						case 2: hacerdano = hacerdano-(hacerdano*0.045);
						case 3: hacerdano = hacerdano-(hacerdano*0.06);
					}
				}
				case 4: hacerdano = hacerdano-(hacerdano*0.055);
			}
			//hacer damage
			BajarVida(playerid, hacerdano);
			InfoDamage[playerid][id][dmgDamage] = floatround(hacerdano);
		}
	}
	return 1;
}

BajarVida(playerid, Float: damage)
{
	new Float: armour = InfoPersonaje[playerid][pChaleco];
	if (armour > damage)
	{
		InfoPersonaje[playerid][pChaleco] = armour-damage;
	}
	else
	{
		InfoPersonaje[playerid][pChaleco] = 0.0;
		armour = damage-armour;
		quitar_vida(playerid, -armour);
	}
	guardar_float_mysql("personajes", "Chaleco", InfoPersonaje[playerid][pID], InfoPersonaje[playerid][pChaleco]);
	return 1;
}

public OnPlayerModelSelectionEx(playerid, response, extraid, modelid)
{
	if (!response) return 1;
	if (extraid == Create_VehObject)
	{
		new Float:X, Float:Y, Float:Z;
		GetPlayerPos(playerid, X, Y, Z);
		new obj = CreatePlayerObject(playerid, modelid, X+1.0, Y+1.0, Z, 0.0, 0.0, 0.0, 100.0);
		SetPVarInt(playerid, "FurnModelo", modelid);
		SetPVarInt(playerid, "FurnObject", obj);
		SetPVarInt(playerid, "EditorMode", 1);
		EditPlayerObject(playerid, obj);
		SendClientMessage(playerid, 0xFFFFFFFF, "* Mantén presionado {00AE57}~k~~PED_SPRINT~{FFFFFF} para cambiar la posición de la cámara.");
	}
	//
	else if (extraid == Actor_Skin)
	{
		new id = actore_skin[playerid], string[240];
		InfoNegocio[id][nActorSkin] = modelid;
		guardar_int_mysql("negocios", "ActorSkin", InfoNegocio[id][nID_sql], InfoNegocio[id][nActorSkin]);
		if (InfoNegocio[id][nActorX] != 0.0)
		{
			LabelPickup_negocio(id, 0, 0, 1, 0);
		}
		format(string, sizeof string, "Cambiaste el skin del actor (%d) del negocio %d.", modelid, id);
		SendClientMessage(playerid, COLOR_WHITE, string);
		return 1;
	}
	else if (extraid == VIP_Skin)
	{
		GivePlayerSkin(playerid, modelid);
		return 1;
	}
	else if (extraid == Equipo_Skin)
	{
		GivePlayerJobSkin(playerid, modelid);
		if (member_faccion(playerid, 1, 2, 3, 4, 5)) meuwu(playerid, "se viste con ropa del casillero");
		else meuwu(playerid, "se viste con ropa del armario");
		return 1;
	}
	else if (extraid == Fabrica_Skin)
	{
		new id = FabricaID[playerid], gformat[240], precio = 180000;
		if (id == -1) return 1;
		if (CountEmpleadosF(id) == 5) return SendClientMessage(playerid, COLOR_GREY, "Ya tienes cinco moledores de cristal.");
		if (FabricaSexo[playerid] == 1) precio = 145000;
		new idA = -1;
		Loop(x, 5, 0) if (InfoNegocio[id][nEmpleado][x] == 0)
		{
			idA = x;
			break;
		}
		if (idA == -1) return SendClientMessage(playerid, COLOR_GREY, "Fallo de creación de empleado, contacta con el programador.");
		if (InfoNegocio[id][nDinero] < precio)
		{
			format(gformat, sizeof gformat, "Te faltan $%s para pagar ese tipo de empleado.", diner_coma(precio-InfoNegocio[id][nDinero]));
			SendClientMessage(playerid, COLOR_GREY, gformat);
			return 1;
		}
		InfoNegocio[id][nDinero] -= precio;
		UpdateDineroGuardado(id);
		InfoNegocio[id][nEmpleado][idA] = modelid;
		DestroyDynamicActor(InfoNegocio[id][nActorEmpleado][idA]);
		switch (idA)
		{
			case 0:
			{
				InfoNegocio[id][nActorEmpleado][idA] = CreateDynamicActor(InfoNegocio[id][nEmpleado][idA], -2161.46045, -232.17979, 544.7299, 180.0000, true, 100.0, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt]);
			}
			case 1:
			{
				InfoNegocio[id][nActorEmpleado][idA] = CreateDynamicActor(InfoNegocio[id][nEmpleado][idA], -2166.19263, -232.17979, 544.7299, 180.0000, true, 100.0, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt]);
			}
			case 2:
			{
				InfoNegocio[id][nActorEmpleado][idA] = CreateDynamicActor(InfoNegocio[id][nEmpleado][idA], -2170.95386, -232.17979, 544.7299, 180.0000, true, 100.0, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt]);
			}
			case 3:
			{
				InfoNegocio[id][nActorEmpleado][idA] = CreateDynamicActor(InfoNegocio[id][nEmpleado][idA], -2175.86133, -232.17979, 544.7299, 180.0000, true, 100.0, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt]);
			}
			case 4:
			{
				InfoNegocio[id][nActorEmpleado][idA] = CreateDynamicActor(InfoNegocio[id][nEmpleado][idA], -2181.31445, -232.17979, 544.7299, 180.0000, true, 100.0, InfoNegocio[id][nInteriorVW], InfoNegocio[id][nInteriorInt]);
			}
		}
		mysql_format(DBInsanity, gformat, sizeof gformat, "UPDATE negocios SET Empleado%d = '%d' WHERE ID = '%d'", idA+1, InfoNegocio[id][nEmpleado][idA], InfoNegocio[id][nID_sql]);
		mysql_tquery(DBInsanity, gformat);
		format(gformat, sizeof gformat, "Se te restó $%s del dinero guardado de tu fábrica, ahora hay $%s.", diner_coma(precio), diner_coma(InfoNegocio[id][nDinero]));
		SendClientMessage(playerid, COLOR_LIGHTGREEN, gformat);
		UpdateMesasProduccion(id);
		FabricaID[playerid] = -1;
		return 1;
	}
	else if (extraid == IDObj_Admin)
	{
		new id = edicion_sql_actual[playerid];
		if (id == -1) return SendClientMessage(playerid, -1, "ERROR, consulta un técnico o al desarrollador.");
		Creando_Objeto_Admin(playerid, id, modelid);
		return 1;
	}
	else if (extraid == Clinica_Skin)
	{
		GivePlayerJobSkin(playerid, modelid);
		meuwu(playerid, "se viste con ropa del casillero");
		return 1;
	}
	else if (extraid == Compra_Skin)
	{
		if (CheckMoney(playerid, 35) == 0) return 1;
		GivePlayerSkin(playerid, modelid);
		if (GetPlayerVirtualWorld(playerid) != 0)
		{
			GivePlayerCash(playerid, -35, "compra de skin");
			CobroNegocio(id_negocio[playerid], 350);
		}
		SendClientMessage(playerid, 0xFFFFFFFF, "Compraste ropa nueva, costo: {00CC00}$35{FFFFFF}.");
		return 1;
	}
	else if (extraid == Compra_Toy)
	{
		new idtoy = -1;
		Loop(uwu, sizeof InfoToy, 0) if (InfoToy[uwu][accModelo] == modelid)
		{
			idtoy = uwu;
			break;
		}
		if (idtoy == -1) return 1;
		new precio = InfoToy[idtoy][accPrecio], gformat[340];
		if (GetPlayerCash(playerid) < precio)
		{
			format(gformat, sizeof gformat, "Te hacen falta $%s para comprar %s por $%s.", diner_coma(precio-GetPlayerCash(playerid)), InfoToy[idtoy][accNombre], diner_coma(precio));
			SendClientMessage(playerid, COLOR_GREY, gformat);
			return 1;
		}
		new x = slotselection[playerid];
		InfoPersonaje[playerid][ptModelo][x] = modelid;
		if ((modelid >= 19006 && modelid <= 19035) || (modelid >= 19138 && modelid <= 19140))
		{
			InfoPersonaje[playerid][ptHueso][x] = 2;
			InfoPersonaje[playerid][ptPosX][x] = 0.9;
			InfoPersonaje[playerid][ptPosY][x] = 0.0;
			InfoPersonaje[playerid][ptPosZ][x] = 0.35;
			InfoPersonaje[playerid][ptRotX][x] = 90.0;
			InfoPersonaje[playerid][ptRotY][x] = 90.0;
			InfoPersonaje[playerid][ptRotZ][x] = 0.0;
			InfoPersonaje[playerid][ptScaleX][x] = 1;
			InfoPersonaje[playerid][ptScaleY][x] = 1;
			InfoPersonaje[playerid][ptScaleZ][x] = 1;
		}
		else if (modelid >= 18891 && modelid <= 18910)
		{
			InfoPersonaje[playerid][ptHueso][x] = 2;
			InfoPersonaje[playerid][ptPosX][x] = 0.15;
			InfoPersonaje[playerid][ptPosY][x] = 0.0;
			InfoPersonaje[playerid][ptPosZ][x] = 0.0;
			InfoPersonaje[playerid][ptRotX][x] = 90.0;
			InfoPersonaje[playerid][ptRotY][x] = 180.0;
			InfoPersonaje[playerid][ptRotZ][x] = 90.0;
			InfoPersonaje[playerid][ptScaleX][x] = 1;
			InfoPersonaje[playerid][ptScaleY][x] = 1;
			InfoPersonaje[playerid][ptScaleZ][x] = 1;
		}
		else if (modelid >= 18926 && modelid <= 18935)
		{
			InfoPersonaje[playerid][ptHueso][x] = 2;
			InfoPersonaje[playerid][ptPosX][x] = 0.1;
			InfoPersonaje[playerid][ptPosY][x] = 0.0;
			InfoPersonaje[playerid][ptPosZ][x] = 0.0;
			InfoPersonaje[playerid][ptRotX][x] = 0.0;
			InfoPersonaje[playerid][ptRotY][x] = 0.0;
			InfoPersonaje[playerid][ptRotZ][x] = 0.0;
			InfoPersonaje[playerid][ptScaleX][x] = 1;
			InfoPersonaje[playerid][ptScaleY][x] = 1;
			InfoPersonaje[playerid][ptScaleZ][x] = 1;
		}
		else if (modelid >= 18911 && modelid <= 18920)
		{
			InfoPersonaje[playerid][ptHueso][x] = 2;
			InfoPersonaje[playerid][ptPosX][x] = 0.1;
			InfoPersonaje[playerid][ptPosY][x] = 0.035;
			InfoPersonaje[playerid][ptPosZ][x] = 0.0;
			InfoPersonaje[playerid][ptRotX][x] = 90.0;
			InfoPersonaje[playerid][ptRotY][x] = 180.0;
			InfoPersonaje[playerid][ptRotZ][x] = 90.0;
			InfoPersonaje[playerid][ptScaleX][x] = 1;
			InfoPersonaje[playerid][ptScaleY][x] = 1;
			InfoPersonaje[playerid][ptScaleZ][x] = 1;
		}
		else if (modelid == 19078 || modelid == 19078)
		{
			InfoPersonaje[playerid][ptHueso][x] = 16;
			InfoPersonaje[playerid][ptPosX][x] = 0;
			InfoPersonaje[playerid][ptPosY][x] = 0;
			InfoPersonaje[playerid][ptPosZ][x] = 0;
			InfoPersonaje[playerid][ptRotX][x] = 180.0;
			InfoPersonaje[playerid][ptRotY][x] = 180.0;
			InfoPersonaje[playerid][ptRotZ][x] = 0.0;
			InfoPersonaje[playerid][ptScaleX][x] = 1;
			InfoPersonaje[playerid][ptScaleY][x] = 1;
			InfoPersonaje[playerid][ptScaleZ][x] = 1;
		}
		else if ((modelid >= 18641 && modelid <= 18644) || (modelid >= 19080 && modelid <= 19084) || modelid == 18890)
		{
			InfoPersonaje[playerid][ptHueso][x] = 6;
			InfoPersonaje[playerid][ptPosX][x] = 0.0;
			InfoPersonaje[playerid][ptPosY][x] = 0.0;
			InfoPersonaje[playerid][ptPosZ][x] = 0.0;
			InfoPersonaje[playerid][ptRotX][x] = 0.0;
			InfoPersonaje[playerid][ptRotY][x] = 0.0;
			InfoPersonaje[playerid][ptRotZ][x] = 0.0;
			InfoPersonaje[playerid][ptScaleX][x] = 1;
			InfoPersonaje[playerid][ptScaleY][x] = 1;
			InfoPersonaje[playerid][ptScaleZ][x] = 1;
		}
		else if (modelid == 19317)
		{
			InfoPersonaje[playerid][ptHueso][x] = 1;
			InfoPersonaje[playerid][ptPosX][x] = 0.079;
			InfoPersonaje[playerid][ptPosY][x] = -0.10;
			InfoPersonaje[playerid][ptPosZ][x] = 0.09;
			InfoPersonaje[playerid][ptRotX][x] = 0.0;
			InfoPersonaje[playerid][ptRotY][x] = 30.0;
			InfoPersonaje[playerid][ptRotZ][x] = 0.0;
			InfoPersonaje[playerid][ptScaleX][x] = 1;
			InfoPersonaje[playerid][ptScaleY][x] = 1;
			InfoPersonaje[playerid][ptScaleZ][x] = 1;
		}
		else
		{
			InfoPersonaje[playerid][ptHueso][x] = 2;
			InfoPersonaje[playerid][ptPosX][x] = 0.0;
			InfoPersonaje[playerid][ptPosY][x] = 0.0;
			InfoPersonaje[playerid][ptPosZ][x] = 0.0;
			InfoPersonaje[playerid][ptRotX][x] = 0.0;
			InfoPersonaje[playerid][ptRotY][x] = 0.0;
			InfoPersonaje[playerid][ptRotZ][x] = 0.0;
			InfoPersonaje[playerid][ptScaleX][x] = 1;
			InfoPersonaje[playerid][ptScaleY][x] = 1;
			InfoPersonaje[playerid][ptScaleZ][x] = 1;
		}
		ActualizarToy(playerid, x);
		GivePlayerCash(playerid, -precio, "compra de toy");
		format(gformat, sizeof gformat, "* Compraste el toy {00AE57}%s{FFFFFF} por {00CC00}$%s{FFFFFF}. Para editarlo: {00AE57}/toys{FFFFFF}.", InfoToy[idtoy][accNombre], diner_coma(precio));
		SendClientMessage(playerid, 0xFFFFFFFF, gformat);
		return 1;
	}
	return 1;
}

public OnPlayerModelSelection(playerid, response, listid, modelid)
{
 	if (listid == bars)// Esta es la colocación de barreras. (/bar).
	{
		if(response) // CMD:bar.
		{
			new string[128], Float:Position[4];
			for(new i; i <MAX_BARRICADES; i++)
			{
				if(Barricade[i] == 0)
				{
					GetPlayerPos(playerid, Position[0], Position[1], Position[2]);
					GetPlayerFacingAngle(playerid, Position[3]);
					Barricade[i] = CreateDynamicObject(modelid, Position[0], Position[1], Position[2], 0.0, 0.0, Position[3]+180.0);
					SetPlayerPos(playerid, Position[0]-0.5, Position[1]+0.8, Position[2]+2.5);
					EditDynamicObject(playerid, Barricade[i]);
					SetPVarInt(playerid, "BAR_EDIT", 1);
					BarObject[playerid] = modelid; ObjectBar[playerid] = Barricade[i];
					/////////////////////////////////////////////////////////////////////////
					new zone[MAX_ZONE_NAME];
					GetPlayer3DZone(playerid, zone, sizeof(zone));
					SendClientMessage(playerid, COLOR_YELLOW, "[Aviso] Usa la tecla [Espacio] para ajustar la barrera, una vez lo hagas, presiona [Guardar].");
					format(string, sizeof string, "Has creado una barricada en %s. Usa /qb para eliminarla.", zone);
					SendClientMessage(playerid, COLOR_YELLOW, string);
					return 1;
				}
			}
		}
		else SendClientMessage(playerid, COLOR_GREY,"[Información]: Has cancelado la colocación de la barrera.");
		return 1;
	}
	return 1;
}

public OnPlayerEditDynamicObject(playerid, objectid, response, Float:x, Float:y, Float:z, Float:rx, Float:ry, Float:rz)
{
	if (response == EDIT_RESPONSE_UPDATE) return 1;
	if (InfoPersonaje[playerid][pEditingMode] == 13) // cmd_creargraffiti
	{
		new id = edicion_sql_actual[playerid], gformat[190], query[612];
		if (id == -1) return SendClientMessage(playerid, -1, "Error edición.");
		if (objectid == InfoGraffiti[id][gr_Objeto])
		{
			if (response == EDIT_RESPONSE_FINAL)
			{
				InfoGraffiti[id][gr_PosX] = x;
				InfoGraffiti[id][gr_PosY] = y;
				InfoGraffiti[id][gr_PosZ] = z;
				InfoGraffiti[id][gr_RotX] = rx;
				InfoGraffiti[id][gr_RotY] = ry;
				InfoGraffiti[id][gr_RotZ] = rz;
				SetDynamicObjectPos(InfoGraffiti[id][gr_Objeto], x, y, z);
				SetDynamicObjectRot(InfoGraffiti[id][gr_Objeto], rx, ry, rz);
				format(gformat, sizeof gformat, "Posición de graffiti actualizada correctamente.", id);
				SendClientMessage(playerid, -1, gformat);
				InfoPersonaje[playerid][pEditingMode] = 0;
				edicion_sql_actual[playerid] = -1;
				//opción idsql ya creada.
				if (InfoGraffiti[id][grID_sql] != 0)
				{
					mysql_format(DBInsanity, query, sizeof query, "UPDATE graffitis SET PotX = '%f', PotY = '%f', PotZ = '%f', RotX = '%f', RotY = '%f', RotZ = '%f', Interior = '%d', VirtualWorld = '%d' WHERE ID = '%d'",
					InfoGraffiti[id][gr_PosX],
					InfoGraffiti[id][gr_PosY],
					InfoGraffiti[id][gr_PosZ],
					InfoGraffiti[id][gr_RotX],
					InfoGraffiti[id][gr_RotY],
					InfoGraffiti[id][gr_RotZ],
					InfoGraffiti[id][gr_Interior],
					InfoGraffiti[id][gr_VirtualWorld],
					InfoGraffiti[id][grID_sql]);
					mysql_tquery(DBInsanity, query);
					return 1;
				}
				mysql_format(DBInsanity, query, sizeof query, "INSERT INTO graffitis (PotX, PotY, PotZ, RotX, RotY, RotZ, Interior, VirtualWorld) VALUES ('%f', '%f', '%f', '%f', '%f', '%f', '%d', '%d')",
				InfoGraffiti[id][gr_PosX],
				InfoGraffiti[id][gr_PosY],
				InfoGraffiti[id][gr_PosZ],
				InfoGraffiti[id][gr_RotX],
				InfoGraffiti[id][gr_RotY],
				InfoGraffiti[id][gr_RotZ],
				InfoGraffiti[id][gr_Interior],
				InfoGraffiti[id][gr_VirtualWorld]);
				mysql_tquery(DBInsanity, query, "OnGraffitiCreate", "i", id);
			}
			else if (response == EDIT_RESPONSE_CANCEL)
			{
				InfoGraffiti[id][gr_PosX] = 0.0;
				InfoGraffiti[id][gr_PosY] = 0.0;
				InfoGraffiti[id][gr_PosZ] = 0.0;
				InfoGraffiti[id][gr_RotX] = 0.0;
				InfoGraffiti[id][gr_RotY] = 0.0;
				InfoGraffiti[id][gr_RotZ] = 0.0;
				InfoGraffiti[id][gr_Interior] = 0;
				InfoGraffiti[id][gr_VirtualWorld] = 0;
				InfoGraffiti[id][gr_Fecha] = 0;
				if (IsValidDynamicObject(InfoGraffiti[id][gr_Objeto])) DestroyDynamicObject(InfoGraffiti[id][gr_Objeto]);
				SendClientMessage(playerid, -1, "Cancelaste la edición de graffiti.");
				InfoPersonaje[playerid][pEditingMode] = 0;
				edicion_sql_actual[playerid] = -1;
			}
		}
	}
	if (InfoPersonaje[playerid][pEditingMode] == 74) // cmd_crearcajero
	{
		if (response == EDIT_RESPONSE_CANCEL)
		{
			if (InfoPersonaje[playerid][pEditingMode] != 0)
			{
				InfoPersonaje[playerid][pEditingMode] = 0;
				edicion_sql_actual[playerid] = -1;
				return 1;
			}
		}
		else if (response == EDIT_RESPONSE_FINAL)
		{
			new id = edicion_sql_actual[playerid], query[1028];
			if (InfoCajero[id][atmModelo] == 0) return 1;
			InfoPersonaje[playerid][pEditingMode] = 0;
			InfoCajero[id][atmPotX] = x;
			InfoCajero[id][atmPotY] = y;
			InfoCajero[id][atmPotZ] = z;
			InfoCajero[id][atmRotX] = rx;
			InfoCajero[id][atmRotY] = ry;
			InfoCajero[id][atmRotZ] = rz;
			SetDynamicObjectPos(InfoCajero[id][atmObject], x, y, z);
			SetDynamicObjectRot(InfoCajero[id][atmObject], rx, ry, rz);
			SendClientMessage(playerid, COLOR_YELLOW, "Posición finalizada del cajero automático.");
			Label_cajero(id, 1);
			mysql_format(DBInsanity, query, sizeof query, "UPDATE cajeros SET Modelo = '%d', PotX = '%f', PotY = '%f', PotZ = '%f', RotX = '%f', RotY = '%f', RotZ = '%f', Interior = '%d', VirtualWorld = '%d' WHERE ID = '%d'",
			InfoCajero[id][atmModelo],
			InfoCajero[id][atmPotX],
			InfoCajero[id][atmPotY],
			InfoCajero[id][atmPotZ],
			InfoCajero[id][atmRotX],
			InfoCajero[id][atmRotY],
			InfoCajero[id][atmRotZ],
			InfoCajero[id][atmInterior],
			InfoCajero[id][atmVirtualWorld],
			InfoCajero[id][atmID_sql]);
			mysql_tquery(DBInsanity, query);
			edicion_sql_actual[playerid] = -1;
			return 1;
		}
	}
	if (InfoPersonaje[playerid][pEditingMode] == 4) // cmd_Crearobjetoadmin
	{
		new id = edicion_sql_actual[playerid], query[1028];
		if (id == -1) return SendClientMessage(playerid, -1, "Error edición.");
		if (objectid == InfoObjeto[id][oObjeto])
		{
			if (response == EDIT_RESPONSE_FINAL)
			{
				InfoObjeto[id][oPotX] = x;
				InfoObjeto[id][oPotY] = y;
				InfoObjeto[id][oPotZ] = z;
				InfoObjeto[id][oRotX] = rx;
				InfoObjeto[id][oRotY] = ry;
				InfoObjeto[id][oRotZ] = rz;
				SetDynamicObjectPos(InfoObjeto[id][oObjeto], x, y, z);
				SetDynamicObjectRot(InfoObjeto[id][oObjeto], rx, ry, rz);
				InfoPersonaje[playerid][pEditingMode] = 0;
				SendClientMessage(playerid, -1, "Edición terminada.");
				edicion_sql_actual[playerid] = -1;
				mysql_format(DBInsanity, query, sizeof query, "UPDATE objetos_admin SET PotX = '%f', PotY = '%f', PotZ = '%f', RotX = '%f', RotY = '%f', RotZ = '%f' WHERE ID = '%d'",
				InfoObjeto[id][oPotX],
				InfoObjeto[id][oPotY],
				InfoObjeto[id][oPotZ],
				InfoObjeto[id][oRotX],
				InfoObjeto[id][oRotY],
				InfoObjeto[id][oRotZ],
				InfoObjeto[id][oID_sql]);
				mysql_tquery(DBInsanity, query);
				return 1;
			}
			else if (response == EDIT_RESPONSE_CANCEL)
			{
				SetDynamicObjectPos(InfoObjeto[id][oObjeto], InfoObjeto[id][oPotX], InfoObjeto[id][oPotY], InfoObjeto[id][oPotZ]);
				SetDynamicObjectRot(InfoObjeto[id][oObjeto], InfoObjeto[id][oRotX], InfoObjeto[id][oRotY], InfoObjeto[id][oRotZ]);
				InfoPersonaje[playerid][pEditingMode] = 0;
				edicion_sql_actual[playerid] = -1;
				SendClientMessage(playerid, -1, "Cancelaste la edición del objeto dinámico admin.");
				return 1;
			}
		}
	}
	if (GetPVarInt(playerid, "BAR_EDIT") == 1 && BarObject[playerid] != 0)
	{
		if (response == EDIT_RESPONSE_FINAL)
		{
			SetDynamicObjectPos(ObjectBar[playerid], x, y, z);
			SetDynamicObjectRot(ObjectBar[playerid], rx, ry, rz);
			DeletePVar(playerid, "BAR_EDIT");
			BarObject[playerid] = 0;
		}
		if (response == EDIT_RESPONSE_CANCEL)
		{
			SendClientMessage(playerid, -1, "Edición del Objeto cancelado.");
			DeletePVar(playerid, "BAR_EDIT");
			BarObject[playerid] = 0;
		}
	}
	return 1;
}

forward OnGraffitiCreate(id);
public OnGraffitiCreate(id)
{
	InfoGraffiti[id][grID_sql] = cache_insert_id();
	cache_unset_active();
    return 1;
}

forward Float:GetDistanceFromPointToPoint(Float:x1,Float:y1,Float:z1,Float:x2,Float:y2,Float:z2);
public Float:GetDistanceFromPointToPoint(Float:x1,Float:y1,Float:z1,Float:x2,Float:y2,Float:z2)
{
	return floatsqroot(floatpower(floatabs(floatsub(x2,x1)),2)+floatpower(floatabs(floatsub(y2,y1)),2)+floatpower(floatabs(floatsub(z2,z1)),2));
}

public OnPlayerEditObject(playerid, playerobject, objectid, response, Float:fX, Float:fY, Float:fZ, Float:fRotX, Float:fRotY, Float:fRotZ) // Nueva POS.
{
	if (response != EDIT_RESPONSE_FINAL && response != EDIT_RESPONSE_CANCEL) return true;
	if (GetPVarInt(playerid, "FurnObject") != 0) DestroyPlayerObject(playerid, GetPVarInt(playerid, "FurnObject"));
	switch (GetPVarInt(playerid, "EditorMode"))
	{
		case 1: //Vehicle furn
		{
			if (GetPVarInt(playerid, "FurnObject") != 0) DestroyPlayerObject(playerid, GetPVarInt(playerid, "FurnObject"));
			if (!response)
			{
				DeletePVar(playerid, "FurnVehicleID");
				return 1;
			}
			new id = GetPVarInt(playerid, "FurnVehicleID");
			new vehicleid = InfoVehiculo[id][vIG_id];
			new modelo = GetPVarInt(playerid, "FurnModelo");
			DeletePVar(playerid, "FurnVehicleID");
			if (vehicleid == 0) { return 1; } //Just incase.
			new Float:pos[3];
			GetVehiclePos(vehicleid, pos[0], pos[1], pos[2]);
			new Float:distance = GetDistanceFromPointToPoint(fX, fY, fZ, pos[0], pos[1], pos[2]);
			if (distance > 10.0)
			{
				SendClientMessage(playerid, COLOR_LIGHTRED, "El objeto está demasiado lejos del vehículo y no se pudo poner!");
				return 1;
			}
			Loop(i, 5, 0) if (InfoVehiculo[id][vObjModelo][i] == 0)
			{
				InfoVehiculo[id][vTuneo][i] = CreateDynamicObject(modelo, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, GetPlayerVirtualWorld(playerid), GetPlayerInterior(playerid));
				new Float:offset[3];
				GetOffsetFromVehicle(fX, fY, fZ, vehicleid, offset[0], offset[1], offset[2]);
				new Float:rotz;
				GetVehicleZAngle(vehicleid, rotz);
				InfoVehiculo[id][vObjPosX][i] = offset[0];
				InfoVehiculo[id][vObjPosY][i] = offset[1];
				InfoVehiculo[id][vObjPosZ][i] = offset[2];
				InfoVehiculo[id][vObjRotZ][i] = fRotZ-rotz;
				AttachDynamicObjectToVehicle(InfoVehiculo[id][vTuneo][i], vehicleid, offset[0], offset[1], offset[2], fRotX, fRotY, fRotZ-rotz);
				Streamer_Update(playerid);
				InfoVehiculo[id][vObjModelo][i] = modelo;
				InfoVehiculo[id][vObjRotX][i] = fRotX;
				InfoVehiculo[id][vObjRotY][i] = fRotY;
				new query[1028];
				mysql_format(DBInsanity, query, sizeof query, "UPDATE vehiculos SET ObjModelo_%d = '%d', ObjPosX_%d = '%f', ObjPosY_%d = '%f', ObjPosZ_%d = '%f', ObjRotX_%d = '%f', ObjRotY_%d = '%f', ObjRotZ_%d = '%f' WHERE ID = '%d'",
				i+1, InfoVehiculo[id][vObjModelo][i], i+1, InfoVehiculo[id][vObjPosX][i], i+1, InfoVehiculo[id][vObjPosY][i], i+1, InfoVehiculo[id][vObjPosZ][i], i+1, InfoVehiculo[id][vObjRotX][i], i+1, InfoVehiculo[id][vObjRotY][i], i+1, InfoVehiculo[id][vObjRotZ][i], InfoVehiculo[id][vID_sql]);
				mysql_tquery(DBInsanity, query);
				break;
			}
			SendClientMessage(playerid, COLOR_GENERAL, "Agregaste un nuevo objeto a tu vehículo, posiciones guardadas.");
		}
		case 2: //Vehicle furn
		{
			if (GetPVarInt(playerid, "FurnObject") != 0) DestroyPlayerObject(playerid, GetPVarInt(playerid, "FurnObject"));
			new id = GetPVarInt(playerid, "FurnVehicleID");
			new vehicleid = InfoVehiculo[id][vIG_id];
			if (!response)
			{
				DeletePVar(playerid, "FurnVehicleID");
				Colocar_Objeto(id, vehicleid);
				Streamer_Update(playerid);
				return 1;
			}
			new modelo = GetPVarInt(playerid, "FurnModelo");
			new i = GetPVarInt(playerid, "FurnSlotObj");
			DeletePVar(playerid, "FurnVehicleID");
			new Float:pos[3];
			GetVehiclePos(vehicleid, pos[0], pos[1], pos[2]);
			new Float:distance = GetDistanceFromPointToPoint(fX, fY, fZ, pos[0], pos[1], pos[2]);
			if (distance > 10.0)
			{
				SendClientMessage(playerid, COLOR_LIGHTRED, "El objeto está demasiado lejos del vehículo y no se pudo editar");
				Colocar_Objeto(id, vehicleid);
				Streamer_Update(playerid);
				return 1;
			}
			InfoVehiculo[id][vTuneo][i] = CreateDynamicObject(modelo, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, GetPlayerVirtualWorld(playerid), GetPlayerInterior(playerid));
			new Float:offset[3], Float:rotz, query[1028];
			GetOffsetFromVehicle(fX, fY, fZ, vehicleid, offset[0], offset[1], offset[2]);
			GetVehicleZAngle(vehicleid, rotz);
			InfoVehiculo[id][vObjPosX][i] = offset[0];
			InfoVehiculo[id][vObjPosY][i] = offset[1];
			InfoVehiculo[id][vObjPosZ][i] = offset[2];
			InfoVehiculo[id][vObjRotZ][i] = fRotZ-rotz;
			AttachDynamicObjectToVehicle(InfoVehiculo[id][vTuneo][i], vehicleid, offset[0], offset[1], offset[2], fRotX, fRotY, fRotZ-rotz);
			Streamer_Update(playerid);
			InfoVehiculo[id][vObjModelo][i] = modelo;
			InfoVehiculo[id][vObjRotX][i] = fRotX;
			InfoVehiculo[id][vObjRotY][i] = fRotY;
			mysql_format(DBInsanity, query, sizeof query, "UPDATE vehiculos SET ObjModelo_%d = '%d', ObjPosX_%d = '%f', ObjPosY_%d = '%f', ObjPosZ_%d = '%f', ObjRotX_%d = '%f', ObjRotY_%d = '%f', ObjRotZ_%d = '%f' WHERE ID = '%d'",
			i+1, InfoVehiculo[id][vObjModelo][i], i+1, InfoVehiculo[id][vObjPosX][i], i+1, InfoVehiculo[id][vObjPosY][i], i+1, InfoVehiculo[id][vObjPosZ][i], i+1, InfoVehiculo[id][vObjRotX][i], i+1, InfoVehiculo[id][vObjRotY][i], i+1, InfoVehiculo[id][vObjRotZ][i], InfoVehiculo[id][vID_sql]);
			mysql_tquery(DBInsanity, query);
			SendClientMessage(playerid, COLOR_GENERAL, "Nuevas posiciones del objeto de tu vehículo guardadas.");
		}
	}
	DeletePVar(playerid,"EditorMode");
	return 1;
}

stock GetOffsetFromVehicle(Float:posX, Float:posY, Float:posZ, vehicleid, &Float:X, &Float:Y, &Float:Z) {
	new Float:pos[3];
	GetVehiclePos(vehicleid, pos[0], pos[1], pos[2]);
	new Float:rotZ;
	GetVehicleZAngle(vehicleid, rotZ);
	new Float:off[2];
	off[0] = posX - pos[0];
	off[1] = posY - pos[1];
	X = off[0]*floatcos(rotZ, degrees)+off[1]*floatsin(rotZ, degrees);
	Y = -off[0]*floatsin(rotZ, degrees)+off[1]*floatcos(rotZ, degrees);
	Z = posZ - pos[2];
	return 1;
}

public OnPlayerSelectDynamicObject(playerid, objectid, modelid, Float:x, Float:y, Float:z)
{
	return 1;
}

stock GetXYInFrontOfPlayer(playerid, &Float:x, &Float:y, Float:distance)
{
    new Float:a;
    GetPlayerPos(playerid, x, y, a);
    GetPlayerFacingAngle(playerid, a);
    if (GetPlayerVehicleID(playerid)) GetVehicleZAngle(GetPlayerVehicleID(playerid), a);
    x += (distance * floatsin(-a, degrees));
    y += (distance * floatcos(-a, degrees));
}

//***sistema afk***
forward SendMessage();
public SendMessage()
{
   new Nameafk[24], string[256];
   for(new i = 0; i <= MAX_PLAYERS; i++)
   {
     if(IsPlayerConnected(i))
     {
       GetPlayerName(i, Nameafk, 24);
       if(Afk[i]==1)
       {
       TextDrawHideForAll(Text:Messageafk);
       format(string, sizeof string, "",Nameafk);
       TextDrawSetStringEx(Messageafk,string);
       TextDrawShowForAll(Text:Messageafk);
       SetTimer("StopMessage",6000,0);
       }
       if(Afk[i]==0)
       {
       TextDrawHideForAll(Text:Messageafk);
       format(string, sizeof string, "",Nameafk);
       TextDrawSetStringEx(Messageafk,string);
       TextDrawShowForAll(Text:Messageafk);
       SetTimer("StopMessage",6000,0);
       }
     }
   }
}

forward StopMessage();
public StopMessage()
{
  TextDrawHideForAll(Text:Messageafk);
}

// Garaje System.
stock TipoGarage(garageid)
{
	new string[24];
	if(!InfoGarages[garageid][gType]) format(string, sizeof string, "Ninguno");
    else if(InfoGarages[garageid][gType] == 1) format(string, sizeof string, "Pequeño");
    else if(InfoGarages[garageid][gType] == 2) format(string, sizeof string, "Mediano");
    else if(InfoGarages[garageid][gType] == 3) format(string, sizeof string, "Grande");
	return string;
}
getPlayerGaragesID(const playerid)
{
	new x;
	new Nombre[MAX_PLAYER_NAME];
    while(x < MAX_GARAGES)
	{
		if(strlen(InfoGarages[x][gOwner]) >= 1)
		{
		    GetPlayerName(playerid, Nombre, sizeof(Nombre));
	        if(!strcmp(InfoGarages[x][gOwner], Nombre, true)){return x;}
		}
		x++;
	}
    return 0;
}

CheckPlayerIP(playerid) // Multicuentas.
{
	new IP[2][16], ips = 0, string[256];
	GetPlayerIp(playerid, IP[0], 16);
	Loop(playerid2, MAX_PLAYERS, 0) if (IsPlayerConnected(playerid2))
	{
		GetPlayerIp(playerid2, IP[1], 16);
		if (!strcmp(IP[0], IP[1])) ips++;
	}
	if (ips >= 2)
	{
		format(string, sizeof string, "[ATENCIÓN] %s(%d) ingreso al servidor con la misma IP de otro usuario conectado (posible multicuenta).", NombreOriginal(playerid), playerid);
		SendAdminMessage(COLOR_YELLOW, string);
	}
	return 1;
}

//by edinsonwalker:
stock alm(string[], string2[])
{
	strmid(string, string2, 0, strlen(string2), strlen(string2) + 1);
	return 1;
}

stock Mins_time(minutos)
{
    new tiempito[150];
    new horitas,dias;
    if(minutos > 59)
    {
        horitas = minutos / 60;
        minutos = minutos - (horitas * 60);
    }
    if(horitas > 23)
    {
        dias = horitas / 24;
        horitas = horitas - (dias * 24);
    }
    if(dias > 0)
    {
        format(tiempito,sizeof(tiempito),"%d días, %d horas, %d minutos",dias,horitas,minutos);
    }
    else if(horitas > 0)
    {
        format(tiempito,sizeof(tiempito),"%d horas, %d minutos",horitas,minutos);
    }
    else
    {
        format(tiempito,sizeof(tiempito),"%d minutos",minutos);
    }
    return tiempito;
}

GetMonth(Month)
{
    new MonthStr[15];
    switch(Month)
    {
        case 1:  MonthStr = "Enero";
        case 2:  MonthStr = "Febrero";
        case 3:  MonthStr = "Marzo";
        case 4:  MonthStr = "Abril";
        case 5:  MonthStr = "Mayo";
        case 6:  MonthStr = "Junio";
        case 7:  MonthStr = "Julio";
        case 8:  MonthStr = "Agosto";
        case 9:  MonthStr = "Septiembre";
        case 10: MonthStr = "Octubre";
        case 11: MonthStr = "Noviembre";
        case 12: MonthStr = "Diciembre";
    }
    return MonthStr;
}

stock GetWeekDay(day=0, month=0, year=0)
{
    if (!day)
    getdate(year, month, day);
    new weekday_str[12],j,e;
    if (month <= 2)
    {
        month += 12;
        --year;
    }
    j = year % 100;
    e = year / 100;
    switch ((day + (month+1)*26/10 + j + j/4 + e/4 - 2*e) % 7)
    {
        case 0: weekday_str = "Sabado";
        case 1: weekday_str = "Domingo";
        case 2: weekday_str = "Lunes";
        case 3: weekday_str = "Martes";
        case 4: weekday_str = "Miercoles";
        case 5: weekday_str = "Jueves";
        case 6: weekday_str = "Viernes";
    }
    return weekday_str;
}

FechaHoy()
{
	new Ano, Mes, Dia, Hora, Minutos, Segundos, gformat[256];
	getdate(Ano, Mes, Dia);
	gettime(Hora, Minutos, Segundos);
	if (Hora >= 12) format(gformat, sizeof gformat, "%02d:%02d:%02d PM - %s %02d del %02d", (Hora == 12) ? (12) : (Hora - 12), Minutos, Segundos, GetMonth(Mes), Dia, Ano);
	else if (Hora < 12) format(gformat, sizeof gformat, "%02d:%02d:%02d AM - %s %02d del %02d", (Hora == 0) ? (12) : (Hora), Minutos, Segundos, GetMonth(Mes), Dia, Ano);
	return gformat;
}

GetNameAcento(level)
{
	new a_name[64];
	switch (level)
	{
		case 1: alm(a_name, "normal");
		case 2: alm(a_name, "britanico");
		case 3: alm(a_name, "japones");
		case 4: alm(a_name, "chino");
		case 5: alm(a_name, "koreano");
		case 6: alm(a_name, "venezolano");
		case 7: alm(a_name, "peruano");
		case 8: alm(a_name, "ruso");
		case 9: alm(a_name, "americano");
		case 10: alm(a_name, "español");
		case 11: alm(a_name, "colombiano");
		case 12: alm(a_name, "francés");
		case 13: alm(a_name, "italiano");
		case 14: alm(a_name, "gangster");
		case 15: alm(a_name, "uruguayo");
		case 16: alm(a_name, "brasilero");
		case 17: alm(a_name, "argentino");
		case 18: alm(a_name, "chileno");
		case 19: alm(a_name, "cubano");
		case 20: alm(a_name, "israeli");
		case 21: alm(a_name, "alemán");
		case 22: alm(a_name, "hippie");
		case 23: alm(a_name, "mexicano");
		case 24: alm(a_name, "arabe");
		case 25: alm(a_name, "noruego");
		case 26: alm(a_name, "australiano");
	}
	return a_name;
}

forward _FGomas2(playerid); public _FGomas2(playerid)
{
	Taseado[playerid] = 0;
	ClearAnimations(playerid);
	TogglePlayerControllable(playerid, 1);
	return 1;
}

IntentoChitearBalas(playerid)
{
	if(GetPlayerAmmo(playerid) > InfoPersonaje[playerid][pManoDerechaCant] && AntiG[Balas])
	{
		new string[168];
		format(string, sizeof string, "Administración:{FFFFFF} %s fue expulsado y limpiado. Razón:[Cheat de munición]", NombreOriginal(playerid));
		SendAllMessage(0xFF6347FF, string);
		QuitarManos(playerid);
		Kick(playerid);
		return 1;
	}
	return 0;
}

funcion CheckTimer(time, ref)
{
	new seconds = (time - (gettime() - ref));
	if(ref == 0) return -1;
	else if(seconds <= 0) return 0;
	else return seconds;
}

funcion CercaDelWeon(Float:radi, playerid, playerid2) {
	new Float: fp_playerPos[3];
	GetPlayerPos(playerid2, fp_playerPos[0], fp_playerPos[1], fp_playerPos[2]);
	if(IsPlayerInRangeOfPoint(playerid, radi, fp_playerPos[0], fp_playerPos[1], fp_playerPos[2]) && GetPlayerVirtualWorld(playerid) == GetPlayerVirtualWorld(playerid2)) { return 1; }
	return 0;
}

stock PlayerAudio(playerid, soundid, Float: radio = 10.0)// Realistic sound playback
{
    new Float: x, Float: y, Float: z;
	GetPlayerPos(playerid, x, y, z);
	foreach(new i: Player)
	{
		if(IsPlayerInRangeOfPoint(i, radio, x, y, z)) PlayerPlaySound(i, soundid, x, y, z);
	}
	return 1;
}

funcion RemovePlayerWeapon(playerid, weaponid) //quitar un arma de un jugador
{
	if(!IsPlayerConnected(playerid) || weaponid < 0 || weaponid > 50) return;
	new saveweapon[13], saveammo[13];
	for(new slot = 0; slot < 13; slot++)
	GetPlayerWeaponData(playerid, slot, saveweapon[slot], saveammo[slot]);
	ResetPlayerWeapons(playerid);
	for(new slot; slot < 13; slot++)
	{
		if(saveweapon[slot] == weaponid || saveammo[slot] == 0) continue;
		GivePlayerWeapon(playerid, saveweapon[slot], saveammo[slot]);
	}
	GivePlayerWeapon(playerid, 0, 1);
}

stock minrand(min, max) //By Alex "Y_Less" Cole
{
	return random(max - min) + min;
}

stock diner_coma(e_number) /* By adri1 - SFR3 4.3 */
{
	new f_string[24], bool:negative;
	format(f_string, sizeof f_string, "%d", e_number);
	if(e_number < 0)
	{
		negative = true;
		strdel(f_string, 0, 1);
	}

	new numbers = strlen(f_string);
	while(numbers > 3)
	{
		numbers -= 3;
		strins(f_string, ",", numbers);
	}

	if(negative) strins(f_string, "-", 0);
	return f_string;
}

EstaEnBicis(carid)
{
	if(GetVehicleModel(carid) == 509 || GetVehicleModel(carid) == 481 || GetVehicleModel(carid) == 510) { return 1; }
	return 0;
}


eEnvcvehs(carid)
{
	new cvehs[] = { 560, 562, 565, 559, 561, 558 };
	for(new i = 0; i < sizeof cvehs; i++) { if (GetVehicleModel(carid) == cvehs[i]) return 1; }
	return 0;
}

EnMotos_Bicis(carid)
{
	new Bike[] = { 509, 481, 510, 462, 448, 581, 522, 461, 521, 523, 463, 586, 468, 471 };
	for(new i = 0; i < sizeof(Bike); i++) { if(GetVehicleModel(carid) == Bike[i]) return 1; }
	return 0;
}

EstaEnAvion(carid)
{
	new Avion[] = {592, 577, 511, 512, 593, 520, 553, 476, 519, 460, 513, 548, 425, 417, 487, 488, 497, 563, 447, 469};
	for(new i = 0; i < sizeof(Avion); i++) { if(GetVehicleModel(carid) == Avion[i]) return 1; }
	return 0;
}

EstaEnBote(carid)
{
	new Boats[] = {472, 473, 493, 484, 430, 454, 453, 452, 446};
	for(new i = 0; i < sizeof(Boats); i++) { if(GetVehicleModel(carid) == Boats[i]) return 1; }
	return 0;
}

borrar_vehiculo(vid)
{
	new vehicleid = InfoVehiculo[vid][vIG_id];
	if (InfoVehiculo[vid][vModeloNeon] != 0 && InfoVehiculo[vid][vOnNeon] != 0)
	{
		if (IsValidDynamicObject(InfoVehiculo[vid][vObjetoNeonL])) DestroyDynamicObject(InfoVehiculo[vid][vObjetoNeonL]);
		if (IsValidDynamicObject(InfoVehiculo[vid][vObjetoNeonR])) DestroyDynamicObject(InfoVehiculo[vid][vObjetoNeonR]);
	}
	Loop(x, 5, 0) if (InfoVehiculo[vid][vObjModelo][x] != 0) { if (IsValidDynamicObject(InfoVehiculo[vid][vTuneo][x])) DestroyDynamicObject(InfoVehiculo[vid][vTuneo][x]); }
	if (!isnull(InfoVehiculo[vid][vCallSign])) DestroyDynamic3DTextLabel(InfoVehiculo[vid][vOnCallSign]);
	if (InfoVehiculo[vid][vLlavePrestada] != -1)
	{
		InfoPersonaje[InfoVehiculo[vid][vLlavePrestada]][pLlaveVehicle] = 0;
		InfoVehiculo[vid][vLlavePrestada] = -1;
	}
	DestroyVehicle(vehicleid);
	InfoVehiculo[vid][vMaleteroOn] = 0;
	InfoVehiculo[vid][vIG_id] = 0;
	alm(InfoVehiculo[vid][vNombre], "none");
	alm(InfoVehiculo[vid][vPropietario], "none");
	InfoVehiculo[vid][vTipo] = 0;
	InfoVehiculo[vid][vNegocio] = 0;
	InfoVehiculo[vid][vModelo] = 0;
	InfoVehiculo[vid][vPosicionX] = 0.0;
	InfoVehiculo[vid][vPosicionY] = 0.0;
	InfoVehiculo[vid][vPosicionZ] = 0.0;
	InfoVehiculo[vid][vPosicionR] = 0.0;
	InfoVehiculo[vid][vVirtualWorld] = 0;
	InfoVehiculo[vid][vInterior] = 0;
	InfoVehiculo[vid][vVida] = 0.0;
	InfoVehiculo[vid][vDanioSuperficie] = 0;
	InfoVehiculo[vid][vDanioPuertas] = 0;
	InfoVehiculo[vid][vDanioLuces] = 0;
	InfoVehiculo[vid][vDanioRuedas] = 0;
	InfoVehiculo[vid][vGasolina] = 200;
	InfoVehiculo[vid][vColor_1] = 1;
	InfoVehiculo[vid][vColor_2] = 1;
	InfoVehiculo[vid][vPaintJob] = -1;
	InfoVehiculo[vid][vSeguro] = 0;
	InfoVehiculo[vid][vPrecio] = 0;
	InfoVehiculo[vid][vEmbargo] = 0;
	InfoVehiculo[vid][vMulta] = 0;
	Loop(xd, 5, 0)
	{
		InfoVehiculo[vid][vObjModelo][xd] = 0;
		InfoVehiculo[vid][vObjPosX][xd] = 0;
		InfoVehiculo[vid][vObjPosY][xd] = 0;
		InfoVehiculo[vid][vObjPosZ][xd] = 0;
		InfoVehiculo[vid][vObjRotX][xd] = 0;
		InfoVehiculo[vid][vObjRotY][xd] = 0;
		InfoVehiculo[vid][vObjRotZ][xd] = 0;
		new query43[1028];
		mysql_format(DBInsanity, query43, sizeof query43, "UPDATE vehiculos SET ObjModelo_%d = '%d', ObjPosX_%d = '%f', ObjPosY_%d = '%f', ObjPosZ_%d = '%f', ObjRotX_%d = '%f', ObjRotY_%d = '%f', ObjRotZ_%d = '%f' WHERE ID = '%d'",
		xd+1, InfoVehiculo[vid][vObjModelo][xd], xd+1, InfoVehiculo[vid][vObjPosX][xd], xd+1, InfoVehiculo[vid][vObjPosY][xd], xd+1, InfoVehiculo[vid][vObjPosZ][xd], xd+1, InfoVehiculo[vid][vObjRotX][xd], xd+1, InfoVehiculo[vid][vObjRotY][xd], xd+1, InfoVehiculo[vid][vObjRotZ][xd], InfoVehiculo[vid][vID_sql]);
		mysql_tquery(DBInsanity, query43);
	}
	new dex_query[170];
	Loop(x, 10, 0)
	{
		InfoVehiculo[vid][vMaletero][x] = 0;
		InfoVehiculo[vid][vMaleteroCant][x] = 0;
		mysql_format(DBInsanity, dex_query, sizeof dex_query, "UPDATE vehiculos SET Maletero%d = 0, MaleteroCant%d = 0 WHERE ID = '%d'", x+1, x+1, InfoVehiculo[vid][vID_sql]);
		mysql_tquery(DBInsanity, dex_query);
	}
	InfoVehiculo[vid][vMaxMaletero] = 5;
	Loop(x, MAX_MODIFICACIONES, 0)
	{
		InfoVehiculo[vid][vModificacion][x] = 0;
		mysql_format(DBInsanity, dex_query, sizeof dex_query, "UPDATE vehiculos SET Modificacion%d = 0 WHERE ID = '%d'", x+1, InfoVehiculo[vid][vID_sql]);
		mysql_tquery(DBInsanity, dex_query);
	}
	InfoVehiculo[vid][vModeloNeon] = 0;
	InfoVehiculo[vid][vOnNeon] = 0;
	InfoVehiculo[vid][vSpawned] = 0;
	InfoVehiculo[vid][vSirena] = 0;
	new que2ry[3000], query[4000];
	format(que2ry, sizeof que2ry, "UPDATE vehiculos SET Nombre = '%s', Propietario = '%s', Tipo = 0, Modelo = 0, Negocio = 0, Posicion_X = 0.0, Posicion_Y = 0.0, Posicion_Z = 0.0, Posicion_R = 0.0,", InfoVehiculo[vid][vNombre], InfoVehiculo[vid][vPropietario]);
	format(que2ry, sizeof que2ry, "%s Interior = 0, VirtualWorld = 0, Vida = 1000.0, DanioSuperficie = 0, DanioPuertas = 0, DanioLuces = 0, DanioRuedas = 0, Gasolina = 200, Color_1 = 1, Sirena = 0,", que2ry);
	mysql_format(DBInsanity, query, sizeof query, "%s ModeloNeon = 0, OnNeon = 0, Color_2 = 1, PaintJob = -1, ConSeguro = 0, Precio = 0, Embargo = 0, Multa = 0, MaxMaletero = 5, CallSign = '' WHERE ID = '%d'", que2ry, InfoVehiculo[vid][vID_sql]);
	mysql_tquery(DBInsanity, query);
	return 1;
}

check_vehicles(playerid, Float: metros)
{
	new Float: x, Float: y, Float: z;
	Loop(id, totalvehiculos, 1) if (InfoVehiculo[id][vIG_id] != 0)
	{
		new vehicleid = InfoVehiculo[id][vIG_id];
		GetVehiclePos(vehicleid, x, y, z);
		if (IsPlayerInRangeOfPoint(playerid, metros, x, y, z))
		{
			if (GetVehicleVirtualWorld(vehicleid) == GetPlayerVirtualWorld(playerid))
			{
				return id;
			}
		}
	}
	return -1;
}

stock GetCar3DZone(vehicleid, zone[], len)
{
    new Float: x, Float: y, Float: z;
    GetVehiclePos(vehicleid, x, y, z);
    for(new i = 0; i != sizeof(gSAZones); i++)
	{
        if(x >= gSAZones[i][SAZONE_AREA][0] && x <= gSAZones[i][SAZONE_AREA][3] && y >= gSAZones[i][SAZONE_AREA][1] && y <= gSAZones[i][SAZONE_AREA][4] && z >= gSAZones[i][SAZONE_AREA][2] && z <= gSAZones[i][SAZONE_AREA][5]) {
            return format(zone, len, gSAZones[i][SAZONE_NAME], 0);
        }
    }
    return 0;
}

EnNegocio(playerid) //new by EdinsonWalker, 24/01/2020
{
	Loop(id, totalnegocios, 1) if (InfoNegocio[id][nInteriorVW] != 0)
	{
		if (InfoNegocio[id][nInteriorInt] == InfoPersonaje[playerid][pInterior] && InfoNegocio[id][nInteriorVW] == InfoPersonaje[playerid][pVirtualWorld])
		{
			return id;
		}
	}
	return -1;
}

EnCasa(playerid) //new by EdinsonWalker, 16/01/2020
{
	Loop(id, totalcasas, 1) if (InfoCasa[id][cInteriorVW] != 0)
	{
		if (InfoCasa[id][cInteriorInt] == InfoPersonaje[playerid][pInterior] && InfoCasa[id][cInteriorVW] == InfoPersonaje[playerid][pVirtualWorld])
		{
			return id;
		}
	}
	return -1;
}

stock Get2DZone(zone[], len, Float: x, Float: y, Float: z)
{
	#pragma unused z
	for (new i = 0; i != sizeof(gSAZones); i++)
	{
		if (x >= gSAZones[i][SAZONE_AREA][0] && x <= gSAZones[i][SAZONE_AREA][3] && y >= gSAZones[i][SAZONE_AREA][1] && y <= gSAZones[i][SAZONE_AREA][4])
		{
			return format(zone, len, gSAZones[i][SAZONE_NAME]);
		}
	}
	return format(zone, len, "San Andreas");
}

funcion IsPlayerAdminCall(playerid)
{
	if (GetPlayerAdmin(playerid, 1) != 0) return 1;
	else return 0;
}

add_mapeos_edinson()
{
	//negocio: hospital
	CreateDynamicObject(19325, -2282.10498, 116.04528, -6.33510,   90.00000, 0.00000, 90.18001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(19325, -2275.52295, 116.04869, -6.33510,   90.00000, 0.00000, 90.18001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1569, -2330.58301, 112.93484, -6.40223,   0.00000, 0.00000, -90.11999, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1569, -2330.57104, 109.95349, -6.40223,   0.00000, 0.00000, -269.82010, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(948, -2330.26855, 109.30609, -6.40290,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(948, -2330.29541, 113.56786, -6.40290,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(955, -2323.70898, 99.48238, -6.01688,   0.00000, 0.00000, -178.56001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(18755, -2272.10547, 111.65658, -4.37645,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1671, -2320.76099, 113.19901, -5.88380,   0.00000, 0.00000, -89.76000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1726, -2329.07813, 122.57433, -6.40811,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1727, -2326.52881, 122.55769, -6.40772,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1726, -2329.83130, 119.36741, -6.40811,   0.00000, 0.00000, 90.18001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1726, -2329.71436, 100.69326, -6.40811,   0.00000, 0.00000, 90.18001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1726, -2326.67969, 99.79217, -6.40811,   0.00000, 0.00000, -179.94009, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1727, -2325.07983, 99.81741, -6.40772,   0.00000, 0.00000, -179.40001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(955, -2324.11963, 123.20577, -6.01688,   0.00000, 0.00000, 0.41997, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1823, -2328.15112, 119.83789, -6.39688,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1823, -2328.02661, 101.31773, -6.39688,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1969, -2283.07227, 116.84062, -5.81654,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1984, -2280.94287, 123.64344, -6.33649,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1969, -2283.06006, 117.66077, -5.81654,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1969, -2283.04883, 118.50089, -5.81654,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1969, -2283.04321, 119.33660, -5.81654,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1969, -2283.03442, 120.17873, -5.81654,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1969, -2283.02588, 121.02080, -5.81654,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2372, -2290.68164, 92.00401, -6.30313,   0.00000, 0.00000, -89.76001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2372, -2287.70044, 91.98628, -6.30313,   0.00000, 0.00000, -89.76001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2378, -2289.51831, 91.95734, -5.74177,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2378, -2290.16138, 91.95860, -5.74177,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2374, -2286.86230, 91.94845, -5.71057,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2374, -2287.86182, 91.91426, -5.71057,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2568, -2306.46973, 121.37341, -6.40023,   0.00000, 0.00000, -90.05998, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2568, -2306.48364, 104.09891, -6.40023,   0.00000, 0.00000, -90.05998, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2811, -2306.53638, 116.38536, -6.40610,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2811, -2306.59521, 105.86118, -6.40610,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2819, -2287.69775, 90.53571, -6.30606,   0.00000, 0.00000, 26.52000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2819, -2289.57544, 91.32547, -6.30606,   0.00000, 0.00000, -53.04000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2816, -2327.69849, 120.37637, -5.90266,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2862, -2283.08618, 119.35001, -5.56019,   0.00000, 0.00000, -77.16000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2862, -2283.11670, 118.30354, -5.56019,   0.00000, 0.00000, -77.16000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2894, -2322.12305, 109.90666, -5.28146,   0.00000, 0.00000, 90.30000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(16101, -2322.29810, 114.57059, -5.50658,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(16101, -2322.22290, 107.85686, -5.50658,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(16101, -2321.90967, 115.04766, -5.50658,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(16101, -2321.87598, 107.35921, -5.50658,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1991, -2284.35107, 124.63752, -6.33295,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1996, -2283.36108, 124.61852, -6.33266,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2637, -2275.63281, 116.87468, -5.94136,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2636, -2274.90796, 117.59969, -5.72007,   0.00000, 0.00000, 89.82001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2636, -2275.99512, 118.20351, -5.72007,   0.00000, 0.00000, 89.82001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2636, -2277.49072, 116.67051, -5.72007,   0.00000, 0.00000, 206.04004, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2637, -2275.54785, 121.03192, -5.94136,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2636, -2274.96777, 120.31150, -5.72007,   0.00000, 0.00000, 269.94006, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2636, -2275.96899, 120.30746, -5.72007,   0.00000, 0.00000, 269.94006, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2636, -2274.91235, 121.90043, -5.72007,   0.00000, 0.00000, 89.82001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2636, -2276.07739, 121.88678, -5.72007,   0.00000, 0.00000, 89.82001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2848, -2275.99170, 117.09966, -5.51721,   0.00000, 0.00000, 149.81998, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2849, -2275.15088, 120.95564, -5.51900,   0.00000, 0.00000, 151.26004, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2863, -2275.96948, 120.91871, -5.51589,   0.00000, 0.00000, 32.58000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2849, -2283.06201, 117.23722, -5.56056,   0.00000, 0.00000, 70.38000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2849, -2283.03442, 120.40697, -5.56056,   0.00000, 0.00000, 70.38000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11729, -2286.53052, 88.00983, -6.30408,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2372, -2285.85010, 90.70724, -6.30313,   0.00000, 0.00000, -180.59995, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11729, -2287.19165, 88.01793, -6.30408,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11729, -2287.85303, 88.02603, -6.30408,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11730, -2288.50903, 88.03293, -6.30304,   0.00000, 0.00000, -178.92003, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11729, -2289.15479, 88.04016, -6.30408,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11730, -2291.25073, 88.05096, -6.30304,   0.00000, 0.00000, -178.92003, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11729, -2291.91846, 88.07747, -6.30408,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11729, -2292.57983, 88.09290, -6.30408,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11730, -2293.21265, 88.05804, -6.30304,   0.00000, 0.00000, -178.92003, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11729, -2293.87988, 88.08451, -6.30408,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2009, -2304.83667, 123.41080, -6.34654,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2009, -2294.38647, 123.56502, -6.34654,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2009, -2295.87231, 98.58851, -6.34654,   0.00000, 0.00000, -179.75998, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2009, -2286.04419, 98.61220, -6.34654,   0.00000, 0.00000, -179.75998, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1789, -2298.48413, 103.75146, -5.93974,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2596, -2295.99683, 97.38039, -5.06379,   0.00000, 0.00000, 178.13989, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(14532, -2298.04492, 101.34541, -5.37237,   0.00000, 0.00000, 51.90000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3394, -2295.97656, 102.83901, -6.34567,   0.00000, 0.00000, 0.48000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3394, -2298.99219, 105.74705, -6.34567,   0.00000, 0.00000, 89.58001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2007, -2298.83960, 97.53035, -6.34797,   0.00000, 0.00000, -180.60004, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2007, -2299.81982, 97.54817, -6.34797,   0.00000, 0.00000, -180.60004, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2007, -2300.81934, 97.57800, -6.34797,   0.00000, 0.00000, -180.60004, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2132, -2302.13257, 97.53699, -6.34514,   0.00000, 0.00000, 179.46004, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2146, -2299.72510, 102.44625, -5.91432,   0.00000, 0.00000, 90.36001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3396, -2305.13208, 101.65192, -6.34561,   0.00000, 0.00000, -179.51997, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2611, -2295.47607, 98.54935, -4.56569,   0.00000, 0.00000, -89.99997, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2133, -2304.13257, 97.55643, -6.34665,   0.00000, 0.00000, -180.89990, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2133, -2305.15674, 97.57429, -6.34665,   0.00000, 0.00000, -180.89990, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2131, -2285.54541, 100.60732, -6.34765,   0.00000, 0.00000, -90.11999, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11738, -2298.33862, 103.75805, -5.51516,   0.00000, 0.00000, -89.04002, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11736, -2298.59668, 103.77932, -5.52650,   0.00000, 0.00000, -84.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11736, -2295.76221, 98.53619, -5.53405,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1671, -2297.67041, 98.62017, -5.88380,   0.00000, 0.00000, 88.32000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2131, -2285.56763, 102.60718, -6.34765,   0.00000, 0.00000, -90.11999, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3396, -2294.67578, 99.38212, -6.34561,   0.00000, 0.00000, -179.51997, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3394, -2294.65869, 102.92637, -6.34567,   0.00000, 0.00000, 179.88004, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3396, -2292.29321, 105.65569, -6.34561,   0.00000, 0.00000, -269.81989, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2007, -2287.98584, 97.56025, -6.34797,   0.00000, 0.00000, -180.60004, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2007, -2288.97925, 97.59782, -6.34797,   0.00000, 0.00000, -180.60004, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2132, -2289.98877, 97.50880, -6.34514,   0.00000, 0.00000, 180.24002, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2133, -2291.97119, 97.50755, -6.34665,   0.00000, 0.00000, -180.89990, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2131, -2289.89258, 105.81284, -7.95152,   0.00000, 0.00000, 0.54001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2146, -2291.14282, 101.17521, -5.91432,   0.00000, 0.00000, 180.30000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(14532, -2290.02930, 99.36216, -5.37237,   0.00000, 0.00000, 22.92000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1789, -2292.57251, 100.41419, -5.93974,   0.00000, 0.00000, -90.17999, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11738, -2292.59619, 100.16084, -5.51516,   0.00000, 0.00000, -89.04002, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11736, -2292.57104, 100.46773, -5.52650,   0.00000, 0.00000, -20.64000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3394, -2296.08179, 122.50771, -6.34567,   0.00000, 0.00000, 0.48000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3396, -2296.08521, 118.98179, -6.34561,   0.00000, 0.00000, -0.05999, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2007, -2302.66187, 124.70490, -6.34797,   0.00000, 0.00000, -360.12003, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2007, -2301.66089, 124.70044, -6.34797,   0.00000, 0.00000, -360.12003, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2007, -2300.68042, 124.67647, -6.34797,   0.00000, 0.00000, -360.12003, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2132, -2299.65015, 124.81016, -6.34514,   0.00000, 0.00000, 359.76004, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2131, -2297.67065, 124.85100, -7.95152,   0.00000, 0.00000, 0.54001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2131, -2305.27393, 121.15666, -6.34765,   0.00000, 0.00000, -270.23978, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2131, -2305.27100, 119.15028, -7.98221,   0.00000, 0.00000, -270.23978, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3394, -2298.62988, 116.67968, -6.34567,   0.00000, 0.00000, -90.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2133, -2300.97974, 116.56272, -6.34665,   0.00000, 0.00000, -180.89990, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2146, -2299.55176, 120.74281, -5.91432,   0.00000, 0.00000, 90.36001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(14532, -2297.81616, 119.24883, -5.37237,   0.00000, 0.00000, 46.62000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1789, -2299.36279, 122.42319, -5.93974,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11738, -2299.35767, 122.42834, -5.51516,   0.00000, 0.00000, -149.09998, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11736, -2300.97754, 116.45336, -5.29504,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2131, -2292.24756, 124.65993, -6.34765,   0.00000, 0.00000, -359.93982, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2131, -2290.22900, 124.73215, -7.95152,   0.00000, 0.00000, 0.54001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2132, -2288.19653, 124.61774, -6.34514,   0.00000, 0.00000, 359.76004, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2133, -2286.21387, 124.59200, -6.34665,   0.00000, 0.00000, -359.57977, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3396, -2285.58154, 121.69205, -6.34561,   0.00000, 0.00000, -0.05999, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3396, -2290.28003, 116.79617, -6.34561,   0.00000, 0.00000, -89.94001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2131, -2292.77954, 116.55872, -6.34765,   0.00000, 0.00000, -180.53999, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2007, -2294.89331, 122.53651, -6.34797,   0.00000, 0.00000, -269.81998, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2007, -2294.86108, 121.52983, -6.34797,   0.00000, 0.00000, -269.81998, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3396, -2294.87622, 119.07451, -6.34561,   0.00000, 0.00000, -180.42000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2146, -2291.23828, 119.95589, -5.91432,   0.00000, 0.00000, 90.36001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(14532, -2292.77710, 118.64944, -5.37237,   0.00000, 0.00000, -42.84003, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1789, -2291.67480, 121.35912, -5.93974,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11738, -2291.78979, 121.38389, -5.51516,   0.00000, 0.00000, -149.09998, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11736, -2294.59937, 118.85513, -5.29504,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11736, -2289.83228, 117.26783, -5.29504,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(11738, -2291.91016, 124.62045, -3.85432,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2611, -2286.49951, 97.13218, -4.56569,   0.00000, 0.00000, -180.78000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2611, -2305.56885, 123.97935, -4.56569,   0.00000, 0.00000, -268.97998, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2611, -2295.27271, 124.15649, -4.56569,   0.00000, 0.00000, -269.87994, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1796, -2274.99292, 105.14752, -6.33085,   0.00000, 0.00000, -90.24000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2435, -2271.84692, 103.33812, -6.33417,   0.00000, 0.00000, -89.70001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1796, -2274.95752, 101.98156, -6.33085,   0.00000, 0.00000, -90.24000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2435, -2271.84473, 100.09781, -6.33417,   0.00000, 0.00000, -89.70001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1796, -2275.04858, 98.75821, -6.33085,   0.00000, 0.00000, -90.24000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2435, -2271.89014, 97.31003, -6.33417,   0.00000, 0.00000, -89.70001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1796, -2277.19336, 101.67596, -6.33085,   0.00000, 0.00000, 89.81998, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2435, -2280.27319, 100.18656, -6.33417,   0.00000, 0.00000, -270.66019, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1796, -2277.19531, 98.54158, -6.33085,   0.00000, 0.00000, 89.81998, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2435, -2280.13940, 97.25288, -6.33417,   0.00000, 0.00000, -270.66019, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1796, -2277.06030, 89.53638, -6.33085,   0.00000, 0.00000, 89.81998, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2435, -2280.18994, 88.16255, -6.33417,   0.00000, 0.00000, -269.82022, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1796, -2277.02295, 94.75317, -6.33085,   0.00000, 0.00000, 89.81998, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2435, -2280.15332, 96.12663, -6.33417,   0.00000, 0.00000, -269.82022, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1796, -2274.92700, 95.97235, -6.33085,   0.00000, 0.00000, -90.24000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2435, -2271.86035, 94.27914, -6.33417,   0.00000, 0.00000, -89.70001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1796, -2275.13672, 92.34847, -6.33085,   0.00000, 0.00000, -90.24000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2435, -2271.77930, 90.80006, -6.33417,   0.00000, 0.00000, -89.70001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1796, -2275.20410, 89.26386, -6.33085,   0.00000, 0.00000, -90.24000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2435, -2271.76636, 87.71861, -6.33417,   0.00000, 0.00000, -89.70001, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3657, -2300.69409, 115.42684, -5.79941,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3657, -2289.81592, 115.43839, -5.79941,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3657, -2290.12061, 106.92603, -5.79941,   0.00000, 0.00000, -180.47997, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3657, -2300.84619, 106.90402, -5.79941,   0.00000, 0.00000, -180.47997, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3657, -2278.40137, 106.78431, -5.79941,   0.00000, 0.00000, -180.47997, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3657, -2281.26270, 101.48454, -5.79941,   0.00000, 0.00000, -89.75991, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(3657, -2281.31104, 95.96449, -5.79941,   0.00000, 0.00000, -89.75991, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(19325, -2322.28345, 111.19276, -2.40092,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(19325, -2319.86108, 115.07748, -3.69217,   90.00000, 0.00000, -90.12000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(19325, -2319.79761, 107.32031, -3.69217,   90.00000, 0.00000, -90.12000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1671, -2320.96362, 109.95673, -5.88380,   0.00000, 0.00000, -89.76000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2163, -2317.89136, 114.02280, -6.33138,   0.00000, 0.00000, -90.06000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2163, -2317.81616, 109.13745, -6.33138,   0.00000, 0.00000, -90.06000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2165, -2321.31909, 112.57909, -6.36983,   0.00000, 0.00000, 90.12000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2165, -2320.39746, 108.21793, -6.36983,   0.00000, 0.00000, 179.16000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(14902, -2326.99756, 108.73672, -6.00288,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(14902, -2326.82153, 84.19997, -6.00288,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(14902, -2315.71826, 88.22794, -6.00288,   0.00000, 0.00000, 90.05999, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(14902, -2345.46802, 134.41643, -6.00288,   0.00000, 0.00000, 270.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1823, -2295.86401, 115.03737, -6.39688,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1721, -2297.04565, 115.57928, -6.33434,   0.00000, 0.00000, -179.87988, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1721, -2297.66772, 115.56859, -6.33434,   0.00000, 0.00000, -179.87988, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1721, -2293.68896, 115.62017, -6.33434,   0.00000, 0.00000, -179.87988, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1721, -2293.06396, 115.60983, -6.33434,   0.00000, 0.00000, -179.87988, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1823, -2296.11255, 106.43763, -6.39688,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1721, -2293.10889, 106.70907, -6.33434,   0.00000, 0.00000, -360.77997, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1721, -2293.77808, 106.71681, -6.33434,   0.00000, 0.00000, -360.77997, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1721, -2297.13794, 106.69180, -6.33434,   0.00000, 0.00000, -360.77997, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1721, -2297.79858, 106.68490, -6.33434,   0.00000, 0.00000, -360.77997, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1721, -2276.03955, 106.56683, -6.33434,   0.00000, 0.00000, -360.77997, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(1721, -2275.31812, 106.55317, -6.33434,   0.00000, 0.00000, -360.77997, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2069, -2271.66455, 100.87299, -6.32233,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2069, -2271.70117, 97.86909, -6.32233,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2069, -2271.62988, 104.13335, -6.32233,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2069, -2280.27612, 97.88002, -6.32233,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2069, -2280.37524, 100.94157, -6.32233,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2069, -2280.25098, 95.52490, -6.32233,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2069, -2280.20142, 88.83647, -6.32233,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2069, -2271.78125, 88.35712, -6.32233,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2069, -2271.83569, 91.41689, -6.32233,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2069, -2271.86475, 94.98038, -6.32233,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2245, -2327.51074, 101.84623, -5.67118,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2241, -2281.15820, 106.57458, -5.85025,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2241, -2274.63794, 115.27674, -5.85025,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(948, -2317.39160, 106.61372, -6.40290,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(948, -2317.35083, 115.66202, -6.40290,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2241, -2284.43018, 91.69456, -5.85025,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	CreateDynamicObject(2267, -2282.97070, 91.07401, -4.70970,   0.00000, 0.00000, -179.57997, -1, 61, -1, 600.0, 600.0);
	new interijerbolnice[16];
	interijerbolnice[0] = CreateDynamicObject(19375, -2305.89844, 120.75169, -6.39870,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice[1] = CreateDynamicObject(19375, -2305.90259, 101.68427, -6.39870,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice[2] = CreateDynamicObject(19375, -2310.76880, 98.97707, -6.39870,   0.00000, 0.00000, 89.99998, -1, 61, -1, 600.0, 600.0);
	interijerbolnice[3] = CreateDynamicObject(19375, -2316.55078, 98.94240, -6.39870,   0.00000, 0.00000, 89.99998, -1, 61, -1, 600.0, 600.0);
	interijerbolnice[4] = CreateDynamicObject(19375, -2326.96411, 99.01592, -6.39870,   0.00000, 0.00000, 89.99998, -1, 61, -1, 600.0, 600.0);
	interijerbolnice[5] = CreateDynamicObject(19375, -2330.67236, 101.74663, -6.39870,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice[6] = CreateDynamicObject(19375, -2330.65210, 98.52275, -6.39870,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice[7] = CreateDynamicObject(19375, -2330.69604, 111.18682, -6.39870,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice[8] = CreateDynamicObject(19375, -2330.69629, 120.62688, -6.39870,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice[9] = CreateDynamicObject(19375, -2330.67749, 124.17667, -6.39870,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice[10] = CreateDynamicObject(19375, -2327.21191, 123.63595, -6.39870,   0.00000, 0.00000, 89.99998, -1, 61, -1, 600.0, 600.0);
	interijerbolnice[11] = CreateDynamicObject(19375, -2316.40356, 123.68134, -6.39870,   0.00000, 0.00000, 89.99998, -1, 61, -1, 600.0, 600.0);
	interijerbolnice[12] = CreateDynamicObject(19375, -2310.68115, 123.68867, -6.39870,   0.00000, 0.00000, 89.99998, -1, 61, -1, 600.0, 600.0);
	interijerbolnice[13] = CreateDynamicObject(19375, -2325.87256, 98.95345, -6.39870,   0.00000, 0.00000, 89.99998, -1, 61, -1, 600.0, 600.0);
	interijerbolnice[14] = CreateDynamicObject(19375, -2325.84888, 123.69380, -6.39870,   0.00000, 0.00000, 89.99998, -1, 61, -1, 600.0, 600.0);
	interijerbolnice[15] = CreateDynamicObject(19375, -2305.90991, 111.18351, 2.21916,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	Loop(i, sizeof interijerbolnice, 0) { SetDynamicObjectMaterial(interijerbolnice[i], 0, 14847, "mp_policesf", "mp_cop_marble"); }
	new interijerbolnice1;
	interijerbolnice1 = CreateDynamicObject(18981, -2318.37036, 111.31787, -6.89421,   0.00000, 90.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	SetDynamicObjectMaterial(interijerbolnice1, 0, 14771, "int_brothelint3", "GB_nastybar12" );
	new interijerbolnice2[8];
	interijerbolnice2[0] = CreateDynamicObject(19377, -2317.47705, 111.17188, -6.41957,   0.00000, 90.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice2[1] = CreateDynamicObject(19377, -2306.97412, 111.15853, -6.41957,   0.00000, 90.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice2[2] = CreateDynamicObject(19377, -2296.47681, 111.15432, -6.41957,   0.00000, 90.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice2[3] = CreateDynamicObject(19377, -2285.99756, 111.14565, -6.41957,   0.00000, 90.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice2[4] = CreateDynamicObject(19377, -2275.51636, 111.13313, -6.41957,   0.00000, 90.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice2[5] = CreateDynamicObject(19377, -2279.82153, 101.51434, -6.41957,   0.00000, 90.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice2[6] = CreateDynamicObject(19377, -2279.81787, 91.88251, -6.41957,   0.00000, 90.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice2[7] = CreateDynamicObject(19377, -2290.31421, 92.08973, -6.41957,   0.00000, 90.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	Loop(i, sizeof interijerbolnice2, 0) { SetDynamicObjectMaterial(interijerbolnice2[i], 0, 14815, "whore_main", "Strip_Ceiling"); }
	new interijerbolnice3[8];
	interijerbolnice3[0] = CreateDynamicObject(19378, -2300.62109, 120.67104, -6.43269,   0.00000, 90.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice3[1] = CreateDynamicObject(19378, -2290.12451, 120.68269, -6.43269,   0.00000, 90.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice3[2] = CreateDynamicObject(19377, -2279.60645, 120.74976, -6.41957,   0.00000, 90.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice3[3] = CreateDynamicObject(19378, -2300.60400, 101.66847, -6.43269,   0.00000, 90.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice3[4] = CreateDynamicObject(19378, -2290.13550, 101.67496, -6.43269,   0.00000, 90.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice3[5] = CreateDynamicObject(19378, -2275.50610, 101.49702, -6.41527,   0.00000, 90.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice3[6] = CreateDynamicObject(19378, -2275.50537, 91.87841, -6.41527,   0.00000, 90.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice3[7] = CreateDynamicObject(19378, -2290.28442, 88.27329, -6.39011,   0.00000, 90.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	Loop(i, sizeof interijerbolnice3, 0) { SetDynamicObjectMaterial(interijerbolnice3[i], 0, 14777, "int_casinoint3", "GB_midbar05" ); }
	new interijerbolnice4[50];
	interijerbolnice4[0] = CreateDynamicObject(19387, -2304.22949, 116.03176, -4.64799,   0.00000, 0.00000, -90.12000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[1] = CreateDynamicObject(19450, -2295.41870, 120.82530, -4.64436,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[2] = CreateDynamicObject(19450, -2297.87695, 116.03960, -4.64436,   0.00000, 0.00000, -89.93999, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[3] = CreateDynamicObject(19387, -2286.42505, 116.04211, -4.64799,   0.00000, 0.00000, -90.12000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[4] = CreateDynamicObject(19450, -2292.72632, 116.04372, -4.64436,   0.00000, 0.00000, -90.05999, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[5] = CreateDynamicObject(19450, -2301.09204, 125.22569, -4.64436,   0.00000, 0.00000, -89.93999, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[6] = CreateDynamicObject(19450, -2291.58936, 125.22132, -4.64436,   0.00000, 0.00000, -89.93999, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[7] = CreateDynamicObject(19450, -2288.96191, 125.23438, -4.64436,   0.00000, 0.00000, -89.93999, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[8] = CreateDynamicObject(19450, -2284.92993, 120.82417, -4.64436,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[9] = CreateDynamicObject(19387, -2304.26318, 106.36894, -4.64799,   0.00000, 0.00000, -90.12000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[10] = CreateDynamicObject(19450, -2297.88721, 106.38058, -4.64436,   0.00000, 0.00000, -89.93999, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[11] = CreateDynamicObject(19387, -2286.54419, 106.38430, -4.64799,   0.00000, 0.00000, -90.12000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[12] = CreateDynamicObject(19450, -2292.78320, 106.37524, -4.64436,   0.00000, 0.00000, -89.93999, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[13] = CreateDynamicObject(19450, -2295.32544, 101.61089, -4.64436,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[14] = CreateDynamicObject(19450, -2285.04834, 101.64211, -4.64436,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[15] = CreateDynamicObject(19450, -2305.80151, 101.47264, -4.64436,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[16] = CreateDynamicObject(19450, -2305.73853, 120.81903, -4.64436,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[17] = CreateDynamicObject(19450, -2301.13989, 96.98751, -4.64436,   0.00000, 0.00000, -89.93999, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[18] = CreateDynamicObject(19450, -2291.75659, 96.99726, -4.64436,   0.00000, 0.00000, -89.93999, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[19] = CreateDynamicObject(19450, -2289.79370, 96.99277, -4.64436,   0.00000, 0.00000, -89.93999, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[20] = CreateDynamicObject(19358, -2283.33960, 116.06971, -4.65555,   0.00000, 0.00000, -90.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[21] = CreateDynamicObject(19358, -2274.27124, 116.06667, -4.65555,   0.00000, 0.00000, -90.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[22] = CreateDynamicObject(19450, -2274.39478, 120.86584, -4.64436,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[23] = CreateDynamicObject(19450, -2283.08521, 125.23432, -4.64436,   0.00000, 0.00000, -89.93999, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[24] = CreateDynamicObject(19450, -2276.00122, 106.22888, -4.64436,   0.00000, 0.00000, -90.05999, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[25] = CreateDynamicObject(19450, -2280.73730, 98.91158, -4.64436,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[26] = CreateDynamicObject(19387, -2280.71606, 104.52986, -4.64799,   0.00000, 0.00000, -180.11998, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[27] = CreateDynamicObject(19387, -2280.73364, 92.62080, -4.64799,   0.00000, 0.00000, -180.11998, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[28] = CreateDynamicObject(19450, -2280.72778, 86.18951, -4.64436,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[29] = CreateDynamicObject(19450, -2271.28516, 101.45166, -4.64436,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[30] = CreateDynamicObject(19450, -2271.28662, 91.92558, -4.64436,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[31] = CreateDynamicObject(19450, -2275.88550, 96.71304, -4.64436,   0.00000, 0.00000, -90.05999, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[32] = CreateDynamicObject(19450, -2275.89551, 87.11980, -4.64436,   0.00000, 0.00000, -90.05999, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[33] = CreateDynamicObject(19387, -2292.94409, 93.02222, -4.64799,   0.00000, 0.00000, -270.12000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[34] = CreateDynamicObject(19450, -2285.05981, 88.32384, -4.64436,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[35] = CreateDynamicObject(19358, -2286.64087, 93.01552, -4.65555,   0.00000, 0.00000, -90.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[36] = CreateDynamicObject(19358, -2289.76245, 93.02644, -4.65555,   0.00000, 0.00000, -90.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[37] = CreateDynamicObject(19450, -2294.46484, 92.21919, -4.64436,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[38] = CreateDynamicObject(19450, -2289.83716, 87.50123, -4.64436,   0.00000, 0.00000, -89.93999, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[39] = CreateDynamicObject(19358, -2273.76392, 115.45229, -4.65555,   0.00000, 0.00000, -179.99994, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[40] = CreateDynamicObject(19358, -2273.78760, 107.85809, -4.65555,   0.00000, 0.00000, -179.99994, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[41] = CreateDynamicObject(19358, -2317.81274, 108.00053, -4.65555,   0.00000, 0.00000, -179.99994, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[42] = CreateDynamicObject(19387, -2317.80811, 111.13467, -4.64799,   0.00000, 0.00000, -180.11998, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[43] = CreateDynamicObject(19358, -2317.80200, 114.34901, -4.65555,   0.00000, 0.00000, -179.99994, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[44] = CreateDynamicObject(19450, -2284.94409, 87.12706, -4.64436,   0.00000, 0.00000, -90.05999, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[45] = CreateDynamicObject(19358, -2282.29077, 90.95924, -4.65555,   0.00000, 0.00000, -90.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[46] = CreateDynamicObject(19358, -2283.44238, 90.95810, -4.65555,   0.00000, 0.00000, -90.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[47] = CreateDynamicObject(19358, -2330.67798, 111.44034, -5.46509,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[48] = CreateDynamicObject(19377, -2317.82080, 111.19199, 2.32694,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice4[49] = CreateDynamicObject(19450, -2273.49048, 125.26277, -4.64436,   0.00000, 0.00000, -89.93999, -1, 61, -1, 600.0, 600.0);
	Loop(i, sizeof interijerbolnice4, 0) { SetDynamicObjectMaterial(interijerbolnice4[i], 0, 14526, "sweetsmain", "GB_Pan01"); }
	new interijerbolnice5[8];
	interijerbolnice5[0] = CreateDynamicObject(1502, -2305.01709, 106.36456, -6.33490,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice5[1] = CreateDynamicObject(1502, -2304.99121, 115.97685, -6.33490,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice5[2] = CreateDynamicObject(1502, -2287.17383, 115.98093, -6.33490,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice5[3] = CreateDynamicObject(1502, -2287.29980, 106.38473, -6.33490,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice5[4] = CreateDynamicObject(1502, -2280.77783, 105.26968, -6.33490,   0.00000, 0.00000, -89.70000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice5[5] = CreateDynamicObject(1502, -2280.79199, 93.38443, -6.33490,   0.00000, 0.00000, -89.70000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice5[6] = CreateDynamicObject(1502, -2293.72559, 92.96938, -6.33490,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	interijerbolnice5[7] = CreateDynamicObject(1502, -2317.88208, 111.88581, -6.33490,   0.00000, 0.00000, -89.70000, -1, 61, -1, 600.0, 600.0);
	Loop(i, sizeof interijerbolnice5, 0) { SetDynamicObjectMaterial(interijerbolnice5[i], 1, 18029, "genintintsmallrest", "GB_restaursmll09" ); }
	new interijerbolnice6[17];
	interijerbolnice6[0] = CreateDynamicObject(2434, -2322.14966, 107.52789, -6.33429,   0.00000, 0.00000, -90.71999, -1, 61, -1, 600.0, 600.0);
	interijerbolnice6[1] = CreateDynamicObject(2435, -2321.09863, 115.06585, -6.33417,   0.00000, 0.00000, -179.93996, -1, 61, -1, 600.0, 600.0);
	interijerbolnice6[2] = CreateDynamicObject(2435, -2322.18335, 113.94312, -6.33417,   0.00000, 0.00000, -89.70001, -1, 61, -1, 600.0, 600.0);
	interijerbolnice6[3] = CreateDynamicObject(2435, -2322.17847, 113.02223, -6.33417,   0.00000, 0.00000, -89.70001, -1, 61, -1, 600.0, 600.0);
	interijerbolnice6[4] = CreateDynamicObject(2435, -2322.17578, 112.10028, -6.33417,   0.00000, 0.00000, -89.70001, -1, 61, -1, 600.0, 600.0);
	interijerbolnice6[5] = CreateDynamicObject(2435, -2322.17041, 111.20028, -6.33417,   0.00000, 0.00000, -89.70001, -1, 61, -1, 600.0, 600.0);
	interijerbolnice6[6] = CreateDynamicObject(2435, -2322.16284, 110.30032, -6.33417,   0.00000, 0.00000, -89.70001, -1, 61, -1, 600.0, 600.0);
	interijerbolnice6[7] = CreateDynamicObject(2435, -2322.15552, 109.38035, -6.33417,   0.00000, 0.00000, -89.70001, -1, 61, -1, 600.0, 600.0);
	interijerbolnice6[8] = CreateDynamicObject(2435, -2322.14453, 108.46036, -6.33417,   0.00000, 0.00000, -89.70001, -1, 61, -1, 600.0, 600.0);
	interijerbolnice6[9] = CreateDynamicObject(2434, -2322.02588, 115.05331, -6.33429,   0.00000, 0.00000, -179.22006, -1, 61, -1, 600.0, 600.0);
	interijerbolnice6[10] = CreateDynamicObject(2435, -2320.19458, 115.07468, -6.33417,   0.00000, 0.00000, -179.93996, -1, 61, -1, 600.0, 600.0);
	interijerbolnice6[11] = CreateDynamicObject(2435, -2319.28687, 115.08522, -6.33417,   0.00000, 0.00000, -179.93996, -1, 61, -1, 600.0, 600.0);
	interijerbolnice6[12] = CreateDynamicObject(2435, -2318.36621, 115.08720, -6.33417,   0.00000, 0.00000, -179.93996, -1, 61, -1, 600.0, 600.0);
	interijerbolnice6[13] = CreateDynamicObject(2435, -2321.04028, 107.34956, -6.33417,   0.00000, 0.00000, -359.76004, -1, 61, -1, 600.0, 600.0);
	interijerbolnice6[14] = CreateDynamicObject(2435, -2320.11938, 107.35111, -6.33417,   0.00000, 0.00000, -359.76004, -1, 61, -1, 600.0, 600.0);
	interijerbolnice6[15] = CreateDynamicObject(2435, -2319.19849, 107.35374, -6.33417,   0.00000, 0.00000, -359.76004, -1, 61, -1, 600.0, 600.0);
	interijerbolnice6[16] = CreateDynamicObject(2435, -2318.29688, 107.35716, -6.33417,   0.00000, 0.00000, -359.76004, -1, 61, -1, 600.0, 600.0);
	Loop(i, sizeof interijerbolnice6, 0) { SetDynamicObjectMaterial(interijerbolnice6[i], 2, 18029, "genintintsmallrest", "GB_restaursmll09" ); }
	new interijerbolnice7;
	interijerbolnice7 = CreateDynamicObject(6959, -2285.25806, 106.95802, -2.89306,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	SetDynamicObjectMaterial(interijerbolnice7, 0, 15053, "vghotelnice", "AH_flroortile3" );
	interijerbolnice7 = CreateDynamicObject(6959, -2326.60010, 113.31732, -1.43820,   0.00000, 0.00000, 0.00000, -1, 61, -1, 600.0, 600.0);
	SetDynamicObjectMaterial(interijerbolnice7, 0, 15053, "vghotelnice", "AH_flroortile3" );
}

mapeos_total()
{
//Ammunation
	CreateDynamicObject(1594, 1446.19934, -1400.85791, 13.00226,   0.00000, 0.00000, 22.32000);
	CreateDynamicObject(1594, 1446.77258, -1397.18018, 13.00226,   0.00000, 0.00000, -22.32000);
	CreateDynamicObject(1300, 1448.70276, -1403.05859, 12.92450,   0.00000, 0.00000, -89.75999);
	CreateDynamicObject(1338, 1422.12842, -1356.60364, 13.24218,   0.00000, 0.00000, -5.58000);
	CreateDynamicObject(1338, 1423.50574, -1356.87317, 12.57594,   0.00000, 0.00000, 21.00000);
	CreateDynamicObject(1440, 1426.33789, -1356.37415, 13.07326,   0.00000, 0.00000, -96.24001);
	CreateDynamicObject(2949, 1425.74536, -1357.66687, 12.56508,   0.00000, 0.00000, -90.35999);


//East water
	CreateDynamicObject(1432, 2312.63379, -1396.41284, 23.13955,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1432, 2319.75391, -1397.22253, 23.13955,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1594, 2310.22192, -1398.77271, 23.48126,   0.00000, 0.00000, -32.82000);
	CreateDynamicObject(1594, 2316.21777, -1398.74658, 23.48126,   0.00000, 0.00000, -32.82000);
	CreateDynamicObject(1574, 2308.43433, -1394.60779, 22.99832,   0.00000, 0.00000, -119.39999);
	CreateDynamicObject(3862, 2295.67969, -1403.71814, 24.13374,   0.00000, 0.00000, 87.96003);
	CreateDynamicObject(1571, 2297.83130, -1407.74890, 24.34692,   0.00000, 0.00000, 144.17992);
	CreateDynamicObject(3861, 2301.37793, -1408.34766, 24.17936,   0.00000, 0.00000, 177.00011);
	CreateDynamicObject(3861, 2304.50439, -1408.50635, 24.17936,   0.00000, 0.00000, 177.00011);
	CreateDynamicObject(19637, 2305.47437, -1407.90991, 23.83045,   0.00000, 0.00000, 87.18002);
	CreateDynamicObject(19638, 2304.62256, -1407.87708, 23.82269,   0.00000, 0.00000, 88.20000);
	CreateDynamicObject(19636, 2303.76733, -1407.84668, 23.82272,   0.00000, 0.00000, 88.38001);
	CreateDynamicObject(19636, 2302.38599, -1407.78418, 23.82032,   0.00000, 0.00000, 86.94002);
	CreateDynamicObject(19639, 2301.53613, -1407.71545, 23.82219,   0.00000, 0.00000, 86.52002);
	CreateDynamicObject(19636, 2300.58716, -1407.66296, 23.82222,   0.00000, 0.00000, 85.74001);
	CreateDynamicObject(2912, 2305.47827, -1407.66357, 22.99775,   0.00000, 0.00000, -9.24000);
	CreateDynamicObject(2912, 2304.50317, -1407.88000, 22.99775,   0.00000, 0.00000, -41.94000);
	CreateDynamicObject(2912, 2303.50977, -1407.67212, 22.99775,   0.00000, 0.00000, 21.00000);
	CreateDynamicObject(2912, 2302.31616, -1407.70044, 22.99775,   0.00000, 0.00000, 44.34001);
	CreateDynamicObject(2912, 2301.34888, -1407.38513, 22.99775,   0.00000, 0.00000, -6.89999);
	CreateDynamicObject(2912, 2300.39038, -1407.36462, 22.99775,   0.00000, 0.00000, -61.91998);
	CreateDynamicObject(1340, 2299.36426, -1396.23840, 24.13111,   0.00000, 0.00000, 1.14000);
	CreateDynamicObject(1450, 2295.23413, -1396.61670, 23.59310,   0.00000, 0.00000, 92.51999);
	CreateDynamicObject(1450, 2294.08545, -1395.99768, 23.59310,   9.54000, 7.50000, -123.30000);


	// China entorno
	CreateDynamicObject(7288, 1211.12061, -1755.98181, 24.38388,   0.00000, 0.00000, -39.84001);
	CreateDynamicObject(9482, 1213.70679, -1842.15063, 17.74072,   0.00000, 0.00000, 89.52001);
	CreateDynamicObject(9482, 1270.00684, -1842.18677, 17.74072,   0.00000, 0.00000, 89.52001);
	CreateDynamicObject(9482, 1287.57068, -1852.06274, 19.09826,   0.00000, 0.00000, 180.78001);
	CreateDynamicObject(982, 1236.91687, -1842.19653, 13.22664,   0.00000, 0.00000, 90.23999);
	CreateDynamicObject(982, 1190.00024, -1824.08459, 13.22664,   0.00000, 0.00000, 180.18001);
	CreateDynamicObject(982, 1287.40930, -1828.76880, 13.22664,   0.00000, 0.00000, 180.18001);
	CreateDynamicObject(982, 1287.32019, -1803.17163, 13.22664,   0.00000, 0.00000, 180.18001);
	CreateDynamicObject(982, 1274.53320, -1784.09509, 13.22664,   0.00000, 0.00000, 90.23999);
	CreateDynamicObject(983, 1287.29980, -1787.18811, 13.23012,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(984, 1252.91174, -1842.15247, 13.18218,   0.00000, 0.00000, 89.81998);
	CreateDynamicObject(983, 1283.70569, -1842.19128, 13.22671,   0.00000, 0.00000, 89.45999);
	CreateDynamicObject(983, 1199.59448, -1841.97925, 13.22671,   0.00000, 0.00000, 86.81998);
	CreateDynamicObject(983, 1193.20532, -1841.78284, 13.22671,   0.00000, 0.00000, 89.45999);
	CreateDynamicObject(983, 1190.03601, -1838.50769, 13.22671,   0.00000, 0.00000, 179.63991);
	CreateDynamicObject(9482, 1416.86890, -1872.35522, 17.76000,   0.00000, 0.00000, 180.78001);
	CreateDynamicObject(9482, 1446.19873, -1872.26294, 19.13767,   0.00000, 0.00000, 180.78001);
	CreateDynamicObject(9482, 1478.43542, -1872.21265, 17.76000,   0.00000, 0.00000, 180.78001);
	CreateDynamicObject(9482, 1519.61792, -1872.50317, 19.13767,   0.00000, 0.00000, 180.78001);
	CreateDynamicObject(9482, 1560.18555, -1872.18652, 17.76000,   0.00000, 0.00000, 180.78001);
	CreateDynamicObject(3471, 1575.86572, -1787.50220, 13.74022,   0.00000, 0.00000, 180.24004);


	// LSRP
	CreateDynamicObject(1432, 832.17657, -1553.41809, 12.57930,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(3260, 819.68732, -1554.00415, 13.19958,   31.74002, -88.50002, 0.00000);


	//Other Unity Station
	CreateDynamicObject(8674, 1811.28320, -1898.71912, 13.84805,   0.00000, 0.00000, -90.12003);
	CreateDynamicObject(8674, 1811.28479, -1880.75464, 13.84805,   0.00000, 0.00000, -90.12003);
	CreateDynamicObject(1216, 1810.89307, -1878.54688, 13.24631,   0.00000, 0.00000, 89.99999);
	CreateDynamicObject(8674, 1776.28589, -1942.32153, 13.74761,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(8674, 1766.00439, -1942.32336, 13.74761,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1340, 1781.34119, -1938.19727, 13.57351,   0.00000, 0.00000, 89.46005);
	CreateDynamicObject(8838, 1794.39807, -1939.00696, 14.05785,   0.00000, 0.00000, 179.94016);
	CreateDynamicObject(8843, 1786.18262, -1932.40930, 12.37580,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(8843, 1790.83801, -1931.61426, 12.47586,   0.00000, 0.00000, -89.93999);
	CreateDynamicObject(8843, 1779.13013, -1932.42749, 12.40016,   0.00000, 0.00000, -180.60014);
	CreateDynamicObject(1597, 1785.96313, -1928.58118, 14.99772,   0.00000, 0.00000, 90.00001);
	CreateDynamicObject(1597, 1795.91370, -1928.57495, 14.99772,   0.00000, 0.00000, 90.00001);
	CreateDynamicObject(8843, 1803.22778, -1932.88037, 12.40016,   0.00000, 0.00000, -1.68012);
	CreateDynamicObject(1256, 1805.01770, -1941.07751, 13.20490,   0.00000, 0.00000, -90.18003);
	CreateDynamicObject(1256, 1797.63159, -1941.22400, 13.20490,   0.00000, 0.00000, -90.18003);
	CreateDynamicObject(1256, 1790.53296, -1941.09790, 13.20490,   0.00000, 0.00000, -90.18003);
	CreateDynamicObject(1300, 1794.18225, -1940.32617, 12.89907,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1300, 1801.22754, -1940.32520, 12.89907,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1231, 1791.43762, -1928.42407, 15.10402,   0.00000, 0.00000, -90.78001);
	CreateDynamicObject(1231, 1800.38672, -1928.26892, 15.10402,   0.00000, 0.00000, -90.78001);
	CreateDynamicObject(1231, 1781.60706, -1928.37891, 15.10402,   0.00000, 0.00000, -90.78001);
	CreateDynamicObject(8652, 1701.01379, -1858.51050, 13.47031,   0.00000, 0.00000, 89.87998);


	// Gas Station Fix Temple
	CreateDynamicObject(1676, 998.23248, -937.66522, 42.73161,   0.00000, 0.00000, 8.00000);
	CreateDynamicObject(1676, 1000.17590, -937.42517, 42.73160,   0.00000, 0.00000, 8.00000);
	CreateDynamicObject(1676, 1002.10645, -937.17896, 42.73160,   0.00000, 0.00000, 8.00000);
	CreateDynamicObject(1676, 1005.16168, -936.64832, 42.73160,   0.00000, 0.00000, 8.00000);
	CreateDynamicObject(1676, 1007.08624, -936.38605, 42.73160,   0.00000, 0.00000, 8.00000);
	CreateDynamicObject(1676, 1008.98840, -936.11877, 42.73160,   0.00000, 0.00000, 8.00000);


	// Ganton Enviroment
	CreateDynamicObject(910, 2294.26904, -1696.98547, 13.79510,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1264, 2298.83862, -1697.66650, 12.96397,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(3646, 2360.89063, -1712.30347, 14.65507,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1408, 2352.69092, -1716.60095, 13.10710,   0.00000, 0.00000, 270.00000);
	CreateDynamicObject(1408, 2352.70825, -1700.96558, 13.10710,   0.00000, 0.00000, 270.00000);
	CreateDynamicObject(1408, 2352.70825, -1706.18884, 13.10710,   0.00000, 0.00000, 270.00000);
	CreateDynamicObject(1408, 2352.70825, -1711.39490, 13.10710,   0.00000, 0.00000, 270.00000);
	CreateDynamicObject(1408, 2352.69092, -1718.62097, 13.10710,   0.00000, 0.00000, 270.00000);
	CreateDynamicObject(1408, 2355.24219, -1721.31885, 13.10710,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1408, 2365.38623, -1721.31885, 13.10710,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1408, 2358.02222, -1721.31885, 13.10710,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1408, 2370.60620, -1721.31885, 13.10710,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1408, 2371.80615, -1721.31885, 13.10710,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1408, 2374.55762, -1718.54065, 13.10710,   0.00000, 0.00000, 270.00000);


    CreateDynamicObject(1280, 2353.34546, -1503.91675, 23.40110,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1280, 2353.36182, -1507.98242, 23.40110,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(3093, 2354.22266, -1534.43359, 24.13870,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1885, 2354.63281, -1534.03052, 22.99874,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(3467, 2357.06299, -1532.56995, 23.58909,   0.00000, 0.00000, 15.48057);
	CreateDynamicObject(1300, 2352.17261, -1534.81860, 23.33220,   0.00000, 0.00000, 90.00000);


    CreateDynamicObject(1300, 2532.53418, -1493.39514, 23.39110,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1594, 2525.42822, -1495.36389, 23.43710,   0.00000, 0.00000, 0.00000);


    CreateDynamicObject(8378, -1655.98401, 688.23297, 8.69962,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19362, -1622.06189, 692.32849, 7.85466,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1533, -1622.18042, 693.01233, 6.27535,   0.00000, 0.00000, -90.00000);


	// Additionals to Idlegass
	CreateDynamicObject(1300, 1931.03918, -1786.19495, 12.90570,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1622, 1928.85242, -1787.93958, 16.58690,   0.00000, 0.00000, 15.69533);
	CreateDynamicObject(1810, 1929.02527, -1783.10864, 12.51910,   0.00000, 0.00000, 101.16698);
	CreateDynamicObject(1810, 1929.03882, -1782.01392, 12.51910,   0.00000, 0.00000, 85.00000);	


	// El corona Adds
	CreateDynamicObject(825, 1945.96350, -1966.00989, 13.07010,   0.00000, 0.00000, 323.62823);
	CreateDynamicObject(825, 1936.93298, -1968.77686, 13.07010,   0.00000, 0.00000, 323.62823);
	CreateDynamicObject(825, 1948.51001, -1966.90112, 13.07010,   0.00000, 0.00000, 318.59070);
	CreateDynamicObject(825, 1943.66748, -1966.49512, 13.07010,   0.00000, 0.00000, 323.62823);
	CreateDynamicObject(825, 1939.30884, -1966.70178, 13.07010,   0.00000, 0.00000, 323.62823);
	CreateDynamicObject(825, 1937.64832, -1966.56445, 13.07010,   0.00000, 0.00000, 323.62823);
	CreateDynamicObject(1291, 1951.28638, -1970.90967, 12.97969,   0.00000, 0.00000, 275.02029);
	CreateDynamicObject(1231, 1948.85693, -1971.42847, 14.99130,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1341, 1951.13782, -1980.17871, 13.56610,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(956, 1948.32471, -1982.32666, 12.90280,   0.00000, 0.00000, 180.12131);
	CreateDynamicObject(946, 1939.66992, -1982.09827, 14.70058,   0.00000, 0.00000, 1.15668);
	CreateDynamicObject(1946, 1940.31494, -1981.08997, 12.73010,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1280, 1946.29797, -1970.28699, 12.84810,   0.00000, 0.00000, 70.94720);
	CreateDynamicObject(1280, 1941.31677, -1970.40869, 12.84810,   0.00000, 0.00000, 116.27860);
	CreateDynamicObject(1280, 1943.80762, -1969.84827, 12.84813,   0.00000, 0.00000, 90.35728);	


	// Jefferson
 	CreateDynamicObject(19869, 2212.57202, -1313.46411, 23.36770,   0.00000, 0.00000, 270.00000);
	CreateDynamicObject(3594, 2196.60010, -1260.80005, 23.50000,   0.00000, 0.00000, 284.00000);
	CreateDynamicObject(969, 2203.73608, -1310.82104, 23.15150,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1338, 2204.95142, -1313.91858, 23.66000,   0.00000, 0.00000, 134.72501);
	CreateDynamicObject(19869, 2212.57202, -1318.74719, 23.36770,   0.00000, 0.00000, 270.00000);
	CreateDynamicObject(3038, 2199.91650, -1310.82190, 27.46000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1441, 2204.68359, -1315.98682, 23.63730,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1337, 2189.30005, -1261.80005, 23.60000,   0.00000, 0.00000, 173.99500);
	CreateDynamicObject(2900, 2204.97803, -1317.94263, 23.00000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19869, 2212.57202, -1324.03271, 23.36770,   0.00000, 0.00000, 270.00000);
	CreateDynamicObject(11102, 2204.18384, -1321.83398, 25.10000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(2971, 2205.27808, -1325.92322, 23.00000,   0.00000, 0.00000, 267.99500);
	CreateDynamicObject(19869, 2212.57202, -1329.31360, 23.36770,   0.00000, 0.00000, 270.00000);
	CreateDynamicObject(2900, 2205.29395, -1327.68823, 23.00000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1256, 2278.50757, -1253.42444, 23.64785,   0.00000, 0.00000, 270.02747);
	CreateDynamicObject(3038, 2182.53296, -1310.82190, 27.46000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19869, 2212.57202, -1334.59985, 23.36770,   0.00000, 0.00000, 270.00000);
	CreateDynamicObject(1256, 2278.55273, -1247.90210, 23.64812,   0.00000, 0.00000, 90.63171);
	CreateDynamicObject(1781, 2179.26489, -1310.57703, 22.98130,   0.00000, 0.00000, 158.42842);
	CreateDynamicObject(19869, 2212.56348, -1337.09399, 23.36770,   0.00000, 0.00000, 270.00000);
	CreateDynamicObject(1362, 2178.82373, -1310.39172, 23.58000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1617, 2204.19995, -1334.50000, 26.90000,   0.00000, 0.00000, 182.00000);
	CreateDynamicObject(2121, 2178.18579, -1310.51379, 23.48000,   0.00000, 0.00000, 203.71660);
	CreateDynamicObject(2714, 2177.61304, -1311.53809, 26.81153,   0.00000, 0.00000, 225.21078);
	CreateDynamicObject(969, 2209.09790, -1338.14478, 23.15150,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(3038, 2176.87036, -1316.99988, 27.46000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1345, 2194.38770, -1339.25305, 23.80000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19865, 2196.20361, -1340.55542, 22.95090,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1441, 2195.66748, -1341.18115, 23.63730,   0.00000, 0.00000, 267.23163);
	CreateDynamicObject(3038, 2196.18188, -1341.75476, 27.12000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(963, 2280.86597, -1232.61340, 24.02641,   90.74707, 0.00000, 270.59326);
	CreateDynamicObject(1766, 2190.27393, -1338.73071, 22.92000,   0.00000, 0.00000, 346.87119);
	CreateDynamicObject(18663, 2186.22998, -1338.14001, 24.52000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1481, 2186.71265, -1338.50757, 23.68000,   0.00000, 0.00000, 1.41512);
	CreateDynamicObject(918, 2186.05835, -1338.38184, 23.33260,   0.00000, 0.00000, 71.62250);
	CreateDynamicObject(3038, 2176.87036, -1333.78113, 27.46000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1432, 2183.72534, -1340.05066, 23.09560,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(4853, 2280.78711, -1223.35547, 25.72144,   0.00000, 1.49963, 269.45068);
	CreateDynamicObject(1337, 2188.50513, -1345.28528, 23.60000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(1766, 2187.64575, -1345.21143, 22.92000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(2121, 2176.55054, -1336.71826, 23.50000,   0.00000, 0.00000, 261.07126);
	CreateDynamicObject(2121, 2176.54126, -1337.68054, 23.50000,   0.00000, 0.00000, 274.00000);
	CreateDynamicObject(2677, 2184.31714, -1344.43872, 23.26000,   0.00000, 0.00000, 52.44646);
	CreateDynamicObject(1337, 2176.46558, -1338.39563, 23.62000,   0.00000, 0.00000, 269.10690);
	CreateDynamicObject(1440, 2177.78613, -1340.59961, 23.48700,   0.00000, 0.00000, 91.93256);
	CreateDynamicObject(1449, 2184.04102, -1345.52673, 23.50000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(19865, 2176.98975, -1340.55542, 22.95091,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(3038, 2178.26831, -1341.75476, 27.12000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1256, 2278.44141, -1216.63538, 23.61491,   0.00000, 0.00000, 270.02197);
	CreateDynamicObject(1256, 2278.69702, -1211.26172, 23.71554,   0.00000, 0.00000, 88.55750);
	CreateDynamicObject(18666, 2233.98999, -1367.98999, 24.50000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(18667, 2224.29004, -1193.07996, 26.23000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(18659, 2320.20996, -1272.22998, 28.66000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1216, 2225.09009, -1374.59998, 23.64990,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(18662, 2322.40991, -1254.27002, 22.50000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(18659, 2322.41992, -1243.95996, 23.02000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(1622, 2313.22607, -1336.69702, 28.78800,   0.00000, -24.30000, 68.69900);
	CreateDynamicObject(19966, 2313.33203, -1336.76001, 21.28700,   0.00000, 0.00000, -90.00000);
	CreateDynamicObject(1543, 2133.80005, -1311.00000, 24.50000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(3044, 2133.80005, -1311.09998, 24.60000,   0.00000, 0.00000, 208.00000);


	//OTHER_Hometown_Santa_Maria_Beach
	CreateDynamicObject(1372, 936.72961, -1819.51123, 11.80293,   0.00000, 0.00000, 71.58000);
	CreateDynamicObject(1440, 937.74048, -1816.95300, 12.23359,   0.00000, 0.00000, 102.77998);
	CreateDynamicObject(1450, 936.78278, -1817.81030, 12.39909,   0.00000, 0.00000, 88.62002);
	CreateDynamicObject(1372, 948.15527, -1809.89636, 12.69249,   0.00000, 0.00000, -96.24004);
	CreateDynamicObject(1372, 947.91827, -1811.86780, 12.61292,   0.48000, 5.28000, -96.24004);
	CreateDynamicObject(19865, 946.83966, -1809.13025, 12.60081,   4.86000, 2.52000, -10.92000);
	CreateDynamicObject(19865, 949.74017, -1807.70215, 12.72060,   0.00000, 0.00000, -105.29999);
	CreateDynamicObject(19865, 948.74634, -1813.06116, 12.36353,   0.00000, 0.00000, -96.71996);
	CreateDynamicObject(1728, 938.13153, -1808.17700, 12.80432,   0.00000, 0.00000, 93.66001);
	CreateDynamicObject(1594, 929.11517, -1803.37585, 13.21722,   0.00000, 0.00000, -12.54000);
	SetDynamicObjectMaterial(CreateDynamicObject(2121, 937.11810, -1805.47974, 13.32538,   0.00000, 0.00000, 176.51991), 0, 10789, "xenon_sfse", "bluemetal02", 0xFFFFFFFF);
	SetDynamicObjectMaterial(CreateDynamicObject(2121, 936.42676, -1805.43701, 13.32538,   0.00000, 0.00000, 176.51991), 0, 10789, "xenon_sfse", "bluemetal02", 0xFFFFFFFF);


	// Pershing Build
	CreateDynamicObject(10049, 1401.02600, -1649.05200, 27.52400,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(11245, 1422.55896, -1654.46204, 22.44900,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(11245, 1422.55896, -1657.11206, 22.44900,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(11245, 1422.55896, -1643.14197, 22.44900,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(11245, 1422.55896, -1640.09595, 22.44900,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(3628, 1412.52405, -1697.12402, 8.56300,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(3628, 1398.47205, -1697.12402, 8.56300,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1566, 1421.46240, -1650.17285, 15.04660,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1566, 1421.46240, -1647.19287, 15.04660,   0.00000, 0.00000, -90.00000);
	SetDynamicObjectMaterial(CreateDynamicObject(18783, 1414.579956, -1648.508057, 10.057000, 0.000000, 0.000000, 0.000000), 1, 9515, "bigboxtemp1", "poshground_sfw");


	new ammunation;
	ammunation = CreateObject(19545, 1409.520507, -1334.206665, 12.570699, 0.000000, 0.000000, 0.000000, 300.00);
	SetObjectMaterial(ammunation, 0, 4551, "sunset1_lan2", "Bow_road_nomark_b", 0x00000000);
	ammunation = CreateObject(19545, 1409.453125, -1353.458984, 12.559800, 0.000000, 0.000000, 0.300000, 300.00);
	SetObjectMaterial(ammunation, 0, 4551, "sunset1_lan2", "Bow_road_nomark_b", 0x00000000);
	ammunation = CreateObject(11714, 1426.351318, -1311.028930, 13.793100, 0.000000, 0.000000, 0.000000, 300.00);
	SetObjectMaterial(ammunation, 0, 17537, "eastls4_lae2", "compdoor6_LAe", 0x00000000);
	ammunation = CreateObject(11714, 1426.355712, -1308.028564, 13.793100, 0.000000, 0.000000, 0.000000, 300.00);
	SetObjectMaterial(ammunation, 0, 17537, "eastls4_lae2", "compdoor6_LAe", 0x00000000);
	ammunation = CreateObject(11714, 1426.355712, -1305.028564, 13.793100, 0.000000, 0.000000, 0.000000, 300.00);
	SetObjectMaterial(ammunation, 0, 17537, "eastls4_lae2", "compdoor6_LAe", 0x00000000);
	ammunation = CreateObject(11714, 1421.615600, -1281.775268, 13.821000, 0.000000, 0.000000, 0.000000, 300.00);
	SetObjectMaterial(ammunation, 0, 17537, "eastls4_lae2", "compdoor6_LAe", 0x00000000);
	ammunation = CreateObject(19464, 1441.782714, -1334.932495, 14.430998, 0.000000, 0.000000, 90.000000, 300.00);
	SetObjectMaterial(ammunation, 0, 10430, "hashblock1z_sfs", "ws_ed_shop13_door", 0x00000000);
	ammunation = CreateObject(18244, 1441.993408, -1334.812133, 18.484899, 90.000000, 0.000000, 0.000000, 300.00);
	SetObjectMaterial(ammunation, 0, 5134, "wasteland_las2", "ja_sgcombo3", 0x00000000);
	ammunation = CreateObject(18244, 1436.493408, -1334.812133, 18.484899, 90.000000, 0.000000, 0.000000, 300.00);
	SetObjectMaterial(ammunation, 0, 10429, "hashblock1_sfs", "ws_streak_billbd", 0x00000000);
	ammunation = CreateObject(11714, 1431.816162, -1334.842407, 13.802800, 0.000000, 0.000000, 90.000000, 300.00);
	SetObjectMaterial(ammunation, 0, 18265, "w_town3cs_t", "inddoor5", 0x00000000);
	ammunation = CreateObject(19464, 1416.291748, -1308.631835, 12.420989, 0.000000, 0.000000, 180.000000, 300.00);
	SetObjectMaterial(ammunation, 0, 14801, "lee_bdupsmain", "Bdup_graf1", 0x00000000);
	ammunation = CreateObject(11714, 1424.414672, -1357.727050, 13.801959, 0.000000, 0.000000, 90.000000, 300.00);
	SetObjectMaterial(ammunation, 0, 18200, "w_town2cs_t", "Bow_door_graffiti_128", 0x00000000);
	ammunation = CreateObject(11714, 1424.214843, -1290.361816, 13.789178, 0.000000, 0.000000, 90.000000, 300.00);
	SetObjectMaterial(ammunation, 0, 18246, "cw_junkyard2cs_t", "Was_scrpyd_door_dbl_grey", 0x00000000);
	ammunation = CreateObject(1553, 1399.615234, -1451.598876, 9.519200, 0.000000, 0.000000, 0.000000, 300.00);
	SetObjectMaterial(ammunation, 0, 14842, "genintintpolicea", "copcell_bars", 0x00000000);
	ammunation = CreateObject(19447, 1404.088867, -1451.067016, 11.084340, 0.000000, 0.000000, 89.879997, 300.00);
	SetObjectMaterial(ammunation, 0, 4551, "sunset1_lan2", "Bow_road_nomark_b", 0x00000000);
	ammunation = CreateObject(19447, 1399.570068, -1451.050415, 11.084340, 0.000000, 0.000000, 89.879997, 300.00);
	SetObjectMaterial(ammunation, 0, 4551, "sunset1_lan2", "Bow_road_nomark_b", 0x00000000);
	ammunation = CreateObject(19447, 1399.570068, -1451.050415, 7.587728, 0.000000, 0.000000, 89.879997, 300.00);
	SetObjectMaterial(ammunation, 0, 4551, "sunset1_lan2", "Bow_road_nomark_b", 0x00000000);
	ammunation = CreateObject(19447, 1408.805053, -1451.070922, 7.587698, 0.000000, 0.000000, 89.879997, 300.00);
	SetObjectMaterial(ammunation, 0, 4551, "sunset1_lan2", "Bow_road_nomark_b", 0x00000000);
	ammunation = CreateObject(1553, 1404.080322, -1451.605590, 9.519200, 0.000000, 0.000000, 0.000000, 300.00);
	SetObjectMaterial(ammunation, 0, 14842, "genintintpolicea", "copcell_bars", 0x00000000);
	ammunation = CreateObject(19464, 1429.312377, -1322.711669, 15.100996, 0.000000, 0.000000, 90.000000, 300.00);
	SetObjectMaterial(ammunation, 0, 14801, "lee_bdupsmain", "Bdup_graf1", 0x00000000);
	ammunation = CreateObject(18239, 1409.935424, -1307.791503, 12.549598, 0.000000, 0.000000, 90.000000, 300.00);
	ammunation = CreateObject(1319, 1421.519165, -1255.032470, 13.090490, 0.000000, 0.000000, 0.000000, 300.00);
	ammunation = CreateObject(17951, 1421.658691, -1258.353149, 14.312500, 0.000000, 0.000000, -0.540000, 300.00);
	ammunation = CreateObject(1319, 1421.448120, -1261.540893, 13.090490, 0.000000, 0.000000, 0.000000, 300.00);
	ammunation = CreateObject(1343, 1421.031860, -1284.494506, 13.257200, 0.000000, 0.000000, 90.000000, 300.00);
	ammunation = CreateObject(1343, 1421.028564, -1285.516479, 13.257200, 0.000000, 0.000000, 90.000000, 300.00);
	ammunation = CreateObject(1343, 1428.473876, -1334.281982, 13.310000, 0.000000, 0.000000, 180.000000, 300.00);
	ammunation = CreateObject(1265, 1429.288574, -1334.359375, 12.967728, 0.000000, 0.000000, 0.000000, 300.00);
	ammunation = CreateObject(1294, 1426.035888, -1333.765136, 17.036579, 0.000000, 0.000000, -42.119998, 300.00);
	ammunation = CreateObject(17951, 1427.209350, -1340.825317, 14.302688, 0.000000, 0.000000, -0.239998, 300.00);
	ammunation = CreateObject(17951, 1427.218872, -1350.439453, 14.302700, 0.000000, 0.000000, -0.239998, 300.00);
	ammunation = CreateObject(1265, 1426.522338, -1335.194580, 12.967728, 0.000000, 0.000000, 0.000000, 300.00);
	ammunation = CreateObject(1319, 1426.957885, -1337.607543, 13.112360, 0.000000, 0.000000, 0.000000, 300.00);
	ammunation = CreateObject(1319, 1426.952880, -1344.044555, 13.112400, 0.000000, 0.000000, 0.000000, 300.00);
	ammunation = CreateObject(1319, 1426.915893, -1347.190185, 13.112400, 0.000000, 0.000000, 0.000000, 300.00);
	ammunation = CreateObject(1319, 1426.980102, -1353.692626, 13.112360, 0.000000, 0.000000, 0.000000, 300.00);
	ammunation = CreateObject(1432, 1405.593627, -1314.581176, 12.677490, 0.000000, 0.000000, 0.000000, 300.00);
	ammunation = CreateObject(1432, 1410.724243, -1314.767700, 12.677490, 0.000000, 0.000000, 0.000000, 300.00);
	ammunation = CreateObject(2599, 1414.840942, -1312.803833, 12.988100, 0.000000, 0.000000, -0.180000, 300.00);
	ammunation = CreateObject(10183, 1407.082153, -1349.902465, 12.615200, 0.000000, 0.000000, 135.419998, 300.00);
	ammunation = CreateObject(933, 1418.555786, -1354.998901, 12.553318, 0.000000, 0.000000, 0.000000, 300.00);
	ammunation = CreateObject(1349, 1420.123779, -1355.150512, 13.083160, 0.000000, 0.000000, -72.000007, 300.00);
	ammunation = CreateObject(1810, 1421.861450, -1355.054687, 12.535920, 0.000000, 0.000000, -145.079940, 300.00);
	ammunation = CreateObject(1810, 1421.059448, -1354.495117, 12.535920, 0.000000, 0.000000, -242.879882, 300.00);
	ammunation = CreateObject(1510, 1421.567016, -1354.575805, 12.574080, 0.000000, 0.000000, 0.000000, 300.00);
	ammunation = CreateObject(2674, 1421.428588, -1354.276489, 12.587180, 0.000000, 0.000000, 36.840011, 300.00);
	ammunation = CreateObject(1440, 1426.432617, -1356.088378, 13.019108, 0.000000, 0.000000, -89.640007, 300.00);
	ammunation = CreateObject(2949, 1425.387695, -1357.682128, 12.561698, 0.000000, 0.000000, -90.000000, 300.00);
	ammunation = CreateObject(19859, 1416.962890, -1360.483520, 13.825010, 0.000000, 0.000000, 90.000000, 300.00);
	ammunation = CreateObject(5856, 1403.307128, -1328.046997, 14.557298, 0.000000, 0.000000, 0.000000, 300.00);
	ammunation = CreateObject(5856, 1403.303100, -1323.847045, 14.557298, 0.000000, 0.000000, 0.000000, 300.00);
	ammunation = CreateObject(1294, 1404.904174, -1320.563598, 17.056259, 0.000000, 0.000000, 180.000000, 300.00);
	ammunation = CreateObject(2714, 1439.603881, -1334.777221, 16.399700, 0.000000, 0.000000, 180.000000, 300.00);
	ammunation = CreateObject(3502, 1399.692626, -1447.649169, 9.608738, 0.000000, 0.000000, -0.779999, 300.00);
	ammunation = CreateObject(3502, 1404.140747, -1447.643188, 9.577580, 0.000000, 0.000000, -0.779999, 300.00);

	//idle
	CreateDynamicObject(1209, 2092.24243, -1904.14575, 12.55640,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(1280, 2094.58423, -1904.02869, 12.94400,   0.00000, 0.00000, -90.00000);
	CreateDynamicObject(1334, 2171.39258, -1729.10181, 13.54093,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1334, 2168.60449, -1729.10181, 13.54090,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1440, 2165.95117, -1729.23926, 13.04150,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(1372, 2125.66260, -1726.87415, 12.62550,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(1299, 2125.33740, -1724.19202, 12.96999,   0.00000, 0.00000, 350.45279);
	CreateDynamicObject(3496, 2147.43481, -1729.78467, 12.52910,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(2114, 2148.43652, -1728.02258, 12.66380,   0.00000, 0.00000, 0.00000);
	//Idlegas
	CreateDynamicObject(1533, 1918.12, -1786.44, 12.53, 0.00, 0.00, 180.00);
	CreateDynamicObject(1533, 1919.60, -1786.44, 12.53, 0.00, 0.00, 180.00);
	//litlle mexico
	CreateDynamicObject(982, 2071.64160, -1909.46887, 13.25110,   0.00000, 0.00000, 0.10000);
	CreateDynamicObject(983, 2068.46436, -1922.27966, 13.23540,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(983, 2048.26880, -1922.25891, 13.23540,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1258, 2091.20483, -1920.91113, 13.18860,   0.00000, 0.00000, 270.00000);
	CreateDynamicObject(1257, 2078.95190, -1938.62561, 13.65570,   0.00000, 0.00000, -90.00000);
	CreateDynamicObject(1257, 1827.86279, -1640.19556, 13.85190,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(4100, 1811.58826, -1901.23364, 14.16069,   0.00000, 0.00000, 49.84046);
	CreateDynamicObject(4100, 1810.38257, -1879.51709, 14.16069,   0.00000, 0.00000, 50.04146);
	CreateDynamicObject(1257, 1827.93604, -1821.60217, 13.98674,   0.00000, 0.00000, 0.00000);
	//Ganton env
	CreateDynamicObject(1440, 2278.80005, -1722.31995, 13.06000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(349, 0.00000, 0.00000, -0.55001,   90.00000, 0.00000, 137.00000);
	CreateDynamicObject(1216, 2301.65991, -1649.23999, 14.35000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1280, 2267.89990, -1742.40002, 12.90000,   0.00000, 0.00000, 269.98999);
	CreateDynamicObject(1280, 2267.89990, -1743.09998, 12.90000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1280, 2277.00000, -1742.30005, 12.90000,   0.00000, 0.00000, 269.98999);
	CreateDynamicObject(1280, 2277.00000, -1742.92004, 12.90000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1229, 2275.73999, -1747.10999, 14.10000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1216, 2019.59998, -1602.59998, 13.20000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1280, 2285.78003, -1742.19995, 12.90000,   0.00000, 0.00000, 269.98999);
	CreateDynamicObject(1280, 2285.80005, -1742.90002, 12.90000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19456, 2016.58533, -1592.70996, 16.24080,   0.00000, 90.00000, 45.00000);
	CreateDynamicObject(2921, 2294.58496, -1552.00940, 31.43299,   0.00000, 0.00000, 187.49986);
	CreateDynamicObject(19393, 2037.42004, -1762.47998, 14.28000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19456, 2005.68787, -1592.69153, 16.24080,   0.00000, 90.00000, 45.00000);
	CreateDynamicObject(19857, 2036.65002, -1762.55005, 13.76000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19456, 1996.50391, -1592.35352, 16.24080,   0.00000, 90.00000, 45.00000);
	CreateDynamicObject(19456, 1992.79663, -1588.79993, 16.24080,   0.00000, 90.00000, 45.00000);
	CreateDynamicObject(1216, 2014.09998, -1762.00000, 13.20000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(19456, 1977.65967, -1617.18188, 19.38850,   0.00000, 90.00000, 90.00000);
	CreateDynamicObject(19456, 1968.29980, -1617.18188, 19.38850,   0.00000, 90.00000, 90.00000);
	CreateDynamicObject(19456, 1966.87976, -1617.18188, 19.38850,   0.00000, 90.00000, 90.00000);
	CreateDynamicObject(1810, 1965.09998, -1635.90002, 15.00000,   0.00000, 0.00000, 290.00000);
	CreateDynamicObject(1810, 1964.19995, -1635.30005, 15.00000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1264, 1973.59998, -1725.40002, 15.40000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1347, 1972.80005, -1725.30005, 15.50000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(928, 1971.90002, -1725.00000, 15.20000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(926, 1972.00000, -1725.80005, 15.20000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19456, 1966.13794, -1587.58154, 16.21220,   0.00000, 90.00000, 45.00000);
	CreateDynamicObject(1216, 2123.56006, -1443.38000, 23.61750,   0.00000, 0.00000, 90.36000);
	CreateDynamicObject(4227, 1951.71997, -1650.96997, 13.53000,   0.00000, 0.00000, 269.82999);
	CreateDynamicObject(1297, 1950.43994, -1654.46997, 15.93000,   0.00000, 0.00000, -360.00000);
	CreateDynamicObject(17969, 1951.63000, -1633.20996, 13.72000,   -28.00000, 0.00000, -0.12000);
	CreateDynamicObject(1297, 1950.48999, -1625.76001, 15.93000,   0.00000, 0.00000, 36.00000);
	CreateDynamicObject(1297, 1950.33997, -1678.47998, 15.93000,   0.00000, 0.00000, -360.00000);
	CreateDynamicObject(19456, 1957.71741, -1590.76697, 16.21220,   0.00000, 90.00000, 45.00000);
	CreateDynamicObject(1257, 1971.37708, -1745.80273, 13.54688,   0.00000, 0.00000, 90.27740);
	CreateDynamicObject(19456, 1966.66699, -1558.78931, 16.19210,   0.00000, 90.00000, 45.00000);
	CreateDynamicObject(1297, 1950.56995, -1703.02002, 15.93000,   0.00000, 0.00000, -360.00000);
	CreateDynamicObject(19456, 1951.70154, -1584.74146, 16.21220,   0.00000, 90.00000, 45.00000);
	CreateDynamicObject(17969, 1951.62000, -1717.70996, 13.60000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19456, 1949.70874, -1582.57214, 16.21220,   0.00000, 90.00000, 45.00000);
	CreateDynamicObject(1297, 1950.18994, -1729.72998, 15.93000,   0.00000, 0.00000, -360.00000);
	CreateDynamicObject(2921, 1952.13232, -1742.48938, 20.20822,   0.00000, 0.00000, 94.32004);
	CreateDynamicObject(3934, 2078.84839, -1430.34839, 47.37950,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1412, 2286.49146, -1459.51611, 23.38645,   0.00000, -1.00000, 79.00000);
	CreateDynamicObject(1481, 1949.80005, -1573.90002, 13.30000,   0.00000, 0.00000, 230.00000);
	CreateDynamicObject(1566, 1948.19995, -1576.80005, 14.10000,   0.00000, 0.00000, 225.00000);
	CreateDynamicObject(19456, 1952.77673, -1558.76611, 16.19210,   0.00000, 90.00000, 45.00000);
	CreateDynamicObject(1297, 1932.78003, -1659.73999, 15.93000,   0.00000, 0.00000, 176.00000);
	CreateDynamicObject(1297, 1932.59998, -1641.09998, 15.93000,   0.00000, 0.00000, 176.00000);
	CreateDynamicObject(1308, 1952.15710, -1742.48218, 12.46009,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1297, 1932.44995, -1623.90002, 15.93000,   0.00000, 0.00000, 130.00000);
	CreateDynamicObject(1412, 2287.41968, -1454.36218, 23.50820,   0.00000, -0.50000, 79.00000);
	CreateDynamicObject(1297, 1932.69995, -1703.35999, 15.93000,   0.00000, 0.00000, 176.00000);
	CreateDynamicObject(3934, 2058.14551, -1430.34839, 47.37950,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1344, 1946.19995, -1560.59998, 13.40000,   0.00000, 0.00000, 45.00000);
	CreateDynamicObject(1810, 1943.40002, -1565.19995, 12.60000,   0.00000, 0.00000, 300.00000);
	CreateDynamicObject(1415, 1944.50000, -1562.10999, 12.73000,   0.00000, 0.00000, 45.00000);
	CreateDynamicObject(1412, 2288.32739, -1449.19202, 23.62165,   0.00000, -1.00000, 79.00000);
	CreateDynamicObject(1810, 1942.50000, -1564.59998, 12.60000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(3496, 1931.64001, -1587.28003, 12.19000,   0.00000, 0.00000, 270.00000);
	CreateDynamicObject(1297, 1932.62000, -1727.09998, 15.93000,   0.00000, 0.00000, 176.00000);
	CreateDynamicObject(19456, 1939.43066, -1559.20496, 16.19210,   0.00000, 90.00000, 45.00000);
	CreateDynamicObject(5066, 2096.13770, -1883.88989, 14.13838,   0.00000, 0.00000, 270.00000);
	CreateDynamicObject(1412, 2289.18945, -1444.08447, 23.70047,   0.00000, -1.00000, 82.00000);
	CreateDynamicObject(3934, 2078.84839, -1412.01587, 47.37950,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19456, 1936.57019, -1556.22595, 16.19210,   0.00000, 90.00000, 45.00000);
	CreateDynamicObject(1412, 2289.86377, -1438.88745, 23.78616,   0.00000, 0.00000, 82.00000);
	CreateDynamicObject(1412, 2290.46997, -1433.58105, 23.78620,   0.00000, 0.00000, 83.90000);
	CreateDynamicObject(1216, 2012.50000, -1451.40002, 13.20000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(984, 2049.16016, -1414.47632, 47.97120,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(18757, 2051.00928, -1405.71753, 49.26920,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(18756, 2051.00928, -1405.62842, 49.26920,   0.00000, 0.00000, 2.22000);
	CreateDynamicObject(984, 2055.65088, -1403.31641, 47.97120,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1216, 2399.19995, -1759.19995, 13.20000,   0.00000, 0.00000, 179.99500);
	CreateDynamicObject(1616, 2043.83923, -1408.27307, 22.01395,   0.00000, 0.00000, 77.94003);
	CreateDynamicObject(1412, 2332.19922, -1437.89636, 24.23530,   0.00000, 0.00000, -90.50000);
	CreateDynamicObject(1216, 2432.60010, -1669.40002, 13.20000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(2921, 1928.72302, -1508.36572, 11.97262,   0.00000, 0.00000, -152.57997);
	CreateDynamicObject(2451, 2296.40576, -1409.75610, 23.22690,   0.00000, 0.00000, 226.28000);
	CreateDynamicObject(1571, 2295.89917, -1408.98474, 24.29500,   0.00000, 0.00000, 135.00000);
	CreateDynamicObject(1412, 2332.22656, -1432.68347, 24.23530,   0.00000, 0.00000, -90.50000);
	CreateDynamicObject(2418, 2295.48584, -1407.99426, 23.20526,   0.00000, 0.00000, -45.31000);
	CreateDynamicObject(2684, 2294.19287, -1404.85608, 24.33080,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(3861, 2300.99731, -1408.42053, 24.09137,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(2355, 2295.78955, -1405.38232, 23.63640,   -25.00000, 23.50000, -13.50000);
	CreateDynamicObject(1271, 2299.77539, -1407.54272, 23.35255,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(2355, 2296.31616, -1405.33130, 23.63640,   -25.00000, 23.50000, -13.50000);
	CreateDynamicObject(2353, 2295.80566, -1404.79956, 23.63640,   -25.00000, 23.50000, -13.50000);
	CreateDynamicObject(1271, 2301.10034, -1407.62427, 23.35260,   0.00000, 0.00000, 40.00000);
	CreateDynamicObject(2353, 2296.35034, -1404.72778, 23.63640,   -25.00000, 23.50000, -13.50000);
	CreateDynamicObject(3041, 2301.39063, -1407.79358, 22.83443,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(3862, 2295.51050, -1403.99133, 23.94670,   0.00000, 0.00000, 91.00000);
	CreateDynamicObject(1412, 2332.30518, -1427.52258, 24.23530,   0.00000, 0.00000, -90.50000);
	CreateDynamicObject(2354, 2295.76660, -1404.07849, 23.64040,   -25.23200, 23.50400, -13.50000);
	CreateDynamicObject(3861, 2304.03931, -1408.42334, 24.08504,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(1271, 2302.28638, -1407.50122, 23.35255,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(2354, 2296.32715, -1404.06433, 23.64040,   -25.23200, 23.50400, -13.50000);
	CreateDynamicObject(1271, 2303.21924, -1407.47437, 23.35255,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(3041, 2303.78809, -1407.79980, 22.83976,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(2369, 2295.80542, -1402.86621, 23.59090,   0.00000, 0.00000, 105.00000);
	CreateDynamicObject(1271, 2304.35205, -1407.63037, 23.35260,   0.00000, 0.00000, 40.00000);
	CreateDynamicObject(1271, 2305.18970, -1407.53601, 23.35255,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1216, 2225.09009, -1374.59998, 23.64990,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1412, 2332.32520, -1422.26221, 24.23530,   0.00000, 0.00000, -90.50000);
	// PEMT
	CreateDynamicObject(926, 2403.78711, -1742.29004, 12.74817,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(2676, 2402.98730, -1741.62500, 12.64920,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(737, 2392.70532, -1742.25745, 12.80868,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(737, 2375.94531, -1742.25745, 12.80870,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(737, 2359.62524, -1742.25745, 12.80870,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(737, 2341.60522, -1742.25745, 12.80870,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(737, 2324.26514, -1742.25745, 12.80870,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(737, 2301.14502, -1742.25745, 12.80870,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(737, 2285.50488, -1742.25745, 12.80870,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(737, 2274.28491, -1742.25745, 12.80870,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(737, 2253.88501, -1742.25745, 12.80870,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(737, 2242.32495, -1742.25745, 12.80870,   0.00000, 0.00000, 0.00000);

	// Crenshaw
	CreateDynamicObject(3698, 2257.87964, -1401.32544, 25.69610,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(3698, 2230.05664, -1401.37366, 25.69610,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(3698, 2245.56421, -1459.87854, 25.69610,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(3698, 2243.94580, -1401.37573, 25.69610,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(3698, 2231.63232, -1459.87854, 25.69610,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(3698, 2259.33423, -1459.87854, 20.19850,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(3698, 2259.33423, -1459.87854, 25.69610,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1300, 2265.59692, -1432.00989, 23.33490,   0.00000, 0.00000, 85.27310);
	CreateDynamicObject(2673, 2264.79077, -1432.13892, 23.06386,   0.00000, 0.00000, 39.76684);
	CreateDynamicObject(1810, 2261.21997, -1432.38245, 22.90789,   0.00000, 0.00000, 85.78418);
	CreateDynamicObject(1810, 2261.74194, -1432.76440, 22.90789,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1810, 2260.83521, -1433.91858, 22.90789,   0.00000, 0.00000, 87.51777);
	CreateDynamicObject(1810, 2261.17358, -1431.59985, 22.90789,   0.00000, 0.00000, 94.36072);
	CreateDynamicObject(1810, 2261.12549, -1433.15857, 22.90789,   0.00000, 0.00000, 61.61275);
	CreateDynamicObject(1432, 2257.36353, -1438.58350, 23.12265,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19831, 2254.61646, -1438.48914, 23.12758,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1368, 2271.82935, -1415.45081, 23.67990,   0.00000, 0.00000, 315.59985);
	CreateDynamicObject(1810, 2230.87598, -1420.19226, 22.93567,   0.00000, 0.00000, 182.07939);
	CreateDynamicObject(1810, 2232.04932, -1420.25732, 22.93567,   0.00000, 0.00000, 177.55682);
	CreateDynamicObject(1368, 2246.05566, -1448.35620, 23.67990,   0.00000, 0.00000, 0.00000);
 	CreateDynamicObject(969, 724.36298, -462.56641, 15.16004,   0.00000, 0.00000, 180.00310);
	CreateDynamicObject(986, -99.91810, 1111.38196, 19.33300,   0.00000, 0.00000, 179.69701);
	CreateDynamicObject(986, -1904.81140, 277.63712, 41.57650,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(986, -1936.14587, 238.50670, 34.84240,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(980, -2715.96606, 217.70807, 4.66310,   0.00000, 0.00000, -90.00000);

		// Idlewood final
	new idlefinal;
	idlefinal = CreateDynamicObject(11714, 1762.949829, -1808.777832, 13.729100, 0.000000, 0.000000, 89.055603, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterial(idlefinal, 0, 18265, "w_town3cs_t", "inddoor5", 0x00000000);
	idlefinal = CreateDynamicObject(11714, 1797.753540, -1808.893676, 13.729100, 0.000000, 0.000000, 89.664596, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterial(idlefinal, 0, 18265, "w_town3cs_t", "inddoor5", 0x00000000);
	idlefinal = CreateDynamicObject(11714, 1745.748901, -1752.101196, 13.700380, 0.000000, 0.000000, 0.102008, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterial(idlefinal, 0, 18265, "w_town3cs_t", "inddoor5", 0x00000000);
	idlefinal = CreateDynamicObject(5628, 1802.821899, -1753.754760, 16.242752, 0.000000, 0.000000, 0.100020, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterial(idlefinal, 1, 19480, "signsurf", "sign", 0x00000000);
	SetDynamicObjectMaterial(idlefinal, 6, 19480, "signsurf", "sign", 0x00000000);
	SetDynamicObjectMaterial(idlefinal, 7, 19480, "signsurf", "sign", 0x00000000);
	SetDynamicObjectMaterial(idlefinal, 8, 19480, "signsurf", "sign", 0x00000000);
	idlefinal = CreateDynamicObject(5267, 1766.593383, -1764.103881, 18.291700, 0.000000, 0.000000, 180.102005, -1, -1, -1, 300.00, 300.00);
	idlefinal = CreateDynamicObject(5267, 1790.889038, -1761.143676, 18.281700, 0.000000, 0.000000, 360.000000, -1, -1, -1, 300.00, 300.00);
	idlefinal = CreateDynamicObject(5267, 1790.873046, -1786.980102, 18.285699, 0.000000, 0.000000, 360.000000, -1, -1, -1, 300.00, 300.00);
	idlefinal = CreateDynamicObject(5267, 1766.381347, -1789.769653, 18.285699, 0.000000, 0.000000, 179.158294, -1, -1, -1, 300.00, 300.00);
	idlefinal = CreateDynamicObject(1280, 1782.828125, -1816.049316, 12.954998, 0.000000, 0.000000, 0.000000, -1, -1, -1, 300.00, 300.00);
	idlefinal = CreateDynamicObject(1344, 1744.879516, -1791.077026, 13.303600, 0.000000, 0.000000, -92.851737, -1, -1, -1, 300.00, 300.00);
	idlefinal = CreateDynamicObject(1344, 1745.043945, -1772.850708, 13.303600, 0.000000, 0.000000, -90.770614, -1, -1, -1, 300.00, 300.00);

	// Idlewood Additional Enviroment 27112020
	CreateDynamicObject(3468, 1935.287353, -1761.600708, 13.142807, 0.000000, 0.000000, -45.999992, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(996, 1940.822143, -1772.396850, 13.112814, 0.000000, 0.000000, 89.700057, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(996, 1940.779296, -1780.616699, 13.122812, 0.000000, 0.000000, 89.700057, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(996, 1942.463012, -1772.405639, 13.112814, 0.000000, 0.000000, 89.700057, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(996, 1942.448852, -1780.625732, 13.122812, 0.000000, 0.000000, 89.700057, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(1372, 1942.219360, -1796.608032, 12.662800, 0.000000, 0.000000, -179.300018, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(1280, 1944.377441, -1795.544067, 12.892817, 0.000000, 0.000000, -90.600013, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(1280, 2011.629028, -1761.954467, 12.932810, 0.000000, 0.000000, -89.800041, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(1256, 2175.957031, -1764.286865, 13.176876, 0.000000, 0.000000, -128.999954, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(1359, 2174.453369, -1762.922973, 13.216864, 0.000000, 0.000000, 26.100000, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(1710, 2038.687133, -1823.148315, 12.546875, 0.000000, 0.000000, -44.799976, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(1438, 2040.520019, -1832.208984, 12.546875, 0.000000, 0.000000, -93.200004, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(1338, 2040.968750, -1834.553222, 13.226867, 0.000000, 0.000000, 89.700019, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(1450, 2041.198364, -1836.475585, 13.126866, 0.000000, 0.000000, -86.300041, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(2676, 2033.155273, -1828.252075, 12.656875, 0.000000, 0.000000, 0.000000, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(2671, 2032.607421, -1831.229370, 12.553211, 0.000000, 0.000000, 0.000000, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(2674, 2032.839111, -1833.523803, 12.583209, 0.000000, 0.000000, 0.000000, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(2676, 2030.222900, -1833.962524, 12.653206, 0.000000, 0.000000, -17.999996, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(2673, 2033.561645, -1835.882812, 12.646877, 0.000000, 0.000000, 0.000000, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(1358, 2019.273071, -1823.456054, 13.733198, 0.000000, 0.000000, 0.000000, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(12957, 2026.520385, -1828.375000, 13.193212, 0.000000, 0.000000, -21.200004, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(2670, 2017.575439, -1831.696166, 12.643203, 0.000000, 0.000000, 0.000000, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(996, 2099.671386, -1776.861450, 13.112814, 0.000000, 0.000000, 81.700050, -1, -1, -1, 300.00, 300.00);
	CreateDynamicObject(996, 2098.316406, -1784.905151, 13.112814, 0.000000, 0.000000, 80.300056, -1, -1, -1, 300.00, 300.00);


	// VinewWood Police Station
	new vinewood;
	vinewood = CreateDynamicObject(4018, 1304.235717, -1121.199340, 22.706274, 0.119998, 0.000000, 0.299998, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterial(vinewood, 4, 19480, "signsurf", "sign", 0x00000000);
	vinewood = CreateDynamicObject(19466, 1309.967651, -1125.334350, 36.196220, 0.000000, 0.000000, 89.999977, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}2526", 20, "Engravers MT", 30, 0, 0x00000000, 0x00000000, 1);
	vinewood = CreateDynamicObject(19466, 1284.295532, -1125.442993, 30.186231, 0.000000, 0.000000, 90.299972, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}LOS", 20, "Ariel", 25, 0, 0x00000000, 0x00000000, 1);
	vinewood = CreateDynamicObject(19466, 1286.269042, -1125.431640, 30.186231, 0.000000, 0.000000, 89.999977, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}SAN", 20, "Ariel", 25, 0, 0x00000000, 0x00000000, 1);
	vinewood = CreateDynamicObject(19466, 1287.877563, -1125.423706, 30.186231, 0.000000, 0.000000, 90.399971, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}TOS", 20, "Ariel", 25, 0, 0x00000000, 0x00000000, 1);
	vinewood = CreateDynamicObject(19466, 1289.787719, -1125.412841, 30.186231, 0.000000, 0.000000, 89.999977, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}POL", 20, "Ariel", 25, 0, 0x00000000, 0x00000000, 1);
	vinewood = CreateDynamicObject(19466, 1291.248779, -1125.403442, 30.186231, 0.000000, 0.000000, 89.999977, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}ICE", 20, "Ariel", 25, 0, 0x00000000, 0x00000000, 1);
	vinewood = CreateDynamicObject(19466, 1293.129150, -1125.393554, 30.186231, 0.000000, 0.000000, 89.999977, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}DEP", 20, "Ariel", 25, 0, 0x00000000, 0x00000000, 1);
	vinewood = CreateDynamicObject(19466, 1294.710937, -1125.393798, 30.186231, 0.000000, 0.000000, 89.999977, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}ART", 20, "Ariel", 25, 0, 0x00000000, 0x00000000, 1);
	vinewood = CreateDynamicObject(19466, 1296.361450, -1125.373901, 30.186231, 0.000000, 0.000000, 90.299972, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}MEN", 20, "Ariel", 25, 0, 0x00000000, 0x00000000, 1);
	vinewood = CreateDynamicObject(19466, 1297.451416, -1125.373046, 30.186231, 0.000000, 0.000000, 89.999977, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}T", 20, "Ariel", 25, 0, 0x00000000, 0x00000000, 1);
	vinewood = CreateDynamicObject(19466, 1286.677246, -1125.423583, 28.556207, 0.000000, 0.000000, 89.999977, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}VIN", 20, "Ariel", 25, 0, 0x00000000, 0x00000000, 1);
	vinewood = CreateDynamicObject(19466, 1288.277954, -1125.412719, 28.556207, 0.000000, 0.000000, 90.299972, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}EWO", 20, "Ariel", 25, 0, 0x00000000, 0x00000000, 1);
	vinewood = CreateDynamicObject(19466, 1289.796142, -1125.412719, 28.556207, 0.000000, 0.000000, 90.299972, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}OD", 20, "Ariel", 25, 0, 0x00000000, 0x00000000, 1);
	vinewood = CreateDynamicObject(19466, 1291.706665, -1125.393554, 28.556207, 0.000000, 0.000000, 90.299972, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}STA", 20, "Ariel", 25, 0, 0x00000000, 0x00000000, 1);
	vinewood = CreateDynamicObject(19466, 1293.046997, -1125.393920, 28.556207, 0.000000, 0.000000, 89.999977, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}TIO", 20, "Ariel", 25, 0, 0x00000000, 0x00000000, 1);
	vinewood = CreateDynamicObject(19466, 1293.967285, -1125.383544, 28.556207, 0.000000, 0.000000, 89.999977, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}N", 20, "Ariel", 25, 0, 0x00000000, 0x00000000, 1);
	vinewood = CreateDynamicObject(19477, 1317.952514, -1130.853149, 25.806272, 0.000000, 0.000000, -89.799972, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}AUTHORIZED", 50, "Calibri", 20, 0, 0x00000000, 0x00000000, 0);
	vinewood = CreateDynamicObject(19477, 1320.024414, -1130.845458, 25.806268, 0.000000, 0.000000, -89.799972, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}VEHICLES", 50, "Calibri", 20, 0, 0x00000000, 0x00000000, 0);
	vinewood = CreateDynamicObject(19477, 1321.514648, -1130.840209, 25.806274, 0.000000, 0.000000, -89.799972, -1, -1, -1, 300.00, 300.00);
	SetDynamicObjectMaterialText(vinewood, 0, "{000000}ONLY", 50, "Calibri", 20, 0, 0x00000000, 0x00000000, 0);
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	vinewood = CreateDynamicObject(1233, 1312.933471, -1135.661254, 24.288270, 0.000000, 0.000000, 0.000000, -1, -1, -1, 300.00, 300.00);
	vinewood = CreateDynamicObject(638, 1282.038330, -1125.080322, 23.708099, 0.000000, 0.000000, 90.800003, -1, -1, -1, 300.00, 300.00);
	vinewood = CreateDynamicObject(638, 1284.708129, -1125.033447, 23.678127, 0.000000, 0.000000, 90.800003, -1, -1, -1, 300.00, 300.00);
	vinewood = CreateDynamicObject(638, 1287.317626, -1125.006347, 23.678127, 0.000000, 0.000000, 90.800003, -1, -1, -1, 300.00, 300.00);
	vinewood = CreateDynamicObject(5738, 1291.878906, -1122.455322, 8.610939, 2.899996, 0.000000, 0.999998, -1, -1, -1, 300.00, 300.00);
	vinewood = CreateDynamicObject(19859, 1295.743286, -1124.587890, 24.326238, 0.000000, 0.000000, 0.000000, -1, -1, -1, 300.00, 300.00);
	vinewood = CreateDynamicObject(19859, 1298.685668, -1124.596191, 24.326238, 0.000000, 0.000000, -179.799926, -1, -1, -1, 300.00, 300.00);
	vinewood = CreateDynamicObject(638, 1304.376342, -1124.768920, 23.678127, 0.000000, 0.000000, 90.800003, -1, -1, -1, 300.00, 300.00);
	vinewood = CreateDynamicObject(638, 1307.035400, -1124.731079, 23.678127, 0.000000, 0.000000, 90.800003, -1, -1, -1, 300.00, 300.00);
	vinewood = CreateDynamicObject(638, 1309.704833, -1124.693847, 23.678127, 0.000000, 0.000000, 90.800003, -1, -1, -1, 300.00, 300.00);
	vinewood = CreateDynamicObject(8947, 1318.920166, -1118.551269, 25.454002, 0.000000, 0.000000, 0.199999, -1, -1, -1, 300.00, 300.00);
	vinewood = CreateDynamicObject(1689, 1317.780517, -1110.566284, 29.616241, 0.000000, 0.000000, 0.000000, -1, -1, -1, 300.00, 300.00);
	vinewood = CreateDynamicObject(9093, 1318.954467, -1130.785888, 24.190809, 0.000000, 0.000000, 90.199920, -1, -1, -1, 300.00, 300.00);
	vinewood = CreateDynamicObject(1211, 1315.313110, -1135.414794, 23.176242, 0.000000, 0.000000, 0.000000, -1, -1, -1, 300.00, 300.00);
	vinewood = CreateDynamicObject(717, 1330.818481, -1128.076293, 22.860563, 0.000000, 0.000000, 0.000000, -1, -1, -1, 300.00, 300.00);
	vinewood = CreateDynamicObject(717, 1330.818481, -1121.376342, 22.860563, 0.000000, 0.000000, 0.000000, -1, -1, -1, 300.00, 300.00);
	vinewood = CreateDynamicObject(717, 1330.818481, -1114.345947, 22.860563, 0.000000, 0.000000, 0.000000, -1, -1, -1, 300.00, 300.00);


	//station FD & PD
 	new station;
	station = CreateObject(19815, 1472.617919, -1272.815673, 15.869000, 0.039999, 0.000000, 90.000000, 300.00);
	SetObjectMaterial(station, 0, 18641, "flashlight1", "metalblack1-2", 0x00000000);
	station = CreateObject(11453, 1657.962646, -1422.978149, 13.969968, 0.000000, 0.000000, 0.000000, 300.00);
	SetObjectMaterial(station, 0, 18641, "flashlight1", "metalblack1-2", 0x00000000);
	SetObjectMaterial(station, 1, 18641, "flashlight1", "metalblack1-2", 0x00000000);
	station = CreateObject(19483, 1658.039916, -1422.989257, 14.365218, 0.000000, 0.000000, 270.000000, 300.00);
	SetObjectMaterialText(station, "DETECTIVE BUREAU", 0, 80, "Calibri", 30, 1, 0xFFFFFFFF, 0x00000000, 1);
	station = CreateObject(19483, 1658.089843, -1422.989257, 13.385211, 0.000000, 0.000000, 270.000000, 300.00);
	SetObjectMaterialText(station, "LOS SANTOS POLICE DEPARTMENT", 0, 110, "Ariel", 34, 1, 0xFFFFFFFF, 0x00000000, 0);
	station = CreateObject(19483, 1658.070068, -1422.989257, 13.915214, 0.000000, 0.000000, 270.000000, 300.00);
	SetObjectMaterialText(station, "__________________________________", 0, 80, "courier", 30, 1, 0xFFFFFFFF, 0x00000000, 0);
	station = CreateObject(19483, 1472.613281, -1272.876953, 16.139926, 0.000000, 0.000000, 180.000000, 300.00);
	SetObjectMaterialText(station, "LOS SANTOS FIRE DEPARTMENT", 0, 80, "Ariel", 18, 1, 0xFFFFFFFF, 0x00000000, 1);
	station = CreateObject(19483, 1472.613281, -1272.836914, 15.819922, 0.000000, 0.000000, 180.000000, 300.00);
	SetObjectMaterialText(station, "1282 SUNSET AVENUE, DOWNTOWN LS", 0, 120, "Ariel", 31, 1, 0xFFFFFFFF, 0x00000000, 1);
	station = CreateObject(19483, 1472.613281, -1272.836914, 15.519918, 0.000000, 0.000000, 180.000000, 300.00);
	SetObjectMaterialText(station, "LOS SANTOS 206", 0, 120, "Ariel", 31, 1, 0xFFFFFFFF, 0x00000000, 1);
	station = CreateObject(19483, 1660.960937, -1422.979248, 14.235219, 0.000000, 0.000000, 270.000000, 300.00);
	SetObjectMaterialText(station, "2607", 0, 80, "Calibri", 20, 1, 0xFFFFFFFF, 0x00000000, 0);
	station = CreateObject(11245, 1652.811157, -1397.288696, 17.725200, 9.239998, -14.039999, 270.000000, 300.00);
	station = CreateObject(11245, 1656.832031, -1397.344848, 17.765199, 9.239998, -14.039999, 270.000000, 300.00);
	station = CreateObject(11245, 1661.057861, -1397.290039, 17.725200, 9.239998, -14.039999, 270.000000, 300.00);
	station = CreateObject(11245, 1665.081054, -1397.310913, 17.725200, 9.239998, -14.039999, 270.000000, 300.00);
	station = CreateObject(1215, 1667.711914, -1430.751342, 13.092490, 0.000000, 0.000000, 0.000000, 300.00);
	station = CreateObject(19968, 1668.797851, -1435.723266, 12.516698, 0.000000, 0.000000, 0.000000, 300.00);
	station = CreateObject(19968, 1647.961181, -1435.738525, 12.516670, 0.000000, 0.000000, 0.000000, 300.00);
	station = CreateObject(1215, 1666.171508, -1430.751342, 13.092490, 0.000000, 0.000000, 0.000000, 300.00);
	station = CreateObject(1215, 1664.581665, -1430.751342, 13.092490, 0.000000, 0.000000, 0.000000, 300.00);
	station = CreateObject(1215, 1662.821044, -1430.751342, 13.092490, 0.000000, 0.000000, 0.000000, 300.00);
	station = CreateObject(1215, 1660.970458, -1430.751342, 13.092490, 0.000000, 0.000000, 0.000000, 300.00);
	station = CreateObject(1215, 1659.120483, -1430.751342, 13.092490, 0.000000, 0.000000, 0.000000, 300.00);
	station = CreateObject(1215, 1657.309448, -1430.751342, 13.092490, 0.000000, 0.000000, 0.000000, 300.00);
	station = CreateObject(1215, 1655.528808, -1430.751342, 13.092490, 0.000000, 0.000000, 0.000000, 300.00);
	station = CreateObject(1215, 1653.768554, -1430.751342, 13.092490, 0.000000, 0.000000, 0.000000, 300.00);
	station = CreateObject(1215, 1652.018432, -1430.751342, 13.092490, 0.000000, 0.000000, 0.000000, 300.00);
	station = CreateObject(1215, 1650.318359, -1430.751342, 13.092490, 0.000000, 0.000000, 0.000000, 300.00);
	station = CreateObject(1215, 1648.608398, -1430.751342, 13.092490, 0.000000, 0.000000, 0.000000, 300.00);


	// Marcar
 	//Objects////////////////////////////////////////////////////////////////////////////////////////////////////////
	new marcar;
	marcar = CreateDynamicObjectEx(19443, 1546.533691, -2323.338867, 12.760133, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "LOS", 100, "Ariel", 36, 1, 0xFFF00001, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(10281, 1547.702270, -2323.315185, 16.779497, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterial(marcar, 2, 6404, "beafron1_law2", "blueshade2_64", 0x00000000);
	marcar = CreateDynamicObjectEx(19443, 1546.533691, -2322.378417, 12.760133, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "SANTOS", 100, "Ariel", 36, 1, 0xFFF00001, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19443, 1546.533691, -2322.378417, 12.760133, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "SANTOS", 100, "Ariel", 36, 1, 0xFFF00001, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19443, 1546.533691, -2323.089111, 12.380133, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "BE", 100, "Ariel", 70, 1, 0xFFF00001, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19443, 1546.533691, -2322.068115, 12.380133, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "ST", 100, "Ariel", 70, 1, 0xFFF00001, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19443, 1546.533691, -2323.438964, 11.590129, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "CAR", 100, "Ariel", 36, 1, 0xFFF00001, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19443, 1546.533691, -2322.468017, 11.590129, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "RENTAL", 100, "Ariel", 36, 1, 0xFFF00001, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19443, 1546.533691, -2320.927734, 11.590129, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "S", 100, "Ariel", 36, 1, 0xFFF00001, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19447, 1546.105957, -2324.158691, 17.126886, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterial(marcar, 0, 10101, "2notherbuildsfe", "sl_vicwall01", 0x00000000);
	marcar = CreateDynamicObjectEx(19447, 1546.105957, -2322.638427, 17.126886, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterial(marcar, 0, 10101, "2notherbuildsfe", "sl_vicwall01", 0x00000000);
	marcar = CreateDynamicObjectEx(19443, 1546.153320, -2327.980712, 17.020133, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "MAR", 90, "Ariel", 68, 1, 0xFFF00001, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19443, 1546.153320, -2326.389648, 17.020133, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "CAR", 90, "Ariel", 68, 1, 0xFFF00001, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19443, 1546.113281, -2320.348876, 17.220138, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "CAR", 90, "Ariel", 55, 1, 0xFFF00001, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19443, 1546.113281, -2318.867919, 17.220138, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "RENT", 90, "Ariel", 55, 1, 0xFFF00001, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19443, 1546.113281, -2319.397949, 15.550128, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "LOS", 140, "Ariel", 55, 1, 0xFF000001, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19443, 1546.133300, -2318.687255, 15.550128, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "SANTOS", 140, "Ariel", 55, 1, 0xFF000001, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19429, 1547.335571, -2296.340332, 19.372808, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "RC", 60, "Ariel", 50, 1, 0xFFFFFFFF, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19429, 1548.916381, -2296.340332, 19.372808, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "MAR", 60, "Ariel", 50, 1, 0xFFFFFFFF, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(8041, 1548.573730, -2297.663818, 15.253031, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterial(marcar, 0, 11631, "mp_ranchcut", "mpCJ_Black_metal", 0x00000000);
	marcar = CreateDynamicObjectEx(19429, 1545.844604, -2296.320312, 19.372808, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "AR", 60, "Ariel", 50, 1, 0xFFFFFFFF, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19429, 1548.835083, -2296.320312, 19.372808, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "______________________________________________", 60, "Ariel", 50, 1, 0xFFFFFFFF, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19429, 1547.245605, -2296.320312, 19.372808, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "______________________________________________", 60, "Ariel", 50, 1, 0xFFFFFFFF, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19429, 1545.994995, -2296.320312, 19.372808, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "______________________________________________", 60, "Ariel", 50, 1, 0xFFFFFFFF, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19429, 1548.785888, -2296.320312, 17.932800, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "CAR", 60, "Ariel", 20, 1, 0xFFFFFFFF, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19429, 1547.525756, -2296.320312, 17.932800, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "RENTALS", 60, "Ariel", 20, 1, 0xFFFFFFFF, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19429, 1545.945190, -2296.320312, 17.932800, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "S", 60, "Ariel", 20, 1, 0xFFFFFFFF, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(19429, 1545.354614, -2296.320312, 17.932800, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(marcar, 0, "LSX", 60, "Ariel", 20, 1, 0xFFFFFFFF, 0x00000000, 0);
	marcar = CreateDynamicObjectEx(17064, 1542.480224, -2322.040771, 12.508629, 0.000000, 0.000000, 450.000000, 250.00, 250.00);
	marcar = CreateDynamicObjectEx(1415, 1544.435058, -2310.530273, 12.679994, 0.000000, 0.000000, 180.000000, 250.00, 250.00);
	marcar = CreateDynamicObjectEx(1328, 1542.743896, -2310.249023, 13.053089, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	marcar = CreateDynamicObjectEx(643, 1544.502319, -2336.332031, 13.009589, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	marcar = CreateDynamicObjectEx(19324, 1543.406860, -2333.392822, 13.196368, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	marcar = CreateDynamicObjectEx(1440, 1540.276977, -2310.183593, 13.057396, 0.000000, 0.000000, 180.000000, 250.00, 250.00);
	marcar = CreateDynamicObjectEx(3594, 1535.533691, -2315.490966, 13.066663, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	marcar = CreateDynamicObjectEx(1217, 1537.417724, -2311.867187, 12.919300, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	marcar = CreateDynamicObjectEx(1217, 1537.877929, -2312.617187, 12.919300, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	marcar = CreateDynamicObjectEx(1217, 1537.117309, -2312.647216, 12.919300, 90.000000, 0.000000, 0.000000, 250.00, 250.00);
	marcar = CreateDynamicObjectEx(956, 1540.609741, -2333.376220, 12.916637, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	marcar = CreateDynamicObjectEx(2714, 1546.571777, -2327.439697, 14.050264, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	marcar = CreateDynamicObjectEx(19425, 1544.997192, -2296.398193, 12.522813, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	marcar = CreateDynamicObjectEx(19425, 1548.297119, -2296.398193, 12.522813, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	marcar = CreateDynamicObjectEx(19425, 1551.476318, -2296.398193, 12.522813, 0.000000, 0.000000, 0.000000, 250.00, 250.00);


	//Harbour
	new harbour;
	harbour = CreateDynamicObject(19482, 2127.189453, -2182.978027, 16.916893, 0.000000, 0.000000, 134.899963, -1, -1, -1, 250.00, 250.00);
	SetDynamicObjectMaterial(harbour, 0, 10101, "2notherbuildsfe", "ferry_build14", 0x00000000);
	SetDynamicObjectMaterialText(harbour, 0, "{FFFFFF}POLICE", 60, "Calibri", 45, 1, 0x00000000, 0x00000000, 0);
	harbour = CreateDynamicObject(19482, 2127.529296, -2182.639404, 16.096872, 0.000000, 0.000000, 134.899963, -1, -1, -1, 250.00, 250.00);
	SetDynamicObjectMaterial(harbour, 0, 10101, "2notherbuildsfe", "ferry_build14", 0x00000000);
	SetDynamicObjectMaterialText(harbour, 0, "{FFFFFF}Harbor", 90, "Calibri", 50, 1, 0x00000000, 0x00000000, 0);
	harbour = CreateDynamicObject(19482, 2125.447753, -2184.713623, 16.096872, 0.000000, 0.000000, 134.899963, -1, -1, -1, 250.00, 250.00);
	SetDynamicObjectMaterial(harbour, 0, 10101, "2notherbuildsfe", "ferry_build14", 0x00000000);
	SetDynamicObjectMaterialText(harbour, 0, "{FFFFFF}Station", 90, "Calibri", 50, 1, 0x00000000, 0x00000000, 0);
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	harbour = CreateDynamicObject(6134, 2150.498779, -2175.680908, 16.650390, 0.000000, 0.000000, 44.890090, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(638, 2133.466796, -2176.279052, 13.200710, 0.000000, 0.000000, 315.183990, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(638, 2135.083984, -2174.690429, 13.200710, 0.000000, 0.000000, 315.183990, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(638, 2136.757324, -2173.073974, 13.200710, 0.000000, 0.000000, 315.183990, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(638, 2153.203369, -2156.614990, 13.200710, 0.000000, 0.000000, 311.953948, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(638, 2150.389648, -2159.455078, 13.200710, 0.000000, 0.000000, 311.918853, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(638, 2151.926025, -2157.886230, 13.200710, 0.000000, 0.000000, 311.989013, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(638, 2149.468017, -2160.215087, 13.200710, 0.000000, 0.000000, 315.487030, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(638, 2149.468017, -2160.215087, 13.200710, 0.000000, 0.000000, 315.487030, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(638, 2146.564697, -2163.143554, 13.200710, 0.000000, 0.000000, 315.487030, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(638, 2147.787353, -2161.924316, 13.200710, 0.000000, 0.000000, 315.487030, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(638, 2141.802978, -2168.060302, 13.200710, 0.000000, 0.000000, 315.487030, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(638, 2144.920166, -2164.818603, 13.200710, 0.000000, 0.000000, 315.487030, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(638, 2154.776123, -2155.007812, 13.200710, 0.000000, 0.000000, 312.023834, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(638, 2156.193359, -2153.840332, 13.200710, 0.000000, 0.000000, 312.023834, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(638, 2143.351074, -2166.393310, 13.200710, 0.000000, 0.000000, 315.487030, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(7090, 2125.376220, -2187.135986, 18.563690, 0.000000, -25.000000, 134.201004, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(919, 2141.048095, -2170.415771, 19.821279, 0.000000, 0.000000, 44.771278, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(3030, 2132.873535, -2182.694335, 20.552740, 0.000000, 0.000000, 359.696960, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(19121, 2137.505615, -2171.322509, 13.317799, 0.000000, 0.000000, 0.000000, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(19121, 2140.360595, -2168.514404, 13.317799, 0.000000, 0.000000, 0.000000, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(967, 2163.010253, -2157.077148, 12.513600, 0.000000, 0.000000, 136.220596, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(10183, 2167.531494, -2176.945068, 12.549200, 0.099999, -0.100000, -89.800018, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(3035, 2166.585937, -2182.233398, 13.216830, 0.000000, 0.000000, 224.486785, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(1421, 2167.858642, -2179.591308, 12.975850, 0.000000, 0.000000, 135.469741, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(1421, 2168.424072, -2178.418457, 13.171689, 0.000000, 0.000000, 45.146770, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(16287, 2144.900878, -2193.937255, 12.535670, 0.000000, 0.000000, 315.485168, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(17951, 2139.647460, -2199.364746, 14.306699, 0.000000, 0.000000, 45.301300, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(17951, 2150.081542, -2188.546386, 14.306699, 0.000000, 0.000000, 45.101299, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(8843, 2146.864257, -2187.733154, 12.558420, 0.000000, 0.000000, 135.751144, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(8843, 2148.336669, -2188.546142, 12.558420, 0.000000, 0.000000, 315.720764, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(8843, 2150.631347, -2190.996093, 12.558420, 0.000000, 0.000000, 315.720764, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(8843, 2149.159179, -2189.898193, 12.558420, 0.000000, 0.000000, 135.751144, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(1421, 2168.424072, -2178.418457, 13.583880, 0.000000, 0.000000, 45.146770, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(1421, 2167.858642, -2179.591308, 13.583880, 0.000000, 0.000000, 135.469741, -1, -1, -1, 250.00, 250.00);
	harbour = CreateDynamicObject(10183, 2167.531494, -2176.945068, 12.549200, 0.099999, -0.100000, -89.800018, -1, -1, -1, 250.00, 250.00);

	//-Central Area LSPD
	new ardi;
	ardi = CreateDynamicObjectEx(18762, 1544.853637, -1686.887695, 13.688390, 0.000000, 90.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterial(ardi, 0, 13624, "innertrak", "dirtgrass", 0x00000000);
	ardi = CreateDynamicObjectEx(18762, 1544.853637, -1686.887695, 12.708387, 0.000000, 90.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterial(ardi, 0, 13624, "innertrak", "dirtgrass", 0x00000000);
	ardi = CreateDynamicObjectEx(19427, 1544.426635, -1686.212768, 12.218106, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "LOS SANTOS POL", 100, "Ariel", 34, 1, 0xFFFFFFFF, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19427, 1544.426635, -1687.782958, 12.228106, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "ICE DEPARTMENT", 100, "Ariel", 34, 1, 0xFFFFFFFF, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19427, 1544.426635, -1686.512817, 12.238105, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "____________________________________", 100, "Ariel", 34, 1, 0xFFFFFFFF, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19427, 1544.426635, -1687.412597, 12.238105, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "____________________________________", 100, "Ariel", 34, 1, 0xFFFFFFFF, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19427, 1544.436645, -1686.923461, 11.758105, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "PERSHING SQUARE HEADQUARTERS", 140, "Ariel", 32, 1, 0xFFFFFFFF, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(18762, 1589.903564, -1638.305786, 17.978395, 0.000000, 90.000000, 180.000000, 250.00, 250.00);
	SetDynamicObjectMaterial(ardi, 0, 10765, "airportgnd_sfse", "white", 0x00000000);
	ardi = CreateDynamicObjectEx(18762, 1587.131958, -1638.305786, 17.978395, 0.000000, 90.000000, 180.000000, 250.00, 250.00);
	SetDynamicObjectMaterial(ardi, 0, 10765, "airportgnd_sfse", "white", 0x00000000);
	ardi = CreateDynamicObjectEx(18762, 1587.131958, -1638.305786, 18.358402, 0.000000, 90.000000, 180.000000, 250.00, 250.00);
	SetDynamicObjectMaterial(ardi, 0, 10765, "airportgnd_sfse", "white", 0x00000000);
	ardi = CreateDynamicObjectEx(18762, 1589.891967, -1638.305786, 18.358402, 0.000000, 90.000000, 180.000000, 250.00, 250.00);
	SetDynamicObjectMaterial(ardi, 0, 10765, "airportgnd_sfse", "white", 0x00000000);
	ardi = CreateDynamicObjectEx(19444, 1589.296875, -1637.867187, 16.887651, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "PERSHING SQUARE", 90, "Ariel", 21, 1, 0xFF000001, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19444, 1587.726440, -1637.877197, 16.887651, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "UARE GARAGE", 90, "Ariel", 21, 1, 0xFF000001, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19444, 1586.206665, -1637.867187, 16.887651, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "E", 90, "Ariel", 21, 1, 0xFF000001, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19444, 1589.288085, -1637.887207, 16.907651, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "____________________________________________", 90, "Ariel", 21, 1, 0xFF000001, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19444, 1587.697875, -1637.887207, 16.907651, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "____________________________________________", 90, "Ariel", 21, 1, 0xFF000001, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19444, 1589.158325, -1637.887207, 16.377653, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "AUTHORIZED", 130, "Ariel", 35, 1, 0xFF000001, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19444, 1587.828125, -1637.887207, 16.377653, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "VEHICLES", 130, "Ariel", 35, 1, 0xFF000001, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19444, 1586.807983, -1637.887207, 16.377653, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "ONLY", 130, "Ariel", 35, 1, 0xFF000001, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19429, 1588.956298, -1631.706054, 12.298937, 0.000000, 90.000000, 270.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "KEEP", 90, "Ariel", 57, 0, 0xFFFFFFFF, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19429, 1586.965820, -1631.706054, 12.298937, 0.000000, 90.000000, 270.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "RIGHT", 90, "Ariel", 57, 0, 0xFFFFFFFF, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19429, 1585.405761, -1631.706054, 12.298937, 0.000000, 90.000000, 270.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "T", 90, "Ariel", 57, 0, 0xFFFFFFFF, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(1290, 1573.003784, -1620.311279, 17.431287, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	SetDynamicObjectMaterial(ardi, 1, 5150, "wiresetc_las2", "ganggraf01_LA_m", 0x00000000);
	ardi = CreateDynamicObjectEx(2258, 1544.307739, -1617.883666, 14.559697, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterial(ardi, 0, 10765, "airportgnd_sfse", "white", 0x00000000);
	SetDynamicObjectMaterial(ardi, 1, 5150, "wiresetc_las2", "ganggraf01_LA_m", 0x00000000);
	SetDynamicObjectMaterialText(ardi, 0, "RESTRICTED", 50, "Ariel", 20, 1, 0xF0000001, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(2258, 1544.177612, -1617.874511, 14.619697, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterial(ardi, 0, 10765, "airportgnd_sfse", "white", 0x00000000);
	ardi = CreateDynamicObjectEx(2258, 1544.578002, -1617.883666, 14.339697, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterial(ardi, 0, 10765, "airportgnd_sfse", "white", 0x00000000);
	SetDynamicObjectMaterial(ardi, 1, 5150, "wiresetc_las2", "ganggraf01_LA_m", 0x00000000);
	SetDynamicObjectMaterialText(ardi, 0, "NO", 50, "Ariel", 35, 1, 0xF0000001, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(2258, 1545.028442, -1637.804077, 14.559697, 0.000000, -0.000000, 179.999938, 250.00, 250.00);
	SetDynamicObjectMaterial(ardi, 0, 10765, "airportgnd_sfse", "white", 0x00000000);
	SetDynamicObjectMaterial(ardi, 1, 5150, "wiresetc_las2", "ganggraf01_LA_m", 0x00000000);
	SetDynamicObjectMaterialText(ardi, 0, "RESTRICTED", 50, "Ariel", 20, 1, 0xF0000001, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(2258, 1544.307739, -1617.883666, 14.559697, 0.000000, -0.000000, -0.000068, 250.00, 250.00);
	SetDynamicObjectMaterial(ardi, 0, 10765, "airportgnd_sfse", "white", 0x00000000);
	SetDynamicObjectMaterial(ardi, 1, 5150, "wiresetc_las2", "ganggraf01_LA_m", 0x00000000);
	SetDynamicObjectMaterialText(ardi, 0, "RESTRICTED", 50, "Ariel", 20, 1, 0xF0000001, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(2258, 1544.578002, -1617.883666, 14.339697, 0.000000, -0.000000, -0.000068, 250.00, 250.00);
	SetDynamicObjectMaterial(ardi, 0, 10765, "airportgnd_sfse", "white", 0x00000000);
	SetDynamicObjectMaterial(ardi, 1, 5150, "wiresetc_las2", "ganggraf01_LA_m", 0x00000000);
	SetDynamicObjectMaterialText(ardi, 0, "NO", 50, "Ariel", 35, 1, 0xF0000001, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(2258, 1544.237670, -1617.893676, 13.839694, 0.000000, -0.000000, -0.000068, 250.00, 250.00);
	SetDynamicObjectMaterial(ardi, 0, 10765, "airportgnd_sfse", "white", 0x00000000);
	SetDynamicObjectMaterial(ardi, 1, 5150, "wiresetc_las2", "ganggraf01_LA_m", 0x00000000);
	SetDynamicObjectMaterialText(ardi, 0, "TRESSPASING", 50, "Ariel", 19, 1, 0xF0000001, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(2258, 1544.738159, -1637.803955, 14.339697, 0.000000, -0.000000, 179.999938, 250.00, 250.00);
	SetDynamicObjectMaterial(ardi, 0, 10765, "airportgnd_sfse", "white", 0x00000000);
	SetDynamicObjectMaterial(ardi, 1, 5150, "wiresetc_las2", "ganggraf01_LA_m", 0x00000000);
	SetDynamicObjectMaterialText(ardi, 0, "NO", 50, "Ariel", 35, 1, 0xF0000001, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(2258, 1545.108398, -1637.813842, 13.819694, 0.000000, -0.000000, 179.999938, 250.00, 250.00);
	SetDynamicObjectMaterial(ardi, 0, 10765, "airportgnd_sfse", "white", 0x00000000);
	SetDynamicObjectMaterial(ardi, 1, 5150, "wiresetc_las2", "ganggraf01_LA_m", 0x00000000);
	SetDynamicObjectMaterialText(ardi, 0, "TRESSPASING", 50, "Ariel", 19, 1, 0xF0000001, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(2258, 1545.181640, -1637.818725, 14.545569, 0.000000, 0.000000, 180.000000, 250.00, 250.00);
	SetDynamicObjectMaterial(ardi, 0, 10765, "airportgnd_sfse", "white", 0x00000000);
	ardi = CreateDynamicObjectEx(19426, 1539.625854, -1609.477783, 13.236410, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "LOS SANTOS", 130, "Ariel", 45, 1, 0xFFFFFFFF, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19426, 1539.625854, -1611.098632, 13.236410, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "POLICE", 130, "Ariel", 45, 1, 0xFFFFFFFF, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19426, 1539.625854, -1612.068237, 13.236410, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "DEPARTMENT", 130, "Ariel", 45, 1, 0xFFFFFFFF, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19426, 1539.625854, -1609.507446, 13.236410, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "_________________________________________________________", 130, "Ariel", 45, 1, 0xFFFFFFFF, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19426, 1539.625854, -1611.107177, 13.236410, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "_________________________________________________________", 130, "Ariel", 45, 1, 0xFFFFFFFF, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19426, 1539.625854, -1612.037963, 13.236410, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "_________________________________________________________", 130, "Ariel", 45, 1, 0xFFFFFFFF, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19426, 1539.625854, -1610.208129, 12.676405, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "TO PROTECT", 130, "Ariel", 35, 1, 0xFFFFFFFF, 0x00000000, 0);
	ardi = CreateDynamicObjectEx(19426, 1539.625854, -1611.448364, 12.676405, 0.000000, 0.000000, 0.000000, 250.00, 250.00);
	SetDynamicObjectMaterialText(ardi, 0, "AND TO SERVE", 130, "Ariel", 35, 1, 0xFFFFFFFF, 0x00000000, 0);
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	ardi = CreateDynamicObjectEx(2885, 1587.660522, -1638.138305, 17.695104, 0.000000, 0.599999, 180.000000, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(19425, 1576.515136, -1624.572753, 12.401888, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(19425, 1576.515136, -1627.872070, 12.401888, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(19425, 1576.515136, -1631.141357, 12.401888, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(19425, 1544.656860, -1625.750610, 12.401888, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(19425, 1544.656860, -1628.929687, 12.401888, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(8843, 1561.188232, -1625.199096, 12.385838, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(8843, 1561.658325, -1629.530151, 12.385838, 0.000000, 0.000000, 270.000000, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(10183, 1559.900024, -1606.466064, 12.396056, 0.000000, 0.000000, 45.299999, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(10183, 1559.900024, -1606.466064, 12.396056, 0.000000, 0.000000, 45.299999, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(10183, 1559.900024, -1606.466064, 12.396056, 0.000000, 0.000000, 45.299999, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(10183, 1594.918579, -1606.550292, 12.419796, -0.099999, 0.000000, 45.299999, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(10183, 1594.918579, -1606.550292, 12.419796, -0.099999, 0.000000, 45.299999, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(10183, 1594.918579, -1606.550292, 12.419796, -0.099999, 0.000000, 45.299999, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(10183, 1603.753295, -1627.761840, 12.625261, -0.099999, 0.000000, 315.299987, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(10183, 1603.753295, -1627.761840, 12.625261, -0.099999, 0.000000, 315.299987, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(10183, 1603.753295, -1627.761840, 12.625261, -0.099999, 0.000000, 315.299987, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(1290, 1552.052490, -1620.311279, 17.431287, 0.000000, 0.000000, 90.000000, 250.00, 250.00);
	ardi = CreateDynamicObjectEx(1290, 1562.464233, -1620.311279, 17.431287, 0.000000, 0.000000, 90.000000, 250.00, 250.00);

	// INTERIOR BANCO:
	new Bankito = CreateObject(5720, 982.34, -1169.66, 32.82,   0.00, 0.00, 0.00);
	SetObjectMaterial(Bankito, 2, 3942, "bistro", "ahoodfence2", 0);
	SetObjectMaterial(Bankito, 4, 16016, "des_n", "ranchwall1", 0);
	SetObjectMaterial(Bankito, 5, 16005, "des_stownmain2", "des_redslats", 0);
	SetObjectMaterial(Bankito, 6, 964, "cj_crate_will", "CJ_FLIGHT_CASE", 0);
	SetObjectMaterial(Bankito, 7, 16021, "des_geyser", "shingles1", 0);
	SetObjectMaterial(Bankito, 8, 16005, "des_stownmain2", "sanruf", 0);
	SetObjectMaterial(Bankito, 9, 6295, "lawland2", "lightglass", 0);
	CreateObject(19376, 981.91815, -1170.90808, 24.08724,   0.00000, 90.00000, 0.00000);
	CreateObject(19376, 978.84003, -1167.62000, 24.08035,   0.00000, 90.00000, 0.00000);
	CreateObject(19376, 968.68475, -1167.38965, 24.11000,   0.00000, 90.00000, 0.00000);
	CreateObject(19376, 986.15997, -1167.60999, 24.08000,   0.00000, 90.00000, 0.00000);
	CreateObject(19376, 986.09998, -1170.25000, 24.06000,   0.00000, 90.00000, 0.00000);
	CreateDynamicObject(19358, 972.07001, -1162.51001, 25.72000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19358, 978.71997, -1162.90002, 25.78000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19358, 990.76001, -1163.68994, 25.71000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19358, 990.75000, -1166.89001, 25.71000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19358, 990.75000, -1170.08997, 25.71000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19358, 990.75000, -1172.70996, 25.71000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19358, 834.34998, -998.25000, 25.29000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19358, 970.40002, -1163.89001, 25.71000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19358, 970.40961, -1167.03894, 25.71000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19358, 970.28998, -1170.30005, 27.79000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19358, 970.28003, -1173.47998, 27.78000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19358, 971.79999, -1175.09998, 29.33000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19358, 975.01001, -1175.08997, 29.17000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19358, 978.21997, -1175.09998, 25.72000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19358, 981.39001, -1175.07996, 25.72000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19358, 984.57001, -1175.06995, 25.72000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19358, 987.69000, -1175.03003, 25.72000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19358, 990.23999, -1175.04004, 25.72000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19358, 990.73999, -1174.59998, 25.71000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19375, 976.18451, -1167.34595, 27.38000,   0.00000, 90.00000, 0.00000);
	CreateDynamicObject(19375, 985.71997, -1167.64001, 27.40000,   0.00000, 90.00000, 0.00000);
	CreateDynamicObject(19375, 985.58002, -1170.30005, 27.42000,   0.00000, 90.00000, 0.00000);
	CreateDynamicObject(19375, 975.40002, -1170.27002, 27.44000,   0.00000, 90.00000, 0.00000);
	CreateDynamicObject(19358, 991.94000, -1162.70996, 25.70000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19431, 984.42999, -1162.88000, 25.87000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19431, 985.71997, -1162.66003, 25.87000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19358, 971.90808, -1168.55334, 25.73000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19358, 975.03998, -1168.56995, 25.72000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19358, 976.64001, -1170.09998, 25.71000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19388, 976.65002, -1173.83997, 25.73000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(19358, 976.63995, -1170.68152, 25.71000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(2946, 983.40997, -1162.76001, 24.08000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(2946, 980.25000, -1162.73999, 24.08000,   0.00000, 0.00000, -90.00000);
	CreateDynamicObject(19437, 980.90002, -1162.87000, 25.90000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19437, 982.47998, -1162.92004, 25.90000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19437, 982.85999, -1162.89001, 25.90000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(2946, 980.25000, -1162.95996, 24.08000,   0.00000, 0.00000, -90.00000);
	CreateDynamicObject(2946, 983.40997, -1162.97998, 24.08000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19437, 982.47998, -1162.87000, 25.90000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(19437, 982.84003, -1162.84998, 25.90000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(2208, 987.63000, -1171.89001, 24.12000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(2208, 984.23999, -1171.92004, 24.12000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(2208, 984.20001, -1176.35999, 24.20000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1649, 986.17999, -1172.01001, 26.52000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1649, 990.53998, -1172.01001, 26.52000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1649, 986.15002, -1172.01001, 26.52000,   0.00000, 0.00000, 900.00000);
	CreateDynamicObject(1649, 990.53998, -1172.01001, 26.52000,   0.00000, 0.00000, 900.00000);
	CreateDynamicObject(1808, 983.84998, -1163.16553, 24.17000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1808, 979.85913, -1163.16553, 24.17000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1892, 981.32001, -1163.52002, 24.18000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(2191, 990.19000, -1174.43005, 24.13000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(2123, 986.15997, -1173.33997, 24.83000,   0.00000, 0.00000, -90.00000);
	CreateDynamicObject(2123, 988.57001, -1173.37000, 24.83000,   0.00000, 0.00000, -90.00000);
	CreateDynamicObject(2284, 990.19000, -1169.39001, 25.76000,   0.00000, 0.00000, -90.00000);
	CreateDynamicObject(2266, 982.22998, -1174.48999, 25.65000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(2267, 979.96997, -1174.96997, 25.83000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(1736, 977.03998, -1173.91003, 27.03000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1736, 981.81000, -1163.29004, 26.93000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(2257, 990.64001, -1165.75000, 26.17000,   0.00000, 0.00000, -90.00000);
	CreateDynamicObject(1616, 990.58002, -1163.20996, 27.14000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1616, 977.15002, -1169.78003, 27.14000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(2961, 979.02002, -1163.00000, 25.91000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(2961, 986.20001, -1172.41003, 24.68000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(2961, 988.35999, -1172.39001, 24.68000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(2606, 986.33002, -1175.06006, 26.13000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(1828, 981.73999, -1166.75000, 24.19000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(18643, 992.37000, -1184.85999, 12.71000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(18643, 992.37000, -1155.45996, 12.71000,   0.00000, 0.00000, -90.00000);
	CreateDynamicObject(18643, 988.91998, -1155.51001, 13.32000,   0.00000, 0.00000, -90.00000);
	CreateDynamicObject(18643, 988.91998, -1184.83997, 13.32000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(18643, 982.40002, -1155.55005, 13.74000,   0.00000, 0.00000, -90.00000);
	CreateDynamicObject(18643, 982.40002, -1184.78003, 13.74000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1726, 990.04999, -1163.09998, 24.17000,   0.00000, 0.00000, -90.00000);
	CreateDynamicObject(1726, 990.04999, -1166.84998, 24.17000,   0.00000, 0.00000, -90.00000);
	CreateDynamicObject(1822, 989.57001, -1166.52002, 24.14000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(2894, 990.07001, -1165.97998, 24.65000,   0.00000, 0.00000, -90.00000);
	CreateDynamicObject(1649, 988.26001, -1162.69995, 25.74000,   0.00000, 0.00000, 0.00000);
	CreateDynamicObject(1649, 975.86688, -1162.59875, 25.78000,   0.00000, 0.00000, 359.79999);
	CreateDynamicObject(19375, 985.71997, -1167.64001, 27.70000,   0.00000, 90.00000, 0.00000);
	CreateDynamicObject(19375, 975.62000, -1167.64001, 27.68000,   0.00000, 90.00000, 0.00000);
	CreateDynamicObject(19375, 985.71997, -1167.64001, 27.88000,   0.00000, 90.00000, 0.00000);
	CreateDynamicObject(1649, 988.34003, -1162.66003, 26.06000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(1649, 975.82001, -1162.43005, 26.06000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(19375, 975.62000, -1167.64001, 27.84000,   0.00000, 90.00000, 0.00000);
	CreateDynamicObject(1649, 988.34003, -1162.66003, 22.92000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(1649, 975.82001, -1162.43005, 22.83000,   0.00000, 0.00000, 180.00000);
	CreateDynamicObject(19357, 995.79999, -1159.25000, 23.50000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1569, 976.68573, -1174.57483, 24.08000,   0.00000, 0.00000, 90.00000);
	CreateDynamicObject(1726, 972.80402, -1167.52673, 24.17000,   0.00000, 0.00000, -214.73996);
	CreateDynamicObject(1726, 972.87555, -1163.80298, 24.17000,   0.00000, 0.00000, -361.07996);
	CreateDynamicObject(2283, 973.37872, -1168.43579, 26.17708,   0.00000, 0.00000, -180.00000);
}

// 12/02/2020
funcion IsPlayerConnectedEx(const playerid)
{
	if (IsPlayerConnected(playerid) && usuario_registro[playerid] == 2) return 1;
	return 0;
}

// 13/02/2020
SendSplitMessage(playerid, color, const text[])
{
	#define LENGHT (125)

	if(strlen(text) > LENGHT)
	{
		new firstString[LENGHT], secondString[LENGHT];

		strmid(firstString, text, 0, LENGHT);
		strmid(secondString, text, LENGHT - 1, LENGHT * 2);

		format(firstString, LENGHT, "%s...", firstString);
		format(secondString, LENGHT, "...%s", secondString);

		SendClientMessage(playerid, color, firstString);
		SendClientMessage(playerid, color, secondString);
	}
	else SendClientMessage(playerid, color, text);

	#undef LENGHT

	return 1;
}

// 15/02/2020
ProxExDetector(Float: f_Radius, playerid, string[], col1, col2, col3, col4, col5)
{
	new Float: f_playerPos[3];
	GetPlayerPos(playerid, f_playerPos[0], f_playerPos[1], f_playerPos[2]);
	foreach(Player, i)
	{
		if (i == playerid)break;
		if (GetPlayerVirtualWorld(i) == GetPlayerVirtualWorld(playerid))
		{
			if (IsPlayerInRangeOfPoint(i, f_Radius / 16, f_playerPos[0], f_playerPos[1], f_playerPos[2]))
			{
				if (InfoPersonaje[i][pNivel] != 0) SendSplitMessage(i, col1, string);
			}
			else if (IsPlayerInRangeOfPoint(i, f_Radius / 8, f_playerPos[0], f_playerPos[1], f_playerPos[2]))
			{
				if (InfoPersonaje[i][pNivel] != 0) SendSplitMessage(i, col2, string);
			}
			else if (IsPlayerInRangeOfPoint(i, f_Radius / 4, f_playerPos[0], f_playerPos[1], f_playerPos[2]))
			{
				if (InfoPersonaje[i][pNivel] != 0) SendSplitMessage(i, col3, string);
			}
			else if (IsPlayerInRangeOfPoint(i, f_Radius / 2, f_playerPos[0], f_playerPos[1], f_playerPos[2]))
			{
				if (InfoPersonaje[i][pNivel] != 0) SendSplitMessage(i, col4, string);
			}
			else if (IsPlayerInRangeOfPoint(i, f_Radius, f_playerPos[0], f_playerPos[1], f_playerPos[2]))
			{
				if (InfoPersonaje[i][pNivel] != 0) SendSplitMessage(i, col5, string);
			}
		}
	}
	return 1;
}

ProxDetector(Float: f_Radius, playerid, string[],col1,col2,col3,col4,col5)
{
	new Float: f_playerPos[3];
	GetPlayerPos(playerid, f_playerPos[0], f_playerPos[1], f_playerPos[2]);
	foreach(Player, i)
	{
		if (!BigEar[i])
		{
			if (GetPlayerVirtualWorld(i) == GetPlayerVirtualWorld(playerid))
			{
				if (IsPlayerInRangeOfPoint(i, f_Radius / 16, f_playerPos[0], f_playerPos[1], f_playerPos[2])) {
					SendSplitMessage(i, col1, string);
				}
				else if (IsPlayerInRangeOfPoint(i, f_Radius / 8, f_playerPos[0], f_playerPos[1], f_playerPos[2])) {
					SendSplitMessage(i, col2, string);
				}
				else if (IsPlayerInRangeOfPoint(i, f_Radius / 4, f_playerPos[0], f_playerPos[1], f_playerPos[2])) {
					SendSplitMessage(i, col3, string);
				}
				else if (IsPlayerInRangeOfPoint(i, f_Radius / 2, f_playerPos[0], f_playerPos[1], f_playerPos[2])) {
					SendSplitMessage(i, col4, string);
				}
				else if (IsPlayerInRangeOfPoint(i, f_Radius, f_playerPos[0], f_playerPos[1], f_playerPos[2])) {
					SendSplitMessage(i, col5, string);
				}
			}
		}
		else SendClientMessage(i, col1, string);
	}
	return 1;
}

CercaDelMarica(Float:radi, playerid, targetid)
{
	new Float: fp_playerPos[3];
	GetPlayerPos(targetid, fp_playerPos[0], fp_playerPos[1], fp_playerPos[2]);
	if (IsPlayerInRangeOfPoint(playerid, radi, fp_playerPos[0], fp_playerPos[1], fp_playerPos[2]) && GetPlayerVirtualWorld(playerid) == GetPlayerVirtualWorld(targetid))
	{
		return 1;
	}
	return 0;
}

stock IsVehicleOccupied(vehicleid)
{
	foreach(Player, playerid) if (IsPlayerConnectedEx(playerid))
	{
		if (IsPlayerInVehicle(playerid, vehicleid))
		return 1;
	}
	return 0;
}

SendClientMessageEx(playerid, color, const text[], {Float, _}:...)
{
	static
	    args,
	    str[144];

	if ((args = numargs()) == 3)
	{
	    SendClientMessage(playerid, color, text);
	}
	else
	{
		while (--args >= 3)
		{
			#emit LCTRL 5
			#emit LOAD.alt args
			#emit SHL.C.alt 2
			#emit ADD.C 12
			#emit ADD
			#emit LOAD.I
			#emit PUSH.pri
		}
		#emit PUSH.S text
		#emit PUSH.C 144
		#emit PUSH.C str
		#emit PUSH.S 8
		#emit SYSREQ.C format
		#emit LCTRL 5
		#emit SCTRL 4
		SendClientMessage(playerid, color, str);
		#emit RETN
	}
	return 1;
}

stock Fix_GT(string[])
{
	new szFixed[1024], iPos, iLen;
	for (iLen = strlen(string); iPos < iLen; iPos ++)
		switch (string[iPos])
		{
			case 'à':   szFixed[iPos] = 151;
			case 'á':   szFixed[iPos] = 152;
			case 'â':   szFixed[iPos] = 153;
			case 'ä':   szFixed[iPos] = 154;
			case 'À':   szFixed[iPos] = 128;
			case 'Á':   szFixed[iPos] = 129;
			case 'Â':   szFixed[iPos] = 130;
			case 'Ä':   szFixed[iPos] = 131;
			case 'è':   szFixed[iPos] = 157;
			case 'é':   szFixed[iPos] = 158;
			case 'ê':   szFixed[iPos] = 159;
			case 'ë':   szFixed[iPos] = 160;
			case 'È':   szFixed[iPos] = 134;
			case 'É':   szFixed[iPos] = 135;
			case 'Ê':   szFixed[iPos] = 136;
			case 'Ë':   szFixed[iPos] = 137;
			case 'ì':   szFixed[iPos] = 161;
			case 'í':   szFixed[iPos] = 162;
			case 'î':   szFixed[iPos] = 163;
			case 'ï':   szFixed[iPos] = 164;
			case 'Ì':   szFixed[iPos] = 138;
			case 'Í':   szFixed[iPos] = 139;
			case 'Î':   szFixed[iPos] = 140;
			case 'Ï':   szFixed[iPos] = 141;
			case 'ò':   szFixed[iPos] = 165;
			case 'ó':   szFixed[iPos] = 166;
			case 'ô':   szFixed[iPos] = 167;
			case 'ö':   szFixed[iPos] = 168;
			case 'Ò':   szFixed[iPos] = 142;
			case 'Ó':   szFixed[iPos] = 143;
			case 'Ô':   szFixed[iPos] = 144;
			case 'Ö':   szFixed[iPos] = 145;
			case 'ù':   szFixed[iPos] = 169;
			case 'ú':   szFixed[iPos] = 170;
			case 'û':   szFixed[iPos] = 171;
			case 'ü':   szFixed[iPos] = 172;
			case 'Ù':   szFixed[iPos] = 146;
			case 'Ú':   szFixed[iPos] = 147;
			case 'Û':   szFixed[iPos] = 148;
			case 'Ü':   szFixed[iPos] = 149;
			case 'ñ':   szFixed[iPos] = 174;
			case 'Ñ':   szFixed[iPos] = 173;
			case '¡':   szFixed[iPos] = 64;
			case '¿':   szFixed[iPos] = 175;
			case '`':   szFixed[iPos] = 177;
			case '&':   szFixed[iPos] = 38;
			default:    szFixed[iPos] = string[iPos];
	}
	return szFixed;
}

stock TextDrawSetStringEx(Text:Text_ID, text[])
{
	return TextDrawSetString(Text_ID, Fix_GT(text));
}

stock PlayerTextDrawSetStringEx(playerid, PlayerText:Text_ID, text[])
{
	return PlayerTextDrawSetString(playerid, Text_ID, Fix_GT(text));
}

Segundos_tiempo(segundos)
{
	new gformat[256],
		minutos, horitas, dias;
	if (segundos > 59)
	{
		minutos = segundos / 60;
		segundos = segundos - (minutos * 60);
	}
	if (minutos > 59)
	{
		horitas = minutos / 60;
		minutos = minutos - (horitas * 60);
	}
	if (horitas > 23)
	{
		dias = horitas / 24;
		horitas = horitas - (dias * 24);
	}
	if (dias > 0)
    {
		format(gformat, sizeof gformat, "%d días, %d hrs, %d mins, %d segs", dias, horitas, minutos, segundos);
	}
	else if (horitas > 0)
	{
		format(gformat, sizeof gformat, "%d hrs, %d mins, %d segs", horitas, minutos, segundos);
	}
	else if (minutos > 0)
	{
		format(gformat, sizeof gformat, "%d mins, %d segs", minutos, segundos);
	}
	else
	{
		format(gformat, sizeof gformat, "%d segs", segundos);
	}
	return gformat;
}

DestroyDynamic3DTextLabelEx(&Text3D:labelid)
{
	DestroyDynamic3DTextLabel(labelid);
	labelid = Text3D:INVALID_3DTEXT_ID; return 1;
}

#include "Creative/Lenador.pwn"
